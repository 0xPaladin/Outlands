/*
 howler.js v2.2.4 | (c) 2013-2020, James Simpson of GoldFire Studios | MIT License | howlerjs.com  Spatial Plugin  @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.arrayIteratorImpl = function(L) {
    var t = 0;
    return function() {
        return t < L.length ? {
            done: !1,
            value: L[t++]
        } : {
            done: !0
        }
    }
}
;
$jscomp.arrayIterator = function(L) {
    return {
        next: $jscomp.arrayIteratorImpl(L)
    }
}
;
$jscomp.ASSUME_ES5 = !1;
$jscomp.ASSUME_NO_NATIVE_MAP = !1;
$jscomp.ASSUME_NO_NATIVE_SET = !1;
$jscomp.SIMPLE_FROUND_POLYFILL = !1;
$jscomp.defineProperty = $jscomp.ASSUME_ES5 || "function" == typeof Object.defineProperties ? Object.defineProperty : function(L, t, y) {
    L != Array.prototype && L != Object.prototype && (L[t] = y.value)
}
;
$jscomp.getGlobal = function(L) {
    L = ["object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global, L];
    for (var t = 0; t < L.length; ++t) {
        var y = L[t];
        if (y && y.Math == Math)
            return y
    }
    throw Error("Cannot find global object");
}
;
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function() {
    $jscomp.initSymbol = function() {}
    ;
    $jscomp.global.Symbol || ($jscomp.global.Symbol = $jscomp.Symbol)
}
;
$jscomp.SymbolClass = function(L, t) {
    this.$jscomp$symbol$id_ = L;
    $jscomp.defineProperty(this, "description", {
        configurable: !0,
        writable: !0,
        value: t
    })
}
;
$jscomp.SymbolClass.prototype.toString = function() {
    return this.$jscomp$symbol$id_
}
;
$jscomp.Symbol = function() {
    function L(y) {
        if (this instanceof L)
            throw new TypeError("Symbol is not a constructor");
        return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX + (y || "") + "_" + t++,y)
    }
    var t = 0;
    return L
}();
$jscomp.initSymbolIterator = function() {
    $jscomp.initSymbol();
    var L = $jscomp.global.Symbol.iterator;
    L || (L = $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("Symbol.iterator"));
    "function" != typeof Array.prototype[L] && $jscomp.defineProperty(Array.prototype, L, {
        configurable: !0,
        writable: !0,
        value: function() {
            return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))
        }
    });
    $jscomp.initSymbolIterator = function() {}
}
;
$jscomp.initSymbolAsyncIterator = function() {
    $jscomp.initSymbol();
    var L = $jscomp.global.Symbol.asyncIterator;
    L || (L = $jscomp.global.Symbol.asyncIterator = $jscomp.global.Symbol("Symbol.asyncIterator"));
    $jscomp.initSymbolAsyncIterator = function() {}
}
;
$jscomp.iteratorPrototype = function(L) {
    $jscomp.initSymbolIterator();
    L = {
        next: L
    };
    L[$jscomp.global.Symbol.iterator] = function() {
        return this
    }
    ;
    return L
}
;
$jscomp.iteratorFromArray = function(L, t) {
    $jscomp.initSymbolIterator();
    L instanceof String && (L += "");
    var y = 0
      , H = {
        next: function() {
            if (y < L.length) {
                var F = y++;
                return {
                    value: t(F, L[F]),
                    done: !1
                }
            }
            H.next = function() {
                return {
                    done: !0,
                    value: void 0
                }
            }
            ;
            return H.next()
        }
    };
    H[Symbol.iterator] = function() {
        return H
    }
    ;
    return H
}
;
$jscomp.polyfill = function(L, t, y, H) {
    if (t) {
        y = $jscomp.global;
        L = L.split(".");
        for (H = 0; H < L.length - 1; H++) {
            var F = L[H];
            F in y || (y[F] = {});
            y = y[F]
        }
        L = L[L.length - 1];
        H = y[L];
        t = t(H);
        t != H && null != t && $jscomp.defineProperty(y, L, {
            configurable: !0,
            writable: !0,
            value: t
        })
    }
}
;
$jscomp.polyfill("Array.prototype.keys", function(L) {
    return L ? L : function() {
        return $jscomp.iteratorFromArray(this, function(t) {
            return t
        })
    }
}, "es6", "es3");
$jscomp.checkStringArgs = function(L, t, y) {
    if (null == L)
        throw new TypeError("The 'this' value for String.prototype." + y + " must not be null or undefined");
    if (t instanceof RegExp)
        throw new TypeError("First argument to String.prototype." + y + " must not be a regular expression");
    return L + ""
}
;
$jscomp.polyfill("String.prototype.endsWith", function(L) {
    return L ? L : function(t, y) {
        var H = $jscomp.checkStringArgs(this, t, "endsWith");
        t += "";
        void 0 === y && (y = H.length);
        y = Math.max(0, Math.min(y | 0, H.length));
        for (var F = t.length; 0 < F && 0 < y; )
            if (H[--y] != t[--F])
                return !1;
        return 0 >= F
    }
}, "es6", "es3");
$jscomp.polyfill("String.fromCodePoint", function(L) {
    return L ? L : function(t) {
        for (var y = "", H = 0; H < arguments.length; H++) {
            var F = Number(arguments[H]);
            if (0 > F || 1114111 < F || F !== Math.floor(F))
                throw new RangeError("invalid_code_point " + F);
            65535 >= F ? y += String.fromCharCode(F) : (F -= 65536,
            y += String.fromCharCode(F >>> 10 & 1023 | 55296),
            y += String.fromCharCode(F & 1023 | 56320))
        }
        return y
    }
}, "es6", "es3");
$jscomp.polyfill("Array.prototype.values", function(L) {
    return L ? L : function() {
        return $jscomp.iteratorFromArray(this, function(t, y) {
            return y
        })
    }
}, "es8", "es3");
$jscomp.polyfill("Array.prototype.fill", function(L) {
    return L ? L : function(t, y, H) {
        var F = this.length || 0;
        0 > y && (y = Math.max(0, F + y));
        if (null == H || H > F)
            H = F;
        H = Number(H);
        0 > H && (H = Math.max(0, F + H));
        for (y = Number(y || 0); y < H; y++)
            this[y] = t;
        return this
    }
}, "es6", "es3");
$jscomp.underscoreProtoCanBeSet = function() {
    var L = {
        a: !0
    }
      , t = {};
    try {
        return t.__proto__ = L,
        t.a
    } catch (y) {}
    return !1
}
;
$jscomp.setPrototypeOf = "function" == typeof Object.setPrototypeOf ? Object.setPrototypeOf : $jscomp.underscoreProtoCanBeSet() ? function(L, t) {
    L.__proto__ = t;
    if (L.__proto__ !== t)
        throw new TypeError(L + " is not extensible");
    return L
}
: null;
$jscomp.polyfill("Object.setPrototypeOf", function(L) {
    return L || $jscomp.setPrototypeOf
}, "es6", "es5");
$jscomp.owns = function(L, t) {
    return Object.prototype.hasOwnProperty.call(L, t)
}
;
$jscomp.polyfill("Object.values", function(L) {
    return L ? L : function(t) {
        var y = [], H;
        for (H in t)
            $jscomp.owns(t, H) && y.push(t[H]);
        return y
    }
}, "es8", "es3");
$jscomp.findInternal = function(L, t, y) {
    L instanceof String && (L = String(L));
    for (var H = L.length, F = 0; F < H; F++) {
        var O = L[F];
        if (t.call(y, O, F, L))
            return {
                i: F,
                v: O
            }
    }
    return {
        i: -1,
        v: void 0
    }
}
;
$jscomp.polyfill("Array.prototype.find", function(L) {
    return L ? L : function(t, y) {
        return $jscomp.findInternal(this, t, y).v
    }
}, "es6", "es3");
$jscomp.polyfill("String.prototype.startsWith", function(L) {
    return L ? L : function(t, y) {
        var H = $jscomp.checkStringArgs(this, t, "startsWith");
        t += "";
        var F = H.length
          , L = t.length;
        y = Math.max(0, Math.min(y | 0, H.length));
        for (var V = 0; V < L && y < F; )
            if (H[y++] != t[V++])
                return !1;
        return V >= L
    }
}, "es6", "es3");
$jscomp.polyfill("String.prototype.repeat", function(L) {
    return L ? L : function(t) {
        var y = $jscomp.checkStringArgs(this, null, "repeat");
        if (0 > t || 1342177279 < t)
            throw new RangeError("Invalid count value");
        t |= 0;
        for (var H = ""; t; )
            if (t & 1 && (H += y),
            t >>>= 1)
                y += y;
        return H
    }
}, "es6", "es3");
$jscomp.polyfill("Object.is", function(L) {
    return L ? L : function(t, y) {
        return t === y ? 0 !== t || 1 / t === 1 / y : t !== t && y !== y
    }
}, "es6", "es3");
$jscomp.polyfill("Array.prototype.includes", function(L) {
    return L ? L : function(t, y) {
        var H = this;
        H instanceof String && (H = String(H));
        var F = H.length;
        y = y || 0;
        for (0 > y && (y = Math.max(y + F, 0)); y < F; y++) {
            var L = H[y];
            if (L === t || Object.is(L, t))
                return !0
        }
        return !1
    }
}, "es7", "es3");
$jscomp.polyfill("String.prototype.includes", function(L) {
    return L ? L : function(t, y) {
        return -1 !== $jscomp.checkStringArgs(this, t, "includes").indexOf(t, y || 0)
    }
}, "es6", "es3");
var $lime_init = function(L, t) {
    var y = function(t, y) {
        (function(t, y) {
            function v(a, b) {
                a = Object.create(a);
                for (var c in b)
                    a[c] = b[c];
                b.toString !== Object.prototype.toString && (a.toString = b.toString);
                return a
            }
            function H(a) {
                return a instanceof Array ? new Nf(a) : a.iterator()
            }
            function m(a, b) {
                if (null == b)
                    return null;
                null == b.__id__ && (b.__id__ = y.$haxeUID++);
                var c;
                null == a.hx__closures__ ? a.hx__closures__ = {} : c = a.hx__closures__[b.__id__];
                null == c && (c = b.bind(a),
                a.hx__closures__[b.__id__] = c);
                return c
            }
            t.lime = t.lime || {};
            var h = {}, r = function() {
                return xa.__string_rec(this, "")
            }, N = N || {}, D, Ya = function() {};
            h["lime.app.IModule"] = Ya;
            Ya.__name__ = "lime.app.IModule";
            Ya.__isInterface__ = !0;
            Ya.prototype = {
                __class__: Ya
            };
            var va = function() {
                this.onExit = new Of
            };
            h["lime.app.Module"] = va;
            va.__name__ = "lime.app.Module";
            va.__interfaces__ = [Ya];
            va.prototype = {
                __registerLimeModule: function(a) {},
                __unregisterLimeModule: function(a) {},
                __class__: va
            };
            var L = function(a) {
                this.gameDeviceCache = new tc;
                this.parent = a;
                this.nextUpdate = this.lastUpdate = this.currentUpdate = 0;
                this.framePeriod = -1;
                Ne.init();
                this.accelerometer = Oe.registerSensor(Oj.ACCELEROMETER, 0)
            };
            h["lime._internal.backend.html5.HTML5Application"] = L;
            L.__name__ = "lime._internal.backend.html5.HTML5Application";
            L.prototype = {
                convertKeyCode: function(a) {
                    if (65 <= a && 90 >= a)
                        return a + 32;
                    switch (a) {
                    case 12:
                        return 1073741980;
                    case 16:
                        return 1073742049;
                    case 17:
                        return 1073742048;
                    case 18:
                        return 1073742050;
                    case 19:
                        return 1073741896;
                    case 20:
                        return 1073741881;
                    case 33:
                        return 1073741899;
                    case 34:
                        return 1073741902;
                    case 35:
                        return 1073741901;
                    case 36:
                        return 1073741898;
                    case 37:
                        return 1073741904;
                    case 38:
                        return 1073741906;
                    case 39:
                        return 1073741903;
                    case 40:
                        return 1073741905;
                    case 41:
                        return 1073741943;
                    case 43:
                        return 1073741940;
                    case 44:
                        return 1073741894;
                    case 45:
                        return 1073741897;
                    case 46:
                        return 127;
                    case 91:
                        return 1073742051;
                    case 92:
                        return 1073742055;
                    case 93:
                        return 1073742055;
                    case 95:
                        return 1073742106;
                    case 96:
                        return 1073741922;
                    case 97:
                        return 1073741913;
                    case 98:
                        return 1073741914;
                    case 99:
                        return 1073741915;
                    case 100:
                        return 1073741916;
                    case 101:
                        return 1073741917;
                    case 102:
                        return 1073741918;
                    case 103:
                        return 1073741919;
                    case 104:
                        return 1073741920;
                    case 105:
                        return 1073741921;
                    case 106:
                        return 1073741909;
                    case 107:
                        return 1073741911;
                    case 108:
                        return 1073741923;
                    case 109:
                        return 1073741910;
                    case 110:
                        return 1073741923;
                    case 111:
                        return 1073741908;
                    case 112:
                        return 1073741882;
                    case 113:
                        return 1073741883;
                    case 114:
                        return 1073741884;
                    case 115:
                        return 1073741885;
                    case 116:
                        return 1073741886;
                    case 117:
                        return 1073741887;
                    case 118:
                        return 1073741888;
                    case 119:
                        return 1073741889;
                    case 120:
                        return 1073741890;
                    case 121:
                        return 1073741891;
                    case 122:
                        return 1073741892;
                    case 123:
                        return 1073741893;
                    case 124:
                        return 1073741928;
                    case 125:
                        return 1073741929;
                    case 126:
                        return 1073741930;
                    case 127:
                        return 1073741931;
                    case 128:
                        return 1073741932;
                    case 129:
                        return 1073741933;
                    case 130:
                        return 1073741934;
                    case 131:
                        return 1073741935;
                    case 132:
                        return 1073741936;
                    case 133:
                        return 1073741937;
                    case 134:
                        return 1073741938;
                    case 135:
                        return 1073741939;
                    case 144:
                        return 1073741907;
                    case 145:
                        return 1073741895;
                    case 160:
                        return 94;
                    case 161:
                        return 33;
                    case 163:
                        return 35;
                    case 164:
                        return 36;
                    case 166:
                        return 1073742094;
                    case 167:
                        return 1073742095;
                    case 168:
                        return 1073742097;
                    case 169:
                        return 41;
                    case 170:
                        return 42;
                    case 171:
                        return 96;
                    case 172:
                        return 1073741898;
                    case 173:
                        return 45;
                    case 174:
                        return 1073741953;
                    case 175:
                        return 1073741952;
                    case 176:
                        return 1073742082;
                    case 177:
                        return 1073742083;
                    case 178:
                        return 1073742084;
                    case 179:
                        return 1073742085;
                    case 180:
                        return 1073742089;
                    case 181:
                        return 1073742086;
                    case 182:
                        return 1073741953;
                    case 183:
                        return 1073741952;
                    case 186:
                        return 59;
                    case 187:
                        return 61;
                    case 188:
                        return 44;
                    case 189:
                        return 45;
                    case 190:
                        return 46;
                    case 191:
                        return 47;
                    case 192:
                        return 96;
                    case 193:
                        return 63;
                    case 194:
                        return 1073741923;
                    case 219:
                        return 91;
                    case 220:
                        return 92;
                    case 221:
                        return 93;
                    case 222:
                        return 39;
                    case 223:
                        return 96;
                    case 224:
                        return 1073742051;
                    case 226:
                        return 92
                    }
                    return a
                },
                exec: function() {
                    window.addEventListener("keydown", m(this, this.handleKeyEvent), !1);
                    window.addEventListener("keyup", m(this, this.handleKeyEvent), !1);
                    window.addEventListener("focus", m(this, this.handleWindowEvent), !1);
                    window.addEventListener("blur", m(this, this.handleWindowEvent), !1);
                    window.addEventListener("resize", m(this, this.handleWindowEvent), !1);
                    window.addEventListener("beforeunload", m(this, this.handleWindowEvent), !1);
                    Object.prototype.hasOwnProperty.call(window, "Accelerometer") && window.addEventListener("devicemotion", m(this, this.handleSensorEvent), !1);
                    CanvasRenderingContext2D.prototype.isPointInStroke || (CanvasRenderingContext2D.prototype.isPointInStroke = function(a, b, c) {
                        return !1
                    }
                    );
                    CanvasRenderingContext2D.prototype.isPointInPath || (CanvasRenderingContext2D.prototype.isPointInPath = function(a, b, c) {
                        return !1
                    }
                    );
                    0 == "performance"in window && (window.performance = {});
                    if (0 == "now"in window.performance) {
                        var a = Date.now();
                        performance.timing && performance.timing.navigationStart && (a = performance.timing.navigationStart);
                        window.performance.now = function() {
                            return Date.now() - a
                        }
                    }
                    for (var b = 0, c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; ++d)
                        window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"],
                        window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"] || window[c[d] + "CancelRequestAnimationFrame"];
                    window.requestAnimationFrame || (window.requestAnimationFrame = function(a, c) {
                        var d = window.performance.now()
                          , f = Math.max(0, 16 - (d - b));
                        c = window.setTimeout(function() {
                            a(d + f)
                        }, f);
                        b = d + f;
                        return c
                    }
                    );
                    window.cancelAnimationFrame || (window.cancelAnimationFrame = function(a) {
                        clearTimeout(a)
                    }
                    );
                    window.requestAnimFrame = window.requestAnimationFrame;
                    this.lastUpdate = window.performance.now();
                    this.handleApplicationEvent();
                    return 0
                },
                exit: function() {},
                handleApplicationEvent: function(a) {
                    a = 0;
                    for (var b = this.parent.__windows; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.__backend.updateSize()
                    }
                    this.updateGameDevices();
                    this.currentUpdate = window.performance.now();
                    if (this.currentUpdate >= this.nextUpdate) {
                        this.deltaTime = this.currentUpdate - this.lastUpdate;
                        a = 0;
                        for (b = this.parent.__windows; a < b.length; )
                            c = b[a],
                            ++a,
                            this.parent.onUpdate.dispatch(this.deltaTime | 0),
                            null != c.context && c.onRender.dispatch(c.context);
                        this.nextUpdate = 0 > this.framePeriod ? this.currentUpdate : this.currentUpdate - this.currentUpdate % this.framePeriod + this.framePeriod;
                        this.lastUpdate = this.currentUpdate
                    }
                    window.requestAnimationFrame(m(this, this.handleApplicationEvent))
                },
                handleKeyEvent: function(a) {
                    if (null != this.parent.__window) {
                        var b = this.convertKeyCode(null != a.keyCode ? a.keyCode : a.which)
                          , c = (a.shiftKey ? 3 : 0) | (a.ctrlKey ? 192 : 0) | (a.altKey ? 768 : 0) | (a.metaKey ? 3072 : 0);
                        "keydown" == a.type ? (this.parent.__window.onKeyDown.dispatch(b, c),
                        this.parent.__window.onKeyDown.canceled && a.cancelable && a.preventDefault()) : (this.parent.__window.onKeyUp.dispatch(b, c),
                        this.parent.__window.onKeyUp.canceled && a.cancelable && a.preventDefault())
                    }
                },
                handleSensorEvent: function(a) {
                    this.accelerometer.onUpdate.dispatch(a.accelerationIncludingGravity.x, a.accelerationIncludingGravity.y, a.accelerationIncludingGravity.z)
                },
                handleWindowEvent: function(a) {
                    if (null != this.parent.__window)
                        switch (a.type) {
                        case "blur":
                            this.hidden || (this.parent.__window.onFocusOut.dispatch(),
                            this.parent.__window.onDeactivate.dispatch(),
                            this.hidden = !0);
                            break;
                        case "focus":
                            this.hidden && (this.parent.__window.onFocusIn.dispatch(),
                            this.parent.__window.onActivate.dispatch(),
                            this.hidden = !1);
                            break;
                        case "resize":
                            this.parent.__window.__backend.handleResizeEvent(a);
                            break;
                        case "visibilitychange":
                            window.document.hidden ? this.hidden || (this.parent.__window.onFocusOut.dispatch(),
                            this.parent.__window.onDeactivate.dispatch(),
                            this.hidden = !0) : this.hidden && (this.parent.__window.onFocusIn.dispatch(),
                            this.parent.__window.onActivate.dispatch(),
                            this.hidden = !1)
                        }
                },
                updateGameDevices: function() {
                    var a = mc.__getDeviceData();
                    if (null != a)
                        for (var b, c, d, f, g, k = 0, q = a.length; k < q; )
                            if (b = k++,
                            f = a[b],
                            null != f) {
                                if (!this.gameDeviceCache.h.hasOwnProperty(b)) {
                                    g = new Pj;
                                    g.id = b;
                                    g.connected = f.connected;
                                    c = 0;
                                    for (d = f.buttons.length; c < d; ) {
                                        var p = c++;
                                        g.buttons.push(f.buttons[p].value)
                                    }
                                    c = 0;
                                    for (d = f.axes.length; c < d; )
                                        p = c++,
                                        g.axes.push(f.axes[p]);
                                    "standard" == f.mapping && (g.isGamepad = !0);
                                    this.gameDeviceCache.h[b] = g;
                                    f.connected && (mc.__connect(b),
                                    g.isGamepad && uc.__connect(b))
                                }
                                g = this.gameDeviceCache.h[b];
                                d = mc.devices.h[b];
                                c = uc.devices.h[b];
                                if (f.connected) {
                                    for (var l = 0, h = f.buttons.length; l < h; ) {
                                        var n = l++;
                                        p = f.buttons[n].value;
                                        if (p != g.buttons[n]) {
                                            if (6 == n)
                                                d.onAxisMove.dispatch(f.axes.length, p),
                                                null != c && c.onAxisMove.dispatch(4, p);
                                            else if (7 == n)
                                                d.onAxisMove.dispatch(f.axes.length + 1, p),
                                                null != c && c.onAxisMove.dispatch(5, p);
                                            else if (0 < p ? d.onButtonDown.dispatch(n) : d.onButtonUp.dispatch(n),
                                            null != c) {
                                                switch (n) {
                                                case 0:
                                                    b = 0;
                                                    break;
                                                case 1:
                                                    b = 1;
                                                    break;
                                                case 2:
                                                    b = 2;
                                                    break;
                                                case 3:
                                                    b = 3;
                                                    break;
                                                case 4:
                                                    b = 9;
                                                    break;
                                                case 5:
                                                    b = 10;
                                                    break;
                                                case 8:
                                                    b = 4;
                                                    break;
                                                case 9:
                                                    b = 6;
                                                    break;
                                                case 10:
                                                    b = 7;
                                                    break;
                                                case 11:
                                                    b = 8;
                                                    break;
                                                case 12:
                                                    b = 11;
                                                    break;
                                                case 13:
                                                    b = 12;
                                                    break;
                                                case 14:
                                                    b = 13;
                                                    break;
                                                case 15:
                                                    b = 14;
                                                    break;
                                                case 16:
                                                    b = 5;
                                                    break;
                                                default:
                                                    continue
                                                }
                                                0 < p ? c.onButtonDown.dispatch(b) : c.onButtonUp.dispatch(b)
                                            }
                                            g.buttons[n] = p
                                        }
                                    }
                                    b = 0;
                                    for (p = f.axes.length; b < p; )
                                        l = b++,
                                        f.axes[l] != g.axes[l] && (d.onAxisMove.dispatch(l, f.axes[l]),
                                        null != c && c.onAxisMove.dispatch(l, f.axes[l]),
                                        g.axes[l] = f.axes[l])
                                } else
                                    g.connected && (g.connected = !1,
                                    mc.__disconnect(b),
                                    uc.__disconnect(b))
                            }
                },
                __class__: L
            };
            var F = function() {
                this.onCreateWindow = new Qj;
                this.onUpdate = new Of;
                this.onExit = new Of;
                null == F.current && (F.current = this);
                this.meta = new Ia;
                this.modules = [];
                this.__windowByID = new tc;
                this.__windows = [];
                this.__backend = new L(this);
                this.__registerLimeModule(this);
                this.__preloader = new Rj;
                this.__preloader.onProgress.add(m(this, this.onPreloadProgress));
                this.__preloader.onComplete.add(m(this, this.onPreloadComplete))
            };
            h["lime.app.Application"] = F;
            F.__name__ = "lime.app.Application";
            F.__super__ = va;
            F.prototype = v(va.prototype, {
                addModule: function(a) {
                    a.__registerLimeModule(this);
                    this.modules.push(a)
                },
                exec: function() {
                    F.current = this;
                    return this.__backend.exec()
                },
                onGamepadAxisMove: function(a, b, c) {},
                onGamepadButtonDown: function(a, b) {},
                onGamepadButtonUp: function(a, b) {},
                onGamepadConnect: function(a) {},
                onGamepadDisconnect: function(a) {},
                onJoystickAxisMove: function(a, b, c) {},
                onJoystickButtonDown: function(a, b) {},
                onJoystickButtonUp: function(a, b) {},
                onJoystickConnect: function(a) {},
                onJoystickDisconnect: function(a) {},
                onJoystickHatMove: function(a, b, c) {},
                onKeyDown: function(a, b) {},
                onKeyUp: function(a, b) {},
                onModuleExit: function(a) {},
                onMouseDown: function(a, b, c) {},
                onMouseMove: function(a, b) {},
                onMouseMoveRelative: function(a, b) {},
                onMouseUp: function(a, b, c) {},
                onMouseWheel: function(a, b, c) {},
                onPreloadComplete: function() {},
                onPreloadProgress: function(a, b) {},
                onRenderContextLost: function() {},
                onRenderContextRestored: function(a) {},
                onTextEdit: function(a, b, c) {},
                onTextInput: function(a) {},
                onTouchCancel: function(a) {},
                onTouchEnd: function(a) {},
                onTouchMove: function(a) {},
                onTouchStart: function(a) {},
                onWindowActivate: function() {},
                onWindowClose: function() {},
                onWindowCreate: function() {},
                onWindowDeactivate: function() {},
                onWindowDropFile: function(a) {},
                onWindowEnter: function() {},
                onWindowExpose: function() {},
                onWindowFocusIn: function() {},
                onWindowFocusOut: function() {},
                onWindowFullscreen: function() {},
                onWindowLeave: function() {},
                onWindowMove: function(a, b) {},
                onWindowMinimize: function() {},
                onWindowResize: function(a, b) {},
                onWindowRestore: function() {},
                removeModule: function(a) {
                    null != a && (a.__unregisterLimeModule(this),
                    Q.remove(this.modules, a))
                },
                render: function(a) {},
                update: function(a) {},
                __registerLimeModule: function(a) {
                    a.onUpdate.add(m(this, this.update));
                    a.onExit.add(m(this, this.onModuleExit), !1, 0);
                    a.onExit.add(m(this, this.__onModuleExit), !1, -1E3);
                    for (a = uc.devices.iterator(); a.hasNext(); ) {
                        var b = a.next();
                        this.__onGamepadConnect(b)
                    }
                    uc.onConnect.add(m(this, this.__onGamepadConnect));
                    for (a = mc.devices.iterator(); a.hasNext(); )
                        b = a.next(),
                        this.__onJoystickConnect(b);
                    mc.onConnect.add(m(this, this.__onJoystickConnect));
                    ec.onCancel.add(m(this, this.onTouchCancel));
                    ec.onStart.add(m(this, this.onTouchStart));
                    ec.onMove.add(m(this, this.onTouchMove));
                    ec.onEnd.add(m(this, this.onTouchEnd))
                },
                __removeWindow: function(a) {
                    null != a && this.__windowByID.h.hasOwnProperty(a.id) && (this.__window == a && (this.__window = null),
                    Q.remove(this.__windows, a),
                    this.__windowByID.remove(a.id),
                    a.close(),
                    this.__checkForAllWindowsClosed())
                },
                __checkForAllWindowsClosed: function() {
                    0 == this.__windows.length && Dc.exit(0)
                },
                __onGamepadConnect: function(a) {
                    this.onGamepadConnect(a);
                    var b = this
                      , c = function(c, d) {
                        b.onGamepadAxisMove(a, c, d)
                    };
                    a.onAxisMove.add(c);
                    var d = this;
                    c = function(b) {
                        d.onGamepadButtonDown(a, b)
                    }
                    ;
                    a.onButtonDown.add(c);
                    var f = this;
                    c = function(b) {
                        f.onGamepadButtonUp(a, b)
                    }
                    ;
                    a.onButtonUp.add(c);
                    var g = this;
                    a.onDisconnect.add(function() {
                        g.onGamepadDisconnect(a)
                    })
                },
                __onJoystickConnect: function(a) {
                    this.onJoystickConnect(a);
                    var b = this
                      , c = function(c, d) {
                        b.onJoystickAxisMove(a, c, d)
                    };
                    a.onAxisMove.add(c);
                    var d = this;
                    c = function(b) {
                        d.onJoystickButtonDown(a, b)
                    }
                    ;
                    a.onButtonDown.add(c);
                    var f = this;
                    c = function(b) {
                        f.onJoystickButtonUp(a, b)
                    }
                    ;
                    a.onButtonUp.add(c);
                    var g = this;
                    a.onDisconnect.add(function() {
                        g.onJoystickDisconnect(a)
                    });
                    var k = this;
                    c = function(b, c) {
                        k.onJoystickHatMove(a, b, c)
                    }
                    ;
                    a.onHatMove.add(c)
                },
                __onModuleExit: function(a) {
                    this.onExit.canceled || (this.__unregisterLimeModule(this),
                    this.__backend.exit(),
                    F.current == this && (F.current = null))
                },
                __onWindowClose: function(a) {
                    if (this.__window == a)
                        this.onWindowClose();
                    this.__removeWindow(a)
                },
                __unregisterLimeModule: function(a) {
                    a.onUpdate.remove(m(this, this.update));
                    a.onExit.remove(m(this, this.__onModuleExit));
                    a.onExit.remove(m(this, this.onModuleExit));
                    uc.onConnect.remove(m(this, this.__onGamepadConnect));
                    mc.onConnect.remove(m(this, this.__onJoystickConnect));
                    ec.onCancel.remove(m(this, this.onTouchCancel));
                    ec.onStart.remove(m(this, this.onTouchStart));
                    ec.onMove.remove(m(this, this.onTouchMove));
                    ec.onEnd.remove(m(this, this.onTouchEnd))
                },
                __class__: F
            });
            var V = function() {};
            h.ApplicationMain = V;
            V.__name__ = "ApplicationMain";
            V.main = function() {
                Dc.__registerEntryPoint("Perilous", V.create)
            }
            ;
            V.create = function(a) {
                var b = new Ug;
                mb.init(a);
                b.meta.h.build = "1668";
                b.meta.h.company = "Retronic Games";
                b.meta.h.file = "Perilous";
                b.meta.h.name = "Perilous Shores";
                b.meta.h.packageName = "com.watabou.perilous";
                b.meta.h.version = "1.6.6";
                var c = {
                    allowHighDPI: !0,
                    alwaysOnTop: !1,
                    borderless: !1,
                    element: null,
                    frameRate: 60,
                    height: 0,
                    hidden: !1,
                    maximized: !1,
                    minimized: !1,
                    parameters: {},
                    resizable: !0,
                    title: "Perilous Shores",
                    width: 0,
                    x: null,
                    y: null,
                    context: {
                        antialiasing: 0,
                        background: 16777215,
                        colorDepth: 32,
                        depth: !0,
                        hardware: !0,
                        stencil: !0,
                        type: null,
                        vsync: !0
                    }
                };
                if (null == b.__window && null != a)
                    for (var d = 0, f = Aa.fields(a); d < f.length; ) {
                        var g = f[d];
                        ++d;
                        Object.prototype.hasOwnProperty.call(c, g) ? c[g] = Aa.field(a, g) : Object.prototype.hasOwnProperty.call(c.context, g) && (c.context[g] = Aa.field(a, g))
                    }
                b.createWindow(c);
                var k = new Ih(new Vg);
                b.__preloader.onProgress.add(function(a, b) {
                    k.update(a, b)
                });
                b.__preloader.onComplete.add(function() {
                    k.start()
                });
                var q = b.__window.stage;
                k.onComplete.add(function() {
                    V.start(q)
                });
                d = 0;
                for (f = mb.preloadLibraries; d < f.length; )
                    a = f[d],
                    ++d,
                    b.__preloader.addLibrary(a);
                d = 0;
                for (f = mb.preloadLibraryNames; d < f.length; )
                    a = f[d],
                    ++d,
                    b.__preloader.addLibraryName(a);
                b.__preloader.load();
                b.exec()
            }
            ;
            V.start = function(a) {
                if (a.__uncaughtErrorEvents.__enabled)
                    try {
                        var b = a.getChildAt(0);
                        null != b && b instanceof hb || (b = new Pf,
                        a.addChild(b));
                        new vc(b);
                        a.dispatchEvent(new ya("resize",!1,!1));
                        a.window.__fullscreen && a.dispatchEvent(new kf("fullScreen",!1,!1,!0,!0))
                    } catch (c) {
                        Ua.lastError = c,
                        b = aa.caught(c).unwrap(),
                        a.__handleError(b)
                    }
                else
                    b = a.getChildAt(0),
                    null != b && b instanceof hb || (b = new Pf,
                    a.addChild(b)),
                    new vc(b),
                    a.dispatchEvent(new ya("resize",!1,!1)),
                    a.window.__fullscreen && a.dispatchEvent(new kf("fullScreen",!1,!1,!0,!0))
            }
            ;
            var O = function() {};
            h["openfl.events.IEventDispatcher"] = O;
            O.__name__ = "openfl.events.IEventDispatcher";
            O.__isInterface__ = !0;
            var qa = function(a) {
                null != a && (this.__targetDispatcher = a)
            };
            h["openfl.events.EventDispatcher"] = qa;
            qa.__name__ = "openfl.events.EventDispatcher";
            qa.__interfaces__ = [O];
            qa.prototype = {
                addEventListener: function(a, b, c, d, f) {
                    null == f && (f = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    if (null != b)
                        if (null == this.__eventMap && (this.__eventMap = new Ia,
                        this.__iterators = new Ia),
                        Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)) {
                            p = this.__eventMap.h[a];
                            for (var g = 0, k = p.length; g < k; ) {
                                var q = g++;
                                if (p[q].match(b, c))
                                    return
                            }
                            a = this.__iterators.h[a];
                            for (g = 0; g < a.length; )
                                k = a[g],
                                ++g,
                                k.active && k.copy();
                            this.__addListenerByPriority(p, new Qf(b,c,d,f))
                        } else {
                            var p = [];
                            p.push(new Qf(b,c,d,f));
                            k = new Wg(p);
                            this.__eventMap.h[a] = p;
                            this.__iterators.h[a] = [k]
                        }
                },
                dispatchEvent: function(a) {
                    a.target = null != this.__targetDispatcher ? this.__targetDispatcher : this;
                    return this.__dispatchEvent(a)
                },
                hasEventListener: function(a) {
                    return null == this.__eventMap ? !1 : Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)
                },
                removeEventListener: function(a, b, c) {
                    null == c && (c = !1);
                    if (null != this.__eventMap && null != b) {
                        var d = this.__eventMap.h[a];
                        if (null != d) {
                            for (var f = this.__iterators.h[a], g = 0, k = d.length; g < k; ) {
                                var q = g++;
                                if (d[q].match(b, c)) {
                                    for (b = 0; b < f.length; )
                                        c = f[b],
                                        ++b,
                                        c.remove(d[q], q);
                                    d.splice(q, 1);
                                    break
                                }
                            }
                            0 == d.length && (d = this.__eventMap,
                            f = a,
                            Object.prototype.hasOwnProperty.call(d.h, f) && delete d.h[f],
                            d = this.__iterators,
                            f = a,
                            Object.prototype.hasOwnProperty.call(d.h, f) && delete d.h[f]);
                            0 >= Object.keys(this.__eventMap.h).length && (this.__iterators = this.__eventMap = null)
                        }
                    }
                },
                __dispatchEvent: function(a) {
                    if (null == this.__eventMap || null == a)
                        return !0;
                    var b = a.type
                      , c = this.__eventMap.h[b];
                    if (null == c)
                        return !0;
                    null == a.target && (a.target = null != this.__targetDispatcher ? this.__targetDispatcher : this);
                    a.currentTarget = this;
                    var d = 1 == a.eventPhase;
                    b = this.__iterators.h[b];
                    var f = b[0];
                    f.active && (f = new Wg(c),
                    b.push(f));
                    f.start();
                    for (var g = f; g.hasNext(); ) {
                        var k = g.next();
                        if (null != k && k.useCapture == d) {
                            if (k.useWeakReference && null != k.weakRefCallback) {
                                var q = k.weakRefCallback.deref();
                                if (null == q)
                                    q = f.index - 1,
                                    c.splice(q, 1),
                                    f.remove(k, q);
                                else if (null != Sa.get_current() && null != Sa.get_current().stage && Sa.get_current().stage.__uncaughtErrorEvents.__enabled)
                                    try {
                                        q(a)
                                    } catch (p) {
                                        Ua.lastError = p,
                                        k = aa.caught(p).unwrap(),
                                        a instanceof ng || Sa.get_current().stage.__handleError(k)
                                    }
                                else
                                    q(a)
                            } else if (null != Sa.get_current() && null != Sa.get_current().stage && Sa.get_current().stage.__uncaughtErrorEvents.__enabled)
                                try {
                                    k.callback(a)
                                } catch (p) {
                                    Ua.lastError = p,
                                    k = aa.caught(p).unwrap(),
                                    a instanceof ng || Sa.get_current().stage.__handleError(k)
                                }
                            else
                                k.callback(a);
                            if (a.__isCanceledNow)
                                break
                        }
                    }
                    f.stop();
                    f != b[0] ? Q.remove(b, f) : f.reset(c);
                    return !a.isDefaultPrevented()
                },
                __addListenerByPriority: function(a, b) {
                    for (var c = a.length, d = c, f = 0; f < c; ) {
                        var g = f++;
                        if (a[g].priority < b.priority) {
                            d = g;
                            break
                        }
                    }
                    a.splice(d, 0, b)
                },
                __class__: qa
            };
            var jb = function() {};
            h["openfl.display.IBitmapDrawable"] = jb;
            jb.__name__ = "openfl.display.IBitmapDrawable";
            jb.__isInterface__ = !0;
            jb.prototype = {
                __class__: jb
            };
            var ua = {
                toIntVector: function(a, b, c, d) {
                    return new Xg(b,c,d)
                },
                toFloatVector: function(a, b, c, d) {
                    return new Pe(b,c,d,!0)
                },
                toObjectVector: function(a, b, c, d) {
                    return new og(b,c,d,!0)
                }
            }
              , ra = function(a, b, c) {
                this.__pool = new pa;
                this.inactiveObjects = this.activeObjects = 0;
                this.__inactiveObject1 = this.__inactiveObject0 = null;
                this.__inactiveObjectList = new $a;
                null != a && (this.create = a);
                null != b && (this.clean = b);
                null != c && this.set_size(c)
            };
            h["lime.utils.ObjectPool"] = ra;
            ra.__name__ = "lime.utils.ObjectPool";
            ra.prototype = {
                clean: function(a) {},
                create: function() {
                    return null
                },
                get: function() {
                    var a = null;
                    if (0 < this.inactiveObjects)
                        null != this.__inactiveObject0 ? (a = this.__inactiveObject0,
                        this.__inactiveObject0 = null) : null != this.__inactiveObject1 ? (a = this.__inactiveObject1,
                        this.__inactiveObject1 = null) : (a = this.__inactiveObjectList.pop(),
                        0 < this.__inactiveObjectList.length && (this.__inactiveObject0 = this.__inactiveObjectList.pop()),
                        0 < this.__inactiveObjectList.length && (this.__inactiveObject1 = this.__inactiveObjectList.pop())),
                        this.inactiveObjects--,
                        this.activeObjects++;
                    else if (null == this.__size || this.activeObjects < this.__size)
                        a = this.create(),
                        null != a && (this.__pool.set(a, !0),
                        this.activeObjects++);
                    return a
                },
                release: function(a) {
                    this.activeObjects--;
                    null == this.__size || this.activeObjects + this.inactiveObjects < this.__size ? (this.clean(a),
                    null == this.__inactiveObject0 ? this.__inactiveObject0 = a : null == this.__inactiveObject1 ? this.__inactiveObject1 = a : this.__inactiveObjectList.add(a),
                    this.inactiveObjects++) : this.__pool.remove(a)
                },
                __removeInactive: function(a) {
                    if (!(0 >= a || 0 == this.inactiveObjects) && (null != this.__inactiveObject0 && (this.__pool.remove(this.__inactiveObject0),
                    this.__inactiveObject0 = null,
                    this.inactiveObjects--,
                    --a),
                    0 != a && 0 != this.inactiveObjects && (null != this.__inactiveObject1 && (this.__pool.remove(this.__inactiveObject1),
                    this.__inactiveObject1 = null,
                    this.inactiveObjects--,
                    --a),
                    0 != a && 0 != this.inactiveObjects)))
                        for (var b = this.__inactiveObjectList.h; null != b; ) {
                            var c = b.item;
                            b = b.next;
                            this.__pool.remove(c);
                            this.__inactiveObjectList.remove(c);
                            this.inactiveObjects--;
                            --a;
                            if (0 == a || 0 == this.inactiveObjects)
                                break
                        }
                },
                set_size: function(a) {
                    if (null == a)
                        this.__size = null;
                    else {
                        var b = this.inactiveObjects + this.activeObjects;
                        this.__size = a;
                        if (b > a)
                            this.__removeInactive(b - a);
                        else if (a > b)
                            for (var c = 0, d = a - b; c < d; )
                                if (c++,
                                b = this.create(),
                                null != b)
                                    this.__pool.set(b, !1),
                                    this.__inactiveObjectList.add(b),
                                    this.inactiveObjects++;
                                else
                                    break
                    }
                    return a
                },
                __class__: ra,
                __properties__: {
                    set_size: "set_size"
                }
            };
            var ma = function() {};
            h["haxe.IMap"] = ma;
            ma.__name__ = "haxe.IMap";
            ma.__isInterface__ = !0;
            ma.prototype = {
                __class__: ma
            };
            var pa = function() {
                this.h = {
                    __keys__: {}
                }
            };
            h["haxe.ds.ObjectMap"] = pa;
            pa.__name__ = "haxe.ds.ObjectMap";
            pa.__interfaces__ = [ma];
            pa.prototype = {
                set: function(a, b) {
                    var c = a.__id__;
                    null == c && (c = a.__id__ = y.$haxeUID++);
                    this.h[c] = b;
                    this.h.__keys__[c] = a
                },
                get: function(a) {
                    return this.h[a.__id__]
                },
                remove: function(a) {
                    a = a.__id__;
                    if (null == this.h.__keys__[a])
                        return !1;
                    delete this.h[a];
                    delete this.h.__keys__[a];
                    return !0
                },
                keys: function() {
                    var a = [], b;
                    for (b in this.h.__keys__)
                        this.h.hasOwnProperty(b) && a.push(this.h.__keys__[b]);
                    return new Nf(a)
                },
                iterator: function() {
                    return {
                        ref: this.h,
                        it: this.keys(),
                        hasNext: function() {
                            return this.it.hasNext()
                        },
                        next: function() {
                            var a = this.it.next();
                            return this.ref[a.__id__]
                        }
                    }
                },
                __class__: pa
            };
            var $a = function() {
                this.length = 0
            };
            h["haxe.ds.List"] = $a;
            $a.__name__ = "haxe.ds.List";
            $a.prototype = {
                add: function(a) {
                    a = new Jh(a,null);
                    null == this.h ? this.h = a : this.q.next = a;
                    this.q = a;
                    this.length++
                },
                push: function(a) {
                    this.h = a = new Jh(a,this.h);
                    null == this.q && (this.q = a);
                    this.length++
                },
                pop: function() {
                    if (null == this.h)
                        return null;
                    var a = this.h.item;
                    this.h = this.h.next;
                    null == this.h && (this.q = null);
                    this.length--;
                    return a
                },
                isEmpty: function() {
                    return null == this.h
                },
                clear: function() {
                    this.q = this.h = null;
                    this.length = 0
                },
                remove: function(a) {
                    for (var b = null, c = this.h; null != c; ) {
                        if (c.item == a)
                            return null == b ? this.h = c.next : b.next = c.next,
                            this.q == c && (this.q = b),
                            this.length--,
                            !0;
                        b = c;
                        c = c.next
                    }
                    return !1
                },
                iterator: function() {
                    return new Sj(this.h)
                },
                __class__: $a
            };
            var ca = function() {
                qa.call(this);
                this.__alpha = this.__drawableType = 1;
                this.__blendMode = 10;
                this.__cacheAsBitmap = !1;
                this.__transform = new ta;
                this.__visible = !0;
                this.__rotationSine = this.__rotation = 0;
                this.__worldAlpha = this.__scaleY = this.__scaleX = this.__rotationCosine = 1;
                this.__worldBlendMode = 10;
                this.__worldTransform = new ta;
                this.__worldColorTransform = new Kb;
                this.__renderTransform = new ta;
                this.__worldVisible = !0;
                this.set_name("instance" + ++ca.__instanceCount);
                null != ca.__initStage && (this.stage = ca.__initStage,
                ca.__initStage = null,
                this.stage.addChild(this))
            };
            h["openfl.display.DisplayObject"] = ca;
            ca.__name__ = "openfl.display.DisplayObject";
            ca.__interfaces__ = [jb];
            ca.__super__ = qa;
            ca.prototype = v(qa.prototype, {
                addEventListener: function(a, b, c, d, f) {
                    null == f && (f = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    switch (a) {
                    case "activate":
                    case "deactivate":
                    case "enterFrame":
                    case "exitFrame":
                    case "frameConstructed":
                    case "render":
                        Object.prototype.hasOwnProperty.call(ca.__broadcastEvents.h, a) || (ca.__broadcastEvents.h[a] = []);
                        var g = ca.__broadcastEvents.h[a];
                        -1 == g.indexOf(this) && g.push(this);
                        break;
                    case "clearDOM":
                    case "renderCairo":
                    case "renderCanvas":
                    case "renderDOM":
                    case "renderOpenGL":
                        null == this.__customRenderEvent && (this.__customRenderEvent = new Kh(null),
                        this.__customRenderEvent.objectColorTransform = new Kb,
                        this.__customRenderEvent.objectMatrix = new ta,
                        this.__customRenderClear = !0)
                    }
                    qa.prototype.addEventListener.call(this, a, b, c, d, f)
                },
                dispatchEvent: function(a) {
                    if (a instanceof Fb) {
                        var b = this.__getRenderTransform();
                        a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
                        b = this.__getRenderTransform();
                        a.stageY = a.localX * b.b + a.localY * b.d + b.ty
                    } else
                        a instanceof Vd && (b = this.__getRenderTransform(),
                        a.stageX = a.localX * b.a + a.localY * b.c + b.tx,
                        b = this.__getRenderTransform(),
                        a.stageY = a.localX * b.b + a.localY * b.d + b.ty);
                    a.target = this;
                    return this.__dispatchWithCapture(a)
                },
                getBounds: function(a) {
                    var b = ta.__pool.get();
                    if (null != a && a != this) {
                        b.copyFrom(this.__getWorldTransform());
                        var c = ta.__pool.get();
                        c.copyFrom(a.__getWorldTransform());
                        c.invert();
                        b.concat(c);
                        ta.__pool.release(c)
                    } else
                        b.identity();
                    a = new oa;
                    this.__getBounds(a, b);
                    ta.__pool.release(b);
                    return a
                },
                getRect: function(a) {
                    return this.getBounds(a)
                },
                globalToLocal: function(a) {
                    return this.__globalToLocal(a, new B)
                },
                hitTestPoint: function(a, b, c) {
                    null == c && (c = !1);
                    return null != this.stage ? this.__hitTest(a, b, c, null, !1, this) : !1
                },
                localToGlobal: function(a) {
                    return this.__getRenderTransform().transformPoint(a)
                },
                removeEventListener: function(a, b, c) {
                    null == c && (c = !1);
                    qa.prototype.removeEventListener.call(this, a, b, c);
                    switch (a) {
                    case "activate":
                    case "deactivate":
                    case "enterFrame":
                    case "exitFrame":
                    case "frameConstructed":
                    case "render":
                        this.hasEventListener(a) || Object.prototype.hasOwnProperty.call(ca.__broadcastEvents.h, a) && Q.remove(ca.__broadcastEvents.h[a], this);
                        break;
                    case "clearDOM":
                    case "renderCairo":
                    case "renderCanvas":
                    case "renderDOM":
                    case "renderOpenGL":
                        this.hasEventListener("clearDOM") || this.hasEventListener("renderCairo") || this.hasEventListener("renderCanvas") || this.hasEventListener("renderDOM") || this.hasEventListener("renderOpenGL") || (this.__customRenderEvent = null)
                    }
                },
                __cleanup: function() {
                    this.__context = this.__canvas = this.__cairo = null;
                    null != this.__graphics && this.__graphics.__cleanup();
                    null != this.__cacheBitmap && (this.__cacheBitmap.__cleanup(),
                    this.__cacheBitmap = null);
                    null != this.__cacheBitmapData && (this.__cacheBitmapData.dispose(),
                    this.__cacheBitmapData = null)
                },
                __dispatch: function(a) {
                    if (null != this.__eventMap && this.hasEventListener(a.type)) {
                        var b = qa.prototype.__dispatchEvent.call(this, a);
                        return a.__isCanceled ? !0 : b
                    }
                    return !0
                },
                __dispatchChildren: function(a) {},
                __dispatchEvent: function(a) {
                    var b = a.bubbles ? this.parent : null
                      , c = qa.prototype.__dispatchEvent.call(this, a);
                    if (a.__isCanceled)
                        return !0;
                    null != b && b != this && (a.eventPhase = 3,
                    null == a.target && (a.target = this),
                    b.__dispatchEvent(a));
                    return c
                },
                __dispatchWithCapture: function(a) {
                    null == a.target && (a.target = this);
                    if (null != this.parent)
                        if (a.eventPhase = 1,
                        this.parent == this.stage)
                            this.parent.__dispatch(a);
                        else {
                            for (var b = ca.__tempStack.get(), c = this.parent, d = 0; null != c; )
                                b.set(d, c),
                                c = c.parent,
                                ++d;
                            c = 0;
                            for (var f = d; c < f; ) {
                                var g = c++;
                                b.get(d - g - 1).__dispatch(a)
                            }
                            ca.__tempStack.release(b)
                        }
                    a.eventPhase = 2;
                    return this.__dispatchEvent(a)
                },
                __enterFrame: function(a) {},
                __getBounds: function(a, b) {
                    null != this.__graphics && this.__graphics.__getBounds(a, b)
                },
                __getCursor: function() {
                    return null
                },
                __getFilterBounds: function(a, b) {
                    this.__getRenderBounds(a, b);
                    if (null != this.__filters) {
                        b = oa.__pool.get();
                        for (var c = 0, d = this.__filters; c < d.length; ) {
                            var f = d[c];
                            ++c;
                            b.__expand(-f.__leftExtension, -f.__topExtension, f.__leftExtension + f.__rightExtension, f.__topExtension + f.__bottomExtension)
                        }
                        a.width += b.width;
                        a.height += b.height;
                        a.x += b.x;
                        a.y += b.y;
                        oa.__pool.release(b)
                    }
                },
                __getInteractive: function(a) {
                    return !1
                },
                __getLocalBounds: function(a) {
                    this.__getBounds(a, this.__transform);
                    a.x -= this.__transform.tx;
                    a.y -= this.__transform.ty
                },
                __getRenderBounds: function(a, b) {
                    if (null == this.__scrollRect)
                        this.__getBounds(a, b);
                    else {
                        var c = oa.__pool.get();
                        c.copyFrom(this.__scrollRect);
                        c.__transform(c, b);
                        a.__expand(c.x, c.y, c.width, c.height);
                        oa.__pool.release(c)
                    }
                },
                __getRenderTransform: function() {
                    this.__getWorldTransform();
                    return this.__renderTransform
                },
                __getWorldTransform: function() {
                    if (this.__transformDirty || this.__worldTransformInvalid) {
                        var a = []
                          , b = this;
                        if (null == this.parent)
                            this.__update(!0, !1);
                        else
                            for (; b != this.stage && (a.push(b),
                            b = b.parent,
                            null != b); )
                                ;
                        for (var c = a.length; 0 <= --c; )
                            b = a[c],
                            b.__update(!0, !1)
                    }
                    return this.__worldTransform
                },
                __globalToLocal: function(a, b) {
                    this.__getRenderTransform();
                    if (a == b) {
                        var c = this.__renderTransform
                          , d = c.a * c.d - c.b * c.c;
                        if (0 == d)
                            a.x = -c.tx,
                            a.y = -c.ty;
                        else {
                            var f = 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
                            a.y = 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
                            a.x = f
                        }
                    } else
                        c = this.__renderTransform,
                        d = c.a * c.d - c.b * c.c,
                        b.x = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx)),
                        c = this.__renderTransform,
                        d = c.a * c.d - c.b * c.c,
                        b.y = 0 == d ? -c.ty : 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
                    return b
                },
                __hitTest: function(a, b, c, d, f, g) {
                    if (null != this.__graphics) {
                        if (!g.__visible || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
                            return !1;
                        if (this.__graphics.__hitTest(a, b, c, this.__getRenderTransform()))
                            return null == d || f || d.push(g),
                            !0
                    }
                    return !1
                },
                __hitTestMask: function(a, b) {
                    return null != this.__graphics && this.__graphics.__hitTest(a, b, !0, this.__getRenderTransform()) ? !0 : !1
                },
                __readGraphicsData: function(a, b) {
                    null != this.__graphics && this.__graphics.__readGraphicsData(a)
                },
                __setParentRenderDirty: function() {
                    var a = null != this.__renderParent ? this.__renderParent : this.parent;
                    null == a || a.__renderDirty || (a.__renderDirty = !0,
                    a.__setParentRenderDirty())
                },
                __setStageReference: function(a) {
                    this.stage = a
                },
                __setTransformDirty: function() {
                    this.__transformDirty || (this.__transformDirty = !0,
                    this.__setWorldTransformInvalid(),
                    this.__setParentRenderDirty())
                },
                __setWorldTransformInvalid: function() {
                    this.__worldTransformInvalid = !0
                },
                __update: function(a, b) {
                    var c = null != this.__renderParent ? this.__renderParent : this.parent;
                    this.__isMask && null == c && (c = this.__maskTarget);
                    this.__renderable = this.__visible && 0 != this.__scaleX && 0 != this.__scaleY && !this.__isMask && (null == c || !c.__isMask);
                    this.__updateTransforms();
                    this.__worldTransformInvalid = this.__transformDirty = !1;
                    if (!a)
                        if (ca.__supportDOM && (this.__renderTransformChanged = !this.__renderTransform.equals(this.__renderTransformCache),
                        null == this.__renderTransformCache ? this.__renderTransformCache = this.__renderTransform.clone() : this.__renderTransformCache.copyFrom(this.__renderTransform)),
                        null != c) {
                            if (ca.__supportDOM) {
                                var d = c.__worldVisible && this.__visible;
                                this.__worldVisibleChanged = this.__worldVisible != d;
                                this.__worldVisible = d
                            }
                            d = this.get_alpha() * c.__worldAlpha;
                            this.__worldAlphaChanged = this.__worldAlpha != d;
                            this.__worldAlpha = d;
                            null != this.__objectTransform ? (this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform),
                            this.__worldColorTransform.__combine(c.__worldColorTransform)) : this.__worldColorTransform.__copyFrom(c.__worldColorTransform);
                            this.__worldBlendMode = null == this.__blendMode || 10 == this.__blendMode ? c.__worldBlendMode : this.__blendMode;
                            this.__worldShader = null == this.__shader ? c.__shader : this.__shader;
                            this.__worldScale9Grid = null == this.__scale9Grid ? c.__scale9Grid : this.__scale9Grid
                        } else
                            this.__worldAlpha = this.get_alpha(),
                            ca.__supportDOM && (this.__worldVisibleChanged = this.__worldVisible != this.__visible,
                            this.__worldVisible = this.__visible),
                            this.__worldAlphaChanged = this.__worldAlpha != this.get_alpha(),
                            null != this.__objectTransform ? this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform) : this.__worldColorTransform.__identity(),
                            this.__worldBlendMode = this.__blendMode,
                            this.__worldShader = this.__shader,
                            this.__worldScale9Grid = this.__scale9Grid;
                    b && null != this.get_mask() && this.get_mask().__update(a, !0)
                },
                __updateTransforms: function(a) {
                    var b = null != a;
                    a = b ? a : this.__transform;
                    null == this.__worldTransform && (this.__worldTransform = new ta);
                    null == this.__renderTransform && (this.__renderTransform = new ta);
                    var c = null != this.__renderParent ? this.__renderParent : this.parent;
                    if (b || null == this.parent)
                        this.__worldTransform.copyFrom(a);
                    else {
                        var d = this.parent.__worldTransform
                          , f = this.__worldTransform;
                        f.a = a.a * d.a + a.b * d.c;
                        f.b = a.a * d.b + a.b * d.d;
                        f.c = a.c * d.a + a.d * d.c;
                        f.d = a.c * d.b + a.d * d.d;
                        f.tx = a.tx * d.a + a.ty * d.c + d.tx;
                        f.ty = a.tx * d.b + a.ty * d.d + d.ty
                    }
                    b || null == c ? this.__renderTransform.copyFrom(a) : (d = c.__renderTransform,
                    f = this.__renderTransform,
                    f.a = a.a * d.a + a.b * d.c,
                    f.b = a.a * d.b + a.b * d.d,
                    f.c = a.c * d.a + a.d * d.c,
                    f.d = a.c * d.b + a.d * d.d,
                    f.tx = a.tx * d.a + a.ty * d.c + d.tx,
                    f.ty = a.tx * d.b + a.ty * d.d + d.ty);
                    null != this.__scrollRect && (b = this.__renderTransform,
                    a = -this.__scrollRect.x,
                    c = -this.__scrollRect.y,
                    b.tx = a * b.a + c * b.c + b.tx,
                    b.ty = a * b.b + c * b.d + b.ty)
                },
                get_alpha: function() {
                    return this.__alpha
                },
                set_alpha: function(a) {
                    1 < a && (a = 1);
                    0 > a && (a = 0);
                    a == this.__alpha || this.get_cacheAsBitmap() || this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty());
                    return this.__alpha = a
                },
                get_blendMode: function() {
                    return this.__blendMode
                },
                set_blendMode: function(a) {
                    null == a && (a = 10);
                    a == this.__blendMode || this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty());
                    return this.__blendMode = a
                },
                get_cacheAsBitmap: function() {
                    return null == this.__filters ? this.__cacheAsBitmap : !0
                },
                get_filters: function() {
                    return null == this.__filters ? [] : this.__filters.slice()
                },
                set_filters: function(a) {
                    if (null != a && 0 < a.length) {
                        for (var b = [], c = 0; c < a.length; ) {
                            var d = a[c];
                            ++c;
                            d = d.clone();
                            d.__renderDirty = !0;
                            b.push(d)
                        }
                        this.__filters = b;
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty())
                    } else
                        null != this.__filters && (this.__filters = null,
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty()));
                    return a
                },
                get_height: function() {
                    var a = oa.__pool.get();
                    this.__getLocalBounds(a);
                    var b = a.height;
                    oa.__pool.release(a);
                    return b
                },
                set_height: function(a) {
                    var b = oa.__pool.get()
                      , c = ta.__pool.get();
                    c.identity();
                    this.__getBounds(b, c);
                    a != b.height ? this.set_scaleY(a / b.height) : this.set_scaleY(1);
                    oa.__pool.release(b);
                    ta.__pool.release(c);
                    return a
                },
                get_loaderInfo: function() {
                    return null != this.stage ? Ec.current.__loaderInfo : null
                },
                get_mask: function() {
                    return this.__mask
                },
                set_mask: function(a) {
                    if (a == this.__mask)
                        return a;
                    a != this.__mask && (this.__setTransformDirty(),
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    if (null != this.__mask) {
                        this.__mask.__isMask = !1;
                        this.__mask.__maskTarget = null;
                        this.__mask.__setTransformDirty();
                        var b = this.__mask;
                        b.__renderDirty || (b.__renderDirty = !0,
                        b.__setParentRenderDirty())
                    }
                    null != a && (a.__isMask = !0,
                    a.__maskTarget = this,
                    a.__setWorldTransformInvalid());
                    null != this.__cacheBitmap && this.__cacheBitmap.get_mask() != a && this.__cacheBitmap.set_mask(a);
                    return this.__mask = a
                },
                get_mouseX: function() {
                    var a = null != this.stage ? this.stage.__mouseX : Ec.current.stage.__mouseX
                      , b = null != this.stage ? this.stage.__mouseY : Ec.current.stage.__mouseY
                      , c = this.__getRenderTransform()
                      , d = c.a * c.d - c.b * c.c;
                    return 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx))
                },
                get_mouseY: function() {
                    var a = null != this.stage ? this.stage.__mouseX : Ec.current.stage.__mouseX
                      , b = null != this.stage ? this.stage.__mouseY : Ec.current.stage.__mouseY
                      , c = this.__getRenderTransform()
                      , d = c.a * c.d - c.b * c.c;
                    return 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a))
                },
                get_name: function() {
                    return this.__name
                },
                set_name: function(a) {
                    return this.__name = a
                },
                get_root: function() {
                    return null != this.stage ? Ec.current : null
                },
                get_rotation: function() {
                    return this.__rotation
                },
                set_rotation: function(a) {
                    if (a != this.__rotation) {
                        a %= 360;
                        180 < a ? a -= 360 : -180 > a && (a += 360);
                        this.__rotation = a;
                        var b = Math.PI / 180 * this.__rotation;
                        this.__rotationSine = Math.sin(b);
                        this.__rotationCosine = Math.cos(b);
                        this.__transform.a = this.__rotationCosine * this.__scaleX;
                        this.__transform.b = this.__rotationSine * this.__scaleX;
                        this.__transform.c = -this.__rotationSine * this.__scaleY;
                        this.__transform.d = this.__rotationCosine * this.__scaleY;
                        this.__setTransformDirty()
                    }
                    return a
                },
                get_scaleX: function() {
                    return this.__scaleX
                },
                set_scaleX: function(a) {
                    if (a != this.__scaleX)
                        if (this.__scaleX = a,
                        0 == this.__transform.b)
                            a != this.__transform.a && this.__setTransformDirty(),
                            this.__transform.a = a;
                        else {
                            var b = this.__rotationCosine * a
                              , c = this.__rotationSine * a;
                            this.__transform.a == b && this.__transform.b == c || this.__setTransformDirty();
                            this.__transform.a = b;
                            this.__transform.b = c
                        }
                    return a
                },
                get_scaleY: function() {
                    return this.__scaleY
                },
                set_scaleY: function(a) {
                    if (a != this.__scaleY)
                        if (this.__scaleY = a,
                        0 == this.__transform.c)
                            a != this.__transform.d && this.__setTransformDirty(),
                            this.__transform.d = a;
                        else {
                            var b = -this.__rotationSine * a
                              , c = this.__rotationCosine * a;
                            this.__transform.d == c && this.__transform.c == b || this.__setTransformDirty();
                            this.__transform.c = b;
                            this.__transform.d = c
                        }
                    return a
                },
                get_scrollRect: function() {
                    return null == this.__scrollRect ? null : this.__scrollRect.clone()
                },
                get_transform: function() {
                    null == this.__objectTransform && (this.__objectTransform = new Lh(this));
                    return this.__objectTransform
                },
                set_transform: function(a) {
                    if (null == a)
                        throw new Rf("Parameter transform must be non-null.");
                    null == this.__objectTransform && (this.__objectTransform = new Lh(this));
                    this.__setTransformDirty();
                    this.__objectTransform.set_matrix(a.get_matrix());
                    if (!this.__objectTransform.__colorTransform.__equals(a.__colorTransform, !0) || !this.get_cacheAsBitmap() && this.__objectTransform.__colorTransform.alphaMultiplier != a.__colorTransform.alphaMultiplier)
                        this.__objectTransform.__colorTransform.__copyFrom(a.get_colorTransform()),
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty());
                    return this.__objectTransform
                },
                get_visible: function() {
                    return this.__visible
                },
                set_visible: function(a) {
                    a == this.__visible || this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty());
                    return this.__visible = a
                },
                get_width: function() {
                    var a = oa.__pool.get();
                    this.__getLocalBounds(a);
                    var b = a.width;
                    oa.__pool.release(a);
                    return b
                },
                set_width: function(a) {
                    var b = oa.__pool.get()
                      , c = ta.__pool.get();
                    c.identity();
                    this.__getBounds(b, c);
                    a != b.width ? this.set_scaleX(a / b.width) : this.set_scaleX(1);
                    oa.__pool.release(b);
                    ta.__pool.release(c);
                    return a
                },
                get_x: function() {
                    return this.__transform.tx
                },
                set_x: function(a) {
                    a != this.__transform.tx && this.__setTransformDirty();
                    return this.__transform.tx = a
                },
                get_y: function() {
                    return this.__transform.ty
                },
                set_y: function(a) {
                    a != this.__transform.ty && this.__setTransformDirty();
                    return this.__transform.ty = a
                },
                __class__: ca,
                __properties__: {
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x",
                    set_width: "set_width",
                    get_width: "get_width",
                    set_visible: "set_visible",
                    get_visible: "get_visible",
                    set_transform: "set_transform",
                    get_transform: "get_transform",
                    get_scrollRect: "get_scrollRect",
                    set_scaleY: "set_scaleY",
                    get_scaleY: "get_scaleY",
                    set_scaleX: "set_scaleX",
                    get_scaleX: "get_scaleX",
                    set_rotation: "set_rotation",
                    get_rotation: "get_rotation",
                    get_root: "get_root",
                    set_name: "set_name",
                    get_name: "get_name",
                    get_mouseY: "get_mouseY",
                    get_mouseX: "get_mouseX",
                    set_mask: "set_mask",
                    get_mask: "get_mask",
                    get_loaderInfo: "get_loaderInfo",
                    set_height: "set_height",
                    get_height: "get_height",
                    set_filters: "set_filters",
                    get_filters: "get_filters",
                    get_cacheAsBitmap: "get_cacheAsBitmap",
                    set_blendMode: "set_blendMode",
                    get_blendMode: "get_blendMode",
                    set_alpha: "set_alpha",
                    get_alpha: "get_alpha"
                }
            });
            var za = function() {
                ca.call(this);
                this.doubleClickEnabled = !1;
                this.mouseEnabled = !0;
                this.needsSoftKeyboard = !1;
                this.__tabEnabled = null;
                this.__tabIndex = -1
            };
            h["openfl.display.InteractiveObject"] = za;
            za.__name__ = "openfl.display.InteractiveObject";
            za.__super__ = ca;
            za.prototype = v(ca.prototype, {
                __allowMouseFocus: function() {
                    return this.mouseEnabled ? this.get_tabEnabled() : !1
                },
                __getInteractive: function(a) {
                    null != a && (a.push(this),
                    null != this.parent && this.parent.__getInteractive(a));
                    return !0
                },
                __hitTest: function(a, b, c, d, f, g) {
                    return !g.get_visible() || this.__isMask || f && !this.mouseEnabled ? !1 : ca.prototype.__hitTest.call(this, a, b, c, d, f, g)
                },
                __tabTest: function(a) {
                    this.get_tabEnabled() && a.push(this)
                },
                get_tabEnabled: function() {
                    return 1 == this.__tabEnabled ? !0 : !1
                },
                get_tabIndex: function() {
                    return this.__tabIndex
                },
                __class__: za,
                __properties__: v(ca.prototype.__properties__, {
                    get_tabIndex: "get_tabIndex",
                    get_tabEnabled: "get_tabEnabled"
                })
            });
            var hb = function() {
                za.call(this);
                this.__tabChildren = this.mouseChildren = !0;
                this.__children = [];
                this.__removedChildren = ua.toObjectVector(null)
            };
            h["openfl.display.DisplayObjectContainer"] = hb;
            hb.__name__ = "openfl.display.DisplayObjectContainer";
            hb.__super__ = za;
            hb.prototype = v(za.prototype, {
                addChild: function(a) {
                    return this.addChildAt(a, this.get_numChildren())
                },
                addChildAt: function(a, b) {
                    if (null == a)
                        throw a = new Rf("Error #2007: Parameter child must be non-null."),
                        a.errorID = 2007,
                        a;
                    if (a == this)
                        throw a = new Sf("Error #2024: An object cannot be added as a child of itself."),
                        a.errorID = 2024,
                        a;
                    if (a.stage == a)
                        throw a = new Sf("Error #3783: A Stage object cannot be added as the child of another object."),
                        a.errorID = 3783,
                        a;
                    if (b > this.__children.length || 0 > b)
                        throw aa.thrown("Invalid index position " + b);
                    if (a.parent == this)
                        this.__children[b] != a && (Q.remove(this.__children, a),
                        this.__children.splice(b, 0, a),
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty()));
                    else {
                        null != a.parent && a.parent.removeChild(a);
                        this.__children.splice(b, 0, a);
                        a.parent = this;
                        (b = null != this.stage && null == a.stage) && a.__setStageReference(this.stage);
                        a.__setTransformDirty();
                        a.__renderDirty || (a.__renderDirty = !0,
                        a.__setParentRenderDirty());
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty());
                        var c = new ya("added");
                        c.bubbles = !0;
                        c.target = a;
                        a.__dispatchWithCapture(c);
                        b && (c = new ya("addedToStage",!1,!1),
                        a.__dispatchWithCapture(c),
                        a.__dispatchChildren(c))
                    }
                    return a
                },
                getChildAt: function(a) {
                    return 0 <= a && a < this.__children.length ? this.__children[a] : null
                },
                getChildByName: function(a) {
                    for (var b = 0, c = this.__children; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        if (d.get_name() == a)
                            return d
                    }
                    return null
                },
                getChildIndex: function(a) {
                    for (var b = 0, c = this.__children.length; b < c; ) {
                        var d = b++;
                        if (this.__children[d] == a)
                            return d
                    }
                    return -1
                },
                removeChild: function(a) {
                    if (null != a && a.parent == this) {
                        a.__setTransformDirty();
                        a.__renderDirty || (a.__renderDirty = !0,
                        a.__setParentRenderDirty());
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty());
                        var b = new ya("removed",!0);
                        a.__dispatchWithCapture(b);
                        null != this.stage && (null != a.stage && this.stage.get_focus() == a && this.stage.set_focus(null),
                        b = new ya("removedFromStage",!1,!1),
                        a.__dispatchWithCapture(b),
                        a.__dispatchChildren(b),
                        a.__setStageReference(null));
                        a.parent = null;
                        Q.remove(this.__children, a);
                        this.__removedChildren.push(a);
                        a.__setTransformDirty()
                    }
                    return a
                },
                removeChildAt: function(a) {
                    return 0 <= a && a < this.__children.length ? this.removeChild(this.__children[a]) : null
                },
                removeChildren: function(a, b) {
                    null == b && (b = 2147483647);
                    null == a && (a = 0);
                    if (2147483647 == b && (b = this.__children.length - 1,
                    0 > b))
                        return;
                    if (!(a > this.__children.length - 1)) {
                        if (b < a || 0 > a || b > this.__children.length)
                            throw new Yg("The supplied index is out of bounds.");
                        for (b -= a; 0 <= b; )
                            this.removeChildAt(a),
                            --b
                    }
                },
                __cleanup: function() {
                    za.prototype.__cleanup.call(this);
                    for (var a = 0, b = this.__children; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.__cleanup()
                    }
                    for (a = this.__removedChildren.iterator(); a.hasNext(); )
                        b = a.next(),
                        null == b.stage && b.__cleanup();
                    this.__removedChildren.set_length(0)
                },
                __dispatchChildren: function(a) {
                    if (null != this.__children)
                        for (var b = 0, c = this.__children; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            a.target = d;
                            if (!d.__dispatchWithCapture(a))
                                break;
                            d.__dispatchChildren(a)
                        }
                },
                __enterFrame: function(a) {
                    for (var b = 0, c = this.__children; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d.__enterFrame(a)
                    }
                },
                __getBounds: function(a, b) {
                    za.prototype.__getBounds.call(this, a, b);
                    if (0 != this.__children.length) {
                        for (var c = ta.__pool.get(), d = 0, f = this.__children; d < f.length; ) {
                            var g = f[d];
                            ++d;
                            if (0 != g.__scaleX && 0 != g.__scaleY) {
                                var k = g.__transform;
                                c.a = k.a * b.a + k.b * b.c;
                                c.b = k.a * b.b + k.b * b.d;
                                c.c = k.c * b.a + k.d * b.c;
                                c.d = k.c * b.b + k.d * b.d;
                                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                                g.__getBounds(a, c)
                            }
                        }
                        ta.__pool.release(c)
                    }
                },
                __getFilterBounds: function(a, b) {
                    za.prototype.__getFilterBounds.call(this, a, b);
                    if (null == this.__scrollRect && 0 != this.__children.length) {
                        for (var c = ta.__pool.get(), d = 0, f = this.__children; d < f.length; ) {
                            var g = f[d];
                            ++d;
                            if (0 != g.__scaleX && 0 != g.__scaleY && !g.__isMask) {
                                var k = g.__transform;
                                c.a = k.a * b.a + k.b * b.c;
                                c.b = k.a * b.b + k.b * b.d;
                                c.c = k.c * b.a + k.d * b.c;
                                c.d = k.c * b.b + k.d * b.d;
                                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                                k = oa.__pool.get();
                                g.__getFilterBounds(k, c);
                                a.__expand(k.x, k.y, k.width, k.height);
                                oa.__pool.release(k)
                            }
                        }
                        ta.__pool.release(c)
                    }
                },
                __getRenderBounds: function(a, b) {
                    if (null != this.__scrollRect)
                        za.prototype.__getRenderBounds.call(this, a, b);
                    else if (za.prototype.__getBounds.call(this, a, b),
                    0 != this.__children.length) {
                        for (var c = ta.__pool.get(), d = 0, f = this.__children; d < f.length; ) {
                            var g = f[d];
                            ++d;
                            if (0 != g.__scaleX && 0 != g.__scaleY && !g.__isMask) {
                                var k = g.__transform;
                                c.a = k.a * b.a + k.b * b.c;
                                c.b = k.a * b.b + k.b * b.d;
                                c.c = k.c * b.a + k.d * b.c;
                                c.d = k.c * b.b + k.d * b.d;
                                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                                g.__getRenderBounds(a, c)
                            }
                        }
                        ta.__pool.release(c)
                    }
                },
                __hitTest: function(a, b, c, d, f, g) {
                    if (!g.get_visible() || this.__isMask || f && !this.mouseEnabled && !this.mouseChildren || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
                        return !1;
                    if (null != this.__scrollRect) {
                        var k = B.__pool.get();
                        k.setTo(a, b);
                        var q = this.__getRenderTransform()
                          , p = q.a * q.d - q.b * q.c;
                        if (0 == p)
                            k.x = -q.tx,
                            k.y = -q.ty;
                        else {
                            var l = 1 / p * (q.c * (q.ty - k.y) + q.d * (k.x - q.tx));
                            k.y = 1 / p * (q.a * (k.y - q.ty) + q.b * (q.tx - k.x));
                            k.x = l
                        }
                        if (!this.__scrollRect.containsPoint(k))
                            return B.__pool.release(k),
                            !1;
                        B.__pool.release(k)
                    }
                    k = this.__children.length;
                    if (f)
                        if (null == d || !this.mouseChildren)
                            for (; 0 <= --k; ) {
                                if (this.__children[k].__hitTest(a, b, c, null, !0, this.__children[k]))
                                    return null != d && d.push(g),
                                    !0
                            }
                        else {
                            if (null != d) {
                                f = d.length;
                                for (p = !1; 0 <= --k && !(((q = this.__children[k].__getInteractive(null)) || this.mouseEnabled && !p) && this.__children[k].__hitTest(a, b, c, d, !0, this.__children[k]) && (p = !0,
                                q && d.length > f)); )
                                    ;
                                if (p)
                                    return d.splice(f, 0, g),
                                    !0
                            }
                        }
                    else {
                        for (p = !1; 0 <= --k && (!this.__children[k].__hitTest(a, b, c, d, !1, this.__children[k]) || (p = !0,
                        null != d)); )
                            ;
                        return p
                    }
                    return !1
                },
                __hitTestMask: function(a, b) {
                    for (var c = this.__children.length; 0 <= --c; )
                        if (this.__children[c].__hitTestMask(a, b))
                            return !0;
                    return !1
                },
                __readGraphicsData: function(a, b) {
                    za.prototype.__readGraphicsData.call(this, a, b);
                    if (b)
                        for (var c = 0, d = this.__children; c < d.length; ) {
                            var f = d[c];
                            ++c;
                            f.__readGraphicsData(a, b)
                        }
                },
                __setStageReference: function(a) {
                    za.prototype.__setStageReference.call(this, a);
                    if (null != this.__children)
                        for (var b = 0, c = this.__children; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            d.__setStageReference(a)
                        }
                },
                __setWorldTransformInvalid: function() {
                    if (!this.__worldTransformInvalid && (this.__worldTransformInvalid = !0,
                    null != this.__children))
                        for (var a = 0, b = this.__children; a < b.length; ) {
                            var c = b[a];
                            ++a;
                            c.__setWorldTransformInvalid()
                        }
                },
                __tabTest: function(a) {
                    za.prototype.__tabTest.call(this, a);
                    if (this.get_tabChildren())
                        for (var b, c = 0, d = this.__children; c < d.length; ) {
                            var f = d[c];
                            ++c;
                            if (b = f.__getInteractive(null))
                                b = f,
                                b.__tabTest(a)
                        }
                },
                __update: function(a, b) {
                    za.prototype.__update.call(this, a, b);
                    if (b) {
                        b = 0;
                        for (var c = this.__children; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            d.__update(a, !0)
                        }
                    }
                },
                get_numChildren: function() {
                    return this.__children.length
                },
                get_tabChildren: function() {
                    return this.__tabChildren
                },
                __class__: hb,
                __properties__: v(za.prototype.__properties__, {
                    get_tabChildren: "get_tabChildren",
                    get_numChildren: "get_numChildren"
                })
            });
            var T = function() {
                hb.call(this);
                this.__drawableType = 4;
                this.__buttonMode = !1;
                this.useHandCursor = !0;
                if (null != this.__pendingBindLibrary) {
                    var a = this.__pendingBindLibrary
                      , b = this.__pendingBindClassName;
                    this.__pendingBindClassName = this.__pendingBindLibrary = null;
                    a.bind(b, this)
                } else
                    null != T.__constructor && (a = T.__constructor,
                    T.__constructor = null,
                    a(this))
            };
            h["openfl.display.Sprite"] = T;
            T.__name__ = "openfl.display.Sprite";
            T.__super__ = hb;
            T.prototype = v(hb.prototype, {
                stopDrag: function() {
                    null != this.stage && this.stage.__stopDrag(this)
                },
                __setStageReference: function(a) {
                    this.stage != a && null != this.stage && this.stage.__dragObject == this && this.stopDrag();
                    hb.prototype.__setStageReference.call(this, a)
                },
                __getCursor: function() {
                    return this.__buttonMode && this.useHandCursor ? "button" : null
                },
                __hitTest: function(a, b, c, d, f, g) {
                    if (f && !this.mouseEnabled && !this.mouseChildren)
                        return !1;
                    if (!g.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
                        return this.__hitTestHitArea(a, b, c, d, f, g);
                    if (null != this.__scrollRect) {
                        var k = B.__pool.get();
                        k.setTo(a, b);
                        var q = this.__getRenderTransform()
                          , p = q.a * q.d - q.b * q.c;
                        if (0 == p)
                            k.x = -q.tx,
                            k.y = -q.ty;
                        else {
                            var l = 1 / p * (q.c * (q.ty - k.y) + q.d * (k.x - q.tx));
                            k.y = 1 / p * (q.a * (k.y - q.ty) + q.b * (q.tx - k.x));
                            k.x = l
                        }
                        if (!this.__scrollRect.containsPoint(k))
                            return B.__pool.release(k),
                            this.__hitTestHitArea(a, b, c, d, !0, g);
                        B.__pool.release(k)
                    }
                    return hb.prototype.__hitTest.call(this, a, b, c, d, f, g) ? null != d ? f : !0 : null == this.hitArea && null != this.__graphics && this.__graphics.__hitTest(a, b, c, this.__getRenderTransform()) ? (null == d || f && !this.mouseEnabled || d.push(g),
                    !0) : this.__hitTestHitArea(a, b, c, d, f, g)
                },
                __hitTestHitArea: function(a, b, c, d, f, g) {
                    return null == this.hitArea || this.hitArea.mouseEnabled ? !1 : (this.hitArea.mouseEnabled = !0,
                    a = this.hitArea.__hitTest(a, b, c, null, !0, g),
                    this.hitArea.mouseEnabled = !1,
                    null != d && a && (d[d.length] = g),
                    a)
                },
                __hitTestMask: function(a, b) {
                    return hb.prototype.__hitTestMask.call(this, a, b) || null != this.__graphics && this.__graphics.__hitTest(a, b, !0, this.__getRenderTransform()) ? !0 : !1
                },
                get_graphics: function() {
                    null == this.__graphics && (this.__graphics = new Ad(this));
                    return this.__graphics
                },
                get_tabEnabled: function() {
                    return null == this.__tabEnabled ? this.__buttonMode : this.__tabEnabled
                },
                get_buttonMode: function() {
                    return this.__buttonMode
                },
                set_buttonMode: function(a) {
                    return this.__buttonMode = a
                },
                __class__: T,
                __properties__: v(hb.prototype.__properties__, {
                    get_graphics: "get_graphics",
                    set_buttonMode: "set_buttonMode",
                    get_buttonMode: "get_buttonMode"
                })
            });
            var fb = function(a) {
                fb.instance = this;
                T.call(this);
                this.prepareStage();
                tb.useEnterFrame(this);
                fb.switchScene(a)
            };
            h["com.watabou.coogee.Game"] = fb;
            fb.__name__ = "com.watabou.coogee.Game";
            fb.switchScene = function(a) {
                fb.instance.switchSceneImp(a)
            }
            ;
            fb.quit = function() {}
            ;
            fb.__super__ = T;
            fb.prototype = v(T.prototype, {
                prepareStage: function() {
                    var a = this;
                    this.stage.align = 6;
                    this.stage.set_scaleMode(2);
                    this.stage.addEventListener("resize", function(b) {
                        a.layout()
                    });
                    this.stage.application.onExit.add(m(this, this.onExit));
                    this.stage.application.__window.onActivate.add(m(this, this.onResume));
                    this.stage.application.__window.onDeactivate.add(m(this, this.onPause))
                },
                onExit: function(a) {
                    tb.stop()
                },
                onResume: function() {},
                onPause: function() {},
                layout: function() {
                    if (null != fb.scene) {
                        var a = this.stage.stageWidth
                          , b = this.stage.stageHeight
                          , c = this.getScale(a, b);
                        fb.scene.set_scaleX(fb.scene.set_scaleY(c));
                        fb.scene.setSize(a / c, b / c)
                    }
                },
                getScale: function(a, b) {
                    return 1
                },
                switchSceneImp: function(a) {
                    null != fb.scene && (fb.scene.deactivate(),
                    this.removeChild(fb.scene),
                    fb.scene = null);
                    null != a && (fb.scene = z.createInstance(a, []),
                    this.addChild(fb.scene),
                    this.layout(),
                    fb.scene.activate());
                    this.stage.set_focus(this.stage)
                },
                __class__: fb
            });
            var Fc = function() {
                l.reset();
                this.stage.showDefaultContextMenu = !1;
                C.useDefault();
                rb.baseURL = "https://watabou.github.io/perilous-shores/";
                fb.call(this, Za)
            };
            h["com.watabou.perilous.Main"] = Fc;
            Fc.__name__ = "com.watabou.perilous.Main";
            Fc.__super__ = fb;
            Fc.prototype = v(fb.prototype, {
                getScale: function(a, b) {
                    return 1
                },
                switchSceneImp: function(a) {
                    null == w.layer && (w.layer = new la);
                    fb.prototype.switchSceneImp.call(this, a);
                    this.addChild(w.layer);
                    w.wipe()
                },
                layout: function() {
                    fb.prototype.layout.call(this);
                    Mh.get_screenDPI();
                    w.layer.set_scaleX(w.layer.set_scaleY(1));
                    w.layer.setSize(this.stage.stageWidth / 1, this.stage.stageHeight / 1)
                },
                __class__: Fc
            });
            var vc = function(a) {
                a.addChild(this);
                Fc.call(this);
                this.dispatchEvent(new ya("addedToStage",!1,!1))
            };
            h.DocumentClass = vc;
            vc.__name__ = "DocumentClass";
            vc.__super__ = Fc;
            vc.prototype = v(Fc.prototype, {
                __class__: vc
            });
            var Ta = function(a, b) {
                this.r = new RegExp(a,b.split("u").join(""))
            };
            h.EReg = Ta;
            Ta.__name__ = "EReg";
            Ta.prototype = {
                match: function(a) {
                    this.r.global && (this.r.lastIndex = 0);
                    this.r.m = this.r.exec(a);
                    this.r.s = a;
                    return null != this.r.m
                },
                matched: function(a) {
                    if (null != this.r.m && 0 <= a && a < this.r.m.length)
                        return this.r.m[a];
                    throw aa.thrown("EReg::matched");
                },
                matchedPos: function() {
                    if (null == this.r.m)
                        throw aa.thrown("No string matched");
                    return {
                        pos: this.r.m.index,
                        len: this.r.m[0].length
                    }
                },
                matchSub: function(a, b, c) {
                    null == c && (c = -1);
                    if (this.r.global) {
                        if (this.r.lastIndex = b,
                        this.r.m = this.r.exec(0 > c ? a : Q.substr(a, 0, b + c)),
                        c = null != this.r.m)
                            this.r.s = a
                    } else if (c = this.match(0 > c ? Q.substr(a, b, null) : Q.substr(a, b, c)))
                        this.r.s = a,
                        this.r.m.index += b;
                    return c
                },
                split: function(a) {
                    return a.replace(this.r, "#__delim__#").split("#__delim__#")
                },
                map: function(a, b) {
                    var c = 0
                      , d = "";
                    do {
                        if (c >= a.length)
                            break;
                        else if (!this.matchSub(a, c)) {
                            d += G.string(Q.substr(a, c, null));
                            break
                        }
                        var f = this.matchedPos();
                        d += G.string(Q.substr(a, c, f.pos - c));
                        d += G.string(b(this));
                        0 == f.len ? (d += G.string(Q.substr(a, f.pos, 1)),
                        c = f.pos + 1) : c = f.pos + f.len
                    } while (this.r.global);
                    !this.r.global && 0 < c && c < a.length && (d += G.string(Q.substr(a, c, null)));
                    return d
                },
                __class__: Ta
            };
            var Q = function() {};
            h.HxOverrides = Q;
            Q.__name__ = "HxOverrides";
            Q.strDate = function(a) {
                switch (a.length) {
                case 8:
                    a = a.split(":");
                    var b = new Date;
                    b.setTime(0);
                    b.setUTCHours(a[0]);
                    b.setUTCMinutes(a[1]);
                    b.setUTCSeconds(a[2]);
                    return b;
                case 10:
                    return a = a.split("-"),
                    new Date(a[0],a[1] - 1,a[2],0,0,0);
                case 19:
                    return a = a.split(" "),
                    b = a[0].split("-"),
                    a = a[1].split(":"),
                    new Date(b[0],b[1] - 1,b[2],a[0],a[1],a[2]);
                default:
                    throw aa.thrown("Invalid date format : " + a);
                }
            }
            ;
            Q.cca = function(a, b) {
                a = a.charCodeAt(b);
                if (a == a)
                    return a
            }
            ;
            Q.substr = function(a, b, c) {
                if (null == c)
                    c = a.length;
                else if (0 > c)
                    if (0 == b)
                        c = a.length + c;
                    else
                        return "";
                return a.substr(b, c)
            }
            ;
            Q.remove = function(a, b) {
                b = a.indexOf(b);
                if (-1 == b)
                    return !1;
                a.splice(b, 1);
                return !0
            }
            ;
            Q.now = function() {
                return Date.now()
            }
            ;
            var E = function() {};
            h.Lambda = E;
            E.__name__ = "Lambda";
            E.array = function(a) {
                var b = [];
                for (a = H(a); a.hasNext(); ) {
                    var c = a.next();
                    b.push(c)
                }
                return b
            }
            ;
            var mb = function() {};
            h.ManifestResources = mb;
            mb.__name__ = "ManifestResources";
            mb.init = function(a) {
                mb.preloadLibraries = [];
                mb.preloadLibraryNames = [];
                mb.rootPath = null;
                null != a && Object.prototype.hasOwnProperty.call(a, "rootPath") && (mb.rootPath = Aa.field(a, "rootPath"),
                P.endsWith(mb.rootPath, "/") || (mb.rootPath += "/"));
                null == mb.rootPath && (mb.rootPath = "./");
                ka.registerFont(S);
                ka.registerFont(U);
                ka.registerFont(gd);
                a = td.parse('{"name":null,"assets":"aoy4:sizei46596y4:typey4:FONTy9:classNamey37:__ASSET__assets_sharetech_regular_ttfy2:idy7:ui_fonty7:preloadtgoR0i42756R1R2R3y41:__ASSET__assets_sharetechmono_regular_ttfR5y12:ui_font_monoR7tgoR0i115128R1R2R3y34:__ASSET__assets_neucha_regular_ttfR5y8:def_fontR7tgoy4:pathy21:Assets%2Fdefault.jsonR0i1651R1y4:TEXTR5y7:defaultR7tgoR12y16:Assets%2Fbw.jsonR0i1651R1R14R5y2:bwR7tgoR12y21:Assets%2Fantique.jsonR0i1652R1R14R5y7:antiqueR7tgoR12y18:Assets%2Fsoft.jsonR0i1653R1R14R5y4:softR7tgoR12y21:Assets%2Fcartoon.jsonR0i1646R1R14R5y7:cartoonR7tgoR12y21:Assets%2Foctober.jsonR0i1652R1R14R5y7:octoberR7tgoR12y21:Assets%2Fgrammar.jsonR0i7219R1R14R5y7:grammarR7tgoR12y20:Assets%2Fenglish.txtR0i6103R1R14R5y7:englishR7tgoR12y18:Assets%2Felven.txtR0i332R1R14R5y5:elvenR7tgoR12y20:Assets%2Fdemonic.txtR0i677R1R14R5y7:demonicR7tgoR12y23:Assets%2Fgiven_male.txtR0i808R1R14R5y4:maleR7tgoR12y25:Assets%2Fgiven_female.txtR0i665R1R14R5y6:femaleR7tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}', mb.rootPath);
                a = Ob.fromManifest(a);
                Ha.registerLibrary("default", a);
                a = Ha.getLibrary("default");
                null != a ? mb.preloadLibraries.push(a) : mb.preloadLibraryNames.push("default")
            }
            ;
            var db = function(a) {
                null != a && (this.name = a);
                this.__init || (void 0 == this.ascender && (this.ascender = 0),
                void 0 == this.descender && (this.descender = 0),
                void 0 == this.height && (this.height = 0),
                void 0 == this.numGlyphs && (this.numGlyphs = 0),
                void 0 == this.underlinePosition && (this.underlinePosition = 0),
                void 0 == this.underlineThickness && (this.underlineThickness = 0),
                void 0 == this.unitsPerEM && (this.unitsPerEM = 0),
                null != this.__fontID ? Ha.isLocal(this.__fontID) && this.__fromBytes(Ha.getBytes(this.__fontID)) : null != this.__fontPath && this.__fromFile(this.__fontPath))
            };
            h["lime.text.Font"] = db;
            db.__name__ = "lime.text.Font";
            db.fromFile = function(a) {
                if (null == a)
                    return null;
                var b = new db;
                b.__fromFile(a);
                return b
            }
            ;
            db.loadFromName = function(a) {
                return (new db).__loadFromName(a)
            }
            ;
            db.__measureFontNode = function(a) {
                var b = window.document.createElement("span");
                b.setAttribute("aria-hidden", "true");
                var c = window.document.createTextNode("BESbswy");
                b.appendChild(c);
                c = b.style;
                c.display = "block";
                c.position = "absolute";
                c.top = "-9999px";
                c.left = "-9999px";
                c.fontSize = "300px";
                c.width = "auto";
                c.height = "auto";
                c.lineHeight = "normal";
                c.margin = "0";
                c.padding = "0";
                c.fontVariant = "normal";
                c.whiteSpace = "nowrap";
                c.fontFamily = a;
                window.document.body.appendChild(b);
                return b
            }
            ;
            db.prototype = {
                __copyFrom: function(a) {
                    null != a && (this.ascender = a.ascender,
                    this.descender = a.descender,
                    this.height = a.height,
                    this.name = a.name,
                    this.numGlyphs = a.numGlyphs,
                    this.src = a.src,
                    this.underlinePosition = a.underlinePosition,
                    this.underlineThickness = a.underlineThickness,
                    this.unitsPerEM = a.unitsPerEM,
                    this.__fontID = a.__fontID,
                    this.__fontPath = a.__fontPath,
                    this.__init = !0)
                },
                __fromBytes: function(a) {
                    this.__fontPath = null
                },
                __fromFile: function(a) {
                    this.__fontPath = a
                },
                __loadFromName: function(a) {
                    var b = this
                      , c = new Bd;
                    this.name = a;
                    var d = y.navigator.userAgent.toLowerCase()
                      , f = 0 <= d.indexOf(" safari/") && 0 > d.indexOf(" chrome/");
                    d = (new Ta("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)","i")).match(d);
                    if (!f && !d && window.document.fonts && (D = window.document.fonts,
                    m(D, D.load)))
                        window.document.fonts.load("1em '" + a + "'").then(function(a) {
                            c.complete(b)
                        }, function(d) {
                            Ja.warn('Could not load web font "' + a + '"', {
                                fileName: "lime/text/Font.hx",
                                lineNumber: 640,
                                className: "lime.text.Font",
                                methodName: "__loadFromName"
                            });
                            c.complete(b)
                        });
                    else {
                        var g = db.__measureFontNode("'" + a + "', sans-serif"), k = db.__measureFontNode("'" + a + "', serif"), q = g.offsetWidth, p = k.offsetWidth, l = -1, h = 0, n, u;
                        l = window.setInterval(function() {
                            h += 1;
                            n = g.offsetWidth != q || k.offsetWidth != p;
                            u = 3E3 <= 50 * h;
                            if (n || u)
                                window.clearInterval(l),
                                g.parentNode.removeChild(g),
                                k.parentNode.removeChild(k),
                                k = g = null,
                                u && Ja.warn('Could not load web font "' + a + '"', {
                                    fileName: "lime/text/Font.hx",
                                    lineNumber: 675,
                                    className: "lime.text.Font",
                                    methodName: "__loadFromName"
                                }),
                                c.complete(b)
                        }, 50)
                    }
                    return c.future
                },
                __class__: db
            };
            var Fa = t.__ASSET__assets_sharetech_regular_ttf = function() {
                this.ascender = 885;
                this.descender = -242;
                this.height = 1127;
                this.numGlyphs = 256;
                this.underlinePosition = -100;
                this.underlineThickness = 50;
                this.unitsPerEM = 1E3;
                this.name = "Share Tech Regular";
                db.call(this)
            }
            ;
            h.__ASSET__assets_sharetech_regular_ttf = Fa;
            Fa.__name__ = "__ASSET__assets_sharetech_regular_ttf";
            Fa.__super__ = db;
            Fa.prototype = v(db.prototype, {
                __class__: Fa
            });
            var Ga = t.__ASSET__assets_sharetechmono_regular_ttf = function() {
                this.ascender = 885;
                this.descender = -242;
                this.height = 1127;
                this.numGlyphs = 268;
                this.underlinePosition = -135;
                this.underlineThickness = 50;
                this.unitsPerEM = 1E3;
                this.name = "Share Tech Mono";
                db.call(this)
            }
            ;
            h.__ASSET__assets_sharetechmono_regular_ttf = Ga;
            Ga.__name__ = "__ASSET__assets_sharetechmono_regular_ttf";
            Ga.__super__ = db;
            Ga.prototype = v(db.prototype, {
                __class__: Ga
            });
            var Pa = t.__ASSET__assets_neucha_regular_ttf = function() {
                this.ascender = 787;
                this.descender = -292;
                this.height = 1128;
                this.numGlyphs = 285;
                this.underlinePosition = -101;
                this.underlineThickness = 51;
                this.unitsPerEM = 1024;
                this.name = "Neucha";
                db.call(this)
            }
            ;
            h.__ASSET__assets_neucha_regular_ttf = Pa;
            Pa.__name__ = "__ASSET__assets_neucha_regular_ttf";
            Pa.__super__ = db;
            Pa.prototype = v(db.prototype, {
                __class__: Pa
            });
            var ka = function(a) {
                db.call(this, a)
            };
            h["openfl.text.Font"] = ka;
            ka.__name__ = "openfl.text.Font";
            ka.fromFile = function(a) {
                if (null == a)
                    return null;
                var b = new ka;
                b.__fromFile(a);
                return b
            }
            ;
            ka.loadFromName = function(a) {
                return db.loadFromName(a).then(function(a) {
                    var b = new ka;
                    b.__fromLimeFont(a);
                    return nc.withValue(b)
                })
            }
            ;
            ka.registerFont = function(a) {
                a = null == xa.getClass(a) ? xa.__cast(z.createInstance(a, []), ka) : xa.__cast(a, ka);
                null != a && (ka.__registeredFonts.push(a),
                ka.__fontByName.h[a.name] = a)
            }
            ;
            ka.__super__ = db;
            ka.prototype = v(db.prototype, {
                __fromLimeFont: function(a) {
                    this.__copyFrom(a)
                },
                __class__: ka
            });
            var S = t.__ASSET__OPENFL__assets_sharetech_regular_ttf = function() {
                this.__fromLimeFont(new Fa);
                db.call(this, void 0)
            }
            ;
            h.__ASSET__OPENFL__assets_sharetech_regular_ttf = S;
            S.__name__ = "__ASSET__OPENFL__assets_sharetech_regular_ttf";
            S.__super__ = ka;
            S.prototype = v(ka.prototype, {
                __class__: S
            });
            var U = t.__ASSET__OPENFL__assets_sharetechmono_regular_ttf = function() {
                this.__fromLimeFont(new Ga);
                db.call(this, void 0)
            }
            ;
            h.__ASSET__OPENFL__assets_sharetechmono_regular_ttf = U;
            U.__name__ = "__ASSET__OPENFL__assets_sharetechmono_regular_ttf";
            U.__super__ = ka;
            U.prototype = v(ka.prototype, {
                __class__: U
            });
            var gd = t.__ASSET__OPENFL__assets_neucha_regular_ttf = function() {
                this.__fromLimeFont(new Pa);
                db.call(this, void 0)
            }
            ;
            h.__ASSET__OPENFL__assets_neucha_regular_ttf = gd;
            gd.__name__ = "__ASSET__OPENFL__assets_neucha_regular_ttf";
            gd.__super__ = ka;
            gd.prototype = v(ka.prototype, {
                __class__: gd
            });
            Math.__name__ = "Math";
            var Aa = function() {};
            h.Reflect = Aa;
            Aa.__name__ = "Reflect";
            Aa.field = function(a, b) {
                try {
                    return a[b]
                } catch (c) {
                    return Ua.lastError = c,
                    null
                }
            }
            ;
            Aa.getProperty = function(a, b) {
                var c;
                if (null == a)
                    return null;
                var d = a.__properties__ ? c = a.__properties__["get_" + b] : !1;
                return d ? a[c]() : a[b]
            }
            ;
            Aa.fields = function(a) {
                var b = [];
                if (null != a) {
                    var c = Object.prototype.hasOwnProperty, d;
                    for (d in a)
                        "__id__" != d && "hx__closures__" != d && c.call(a, d) && b.push(d)
                }
                return b
            }
            ;
            Aa.isFunction = function(a) {
                return "function" == typeof a ? !(a.__name__ || a.__ename__) : !1
            }
            ;
            Aa.compare = function(a, b) {
                return a == b ? 0 : a > b ? 1 : -1
            }
            ;
            Aa.deleteField = function(a, b) {
                if (!Object.prototype.hasOwnProperty.call(a, b))
                    return !1;
                delete a[b];
                return !0
            }
            ;
            var G = function() {};
            h.Std = G;
            G.__name__ = "Std";
            G.string = function(a) {
                return xa.__string_rec(a, "")
            }
            ;
            G.parseInt = function(a) {
                a = parseInt(a);
                return isNaN(a) ? null : a
            }
            ;
            G.random = function(a) {
                return 0 >= a ? 0 : Math.floor(Math.random() * a)
            }
            ;
            var vb = function() {};
            h["_String.String_Impl_"] = vb;
            vb.__name__ = "_String.String_Impl_";
            vb.fromCharCode = function(a) {
                return String.fromCodePoint(a)
            }
            ;
            var K = function() {
                this.b = ""
            };
            h.StringBuf = K;
            K.__name__ = "StringBuf";
            K.prototype = {
                __class__: K
            };
            var P = function() {};
            h.StringTools = P;
            P.__name__ = "StringTools";
            P.htmlEscape = function(a, b) {
                for (var c = "", d = 0, f = a; d < f.length; ) {
                    a = f;
                    var g = d++
                      , k = a.charCodeAt(g);
                    55296 <= k && 56319 >= k && (k = k - 55232 << 10 | a.charCodeAt(g + 1) & 1023);
                    a = k;
                    65536 <= a && ++d;
                    switch (a) {
                    case 34:
                        c = b ? c + "&quot;" : c + String.fromCodePoint(a);
                        break;
                    case 38:
                        c += "&amp;";
                        break;
                    case 39:
                        c = b ? c + "&#039;" : c + String.fromCodePoint(a);
                        break;
                    case 60:
                        c += "&lt;";
                        break;
                    case 62:
                        c += "&gt;";
                        break;
                    default:
                        c += String.fromCodePoint(a)
                    }
                }
                return c
            }
            ;
            P.htmlUnescape = function(a) {
                return a.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join('"').split("&#039;").join("'").split("&amp;").join("&")
            }
            ;
            P.startsWith = function(a, b) {
                return a.length >= b.length ? 0 == a.lastIndexOf(b, 0) : !1
            }
            ;
            P.endsWith = function(a, b) {
                var c = b.length
                  , d = a.length;
                return d >= c ? a.indexOf(b, d - c) == d - c : !1
            }
            ;
            P.isSpace = function(a, b) {
                a = Q.cca(a, b);
                return 8 < a && 14 > a ? !0 : 32 == a
            }
            ;
            P.ltrim = function(a) {
                for (var b = a.length, c = 0; c < b && P.isSpace(a, c); )
                    ++c;
                return 0 < c ? Q.substr(a, c, b - c) : a
            }
            ;
            P.rtrim = function(a) {
                for (var b = a.length, c = 0; c < b && P.isSpace(a, b - c - 1); )
                    ++c;
                return 0 < c ? Q.substr(a, 0, b - c) : a
            }
            ;
            P.trim = function(a) {
                return P.ltrim(P.rtrim(a))
            }
            ;
            P.lpad = function(a, b, c) {
                if (0 >= b.length)
                    return a;
                var d = "";
                for (c -= a.length; d.length < c; )
                    d += null == b ? "null" : "" + b;
                return d + (null == a ? "null" : "" + a)
            }
            ;
            P.replace = function(a, b, c) {
                return a.split(b).join(c)
            }
            ;
            P.hex = function(a, b) {
                var c = "";
                do
                    c = "0123456789ABCDEF".charAt(a & 15) + c,
                    a >>>= 4;
                while (0 < a);
                if (null != b)
                    for (; c.length < b; )
                        c = "0" + c;
                return c
            }
            ;
            var I = N.ValueType = {
                __ename__: "ValueType",
                __constructs__: null,
                TNull: {
                    _hx_name: "TNull",
                    _hx_index: 0,
                    __enum__: "ValueType",
                    toString: r
                },
                TInt: {
                    _hx_name: "TInt",
                    _hx_index: 1,
                    __enum__: "ValueType",
                    toString: r
                },
                TFloat: {
                    _hx_name: "TFloat",
                    _hx_index: 2,
                    __enum__: "ValueType",
                    toString: r
                },
                TBool: {
                    _hx_name: "TBool",
                    _hx_index: 3,
                    __enum__: "ValueType",
                    toString: r
                },
                TObject: {
                    _hx_name: "TObject",
                    _hx_index: 4,
                    __enum__: "ValueType",
                    toString: r
                },
                TFunction: {
                    _hx_name: "TFunction",
                    _hx_index: 5,
                    __enum__: "ValueType",
                    toString: r
                },
                TClass: (D = function(a) {
                    return {
                        _hx_index: 6,
                        c: a,
                        __enum__: "ValueType",
                        toString: r
                    }
                }
                ,
                D._hx_name = "TClass",
                D.__params__ = ["c"],
                D),
                TEnum: (D = function(a) {
                    return {
                        _hx_index: 7,
                        e: a,
                        __enum__: "ValueType",
                        toString: r
                    }
                }
                ,
                D._hx_name = "TEnum",
                D.__params__ = ["e"],
                D),
                TUnknown: {
                    _hx_name: "TUnknown",
                    _hx_index: 8,
                    __enum__: "ValueType",
                    toString: r
                }
            };
            I.__constructs__ = [I.TNull, I.TInt, I.TFloat, I.TBool, I.TObject, I.TFunction, I.TClass, I.TEnum, I.TUnknown];
            I.__empty_constructs__ = [I.TNull, I.TInt, I.TFloat, I.TBool, I.TObject, I.TFunction, I.TUnknown];
            var z = function() {};
            h.Type = z;
            z.__name__ = "Type";
            z.resolveEnum = function(a) {
                return N[a]
            }
            ;
            z.createInstance = function(a, b) {
                return new (Function.prototype.bind.apply(a, [null].concat(b)))
            }
            ;
            z.createEnum = function(a, b, c) {
                var d = Aa.field(a, b);
                if (null == d)
                    throw aa.thrown("No such constructor " + b);
                if (Aa.isFunction(d)) {
                    if (null == c)
                        throw aa.thrown("Constructor " + b + " need parameters");
                    return d.apply(a, c)
                }
                if (null != c && 0 != c.length)
                    throw aa.thrown("Constructor " + b + " does not need parameters");
                return d
            }
            ;
            z.typeof = function(a) {
                switch (typeof a) {
                case "boolean":
                    return I.TBool;
                case "function":
                    return a.__name__ || a.__ename__ ? I.TObject : I.TFunction;
                case "number":
                    return Math.ceil(a) == a % 2147483648 ? I.TInt : I.TFloat;
                case "object":
                    if (null == a)
                        return I.TNull;
                    var b = a.__enum__;
                    if (null != b)
                        return I.TEnum(N[b]);
                    a = xa.getClass(a);
                    return null != a ? I.TClass(a) : I.TObject;
                case "string":
                    return I.TClass(String);
                case "undefined":
                    return I.TNull;
                default:
                    return I.TUnknown
                }
            }
            ;
            z.enumParameters = function(a) {
                var b = N[a.__enum__].__constructs__[a._hx_index].__params__;
                if (null != b) {
                    for (var c = [], d = 0; d < b.length; ) {
                        var f = b[d];
                        ++d;
                        c.push(a[f])
                    }
                    return c
                }
                return []
            }
            ;
            var ab = {
                gt: function(a, b) {
                    var c = 0 > a;
                    return c != 0 > b ? c : a > b
                },
                toFloat: function(a) {
                    return 0 > a ? 4294967296 + a : a + 0
                }
            }
              , eb = {
                toString: function(a) {
                    switch (a) {
                    case 0:
                        return "Element";
                    case 1:
                        return "PCData";
                    case 2:
                        return "CData";
                    case 3:
                        return "Comment";
                    case 4:
                        return "DocType";
                    case 5:
                        return "ProcessingInstruction";
                    case 6:
                        return "Document"
                    }
                }
            }
              , da = function(a) {
                this.nodeType = a;
                this.children = [];
                this.attributeMap = new Ia
            };
            h.Xml = da;
            da.__name__ = "Xml";
            da.parse = function(a) {
                return lf.parse(a)
            }
            ;
            da.createElement = function(a) {
                var b = new da(da.Element);
                if (b.nodeType != da.Element)
                    throw aa.thrown("Bad node type, expected Element but found " + (null == b.nodeType ? "null" : eb.toString(b.nodeType)));
                b.nodeName = a;
                return b
            }
            ;
            da.createPCData = function(a) {
                var b = new da(da.PCData);
                if (b.nodeType == da.Document || b.nodeType == da.Element)
                    throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : eb.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            }
            ;
            da.createCData = function(a) {
                var b = new da(da.CData);
                if (b.nodeType == da.Document || b.nodeType == da.Element)
                    throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : eb.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            }
            ;
            da.createComment = function(a) {
                var b = new da(da.Comment);
                if (b.nodeType == da.Document || b.nodeType == da.Element)
                    throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : eb.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            }
            ;
            da.createDocType = function(a) {
                var b = new da(da.DocType);
                if (b.nodeType == da.Document || b.nodeType == da.Element)
                    throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : eb.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            }
            ;
            da.createProcessingInstruction = function(a) {
                var b = new da(da.ProcessingInstruction);
                if (b.nodeType == da.Document || b.nodeType == da.Element)
                    throw aa.thrown("Bad node type, unexpected " + (null == b.nodeType ? "null" : eb.toString(b.nodeType)));
                b.nodeValue = a;
                return b
            }
            ;
            da.createDocument = function() {
                return new da(da.Document)
            }
            ;
            da.prototype = {
                get: function(a) {
                    if (this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    return this.attributeMap.h[a]
                },
                set: function(a, b) {
                    if (this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    this.attributeMap.h[a] = b
                },
                remove: function(a) {
                    if (this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    var b = this.attributeMap;
                    Object.prototype.hasOwnProperty.call(b.h, a) && delete b.h[a]
                },
                exists: function(a) {
                    if (this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    return Object.prototype.hasOwnProperty.call(this.attributeMap.h, a)
                },
                attributes: function() {
                    if (this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    return new Nh(this.attributeMap.h)
                },
                firstElement: function() {
                    if (this.nodeType != da.Document && this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element or Document but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    for (var a = 0, b = this.children; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        if (c.nodeType == da.Element)
                            return c
                    }
                    return null
                },
                addChild: function(a) {
                    if (this.nodeType != da.Document && this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element or Document but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    null != a.parent && a.parent.removeChild(a);
                    this.children.push(a);
                    a.parent = this
                },
                removeChild: function(a) {
                    if (this.nodeType != da.Document && this.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element or Document but found " + (null == this.nodeType ? "null" : eb.toString(this.nodeType)));
                    return Q.remove(this.children, a) ? (a.parent = null,
                    !0) : !1
                },
                toString: function() {
                    return Tf.print(this)
                },
                __class__: da
            };
            var Nc = function() {
                this.keyShift = this.keyCtrl = this.isSolid = !1;
                this.rWidth = this.rHeight = 0;
                this.update = new Ac;
                this.keyEvent = new pg;
                T.call(this)
            };
            h["com.watabou.coogee.Scene"] = Nc;
            Nc.__name__ = "com.watabou.coogee.Scene";
            Nc.__super__ = T;
            Nc.prototype = v(T.prototype, {
                activate: function() {
                    tb.get_tick().add(m(this, this.onUpdate));
                    this.stage.addEventListener("keyDown", m(this, this.onKeyDown));
                    this.stage.addEventListener("keyUp", m(this, this.onKeyUp))
                },
                deactivate: function() {
                    tb.get_tick().remove(m(this, this.onUpdate));
                    this.stage.removeEventListener("keyDown", m(this, this.onKeyDown));
                    this.stage.removeEventListener("keyUp", m(this, this.onKeyUp))
                },
                onEsc: function() {
                    fb.quit()
                },
                onKeyDown: function(a) {
                    switch (a.keyCode) {
                    case 15:
                    case 17:
                        this.keyCtrl = !0;
                        break;
                    case 16:
                        this.keyShift = !0;
                        break;
                    case 27:
                        this.onEsc()
                    }
                    this.keyEvent.dispatch(a.keyCode, !0);
                    null == this.stage || this.stage.get_focus()instanceof Oc || a.preventDefault()
                },
                onKeyUp: function(a) {
                    switch (a.keyCode) {
                    case 15:
                    case 17:
                        this.keyCtrl = !1;
                        break;
                    case 16:
                        this.keyShift = !1
                    }
                    this.keyEvent.dispatch(a.keyCode, !1);
                    this.stage.get_focus()instanceof Oc || a.preventDefault()
                },
                setSize: function(a, b) {
                    this.rWidth = a;
                    this.rHeight = b;
                    this.layout()
                },
                get_width: function() {
                    return this.rWidth
                },
                get_height: function() {
                    return this.rHeight
                },
                layout: function() {},
                onUpdate: function(a) {
                    this.update.dispatch(a)
                },
                __hitTest: function(a, b, c, d, f, g) {
                    a = T.prototype.__hitTest.call(this, a, b, c, d, f, g);
                    return this.isSolid ? (a || d.push(g),
                    !0) : a
                },
                __class__: Nc
            });
            var la = function() {
                this.valign = "top";
                this.halign = "left";
                this.rWidth = this.rHeight = 0;
                T.call(this)
            };
            h["com.watabou.coogee.ui.View"] = la;
            la.__name__ = "com.watabou.coogee.ui.View";
            la.__super__ = T;
            la.prototype = v(T.prototype, {
                get_width: function() {
                    return this.rWidth
                },
                set_width: function(a) {
                    this.setSize(a, this.rHeight);
                    return this.rWidth
                },
                get_height: function() {
                    return this.rHeight
                },
                set_height: function(a) {
                    this.setSize(this.rWidth, a);
                    return this.rHeight
                },
                setSize: function(a, b) {
                    this.rWidth = a;
                    this.rHeight = b;
                    this.layout()
                },
                layout: function() {},
                add: function(a) {
                    this.addChild(a)
                },
                set_enabled: function(a) {
                    return this.mouseEnabled = this.mouseChildren = a
                },
                __class__: la,
                __properties__: v(T.prototype.__properties__, {
                    set_enabled: "set_enabled"
                })
            });
            var Xb = function() {
                this.click = new xe;
                la.call(this);
                this.label = this.createLabel();
                this.addChild(this.label);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.setSize(this.label.get_width() + 10, this.label.get_height() + 10)
            };
            h["com.watabou.coogee.ui.ButtonBase"] = Xb;
            Xb.__name__ = "com.watabou.coogee.ui.ButtonBase";
            Xb.__super__ = la;
            Xb.prototype = v(la.prototype, {
                layout: function() {
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(C.black);
                    this.get_graphics().drawRoundRect(0, 0, this.rWidth, this.rHeight, 10);
                    this.label.set_x((this.rWidth - this.label.get_width()) / 2 | 0);
                    this.label.set_y((this.rHeight - this.label.get_height()) / 2 | 0)
                },
                createLabel: function() {
                    return null
                },
                onClick: function(a) {
                    this.click.dispatch();
                    a.stopPropagation()
                },
                __class__: Xb
            });
            var ib = function(a, b) {
                this.txtLabel = a;
                Xb.call(this);
                null != b && this.click.add(b)
            };
            h["com.watabou.coogee.ui.Button"] = ib;
            ib.__name__ = "com.watabou.coogee.ui.Button";
            ib.__super__ = Xb;
            ib.prototype = v(Xb.prototype, {
                createLabel: function() {
                    return oc.get(this.txtLabel, C.format(C.uiFont, C.smallSize, C.white))
                },
                __class__: ib
            });
            var gb = function() {
                this.snap = !0;
                this.margin = this.gap = 10;
                la.call(this)
            };
            h["com.watabou.coogee.ui.layouts.VBox"] = gb;
            gb.__name__ = "com.watabou.coogee.ui.layouts.VBox";
            gb.__super__ = la;
            gb.prototype = v(la.prototype, {
                layout: function() {
                    for (var a = this.margin, b = 0, c = !1, d = 0, f = this.get_numChildren(); d < f; ) {
                        var g = d++;
                        g = this.getChildAt(g);
                        "left" != g.halign && (c = !0);
                        b < g.get_width() && (b = g.get_width());
                        g.set_x(this.margin);
                        g.set_y(a);
                        a += g.get_height() + this.gap;
                        this.snap && (a |= 0)
                    }
                    if (c)
                        for (d = 0,
                        f = this.get_numChildren(); d < f; )
                            switch (g = d++,
                            g = this.getChildAt(g),
                            g.halign) {
                            case "center":
                                g.set_x(this.margin + (b - g.get_width()) / 2);
                                break;
                            case "fill":
                                g.set_width(b);
                                break;
                            case "right":
                                g.set_x(this.margin + (b - g.get_width()))
                            }
                    this.rHeight = a > this.margin ? a - this.gap + this.margin : 2 * this.margin;
                    this.rWidth = b + 2 * this.margin
                },
                add: function(a) {
                    la.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function(a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: gb
            });
            var Yc = function() {
                gb.call(this);
                this.setMargins(0, 0);
                this.addEventListener("keyDown", m(this, this.onKeyDown));
                this.addEventListener("focusOut", m(this, this.onFocusOut))
            };
            h["com.watabou.coogee.ui.Form"] = Yc;
            Yc.__name__ = "com.watabou.coogee.ui.Form";
            Yc.__super__ = gb;
            Yc.prototype = v(gb.prototype, {
                getTitle: function() {
                    return null
                },
                onShow: function() {},
                onHide: function() {},
                onKeyDown: function(a) {
                    this.onKey(a.keyCode) && (a.stopPropagation(),
                    a.preventDefault())
                },
                onKey: function(a) {
                    switch (a) {
                    case 13:
                        this.onEnter();
                        break;
                    case 27:
                        this.onEsc();
                        break;
                    default:
                        return !1
                    }
                    return !0
                },
                onEsc: function() {
                    this.dialog.hide()
                },
                onEnter: function() {},
                onFocusOut: function(a) {
                    null == a.relatedObject && this.stage.set_focus(this)
                },
                __class__: Yc
            });
            var Ra = function(a) {
                Yc.call(this);
                this.buttons = new ye(a);
                this.buttons.click.add(m(this, this.onButton));
                this.addChild(this.buttons)
            };
            h["com.watabou.coogee.ui.ButtonsForm"] = Ra;
            Ra.__name__ = "com.watabou.coogee.ui.ButtonsForm";
            Ra.__super__ = Yc;
            Ra.prototype = v(Yc.prototype, {
                add: function(a) {
                    this.addChild(a);
                    this.addChild(this.buttons);
                    this.layout()
                },
                layout: function() {
                    Yc.prototype.layout.call(this);
                    this.buttons.set_width(this.rWidth);
                    Yc.prototype.layout.call(this)
                },
                onButton: function(a) {
                    this.dialog.hide()
                },
                onEnter: function() {
                    this.onButton("OK")
                },
                onEsc: function() {
                    this.onButton("Cancel")
                },
                __class__: Ra
            });
            var Uc = function(a) {
                this.changed = new Ac;
                la.call(this);
                this.border = Xa.black();
                this.add(this.border);
                this.empty = Xa.white();
                this.add(this.empty);
                this.filled = Xa.black();
                this.add(this.filled);
                null != a ? (this.label = new wb(a),
                this.label.mouseEnabled = !0,
                this.label.mouseChildren = !0,
                this.add(this.label),
                this.setSize(24 + this.label.get_width(), Math.max(20, this.label.get_height()))) : this.setSize(20, 20);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick))
            };
            h["com.watabou.coogee.ui.CheckBox"] = Uc;
            Uc.__name__ = "com.watabou.coogee.ui.CheckBox";
            Uc.__super__ = la;
            Uc.prototype = v(la.prototype, {
                layout: function() {
                    this.border.setSize(20, 20);
                    this.border.set_x(null != this.label ? 0 : (this.rWidth - this.border.get_width()) / 2 | 0);
                    this.border.set_y((this.rHeight - this.border.get_height()) / 2 | 0);
                    this.empty.setSize(this.border.get_width() - 4, this.border.get_height() - 4);
                    this.empty.set_x(this.border.get_x() + 2);
                    this.empty.set_y(this.border.get_y() + 2);
                    this.filled.setSize(this.empty.get_width() - 4, this.empty.get_height() - 4);
                    this.filled.set_x(this.empty.get_x() + 2);
                    this.filled.set_y(this.empty.get_y() + 2);
                    null != this.label && this.label.set_x(this.border.get_width() + 4)
                },
                get_value: function() {
                    return this.filled.get_visible()
                },
                set_value: function(a) {
                    this.filled.set_visible(a);
                    return a
                },
                onClick: function(a) {
                    this.set_value(!this.get_value());
                    this.changed.dispatch(this.get_value())
                },
                set_enabled: function(a) {
                    la.prototype.set_enabled.call(this, a);
                    var b = a ? C.black : C.light;
                    this.border.bmp.get_bitmapData().setPixel(0, 0, b);
                    this.filled.bmp.get_bitmapData().setPixel(0, 0, b);
                    null != this.label && this.label.set_color(b);
                    return a
                },
                __class__: Uc,
                __properties__: v(la.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var hd = function(a, b) {
                this.onMinimize = new Ac;
                this.onMove = new Ac;
                this.onHide = new Ac;
                this.minimized = this.minimizable = !1;
                la.call(this);
                this.bg1 = Xa.black();
                this.addChild(this.bg1);
                this.bg2 = Xa.white();
                this.addChild(this.bg2);
                this.addEventListener("mouseDown", m(this, this.onBringUp));
                this.header = new Oh(b);
                this.header.addEventListener("mouseDown", m(this, this.onStartDrag));
                this.header.addEventListener("click", m(this, this.onClick));
                this.addChild(this.header);
                this.content = a;
                this.addChild(a);
                this.resize()
            };
            h["com.watabou.coogee.ui.Window"] = hd;
            hd.__name__ = "com.watabou.coogee.ui.Window";
            hd.show = function(a, b, c, d) {
                c = null == d ? new hd(b,c) : z.createInstance(d, [b, c]);
                c.set_x((a.get_width() - c.get_width()) / 2 | 0);
                c.set_y((a.get_height() - c.get_height()) / 2 | 0);
                a.addChild(c);
                null != b.stage && b.stage.set_focus(b);
                return c
            }
            ;
            hd.__super__ = la;
            hd.prototype = v(la.prototype, {
                resize: function(a) {
                    null == a && (a = !1);
                    var b = this.content.get_width() + 4
                      , c = this.header.get_height() + this.content.get_height() + 2
                      , d = a ? (this.rWidth - b) / 2 | 0 : 0;
                    a = a ? (this.rHeight - c) / 2 | 0 : 0;
                    this.setSize(b, c);
                    this.set_x(this.get_x() + d);
                    this.set_y(this.get_y() + a)
                },
                layout: function() {
                    this.header.set_width(this.rWidth);
                    this.minimized ? (this.bg1.setSize(this.rWidth, this.header.get_height()),
                    this.content.set_visible(!1),
                    this.bg2.set_visible(!1)) : (this.bg1.setSize(this.rWidth, this.rHeight),
                    this.content.set_visible(!0),
                    this.bg2.set_visible(!0),
                    this.bg2.setSize(this.rWidth - 4, this.rHeight - this.header.get_height() - 2),
                    this.content.set_x(this.bg2.set_x(2)),
                    this.content.set_y(this.bg2.set_y(this.header.get_height())))
                },
                hide: function() {
                    null != this.parent && (this.stage.set_focus(this.stage),
                    this.parent.removeChild(this),
                    this.onHide.dispatch(this))
                },
                onBringUp: function(a) {
                    this.parent.addChild(this)
                },
                onStartDrag: function(a) {
                    this.clicked = !0;
                    this.stage.addEventListener("mouseMove", m(this, this.onDrag));
                    this.stage.addEventListener("mouseUp", m(this, this.onEndDrag));
                    this.grabX = this.get_mouseX();
                    this.grabY = this.get_mouseY()
                },
                onDrag: function(a) {
                    this.clicked = !1;
                    this.set_x(this.parent.get_mouseX() - this.grabX);
                    this.set_y(this.parent.get_mouseY() - this.grabY);
                    a.updateAfterEvent()
                },
                onEndDrag: function(a) {
                    this.stage.removeEventListener("mouseMove", m(this, this.onDrag));
                    this.stage.removeEventListener("mouseUp", m(this, this.onEndDrag));
                    this.clicked || this.onMove.dispatch(this)
                },
                onClick: function(a) {
                    this.clicked && this.minimizable && (this.minimized = !this.minimized,
                    this.layout(),
                    this.onMinimize.dispatch(this))
                },
                setTitle: function(a) {
                    this.header.setText(a)
                },
                __class__: hd
            });
            var Qe = function(a, b) {
                a.dialog = this;
                hd.call(this, a, b);
                this.header.close.add(function() {
                    a.onEsc()
                })
            };
            h["com.watabou.coogee.ui.Dialog"] = Qe;
            Qe.__name__ = "com.watabou.coogee.ui.Dialog";
            Qe.show = function(a, b, c) {
                null == c && (c = b.getTitle());
                a = hd.show(a, b, c, Qe);
                b.onShow();
                return a
            }
            ;
            Qe.__super__ = hd;
            Qe.prototype = v(hd.prototype, {
                hide: function() {
                    if (null != this.parent)
                        xa.__cast(this.content, Yc).onHide();
                    hd.prototype.hide.call(this)
                },
                __class__: Qe
            });
            var Zc = function(a, b) {
                this.update = new Ac;
                var c = this;
                this.values = b;
                this.labels = a;
                la.call(this);
                this.border = Xa.black();
                this.add(this.border);
                this.bg = Xa.white();
                this.bg.set_x(this.bg.set_y(2));
                this.add(this.bg);
                this.tf = oc.get("", C.format(C.uiFont, C.normalSize, C.black));
                this.addChild(this.tf);
                this.btn = new ob;
                this.btn.set_width(C.normalSize);
                this.btn.set_enabled(!1);
                this.add(this.btn);
                for (var d = 0, f = 0, g = 0; g < a.length; ) {
                    var k = a[g];
                    ++g;
                    this.tf.set_text(k);
                    d = Math.max(d, this.tf.get_width());
                    f = Math.max(f, this.tf.get_height())
                }
                this.tf.set_autoSize(2);
                this.menu = new fc;
                g = [];
                k = 0;
                for (var q = a.length; k < q; ) {
                    var p = [k++];
                    g.push(this.menu.addItem(a[p[0]], function(d) {
                        return function() {
                            c.onSelect(a[d[0]], b[d[0]])
                        }
                    }(p)))
                }
                this.items = g;
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.addEventListener("mouseWheel", m(this, this.onWheel));
                0 < a.length && this.set_text(a[0]);
                this.setSize(Math.ceil(d + this.btn.get_width()), Math.ceil(f))
            };
            h["com.watabou.coogee.ui.DropDown"] = Zc;
            Zc.__name__ = "com.watabou.coogee.ui.DropDown";
            Zc.ofStrings = function(a) {
                return new Zc(a,a)
            }
            ;
            Zc.__super__ = la;
            Zc.prototype = v(la.prototype, {
                layout: function() {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.tf.set_width(this.rWidth - this.btn.get_width());
                    this.tf.set_height(this.rHeight);
                    this.btn.set_height(this.rHeight);
                    this.btn.set_x(this.rWidth - this.btn.get_width());
                    this.btn.set_y((this.rHeight - this.btn.get_height()) / 2)
                },
                set_text: function(a) {
                    this.tf.set_text(a);
                    return a
                },
                get_value: function() {
                    var a = this.labels.indexOf(this.tf.get_text());
                    return -1 == a ? null : this.values[a]
                },
                set_value: function(a) {
                    for (var b = 0, c = this.values.length; b < c; ) {
                        var d = b++;
                        if (this.values[d] == a)
                            return this.tf.set_text(this.labels[d]),
                            a
                    }
                    return this.get_value()
                },
                set_centered: function(a) {
                    var b = this.tf.get_defaultTextFormat();
                    b.align = a ? 0 : 3;
                    this.tf.setTextFormat(b);
                    this.tf.set_defaultTextFormat(b);
                    return a
                },
                onClick: function(a) {
                    a = this.labels.indexOf(this.tf.get_text());
                    for (var b = 0, c = this.items.length; b < c; ) {
                        var d = b++;
                        this.items[d].setCheck(d == a)
                    }
                    a = w.getRect(this);
                    w.showMenuAt(this.menu, Math.ceil(a.get_left()), a.get_bottom() - 2)
                },
                onWheel: function(a) {
                    w.hideMenu();
                    var b = this.values.indexOf(this.get_value());
                    if (-1 != b && (a = a.delta,
                    b += 0 == a ? 0 : 0 > a ? -1 : 1,
                    0 <= b && b < this.values.length))
                        this.onSelect(this.labels[b], this.values[b])
                },
                onSelect: function(a, b) {
                    this.stage.set_focus(this);
                    this.tf.set_text(a);
                    this.update.dispatch(b)
                },
                __class__: Zc,
                __properties__: v(la.prototype.__properties__, {
                    set_centered: "set_centered",
                    set_value: "set_value",
                    get_value: "get_value",
                    set_text: "set_text"
                })
            });
            var Wd = function(a) {
                la.call(this);
                this.tf = oc.get(a, C.format(C.uiFont, C.smallSize, C.black));
                this.tf.set_wordWrap(!0);
                this.tf.set_x(-2);
                this.tf.set_y(-2);
                this.addChild(this.tf);
                this.setSize(this.tf.get_width() - 4, this.tf.get_height() - 4)
            };
            h["com.watabou.coogee.ui.InfoLabel"] = Wd;
            Wd.__name__ = "com.watabou.coogee.ui.InfoLabel";
            Wd.__super__ = la;
            Wd.prototype = v(la.prototype, {
                set_width: function(a) {
                    this.tf.set_autoSize(1);
                    this.tf.set_width(a + 4);
                    var b = this.tf.get_height();
                    this.tf.set_autoSize(2);
                    this.tf.set_width(a + 4);
                    this.tf.set_height(Math.ceil(b));
                    this.rWidth = a;
                    this.rHeight = this.tf.get_height() - 4;
                    return a
                },
                set_text: function(a) {
                    this.tf.set_text(a);
                    this.setSize(this.tf.get_width() - 4, this.tf.get_height() - 4);
                    return a
                },
                set_color: function(a) {
                    return this.tf.set_textColor(a)
                },
                __class__: Wd,
                __properties__: v(la.prototype.__properties__, {
                    set_color: "set_color",
                    set_text: "set_text"
                })
            });
            var wb = function(a, b) {
                null == b && (b = !1);
                la.call(this);
                this.tf = oc.get(a, C.format(C.uiFont, b ? C.smallSize : C.normalSize, C.black));
                this.tf.set_x(-2);
                this.tf.set_y(-2);
                this.addChild(this.tf);
                this.setSize(this.tf.get_width() - 4, this.tf.get_height() - 4)
            };
            h["com.watabou.coogee.ui.Label"] = wb;
            wb.__name__ = "com.watabou.coogee.ui.Label";
            wb.__super__ = la;
            wb.prototype = v(la.prototype, {
                get_text: function() {
                    return this.tf.get_text()
                },
                set_text: function(a) {
                    this.tf.set_text(a);
                    this.setSize(this.tf.get_width(), this.tf.get_height());
                    return a
                },
                set_color: function(a) {
                    var b = this.tf.get_defaultTextFormat();
                    b.color = a;
                    this.tf.setTextFormat(b);
                    this.tf.set_defaultTextFormat(b);
                    return a
                },
                __class__: wb,
                __properties__: v(la.prototype.__properties__, {
                    set_color: "set_color",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var fc = function() {
                la.call(this);
                this.bg = Xa.black();
                this.addChild(this.bg);
                this.items = [];
                this.addEventListener("addedToStage", m(this, this.onAdded));
                this.addEventListener("removedFromStage", m(this, this.onRemoved))
            };
            h["com.watabou.coogee.ui.Menu"] = fc;
            fc.__name__ = "com.watabou.coogee.ui.Menu";
            fc.__super__ = la;
            fc.prototype = v(la.prototype, {
                layout: function() {
                    for (var a = this.rHeight = this.rWidth = 0, b = this.items; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        this.rWidth = Math.max(this.rWidth, c.get_width());
                        this.rHeight += c.get_height()
                    }
                    var d = 2;
                    a = 0;
                    for (b = this.items; a < b.length; )
                        c = b[a],
                        ++a,
                        c.set_width(this.rWidth),
                        c.set_x(2),
                        c.set_y(d),
                        d += c.get_height();
                    this.rWidth += 4;
                    this.rHeight += 4;
                    this.bg.setSize(this.rWidth, this.rHeight)
                },
                add: function(a) {
                    this.items.push(a);
                    this.addChild(a);
                    this.layout()
                },
                remove: function(a) {
                    Q.remove(this.items, a);
                    this.removeChild(a);
                    this.layout()
                },
                addItem: function(a, b, c) {
                    null == c && (c = !1);
                    a = new mf(a,null,b);
                    a.setCheck(c);
                    this.add(a);
                    return a
                },
                addSubmenu: function(a, b) {
                    a = new mf(a,b);
                    this.add(a);
                    return a
                },
                addSeparator: function() {
                    0 < this.items.length && !(this.items[this.items.length - 1]instanceof Re) && this.add(new Re)
                },
                hide: function() {
                    null != this.submenu && (this.submenu.hide(),
                    this.submenu = null);
                    null != this.parent && (null != this.stage && this.stage.set_focus(this.stage),
                    this.parent.removeChild(this))
                },
                getRoot: function() {
                    return null != this.parentMenu ? this.parentMenu.getRoot() : this
                },
                onMouseDown: function(a) {
                    this.hitTestPoint(this.stage.get_mouseX(), this.stage.get_mouseY()) || this.hide()
                },
                onAdded: function(a) {
                    this.stage.addEventListener("mouseDown", m(this, this.onMouseDown));
                    this.stage.addEventListener("rightMouseDown", m(this, this.onMouseDown))
                },
                onRemoved: function(a) {
                    this.stage.removeEventListener("mouseDown", m(this, this.onMouseDown));
                    this.stage.removeEventListener("rightMouseDown", m(this, this.onMouseDown))
                },
                cancel: function() {
                    null != this.submenu && (this.submenu.cancel(),
                    this.parent.removeChild(this.submenu),
                    this.submenu = null)
                },
                hover: function(a, b) {
                    this.cancel();
                    if (null != b) {
                        b.parentMenu = this;
                        this.submenu = b;
                        var c = a.get_x() + a.rWidth
                          , d = a.get_y() - 2
                          , f = new B(c,d);
                        f = this.parent.globalToLocal(this.localToGlobal(f));
                        if (this.parent == w.layer) {
                            var g = !1;
                            f.x + b.get_width() > this.parent.get_width() && (c = a.get_x() - b.get_width(),
                            g = !0);
                            f.y + b.get_height() > this.parent.get_height() && (d = a.get_y() + a.rHeight - b.get_height() + 2,
                            g = !0);
                            g && (f.x = c,
                            f.y = d,
                            f = this.parent.globalToLocal(this.localToGlobal(f)))
                        }
                        b.set_x(f.x);
                        b.set_y(f.y);
                        this.parent.addChild(b)
                    }
                },
                __class__: fc
            });
            var mf = function(a, b, c) {
                var d = this;
                la.call(this);
                this.submenu = b;
                this.callback = c;
                this.bg = Xa.white();
                this.addChild(this.bg);
                this.bullet = Xa.black();
                this.bullet.set_visible(!1);
                this.bullet.setSize(8, 8);
                this.addChild(this.bullet);
                c = null == c && null == b;
                this.formatNormal = C.format(C.uiFont, C.smallSize, c ? C.medium : C.black);
                this.formatHover = C.format(C.uiFont, C.smallSize, C.white);
                this.tf = oc.get(a, this.formatNormal);
                this.addChild(this.tf);
                null != b && (this.sub = oc.get(" >", this.formatNormal),
                this.addChild(this.sub));
                this.addEventListener("mouseDown", function(a) {
                    a.stopPropagation()
                });
                c || (this.set_buttonMode(!0),
                this.addEventListener("rollOver", function(a) {
                    d.hover(!0)
                }),
                this.addEventListener("rollOut", function(a) {
                    d.hover(!1)
                }),
                this.addEventListener("click", m(this, this.onClick)));
                a = Math.round(C.normalSize / 4);
                this.bullet.set_x(a);
                this.tf.set_x(a + this.bullet.get_width() + a - 2);
                null != b ? (this.sub.set_x(this.tf.get_x() + this.tf.get_width() - 4),
                this.rWidth = this.sub.get_x() + (this.sub.get_width() - 4) + a) : this.rWidth = a + this.bullet.get_width() + a + (this.tf.get_width() - 4) + a;
                this.rHeight = 1.5 * C.normalSize;
                this.rWidth = Math.ceil(this.rWidth);
                this.rHeight = Math.ceil(this.rHeight);
                this.layout()
            };
            h["com.watabou.coogee.ui.MenuItem"] = mf;
            mf.__name__ = "com.watabou.coogee.ui.MenuItem";
            mf.__super__ = la;
            mf.prototype = v(la.prototype, {
                layout: function() {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.bullet.set_y((this.rHeight - this.bullet.get_height()) / 2);
                    this.tf.set_y((this.rHeight - this.tf.get_height()) / 2);
                    null != this.sub && (this.sub.set_y(this.tf.get_y()),
                    this.sub.set_x(this.rWidth - this.bullet.get_x() - this.sub.get_width() + 2))
                },
                hover: function(a) {
                    null != this.get_root() && (this.highlight(a),
                    xa.__cast(this.parent, fc).hover(this, this.submenu))
                },
                highlight: function(a) {
                    var b = a ? this.formatHover : this.formatNormal;
                    this.tf.set_defaultTextFormat(b);
                    var c = a ? C.black : C.white;
                    this.bg.bmp.get_bitmapData().setPixel(0, 0, c);
                    c = a ? C.white : C.black;
                    this.bullet.bmp.get_bitmapData().setPixel(0, 0, c);
                    null != this.submenu && this.sub.set_defaultTextFormat(b)
                },
                onClick: function(a) {
                    null == this.submenu ? (a.stopPropagation(),
                    this.highlight(!1),
                    xa.__cast(this.parent, fc).getRoot().hide(),
                    null != this.callback && this.callback()) : xa.__cast(this.parent, fc).hover(this, null == this.submenu.parent ? this.submenu : null)
                },
                setCheck: function(a) {
                    this.bullet.set_visible(a);
                    return this
                },
                __class__: mf
            });
            var Xa = function(a, b) {
                null == b && (b = 1);
                la.call(this);
                this.set_alpha(b);
                this.bmp = new ze(new Yb(1,1,!1,a));
                this.addChild(this.bmp)
            };
            h["com.watabou.coogee.ui.SolidRect"] = Xa;
            Xa.__name__ = "com.watabou.coogee.ui.SolidRect";
            Xa.black = function() {
                return new Xa(C.black)
            }
            ;
            Xa.dark = function() {
                return new Xa(C.dark)
            }
            ;
            Xa.light = function() {
                return new Xa(C.light)
            }
            ;
            Xa.white = function() {
                return new Xa(C.white)
            }
            ;
            Xa.__super__ = la;
            Xa.prototype = v(la.prototype, {
                layout: function() {
                    this.bmp.set_width(this.rWidth);
                    this.bmp.set_height(this.rHeight)
                },
                __class__: Xa
            });
            var Re = function() {
                Xa.call(this, C.black);
                this.setSize(2, 2)
            };
            h["com.watabou.coogee.ui.MenuSeparator"] = Re;
            Re.__name__ = "com.watabou.coogee.ui.MenuSeparator";
            Re.__super__ = Xa;
            Re.prototype = v(Xa.prototype, {
                __class__: Re
            });
            var fe = function(a, b, c) {
                this.action = new Ac;
                var d = this;
                this.txtLabel = a;
                Xb.call(this);
                this.menu = new fc;
                a = 0;
                for (var f = b.length; a < f; ) {
                    var g = a++
                      , k = b[g];
                    this.menu.addItem(k, function(a) {
                        return function() {
                            d.action.dispatch(a[0])
                        }
                    }([null != c ? c[g] : k]))
                }
            };
            h["com.watabou.coogee.ui.MultiAction"] = fe;
            fe.__name__ = "com.watabou.coogee.ui.MultiAction";
            fe.__super__ = Xb;
            fe.prototype = v(Xb.prototype, {
                createLabel: function() {
                    var a = new id;
                    a.setMargins(2, 4);
                    var b = new wb(this.txtLabel,!0);
                    b.set_color(C.white);
                    a.add(b);
                    b = new ob(C.white);
                    b.valign = "fill";
                    a.add(b);
                    return a
                },
                onClick: function(a) {
                    Xb.prototype.onClick.call(this, a);
                    a = w.getRect(this);
                    w.showMenuAt(this.menu, a.get_left(), a.get_bottom())
                },
                __class__: fe
            });
            var jd = function(a, b, c) {
                null == c && (c = 0);
                null == b && (b = 100);
                null == a && (a = 0);
                this.submit = new Ac;
                this.change = new Ac;
                this.cycled = !1;
                la.call(this);
                this.min = a;
                this.max = b;
                this.rounding = Math.pow(10, c);
                this.bg = new T;
                this.bg.addEventListener("mouseDown", m(this, this.onPage));
                this.addChild(this.bg);
                this.scale = Xa.black();
                this.scale.mouseEnabled = !1;
                this.add(this.scale);
                this.thumb = Xa.black();
                this.thumb.set_buttonMode(!0);
                this.thumb.addEventListener("mouseDown", m(this, this.onStartDrag));
                this.add(this.thumb);
                this.addEventListener("mouseWheel", m(this, this.onWheel));
                this._value = a;
                this._prev = NaN;
                this.setSize(200, 20)
            };
            h["com.watabou.coogee.ui.Slider"] = jd;
            jd.__name__ = "com.watabou.coogee.ui.Slider";
            jd.__super__ = la;
            jd.prototype = v(la.prototype, {
                get_value: function() {
                    return this._value
                },
                set_value: function(a) {
                    this._value = this.cycled ? Zb.cycle(a, this.min, this.max) : Zb.gate(a, this.min, this.max);
                    this._value = Math.round(this._value * this.rounding) / this.rounding;
                    this._prev != this._value && (this._prev = this._value,
                    this.placeThumb(),
                    this.change.dispatch(this._value));
                    return a
                },
                layout: function() {
                    var a = this.bg.get_graphics();
                    a.clear();
                    a.beginFill(16711680, 0);
                    a.drawRect(0, 0, this.rWidth, this.rHeight);
                    this.scale.setSize(this.rWidth, 2);
                    this.scale.set_y((this.rHeight - this.scale.get_height()) / 2 | 0);
                    this.thumb.setSize(10, this.rHeight);
                    this.thumb.set_y((this.rHeight - this.thumb.get_height()) / 2 | 0);
                    this.placeThumb()
                },
                placeThumb: function() {
                    this.thumb.set_x((this.rWidth - this.thumb.get_width()) * (this.get_value() - this.min) / (this.max - this.min))
                },
                onStartDrag: function(a) {
                    this.stage.addEventListener("mouseMove", m(this, this.onDrag));
                    this.stage.addEventListener("mouseUp", m(this, this.onEndDrag));
                    this.grabX = this.thumb.get_mouseX()
                },
                onDrag: function(a) {
                    this.set_value((this.get_mouseX() - this.grabX) / (this.rWidth - this.thumb.get_width()) * (this.max - this.min) + this.min);
                    a.updateAfterEvent()
                },
                onEndDrag: function(a) {
                    this.stage.removeEventListener("mouseMove", m(this, this.onDrag));
                    this.stage.removeEventListener("mouseUp", m(this, this.onEndDrag));
                    this.submit.dispatch(this.get_value())
                },
                onPage: function(a) {
                    a = this.get_value();
                    this.get_mouseX() < this.thumb.get_x() ? this.set_value(this.get_value() - .1 * (this.max - this.min)) : this.get_mouseX() > this.thumb.get_x() + this.thumb.get_width() && this.set_value(this.get_value() + .1 * (this.max - this.min));
                    a != this.get_value() && this.submit.dispatch(this.get_value())
                },
                onWheel: function(a) {
                    var b = this.get_value()
                      , c = this.get_value();
                    a = a.delta;
                    this.set_value(c + (0 == a ? 0 : 0 > a ? -1 : 1) / this.rounding);
                    b != this.get_value() && this.submit.dispatch(this.get_value())
                },
                __class__: jd,
                __properties__: v(la.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var Bb = function(a) {
                this.enter = new Ac;
                this.update = new Ac;
                la.call(this);
                this.tf = oc.get(a, C.format(C.uiFont, C.normalSize, C.black), m(this, this.onUpdate));
                this.tf.set_border(!0);
                this.tf.set_borderColor(C.black);
                this.tf.set_autoSize(2);
                this.tf.set_wordWrap(!0);
                this.addChild(this.tf);
                this.addEventListener("focusIn", m(this, this.onFocusIn));
                this.tf.addEventListener("keyDown", m(this, this.onKeyDown));
                this.setSize(this.tf.get_width(), this.tf.get_height())
            };
            h["com.watabou.coogee.ui.TextArea"] = Bb;
            Bb.__name__ = "com.watabou.coogee.ui.TextArea";
            Bb.__super__ = la;
            Bb.prototype = v(la.prototype, {
                layout: function() {
                    this.tf.set_width(this.rWidth);
                    this.tf.set_height(this.rHeight)
                },
                onFocusIn: function(a) {
                    this.stage.set_focus(this.tf);
                    this.tf.setSelection(this.tf.get_text().length, this.tf.get_text().length)
                },
                onKeyDown: function(a) {
                    switch (a.keyCode) {
                    case 13:
                        this.enter.dispatch(this.tf.get_text());
                        break;
                    case 27:
                        this.stage.set_focus(this.parent)
                    }
                    a.stopPropagation()
                },
                onUpdate: function() {
                    this.update.dispatch(this.tf.get_text())
                },
                __class__: Bb
            });
            var pc = function(a, b) {
                null == b && (b = !1);
                null == a && (a = "");
                this.leave = new xe;
                this.enter = new Ac;
                this.update = new Ac;
                la.call(this);
                this.tf = oc.input(a, C.format(b ? C.uiFontMono : C.uiFont, C.normalSize, C.black), m(this, this.onUpdate));
                this.tf.set_backgroundColor(C.white);
                this.tf.set_borderColor(C.black);
                this.addChild(this.tf);
                this.addEventListener("focusIn", m(this, this.onFocusIn));
                this.addEventListener("focusOut", m(this, this.onFocusOut));
                this.addEventListener("keyDown", m(this, this.onKeyDown));
                this.setSize(this.tf.get_width(), this.tf.get_height())
            };
            h["com.watabou.coogee.ui.TextInput"] = pc;
            pc.__name__ = "com.watabou.coogee.ui.TextInput";
            pc.__super__ = la;
            pc.prototype = v(la.prototype, {
                onKeyDown: function(a) {
                    switch (a.keyCode) {
                    case 13:
                        this.enter.dispatch(this.tf.get_text());
                        break;
                    case 27:
                        this.stage.set_focus(this.parent)
                    }
                    a.stopPropagation()
                },
                onFocusIn: function(a) {
                    this.stage.set_focus(this.tf)
                },
                onFocusOut: function(a) {
                    this.leave.dispatch()
                },
                layout: function() {
                    this.tf.set_width(this.rWidth);
                    this.tf.set_height(this.rHeight);
                    this.layoutPrompt()
                },
                layoutPrompt: function() {
                    if (null != this.label) {
                        var a = this.get_centered();
                        this.label.set_x(a ? (this.rWidth - this.label.get_width()) / 2 : 2);
                        this.label.set_y(a ? (this.rHeight - this.label.get_height()) / 2 : 2)
                    }
                },
                get_text: function() {
                    return this.tf.get_text()
                },
                set_text: function(a) {
                    this.tf.set_text(a);
                    this.updatePrompt();
                    return a
                },
                get_centered: function() {
                    return 0 == this.tf.get_defaultTextFormat().align
                },
                set_centered: function(a) {
                    var b = this.tf.get_defaultTextFormat();
                    b.align = a ? 0 : 3;
                    this.tf.setTextFormat(b);
                    this.tf.set_defaultTextFormat(b);
                    this.layoutPrompt();
                    return a
                },
                set_restrict: function(a) {
                    return this.tf.set_restrict(a)
                },
                onUpdate: function() {
                    this.updatePrompt();
                    this.update.dispatch(this.tf.get_text())
                },
                updatePrompt: function() {
                    null != this.label && (this.layoutPrompt(),
                    this.label.set_visible("" == this.tf.get_text()))
                },
                set_prompt: function(a) {
                    null == this.label && (this.label = new wb(a),
                    this.label.set_enabled(!1),
                    this.label.set_color(C.medium),
                    this.add(this.label),
                    this.updatePrompt());
                    this.label.set_text(a);
                    return a
                },
                selecteAll: function() {
                    this.tf.setSelection(0, this.tf.get_length())
                },
                set_enabled: function(a) {
                    la.prototype.set_enabled.call(this, a);
                    this.tf.set_alpha(a ? 1 : .6);
                    return this.tf.mouseEnabled = a
                },
                __class__: pc,
                __properties__: v(la.prototype.__properties__, {
                    set_prompt: "set_prompt",
                    set_restrict: "set_restrict",
                    set_centered: "set_centered",
                    get_centered: "get_centered",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var u = function(a) {
                var b = this;
                la.call(this);
                a = oc.get(a, C.format(C.uiFont, C.normalSize, C.white));
                a.set_x(10);
                a.set_y(10);
                this.addChild(a);
                this.rWidth = 10 + a.get_width() + 10;
                this.rHeight = 10 + a.get_height() + 10;
                this.get_graphics().beginFill(C.black);
                this.get_graphics().drawRoundRect(0, 0, this.rWidth, this.rHeight, 10);
                nf.run(u.delay, function(a) {
                    b.set_alpha(u.delay * (1 - a))
                }).onComplete(function() {
                    null != b.parent && b.parent.removeChild(b)
                })
            };
            h["com.watabou.coogee.ui.Toast"] = u;
            u.__name__ = "com.watabou.coogee.ui.Toast";
            u.show = function(a) {
                u.hide();
                var b = w.layer;
                a = u.instance = new u(a);
                a.set_x((b.get_width() - a.get_width()) / 2 | 0);
                a.set_y(b.get_height() - a.get_height() - u.offset | 0);
                b.addChild(a);
                return a
            }
            ;
            u.hide = function() {
                null != u.instance && null != u.instance.parent && u.instance.parent.removeChild(u.instance)
            }
            ;
            u.__super__ = la;
            u.prototype = v(la.prototype, {
                __class__: u
            });
            var w = function() {};
            h["com.watabou.coogee.ui.UI"] = w;
            w.__name__ = "com.watabou.coogee.ui.UI";
            w.showMenu = function(a) {
                w.showMenuAt(a, w.layer.get_mouseX(), w.layer.get_mouseY())
            }
            ;
            w.showMenuAt = function(a, b, c) {
                var d = a.items;
                0 < d.length && d[d.length - 1]instanceof Re && a.remove(d[d.length - 1]);
                w.menu = a;
                a.set_x((b + a.get_width() <= w.layer.get_width() ? b : b - a.get_width()) | 0);
                a.set_y((c + a.get_height() <= w.layer.get_height() ? c : c - a.get_height()) | 0);
                0 > a.get_x() && a.set_x(0);
                0 > a.get_y() && a.set_y(0);
                w.layer.addChild(a)
            }
            ;
            w.hideMenu = function() {
                return null != w.menu && null != w.menu.stage ? (w.menu.hide(),
                w.menu = null,
                !0) : !1
            }
            ;
            w.showDialog = function(a, b) {
                a = Qe.show(w.layer, a, b);
                a.onHide.add(function(a) {
                    Q.remove(w.windows, a)
                });
                w.windows.push(a);
                return a
            }
            ;
            w.replaceDialog = function(a, b) {
                null == b && (b = xa.getClass(a));
                b = w.findForm(b);
                null != b && b.dialog.hide();
                a = w.showDialog(a);
                null != b && (a.set_x(b.dialog.get_x()),
                a.set_y(b.dialog.get_y()));
                return a
            }
            ;
            w.wipe = function() {
                w.hideMenu();
                for (var a = 0, b = w.windows.slice(); a < b.length; ) {
                    var c = b[a];
                    ++a;
                    c.hide()
                }
                w.windows = []
            }
            ;
            w.findForm = function(a) {
                for (var b = 0, c = w.windows; b < c.length; ) {
                    var d = c[b];
                    ++b;
                    if (xa.__instanceof(d.content, a))
                        return d.content
                }
                return null
            }
            ;
            w.getRect = function(a) {
                var b = new B(a.get_x(),a.get_y())
                  , c = new B(a.get_x() + a.rWidth,a.get_y() + a.rHeight);
                b = w.layer.globalToLocal(a.parent.localToGlobal(b));
                c = w.layer.globalToLocal(a.parent.localToGlobal(c));
                return new oa(b.x,b.y,c.x - b.x,c.y - b.y)
            }
            ;
            w.showToast = function(a) {
                u.show(a)
            }
            ;
            var C = function() {};
            h["com.watabou.coogee.ui.UIStyle"] = C;
            C.__name__ = "com.watabou.coogee.ui.UIStyle";
            C.format = function(a, b, c) {
                null == c && (c = 0);
                return new Ae("_" == a.charAt(0) ? a : Rb.getFont(a).name,b,c)
            }
            ;
            C.useDefault = function() {
                C.black = 4012352;
                C.dark = 5725031;
                C.medium = 7569526;
                C.light = 10064002;
                C.white = 14276035;
                C.smallSize = 18;
                C.normalSize = 20;
                C.uiFont = "ui_font";
                C.uiFontMono = "ui_font_mono"
            }
            ;
            var pb = function() {
                this.click = new xe;
                la.call(this);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.setSize(12, 12)
            };
            h["com.watabou.coogee.ui.elements.CloseButton"] = pb;
            pb.__name__ = "com.watabou.coogee.ui.elements.CloseButton";
            pb.__super__ = la;
            pb.prototype = v(la.prototype, {
                layout: function() {
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(C.white);
                    this.get_graphics().drawCircle(this.rWidth / 2, this.rHeight / 2, 6)
                },
                onClick: function(a) {
                    a.stopPropagation();
                    this.click.dispatch()
                },
                __class__: pb
            });
            var ob = function(a) {
                null == a && (a = 0);
                this.click = new xe;
                la.call(this);
                this.bg = new Xa(0,0);
                this.addChild(this.bg);
                0 == a && (a = C.black);
                var b = C.smallSize / 4;
                this.image = new T;
                var c = this.image.get_graphics();
                c.beginFill(a);
                c.moveTo(-b, -b);
                c.lineTo(b, -b);
                c.lineTo(0, b);
                this.addChild(this.image);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick));
                this.setSize(2 * b, 2 * b)
            };
            h["com.watabou.coogee.ui.elements.DropDownButton"] = ob;
            ob.__name__ = "com.watabou.coogee.ui.elements.DropDownButton";
            ob.__super__ = la;
            ob.prototype = v(la.prototype, {
                layout: function() {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.image.set_x(this.rWidth / 2);
                    this.image.set_y(this.rHeight / 2)
                },
                onClick: function(a) {
                    a.stopPropagation();
                    this.click.dispatch()
                },
                __class__: ob
            });
            var wa = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 1E3);
                null == b && (b = 0);
                var f = this;
                if (0 == d)
                    pc.call(this, null == c ? "null" : "" + c, !0);
                else {
                    for (var g = "0.", k = 0, q = d; k < q; )
                        k++,
                        g += "0";
                    pc.call(this, g, !0)
                }
                this.min = b;
                this.max = c;
                this.set_text(null == a ? "null" : "" + a);
                this.set_restrict("-0-9.");
                var p = Math.pow(10, Math.floor(Math.log(c - b) / Math.log(10)) - 1)
                  , l = 0 < d ? Math.pow(10, d) : 0;
                this.addEventListener("mouseWheel", function(a) {
                    var d = parseFloat(f.get_text());
                    d = Zb.gate(d + (0 < a.delta ? 1 : -1) * p, b, c);
                    0 < l && (d = Math.round(d * l) / l);
                    f.set_text(null == d ? "null" : "" + d)
                })
            };
            h["com.watabou.coogee.ui.elements.FloatInput"] = wa;
            wa.__name__ = "com.watabou.coogee.ui.elements.FloatInput";
            wa.__super__ = pc;
            wa.prototype = v(pc.prototype, {
                get_value: function() {
                    return parseFloat(this.get_text())
                },
                set_value: function(a) {
                    a = Zb.gate(a, this.min, this.max);
                    this.tf.set_text(null == a ? "null" : "" + a);
                    return a
                },
                __class__: wa,
                __properties__: v(pc.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var ye = function(a) {
                this.click = new Ac;
                var b = this;
                la.call(this);
                this.bg = Xa.light();
                this.add(this.bg);
                this.hbox = new id;
                this.add(this.hbox);
                for (var c = 0; c < a.length; ) {
                    var d = [a[c]];
                    ++c;
                    var f = new ib(d[0]);
                    f.click.add(function(a) {
                        return function() {
                            b.click.dispatch(a[0])
                        }
                    }(d));
                    f.set_width(100);
                    this.hbox.add(f)
                }
                this.setSize(this.hbox.get_width(), this.hbox.get_height())
            };
            h["com.watabou.coogee.ui.elements.FormButtons"] = ye;
            ye.__name__ = "com.watabou.coogee.ui.elements.FormButtons";
            ye.__super__ = la;
            ye.prototype = v(la.prototype, {
                layout: function() {
                    this.rWidth = Math.max(this.rWidth, this.hbox.get_width());
                    this.bg.set_width(this.rWidth);
                    this.bg.set_height(this.rHeight);
                    this.hbox.set_x(this.rWidth - this.hbox.get_width());
                    this.hbox.set_y((this.rHeight - this.hbox.get_height()) / 2 | 0)
                },
                __class__: ye
            });
            var lc = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 1E3);
                null == b && (b = 0);
                var f = this
                  , g = "0";
                if (0 == d)
                    for (var k = c; 10 <= k; )
                        g += "0",
                        k = k / 10 | 0;
                else
                    for (k = 1; k < d; )
                        k++,
                        g += "0";
                pc.call(this, g, !0);
                this.min = b;
                this.max = c;
                this.set_text(null == a ? "null" : "" + a);
                this.set_restrict("0-9");
                this.addEventListener("mouseWheel", function(a) {
                    a = 0 < a.delta ? 1 : -1;
                    f.update.dispatch(G.string(f.set_value(f.get_value() + a)))
                })
            };
            h["com.watabou.coogee.ui.elements.IntInput"] = lc;
            lc.__name__ = "com.watabou.coogee.ui.elements.IntInput";
            lc.__super__ = pc;
            lc.prototype = v(pc.prototype, {
                get_value: function() {
                    return Zb.gatei(G.parseInt(this.get_text()), this.min, this.max)
                },
                set_value: function(a) {
                    a = Zb.gatei(a, this.min, this.max);
                    this.tf.set_text(null == a ? "null" : "" + a);
                    return a
                },
                __class__: lc,
                __properties__: v(pc.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var Zg = function(a, b) {
                la.call(this);
                this.border2 = Xa.black();
                this.add(this.border2);
                this.paint2 = Xa.white();
                this.add(this.paint2);
                this.border = Xa.black();
                this.add(this.border);
                this.paint = Xa.white();
                this.add(this.paint);
                this.colors = a;
                a = this.colors[0];
                this.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                a = 1 < this.colors.length ? this.colors[1] : C.white;
                this.paint2.bmp.get_bitmapData().setPixel(0, 0, a);
                this.setSize(b, b);
                this.addEventListener("click", m(this, this.onClickEvent))
            };
            h["com.watabou.coogee.ui.elements.MultiSwatch"] = Zg;
            Zg.__name__ = "com.watabou.coogee.ui.elements.MultiSwatch";
            Zg.__super__ = la;
            Zg.prototype = v(la.prototype, {
                layout: function() {
                    var a = this.rWidth - 4 - 1
                      , b = this.rHeight - 4 - 1;
                    this.border.setSize(a, b);
                    this.paint.setSize(a - 2, b - 2);
                    this.paint.set_x(this.paint.set_y(1));
                    this.border2.setSize(a, b);
                    this.border2.set_x(this.border2.set_y(5));
                    this.paint2.setSize(a - 2, b - 2);
                    this.paint2.set_x(this.border2.get_x() + 1);
                    this.paint2.set_y(this.border2.get_y() + 1)
                },
                onClickEvent: function(a) {
                    null != this.callback && this.callback()
                },
                __class__: Zg
            });
            var $c = function(a, b) {
                la.call(this);
                this.border = Xa.black();
                this.add(this.border);
                this.paint = new Xa(a);
                this.add(this.paint);
                this.setSize(b, b);
                this.addEventListener("click", m(this, this.onClickEvent))
            };
            h["com.watabou.coogee.ui.elements.Swatch"] = $c;
            $c.__name__ = "com.watabou.coogee.ui.elements.Swatch";
            $c.__super__ = la;
            $c.prototype = v(la.prototype, {
                layout: function() {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.paint.setSize(this.rWidth - 2, this.rHeight - 2);
                    this.paint.set_x(this.paint.set_y(1))
                },
                onClick: function(a) {
                    this.callback = a;
                    this.set_buttonMode(null != a)
                },
                onClickEvent: function(a) {
                    null != this.callback && this.callback()
                },
                __class__: $c
            });
            var qc = function() {
                this.update = new pg;
                la.call(this);
                this.selected = Da.get("tags", []);
                this.active = [];
                this.tagViews = new Ia;
                for (var a = 0, b = qc.getTags(); a < b.length; ) {
                    var c = b[a];
                    ++a;
                    var d = new Se(c,qc.getInfo(c),m(this, this.onClick));
                    this.tagViews.h[c] = d;
                    this.add(d);
                    -1 != this.selected.indexOf(c) && d.setColor(C.black)
                }
            };
            h["com.watabou.coogee.ui.elements.TagsView"] = qc;
            qc.__name__ = "com.watabou.coogee.ui.elements.TagsView";
            qc.__super__ = la;
            qc.prototype = v(la.prototype, {
                set: function(a) {
                    this.active = a.slice();
                    this.layout()
                },
                select: function(a, b) {
                    null == b && (b = !0);
                    if (-1 != this.selected.indexOf(a) != b) {
                        b ? qc.resTags(this.selected, a) : (Q.remove(this.selected, a),
                        qc.resTags(this.selected, null));
                        for (var c = this.tagViews.h, d = Object.keys(c), f = d.length, g = 0; g < f; ) {
                            var k = d[g++];
                            c[k].setColor(-1 != this.selected.indexOf(k) ? C.black : C.dark)
                        }
                        this.update.dispatch(a, b)
                    }
                },
                layout: function() {
                    for (var a = [], b = [], c = this.tagViews.h, d = Object.keys(c), f = d.length, g = 0; g < f; ) {
                        var k = d[g++]
                          , q = k;
                        k = c[k];
                        -1 != this.active.indexOf(q) ? a.push(k) : b.push(k)
                    }
                    q = function(a, b) {
                        return a.tag < b.tag ? -1 : a.tag > b.tag ? 1 : 0
                    }
                    ;
                    a.sort(q);
                    b.sort(q);
                    d = c = 8;
                    for (g = f = 0; g < a.length; )
                        q = a[g],
                        ++g,
                        c + q.get_width() > this.rWidth - 8 && (c = 8,
                        d += f + 4,
                        f = 0),
                        q.set_x(c),
                        q.set_y(d),
                        f < q.get_height() && (f = q.get_height()),
                        c += q.get_width() + 4;
                    d += f;
                    8 == d && (d = 24);
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(C.light);
                    this.get_graphics().drawRoundRect(0, 0, this.rWidth, d + 8, 32);
                    c = 0;
                    d += 16;
                    for (g = f = 0; g < b.length; )
                        q = b[g],
                        ++g,
                        c + q.get_width() > this.rWidth && (c = 0,
                        d += f + 4,
                        f = 0),
                        q.set_x(c),
                        q.set_y(d),
                        f < q.get_height() && (f = q.get_height()),
                        c += q.get_width() + 4;
                    this.rHeight = d + f
                },
                onClick: function(a) {
                    this.select(a, -1 == this.selected.indexOf(a))
                },
                __class__: qc
            });
            var Se = function(a, b, c) {
                this.color = C.dark;
                la.call(this);
                this.tag = a;
                this.label = oc.get(a, C.format(C.uiFont, C.smallSize, C.white));
                this.label.mouseEnabled = !1;
                this.addChild(this.label);
                this.set_buttonMode(!0);
                this.addEventListener("click", function(d) {
                    d.stopPropagation();
                    d.shiftKey ? null != b && w.showToast(b) : c(a)
                });
                this.setSize(this.label.get_width() + 8, this.label.get_height() + 8)
            };
            h["com.watabou.coogee.ui.elements.TagView"] = Se;
            Se.__name__ = "com.watabou.coogee.ui.elements.TagView";
            Se.__super__ = la;
            Se.prototype = v(la.prototype, {
                layout: function() {
                    this.updateBg();
                    this.label.set_x((this.rWidth - this.label.get_width()) / 2 | 0);
                    this.label.set_y((this.rHeight - this.label.get_height()) / 2 | 0)
                },
                updateBg: function() {
                    this.get_graphics().clear();
                    this.get_graphics().beginFill(this.color);
                    this.get_graphics().drawRoundRect(0, 0, this.rWidth, this.rHeight, 16)
                },
                setColor: function(a) {
                    this.color = a;
                    this.updateBg()
                },
                __class__: Se
            });
            var Gc = function(a, b, c, d) {
                null == c && (c = !1);
                this.update = new Ac;
                this.edit = function(a) {
                    console.log("../classes/com/watabou/coogee/ui/elements/TextView.hx:22:", a.get_value())
                }
                ;
                this.data2text = function(a) {
                    return G.string(a)
                }
                ;
                this._value = null;
                var f = this;
                null != b && (this.data2text = b);
                null != d && (this.edit = d);
                this._value = a;
                la.call(this);
                this.border = Xa.black();
                this.add(this.border);
                this.bg = Xa.white();
                this.bg.set_x(this.bg.set_y(2));
                this.add(this.bg);
                this.tf = oc.get(this.data2text(a), C.format(C.uiFont, c ? C.smallSize : C.normalSize, C.black));
                this.addChild(this.tf);
                this.btn = new ob;
                this.btn.set_width(C.normalSize);
                this.btn.set_enabled(!1);
                this.add(this.btn);
                this.tf.mouseEnabled = !1;
                this.set_buttonMode(!0);
                this.addEventListener("click", function(a) {
                    f.edit(f)
                });
                this.setSize(Math.ceil(this.tf.get_width() + this.btn.get_width()), Math.ceil(this.tf.get_height()))
            };
            h["com.watabou.coogee.ui.elements.TextView"] = Gc;
            Gc.__name__ = "com.watabou.coogee.ui.elements.TextView";
            Gc.editInForm = function(a, b, c) {
                return function(d) {
                    var f = w.findForm(a);
                    null == f && (f = z.createInstance(a, []),
                    w.showDialog(f));
                    f.link(b, d.get_value(), function(a) {
                        d.set_value(a);
                        d.update.dispatch(a)
                    }, c)
                }
            }
            ;
            Gc.__super__ = la;
            Gc.prototype = v(la.prototype, {
                layout: function() {
                    this.border.setSize(this.rWidth, this.rHeight);
                    this.bg.setSize(this.rWidth - 4, this.rHeight - 4);
                    this.tf.set_autoSize(2);
                    this.tf.set_width(this.rWidth - this.btn.get_width());
                    this.tf.set_height(this.rHeight);
                    this.tf.set_scrollH(0);
                    this.btn.set_height(this.rHeight);
                    this.btn.set_x(this.rWidth - this.btn.get_width());
                    this.btn.set_y((this.rHeight - this.btn.get_height()) / 2)
                },
                get_value: function() {
                    return this._value
                },
                set_value: function(a) {
                    this._value = a;
                    this.tf.set_text(this.data2text(a));
                    return a
                },
                __class__: Gc,
                __properties__: v(la.prototype.__properties__, {
                    set_value: "set_value",
                    get_value: "get_value"
                })
            });
            var Hc = function(a) {
                Ra.call(this, null != a ? a.concat(Hc.okCancel) : Hc.okCancel)
            };
            h["com.watabou.coogee.ui.elements.EditForm"] = Hc;
            Hc.__name__ = "com.watabou.coogee.ui.elements.EditForm";
            Hc.__super__ = Ra;
            Hc.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Edit"
                },
                onButton: function(a) {
                    if ("OK" == a) {
                        if (null != this.onOK)
                            this.onOK(this.get());
                        this.dialog.hide()
                    } else
                        Ra.prototype.onButton.call(this, a)
                },
                set: function(a) {},
                get: function() {
                    return null
                },
                link: function(a, b, c, d) {
                    null != a && this.dialog.setTitle(a);
                    this.set(b);
                    this.onOK = c;
                    null != this.host && this.host.dialog.onHide.remove(m(this, this.onHostHidden));
                    this.host = d;
                    null != d && d.dialog.onHide.add(m(this, this.onHostHidden))
                },
                onHostHidden: function(a) {
                    this.dialog.hide()
                },
                __class__: Hc
            });
            var Oh = function(a) {
                this.close = new xe;
                var b = this;
                la.call(this);
                this.bg = Xa.black();
                this.add(this.bg);
                this.btn = new pb;
                this.btn.click.add(function() {
                    b.close.dispatch()
                });
                this.add(this.btn);
                this.tf = oc.get(a, C.format(C.uiFont, C.smallSize, C.white));
                this.tf.mouseEnabled = !1;
                this.addChild(this.tf);
                this.setSize(this.tf.get_width(), 36)
            };
            h["com.watabou.coogee.ui.elements.WindowHeader"] = Oh;
            Oh.__name__ = "com.watabou.coogee.ui.elements.WindowHeader";
            Oh.__super__ = la;
            Oh.prototype = v(la.prototype, {
                layout: function() {
                    this.bg.setSize(this.rWidth, this.rHeight);
                    this.btn.setSize(this.rHeight, this.rHeight);
                    this.btn.set_x(this.rWidth - this.rHeight);
                    this.tf.set_x(this.tf.set_y((this.rHeight - this.tf.get_height()) / 2 | 0))
                },
                setText: function(a) {
                    this.tf.set_text(a)
                },
                __class__: Oh
            });
            var ge = function() {
                var a = this;
                Hc.call(this);
                var b = new id;
                this.swatch = new $c(0,60);
                this.swatch.valign = "fill";
                b.add(this.swatch);
                var c = new Te(3);
                c.setMargins(0, 10);
                var d = function(b, d) {
                    b = new wb(b);
                    b.valign = "center";
                    c.add(b);
                    var f = new jd(0,d);
                    f.valign = "center";
                    c.add(f);
                    var g = new lc(0,0,d,3);
                    c.add(g);
                    g.update.add(function(a) {
                        f.set_value(g.get_value())
                    });
                    f.change.add(function(b) {
                        g.set_value(Math.round(b));
                        a.updateSwatch()
                    });
                    return f
                };
                this.hue = d("Hue", 359);
                this.hue.cycled = !0;
                this.sat = d("Sat", 100);
                this.val = d("Val", 100);
                b.add(c);
                this.add(b)
            };
            h["com.watabou.coogee.ui.forms.ColorForm"] = ge;
            ge.__name__ = "com.watabou.coogee.ui.forms.ColorForm";
            ge.__super__ = Hc;
            ge.prototype = v(Hc.prototype, {
                set: function(a) {
                    this.setColor(a)
                },
                get: function() {
                    return this.color
                },
                setColor: function(a) {
                    a = $b.rgb2hsv(a);
                    this.hue.set_value(a.x);
                    this.sat.set_value(100 * a.y);
                    this.val.set_value(100 * a.z)
                },
                updateSwatch: function() {
                    var a = this.color = $b.hsv(this.hue.get_value(), this.sat.get_value() / 100, this.val.get_value() / 100);
                    this.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                },
                __class__: ge
            });
            var Gd = function() {
                var a = this;
                Hc.call(this);
                var b = new gb
                  , c = new id;
                c.setMargins(0, 10);
                this.face = new pc("");
                this.face.set_width(300);
                this.face.set_prompt("Font name");
                this.face.update.add(function(b) {
                    a.updatePreview()
                });
                c.add(this.face);
                this.size = new lc(18,8,96);
                this.size.set_restrict("0-9");
                this.size.update.add(function(b) {
                    a.updatePreview()
                });
                c.add(this.size);
                var d = new id;
                d.setMargins(0, 10);
                this.bold = new Uc("Bold");
                this.bold.changed.add(function(b) {
                    a.updatePreview()
                });
                d.add(this.bold);
                this.italic = new Uc("Italic");
                this.italic.changed.add(function(b) {
                    a.updatePreview()
                });
                d.add(this.italic);
                this.preview = new Ph;
                this.preview.halign = "fill";
                this.preview.set_height(100);
                b.add(c);
                b.add(d);
                b.add(this.preview);
                this.add(b)
            };
            h["com.watabou.coogee.ui.forms.FontForm"] = Gd;
            Gd.__name__ = "com.watabou.coogee.ui.forms.FontForm";
            Gd.font2text = function(a) {
                if (null == a)
                    return "Default";
                if (null != a.face) {
                    var b = a.face;
                    b = b.length <= Gd.maxFaceLength ? b : Q.substr(b, 0, Gd.maxFaceLength - 1) + "..."
                } else
                    null != a.embedded && Rb.exists(a.embedded) ? (b = Rb.getFont(a.embedded).name,
                    b = "[" + (b.length <= Gd.maxFaceLength ? b : Q.substr(b, 0, Gd.maxFaceLength - 1) + "...") + "]") : b = "[default]";
                b += " " + a.size;
                a.bold && (b += ", bold");
                a.italic && (b += ", italic");
                return b
            }
            ;
            Gd.fontFace2text = function(a) {
                if (null == a)
                    return "Default";
                var b = null != a.face ? a.face : null != a.embedded && Rb.exists(a.embedded) ? Rb.getFont(a.embedded).name : "[default]";
                a.bold && (b += ", bold");
                a.italic && (b += ", italic");
                return b
            }
            ;
            Gd.__super__ = Hc;
            Gd.prototype = v(Hc.prototype, {
                set: function(a) {
                    this.face.set_text(null != a.face ? a.face : "");
                    this.size.set_value(a.size);
                    this.bold.set_value(a.bold);
                    this.italic.set_value(a.italic);
                    this.embedded = a.embedded;
                    this.face.set_prompt(null != this.embedded && Rb.exists(this.embedded) ? Rb.getFont(this.embedded).name : "Font name");
                    this.preview.setFont(a);
                    this.face.selecteAll();
                    null != this.stage && this.stage.set_focus(this.face)
                },
                get: function() {
                    return {
                        face: "" == this.face.get_text() ? null : this.face.get_text(),
                        embedded: this.embedded,
                        size: this.size.get_value(),
                        bold: this.bold.get_value(),
                        italic: this.italic.get_value()
                    }
                },
                updatePreview: function() {
                    this.preview.setFont(this.get())
                },
                __class__: Gd
            });
            var Ph = function(a) {
                null == a && (a = "Sample Text");
                la.call(this);
                this.border = Xa.black();
                this.addChild(this.border);
                this.bg = Xa.white();
                this.bg.set_x(this.bg.set_y(1));
                this.addChild(this.bg);
                this.tf = new Oc;
                this.tf.set_text(a);
                this.fixText();
                this.addChild(this.tf);
                this.maskRect = new of;
                this.addChild(this.maskRect);
                this.tf.set_mask(this.maskRect)
            };
            h["com.watabou.coogee.ui.forms._FontForm.FontPreview"] = Ph;
            Ph.__name__ = "com.watabou.coogee.ui.forms._FontForm.FontPreview";
            Ph.__super__ = la;
            Ph.prototype = v(la.prototype, {
                layout: function() {
                    var a = this.maskRect.get_graphics();
                    a.clear();
                    a.beginFill(16711680);
                    a.drawRect(0, 0, this.rWidth, this.rHeight);
                    this.border.set_width(this.rWidth);
                    this.border.set_height(this.rHeight);
                    this.bg.set_width(this.rWidth - 2);
                    this.bg.set_height(this.rHeight - 2);
                    this.tf.set_x(Math.max((this.rWidth - this.tf.get_width()) / 2, 0));
                    this.tf.set_y(Math.max((this.rHeight - this.tf.get_height()) / 2, 0))
                },
                setFont: function(a) {
                    a = kd.font2format(a);
                    null == a && (a = new Ae);
                    a.color = C.black;
                    this.tf.setTextFormat(a);
                    this.fixText();
                    this.layout()
                },
                fixText: function() {
                    this.tf.set_autoSize(1);
                    var a = this.tf.get_width()
                      , b = this.tf.get_height();
                    this.tf.set_autoSize(2);
                    this.tf.set_width(Math.ceil(a));
                    this.tf.set_height(Math.ceil(b))
                },
                __class__: Ph
            });
            var Tj = function(a) {
                Ra.call(this, ["OK"]);
                var b = new pf;
                a = new Bb(a);
                a.mouseEnabled = !1;
                a.mouseChildren = !1;
                a.set_width(360);
                b.add(a);
                this.add(b)
            };
            h["com.watabou.coogee.ui.forms.Message"] = Tj;
            Tj.__name__ = "com.watabou.coogee.ui.forms.Message";
            Tj.__super__ = Ra;
            Tj.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Message"
                },
                __class__: Tj
            });
            var Uj = function() {
                Hc.call(this);
                this.content = new gb;
                this.content.setMargins(12, 12);
                this.add(this.content)
            };
            h["com.watabou.coogee.ui.forms.MultiColorForm"] = Uj;
            Uj.__name__ = "com.watabou.coogee.ui.forms.MultiColorForm";
            Uj.__super__ = Hc;
            Uj.prototype = v(Hc.prototype, {
                onButton: function(a) {
                    "Add" == a ? (a = this.get(),
                    a.push(a[a.length - 1]),
                    this.set(a)) : Hc.prototype.onButton.call(this, a)
                },
                set: function(a) {
                    this.content.removeChildren();
                    for (var b = [], c = 0, d = a.length; c < d; ) {
                        var f = c++
                          , g = a[f];
                        if (0 < f) {
                            var k = new Xa(C.black);
                            k.halign = "fill";
                            k.setSize(2, 2);
                            this.content.add(k)
                        }
                        f = new Vj(this.content,g,0 == f,f == a.length - 1);
                        f.action.add(m(this, this.onItemAction));
                        b.push(f)
                    }
                    this.items = b;
                    this.add(this.content);
                    xa.__cast(this.parent, hd).resize(!0)
                },
                get: function() {
                    for (var a = [], b = 0, c = this.items; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        a.push(d.color)
                    }
                    return a
                },
                onItemAction: function(a, b) {
                    var c = this.items.indexOf(a)
                      , d = this.get();
                    d.splice(c, 1);
                    switch (b) {
                    case "Duplicate":
                        d.splice(c, 0, a.color);
                        d.splice(c, 0, a.color);
                        break;
                    case "Move down":
                        d.splice(c + 1, 0, a.color);
                        break;
                    case "Move up":
                        d.splice(c - 1, 0, a.color)
                    }
                    this.set(d)
                },
                __class__: Uj
            });
            var Vj = function(a, b, c, d) {
                this.action = new pg;
                var f = this;
                this.color = b;
                var g = new id;
                g.setMargins(0, 10);
                var k = new gb;
                k.setMargins(0, 10);
                this.hex = new pc("#000000",!0);
                this.hex.set_text(P.hex(b, 6));
                this.hex.set_restrict("#0-9a-fA-F");
                this.hex.update.add(m(this, this.onHex));
                k.add(this.hex);
                this.swatch = new $c(b,10 + 2 * this.hex.get_height());
                this.swatch.halign = "fill";
                k.add(this.swatch);
                g.add(k);
                k = new Te(4);
                k.setMargins(0, 10);
                var q = ["Duplicate"];
                c || q.push("Move up");
                d || q.push("Move down");
                c && d || q.push("Delete");
                c = new fe("...",q);
                c.action.add(function(a) {
                    f.action.dispatch(f, a)
                });
                c.valign = "fill";
                b = $b.rgb2hsv(b);
                this.hue = this.addRow(k, "Hue", 359, b.x, c);
                this.sat = this.addRow(k, "Sat", 100, 100 * b.y);
                this.val = this.addRow(k, "Val", 100, 100 * b.z);
                g.add(k);
                a.add(g)
            };
            h["com.watabou.coogee.ui.forms.ColorItem"] = Vj;
            Vj.__name__ = "com.watabou.coogee.ui.forms.ColorItem";
            Vj.prototype = {
                addRow: function(a, b, c, d, f) {
                    var g = this;
                    c |= 0;
                    d |= 0;
                    b = new wb(b);
                    b.valign = "center";
                    a.add(b);
                    var k = new jd(0,c);
                    k.set_value(d);
                    k.valign = "center";
                    a.add(k);
                    var q = new lc(d,0,c,3);
                    a.add(q);
                    q.update.add(function(a) {
                        k.set_value(q.get_value())
                    });
                    k.change.add(function(a) {
                        q.set_value(Math.round(a));
                        g.updateSwatch()
                    });
                    null != f ? a.add(f) : a.addEmpty();
                    return k
                },
                onHex: function(a) {
                    "#" == a.charAt(0) && (a = Q.substr(a, 1, null));
                    if (3 == a.length) {
                        var b = [];
                        b.push(a.charAt(0) + a.charAt(0));
                        b.push(a.charAt(1) + a.charAt(1));
                        b.push(a.charAt(2) + a.charAt(2));
                        a = b.join("")
                    }
                    6 < a.length && (a = Q.substr(a, 0, 6));
                    a = G.parseInt("0x" + a);
                    a = $b.rgb2hsv(a);
                    this.hue.set_value(a.x);
                    this.sat.set_value(100 * a.y);
                    this.val.set_value(100 * a.z);
                    this.updateSwatch()
                },
                updateSwatch: function() {
                    var a = this.color = $b.hsv(this.hue.get_value(), this.sat.get_value() / 100, this.val.get_value() / 100);
                    this.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                    this.hex.set_text(P.hex(this.color, 6))
                },
                __class__: Vj
            };
            var Ic = function(a, b) {
                this.onNullAsset = function(a, b) {
                    console.log("../classes/com/watabou/coogee/ui/forms/PaletteForm.hx:38:", "No " + a + " palette!")
                }
                ;
                this.getName = function(a) {
                    return "palette"
                }
                ;
                var c = this;
                Yc.call(this);
                this.form = new id;
                this.form.setMargins(0, 0);
                this.add(this.form);
                this.tabs = new Qh;
                this.form.add(this.tabs);
                var d = [new ib("Load",m(this, this.onLoad)), new ib("Apply",function() {
                    a(c.getPalette())
                }
                ), new ib("Save",function() {
                    c.onSave(c.getPalette())
                }
                )];
                if (null != b) {
                    for (var f = [], g = []; 0 < b.length; )
                        f.push(b.shift()),
                        g.push(b.shift());
                    b = new fe("Preset",f,g);
                    b.action.add(function(a) {
                        c.loadPreset(a)
                    });
                    d.unshift(b)
                }
                this.buttons = new Rh(d);
                this.form.add(this.buttons);
                this.onApply = a;
                this.values = []
            };
            h["com.watabou.coogee.ui.forms.PaletteForm"] = Ic;
            Ic.__name__ = "com.watabou.coogee.ui.forms.PaletteForm";
            Ic.txt2color = function(a) {
                "#" == a.charAt(0) && (a = Q.substr(a, 1, null));
                if (3 == a.length) {
                    var b = [];
                    b.push(a.charAt(0) + a.charAt(0));
                    b.push(a.charAt(1) + a.charAt(1));
                    b.push(a.charAt(2) + a.charAt(2));
                    a = b.join("")
                }
                6 < a.length && (a = Q.substr(a, 0, 6));
                return G.parseInt("0x" + a)
            }
            ;
            Ic.txt2float = function(a, b, c) {
                return Zb.gate(parseFloat(a), b, c)
            }
            ;
            Ic.txt2int = function(a, b, c) {
                return Zb.gatei(G.parseInt(a), b | 0, c | 0)
            }
            ;
            Ic.swatches = function(a, b) {
                return function(c) {
                    for (var d = null != a ? a + "_" : "", f = [], g = 0; g < b.length; ) {
                        var k = b[g];
                        ++g;
                        f.push(Sh.get(c.getColor(k)))
                    }
                    return d + f.join("_")
                }
            }
            ;
            Ic.__super__ = Yc;
            Ic.prototype = v(Yc.prototype, {
                onShow: function() {
                    Yc.prototype.onShow.call(this);
                    this.tabs.onTab(Ic.lastTab);
                    this.tabs.change.add(function(a) {
                        Ic.lastTab = a
                    })
                },
                onEnter: function() {
                    this.onApply(this.getPalette())
                },
                layout: function() {
                    null != this.tabs && this.tabs.layout();
                    this.form.layout();
                    Yc.prototype.layout.call(this)
                },
                onKey: function(a) {
                    var b = this.tabs.getTab();
                    switch (a) {
                    case 33:
                        if (b < this.tabs.getTabCount() - 1)
                            this.tabs.onTab(b + 1);
                        break;
                    case 34:
                        if (0 < b)
                            this.tabs.onTab(this.tabs.getTab() - 1);
                        break;
                    default:
                        return Yc.prototype.onKey.call(this, a)
                    }
                    return !0
                },
                setMaxTabs: function(a) {
                    this.tabs.set_rowSize(a)
                },
                addTab: function(a) {
                    this.grid = new Te(2);
                    this.tabs.addTab(a, this.grid)
                },
                addColor: function(a, b, c) {
                    var d = this;
                    null == this.grid && this.addTab(null);
                    var f = new wb(b);
                    this.grid.add(f);
                    b = new id;
                    b.setMargins(0, 10);
                    var g = new pc("#000000",!0);
                    g.set_text(P.hex(c, 6));
                    g.set_restrict("#0-9a-fA-F");
                    b.add(g);
                    var k = new $c(c,g.get_height());
                    b.add(k);
                    g.update.add(function(a) {
                        a = Ic.txt2color(a);
                        k.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                    });
                    k.onClick(function() {
                        d.onColor(f.get_text(), k, function(a) {
                            g.set_text(P.hex(a, 6));
                            k.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                        })
                    });
                    this.grid.add(b);
                    this.values.push({
                        id: a,
                        type: Cb.COLOR,
                        view: g,
                        swatch: k
                    });
                    this.layout()
                },
                addFont: function(a, b, c, d, f) {
                    null == d && (d = !1);
                    null == this.grid && this.addTab(null);
                    b = new wb(b);
                    this.grid.add(b);
                    null != f && (c.embedded = f);
                    c = new Gc(c,d ? Gd.fontFace2text : Gd.font2text,null,Gc.editInForm(Gd, b.get_text(), this));
                    c.set_width(d ? 80 : 220);
                    c.halign = "fill";
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: Cb.FONT,
                        view: c
                    });
                    this.layout()
                },
                addFloat: function(a, b, c, d, f) {
                    null == this.grid && this.addTab(null);
                    b = new wb(b);
                    this.grid.add(b);
                    c = new wa(c,d,f,5);
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: Cb.FLOAT,
                        view: c,
                        min: d,
                        max: f
                    });
                    this.layout()
                },
                addInt: function(a, b, c, d, f) {
                    null == this.grid && this.addTab(null);
                    b = new wb(b);
                    this.grid.add(b);
                    c = new lc(c,d,f,7);
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: Cb.INT,
                        view: c,
                        min: d,
                        max: f
                    });
                    this.layout()
                },
                addEnum: function(a, b, c, d) {
                    null == this.grid && this.addTab(null);
                    b = new wb(b);
                    this.grid.add(b);
                    c = Zc.ofStrings(c);
                    c.set_text(d);
                    c.halign = "fill";
                    this.grid.add(c);
                    this.values.push({
                        id: a,
                        type: Cb.STRING,
                        view: c
                    });
                    this.layout()
                },
                addCheck: function(a, b, c) {
                    null == this.grid && this.addTab(null);
                    b = new wb(b);
                    this.grid.add(b);
                    b = new Uc;
                    b.set_value(c);
                    b.valign = "fill";
                    this.grid.add(b);
                    this.values.push({
                        id: a,
                        type: Cb.BOOL,
                        view: b
                    });
                    this.layout()
                },
                onColor: function(a, b, c) {
                    var d = w.findForm(ge);
                    null == d && (d = new ge,
                    w.showDialog(d));
                    d.link(a, b.paint.bmp.get_bitmapData().getPixel(0, 0), c, this)
                },
                onLoad: function() {
                    var a = this
                      , b = new $g;
                    b.addEventListener("select", function(c) {
                        b.addEventListener("complete", m(a, a.onPaletteLoaded));
                        b.load()
                    });
                    var c = [new Wj("Palette","*.json")];
                    b.browse(c)
                },
                loadPreset: function(a) {
                    if (Rb.exists(a))
                        this.loadPalette(kd.fromJSON(Rb.getText(a)));
                    else
                        this.onNullAsset(a, this)
                },
                onPaletteLoaded: function(a) {
                    try {
                        this.loadPalette(kd.fromJSON(xa.__cast(a.target, $g).data.toString()))
                    } catch (b) {
                        u.show("Invalid palette file")
                    }
                },
                loadPalette: function(a) {
                    for (var b = 0, c = this.values; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                        case 0:
                            var f = d.view
                              , g = a.getColor(d.id, Ic.txt2color(f.get_text()));
                            d.swatch.paint.bmp.get_bitmapData().setPixel(0, 0, g);
                            f.set_text(P.hex(g, 6));
                            break;
                        case 1:
                            f = d.view;
                            g = a.getMulti(d.id, Ic.txt2color(f.get_text()));
                            d = d.multi;
                            d.colors = g;
                            var k = d.colors[0];
                            d.paint.bmp.get_bitmapData().setPixel(0, 0, k);
                            k = 1 < d.colors.length ? d.colors[1] : C.white;
                            d.paint2.bmp.get_bitmapData().setPixel(0, 0, k);
                            f.set_text(P.hex(g[0], 6));
                            break;
                        case 2:
                            f = d.view;
                            d = a.getFont(d.id, f.get_value());
                            f.set_value(d);
                            break;
                        case 3:
                            f = d.view;
                            d = a.getFloat(d.id, Ic.txt2float(f.get_text(), d.min, d.max));
                            f.set_text(null == d ? "null" : "" + d);
                            break;
                        case 4:
                            f = d.view;
                            d = a.getInt(d.id, Ic.txt2int(f.get_text(), d.min, d.max));
                            f.set_text(null == d ? "null" : "" + d);
                            break;
                        case 5:
                            d.view instanceof Zc ? (f = d.view,
                            d = a.getString(d.id, f.get_value()),
                            f.set_value(d)) : (f = d.view,
                            d = a.getString(d.id, f.get_text()),
                            f.set_text(d));
                            break;
                        case 6:
                            f = d.view,
                            f.set_value(a.getBool(d.id, f.get_value()))
                        }
                    }
                },
                getPalette: function() {
                    for (var a = new kd, b = 0, c = this.values; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                        case 0:
                            var f = d.view
                              , g = Ic.txt2color(f.get_text());
                            a.setColor(d.id, g);
                            f.set_text(P.hex(g, 6));
                            break;
                        case 1:
                            f = d.view;
                            g = d.multi.colors;
                            a.setMulti(d.id, g);
                            f.set_text(P.hex(g[0], 6));
                            break;
                        case 2:
                            f = d.view.get_value();
                            a.setFont(d.id, f);
                            break;
                        case 3:
                            f = d.view;
                            g = Ic.txt2float(f.get_text(), d.min, d.max);
                            a.setFloat(d.id, g);
                            f.set_text(null == g ? "null" : "" + g);
                            break;
                        case 4:
                            f = d.view;
                            g = Ic.txt2int(f.get_text(), d.min, d.max);
                            a.setInt(d.id, g);
                            f.set_text(null == g ? "null" : "" + g);
                            break;
                        case 5:
                            d.view instanceof Zc ? a.setString(d.id, d.view.get_value()) : a.setString(d.id, d.view.get_text());
                            break;
                        case 6:
                            a.setBool(d.id, d.view.get_value())
                        }
                    }
                    return a
                },
                onSave: function(a) {
                    Be.saveText(a.json(), this.getName(a) + ".json", "application/json")
                },
                __class__: Ic
            });
            var Rh = function(a) {
                la.call(this);
                this.bg = Xa.light();
                this.add(this.bg);
                this.vbox = new gb;
                this.add(this.vbox);
                for (var b = 0; b < a.length; ) {
                    var c = a[b];
                    ++b;
                    c.set_width(100);
                    this.vbox.add(c)
                }
                this.setSize(this.vbox.get_width(), this.vbox.get_height());
                this.valign = "fill"
            };
            h["com.watabou.coogee.ui.forms.ButtonColumn"] = Rh;
            Rh.__name__ = "com.watabou.coogee.ui.forms.ButtonColumn";
            Rh.__super__ = la;
            Rh.prototype = v(la.prototype, {
                layout: function() {
                    this.rWidth = Math.max(this.rWidth, this.vbox.get_width());
                    this.bg.set_width(this.rWidth);
                    this.bg.set_height(this.rHeight);
                    this.vbox.set_x((this.rWidth - this.vbox.get_width()) / 2 | 0);
                    this.vbox.set_y(0)
                },
                __class__: Rh
            });
            var Ue = function(a, b) {
                Ra.call(this, ["Generate", "Random"]);
                this.generate = b;
                this.content = new gb;
                this.addAbove();
                this.tags = new qc;
                this.tags.setSize(300, 0);
                this.tags.set(a);
                this.content.add(this.tags);
                null != Ue.hintText && (a = new Wd(Ue.hintText),
                a.set_color(C.dark),
                a.set_width(300),
                this.content.add(a));
                this.add(this.content)
            };
            h["com.watabou.coogee.ui.forms.TagsForm"] = Ue;
            Ue.__name__ = "com.watabou.coogee.ui.forms.TagsForm";
            Ue.__super__ = Ra;
            Ue.prototype = v(Ra.prototype, {
                onButton: function(a) {
                    switch (a) {
                    case "Generate":
                        Da.set("tags", this.tags.selected);
                        this.tags.set(this.generate(this.tags.selected));
                        this.relayout();
                        break;
                    case "Random":
                        this.tags.set(this.generate(null));
                        this.relayout();
                        break;
                    default:
                        Ra.prototype.onButton.call(this, a)
                    }
                },
                relayout: function() {
                    this.content.layout();
                    var a = this.buttons.get_y();
                    this.layout();
                    a > this.buttons.get_y() && (this.buttons.set_y(a),
                    a = this.buttons,
                    this.rHeight = a.get_y() + a.rHeight + this.margin);
                    xa.__cast(this.parent, hd).resize()
                },
                onEnter: function() {
                    this.onButton("Generate")
                },
                onKey: function(a) {
                    return 9 == a ? (this.onEsc(),
                    !0) : Ra.prototype.onKey.call(this, a)
                },
                addAbove: function() {},
                __class__: Ue
            });
            var Te = function(a) {
                null == a && (a = 2);
                this.margin = this.gap = 10;
                la.call(this);
                this.cols = a
            };
            h["com.watabou.coogee.ui.layouts.Grid"] = Te;
            Te.__name__ = "com.watabou.coogee.ui.layouts.Grid";
            Te.__super__ = la;
            Te.prototype = v(la.prototype, {
                layout: function() {
                    for (var a = [], b = 0, c = this.cols; b < c; )
                        b++,
                        a.push(0);
                    c = a;
                    var d = [];
                    a = 0;
                    for (b = this.get_numChildren(); a < b; ) {
                        var f = a++;
                        var g = f % this.cols
                          , k = f / this.cols | 0;
                        d.length <= k && d.push(0);
                        f = this.getChildAt(f);
                        var q = f.get_width();
                        c[g] < q && (c[g] = q);
                        g = f.get_height();
                        d[k] < g && (d[k] = g)
                    }
                    var p = q = this.margin;
                    a = k = g = 0;
                    for (b = this.get_numChildren(); a < b; ) {
                        f = a++;
                        f = this.getChildAt(f);
                        var l = q
                          , h = p;
                        if (f instanceof la) {
                            var n = xa.__cast(f, la);
                            switch (n.halign) {
                            case "center":
                                l += (c[g] - n.get_width()) / 2;
                                break;
                            case "fill":
                                n.set_width(c[g]);
                                break;
                            case "right":
                                l += c[g] - n.get_width()
                            }
                            switch (n.valign) {
                            case "bottom":
                                h += d[k] - n.get_height();
                                break;
                            case "center":
                                h += (d[k] - n.get_height()) / 2;
                                break;
                            case "fill":
                                n.set_height(d[k])
                            }
                        }
                        f.set_x(l);
                        f.set_y(h);
                        q += c[g] + this.gap;
                        ++g;
                        g == this.cols && (q = this.margin,
                        p += d[k] + this.gap,
                        ++k,
                        g = 0)
                    }
                    this.rHeight = 2 * this.margin + (d.length - 1) * this.gap;
                    for (a = 0; a < d.length; )
                        g = d[a],
                        ++a,
                        this.rHeight += g;
                    this.rWidth = 2 * this.margin + (c.length - 1) * this.gap;
                    for (a = 0; a < c.length; )
                        q = c[a],
                        ++a,
                        this.rWidth += q
                },
                add: function(a) {
                    la.prototype.add.call(this, a);
                    this.layout()
                },
                addEmpty: function() {
                    this.add(new Xa(0,0))
                },
                setMargins: function(a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: Te
            });
            var id = function() {
                this.margin = this.gap = 10;
                la.call(this)
            };
            h["com.watabou.coogee.ui.layouts.HBox"] = id;
            id.__name__ = "com.watabou.coogee.ui.layouts.HBox";
            id.__super__ = la;
            id.prototype = v(la.prototype, {
                layout: function() {
                    for (var a = this.margin, b = 0, c = !1, d = 0, f = this.get_numChildren(); d < f; ) {
                        var g = d++;
                        g = this.getChildAt(g);
                        "top" != g.valign && (c = !0);
                        "fill" != g.valign && b < g.get_height() && (b = g.get_height());
                        g.set_x(a);
                        g.set_y(this.margin);
                        a += g.get_width() + this.gap
                    }
                    if (c)
                        for (d = 0,
                        f = this.get_numChildren(); d < f; )
                            switch (g = d++,
                            g = this.getChildAt(g),
                            g.valign) {
                            case "bottom":
                                g.set_y(this.margin + (b - g.get_height()));
                                break;
                            case "center":
                                g.set_y(this.margin + (b - g.get_height()) / 2);
                                break;
                            case "fill":
                                g.set_height(b)
                            }
                    this.rWidth = a > this.margin ? a - this.gap + this.margin : 2 * this.margin;
                    this.rHeight = b + 2 * this.margin
                },
                add: function(a) {
                    la.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function(a, b) {
                    this.margin = a;
                    this.gap = b
                },
                __class__: id
            });
            var pf = function() {
                this.margin = 10;
                la.call(this)
            };
            h["com.watabou.coogee.ui.layouts.SimpleBox"] = pf;
            pf.__name__ = "com.watabou.coogee.ui.layouts.SimpleBox";
            pf.__super__ = la;
            pf.prototype = v(la.prototype, {
                layout: function() {
                    for (var a = 0, b = 0, c = 0, d = this.get_numChildren(); c < d; ) {
                        var f = c++;
                        f = this.getChildAt(f);
                        a < f.get_width() && (a = f.get_width());
                        b < f.get_height() && (b = f.get_height());
                        f.set_x(this.margin);
                        f.set_y(this.margin)
                    }
                    this.rWidth = a + 2 * this.margin;
                    this.rHeight = b + 2 * this.margin
                },
                add: function(a) {
                    la.prototype.add.call(this, a);
                    this.layout()
                },
                setMargins: function(a) {
                    this.margin = a
                },
                __class__: pf
            });
            var Qh = function() {
                this.change = new Ac;
                gb.call(this);
                this.setMargins(0, 0);
                this.tabRow = new Th;
                this.tabRow.click.add(m(this, this.onTab));
                this.tabRow.halign = "fill";
                this.add(this.tabRow);
                this.stack = new pf;
                this.stack.setMargins(0);
                this.add(this.stack)
            };
            h["com.watabou.coogee.ui.layouts.Tabs"] = Qh;
            Qh.__name__ = "com.watabou.coogee.ui.layouts.Tabs";
            Qh.__super__ = gb;
            Qh.prototype = v(gb.prototype, {
                layout: function() {
                    null != this.stack && this.stack.layout();
                    gb.prototype.layout.call(this)
                },
                addTab: function(a, b) {
                    null != a && this.tabRow.addTab(a);
                    this.stack.add(b);
                    this.tabRow.get_selected() != this.stack.get_numChildren() - 1 && null != a && b.set_visible(!1);
                    this.layout()
                },
                onTab: function(a) {
                    var b = this.tabRow.get_selected();
                    -1 != b && this.stack.getChildAt(b).set_visible(!1);
                    this.stack.getChildAt(a).set_visible(!0);
                    this.tabRow.set_selected(a);
                    this.change.dispatch(a)
                },
                getTab: function() {
                    return this.tabRow.get_selected()
                },
                getTabCount: function() {
                    return this.tabRow.get_size()
                },
                set_rowSize: function(a) {
                    return this.tabRow.rowSize = a
                },
                __class__: Qh,
                __properties__: v(gb.prototype.__properties__, {
                    set_rowSize: "set_rowSize"
                })
            });
            var Xd = function() {
                this._selected = -1;
                this.tabs = [];
                this.rowSize = 256;
                this.click = new Ac;
                la.call(this);
                this.bg = Xa.light();
                this.add(this.bg)
            };
            h["com.watabou.coogee.ui.layouts._Tabs.TabButtons"] = Xd;
            Xd.__name__ = "com.watabou.coogee.ui.layouts._Tabs.TabButtons";
            Xd.__super__ = la;
            Xd.prototype = v(la.prototype, {
                get_selected: function() {
                    return this._selected
                },
                set_selected: function(a) {
                    return this._selected = a
                },
                get_size: function() {
                    return this.tabs.length
                },
                layout: function() {
                    this.bg.setSize(this.rWidth, this.rHeight)
                },
                addTab: function(a) {
                    a = new Uh(a);
                    a.click.add(m(this, this.onTab));
                    this.tabs.push(a);
                    return a
                },
                onTab: function(a) {
                    this.click.dispatch(this.tabs.indexOf(a))
                },
                __class__: Xd,
                __properties__: v(la.prototype.__properties__, {
                    get_size: "get_size",
                    set_selected: "set_selected",
                    get_selected: "get_selected"
                })
            });
            var Xj = function() {
                this.first = 0;
                Xd.call(this);
                this.stripe = new id;
                this.stripe.setMargins(0, 0);
                this.add(this.stripe);
                this.more = new ib("...");
                this.more.click.add(m(this, this.showList));
                this.more.set_visible(!1);
                this.add(this.more)
            };
            h["com.watabou.coogee.ui.layouts._Tabs.TabRow"] = Xj;
            Xj.__name__ = "com.watabou.coogee.ui.layouts._Tabs.TabRow";
            Xj.__super__ = Xd;
            Xj.prototype = v(Xd.prototype, {
                layout: function() {
                    Xd.prototype.layout.call(this);
                    this.more.set_height(this.rHeight - 8);
                    this.more.set_x(this.rWidth - this.more.get_width());
                    this.more.set_y(4)
                },
                addTab: function(a) {
                    a = Xd.prototype.addTab.call(this, a);
                    this.stripe.add(a);
                    this.updateSize();
                    this.layout();
                    1 == this.tabs.length && this.set_selected(0);
                    return a
                },
                set_selected: function(a) {
                    if (0 == this.tabs.length)
                        return 0;
                    -1 != this._selected && this.tabs[this._selected].set_selected(!1);
                    this._selected = a;
                    if (this.tabs.length > this.rowSize) {
                        this.first > a ? this.first = a : a >= this.first + this.rowSize && (this.first = a - this.rowSize + 1);
                        for (var b = 0, c = this.tabs.length; b < c; )
                            a = b++,
                            this.tabs[a].set_visible(a >= this.first && a < this.first + this.rowSize);
                        this.stripe.set_x(-this.tabs[this.first].get_x())
                    }
                    -1 != this._selected && this.tabs[this._selected].set_selected(!0);
                    return this.get_selected()
                },
                updateSize: function() {
                    if (this.tabs.length <= this.rowSize)
                        this.more.set_visible(!1),
                        this.rWidth = this.stripe.get_width();
                    else {
                        this.more.set_visible(!0);
                        for (var a = this.rWidth = 0, b = this.tabs.length - this.rowSize + 1; a < b; ) {
                            for (var c = a++, d = 0, f = 0, g = this.rowSize; f < g; ) {
                                var k = f++;
                                d += this.tabs[c + k].get_width()
                            }
                            this.rWidth < d && (this.rWidth = d)
                        }
                        this.rWidth += 4 + this.more.get_width()
                    }
                    this.rHeight = this.stripe.get_height()
                },
                showList: function() {
                    for (var a = this, b = new fc, c = 0, d = this.tabs.length; c < d; ) {
                        var f = [c++];
                        b.addItem(this.tabs[f[0]].get_text(), function(b) {
                            return function() {
                                a.click.dispatch(b[0])
                            }
                        }(f), this.get_selected() == f[0])
                    }
                    c = w.getRect(this.more);
                    w.showMenuAt(b, Math.ceil(c.x), c.get_bottom())
                },
                __class__: Xj
            });
            var Th = function() {
                Xd.call(this);
                this.stripes = new gb;
                this.stripes.setMargins(0, 0);
                this.add(this.stripes)
            };
            h["com.watabou.coogee.ui.layouts._Tabs.TabMultiRow"] = Th;
            Th.__name__ = "com.watabou.coogee.ui.layouts._Tabs.TabMultiRow";
            Th.__super__ = Xd;
            Th.prototype = v(Xd.prototype, {
                addTab: function(a) {
                    a = Xd.prototype.addTab.call(this, a);
                    null == this.lastRow && (this.lastRow = new id,
                    this.lastRow.setMargins(0, 0),
                    this.stripes.add(this.lastRow));
                    this.lastRow.add(a);
                    this.lastRow.get_numChildren() >= this.rowSize && (this.lastRow = null);
                    this.stripes.layout();
                    this.updateSize();
                    this.layout();
                    1 == this.tabs.length && this.set_selected(0);
                    return a
                },
                set_selected: function(a) {
                    if (0 == this.tabs.length)
                        return 0;
                    -1 != this._selected && this.tabs[this._selected].set_selected(!1);
                    this._selected = a;
                    if (-1 != this._selected) {
                        a = this.tabs[this._selected];
                        a.set_selected(!0);
                        for (var b = this.stripes.getChildAt(this.stripes.get_numChildren() - 1); -1 == b.getChildIndex(a); )
                            b = this.stripes.removeChildAt(0),
                            this.stripes.add(b)
                    }
                    return this.get_selected()
                },
                updateSize: function() {
                    this.rWidth = this.stripes.get_width();
                    this.rHeight = this.stripes.get_height()
                },
                __class__: Th
            });
            var Uh = function(a) {
                this.click = new Ac;
                la.call(this);
                this.bg = new T;
                this.addChild(this.bg);
                this.tf = oc.get("", C.format(C.uiFont, C.smallSize, C.black));
                this.tf.set_x(4);
                this.tf.set_y(8);
                this.addChild(this.tf);
                this.set_text(a);
                this.set_selected(!1);
                this.set_buttonMode(!0);
                this.addEventListener("click", m(this, this.onClick))
            };
            h["com.watabou.coogee.ui.layouts.Tab"] = Uh;
            Uh.__name__ = "com.watabou.coogee.ui.layouts.Tab";
            Uh.__super__ = la;
            Uh.prototype = v(la.prototype, {
                layout: function() {
                    var a = this.bg.get_graphics();
                    a.clear();
                    a.beginFill(C.white);
                    a.drawRoundRectComplex(0, 4, this.rWidth, this.rHeight - 4, 4, 4, 0, 0)
                },
                onClick: function(a) {
                    this.click.dispatch(this)
                },
                get_text: function() {
                    return this.tf.get_text()
                },
                set_text: function(a) {
                    this.tf.set_text(a);
                    this.setSize(this.tf.get_width() + 8, Math.ceil(this.tf.get_height() + 8));
                    return a
                },
                set_selected: function(a) {
                    this.mouseEnabled = !a;
                    this.bg.set_alpha(a ? 1 : 0);
                    return a
                },
                __class__: Uh,
                __properties__: v(la.prototype.__properties__, {
                    set_selected: "set_selected",
                    set_text: "set_text",
                    get_text: "get_text"
                })
            });
            var oc = function() {};
            h["com.watabou.coogee.ui.utils.Text"] = oc;
            oc.__name__ = "com.watabou.coogee.ui.utils.Text";
            oc.get = function(a, b, c, d) {
                null == a && (a = "");
                var f = new Oc;
                null != c || null != d ? oc.activate(f, c, d) : f.set_selectable(!1);
                f.set_autoSize(1);
                null != b && f.set_defaultTextFormat(b);
                f.set_htmlText(a);
                return f
            }
            ;
            oc.input = function(a, b, c) {
                null == a && (a = "");
                var d = new Oc;
                d.set_type(1);
                d.set_borderColor(d.get_defaultTextFormat().color);
                d.set_background(!0);
                d.set_border(!0);
                d.addEventListener("change", function(a) {
                    null != c && c()
                });
                d.set_defaultTextFormat(b);
                d.set_text("" != a ? a : " ");
                d.set_autoSize(1);
                d.set_height(d.get_height());
                d.set_autoSize(2);
                d.set_text(a);
                return d
            }
            ;
            oc.format = function(a, b, c) {
                null == c && (c = 0);
                return new Ae(Rb.exists(a) ? Rb.getFont(a).name : a,b,c)
            }
            ;
            oc.activate = function(a, b, c) {
                a.set_type(1);
                a.addEventListener("focusIn", function(b) {
                    a.set_borderColor(a.get_defaultTextFormat().color);
                    a.set_border(!0)
                });
                a.addEventListener("focusOut", function(b) {
                    a.set_border(!1);
                    null != c && c()
                });
                a.addEventListener("keyDown", function(b) {
                    if (13 == b.keyCode || 27 == b.keyCode)
                        a.stage.set_focus(a.stage),
                        b.stopPropagation()
                });
                a.addEventListener("change", function(a) {
                    null != b && b()
                })
            }
            ;
            var B = function(a, b) {
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            h["openfl.geom.Point"] = B;
            B.__name__ = "openfl.geom.Point";
            B.distance = function(a, b) {
                var c = a.x - b.x;
                a = a.y - b.y;
                return Math.sqrt(c * c + a * a)
            }
            ;
            B.polar = function(a, b) {
                return new B(a * Math.cos(b),a * Math.sin(b))
            }
            ;
            B.prototype = {
                add: function(a) {
                    return new B(a.x + this.x,a.y + this.y)
                },
                clone: function() {
                    return new B(this.x,this.y)
                },
                copyFrom: function(a) {
                    this.x = a.x;
                    this.y = a.y
                },
                normalize: function(a) {
                    if (0 != this.x || 0 != this.y)
                        a /= Math.sqrt(this.x * this.x + this.y * this.y),
                        this.x *= a,
                        this.y *= a
                },
                offset: function(a, b) {
                    this.x += a;
                    this.y += b
                },
                setTo: function(a, b) {
                    this.x = a;
                    this.y = b
                },
                subtract: function(a) {
                    return new B(this.x - a.x,this.y - a.y)
                },
                __toLimeVector2: function() {
                    null == B.__limeVector2 && (B.__limeVector2 = new qg);
                    var a = B.__limeVector2;
                    a.x = this.x;
                    a.y = this.y;
                    return B.__limeVector2
                },
                get_length: function() {
                    return Math.sqrt(this.x * this.x + this.y * this.y)
                },
                __class__: B,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var Ca = function(a, b) {
                this.width = a;
                this.height = b;
                this.root = da.createElement("svg");
                this.root.set("width", G.string(Math.round(1E3 * a) / 1E3));
                this.root.set("height", G.string(Math.round(1E3 * b) / 1E3));
                this.root.set("xmlns", "http://www.w3.org/2000/svg")
            };
            h["com.watabou.formats.SVG"] = Ca;
            Ca.__name__ = "com.watabou.formats.SVG";
            Ca.setOpacity = function(a, b) {
                a.set("opacity", null == b ? "null" : "" + b);
                return a
            }
            ;
            Ca.setFill = function(a, b, c) {
                null == c && (c = 1);
                a.set("fill", "#" + P.hex(b, 6));
                1 > c && a.set("fill-opacity", null == c ? "null" : "" + c);
                return a
            }
            ;
            Ca.noFill = function(a) {
                a.set("fill", "none");
                return a
            }
            ;
            Ca.fillRule = function(a, b) {
                a.set("fill-rule", b);
                return a
            }
            ;
            Ca.setStroke = function(a, b, c, d, f) {
                null == c && (c = 0);
                a.set("stroke", "#" + P.hex(b, 6));
                0 != c && a.set("stroke-width", G.string(Math.round(1E3 * c) / 1E3));
                Ca.joinNcap(a, d, f);
                return a
            }
            ;
            Ca.strokeOpacity = function(a, b) {
                a.set("stroke-opacity", null == b ? "null" : "" + b);
                return a
            }
            ;
            Ca.joinNcap = function(a, b, c) {
                null != b && a.set("stroke-linejoin", b);
                null != c && a.set("stroke-linecap", c);
                return a
            }
            ;
            Ca.style = function(a, b) {
                a.set("style", b);
                return a
            }
            ;
            Ca.clearTransform = function(a) {
                a.remove("transform");
                return a
            }
            ;
            Ca.addTransform = function(a, b) {
                var c = a.get("transform");
                a.set("transform", null == c ? b : "" + b + " " + c);
                return a
            }
            ;
            Ca.translate = function(a, b, c) {
                return Ca.addTransform(a, "translate(" + G.string(Math.round(1E3 * b) / 1E3) + " " + G.string(Math.round(1E3 * c) / 1E3) + ")")
            }
            ;
            Ca.scale = function(a, b, c) {
                return Ca.addTransform(a, "scale(" + G.string(Math.round(1E3 * b) / 1E3) + " " + G.string(Math.round(1E3 * c) / 1E3) + ")")
            }
            ;
            Ca.rotate = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                return Ca.addTransform(a, "rotate(" + G.string(Math.round(1E3 * b) / 1E3) + " " + G.string(Math.round(1E3 * c) / 1E3) + " " + G.string(Math.round(1E3 * d) / 1E3) + ")")
            }
            ;
            Ca.x = function(a, b) {
                a.set("x", G.string(Math.round(1E3 * b) / 1E3))
            }
            ;
            Ca.y = function(a, b) {
                a.set("y", G.string(Math.round(1E3 * b) / 1E3))
            }
            ;
            Ca.linearGradient = function(a, b, c) {
                null == b && (b = "userSpaceOnUse");
                var d = da.createElement("linearGradient");
                d.set("id", a);
                d.set("gradientUnits", b);
                null != c && (a = c.transformPoint(Ca._p0),
                c = c.transformPoint(Ca._p1),
                d.set("x1", G.string(Math.round(1E3 * a.x) / 1E3)),
                d.set("y1", G.string(Math.round(1E3 * a.y) / 1E3)),
                d.set("x2", G.string(Math.round(1E3 * c.x) / 1E3)),
                d.set("y2", G.string(Math.round(1E3 * c.y) / 1E3)));
                return d
            }
            ;
            Ca.radialGradient = function(a, b, c) {
                null == b && (b = "userSpaceOnUse");
                var d = da.createElement("radialGradient");
                d.set("id", a);
                d.set("gradientUnits", b);
                null != c && (d.set("cx", G.string(Math.round(1E3 * c.tx) / 1E3)),
                d.set("cy", G.string(Math.round(1E3 * c.ty) / 1E3)),
                d.set("r", G.string(Math.round(819200 * c.a) / 1E3)));
                return d
            }
            ;
            Ca.stop = function(a, b, c) {
                null == c && (c = 1);
                var d = da.createElement("stop");
                d.set("offset", Math.round(100 * a) + "%");
                d.set("stop-color", "#" + P.hex(b, 6));
                1 > c && d.set("stop-opacity", null == c ? "null" : "" + c);
                return d
            }
            ;
            Ca.group = function(a) {
                var b = da.createElement("g");
                null != a && b.set("id", a);
                return b
            }
            ;
            Ca.clipPath = function(a) {
                var b = da.createElement("clipPath");
                b.set("id", a);
                Ca.setFill(b, 16777215);
                return b
            }
            ;
            Ca.text = function(a, b, c) {
                var d = da.createElement("text");
                a = da.createPCData(a);
                d.addChild(a);
                null != b && d.set("text-anchor", b);
                null != c && d.set("dominant-baseline", c);
                return d
            }
            ;
            Ca.tspan = function(a) {
                var b = da.createElement("tspan");
                a = da.createPCData(a);
                b.addChild(a);
                return b
            }
            ;
            Ca.rect = function(a, b, c, d) {
                var f = da.createElement("rect");
                f.set("x", G.string(Math.round(1E3 * a) / 1E3));
                f.set("y", G.string(Math.round(1E3 * b) / 1E3));
                f.set("width", G.string(Math.round(1E3 * c) / 1E3));
                f.set("height", G.string(Math.round(1E3 * d) / 1E3));
                return f
            }
            ;
            Ca.prototype = {
                __class__: Ca
            };
            var Sb = function() {
                this.buff = new K
            };
            h["com.watabou.formats.SVGPath"] = Sb;
            Sb.__name__ = "com.watabou.formats.SVGPath";
            Sb.prototype = {
                xml: function() {
                    var a = da.createElement("path");
                    a.set("d", this.buff.b);
                    return a
                },
                __class__: Sb
            };
            var ha = function() {};
            h["com.watabou.formats.Sprite2SVG"] = ha;
            ha.__name__ = "com.watabou.formats.Sprite2SVG";
            ha.create = function(a, b, c, d) {
                null == d && (d = !0);
                null == c && (c = -1);
                d && (ha.resetGradients(),
                ha.resetImports());
                d = new Ca(a,b);
                ha.defaultAttributes(d.root);
                -1 != c && (a = Ca.rect(0, 0, a, b),
                Ca.setFill(a, c),
                d.root.addChild(a));
                return d
            }
            ;
            ha.defaultAttributes = function(a) {
                Ca.joinNcap(a, "round", "round");
                Ca.fillRule(a, "evenodd");
                Ca.noFill(a)
            }
            ;
            ha.drawSprite = function(a) {
                var b = a.__isMask ? Ca.clipPath(a.get_name()) : Ca.group();
                ha.copyAttributes(a, b);
                ha.drawGraphics(a.get_graphics(), b);
                ha.drawChildren(a, b);
                return b
            }
            ;
            ha.drawShape = function(a) {
                var b = a.__isMask ? Ca.clipPath(a.get_name()) : Ca.group();
                ha.copyAttributes(a, b);
                ha.drawGraphics(a.get_graphics(), b);
                return b
            }
            ;
            ha.copyAttributes = function(a, b) {
                1 == a.get_scaleX() && 1 == a.get_scaleY() || Ca.scale(b, a.get_scaleX(), a.get_scaleY());
                0 != a.get_rotation() && Ca.rotate(b, a.get_rotation());
                0 == a.get_x() && 0 == a.get_y() || Ca.translate(b, a.get_x(), a.get_y());
                1 > a.get_alpha() && Ca.setOpacity(b, a.get_alpha());
                if (10 != a.get_blendMode()) {
                    var c = ha.BLEND_MODES
                      , d = a.get_blendMode();
                    Ca.style(b, "mix-blend-mode: " + c.h[d])
                }
                null != a.get_mask() && b.set("clip-path", "url(#" + a.get_mask().get_name() + ")")
            }
            ;
            ha.drawGraphics = function(a, b) {
                var c = !1
                  , d = 0
                  , f = 1
                  , g = 1
                  , k = 2
                  , q = 1
                  , p = !1
                  , l = 0
                  , h = 1
                  , n = null;
                for (a = a.readGraphicsData(!1).iterator(); a.hasNext(); ) {
                    var u = a.next();
                    switch (u.__graphicsDataType) {
                    case 0:
                        c = u;
                        f = c.thickness;
                        g = c.fill;
                        d = g.color;
                        g = g.alpha;
                        k = c.joints;
                        q = c.caps;
                        c = !0;
                        break;
                    case 1:
                        n = null;
                        p = u;
                        l = p.color;
                        h = p.alpha;
                        p = !0;
                        break;
                    case 2:
                        n = u;
                        ha.gradients.push(n);
                        p = !0;
                        break;
                    case 3:
                        u = ha.drawPath(u.commands, u.data, u.winding);
                        p && (null == n ? Ca.setFill(u, l, h) : u.set("fill", "url(#grad" + ha.gradients.length + ")"));
                        c && (Ca.setStroke(u, d, f),
                        2 == k && 1 == q || Ca.joinNcap(u, ha.JOINTS.h[k], ha.CAPS.h[q]),
                        1 > g && Ca.strokeOpacity(u, g));
                        b.addChild(u);
                        break;
                    case 5:
                        p = c = !1,
                        n = null
                    }
                }
            }
            ;
            ha.drawPath = function(a, b, c) {
                c = new Sb;
                var d = 0;
                a = a.iterator();
                a: for (; a.hasNext(); )
                    switch (a.next()) {
                    case 1:
                        var f = b.get(d)
                          , g = Sb.ly = b.get(d + 1);
                        c.buff.b += G.string(" M " + (G.string(Math.round(1E3 * (Sb.lx = f)) / 1E3) + "," + G.string(Math.round(1E3 * g) / 1E3)));
                        d += 2;
                        break;
                    case 2:
                        f = b.get(d);
                        g = b.get(d + 1);
                        if (0 == c.buff.b.length) {
                            var k = Sb.ly = Sb.ly;
                            c.buff.b += G.string(" M " + (G.string(Math.round(1E3 * (Sb.lx = Sb.lx)) / 1E3) + "," + G.string(Math.round(1E3 * k) / 1E3)))
                        }
                        g = Sb.ly = g;
                        c.buff.b += G.string(" L " + (G.string(Math.round(1E3 * (Sb.lx = f)) / 1E3) + "," + G.string(Math.round(1E3 * g) / 1E3)));
                        d += 2;
                        break;
                    case 3:
                        k = b.get(d);
                        var q = b.get(d + 1);
                        f = b.get(d + 2);
                        g = b.get(d + 3);
                        if (0 == c.buff.b.length) {
                            var p = Sb.ly = Sb.ly;
                            c.buff.b += G.string(" M " + (G.string(Math.round(1E3 * (Sb.lx = Sb.lx)) / 1E3) + "," + G.string(Math.round(1E3 * p) / 1E3)))
                        }
                        k = "Q " + (G.string(Math.round(1E3 * k) / 1E3) + "," + G.string(Math.round(1E3 * q) / 1E3)) + " ";
                        g = Sb.ly = g;
                        c.buff.b += G.string(" " + (k + (G.string(Math.round(1E3 * (Sb.lx = f)) / 1E3) + "," + G.string(Math.round(1E3 * g) / 1E3))));
                        d += 4;
                        break;
                    case 4:
                        a = b.get(d + 2);
                        b = Sb.ly = b.get(d + 3);
                        c.buff.b += G.string(" M " + (G.string(Math.round(1E3 * (Sb.lx = a)) / 1E3) + "," + G.string(Math.round(1E3 * b) / 1E3)));
                        break a;
                    case 5:
                        a = b.get(d + 2);
                        b = b.get(d + 3);
                        0 == c.buff.b.length && (d = Sb.ly = Sb.ly,
                        c.buff.b += G.string(" M " + (G.string(Math.round(1E3 * (Sb.lx = Sb.lx)) / 1E3) + "," + G.string(Math.round(1E3 * d) / 1E3))));
                        b = Sb.ly = b;
                        c.buff.b += G.string(" L " + (G.string(Math.round(1E3 * (Sb.lx = a)) / 1E3) + "," + G.string(Math.round(1E3 * b) / 1E3)));
                        break a;
                    case 6:
                        f = b.get(d);
                        g = b.get(d + 1);
                        k = b.get(d + 2);
                        q = b.get(d + 3);
                        p = b.get(d + 4);
                        var l = b.get(d + 5);
                        c.buff.b += G.string(" C " + (f + "," + g + " " + k + "," + q + " " + p + "," + l));
                        d += 6
                    }
                return c.xml()
            }
            ;
            ha.drawChildren = function(a, b) {
                for (var c = 0, d = a.get_numChildren(); c < d; ) {
                    var f = c++;
                    f = a.getChildAt(f);
                    if (f.get_visible()) {
                        var g = null;
                        null != ha.handleObject && (g = ha.handleObject(f));
                        null == g && (f instanceof T ? g = ha.drawSprite(f) : f instanceof of ? g = ha.drawShape(f) : f instanceof Oc && (g = ha.drawText(f)));
                        if (null != g) {
                            for (var k = 0, q = f.get_filters(); k < q.length; ) {
                                var p = q[k];
                                ++k;
                                ha.handleFilter(f, p, g, b)
                            }
                            b.addChild(g)
                        }
                    }
                }
            }
            ;
            ha.drawText = function(a) {
                var b = a.get_defaultTextFormat()
                  , c = 1 < a.get_numLines()
                  , d = Ca.text(c ? "" : a.get_text(), null, "text-before-edge");
                Ca.style(d, ha.svgFont(b));
                Ca.setFill(d, b.color);
                1 == a.get_scaleX() && 1 == a.get_scaleY() || Ca.scale(d, a.get_scaleX(), a.get_scaleY());
                0 != a.get_rotation() && Ca.rotate(d, a.get_rotation());
                1 > a.get_alpha() && Ca.setOpacity(d, a.get_alpha());
                if (c)
                    for (Ca.translate(d, a.get_x(), a.get_y()),
                    b = 0,
                    c = a.get_numLines(); b < c; ) {
                        var f = b++
                          , g = Ca.tspan(a.getLineText(f));
                        f = a.getCharBoundaries(a.getLineOffset(f));
                        Ca.x(g, f.x);
                        Ca.y(g, f.y);
                        d.addChild(g)
                    }
                else
                    f = a.getCharBoundaries(a.getLineOffset(0)),
                    Ca.translate(d, a.get_x() + f.x * a.get_scaleX(), a.get_y() + f.y * a.get_scaleY());
                return d
            }
            ;
            ha.substituteGenerics = function(a) {
                switch (a) {
                case "_sans":
                    return "sans-serif";
                case "_serif":
                    return "serif";
                case "_typewriter":
                    return "monospace";
                default:
                    return a
                }
            }
            ;
            ha.svgFont = function(a) {
                var b = ha.substituteFont(a.font)
                  , c = "font: ";
                a.bold && (c += "bold ");
                a.italic && (c += "italic ");
                c += "" + a.size + "px " + b;
                0 != a.letterSpacing && (c += "; letter-spacing: " + a.letterSpacing + "px");
                return c
            }
            ;
            ha.resetGradients = function() {
                ha.gradients = []
            }
            ;
            ha.getGradients = function() {
                for (var a = da.createElement("defs"), b = 0, c = ha.gradients.length; b < c; ) {
                    var d = b++
                      , f = "grad" + (d + 1);
                    d = ha.gradients[d];
                    if (0 == d.type) {
                        f = Ca.linearGradient(f, null, d.matrix);
                        for (var g = 0, k = d.colors.length; g < k; ) {
                            var q = g++;
                            f.addChild(Ca.stop(d.ratios[q] / 255, d.colors[q], d.alphas[q]))
                        }
                        a.addChild(f)
                    } else {
                        f = Ca.radialGradient(f, null, d.matrix);
                        g = 0;
                        for (k = d.colors.length; g < k; )
                            q = g++,
                            f.addChild(Ca.stop(d.ratios[q] / 255, d.colors[q], d.alphas[q]));
                        a.addChild(f)
                    }
                }
                return a
            }
            ;
            ha.resetImports = function() {
                ha.imports = []
            }
            ;
            ha.addImport = function(a) {
                -1 == ha.imports.indexOf(a) && ha.imports.push(a)
            }
            ;
            ha.getImports = function() {
                for (var a = da.createElement("style"), b = "", c = 0, d = ha.imports; c < d.length; ) {
                    var f = d[c];
                    ++c;
                    b += G.string('@import url("' + f + '");')
                }
                a.addChild(da.createCData(b));
                return a
            }
            ;
            ha.handleFilter = function(a, b, c, d) {
                if (b instanceof ad) {
                    for (var f = 1; null != a.parent; )
                        f *= a.get_scaleX(),
                        a = a.parent;
                    f = a.get_scaleX();
                    a = da.parse(Tf.print(c)).firstElement();
                    Ca.setStroke(a, b.get_color(), 2 * b.get_blurX() / f);
                    1 > b.get_alpha() && Ca.strokeOpacity(a, b.get_alpha());
                    d.addChild(a)
                }
            }
            ;
            var jc = function() {};
            h["com.watabou.geom.Chaikin"] = jc;
            jc.__name__ = "com.watabou.geom.Chaikin";
            jc.render = function(a, b, c, d) {
                null == c && (c = 1);
                for (var f = 0; f < c; ) {
                    f++;
                    for (var g = [], k = a.length, q = 1, p = k - 1; q < p; ) {
                        var l = q++
                          , h = a[l];
                        null == d || -1 == d.indexOf(h) ? (g.push(sa.lerp(h, a[l - 1], .25)),
                        g.push(sa.lerp(h, a[l + 1], .25))) : g.push(h)
                    }
                    b ? (q = a[k - 1],
                    null == d || -1 == d.indexOf(q) ? (g.push(sa.lerp(q, a[k - 2], .25)),
                    g.push(sa.lerp(q, a[0], .25))) : g.push(q),
                    q = a[0],
                    null == d || -1 == d.indexOf(q) ? (g.push(sa.lerp(q, a[k - 1], .25)),
                    g.push(sa.lerp(q, a[1], .25))) : g.push(q)) : (g.unshift(a[0]),
                    g.push(a[k - 1]));
                    a = g
                }
                return a
            }
            ;
            var Vh = function(a, b) {
                null == b && (b = 0);
                this.c = a;
                this.r = b
            };
            h["com.watabou.geom.Circle"] = Vh;
            Vh.__name__ = "com.watabou.geom.Circle";
            Vh.prototype = {
                overlaps: function(a) {
                    return B.distance(this.c, a.c) < this.r + a.r
                },
                __class__: Vh
            };
            var $b = function() {};
            h["com.watabou.geom.Color"] = $b;
            $b.__name__ = "com.watabou.geom.Color";
            $b.rgbfSafe = function(a, b, c) {
                return (Zb.gate(255 * a, 0, 255) | 0) << 16 | (Zb.gate(255 * b, 0, 255) | 0) << 8 | Zb.gate(255 * c, 0, 255) | 0
            }
            ;
            $b.lerp = function(a, b, c) {
                null == c && (c = .5);
                var d = a >>> 8 & 255
                  , f = a & 255
                  , g = b >>> 16
                  , k = b >>> 8 & 255;
                b &= 255;
                var q = 1 - c;
                return (ab.toFloat(a >>> 16) * q + ab.toFloat(g) * c | 0) << 16 | (ab.toFloat(d) * q + ab.toFloat(k) * c | 0) << 8 | ab.toFloat(f) * q + ab.toFloat(b) * c | 0
            }
            ;
            $b.lerpHSV = function(a, b, c) {
                null == c && (c = .5);
                a = $b.rgb2hsv(a);
                b = $b.rgb2hsv(b);
                var d = 0 == a.y ? b.x : 0 == b.y ? a.x : $b.lerpHue(a.x, b.x, c)
                  , f = 1 - c;
                return $b.hsv(d, a.y * f + b.y * c, a.z * f + b.z * c)
            }
            ;
            $b.lerpHue = function(a, b, c) {
                null == c && (c = .5);
                a -= 360 * Math.floor(a / 360);
                b -= 360 * Math.floor(a / 360);
                if (a > b) {
                    var d = a;
                    a = b;
                    b = d;
                    c = 1 - c
                }
                180 < b - a && (b -= 360);
                return a * (1 - c) + b * c
            }
            ;
            $b.scale = function(a, b) {
                return $b.rgbfSafe(ab.toFloat(a >>> 16) / ab.toFloat(255) * b, ab.toFloat(a >>> 8 & 255) / ab.toFloat(255) * b, ab.toFloat(a & 255) / ab.toFloat(255) * b)
            }
            ;
            $b.hsv = function(a, b, c) {
                var d = function(a) {
                    a -= 360 * Math.floor(a / 360);
                    return Zb.gate(Math.abs(a / 60 - 3) - 1, 0, 1)
                }
                  , f = d(a)
                  , g = d(a - 120);
                a = d(a + 120);
                return $b.rgbfSafe((f * b + 1 - b) * c, (g * b + 1 - b) * c, (a * b + 1 - b) * c)
            }
            ;
            $b.rgb2hsv = function(a) {
                var b = ab.toFloat(a >>> 16) / ab.toFloat(255)
                  , c = ab.toFloat(a >>> 8 & 255) / ab.toFloat(255);
                a = ab.toFloat(a & 255) / ab.toFloat(255);
                var d = Math.min(b, Math.min(c, a))
                  , f = Math.max(b, Math.max(c, a));
                return d == f ? new Wh(0,0,d) : new Wh(60 * ((b == d ? 3 : a == d ? 1 : 5) - (b == d ? c - a : a == d ? b - c : a - b) / (f - d)),(f - d) / f,f)
            }
            ;
            $b.brightness = function(a) {
                var b = ab.toFloat(a >>> 16) / ab.toFloat(255)
                  , c = ab.toFloat(a >>> 8 & 255) / ab.toFloat(255);
                a = ab.toFloat(a & 255) / ab.toFloat(255);
                return Math.sqrt(.299 * b * b + .587 * c * c + .114 * a * a)
            }
            ;
            var qf = function() {};
            h["com.watabou.geom.Cubic"] = qf;
            qf.__name__ = "com.watabou.geom.Cubic";
            qf.smoothOpen = function(a, b) {
                null == b && (b = 4);
                var c = function(a, b, c) {
                    a = b.subtract(a);
                    b = c.subtract(b);
                    var d = a.get_length() * b.get_length()
                      , f = (a.x * b.y - a.y * b.x) / d;
                    a = (a.x * b.x + a.y * b.y) / d;
                    return c.add(new B(b.x * a - b.y * f,b.y * a + b.x * f))
                }
                  , d = a.length;
                if (2 >= d)
                    return a;
                var f = c(a[2], a[1], a[0]);
                c = c(a[d - 3], a[d - 2], a[d - 1]);
                a = a.slice();
                a.unshift(f);
                a.push(c);
                f = [];
                c = 1;
                for (var g = a.length - 2; c < g; ) {
                    var k = c++
                      , q = a[k]
                      , p = a[k + 1]
                      , l = a[k + 2]
                      , h = q
                      , n = p;
                    k = q.subtract(a[k - 1]);
                    k.normalize(1);
                    q = p.subtract(q);
                    q.normalize(1);
                    p = l.subtract(p);
                    p.normalize(1);
                    l = k.add(q);
                    l.normalize(1);
                    p = q.add(p);
                    p.normalize(1);
                    k = B.distance(h, n);
                    q = 1 / (1 + (l.x * q.x + l.y * q.y) + (p.x * q.x + p.y * q.y));
                    var u = k * q;
                    l = new B(h.x + l.x * u,h.y + l.y * u);
                    q *= -k;
                    q = new B(n.x + p.x * q,n.y + p.y * q);
                    f.push(h);
                    f.push(l);
                    f.push(q);
                    f.push(n)
                }
                b = qf.build(f, b);
                b.push(a[d].clone());
                return b
            }
            ;
            qf.build = function(a, b) {
                null == b && (b = 4);
                var c = a.length
                  , d = []
                  , f = 0;
                do {
                    var g = a[f++]
                      , k = a[f++]
                      , q = a[f++]
                      , p = a[f++];
                    d.push(g.clone());
                    for (var l = 1, h = b; l < h; ) {
                        var n = l++;
                        d.push(qf.cubic(g, k, q, p, n / b))
                    }
                } while (f < c);
                return d
            }
            ;
            qf.cubic = function(a, b, c, d, f) {
                var g = 1 - f
                  , k = g * g * g;
                a = new B(a.x * k,a.y * k);
                k = 3 * g * g * f;
                a.x += b.x * k;
                a.y += b.y * k;
                k = 3 * g * f * f;
                a.x += c.x * k;
                a.y += c.y * k;
                k = f * f * f;
                a.x += d.x * k;
                a.y += d.y * k;
                return a
            }
            ;
            var ac = function(a, b) {
                this.vertices = new pa;
                this.edges = [];
                this.faces = [];
                for (var c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    for (var f = [], g = 0; g < d.length; ) {
                        var k = d[g];
                        ++g;
                        k = new Yj(this.addVertex(k));
                        this.edges.push(k);
                        f.push(k)
                    }
                    g = new Zj(f[0]);
                    this.faces.push(g);
                    var q = d.length;
                    d = 0;
                    for (var p = q; d < p; ) {
                        k = d++;
                        var l = f[k];
                        l.next = f[(k + 1) % q];
                        l.face = g
                    }
                }
                c = 0;
                for (g = this.edges; c < g.length; )
                    if (a = g[c],
                    ++c,
                    null == a.twin)
                        for (f = a.origin,
                        k = a.next.origin.edges,
                        d = 0; d < k.length; )
                            if (q = k[d],
                            ++d,
                            q.next.origin == f) {
                                a.twin = q;
                                q.twin = a;
                                break
                            }
                if (null != b)
                    for (c = 0,
                    g = this.faces.length; c < g; )
                        k = c++,
                        this.faces[k].data = b[k]
            };
            h["com.watabou.geom.DCEL"] = ac;
            ac.__name__ = "com.watabou.geom.DCEL";
            ac.floodFill = function(a, b) {
                var c = [];
                a = [a];
                var d = new pa;
                for (null == b && (b = function(a) {
                    return !0
                }
                ); 0 < a.length; ) {
                    var f = a.pop();
                    if (b(f)) {
                        c.push(f);
                        for (var g = f.halfEdge, k = g, q = !0; q; ) {
                            var p = k;
                            k = k.next;
                            q = k != g;
                            null != p.twin && (p = p.twin.face,
                            null == d.h.__keys__[p.__id__] && ia.add(a, p))
                        }
                    }
                    d.set(f, !0)
                }
                return c
            }
            ;
            ac.floodFillEx = function(a, b) {
                for (var c = [a], d = [], f = a = a.halfEdge, g = !0; g; ) {
                    var k = f;
                    f = f.next;
                    g = f != a;
                    null != k.twin && d.push(k)
                }
                for (; 0 < d.length; )
                    if (k = d.pop(),
                    a = k.twin.face,
                    -1 == c.indexOf(a) && b(k))
                        for (c.push(a),
                        f = a = a.halfEdge,
                        g = !0; g; )
                            k = f,
                            f = f.next,
                            g = f != a,
                            null != k.twin && d.push(k);
                return c
            }
            ;
            ac.split = function(a) {
                for (var b = [], c = Ve.fromArray(a); !Ve.isEmpty(c); ) {
                    for (var d = null, f = 0; f < a.length; ) {
                        var g = a[f];
                        ++f;
                        if (null != c.h.__keys__[g.__id__]) {
                            d = g;
                            break
                        }
                    }
                    d = ac.floodFill(d, function(a) {
                        return null != c.h.__keys__[a.__id__]
                    });
                    Ve.removeArr(c, d);
                    b.push(d)
                }
                return b
            }
            ;
            ac.circumference = function(a, b) {
                var c = Ve.fromArray(b);
                if (null == a)
                    for (var d = Infinity, f = 0; f < b.length; ) {
                        var g = b[f];
                        ++f;
                        for (var k = g = g.halfEdge, q = !0; q; ) {
                            var p = k;
                            k = k.next;
                            q = k != g;
                            var l = p;
                            if (null == l.twin || null == c.h.__keys__[l.twin.face.__id__])
                                p = l.origin.point.x,
                                d > p && (d = p,
                                a = l)
                        }
                    }
                p = [];
                l = a;
                do
                    for (p.push(l),
                    l = l.next; null != l.twin && null != c.h.__keys__[l.twin.face.__id__]; )
                        l = l.twin.next;
                while (l != a);
                return p
            }
            ;
            ac.outline = function(a) {
                for (var b = Ve.fromArray(a), c = [], d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    for (var g = f = f.halfEdge, k = !0; k; ) {
                        var q = g;
                        g = g.next;
                        k = g != f;
                        null != q.twin && null != b.h.__keys__[q.twin.face.__id__] || c.push(q)
                    }
                }
                b = null;
                for (d = []; !ia.isEmpty(c); )
                    f = ac.circumference(c[0], a),
                    ia.removeAll(c, f),
                    0 < Cd.area(ld.toPoly(f)) ? b = f : d.push(f);
                d.unshift(b);
                return d
            }
            ;
            ac.outlineEx = function(a, b) {
                for (var c = [], d = Ve.fromArray(a), f = 0; f < a.length; ) {
                    var g = a[f];
                    ++f;
                    for (var k = g.halfEdge, q = k, p = !0; p; )
                        g = q,
                        q = q.next,
                        p = q != k,
                        (null == g.twin || null == d.h.__keys__[g.twin.face.__id__] || null != b && !b(g)) && c.push(g)
                }
                for (a = []; !ia.isEmpty(c); ) {
                    b = [];
                    g = d = c[0];
                    do
                        for (b.push(g),
                        g = g.next; -1 == c.indexOf(g); )
                            g = g.twin.next;
                    while (g != d);
                    ia.removeAll(c, b);
                    a.push(b)
                }
                return a
            }
            ;
            ac.prototype = {
                addVertex: function(a) {
                    var b = this.vertices.h[a.__id__];
                    if (null == b) {
                        b = this.vertices;
                        var c = new ak(a);
                        b.set(a, c);
                        return c
                    }
                    return b
                },
                __class__: ac
            };
            var Yj = function(a) {
                this.origin = a;
                a.edges.push(this)
            };
            h["com.watabou.geom.HalfEdge"] = Yj;
            Yj.__name__ = "com.watabou.geom.HalfEdge";
            Yj.prototype = {
                __class__: Yj
            };
            var ak = function(a) {
                this.edges = [];
                this.point = a
            };
            h["com.watabou.geom.Vertex"] = ak;
            ak.__name__ = "com.watabou.geom.Vertex";
            ak.prototype = {
                __class__: ak
            };
            var Zj = function(a) {
                this.halfEdge = a
            };
            h["com.watabou.geom.Face"] = Zj;
            Zj.__name__ = "com.watabou.geom.Face";
            Zj.prototype = {
                getNeighbours: function() {
                    for (var a = [], b = this.halfEdge, c = b, d = !0; d; ) {
                        var f = c;
                        c = c.next;
                        d = c != b;
                        null != f.twin && a.push(f.twin.face)
                    }
                    return a
                },
                getPoly: function() {
                    for (var a = [], b = this.halfEdge, c = b, d = !0; d; ) {
                        var f = c;
                        c = c.next;
                        d = c != b;
                        a.push(f.origin.point)
                    }
                    return a
                },
                invert: function() {
                    for (var a = [], b = this.halfEdge, c = b, d = !0; d; ) {
                        var f = c;
                        c = c.next;
                        d = c != b;
                        a.push(f)
                    }
                    b = a;
                    c = b.length;
                    for (a = 0; a < c; )
                        d = a++,
                        b[d].next = b[(d + c - 1) % c]
                },
                __class__: Zj
            };
            var Xh = function(a, b) {
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            h["com.watabou.geom.Dot"] = Xh;
            Xh.__name__ = "com.watabou.geom.Dot";
            Xh.prototype = {
                __class__: Xh
            };
            var ld = function() {};
            h["com.watabou.geom.EdgeChain"] = ld;
            ld.__name__ = "com.watabou.geom.EdgeChain";
            ld.toPoly = function(a) {
                for (var b = [], c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    b.push(d.origin.point)
                }
                return b
            }
            ;
            ld.toPolyline = function(a) {
                for (var b = [], c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    b.push(d.origin.point)
                }
                b.push(a[a.length - 1].next.origin.point);
                return b
            }
            ;
            ld.vertices = function(a, b) {
                null == b && (b = !1);
                for (var c = [], d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    c.push(f.origin)
                }
                b && c.push(a[a.length - 1].next.origin);
                return c
            }
            ;
            ld.edgeByOrigin = function(a, b) {
                for (var c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    if (d.origin == b)
                        return d
                }
                return null
            }
            ;
            var sa = function() {};
            h["com.watabou.geom.GeomUtils"] = sa;
            sa.__name__ = "com.watabou.geom.GeomUtils";
            sa.intersectLines = function(a, b, c, d, f, g, k, q) {
                var p = c * q - d * k;
                if (0 == p)
                    return null;
                p = (d * (f - a) - c * (g - b)) / p;
                return new B(Math.abs(c) > Math.abs(d) ? (f - a + k * p) / c : (g - b + q * p) / d,p)
            }
            ;
            sa.lerp = function(a, b, c) {
                null == c && (c = .5);
                var d = a.x
                  , f = c;
                null == f && (f = .5);
                var g = a.y;
                a = c;
                null == a && (a = .5);
                return new B(d + (b.x - d) * f,g + (b.y - g) * a)
            }
            ;
            sa.triArea = function(a, b, c) {
                return .5 * ((a.x - c.x) * (b.y - a.y) - (a.x - b.x) * (c.y - a.y))
            }
            ;
            var Yh = function() {
                this.nodes = []
            };
            h["com.watabou.geom.Graph"] = Yh;
            Yh.__name__ = "com.watabou.geom.Graph";
            Yh.prototype = {
                add: function(a) {
                    this.nodes.push(a);
                    return a
                },
                aStar: function(a, b, c) {
                    c = null != c ? c.slice() : [];
                    var d = [a]
                      , f = new pa
                      , g = new pa;
                    for (g.set(a, 0); 0 < d.length; ) {
                        a = d.shift();
                        if (a == b)
                            return this.buildPath(f, a);
                        Q.remove(d, a);
                        c.push(a);
                        var k = g.h[a.__id__]
                          , q = a.links
                          , p = q;
                        for (q = q.keys(); q.hasNext(); ) {
                            var l = q.next()
                              , h = p.get(l);
                            if (-1 == c.indexOf(l)) {
                                h = k + h;
                                if (-1 == d.indexOf(l))
                                    d.push(l);
                                else if (h >= g.h[l.__id__])
                                    continue;
                                f.set(l, a);
                                g.set(l, h)
                            }
                        }
                    }
                    return null
                },
                buildPath: function(a, b) {
                    for (var c = [b]; null != a.h.__keys__[b.__id__]; )
                        b = a.h[b.__id__],
                        c.push(b);
                    return c
                },
                __class__: Yh
            };
            var Zh = function(a) {
                this.links = new pa;
                this.data = a
            };
            h["com.watabou.geom.Node"] = Zh;
            Zh.__name__ = "com.watabou.geom.Node";
            Zh.prototype = {
                link: function(a, b, c) {
                    null == c && (c = !0);
                    null == b && (b = 1);
                    this.links.set(a, b);
                    c && a.links.set(this, b)
                },
                __class__: Zh
            };
            var ah = function(a, b, c, d) {
                null == d && (d = 0);
                this.width = a;
                this.height = b;
                this.dist = c;
                this.dist2 = c * c;
                this.cellSize = c / Math.sqrt(2);
                this.gridWidth = Math.ceil(this.width / this.cellSize);
                this.gridHeight = Math.ceil(this.height / this.cellSize);
                c = [];
                for (var f = 0, g = this.gridWidth * this.gridHeight; f < g; )
                    f++,
                    c.push(null);
                this.grid = c;
                this.points = [];
                this.queue = [];
                for (this.emit(new B(a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647),b * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647))); this.step(); )
                    ;
                0 < d && this.uneven(d)
            };
            h["com.watabou.geom.PoissonPattern"] = ah;
            ah.__name__ = "com.watabou.geom.PoissonPattern";
            ah.prototype = {
                emit: function(a) {
                    this.points.push(a);
                    this.queue.push(a);
                    this.grid[Math.floor(a.y / this.cellSize) * this.gridWidth + Math.floor(a.x / this.cellSize)] = a
                },
                step: function() {
                    if (0 == this.queue.length)
                        return !1;
                    for (var a = ia.random(this.queue), b = !1, c = 0; 50 > c; ) {
                        c++;
                        var d = B.polar(this.dist * (1 + .1 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647)), 6.28318530718 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.x += a.x;
                        d.y += a.y;
                        this.warp(d);
                        this.validate(d) && (b = !0,
                        this.emit(d))
                    }
                    b || Q.remove(this.queue, a);
                    return 0 < this.queue.length
                },
                warp: function(a) {
                    0 > a.x ? a.x += this.width : a.x >= this.width && (a.x -= this.width);
                    0 > a.y ? a.y += this.height : a.y >= this.height && (a.y -= this.height)
                },
                validate: function(a) {
                    var b = a.x;
                    a = a.y;
                    for (var c = Math.floor(b / this.cellSize), d = Math.floor(a / this.cellSize), f = c - 2, g = c + 2 + 1, k = d - 2, q = d + 2 + 1; k < q; ) {
                        d = k++;
                        d = (d + this.gridHeight) % this.gridHeight * this.gridWidth;
                        for (var p = f, l = g; p < l; ) {
                            c = p++;
                            var h = this.grid[d + (c + this.gridWidth) % this.gridWidth];
                            if (null != h && (c = Math.abs(h.x - b),
                            h = Math.abs(h.y - a),
                            c > this.width - c && (c = this.width - c),
                            h > this.height - h && (h = this.height - h),
                            c * c + h * h < this.dist2))
                                return !1
                        }
                    }
                    return !0
                },
                uneven: function(a) {
                    if (0 != a)
                        for (var b = 0, c = this.points; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            var f = B.polar(this.dist * a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647), 6.28318530718 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                            d.x += f.x;
                            d.y += f.y;
                            this.warp(d)
                        }
                },
                scale: function(a, b) {
                    for (var c = 0, d = this.points; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        f.x *= a;
                        f.y *= b
                    }
                    this.width *= a;
                    this.height *= b
                },
                fill: function(a) {
                    var b = a.getBounds()
                      , c = Math.floor(b.get_left() / this.width)
                      , d = Math.floor(b.get_top() / this.height)
                      , f = Math.ceil(b.get_right() / this.width);
                    b = Math.ceil(b.get_bottom() / this.height);
                    for (var g = []; d < b; )
                        for (var k = d++, q = c, p = f; q < p; )
                            for (var l = q++, h = a.validateRect(l * this.width, k * this.height, this.width, this.height), n = 0, u = this.points; n < u.length; ) {
                                var w = u[n];
                                ++n;
                                if (0 != k || 0 != l)
                                    w = new B(w.x + l * this.width,w.y + k * this.height);
                                (h || a.validate(w)) && g.push(w)
                            }
                    return g
                },
                __class__: ah
            };
            var $h = function() {};
            h["com.watabou.geom.IFillableShape"] = $h;
            $h.__name__ = "com.watabou.geom.IFillableShape";
            $h.__isInterface__ = !0;
            $h.prototype = {
                __class__: $h
            };
            var rf = function(a) {
                this.poly = a;
                this.rect = Vc.rect(a)
            };
            h["com.watabou.geom.FillablePoly"] = rf;
            rf.__name__ = "com.watabou.geom.FillablePoly";
            rf.__interfaces__ = [$h];
            rf.prototype = {
                getBounds: function() {
                    return this.rect
                },
                validate: function(a) {
                    return Vc.containsPoint(this.poly, a)
                },
                validateRect: function(a, b, c, d) {
                    return !1
                },
                __class__: rf
            };
            var ai = function(a) {
                rf.call(this, a[0]);
                this.holed = a
            };
            h["com.watabou.geom.FillableHoledPoly"] = ai;
            ai.__name__ = "com.watabou.geom.FillableHoledPoly";
            ai.__super__ = rf;
            ai.prototype = v(rf.prototype, {
                validate: function(a) {
                    if (!rf.prototype.validate.call(this, a))
                        return !1;
                    for (var b = 1, c = this.holed.length; b < c; ) {
                        var d = b++;
                        if (Vc.containsPoint(this.holed[d], a))
                            return !1
                    }
                    return !0
                },
                __class__: ai
            });
            var Uf = function(a, b) {
                null == b && (b = !1);
                this.height = 0;
                this.poly = a;
                for (var c = a.length, d = [], f = 0, g = c; f < g; ) {
                    var k = f++;
                    d.push(new bk(a[k],a[(k + 1) % c]))
                }
                this.segments = d;
                this.leaves = new pa;
                d = [];
                f = 0;
                for (g = c; f < g; ) {
                    k = f++;
                    var q = new bi(a[k]);
                    this.leaves.set(a[k], q);
                    d.push(new bh(q,this.segments[k],this.segments[(k + c - 1) % c]))
                }
                this.ribs = d;
                this.bones = [];
                b && this.run()
            };
            h["com.watabou.geom.SkeletonBuilder"] = Uf;
            Uf.__name__ = "com.watabou.geom.SkeletonBuilder";
            Uf.intersect = function(a, b) {
                return sa.intersectLines(a.a.point.x, a.a.point.y, a.slope.x, a.slope.y, b.a.point.x, b.a.point.y, b.slope.x, b.slope.y)
            }
            ;
            Uf.prototype = {
                run: function() {
                    for (; this.step(); )
                        ;
                },
                step: function() {
                    if (2 >= this.ribs.length)
                        return 2 == this.ribs.length && (this.root = this.ribs[0],
                        this.root.b = this.ribs[1].a,
                        this.root.b.parent = this.root,
                        this.bones.push(this.root),
                        this.ribs = []),
                        !1;
                    for (var a = Infinity, b = null, c = null, d = null, f = 0, g = this.ribs; f < g.length; ) {
                        var k = g[f];
                        ++f;
                        var q = Infinity
                          , p = null
                          , l = null
                          , h = k.right.lRib
                          , n = Uf.intersect(k, h);
                        if (null != n && 0 <= n.x && 0 <= n.y) {
                            var u = n.x + k.a.height;
                            q > u && (q = u,
                            l = n,
                            p = h)
                        }
                        n = k.left.rRib;
                        h = Uf.intersect(k, n);
                        null != h && 0 <= h.x && 0 <= h.y && q > h.x + k.a.height && (l = h,
                        p = n);
                        null != l && (q = l.y + p.a.height,
                        a > q && (a = q,
                        b = k,
                        c = p,
                        d = l))
                    }
                    return null != d ? (this.height = a,
                    a = b.a.point,
                    f = b.slope,
                    n = d.x,
                    d = new B(a.x + f.x * n,a.y + f.y * n),
                    this.merge(b, c, d),
                    !0) : !1
                },
                merge: function(a, b, c) {
                    c = new bi(c,this.height,a,b);
                    c = a.right == b.left ? new bh(c,a.left,b.right) : new bh(c,b.left,a.right);
                    this.ribs.push(c);
                    this.bones.push(a);
                    Q.remove(this.ribs, a);
                    this.bones.push(b);
                    Q.remove(this.ribs, b);
                    return c
                },
                getPath: function(a, b) {
                    if (a == b)
                        return [a];
                    a = this.getPath2Root(a);
                    b = this.getPath2Root(b);
                    if (a[a.length - 1] == b[b.length - 1]) {
                        for (; a[a.length - 1] == b[b.length - 1]; )
                            a.pop(),
                            b.pop();
                        a.push(a[a.length - 1].parent.b)
                    }
                    return a.concat(ia.revert(b))
                },
                getPath2Root: function(a) {
                    for (var b = [a]; this.root.a != a && this.root.b != a; )
                        a = a.parent.b,
                        b.push(a);
                    return b
                },
                __class__: Uf
            };
            var bh = function(a, b, c) {
                this.a = a;
                this.a.parent = this;
                this.left = b;
                this.right = c;
                b.lRib = this;
                c.rRib = this;
                a = c.dir;
                b = b.dir;
                c = a.x * b.x + a.y * b.y;
                .99999 < c ? this.slope = new B(-a.y,a.x) : (c = Math.sqrt((1 + c) / 2),
                this.slope = b.subtract(a),
                this.slope.normalize(1 / c),
                null == this.a.child1 && 0 > a.x * b.y - a.y * b.x && (a = this.slope,
                a.x *= -1,
                a.y *= -1))
            };
            h["com.watabou.geom.Rib"] = bh;
            bh.__name__ = "com.watabou.geom.Rib";
            bh.prototype = {
                __class__: bh
            };
            var bi = function(a, b, c, d) {
                null == b && (b = 0);
                this.point = a;
                this.height = b;
                this.child1 = c;
                this.child2 = d;
                null != this.child1 && (this.child1.b = this,
                this.child2.b = this)
            };
            h["com.watabou.geom._SkeletonBuilder.Node"] = bi;
            bi.__name__ = "com.watabou.geom._SkeletonBuilder.Node";
            bi.prototype = {
                __class__: bi
            };
            var bk = function(a, b) {
                this.p0 = a;
                this.p1 = b;
                this.dir = b.subtract(a);
                this.len = this.dir.get_length();
                a = this.dir;
                b = 1 / this.len;
                a.x *= b;
                a.y *= b
            };
            h["com.watabou.geom._SkeletonBuilder.Segment"] = bk;
            bk.__name__ = "com.watabou.geom._SkeletonBuilder.Segment";
            bk.prototype = {
                __class__: bk
            };
            var ci = function() {};
            h["com.watabou.geom.polygons.PolyBool"] = ci;
            ci.__name__ = "com.watabou.geom.polygons.PolyBool";
            ci.augmentPolygons = function(a, b) {
                for (var c = a.length, d = b.length, f = [], g = 0, k = c; g < k; ) {
                    var q = g++;
                    f.push([])
                }
                var p = f;
                f = [];
                g = 0;
                for (k = d; g < k; ) {
                    var l = g++;
                    f.push([])
                }
                var h = f;
                f = 0;
                for (g = c; f < g; ) {
                    q = f++;
                    var n = a[q]
                      , u = a[(q + 1) % c]
                      , w = n.x
                      , r = n.y
                      , x = u.x - w
                      , C = u.y - r;
                    k = 0;
                    for (var m = d; k < m; ) {
                        l = k++;
                        var K = b[l]
                          , z = b[(l + 1) % d]
                          , A = K.x;
                        K = K.y;
                        z = sa.intersectLines(w, r, x, C, A, K, z.x - A, z.y - K);
                        null != z && 0 <= z.x && 1 >= z.x && 0 <= z.y && 1 >= z.y && (z = {
                            a: z.x,
                            b: z.y,
                            p: sa.lerp(n, u, z.x)
                        },
                        p[q].push(z),
                        h[l].push(z))
                    }
                }
                l = [];
                f = 0;
                for (g = c; f < g; )
                    if (q = f++,
                    l.push(a[q]),
                    q = p[q],
                    0 < q.length)
                        for (q.sort(function(a, b) {
                            a = a.a - b.a;
                            return 0 == a ? 0 : 0 > a ? -1 : 1
                        }),
                        k = 0; k < q.length; )
                            z = q[k],
                            ++k,
                            l.push(z.p);
                a = [];
                f = 0;
                for (g = d; f < g; )
                    if (q = f++,
                    a.push(b[q]),
                    d = h[q],
                    0 < d.length)
                        for (d.sort(function(a, b) {
                            a = a.b - b.b;
                            return 0 == a ? 0 : 0 > a ? -1 : 1
                        }),
                        k = 0; k < d.length; )
                            z = d[k],
                            ++k,
                            a.push(z.p);
                return [l, a]
            }
            ;
            ci.or = function(a, b) {
                var c = ci.augmentPolygons(a, b)
                  , d = c[0]
                  , f = c[1];
                if (d.length == a.length)
                    return Vc.containsPoint(a, b[0]) ? a : Vc.containsPoint(b, a[0]) ? b : null;
                c = d;
                for (var g = f, k = [], q = -1, p = null, l = 0, h = d.length; l < h; ) {
                    var n = l++;
                    p = d[n];
                    if (-1 == a.indexOf(d[n])) {
                        q = n;
                        break
                    }
                }
                a = sa.lerp(p, d[(q + 1) % d.length]);
                Vc.containsPoint(b, a) && (c = f,
                g = d,
                q = f.indexOf(p));
                for (; ; ) {
                    k.push(c[q]);
                    b = (q + 1) % c.length;
                    d = c[b];
                    if (d == k[0])
                        return k;
                    d = g.indexOf(d);
                    -1 != d ? (q = d,
                    b = c,
                    c = g,
                    g = b) : q = b
                }
            }
            ;
            var Vc = function() {};
            h["com.watabou.geom.polygons.PolyBounds"] = Vc;
            Vc.__name__ = "com.watabou.geom.polygons.PolyBounds";
            Vc.rect = function(a) {
                for (var b = Infinity, c = Infinity, d = -Infinity, f = -Infinity, g = 0; g < a.length; ) {
                    var k = a[g];
                    ++g;
                    var q = k.x;
                    k = k.y;
                    q < b && (b = q);
                    k < c && (c = k);
                    q > d && (d = q);
                    k > f && (f = k)
                }
                return new oa(b,c,d - b,f - c)
            }
            ;
            Vc.aabb = function(a) {
                for (var b = Infinity, c = Infinity, d = -Infinity, f = -Infinity, g = 0; g < a.length; ) {
                    var k = a[g];
                    ++g;
                    var q = k.x;
                    k = k.y;
                    q < b && (b = q);
                    k < c && (c = k);
                    q > d && (d = q);
                    k > f && (f = k)
                }
                return [new B(b,c), new B(d,c), new B(d,f), new B(b,f)]
            }
            ;
            Vc.obb = function(a) {
                a = Vc.convexHull(a);
                for (var b = Infinity, c = null, d = null, f = a.length, g = 0; g < f; ) {
                    var k = g++
                      , q = a[k];
                    k = a[(k + 1) % f];
                    if (q.x != k.x || q.y != k.y) {
                        q = k.subtract(q);
                        q.normalize(1);
                        for (var p = q.x, l = -q.y, h = k = Infinity, n = -Infinity, u = -Infinity, w = 0; w < a.length; ) {
                            var r = a[w];
                            ++w;
                            var x = r.x * p - r.y * l;
                            r = r.y * p + r.x * l;
                            x < k && (k = x);
                            r < h && (h = r);
                            x > n && (n = x);
                            r > u && (u = r)
                        }
                        p = (n - k) * (u - h);
                        b > p && (b = p,
                        c = [new B(k,h), new B(n,h), new B(n,u), new B(k,u)],
                        d = q)
                    }
                }
                rc.asRotateYX(c, d.y, d.x);
                return c
            }
            ;
            Vc.convexHull = function(a) {
                var b = a.length;
                if (3 > b)
                    return null;
                if (3 == b)
                    return a;
                var c = a[0]
                  , d = a[1]
                  , f = a[2];
                c = 0 < (d.x - c.x) * (f.y - c.y) - (f.x - c.x) * (d.y - c.y) ? [f, c, d, f] : [f, d, c, f];
                for (d = 3; ; ) {
                    if (d >= b)
                        return c[0] == c[c.length - 1] && c.pop(),
                        c;
                    f = a[d++];
                    for (var g = c.length; ; ) {
                        var k = c[0];
                        var q = c[1];
                        0 <= (k.x - f.x) * (q.y - f.y) - (q.x - f.x) * (k.y - f.y) ? (k = c[g - 2],
                        q = c[g - 1],
                        k = 0 <= (q.x - k.x) * (f.y - k.y) - (f.x - k.x) * (q.y - k.y)) : k = !1;
                        if (!k)
                            break;
                        if (d >= b)
                            return c[0] == c[c.length - 1] && c.pop(),
                            c;
                        f = a[d++]
                    }
                    for (; ; ) {
                        2 <= c.length ? (g = c[c.length - 2],
                        k = c[c.length - 1],
                        g = 0 > (k.x - g.x) * (f.y - g.y) - (f.x - g.x) * (k.y - g.y)) : g = !1;
                        if (!g)
                            break;
                        c.pop()
                    }
                    for (c.push(f); ; ) {
                        g = c[0];
                        k = c[1];
                        if (!(0 > (g.x - f.x) * (k.y - f.y) - (k.x - f.x) * (g.y - f.y)))
                            break;
                        c.shift()
                    }
                    c.unshift(f)
                }
            }
            ;
            Vc.containsPoint = function(a, b, c) {
                null == c && (c = !1);
                var d = b.x;
                b = b.y;
                for (var f = a.length, g = a[f - 1], k = 0; k < f; ) {
                    var q = k++
                      , p = g;
                    g = a[q];
                    q = p.x;
                    p = p.y;
                    var l = g.x - q
                      , h = g.y - p;
                    if (0 != h) {
                        var n = (h * (d - q) - l * (b - p)) / h;
                        0 >= n && (q = Math.abs(l) > Math.abs(h) ? (d - q - n) / l : (b - p) / h,
                        0 <= q && 1 >= q && (c = !c))
                    }
                }
                return c
            }
            ;
            var Cd = function() {};
            h["com.watabou.geom.polygons.PolyCore"] = Cd;
            Cd.__name__ = "com.watabou.geom.polygons.PolyCore";
            Cd.area = function(a) {
                for (var b = a.length, c = a[b - 1], d = a[0], f = c.x * d.y - d.x * c.y, g = 1; g < b; ) {
                    var k = g++;
                    c = d;
                    d = a[k];
                    f += c.x * d.y - d.x * c.y
                }
                return .5 * f
            }
            ;
            Cd.perimeter = function(a) {
                for (var b = a.length, c = a[b - 1], d = a[0], f = B.distance(c, d), g = 1; g < b; ) {
                    var k = g++;
                    c = d;
                    d = a[k];
                    f += B.distance(c, d)
                }
                return f
            }
            ;
            Cd.$length = function(a) {
                for (var b = 0, c = 1, d = a.length; c < d; ) {
                    var f = c++;
                    b += B.distance(a[f - 1], a[f])
                }
                return b
            }
            ;
            Cd.center = function(a) {
                for (var b = a.length, c = a[0].clone(), d = 1; d < b; ) {
                    var f = d++;
                    f = a[f];
                    c.x += f.x;
                    c.y += f.y
                }
                a = 1 / b;
                c.x *= a;
                c.y *= a;
                return c
            }
            ;
            var rg = function() {};
            h["com.watabou.geom.polygons.PolyCreate"] = rg;
            rg.__name__ = "com.watabou.geom.polygons.PolyCreate";
            rg.rect = function(a, b) {
                a /= 2;
                b /= 2;
                return [new B(-a,-b), new B(a,-b), new B(a,b), new B(-a,b)]
            }
            ;
            rg.regular = function(a, b, c) {
                null == c && (c = 0);
                for (var d = [], f = 0; f < a; ) {
                    var g = f++;
                    d.push(B.polar(b, c + 2 * Math.PI * g / a))
                }
                return d
            }
            ;
            var Ce = function() {};
            h["com.watabou.geom.polygons.PolyCut"] = Ce;
            Ce.__name__ = "com.watabou.geom.polygons.PolyCut";
            Ce.pierce = function(a, b, c) {
                for (var d = b.x, f = b.y, g = c.x - d, k = c.y - f, q = a.length, p = [], l = 0, h = q; l < h; ) {
                    var n = l++
                      , u = a[n];
                    n = a[(n + 1) % q];
                    var w = u.x;
                    u = u.y;
                    u = sa.intersectLines(d, f, g, k, w, u, n.x - w, n.y - u);
                    null != u && 0 <= u.y && 1 >= u.y && p.push(u.x)
                }
                p.sort(function(a, b) {
                    a -= b;
                    return 0 == a ? 0 : 0 > a ? -1 : 1
                });
                l = [];
                for (h = 0; h < p.length; )
                    u = p[h],
                    ++h,
                    l.push(sa.lerp(b, c, u));
                return l
            }
            ;
            Ce.pierceMulti = function(a, b, c) {
                for (var d = b.x, f = b.y, g = c.x - d, k = c.y - f, q = [], p = 0; p < a.length; ) {
                    var l = a[p];
                    ++p;
                    for (var h = l.length, n = 0, u = h; n < u; ) {
                        var w = n++
                          , r = l[w];
                        w = l[(w + 1) % h];
                        var x = r.x;
                        r = r.y;
                        r = sa.intersectLines(d, f, g, k, x, r, w.x - x, w.y - r);
                        null != r && 0 <= r.y && 1 >= r.y && q.push(r.x)
                    }
                }
                q.sort(function(a, b) {
                    a -= b;
                    return 0 == a ? 0 : 0 > a ? -1 : 1
                });
                p = [];
                for (n = 0; n < q.length; )
                    r = q[n],
                    ++n,
                    p.push(sa.lerp(b, c, r));
                return p
            }
            ;
            Ce.insetEq = function(a, b) {
                var c = a.length
                  , d = a[c - 2]
                  , f = a[c - 1]
                  , g = f.subtract(d);
                g.normalize(1);
                for (var k = [], q = 0; q < c; ) {
                    var p = q++;
                    d = f;
                    f = a[p];
                    p = g;
                    g = f.subtract(d);
                    g.normalize(1);
                    var l = p.add(g);
                    l = new B(-l.y,l.x);
                    p = p.x * g.x + p.y * g.y;
                    -.999 < p ? (l.normalize(b / Math.sqrt((1 + p) / 2)),
                    k.push(d.add(l))) : k.push(d)
                }
                return k
            }
            ;
            var rc = function() {};
            h["com.watabou.geom.polygons.PolyTransform"] = rc;
            rc.__name__ = "com.watabou.geom.polygons.PolyTransform";
            rc.translate = function(a, b, c) {
                for (var d = [], f = 0; f < a.length; ) {
                    var g = a[f];
                    ++f;
                    d.push(new B(g.x + b,g.y + c))
                }
                return d
            }
            ;
            rc.asTranslate = function(a, b, c) {
                for (var d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    f.x += b;
                    f.y += c
                }
            }
            ;
            rc.scale = function(a, b, c) {
                for (var d = [], f = 0; f < a.length; ) {
                    var g = a[f];
                    ++f;
                    d.push(new B(g.x * b,g.y * c))
                }
                return d
            }
            ;
            rc.asScale = function(a, b, c) {
                for (var d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    f.x *= b;
                    f.y *= c
                }
            }
            ;
            rc.rotateYX = function(a, b, c) {
                for (var d = [], f = 0; f < a.length; ) {
                    var g = a[f];
                    ++f;
                    d.push(new B(g.x * c - g.y * b,g.y * c + g.x * b))
                }
                return d
            }
            ;
            rc.asRotateYX = function(a, b, c) {
                for (var d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    f.setTo(f.x * c - f.y * b, f.y * c + f.x * b)
                }
            }
            ;
            var Lb = function(a, b, c, d, f, g, k, q) {
                null == c && (c = 0);
                null == b && (b = 0);
                this.morphemes = new Ia;
                this.postSpell = null;
                this.spellVowel = Hd.spellVowDefault;
                this.spellConsonant = Hd.spellConsDefault;
                null == a ? this.buildSyllable() : this.syllable = a;
                0 == b || 0 == c ? this.buildStructure() : (this.minSyll = b,
                this.maxSyll = c);
                null == d ? this.buildConsonants() : this.consonants = d;
                null == f ? this.buildSibilants() : this.sibilants = f;
                null == g ? this.buildLiquids() : this.liquids = g;
                null == k ? this.buildFinals() : this.finals = k;
                null == q ? this.buildVowels() : this.vowels = q;
                this.buildBadSeqs()
            };
            h["com.watabou.nlp.Conlang"] = Lb;
            Lb.__name__ = "com.watabou.nlp.Conlang";
            Lb.gamma = function(a, b) {
                null == b && (b = 1.5);
                var c = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647;
                null == b && (b = 2);
                return a[a.length * Math.pow(c, b) | 0]
            }
            ;
            Lb.prototype = {
                buildSyllable: function() {
                    var a = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647
                      , b = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (a ? .5 : 0)
                      , c = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647
                      , d = b + c;
                    1 > d && (b /= d,
                    c /= d);
                    b = .333 > b ? "" : .666 > b ? "c" : "C";
                    "C" == b && (d = .4,
                    null == d && (d = .5),
                    (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d && (b = "s" + b),
                    d = .4,
                    null == d && (d = .5),
                    (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d && (b += "l"));
                    d = .9;
                    null == d && (d = .5);
                    d = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d ? "V" : .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "Vv" : "VV";
                    this.syllable = b + d + (.333 > c ? "" : .666 > c ? a ? "f" : "c" : a ? "F" : "C")
                },
                buildConsonants: function() {
                    var a = 7 + Math.round((Lb.allCons.length - 7) * Math.pow(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3, 2));
                    this.consonants = [];
                    for (var b = Lb.allCons.slice(), c = 0; c < a; ) {
                        c++;
                        var d = Lb.gamma(b, 3);
                        this.consonants.push(d);
                        Q.remove(b, d)
                    }
                },
                buildSibilants: function() {
                    -1 == this.syllable.toUpperCase().indexOf("S") ? this.sibilants = [] : (this.sibilants = ia.intersect(Lb.allSibs, this.consonants),
                    this.sibilants = 0 == this.sibilants.length ? [Lb.gamma(Lb.allSibs)] : this.sibilants.slice(0, 1 + Math.floor((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * this.sibilants.length)))
                },
                buildLiquids: function() {
                    -1 == this.syllable.toUpperCase().indexOf("L") ? this.liquids = [] : (this.liquids = ia.intersect(Lb.allLiqs, this.consonants),
                    this.liquids = 0 == this.liquids.length ? [Lb.gamma(Lb.allLiqs)] : this.liquids.slice(0, 1 + Math.floor((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * this.liquids.length)))
                },
                buildFinals: function() {
                    -1 == this.syllable.toUpperCase().indexOf("F") ? this.finals = [] : (this.finals = ia.intersect(ia.random([["n", "m"], ["s", "k"], ["s", "\u0283", "z", "\u0292"], []]), this.consonants),
                    0 == this.finals.length && (this.finals = ia.subset(this.consonants, 1 + this.consonants.length * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1) | 0)))
                },
                buildVowels: function() {
                    for (var a = ia.random([3, 4, 4, 5, 5, 5]), b = [], c = Lb.allVows.slice(), d = 0; d < a; ) {
                        d++;
                        var f = Lb.gamma(c, 2);
                        Q.remove(c, f);
                        b.push(f)
                    }
                    this.vowels = b.slice();
                    a = Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                    for (d = 0; d < b.length; )
                        f = b[d],
                        ++d,
                        c = a,
                        null == c && (c = .5),
                        (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < c && this.vowels.push(f.toUpperCase())
                },
                buildBadSeqs: function() {
                    this.badSeqs = [];
                    for (var a = 0, b = this.sibilants; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        for (var d = 0, f = this.consonants; d < f.length; ) {
                            var g = f[d];
                            ++d;
                            c != g && -1 != Lb.allSibs.indexOf(g) && this.badSeqs.push("" + c + g)
                        }
                    }
                    a = 0;
                    for (b = this.consonants; a < b.length; )
                        for (g = b[a],
                        ++a,
                        d = 0,
                        f = this.liquids; d < f.length; )
                            c = f[d],
                            ++d,
                            g == c || -1 == Lb.allLiqs.indexOf(g) && -1 == Lb.allNasal.indexOf(g) || this.badSeqs.push("" + g + c)
                },
                buildStructure: function() {
                    var a = .4;
                    null == a && (a = .5);
                    this.minSyll = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? 1 : 2;
                    this.maxSyll = this.minSyll + Math.floor(1 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 3)
                },
                getSyll: function() {
                    for (; ; ) {
                        for (var a = "", b = 0, c = this.syllable.length; b < c; ) {
                            var d = b++
                              , f = this.syllable.charAt(d);
                            switch (f.toUpperCase()) {
                            case "C":
                                d = this.consonants;
                                break;
                            case "F":
                                d = this.finals;
                                break;
                            case "L":
                                d = this.liquids;
                                break;
                            case "S":
                                d = this.sibilants;
                                break;
                            case "V":
                                d = this.vowels;
                                break;
                            default:
                                d = Lb.invalid
                            }
                            f != f.toUpperCase() ? (f = .333,
                            null == f && (f = .5),
                            f = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < f) : f = !0;
                            f && (a += Lb.gamma(d))
                        }
                        if (this.validateSyll(a))
                            return a
                    }
                },
                validateSyll: function(a) {
                    for (var b = 1, c = a.length; b < c; ) {
                        var d = b++;
                        if (a.charAt(d) == a.charAt(d - 1))
                            return !1
                    }
                    b = 0;
                    for (c = this.badSeqs; b < c.length; )
                        if (d = c[b],
                        ++b,
                        -1 != a.indexOf(d))
                            return !1;
                    return !0
                },
                getWord: function(a) {
                    null == a && (a = 0);
                    if (0 == a) {
                        var b = this.maxSyll - this.minSyll
                          , c = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                        a = 1.5;
                        null == a && (a = 2);
                        a = this.minSyll + Math.round(b * Math.pow(c, a))
                    }
                    b = [];
                    for (c = 0; c < a; )
                        c++,
                        b.push(this.getSyll());
                    return b
                },
                spellWord: function(a) {
                    for (var b = "", c = 0, d = a.length; c < d; ) {
                        var f = c++;
                        f = a.charAt(f);
                        b = -1 != Lb.allCons.indexOf(f) ? b + this.spellConsonant(f) : -1 != Lb.allVows.indexOf(f) || -1 != Lb.allVows.indexOf(f.toLowerCase()) ? b + this.spellVowel(f) : b + f
                    }
                    return null != this.postSpell ? this.postSpell(b) : b
                },
                getNewMorpheme: function() {
                    for (; ; ) {
                        var a = 1
                          , b = 2 / this.maxSyll;
                        null == b && (b = .5);
                        (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b || ++a;
                        a = this.getWord(a).join("");
                        b = !0;
                        var c = this.morphemes.h
                          , d = c;
                        c = Object.keys(c);
                        for (var f = c.length, g = 0; g < f; )
                            if (-1 != d[c[g++]].indexOf(a)) {
                                b = !1;
                                break
                            }
                        if (b)
                            return a
                    }
                },
                getMorpheme: function(a) {
                    null == a && (a = "");
                    var b = this.morphemes.h[a];
                    null == b && (b = [],
                    this.morphemes.h[a] = b);
                    if (Math.round(b.length * Math.pow((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647, 2)) < b.length)
                        return Lb.gamma(b);
                    a = this.getNewMorpheme();
                    b.push(a);
                    return a
                },
                getWordTagged: function(a, b) {
                    null == b && (b = !1);
                    b && (a = ia.shuffle(a));
                    b = "";
                    for (var c = 0; c < a.length; ) {
                        var d = a[c];
                        ++c;
                        b += this.getMorpheme(d)
                    }
                    c = this.maxSyll - this.minSyll;
                    d = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                    var f = 1.5;
                    null == f && (f = 2);
                    d = this.minSyll + Math.round(c * Math.pow(d, f));
                    d = d > a.length ? d - a.length : 1;
                    c = 0;
                    for (a = d; c < a; )
                        c++,
                        b = this.getSyll() + b;
                    return b
                },
                getWordSuffix: function(a) {
                    return this.getWordTagged([a])
                },
                __class__: Lb
            };
            var Id = function(a) {
                this.map = new Ia;
                null == Id.phonemes && (Id.phonemes = Jd.VOWELS.concat(Jd.CONSONANTS),
                Id.phonemes.sort(function(a, b) {
                    return b.length - a.length
                }));
                this.source = a;
                for (var b = 0; b < a.length; ) {
                    var c = a[b];
                    ++b;
                    if ("" != c) {
                        c = Id.split(c.toLowerCase());
                        for (var d = [], f = 0; f < c.length; ) {
                            var g = c[f];
                            ++f;
                            var k = d.join("");
                            Object.prototype.hasOwnProperty.call(this.map.h, k) ? this.map.h[k].push(g) : this.map.h[k] = [g];
                            d.push(g);
                            2 < d.length && d.shift()
                        }
                        c = d.join("");
                        Object.prototype.hasOwnProperty.call(this.map.h, c) ? this.map.h[c].push("") : this.map.h[c] = [""]
                    }
                }
            };
            h["com.watabou.nlp.Markov"] = Id;
            Id.__name__ = "com.watabou.nlp.Markov";
            Id.split = function(a) {
                for (var b = []; "" != a; ) {
                    for (var c = !1, d = 0, f = Id.phonemes; d < f.length; ) {
                        var g = f[d];
                        ++d;
                        if (Q.substr(a, -g.length, null) == g) {
                            b.unshift(g);
                            a = Q.substr(a, 0, a.length - g.length);
                            c = !0;
                            break
                        }
                    }
                    c || (a = Q.substr(a, 0, a.length - 1))
                }
                return b
            }
            ;
            Id.prototype = {
                generate: function(a) {
                    for (null == a && (a = -1); ; ) {
                        for (var b = "", c = [], d = ia.random(this.map.h[""]); "" != d; ) {
                            b += d;
                            c.push(d);
                            2 < c.length && c.shift();
                            d = this.map;
                            var f = c.join("");
                            d = ia.random(d.h[f])
                        }
                        if (-1 == a || Jd.splitWord(b).length <= a)
                            return b
                    }
                },
                __class__: Id
            };
            var Hd = function() {};
            h["com.watabou.nlp.Spelling"] = Hd;
            Hd.__name__ = "com.watabou.nlp.Spelling";
            Hd.spellConsDefault = function(a) {
                switch (a) {
                case "j":
                    return "y";
                case "x":
                    return "kh";
                case "\u00f0":
                    return "th";
                case "\u0263":
                    return "gh";
                case "\u0283":
                    return "sh";
                case "\u0292":
                    return "zh";
                case "\u02a3":
                    return "dz";
                case "\u02a4":
                    return "j";
                case "\u02a6":
                    return "ts";
                case "\u02a7":
                    return "ch";
                case "\u03b8":
                    return "th";
                default:
                    return a
                }
            }
            ;
            Hd.spellVowDefault = function(a) {
                switch (a) {
                case "A":
                    return "\u00e1";
                case "E":
                    return "\u00e9";
                case "I":
                    return "\u00ed";
                case "O":
                    return "\u00f3";
                case "U":
                    return "\u00fa";
                default:
                    return a
                }
            }
            ;
            Hd.spellVowDoubles = function(a) {
                switch (a) {
                case "A":
                    return "aa";
                case "E":
                    return "ee";
                case "I":
                    return "ii";
                case "O":
                    return "oo";
                case "U":
                    return "uu";
                default:
                    return a
                }
            }
            ;
            var Jd = function() {};
            h["com.watabou.nlp.Syllables"] = Jd;
            Jd.__name__ = "com.watabou.nlp.Syllables";
            Jd.splitWord = function(a) {
                for (var b = []; 0 < a.length; ) {
                    var c = 0 == b.length && "e" == Q.substr(a, -1, null) ? Jd.pinch(Q.substr(a, 0, a.length - 1)) + "e" : Jd.pinch(a);
                    b.unshift(c);
                    a = Q.substr(a, 0, a.length - c.length);
                    ia.every(Jd.VOWELS, function(b) {
                        return -1 == a.indexOf(b)
                    }) && (b[0] = a + b[0],
                    a = "")
                }
                return b
            }
            ;
            Jd.pinch = function(a) {
                for (var b = a.length - 1; 0 <= b && -1 == Jd.VOWELS.indexOf(a.charAt(b)); )
                    --b;
                if (0 > b)
                    return a;
                for (var c = 0, d = Jd.VOWELS; c < d.length; ) {
                    var f = d[c];
                    ++c;
                    if (Q.substr(a, b - (f.length - 1), f.length) == f) {
                        b -= f.length;
                        break
                    }
                }
                if (0 > b)
                    return a;
                c = 0;
                for (d = Jd.CONSONANTS; c < d.length; )
                    if (f = d[c],
                    ++c,
                    Q.substr(a, b - (f.length - 1), f.length) == f)
                        return Q.substr(a, b - (f.length - 1), null);
                return Q.substr(a, b + 1, null)
            }
            ;
            var qg = function(a, b) {
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b
            };
            h["lime.math.Vector2"] = qg;
            qg.__name__ = "lime.math.Vector2";
            qg.prototype = {
                offset: function(a, b) {
                    this.x += a;
                    this.y += b
                },
                __toFlashPoint: function() {
                    return null
                },
                __class__: qg
            };
            var Yb = function(a, b, c, d) {
                null == d && (d = -1);
                null == c && (c = !0);
                this.__drawableType = 0;
                this.transparent = c;
                null == a && (a = 0);
                null == b && (b = 0);
                0 > a && (a = 0);
                0 > b && (b = 0);
                this.width = a;
                this.height = b;
                this.rect = new oa(0,0,a,b);
                this.__textureWidth = a;
                this.__textureHeight = b;
                0 < a && 0 < b && (c ? 0 == (d & -16777216) && (d = 0) : d = -16777216 | d & 16777215,
                this.image = new Tb(null,0,0,a,b,d << 8 | d >>> 24 & 255),
                this.image.set_transparent(c),
                this.readable = this.__isValid = !0);
                this.__renderTransform = new ta;
                this.__worldAlpha = 1;
                this.__worldTransform = new ta;
                this.__worldColorTransform = new Kb;
                this.__renderable = !0
            };
            h["openfl.display.BitmapData"] = Yb;
            Yb.__name__ = "openfl.display.BitmapData";
            Yb.__interfaces__ = [jb];
            Yb.fromCanvas = function(a, b) {
                null == b && (b = !0);
                if (null == a)
                    return null;
                var c = new Yb(0,0,b,0);
                c.__fromImage(Tb.fromCanvas(a));
                c.image.set_transparent(b);
                return c
            }
            ;
            Yb.prototype = {
                colorTransform: function(a, b) {
                    this.readable && this.image.colorTransform(a.__toLimeRectangle(), b.__toLimeColorMatrix())
                },
                copyPixels: function(a, b, c, d, f, g) {
                    null == g && (g = !1);
                    this.readable && null != a && (null != f && (Yb.__tempVector.x = f.x,
                    Yb.__tempVector.y = f.y),
                    this.image.copyPixels(a.image, b.__toLimeRectangle(), c.__toLimeVector2(), null != d ? d.image : null, null != f ? Yb.__tempVector : null, g))
                },
                dispose: function() {
                    this.image = null;
                    this.height = this.width = 0;
                    this.rect = null;
                    this.readable = this.__isValid = !1;
                    this.__textureContext = this.__texture = this.__framebufferContext = this.__framebuffer = this.__vertexBuffer = this.__surface = null
                },
                draw: function(a, b, c, d, f, g) {
                    null == g && (g = !1);
                    if (null != a) {
                        var k = !0
                          , q = null;
                        a instanceof ca && (q = xa.__cast(a, ca),
                        q.get_visible() || (k = !1,
                        q.set_visible(!0)));
                        a.__update(!1, !0);
                        var p = ta.__pool.get();
                        p.copyFrom(a.__renderTransform);
                        p.invert();
                        null != b && p.concat(b);
                        b = null;
                        null != f && (b = ta.__pool.get(),
                        b.copyFrom(p),
                        b.invert());
                        var l = new Kb;
                        l.__copyFrom(a.__worldColorTransform);
                        l.__invert();
                        if (this.readable || null == Sa.get_current().stage.context3D) {
                            if (null != c) {
                                var h = oa.__pool.get()
                                  , n = ta.__pool.get();
                                a.__getBounds(h, n);
                                var u = Math.ceil(h.width)
                                  , w = Math.ceil(h.height);
                                n.tx = -h.x;
                                n.ty = -h.y;
                                u = new Yb(u,w,!0,0);
                                u.draw(a, n);
                                u.colorTransform(u.rect, c);
                                u.__renderTransform.identity();
                                u.__renderTransform.tx = h.x;
                                u.__renderTransform.ty = h.y;
                                u.__renderTransform.concat(a.__renderTransform);
                                u.__worldAlpha = a.__worldAlpha;
                                u.__worldColorTransform.__copyFrom(a.__worldColorTransform);
                                a = u;
                                oa.__pool.release(h);
                                ta.__pool.release(n)
                            }
                            Na.convertToCanvas(this.image);
                            c = new We(this.image.buffer.__srcContext);
                            c.__allowSmoothing = g;
                            c.__overrideBlendMode = d;
                            c.__worldTransform = p;
                            c.__worldAlpha = 1 / a.__worldAlpha;
                            c.__worldColorTransform = l;
                            null != f && c.__pushMaskRect(f, b);
                            this.__drawCanvas(a, c)
                        } else
                            null == this.__textureContext && (this.__textureContext = F.current.__window.context),
                            null != c && l.__combine(c),
                            c = new bb(Sa.get_current().stage.context3D,this),
                            c.__allowSmoothing = g,
                            c.__pixelRatio = Sa.get_current().stage.window.__scale,
                            c.__overrideBlendMode = d,
                            c.__worldTransform = p,
                            c.__worldAlpha = 1 / a.__worldAlpha,
                            c.__worldColorTransform = l,
                            c.__resize(this.width, this.height),
                            null != f && c.__pushMaskRect(f, b),
                            this.__drawGL(a, c);
                        null != f && (c.__popMaskRect(),
                        ta.__pool.release(b));
                        ta.__pool.release(p);
                        null == q || k || q.set_visible(!1)
                    }
                },
                encode: function(a, b, c) {
                    if (!this.readable || null == a)
                        return null;
                    null == c && (c = new Wc(0));
                    var d = this.image;
                    if (!a.equals(this.rect)) {
                        var f = ta.__pool.get();
                        f.tx = Math.round(-a.x);
                        f.ty = Math.round(-a.y);
                        a = new Yb(Math.ceil(a.width),Math.ceil(a.height),!0,0);
                        a.draw(this, f);
                        d = a.image;
                        ta.__pool.release(f)
                    }
                    return b instanceof di ? (c.writeBytes(Kd.fromBytes(d.encode(sf.PNG)), 0, 0),
                    c) : b instanceof ei ? (c.writeBytes(Kd.fromBytes(d.encode(sf.JPEG, xa.__cast(b, ei).quality)), 0, 0),
                    c) : null
                },
                fillRect: function(a, b) {
                    this.__fillRect(a, b, !0)
                },
                getIndexBuffer: function(a, b) {
                    if (null == this.__indexBuffer || this.__indexBufferContext != a.__context || null != b && null == this.__indexBufferGrid || null != this.__indexBufferGrid && !this.__indexBufferGrid.equals(b)) {
                        this.__indexBufferContext = a.__context;
                        this.__indexBuffer = null;
                        if (null != b) {
                            null == this.__indexBufferGrid && (this.__indexBufferGrid = new oa);
                            this.__indexBufferGrid.copyFrom(b);
                            var c = b.width;
                            b = b.height;
                            0 != c && 0 != b ? (this.__indexBufferData = new Uint16Array(54),
                            this.__indexBufferData[0] = 0,
                            this.__indexBufferData[1] = 1,
                            this.__indexBufferData[2] = 2,
                            this.__indexBufferData[3] = 2,
                            this.__indexBufferData[4] = 1,
                            this.__indexBufferData[5] = 3,
                            this.__indexBufferData[6] = 4,
                            this.__indexBufferData[7] = 0,
                            this.__indexBufferData[8] = 5,
                            this.__indexBufferData[9] = 5,
                            this.__indexBufferData[10] = 0,
                            this.__indexBufferData[11] = 2,
                            this.__indexBufferData[12] = 6,
                            this.__indexBufferData[13] = 4,
                            this.__indexBufferData[14] = 7,
                            this.__indexBufferData[15] = 7,
                            this.__indexBufferData[16] = 4,
                            this.__indexBufferData[17] = 5,
                            this.__indexBufferData[18] = 8,
                            this.__indexBufferData[19] = 9,
                            this.__indexBufferData[20] = 0,
                            this.__indexBufferData[21] = 0,
                            this.__indexBufferData[22] = 9,
                            this.__indexBufferData[23] = 1,
                            this.__indexBufferData[24] = 10,
                            this.__indexBufferData[25] = 8,
                            this.__indexBufferData[26] = 4,
                            this.__indexBufferData[27] = 4,
                            this.__indexBufferData[28] = 8,
                            this.__indexBufferData[29] = 0,
                            this.__indexBufferData[30] = 11,
                            this.__indexBufferData[31] = 10,
                            this.__indexBufferData[32] = 6,
                            this.__indexBufferData[33] = 6,
                            this.__indexBufferData[34] = 10,
                            this.__indexBufferData[35] = 4,
                            this.__indexBufferData[36] = 12,
                            this.__indexBufferData[37] = 13,
                            this.__indexBufferData[38] = 8,
                            this.__indexBufferData[39] = 8,
                            this.__indexBufferData[40] = 13,
                            this.__indexBufferData[41] = 9,
                            this.__indexBufferData[42] = 14,
                            this.__indexBufferData[43] = 12,
                            this.__indexBufferData[44] = 10,
                            this.__indexBufferData[45] = 10,
                            this.__indexBufferData[46] = 12,
                            this.__indexBufferData[47] = 8,
                            this.__indexBufferData[48] = 15,
                            this.__indexBufferData[49] = 14,
                            this.__indexBufferData[50] = 11,
                            this.__indexBufferData[51] = 11,
                            this.__indexBufferData[52] = 14,
                            this.__indexBufferData[53] = 10,
                            this.__indexBuffer = a.createIndexBuffer(54)) : 0 == c && 0 != b ? (this.__indexBufferData = new Uint16Array(18),
                            this.__indexBufferData[0] = 0,
                            this.__indexBufferData[1] = 1,
                            this.__indexBufferData[2] = 2,
                            this.__indexBufferData[3] = 2,
                            this.__indexBufferData[4] = 1,
                            this.__indexBufferData[5] = 3,
                            this.__indexBufferData[6] = 4,
                            this.__indexBufferData[7] = 5,
                            this.__indexBufferData[8] = 0,
                            this.__indexBufferData[9] = 0,
                            this.__indexBufferData[10] = 5,
                            this.__indexBufferData[11] = 1,
                            this.__indexBufferData[12] = 6,
                            this.__indexBufferData[13] = 7,
                            this.__indexBufferData[14] = 4,
                            this.__indexBufferData[15] = 4,
                            this.__indexBufferData[16] = 7,
                            this.__indexBufferData[17] = 5,
                            this.__indexBuffer = a.createIndexBuffer(18)) : 0 != c && 0 == b && (this.__indexBufferData = new Uint16Array(18),
                            this.__indexBufferData[0] = 0,
                            this.__indexBufferData[1] = 1,
                            this.__indexBufferData[2] = 2,
                            this.__indexBufferData[3] = 2,
                            this.__indexBufferData[4] = 1,
                            this.__indexBufferData[5] = 3,
                            this.__indexBufferData[6] = 4,
                            this.__indexBufferData[7] = 0,
                            this.__indexBufferData[8] = 5,
                            this.__indexBufferData[9] = 5,
                            this.__indexBufferData[10] = 0,
                            this.__indexBufferData[11] = 2,
                            this.__indexBufferData[12] = 6,
                            this.__indexBufferData[13] = 4,
                            this.__indexBufferData[14] = 7,
                            this.__indexBufferData[15] = 7,
                            this.__indexBufferData[16] = 4,
                            this.__indexBufferData[17] = 5,
                            this.__indexBuffer = a.createIndexBuffer(18))
                        } else
                            this.__indexBufferGrid = null;
                        null == this.__indexBuffer && (this.__indexBufferData = new Uint16Array(6),
                        this.__indexBufferData[0] = 0,
                        this.__indexBufferData[1] = 1,
                        this.__indexBufferData[2] = 2,
                        this.__indexBufferData[3] = 2,
                        this.__indexBufferData[4] = 1,
                        this.__indexBufferData[5] = 3,
                        this.__indexBuffer = a.createIndexBuffer(6));
                        this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData)
                    }
                    return this.__indexBuffer
                },
                getVertexBuffer: function(a, b, c) {
                    if (null == this.__vertexBuffer || this.__vertexBufferContext != a.__context || null != b && null == this.__vertexBufferGrid || null != this.__vertexBufferGrid && !this.__vertexBufferGrid.equals(b) || null != c && (this.__vertexBufferWidth != c.get_width() || this.__vertexBufferHeight != c.get_height() || this.__vertexBufferScaleX != c.get_scaleX() || this.__vertexBufferScaleY != c.get_scaleY())) {
                        this.__uvRect = new oa(0,0,this.width,this.height);
                        this.__vertexBufferContext = a.__context;
                        this.__vertexBuffer = null;
                        null != c && (this.__vertexBufferWidth = c.get_width(),
                        this.__vertexBufferHeight = c.get_height(),
                        this.__vertexBufferScaleX = c.get_scaleX(),
                        this.__vertexBufferScaleY = c.get_scaleY());
                        if (null != b && null != c) {
                            null == this.__vertexBufferGrid && (this.__vertexBufferGrid = new oa);
                            this.__vertexBufferGrid.copyFrom(b);
                            this.__vertexBufferWidth = c.get_width();
                            this.__vertexBufferHeight = c.get_height();
                            this.__vertexBufferScaleX = c.get_scaleX();
                            this.__vertexBufferScaleY = c.get_scaleY();
                            var d = b.width
                              , f = b.height;
                            if (0 != d && 0 != f) {
                                this.__vertexBufferData = new Float32Array(224);
                                var g = b.x
                                  , k = b.y
                                  , q = this.width - d - g
                                  , p = this.height - f - k;
                                b = g / this.width;
                                var l = k / this.height;
                                d /= this.width;
                                f /= this.height;
                                g /= c.get_scaleX();
                                k /= c.get_scaleY();
                                q /= c.get_scaleX();
                                var h = p / c.get_scaleY();
                                p = c.get_width() / c.get_scaleX() - g - q;
                                q = c.get_height() / c.get_scaleY() - k - h;
                                this.__vertexBufferData[0] = g;
                                this.__vertexBufferData[1] = k;
                                this.__vertexBufferData[3] = 1 * b;
                                this.__vertexBufferData[4] = 1 * l;
                                this.__vertexBufferData[15] = k;
                                this.__vertexBufferData[18] = 1 * l;
                                this.__vertexBufferData[28] = g;
                                this.__vertexBufferData[31] = 1 * b;
                                this.__vertexBufferData[56] = g + p;
                                this.__vertexBufferData[57] = k;
                                this.__vertexBufferData[59] = 1 * (b + d);
                                this.__vertexBufferData[60] = 1 * l;
                                this.__vertexBufferData[70] = g + p;
                                this.__vertexBufferData[73] = 1 * (b + d);
                                this.__vertexBufferData[84] = this.width;
                                this.__vertexBufferData[85] = k;
                                this.__vertexBufferData[87] = 1;
                                this.__vertexBufferData[88] = 1 * l;
                                this.__vertexBufferData[98] = this.width;
                                this.__vertexBufferData[101] = 1;
                                this.__vertexBufferData[112] = g;
                                this.__vertexBufferData[113] = k + q;
                                this.__vertexBufferData[115] = 1 * b;
                                this.__vertexBufferData[116] = 1 * (l + f);
                                this.__vertexBufferData[127] = k + q;
                                this.__vertexBufferData[130] = 1 * (l + f);
                                this.__vertexBufferData[140] = g + p;
                                this.__vertexBufferData[141] = k + q;
                                this.__vertexBufferData[143] = 1 * (b + d);
                                this.__vertexBufferData[144] = 1 * (l + f);
                                this.__vertexBufferData[154] = this.width;
                                this.__vertexBufferData[155] = k + q;
                                this.__vertexBufferData[157] = 1;
                                this.__vertexBufferData[158] = 1 * (l + f);
                                this.__vertexBufferData[168] = g;
                                this.__vertexBufferData[169] = this.height;
                                this.__vertexBufferData[171] = 1 * b;
                                this.__vertexBufferData[172] = 1;
                                this.__vertexBufferData[183] = this.height;
                                this.__vertexBufferData[186] = 1;
                                this.__vertexBufferData[196] = g + p;
                                this.__vertexBufferData[197] = this.height;
                                this.__vertexBufferData[199] = 1 * (b + d);
                                this.__vertexBufferData[200] = 1;
                                this.__vertexBufferData[210] = this.width;
                                this.__vertexBufferData[211] = this.height;
                                this.__vertexBufferData[213] = 1;
                                this.__vertexBufferData[214] = 1;
                                this.__vertexBuffer = a.createVertexBuffer(16, 14)
                            } else
                                0 == d && 0 != f ? (this.__vertexBufferData = new Float32Array(112),
                                k = b.y,
                                p = this.height - f - k,
                                l = k / this.height,
                                f /= this.height,
                                k /= c.get_scaleY(),
                                h = p / c.get_scaleY(),
                                q = c.get_height() / c.get_scaleY() - k - h,
                                c = c.get_width() / c.get_scaleX(),
                                this.__vertexBufferData[0] = c,
                                this.__vertexBufferData[1] = k,
                                this.__vertexBufferData[3] = 1,
                                this.__vertexBufferData[4] = 1 * l,
                                this.__vertexBufferData[15] = k,
                                this.__vertexBufferData[18] = 1 * l,
                                this.__vertexBufferData[28] = c,
                                this.__vertexBufferData[31] = 1,
                                this.__vertexBufferData[56] = c,
                                this.__vertexBufferData[57] = k + q,
                                this.__vertexBufferData[59] = 1,
                                this.__vertexBufferData[60] = 1 * (l + f),
                                this.__vertexBufferData[71] = k + q,
                                this.__vertexBufferData[74] = 1 * (l + f),
                                this.__vertexBufferData[84] = c,
                                this.__vertexBufferData[85] = this.height,
                                this.__vertexBufferData[87] = 1,
                                this.__vertexBufferData[88] = 1,
                                this.__vertexBufferData[99] = this.height,
                                this.__vertexBufferData[102] = 1,
                                this.__vertexBuffer = a.createVertexBuffer(8, 14)) : 0 == f && 0 != d && (this.__vertexBufferData = new Float32Array(112),
                                g = b.x,
                                q = this.width - d - g,
                                b = g / this.width,
                                d /= this.width,
                                g /= c.get_scaleX(),
                                q /= c.get_scaleX(),
                                p = c.get_width() / c.get_scaleX() - g - q,
                                c = c.get_height() / c.get_scaleY(),
                                this.__vertexBufferData[0] = g,
                                this.__vertexBufferData[1] = c,
                                this.__vertexBufferData[3] = 1 * b,
                                this.__vertexBufferData[4] = 1,
                                this.__vertexBufferData[15] = c,
                                this.__vertexBufferData[18] = 1,
                                this.__vertexBufferData[28] = g,
                                this.__vertexBufferData[31] = 1 * b,
                                this.__vertexBufferData[56] = g + p,
                                this.__vertexBufferData[57] = c,
                                this.__vertexBufferData[59] = 1 * (b + d),
                                this.__vertexBufferData[60] = 1,
                                this.__vertexBufferData[70] = g + p,
                                this.__vertexBufferData[73] = 1 * (b + d),
                                this.__vertexBufferData[84] = this.width,
                                this.__vertexBufferData[85] = c,
                                this.__vertexBufferData[87] = 1,
                                this.__vertexBufferData[88] = 1,
                                this.__vertexBufferData[98] = this.width,
                                this.__vertexBufferData[101] = 1,
                                this.__vertexBuffer = a.createVertexBuffer(8, 14))
                        } else
                            this.__vertexBufferGrid = null;
                        null == this.__vertexBuffer && (this.__vertexBufferData = new Float32Array(56),
                        this.__vertexBufferData[0] = this.width,
                        this.__vertexBufferData[1] = this.height,
                        this.__vertexBufferData[3] = 1,
                        this.__vertexBufferData[4] = 1,
                        this.__vertexBufferData[15] = this.height,
                        this.__vertexBufferData[18] = 1,
                        this.__vertexBufferData[28] = this.width,
                        this.__vertexBufferData[31] = 1,
                        this.__vertexBuffer = a.createVertexBuffer(3, 14));
                        this.__vertexBuffer.uploadFromTypedArray(ch.toArrayBufferView(this.__vertexBufferData))
                    }
                    return this.__vertexBuffer
                },
                getPixel: function(a, b) {
                    return this.readable ? this.image.getPixel(a, b, 1) : 0
                },
                getTexture: function(a) {
                    if (!this.__isValid)
                        return null;
                    if (null == this.__texture || this.__textureContext != a.__context)
                        this.__textureContext = a.__context,
                        this.__texture = a.createRectangleTexture(this.width, this.height, 1, !1),
                        this.__textureVersion = -1;
                    Na.sync(this.image, !1);
                    null != this.image && this.image.version > this.__textureVersion && (null != this.__surface && Bl.flush(this.__surface),
                    a = this.image,
                    zb.__supportsBGRA || 0 == a.get_format() || (a = a.clone(),
                    a.set_format(0)),
                    this.__texture.__uploadFromImage(a),
                    this.__textureVersion = this.image.version,
                    this.__textureWidth = a.buffer.width,
                    this.__textureHeight = a.buffer.height);
                    this.readable || null == this.image || (this.image = this.__surface = null);
                    return this.__texture
                },
                setPixel: function(a, b, c) {
                    this.readable && this.image.setPixel(a, b, c, 1)
                },
                __drawCanvas: function(a, b) {
                    var c = this.image.buffer;
                    b.__allowSmoothing || b.applySmoothing(c.__srcContext, !1);
                    b.__render(a);
                    b.__allowSmoothing || b.applySmoothing(c.__srcContext, !0);
                    c.__srcContext.setTransform(1, 0, 0, 1, 0, 0);
                    c.__srcImageData = null;
                    c.data = null;
                    this.image.dirty = !0;
                    this.image.version++
                },
                __drawGL: function(a, b) {
                    var c = b.__context3D
                      , d = c.__state.renderToTexture
                      , f = c.__state.renderToTextureDepthStencil
                      , g = c.__state.renderToTextureAntiAlias
                      , k = c.__state.renderToTextureSurfaceSelector;
                    c.setRenderToTexture(this.getTexture(c), !0);
                    b.__render(a);
                    null != d ? c.setRenderToTexture(d, f, g, k) : c.setRenderToBackBuffer()
                },
                __fillRect: function(a, b, c) {
                    if (null != a)
                        if (this.transparent && 0 == (b & -16777216) && (b = 0),
                        c && null != this.__texture && null != this.__texture.__glFramebuffer && "opengl" == Sa.get_current().stage.__renderer.__type) {
                            c = Sa.get_current().stage.__renderer.__context3D;
                            var d = !this.rect.equals(a)
                              , f = c.__state.renderToTexture
                              , g = c.__state.renderToTextureDepthStencil
                              , k = c.__state.renderToTextureAntiAlias
                              , q = c.__state.renderToTextureSurfaceSelector;
                            c.setRenderToTexture(this.__texture);
                            d && c.setScissorRectangle(a);
                            c.clear((b >>> 16 & 255) / 255, (b >>> 8 & 255) / 255, (b & 255) / 255, this.transparent ? (b >>> 24 & 255) / 255 : 1, 0, 0, 1);
                            d && c.setScissorRectangle(null);
                            null != f ? c.setRenderToTexture(f, g, k, q) : c.setRenderToBackBuffer()
                        } else
                            this.readable && this.image.fillRect(a.__toLimeRectangle(), b, 1)
                },
                __fromImage: function(a) {
                    null != a && null != a.buffer && (this.image = a,
                    this.width = a.width,
                    this.height = a.height,
                    this.rect = new oa(0,0,a.width,a.height),
                    this.__textureWidth = this.width,
                    this.__textureHeight = this.height,
                    this.__isValid = this.readable = !0)
                },
                __getBounds: function(a, b) {
                    var c = oa.__pool.get();
                    this.rect.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    oa.__pool.release(c)
                },
                __setUVRect: function(a, b, c, d, f) {
                    if (null != this.getVertexBuffer(a) && (d != this.__uvRect.width || f != this.__uvRect.height || b != this.__uvRect.x || c != this.__uvRect.y)) {
                        null == this.__uvRect && (this.__uvRect = new oa);
                        this.__uvRect.setTo(b, c, d, f);
                        a = 0 < this.__textureWidth ? b / this.__textureWidth : 0;
                        c = 0 < this.__textureHeight ? c / this.__textureHeight : 0;
                        b = 0 < this.__textureWidth ? d / this.__textureWidth : 0;
                        var g = 0 < this.__textureHeight ? f / this.__textureHeight : 0;
                        this.__vertexBufferData[0] = d;
                        this.__vertexBufferData[1] = f;
                        this.__vertexBufferData[3] = a + b;
                        this.__vertexBufferData[4] = c + g;
                        this.__vertexBufferData[15] = f;
                        this.__vertexBufferData[17] = a;
                        this.__vertexBufferData[18] = c + g;
                        this.__vertexBufferData[28] = d;
                        this.__vertexBufferData[31] = a + b;
                        this.__vertexBufferData[32] = c;
                        this.__vertexBufferData[45] = a;
                        this.__vertexBufferData[46] = c;
                        this.__vertexBuffer.uploadFromTypedArray(ch.toArrayBufferView(this.__vertexBufferData))
                    }
                },
                __update: function(a, b) {
                    this.__updateTransforms()
                },
                __updateTransforms: function(a) {
                    null == a ? this.__worldTransform.identity() : this.__worldTransform.copyFrom(a);
                    this.__renderTransform.copyFrom(this.__worldTransform)
                },
                __class__: Yb
            };
            var oa = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b;
                this.width = c;
                this.height = d
            };
            h["openfl.geom.Rectangle"] = oa;
            oa.__name__ = "openfl.geom.Rectangle";
            oa.prototype = {
                clone: function() {
                    return new oa(this.x,this.y,this.width,this.height)
                },
                contains: function(a, b) {
                    return a >= this.x && b >= this.y && a < this.get_right() ? b < this.get_bottom() : !1
                },
                containsPoint: function(a) {
                    return this.contains(a.x, a.y)
                },
                containsRect: function(a) {
                    return 0 >= a.width || 0 >= a.height ? a.x > this.x && a.y > this.y && a.get_right() < this.get_right() ? a.get_bottom() < this.get_bottom() : !1 : a.x >= this.x && a.y >= this.y && a.get_right() <= this.get_right() ? a.get_bottom() <= this.get_bottom() : !1
                },
                copyFrom: function(a) {
                    this.x = a.x;
                    this.y = a.y;
                    this.width = a.width;
                    this.height = a.height
                },
                equals: function(a) {
                    return a == this ? !0 : null != a && this.x == a.x && this.y == a.y && this.width == a.width ? this.height == a.height : !1
                },
                inflate: function(a, b) {
                    this.x -= a;
                    this.width += 2 * a;
                    this.y -= b;
                    this.height += 2 * b
                },
                intersection: function(a) {
                    var b = this.x < a.x ? a.x : this.x
                      , c = this.get_right() > a.get_right() ? a.get_right() : this.get_right();
                    if (c <= b)
                        return new oa;
                    var d = this.y < a.y ? a.y : this.y;
                    a = this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
                    return a <= d ? new oa : new oa(b,d,c - b,a - d)
                },
                intersects: function(a) {
                    var b = this.x < a.x ? a.x : this.x;
                    if ((this.get_right() > a.get_right() ? a.get_right() : this.get_right()) <= b)
                        return !1;
                    b = this.y < a.y ? a.y : this.y;
                    return (this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom()) > b
                },
                offset: function(a, b) {
                    this.x += a;
                    this.y += b
                },
                offsetPoint: function(a) {
                    this.x += a.x;
                    this.y += a.y
                },
                setTo: function(a, b, c, d) {
                    this.x = a;
                    this.y = b;
                    this.width = c;
                    this.height = d
                },
                union: function(a) {
                    if (0 == this.width || 0 == this.height)
                        return a.clone();
                    if (0 == a.width || 0 == a.height)
                        return this.clone();
                    var b = this.x > a.x ? a.x : this.x
                      , c = this.get_right() < a.get_right() ? a.get_right() : this.get_right()
                      , d = this.y > a.y ? a.y : this.y;
                    a = this.get_bottom() < a.get_bottom() ? a.get_bottom() : this.get_bottom();
                    return new oa(b,d,c - b,a - d)
                },
                __contract: function(a, b, c, d) {
                    if (0 != this.width || 0 != this.height) {
                        var f = 0
                          , g = 0
                          , k = 0
                          , q = 0;
                        this.x < a && (f = a - this.x);
                        this.y < b && (g = b - this.y);
                        this.get_right() > a + c && (k = a + c - this.get_right());
                        this.get_bottom() > b + d && (q = b + d - this.get_bottom());
                        this.x += f;
                        this.y += g;
                        this.width += k - f;
                        this.height += q - g
                    }
                },
                __expand: function(a, b, c, d) {
                    if (0 == this.width && 0 == this.height)
                        this.x = a,
                        this.y = b,
                        this.width = c,
                        this.height = d;
                    else {
                        var f = this.get_right()
                          , g = this.get_bottom();
                        this.x > a && (this.x = a,
                        this.width = f - a);
                        this.y > b && (this.y = b,
                        this.height = g - b);
                        f < a + c && (this.width = a + c - this.x);
                        g < b + d && (this.height = b + d - this.y)
                    }
                },
                __toLimeRectangle: function() {
                    null == oa.__limeRectangle && (oa.__limeRectangle = new Dd);
                    oa.__limeRectangle.setTo(this.x, this.y, this.width, this.height);
                    return oa.__limeRectangle
                },
                __transform: function(a, b) {
                    var c = b.a * this.x + b.c * this.y
                      , d = c
                      , f = b.b * this.x + b.d * this.y
                      , g = f
                      , k = b.a * (this.x + this.width) + b.c * this.y
                      , q = b.b * (this.x + this.width) + b.d * this.y;
                    k < c && (c = k);
                    q < f && (f = q);
                    k > d && (d = k);
                    q > g && (g = q);
                    k = b.a * (this.x + this.width) + b.c * (this.y + this.height);
                    q = b.b * (this.x + this.width) + b.d * (this.y + this.height);
                    k < c && (c = k);
                    q < f && (f = q);
                    k > d && (d = k);
                    q > g && (g = q);
                    k = b.a * this.x + b.c * (this.y + this.height);
                    q = b.b * this.x + b.d * (this.y + this.height);
                    k < c && (c = k);
                    q < f && (f = q);
                    k > d && (d = k);
                    q > g && (g = q);
                    a.setTo(c + b.tx, f + b.ty, d - c, g - f)
                },
                get_bottom: function() {
                    return this.y + this.height
                },
                get_left: function() {
                    return this.x
                },
                get_right: function() {
                    return this.x + this.width
                },
                get_top: function() {
                    return this.y
                },
                get_topLeft: function() {
                    return new B(this.x,this.y)
                },
                __class__: oa,
                __properties__: {
                    get_topLeft: "get_topLeft",
                    get_top: "get_top",
                    get_right: "get_right",
                    get_left: "get_left",
                    get_bottom: "get_bottom"
                }
            };
            var Tb = function(a, b, c, d, f, g, k) {
                null == f && (f = -1);
                null == d && (d = -1);
                null == c && (c = 0);
                null == b && (b = 0);
                this.offsetX = b;
                this.offsetY = c;
                this.width = d;
                this.height = f;
                this.version = 0;
                null == k && (k = wc.CANVAS,
                null != ud.__current.__worker || ud.__isWorker) && (k = wc.DATA);
                this.type = k;
                if (null == a) {
                    if (0 < d && 0 < f)
                        switch (this.type._hx_index) {
                        case 0:
                            this.buffer = new Xe(null,d,f);
                            Na.createCanvas(this, d, f);
                            null != g && 0 != g && this.fillRect(new Dd(0,0,d,f), g);
                            break;
                        case 1:
                            a = d * f * 4,
                            a = null != a ? new Uint8Array(a) : null,
                            this.buffer = new Xe(a,d,f),
                            null != g && 0 != g && this.fillRect(new Dd(0,0,d,f), g)
                        }
                } else
                    this.__fromImageBuffer(a)
            };
            h["lime.graphics.Image"] = Tb;
            Tb.__name__ = "lime.graphics.Image";
            Tb.fromCanvas = function(a) {
                if (null == a)
                    return null;
                var b = new Xe(null,a.width,a.height);
                b.set_src(a);
                a = new Tb(b);
                a.type = wc.CANVAS;
                return a
            }
            ;
            Tb.fromFile = function(a) {
                if (null == a)
                    return null;
                var b = new Tb;
                return b.__fromFile(a) ? b : null
            }
            ;
            Tb.loadFromBytes = function(a) {
                if (null == a)
                    return nc.withValue(null);
                if (Tb.__isPNG(a))
                    var b = "image/png";
                else if (Tb.__isJPG(a))
                    b = "image/jpeg";
                else if (Tb.__isGIF(a))
                    b = "image/gif";
                else if (Tb.__isWebP(a))
                    b = "image/webp";
                else
                    return nc.withValue(null);
                return Ea.loadImageFromBytes(a, b)
            }
            ;
            Tb.loadFromFile = function(a) {
                return null == a ? nc.withValue(null) : Ea.loadImage(a)
            }
            ;
            Tb.__isGIF = function(a) {
                if (null == a || 6 > a.length)
                    return !1;
                a = a.getString(0, 6);
                return "GIF87a" != a ? "GIF89a" == a : !0
            }
            ;
            Tb.__isJPG = function(a) {
                return null == a || 4 > a.length ? !1 : 255 == a.b[0] && 216 == a.b[1] && 255 == a.b[a.length - 2] ? 217 == a.b[a.length - 1] : !1
            }
            ;
            Tb.__isPNG = function(a) {
                return null == a || 8 > a.length ? !1 : 137 == a.b[0] && 80 == a.b[1] && 78 == a.b[2] && 71 == a.b[3] && 13 == a.b[4] && 10 == a.b[5] && 26 == a.b[6] ? 10 == a.b[7] : !1
            }
            ;
            Tb.__isWebP = function(a) {
                return null == a || 16 > a.length ? !1 : "RIFF" == a.getString(0, 4) ? "WEBP" == a.getString(8, 4) : !1
            }
            ;
            Tb.prototype = {
                clone: function() {
                    if (null != this.buffer) {
                        this.type == wc.CANVAS ? Na.convertToCanvas(this) : Na.convertToData(this);
                        var a = new Tb(this.buffer.clone(),this.offsetX,this.offsetY,this.width,this.height,null,this.type);
                        a.version = this.version;
                        return a
                    }
                    return new Tb(null,this.offsetX,this.offsetY,this.width,this.height,null,this.type)
                },
                colorTransform: function(a, b) {
                    a = this.__clipRect(a);
                    if (null != this.buffer && null != a)
                        switch (this.type._hx_index) {
                        case 0:
                            Na.colorTransform(this, a, b);
                            break;
                        case 1:
                            Na.convertToData(this);
                            bc.colorTransform(this, a, b);
                            break;
                        case 2:
                            a.offset(this.offsetX, this.offsetY),
                            this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(), Pc.__toFlashColorTransform(b))
                        }
                },
                copyChannel: function(a, b, c, d, f) {
                    b = this.__clipRect(b);
                    if (null != this.buffer && null != b && !(f == he.ALPHA && !this.get_transparent() || 0 >= b.width || 0 >= b.height))
                        switch (b.x + b.width > a.width && (b.width = a.width - b.x),
                        b.y + b.height > a.height && (b.height = a.height - b.y),
                        this.type._hx_index) {
                        case 0:
                            Na.copyChannel(this, a, b, c, d, f);
                            break;
                        case 1:
                            Na.convertToData(this);
                            Na.convertToData(a);
                            bc.copyChannel(this, a, b, c, d, f);
                            break;
                        case 2:
                            switch (d._hx_index) {
                            case 0:
                                var g = 1;
                                break;
                            case 1:
                                g = 2;
                                break;
                            case 2:
                                g = 4;
                                break;
                            case 3:
                                g = 8
                            }
                            switch (f._hx_index) {
                            case 0:
                                var k = 1;
                                break;
                            case 1:
                                k = 2;
                                break;
                            case 2:
                                k = 4;
                                break;
                            case 3:
                                k = 8
                            }
                            b.offset(a.offsetX, a.offsetY);
                            c.offset(this.offsetX, this.offsetY);
                            this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(), b.__toFlashRectangle(), c.__toFlashPoint(), g, k)
                        }
                },
                copyPixels: function(a, b, c, d, f, g) {
                    null == g && (g = !1);
                    if (null != this.buffer && null != a && !(0 >= b.width || 0 >= b.height || 0 >= this.width || 0 >= this.height))
                        switch (b.x + b.width > a.width && (b.width = a.width - b.x),
                        b.y + b.height > a.height && (b.height = a.height - b.y),
                        0 > b.x && (b.width += b.x,
                        b.x = 0),
                        0 > b.y && (b.height += b.y,
                        b.y = 0),
                        c.x + b.width > this.width && (b.width = this.width - c.x),
                        c.y + b.height > this.height && (b.height = this.height - c.y),
                        0 > c.x && (b.width += c.x,
                        b.x -= c.x,
                        c.x = 0),
                        0 > c.y && (b.height += c.y,
                        b.y -= c.y,
                        c.y = 0),
                        a == this && c.x < b.get_right() && c.y < b.get_bottom() && (a = this.clone()),
                        d == a && (null == f || 0 == f.x && 0 == f.y) && (f = d = null),
                        this.type._hx_index) {
                        case 0:
                            null != d ? (Na.convertToData(this),
                            Na.convertToData(a),
                            null != d && Na.convertToData(d),
                            bc.copyPixels(this, a, b, c, d, f, g)) : (Na.convertToCanvas(this),
                            Na.convertToCanvas(a),
                            Na.copyPixels(this, a, b, c, d, f, g));
                            break;
                        case 1:
                            Na.convertToData(this);
                            Na.convertToData(a);
                            null != d && Na.convertToData(d);
                            bc.copyPixels(this, a, b, c, d, f, g);
                            break;
                        case 2:
                            b.offset(a.offsetX, a.offsetY),
                            c.offset(this.offsetX, this.offsetY),
                            null != d && null != f && f.offset(d.offsetX, d.offsetY),
                            this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData, b.__toFlashRectangle(), c.__toFlashPoint(), null != d ? d.buffer.get_src() : null, null != f ? f.__toFlashPoint() : null, g)
                        }
                },
                encode: function(a, b) {
                    null == b && (b = 90);
                    if (null == a)
                        return ck.encode(this);
                    switch (a._hx_index) {
                    case 0:
                        return Yk.encode(this);
                    case 1:
                        return Zk.encode(this, b);
                    case 2:
                        return ck.encode(this)
                    }
                },
                fillRect: function(a, b, c) {
                    a = this.__clipRect(a);
                    if (null != this.buffer && null != a)
                        switch (this.type._hx_index) {
                        case 0:
                            Na.fillRect(this, a, b, c);
                            break;
                        case 1:
                            Na.convertToData(this);
                            if (0 == this.buffer.data.length)
                                break;
                            bc.fillRect(this, a, b, c);
                            break;
                        case 2:
                            a.offset(this.offsetX, this.offsetY);
                            if (null == c)
                                b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                            else
                                switch (c) {
                                case 1:
                                    break;
                                case 2:
                                    b = (b & 255) << 24 | (b >>> 8 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 24 & 255;
                                    break;
                                default:
                                    b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255
                                }
                            this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(), b)
                        }
                },
                getPixel: function(a, b, c) {
                    if (null == this.buffer || 0 > a || 0 > b || a >= this.width || b >= this.height)
                        return 0;
                    switch (this.type._hx_index) {
                    case 0:
                        return Na.getPixel(this, a, b, c);
                    case 1:
                        return Na.convertToData(this),
                        bc.getPixel(this, a, b, c);
                    case 2:
                        a = this.buffer.__srcBitmapData.getPixel(a + this.offsetX, b + this.offsetY);
                        if (null == c)
                            return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
                        switch (c) {
                        case 1:
                            return a;
                        case 2:
                            return (a & 255) << 24 | (a >>> 8 & 255) << 16 | (a >>> 16 & 255) << 8 | a >>> 24 & 255;
                        default:
                            return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255
                        }
                    default:
                        return 0
                    }
                },
                getPixels: function(a, b) {
                    if (null == this.buffer)
                        return null;
                    switch (this.type._hx_index) {
                    case 0:
                        return Na.getPixels(this, a, b);
                    case 1:
                        return Na.convertToData(this),
                        bc.getPixels(this, a, b);
                    case 2:
                        return null;
                    default:
                        return null
                    }
                },
                setPixel: function(a, b, c, d) {
                    if (!(null == this.buffer || 0 > a || 0 > b || a >= this.width || b >= this.height))
                        switch (this.type._hx_index) {
                        case 0:
                            Na.setPixel(this, a, b, c, d);
                            break;
                        case 1:
                            Na.convertToData(this);
                            bc.setPixel(this, a, b, c, d);
                            break;
                        case 2:
                            if (null == d)
                                c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                            else
                                switch (d) {
                                case 1:
                                    break;
                                case 2:
                                    c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                                    break;
                                default:
                                    c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255
                                }
                            this.buffer.__srcBitmapData.setPixel(a + this.offsetX, b + this.offsetX, c)
                        }
                },
                __clipRect: function(a) {
                    return null == a || 0 > a.x && (a.width -= -a.x,
                    a.x = 0,
                    0 >= a.x + a.width) || 0 > a.y && (a.height -= -a.y,
                    a.y = 0,
                    0 >= a.y + a.height) || a.x + a.width >= this.width && (a.width -= a.x + a.width - this.width,
                    0 >= a.width) || a.y + a.height >= this.height && (a.height -= a.y + a.height - this.height,
                    0 >= a.height) ? null : a
                },
                __fromBase64: function(a, b, c) {
                    var d = this
                      , f = new window.Image;
                    f.addEventListener("load", function(a) {
                        d.buffer = new Xe(null,f.width,f.height);
                        d.buffer.__srcImage = f;
                        d.offsetX = 0;
                        d.offsetY = 0;
                        d.width = d.buffer.width;
                        d.height = d.buffer.height;
                        null != c && c(d)
                    }, !1);
                    f.src = "data:" + b + ";base64," + a
                },
                __fromBytes: function(a, b) {
                    if (Tb.__isPNG(a))
                        var c = "image/png";
                    else if (Tb.__isJPG(a))
                        c = "image/jpeg";
                    else if (Tb.__isGIF(a))
                        c = "image/gif";
                    else
                        return !1;
                    this.__fromBase64(De.encode(a), c, b);
                    return !0
                },
                __fromFile: function(a, b, c) {
                    var d = this
                      , f = new window.Image;
                    Ea.__isSameOrigin(a) || (f.crossOrigin = "Anonymous");
                    f.onload = function(a) {
                        d.buffer = new Xe(null,f.width,f.height);
                        d.buffer.__srcImage = f;
                        d.width = f.width;
                        d.height = f.height;
                        null != b && b(d)
                    }
                    ;
                    f.onerror = function(a) {
                        null != c && c()
                    }
                    ;
                    f.src = a;
                    return !0
                },
                __fromImageBuffer: function(a) {
                    this.buffer = a;
                    null != a && (-1 == this.width && (this.width = a.width),
                    -1 == this.height && (this.height = a.height))
                },
                get_data: function() {
                    null == this.buffer.data && 0 < this.buffer.width && 0 < this.buffer.height && Na.convertToData(this);
                    return this.buffer.data
                },
                get_format: function() {
                    return this.buffer.format
                },
                set_format: function(a) {
                    this.buffer.format != a && 1 == this.type._hx_index && bc.setFormat(this, a);
                    return this.buffer.format = a
                },
                get_premultiplied: function() {
                    return this.buffer.premultiplied
                },
                set_premultiplied: function(a) {
                    if (a && !this.buffer.premultiplied)
                        switch (this.type._hx_index) {
                        case 0:
                        case 1:
                            Na.convertToData(this),
                            bc.multiplyAlpha(this)
                        }
                    else
                        !a && this.buffer.premultiplied && 1 == this.type._hx_index && (Na.convertToData(this),
                        bc.unmultiplyAlpha(this));
                    return a
                },
                get_rect: function() {
                    return new Dd(0,0,this.width,this.height)
                },
                get_src: function() {
                    null != this.buffer.__srcCanvas || null == this.buffer.data && this.type != wc.DATA || Na.convertToCanvas(this);
                    return this.buffer.get_src()
                },
                get_transparent: function() {
                    return null == this.buffer ? !1 : this.buffer.transparent
                },
                set_transparent: function(a) {
                    return null == this.buffer ? !1 : this.buffer.transparent = a
                },
                __class__: Tb,
                __properties__: {
                    set_transparent: "set_transparent",
                    get_transparent: "get_transparent",
                    get_src: "get_src",
                    get_rect: "get_rect",
                    set_premultiplied: "set_premultiplied",
                    get_premultiplied: "get_premultiplied",
                    set_format: "set_format",
                    get_format: "get_format",
                    get_data: "get_data"
                }
            };
            var wc = N["lime.graphics.ImageType"] = {
                __ename__: "lime.graphics.ImageType",
                __constructs__: null,
                CANVAS: {
                    _hx_name: "CANVAS",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageType",
                    toString: r
                },
                DATA: {
                    _hx_name: "DATA",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageType",
                    toString: r
                },
                FLASH: {
                    _hx_name: "FLASH",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageType",
                    toString: r
                },
                CUSTOM: {
                    _hx_name: "CUSTOM",
                    _hx_index: 3,
                    __enum__: "lime.graphics.ImageType",
                    toString: r
                }
            };
            wc.__constructs__ = [wc.CANVAS, wc.DATA, wc.FLASH, wc.CUSTOM];
            wc.__empty_constructs__ = [wc.CANVAS, wc.DATA, wc.FLASH, wc.CUSTOM];
            var dk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Dynamic_Void"] = dk;
            dk.__name__ = "lime.app._Event_Dynamic_Void";
            dk.prototype = {
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: dk
            };
            var rl = {
                disablePreserveClasses: function(a) {
                    null != a && a instanceof Object && 1 != Aa.field(a, "__skipPrototype__") && !(null != a.byteLength && null != a.byteOffset && null != a.buffer && a.buffer instanceof ArrayBuffer) && (a.__skipPrototype__ = !0)
                },
                restoreClasses: function(a, b) {
                    null == b && (b = 2147483647 * Math.random() | 0,
                    Aa.field(a, "__restoreFlag__") == b && ++b);
                    if (null != a && a instanceof Object && 1 != Aa.field(a, "__skipPrototype__") && !(null != a.byteLength && null != a.byteOffset && null != a.buffer && a.buffer instanceof ArrayBuffer) && Aa.field(a, "__restoreFlag__") != b) {
                        try {
                            a.__restoreFlag__ = b
                        } catch (f) {
                            Ua.lastError = f;
                            return
                        }
                        if (null != Aa.field(a, "__prototype__"))
                            try {
                                Object.setPrototypeOf(a, h[Aa.field(a, "__prototype__")].prototype)
                            } catch (f) {
                                Ua.lastError = f
                            }
                        var c = 0;
                        for (a = Object.values(a); c < a.length; ) {
                            var d = a[c];
                            ++c;
                            rl.restoreClasses(d, b)
                        }
                    }
                }
            }
              , Cl = {
                toFunction: function(a) {
                    if (null != a.func)
                        return a.func;
                    if (null != a.classPath && null != a.functionName)
                        return a.func = h[a.classPath][a.functionName],
                        a.func;
                    if (null != a.sourceCode)
                        return a.func = (new Function("return " + a.sourceCode))(),
                        a.func;
                    throw aa.thrown("Object is not a valid WorkFunction: " + G.string(a));
                }
            }
              , xa = function() {};
            h["js.Boot"] = xa;
            xa.__name__ = "js.Boot";
            xa.getClass = function(a) {
                if (null == a)
                    return null;
                if (a instanceof Array)
                    return Array;
                var b = a.__class__;
                if (null != b)
                    return b;
                a = xa.__nativeClassName(a);
                return null != a ? xa.__resolveNativeClass(a) : null
            }
            ;
            xa.__string_rec = function(a, b) {
                if (null == a)
                    return "null";
                if (5 <= b.length)
                    return "<...>";
                var c = typeof a;
                "function" == c && (a.__name__ || a.__ename__) && (c = "object");
                switch (c) {
                case "function":
                    return "<function>";
                case "object":
                    if (a.__enum__) {
                        var d = N[a.__enum__].__constructs__[a._hx_index];
                        c = d._hx_name;
                        if (d.__params__) {
                            b += "\t";
                            var f = []
                              , g = 0;
                            for (d = d.__params__; g < d.length; ) {
                                var k = d[g];
                                g += 1;
                                f.push(xa.__string_rec(a[k], b))
                            }
                            return c + "(" + f.join(",") + ")"
                        }
                        return c
                    }
                    if (a instanceof Array) {
                        c = "[";
                        b += "\t";
                        f = 0;
                        for (g = a.length; f < g; )
                            d = f++,
                            c += (0 < d ? "," : "") + xa.__string_rec(a[d], b);
                        return c + "]"
                    }
                    try {
                        f = a.toString
                    } catch (q) {
                        return Ua.lastError = q,
                        "???"
                    }
                    if (null != f && f != Object.toString && "function" == typeof f && (c = a.toString(),
                    "[object Object]" != c))
                        return c;
                    c = "{\n";
                    b += "\t";
                    f = null != a.hasOwnProperty;
                    g = null;
                    for (g in a)
                        f && !a.hasOwnProperty(g) || "prototype" == g || "__class__" == g || "__super__" == g || "__interfaces__" == g || "__properties__" == g || (2 != c.length && (c += ", \n"),
                        c += b + g + " : " + xa.__string_rec(a[g], b));
                    b = b.substring(1);
                    return c + ("\n" + b + "}");
                case "string":
                    return a;
                default:
                    return String(a)
                }
            }
            ;
            xa.__interfLoop = function(a, b) {
                if (null == a)
                    return !1;
                if (a == b)
                    return !0;
                var c = a.__interfaces__;
                if (null != c)
                    for (var d = 0, f = c.length; d < f; ) {
                        var g = d++;
                        g = c[g];
                        if (g == b || xa.__interfLoop(g, b))
                            return !0
                    }
                return xa.__interfLoop(a.__super__, b)
            }
            ;
            xa.__instanceof = function(a, b) {
                if (null == b)
                    return !1;
                switch (b) {
                case Array:
                    return a instanceof Array;
                case Dl:
                    return "boolean" == typeof a;
                case El:
                    return null != a;
                case Fl:
                    return "number" == typeof a;
                case sl:
                    return "number" == typeof a ? (a | 0) === a : !1;
                case String:
                    return "string" == typeof a;
                default:
                    if (null != a)
                        if ("function" == typeof b) {
                            if (xa.__downcastCheck(a, b))
                                return !0
                        } else {
                            if ("object" == typeof b && xa.__isNativeObj(b) && a instanceof b)
                                return !0
                        }
                    else
                        return !1;
                    return b == ul && null != a.__name__ || b == vl && null != a.__ename__ ? !0 : null != a.__enum__ ? N[a.__enum__] == b : !1
                }
            }
            ;
            xa.__downcastCheck = function(a, b) {
                return a instanceof b ? !0 : b.__isInterface__ ? xa.__interfLoop(xa.getClass(a), b) : !1
            }
            ;
            xa.__cast = function(a, b) {
                if (null == a || xa.__instanceof(a, b))
                    return a;
                throw aa.thrown("Cannot cast " + G.string(a) + " to " + G.string(b));
            }
            ;
            xa.__nativeClassName = function(a) {
                a = xa.__toStr.call(a).slice(8, -1);
                return "Object" == a || "Function" == a || "Math" == a || "JSON" == a ? null : a
            }
            ;
            xa.__isNativeObj = function(a) {
                return null != xa.__nativeClassName(a)
            }
            ;
            xa.__resolveNativeClass = function(a) {
                return y[a]
            }
            ;
            var ud = function(a, b) {
                this.__href = a;
                null != b && (this.__worker = b,
                this.__worker.onmessage = m(this, this.dispatchMessage),
                this.onMessage = new dk);
                rl.disablePreserveClasses(this)
            };
            h["lime._internal.backend.html5.HTML5Thread"] = ud;
            ud.__name__ = "lime._internal.backend.html5.HTML5Thread";
            ud.prototype = {
                dispatchMessage: function(a) {
                    a = a.data;
                    rl.restoreClasses(a);
                    null != this.onMessage && this.onMessage.dispatch(a);
                    ud.__resolveMethods.isEmpty() ? ud.__messages.add(a) : ud.__resolveMethods.pop()(a)
                },
                destroy: function() {
                    if (null != this.__worker)
                        this.__worker.terminate();
                    else if (ud.__isWorker)
                        try {
                            y.close()
                        } catch (a) {
                            Ua.lastError = a
                        }
                },
                __class__: ud
            };
            var Xe = function(a, b, c, d, f) {
                null == d && (d = 32);
                null == c && (c = 0);
                null == b && (b = 0);
                this.data = a;
                this.width = b;
                this.height = c;
                this.bitsPerPixel = d;
                this.format = null == f ? 0 : f;
                this.premultiplied = !1;
                this.transparent = !0
            };
            h["lime.graphics.ImageBuffer"] = Xe;
            Xe.__name__ = "lime.graphics.ImageBuffer";
            Xe.prototype = {
                clone: function() {
                    var a = new Xe(this.data,this.width,this.height,this.bitsPerPixel);
                    if (null != this.data) {
                        var b = this.data.byteLength
                          , c = null
                          , d = null
                          , f = null
                          , g = null
                          , k = null;
                        b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != f ? new Uint8Array(f) : null != g ? null == k ? new Uint8Array(g,0) : new Uint8Array(g,0,k) : null;
                        a.data = b;
                        d = c = b = null;
                        f = this.data;
                        k = g = null;
                        b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != f ? new Uint8Array(f) : null != g ? null == k ? new Uint8Array(g,0) : new Uint8Array(g,0,k) : null;
                        a.data.set(b)
                    } else
                        null != this.__srcImageData ? (a.__srcCanvas = window.document.createElement("canvas"),
                        a.__srcContext = a.__srcCanvas.getContext("2d"),
                        a.__srcCanvas.width = this.__srcImageData.width,
                        a.__srcCanvas.height = this.__srcImageData.height,
                        a.__srcImageData = a.__srcContext.createImageData(this.__srcImageData.width, this.__srcImageData.height),
                        b = new Uint8ClampedArray(this.__srcImageData.data),
                        a.__srcImageData.data.set(b)) : null != this.__srcCanvas ? (a.__srcCanvas = window.document.createElement("canvas"),
                        a.__srcContext = a.__srcCanvas.getContext("2d"),
                        a.__srcCanvas.width = this.__srcCanvas.width,
                        a.__srcCanvas.height = this.__srcCanvas.height,
                        a.__srcContext.drawImage(this.__srcCanvas, 0, 0)) : a.__srcImage = this.__srcImage;
                    a.bitsPerPixel = this.bitsPerPixel;
                    a.format = this.format;
                    a.premultiplied = this.premultiplied;
                    a.transparent = this.transparent;
                    return a
                },
                get_src: function() {
                    return null != this.__srcImage ? this.__srcImage : this.__srcCanvas
                },
                set_src: function(a) {
                    a instanceof Image ? this.__srcImage = a : a instanceof HTMLCanvasElement && (this.__srcCanvas = a,
                    this.__srcContext = this.__srcCanvas.getContext("2d"));
                    return a
                },
                get_stride: function() {
                    return this.width * (this.bitsPerPixel / 8 | 0)
                },
                __class__: Xe,
                __properties__: {
                    get_stride: "get_stride",
                    set_src: "set_src",
                    get_src: "get_src"
                }
            };
            var Na = function() {};
            h["lime._internal.graphics.ImageCanvasUtil"] = Na;
            Na.__name__ = "lime._internal.graphics.ImageCanvasUtil";
            Na.colorTransform = function(a, b, c) {
                Na.convertToData(a);
                bc.colorTransform(a, b, c)
            }
            ;
            Na.convertToCanvas = function(a, b) {
                null == b && (b = !1);
                var c = a.buffer;
                null != c.__srcImage ? (null == c.__srcCanvas && (Na.createCanvas(a, c.__srcImage.width, c.__srcImage.height),
                c.__srcContext.drawImage(c.__srcImage, 0, 0)),
                c.__srcImage = null) : null == c.__srcCanvas && null != c.data ? (a.set_transparent(!0),
                Na.createCanvas(a, c.width, c.height),
                Na.createImageData(a),
                c.__srcContext.putImageData(c.__srcImageData, 0, 0)) : a.type == wc.DATA && null != c.__srcImageData && a.dirty && (c.__srcContext.putImageData(c.__srcImageData, 0, 0),
                a.dirty = !1);
                b ? (c.data = null,
                c.__srcImageData = null) : null == c.data && null != c.__srcImageData && (c.data = c.__srcImageData.data);
                a.type = wc.CANVAS
            }
            ;
            Na.convertToData = function(a, b) {
                null == b && (b = !1);
                var c = a.buffer;
                null != c.__srcImage && Na.convertToCanvas(a);
                if (null != c.__srcCanvas && null == c.data)
                    Na.createImageData(a),
                    a.type == wc.CANVAS && (a.dirty = !1);
                else if (a.type == wc.CANVAS && null != c.__srcCanvas && a.dirty) {
                    if (null == c.__srcImageData)
                        Na.createImageData(a);
                    else {
                        c.__srcImageData = c.__srcContext.getImageData(0, 0, c.width, c.height);
                        var d = c.__srcImageData.data.buffer;
                        d = null != d ? new Uint8Array(d) : null;
                        c.data = d
                    }
                    a.dirty = !1
                }
                b && (a.buffer.__srcCanvas = null,
                a.buffer.__srcContext = null);
                a.type = wc.DATA
            }
            ;
            Na.copyChannel = function(a, b, c, d, f, g) {
                Na.convertToData(b);
                Na.convertToData(a);
                bc.copyChannel(a, b, c, d, f, g)
            }
            ;
            Na.copyPixels = function(a, b, c, d, f, g, k) {
                null == k && (k = !1);
                null == d || d.x >= a.width || d.y >= a.height || null == c || 1 > c.width || 1 > c.height || (null != f && f.get_transparent() && (null == g && (g = new qg),
                b = b.clone(),
                b.copyChannel(f, new Dd(c.x + g.x,c.y + g.y,c.width,c.height), new qg(c.x,c.y), he.ALPHA, he.ALPHA)),
                Na.convertToCanvas(a, !0),
                k || a.get_transparent() && b.get_transparent() && a.buffer.__srcContext.clearRect(d.x + a.offsetX, d.y + a.offsetY, c.width + a.offsetX, c.height + a.offsetY),
                Na.convertToCanvas(b),
                null != b.buffer.get_src() && (a.buffer.__srcContext.globalCompositeOperation = "source-over",
                a.buffer.__srcContext.drawImage(b.buffer.get_src(), c.x + b.offsetX | 0, c.y + b.offsetY | 0, c.width | 0, c.height | 0, d.x + a.offsetX | 0, d.y + a.offsetY | 0, c.width | 0, c.height | 0)),
                a.dirty = !0,
                a.version++)
            }
            ;
            Na.createCanvas = function(a, b, c) {
                var d = a.buffer;
                null == d.__srcCanvas && (d.__srcCanvas = window.document.createElement("canvas"),
                d.__srcCanvas.width = b,
                d.__srcCanvas.height = c,
                a.get_transparent() ? d.__srcContext = d.__srcCanvas.getContext("2d") : (a.get_transparent() || d.__srcCanvas.setAttribute("moz-opaque", "true"),
                d.__srcContext = d.__srcCanvas.getContext("2d", {
                    alpha: !1
                })))
            }
            ;
            Na.createImageData = function(a) {
                a = a.buffer;
                if (null == a.__srcImageData) {
                    null == a.data ? a.__srcImageData = a.__srcContext.getImageData(0, 0, a.width, a.height) : (a.__srcImageData = a.__srcContext.createImageData(a.width, a.height),
                    a.__srcImageData.data.set(a.data));
                    var b = a.__srcImageData.data.buffer;
                    b = null != b ? new Uint8Array(b) : null;
                    a.data = b
                }
            }
            ;
            Na.fillRect = function(a, b, c, d) {
                Na.convertToCanvas(a);
                if (1 == d) {
                    d = c >> 16 & 255;
                    var f = c >> 8 & 255;
                    var g = c & 255;
                    c = a.get_transparent() ? c >> 24 & 255 : 255
                } else
                    d = c >> 24 & 255,
                    f = c >> 16 & 255,
                    g = c >> 8 & 255,
                    c = a.get_transparent() ? c & 255 : 255;
                0 == b.x && 0 == b.y && b.width == a.width && b.height == a.height && a.get_transparent() && 0 == c ? a.buffer.__srcCanvas.width = a.buffer.width : (255 > c && a.buffer.__srcContext.clearRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY),
                0 < c && (a.buffer.__srcContext.fillStyle = "rgba(" + d + ", " + f + ", " + g + ", " + c / 255 + ")",
                a.buffer.__srcContext.fillRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY)),
                a.dirty = !0,
                a.version++)
            }
            ;
            Na.getPixel = function(a, b, c, d) {
                Na.convertToData(a);
                return bc.getPixel(a, b, c, d)
            }
            ;
            Na.getPixels = function(a, b, c) {
                Na.convertToData(a);
                return bc.getPixels(a, b, c)
            }
            ;
            Na.setPixel = function(a, b, c, d, f) {
                Na.convertToData(a);
                bc.setPixel(a, b, c, d, f)
            }
            ;
            Na.sync = function(a, b) {
                null != a && (a.type != wc.CANVAS || null == a.buffer.__srcCanvas && null == a.buffer.data ? a.type == wc.DATA && Na.convertToData(a, b) : Na.convertToCanvas(a, b))
            }
            ;
            var Dd = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.x = a;
                this.y = b;
                this.width = c;
                this.height = d
            };
            h["lime.math.Rectangle"] = Dd;
            Dd.__name__ = "lime.math.Rectangle";
            Dd.prototype = {
                intersection: function(a, b) {
                    null == b && (b = new Dd);
                    var c = this.x < a.x ? a.x : this.x
                      , d = this.get_right() > a.get_right() ? a.get_right() : this.get_right();
                    if (d <= c)
                        return b.setEmpty(),
                        b;
                    var f = this.y < a.y ? a.y : this.y;
                    a = this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
                    if (a <= f)
                        return b.setEmpty(),
                        b;
                    b.x = c;
                    b.y = f;
                    b.width = d - c;
                    b.height = a - f;
                    return b
                },
                offset: function(a, b) {
                    this.x += a;
                    this.y += b
                },
                setEmpty: function() {
                    this.x = this.y = this.width = this.height = 0
                },
                setTo: function(a, b, c, d) {
                    this.x = a;
                    this.y = b;
                    this.width = c;
                    this.height = d
                },
                __toFlashRectangle: function() {
                    return null
                },
                get_bottom: function() {
                    return this.y + this.height
                },
                get_right: function() {
                    return this.x + this.width
                },
                __class__: Dd,
                __properties__: {
                    get_right: "get_right",
                    get_bottom: "get_bottom"
                }
            };
            var ta = function(a, b, c, d, f, g) {
                null == g && (g = 0);
                null == f && (f = 0);
                null == d && (d = 1);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 1);
                this.a = a;
                this.b = b;
                this.c = c;
                this.d = d;
                this.tx = f;
                this.ty = g
            };
            h["openfl.geom.Matrix"] = ta;
            ta.__name__ = "openfl.geom.Matrix";
            ta.prototype = {
                clone: function() {
                    return new ta(this.a,this.b,this.c,this.d,this.tx,this.ty)
                },
                concat: function(a) {
                    var b = this.a * a.a + this.b * a.c;
                    this.b = this.a * a.b + this.b * a.d;
                    this.a = b;
                    b = this.c * a.a + this.d * a.c;
                    this.d = this.c * a.b + this.d * a.d;
                    this.c = b;
                    b = this.tx * a.a + this.ty * a.c + a.tx;
                    this.ty = this.tx * a.b + this.ty * a.d + a.ty;
                    this.tx = b
                },
                copyFrom: function(a) {
                    this.a = a.a;
                    this.b = a.b;
                    this.c = a.c;
                    this.d = a.d;
                    this.tx = a.tx;
                    this.ty = a.ty
                },
                createGradientBox: function(a, b, c, d, f) {
                    null == f && (f = 0);
                    null == d && (d = 0);
                    null == c && (c = 0);
                    this.a = a / 1638.4;
                    this.d = b / 1638.4;
                    if (0 != c) {
                        var g = Math.cos(c);
                        c = Math.sin(c);
                        this.b = c * this.d;
                        this.c = -c * this.a;
                        this.a *= g;
                        this.d *= g
                    } else
                        this.c = this.b = 0;
                    this.tx = d + a / 2;
                    this.ty = f + b / 2
                },
                equals: function(a) {
                    return null != a && this.tx == a.tx && this.ty == a.ty && this.a == a.a && this.b == a.b && this.c == a.c ? this.d == a.d : !1
                },
                identity: function() {
                    this.a = 1;
                    this.c = this.b = 0;
                    this.d = 1;
                    this.ty = this.tx = 0
                },
                invert: function() {
                    var a = this.a * this.d - this.b * this.c;
                    if (0 == a)
                        this.a = this.b = this.c = this.d = 0,
                        this.tx = -this.tx,
                        this.ty = -this.ty;
                    else {
                        a = 1 / a;
                        var b = this.d * a;
                        this.d = this.a * a;
                        this.a = b;
                        this.b *= -a;
                        this.c *= -a;
                        a = -this.a * this.tx - this.c * this.ty;
                        this.ty = -this.b * this.tx - this.d * this.ty;
                        this.tx = a
                    }
                    return this
                },
                scale: function(a, b) {
                    this.a *= a;
                    this.b *= b;
                    this.c *= a;
                    this.d *= b;
                    this.tx *= a;
                    this.ty *= b
                },
                setTo: function(a, b, c, d, f, g) {
                    this.a = a;
                    this.b = b;
                    this.c = c;
                    this.d = d;
                    this.tx = f;
                    this.ty = g
                },
                transformPoint: function(a) {
                    return new B(a.x * this.a + a.y * this.c + this.tx,a.x * this.b + a.y * this.d + this.ty)
                },
                translate: function(a, b) {
                    this.tx += a;
                    this.ty += b
                },
                __class__: ta
            };
            var Kb = function(a, b, c, d, f, g, k, q) {
                null == q && (q = 0);
                null == k && (k = 0);
                null == g && (g = 0);
                null == f && (f = 0);
                null == d && (d = 1);
                null == c && (c = 1);
                null == b && (b = 1);
                null == a && (a = 1);
                this.redMultiplier = a;
                this.greenMultiplier = b;
                this.blueMultiplier = c;
                this.alphaMultiplier = d;
                this.redOffset = f;
                this.greenOffset = g;
                this.blueOffset = k;
                this.alphaOffset = q
            };
            h["openfl.geom.ColorTransform"] = Kb;
            Kb.__name__ = "openfl.geom.ColorTransform";
            Kb.prototype = {
                __clone: function() {
                    return new Kb(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)
                },
                __copyFrom: function(a) {
                    this.redMultiplier = a.redMultiplier;
                    this.greenMultiplier = a.greenMultiplier;
                    this.blueMultiplier = a.blueMultiplier;
                    this.alphaMultiplier = a.alphaMultiplier;
                    this.redOffset = a.redOffset;
                    this.greenOffset = a.greenOffset;
                    this.blueOffset = a.blueOffset;
                    this.alphaOffset = a.alphaOffset
                },
                __combine: function(a) {
                    this.redMultiplier *= a.redMultiplier;
                    this.greenMultiplier *= a.greenMultiplier;
                    this.blueMultiplier *= a.blueMultiplier;
                    this.alphaMultiplier *= a.alphaMultiplier;
                    this.redOffset += a.redOffset;
                    this.greenOffset += a.greenOffset;
                    this.blueOffset += a.blueOffset;
                    this.alphaOffset += a.alphaOffset
                },
                __identity: function() {
                    this.alphaMultiplier = this.blueMultiplier = this.greenMultiplier = this.redMultiplier = 1;
                    this.alphaOffset = this.blueOffset = this.greenOffset = this.redOffset = 0
                },
                __invert: function() {
                    this.redMultiplier = 0 != this.redMultiplier ? 1 / this.redMultiplier : 1;
                    this.greenMultiplier = 0 != this.greenMultiplier ? 1 / this.greenMultiplier : 1;
                    this.blueMultiplier = 0 != this.blueMultiplier ? 1 / this.blueMultiplier : 1;
                    this.alphaMultiplier = 0 != this.alphaMultiplier ? 1 / this.alphaMultiplier : 1;
                    this.redOffset = -this.redOffset;
                    this.greenOffset = -this.greenOffset;
                    this.blueOffset = -this.blueOffset;
                    this.alphaOffset = -this.alphaOffset
                },
                __equals: function(a, b) {
                    return null == a || this.redMultiplier != a.redMultiplier || this.greenMultiplier != a.greenMultiplier || this.blueMultiplier != a.blueMultiplier || !b && this.alphaMultiplier != a.alphaMultiplier || this.redOffset != a.redOffset || this.greenOffset != a.greenOffset || this.blueOffset != a.blueOffset ? !1 : this.alphaOffset == a.alphaOffset
                },
                __isDefault: function(a) {
                    return a ? 1 == this.redMultiplier && 1 == this.greenMultiplier && 1 == this.blueMultiplier && 0 == this.redOffset && 0 == this.greenOffset && 0 == this.blueOffset ? 0 == this.alphaOffset : !1 : 1 == this.redMultiplier && 1 == this.greenMultiplier && 1 == this.blueMultiplier && 1 == this.alphaMultiplier && 0 == this.redOffset && 0 == this.greenOffset && 0 == this.blueOffset ? 0 == this.alphaOffset : !1
                },
                __setArrays: function(a, b) {
                    a[0] = this.redMultiplier;
                    a[1] = this.greenMultiplier;
                    a[2] = this.blueMultiplier;
                    a[3] = this.alphaMultiplier;
                    b[0] = this.redOffset;
                    b[1] = this.greenOffset;
                    b[2] = this.blueOffset;
                    b[3] = this.alphaOffset
                },
                get_color: function() {
                    return (this.redOffset | 0) << 16 | (this.greenOffset | 0) << 8 | this.blueOffset | 0
                },
                set_color: function(a) {
                    this.redOffset = a >> 16 & 255;
                    this.greenOffset = a >> 8 & 255;
                    this.blueOffset = a & 255;
                    this.blueMultiplier = this.greenMultiplier = this.redMultiplier = 0;
                    return this.get_color()
                },
                __toLimeColorMatrix: function() {
                    null == Kb.__limeColorMatrix && (Kb.__limeColorMatrix = new Float32Array(20));
                    Kb.__limeColorMatrix[0] = this.redMultiplier;
                    Kb.__limeColorMatrix[4] = this.redOffset / 255;
                    Kb.__limeColorMatrix[6] = this.greenMultiplier;
                    Kb.__limeColorMatrix[9] = this.greenOffset / 255;
                    Kb.__limeColorMatrix[12] = this.blueMultiplier;
                    Kb.__limeColorMatrix[14] = this.blueOffset / 255;
                    Kb.__limeColorMatrix[18] = this.alphaMultiplier;
                    Kb.__limeColorMatrix[19] = this.alphaOffset / 255;
                    return Kb.__limeColorMatrix
                },
                __class__: Kb,
                __properties__: {
                    set_color: "set_color",
                    get_color: "get_color"
                }
            };
            var ze = function(a, b, c) {
                null == c && (c = !1);
                ca.call(this);
                this.__drawableType = 2;
                this.__bitmapData = a;
                this.pixelSnapping = b;
                this.smoothing = c;
                null == b && (this.pixelSnapping = 1)
            };
            h["openfl.display.Bitmap"] = ze;
            ze.__name__ = "openfl.display.Bitmap";
            ze.__super__ = ca;
            ze.prototype = v(ca.prototype, {
                __enterFrame: function(a) {
                    null == this.__bitmapData || null == this.__bitmapData.image || this.__bitmapData.image.version == this.__imageVersion || this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty())
                },
                __getBounds: function(a, b) {
                    var c = oa.__pool.get();
                    null != this.__bitmapData ? c.setTo(0, 0, this.__bitmapData.width, this.__bitmapData.height) : c.setTo(0, 0, 0, 0);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    oa.__pool.release(c)
                },
                __hitTest: function(a, b, c, d, f, g) {
                    if (!g.get_visible() || this.__isMask || null == this.__bitmapData || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
                        return !1;
                    this.__getRenderTransform();
                    var k = this.__renderTransform
                      , q = k.a * k.d - k.b * k.c;
                    c = 0 == q ? -k.tx : 1 / q * (k.c * (k.ty - b) + k.d * (a - k.tx));
                    k = this.__renderTransform;
                    q = k.a * k.d - k.b * k.c;
                    a = 0 == q ? -k.ty : 1 / q * (k.a * (b - k.ty) + k.b * (k.tx - a));
                    if (0 < c && 0 < a && c <= this.__bitmapData.width && a <= this.__bitmapData.height) {
                        if (null != this.__scrollRect && !this.__scrollRect.contains(c, a))
                            return !1;
                        null == d || f || d.push(g);
                        return !0
                    }
                    return !1
                },
                __hitTestMask: function(a, b) {
                    if (null == this.__bitmapData)
                        return !1;
                    this.__getRenderTransform();
                    var c = this.__renderTransform
                      , d = c.a * c.d - c.b * c.c
                      , f = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    d = c.a * c.d - c.b * c.c;
                    a = 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
                    return 0 < f && 0 < a && f <= this.__bitmapData.width && a <= this.__bitmapData.height ? !0 : !1
                },
                get_bitmapData: function() {
                    return this.__bitmapData
                },
                set_bitmapData: function(a) {
                    this.__bitmapData = a;
                    this.smoothing = !1;
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty());
                    this.__imageVersion = -1;
                    return this.__bitmapData
                },
                set_height: function(a) {
                    null != this.__bitmapData ? this.set_scaleY(a / this.__bitmapData.height) : this.set_scaleY(0);
                    return a
                },
                set_width: function(a) {
                    null != this.__bitmapData ? this.set_scaleX(a / this.__bitmapData.width) : this.set_scaleX(0);
                    return a
                },
                __class__: ze,
                __properties__: v(ca.prototype.__properties__, {
                    set_bitmapData: "set_bitmapData",
                    get_bitmapData: "get_bitmapData"
                })
            });
            var Za = function() {
                Za.inst = this;
                Nc.call(this);
                ea.tiltMode = Da.get("tilt", 0);
                ea.vantage = Da.get("vantage", 1);
                x.restorePalette();
                Za.pixel.setPixel(0, 0, 0);
                this.view = new M;
                this.addChild(this.view);
                this.screena = new ze(Za.pixel);
                this.addChild(this.screena);
                this.screenb = new ze(Za.pixel);
                this.addChild(this.screenb);
                u.offset = 45;
                this.keyEvent.add(m(this, this.onKey));
                this.addEventListener("click", m(this, this.onClick));
                this.clicker = new ek
            };
            h["com.watabou.perilous.MapScene"] = Za;
            Za.__name__ = "com.watabou.perilous.MapScene";
            Za.__super__ = Nc;
            Za.prototype = v(Nc.prototype, {
                activate: function() {
                    Nc.prototype.activate.call(this);
                    this.stage.addEventListener("touchTap", m(this, this.onRightClick));
                    this.stage.addEventListener("rightClick", m(this, this.onRightClick))
                },
                deactivate: function() {
                    Nc.prototype.deactivate.call(this);
                    this.stage.removeEventListener("touchTap", m(this, this.onRightClick));
                    this.stage.removeEventListener("rightClick", m(this, this.onRightClick))
                },
                onEsc: function() {
                    w.hideMenu() || Nc.prototype.onEsc.call(this)
                },
                onKey: function(a, b) {
                    if (b)
                        switch (a) {
                        case 9:
                        case 80:
                            this.showTags();
                            break;
                        case 13:
                            this.keyShift ? this.resetRegion() : this.newRegion();
                            break;
                        case 49:
                            this.applyPreset("bw");
                            break;
                        case 50:
                            this.applyPreset("antique");
                            break;
                        case 51:
                            this.applyPreset("soft");
                            break;
                        case 52:
                            this.applyPreset("cartoon");
                            break;
                        case 53:
                            this.applyPreset("october");
                            break;
                        case 65:
                            this.toggleRugged();
                            break;
                        case 67:
                            this.keyShift ? this.view.customizeCompass() : this.view.toggleCompass();
                            break;
                        case 70:
                            this.view.toggleForestType();
                            break;
                        case 71:
                            this.view.toggleGrid();
                            break;
                        case 72:
                            this.setShading((x.shadingMode + 1) % 4);
                            break;
                        case 73:
                            this.view.toggleIndividualTrees();
                            break;
                        case 76:
                            this.view.toggleLabels();
                            break;
                        case 77:
                            this.view.toggleMatte();
                            break;
                        case 78:
                            this.keyShift ? this.rerollNames() : this.showToponymy();
                            break;
                        case 79:
                            this.setShading(4);
                            break;
                        case 82:
                            this.setTilt((ea.tiltMode + 1) % 3);
                            break;
                        case 83:
                            this.showStyle();
                            break;
                        case 84:
                            this.view.randomTowns();
                            break;
                        case 86:
                            this.showVantage();
                            break;
                        case 89:
                            this.keyShift ? this.customizeLight() : this.toggleLight();
                            break;
                        case 90:
                            this.keyCtrl && 0 < Za.history.length && this.reset(Za.history.pop(), !1);
                            break;
                        case 192:
                            this.applyPreset("default");
                            break;
                        case 219:
                            1 == ea.vantage && this.rotate90ccw();
                            break;
                        case 221:
                            1 == ea.vantage && this.rotate90cw()
                        }
                },
                onClick: function(a) {
                    var b = this;
                    this.updateContext();
                    if (!(a.target instanceof Ba))
                        if (null != Za.context) {
                            var c = Za.context.getFeature();
                            Za.context = null;
                            if (this.clicker.click(function() {
                                b.editFeature(c)
                            }))
                                this.view.stickers.add(c, !0);
                            else if (a.ctrlKey || a.commandKey) {
                                this.view.stickers.clear();
                                a = 0;
                                for (var d = ia.shuffle(this.region.getFeatures()); a < d.length; ) {
                                    var f = d[a];
                                    ++a;
                                    this.view.stickers.add(f, !0)
                                }
                            } else
                                this.view.stickers.add(c, a.shiftKey)
                        } else
                            this.view.stickers.add(null, a.shiftKey)
                },
                onRightClick: function(a) {
                    for (a = a.target; null != a; ) {
                        if (a == w.layer)
                            return;
                        a = a.parent
                    }
                    a = this.getContextSubmenu();
                    this.keyShift && null != a ? w.showMenu(a) : this.showMenu(a);
                    Za.menu = new fc;
                    Za.context = null
                },
                getContextSubmenu: function() {
                    var a = Za.context;
                    if (null == (null != a ? a : this.updateContext()))
                        return null;
                    a = Za.context.terrain;
                    var b = Za.context.site;
                    if (null != b || null != a)
                        if (null != b ? (b.init(),
                        a = b) : (a.init(),
                        a = a.area),
                        b = new fc,
                        a.fillMenu(b),
                        0 < b.items.length)
                            return b;
                    return null
                },
                showMenu: function(a) {
                    var b = this;
                    if (null != Za.context) {
                        if (null != a) {
                            var c = Za.context.site;
                            Za.menu.addSubmenu((null != c ? c : Za.context.terrain.area).getName(), a)
                        }
                        var d = Za.context;
                        this.region.validateTownCell(Za.context) && Za.menu.addItem("Add town...", function() {
                            b.addTown(d)
                        });
                        this.region.validateDangerCell(Za.context) && Za.menu.addItem("Add danger...", function() {
                            b.addDanger(d)
                        })
                    }
                    Za.menu.addSeparator();
                    var f = new fc;
                    a = function(a, c) {
                        f.addItem(a, function() {
                            b.view.setGrid(c)
                        }, M.gridMode == c)
                    }
                    ;
                    a("Hidden", 0);
                    a("Under", 1);
                    a("Above", 2);
                    f.addSeparator();
                    f.addItem("Ocean tiles", (D = this.view,
                    m(D, D.toggleOceanTiles)), M.oceanTiles);
                    f.addItem("Numbers", (D = this.view,
                    m(D, D.toggleNumbers)), M.showNumbers && 0 != M.gridMode);
                    f.addItem("Customize...", ie.customize);
                    var g = new fc;
                    a = function(a, c) {
                        g.addItem(a, function() {
                            b.setTilt(c)
                        }, ea.tiltMode == c)
                    }
                    ;
                    a("Tilted", 0);
                    a("Pointy topped", 1);
                    a("Flat topped", 2);
                    a("Warped", 3);
                    a = new fc;
                    a.addItem("180\u00b0", m(this, this.rotate180));
                    a.addItem("90\u00b0 CW", 1 == ea.vantage ? m(this, this.rotate90cw) : null);
                    a.addItem("90\u00b0 CCW", 1 == ea.vantage ? m(this, this.rotate90ccw) : null);
                    a.addSeparator();
                    a.addItem("Flip H", m(this, this.flipHorizontal));
                    a.addItem("Flip V", m(this, this.flipVertical));
                    var k = new fc;
                    c = function(a, c) {
                        k.addItem(a, function() {
                            b.view.setForestType(c)
                        }, Ka.type == c)
                    }
                    ;
                    c("Varied", null);
                    c("Light", Ka.lightTree);
                    c("Dark", Ka.darkTree);
                    c("Dead", Ka.deadTree);
                    var q = new fc;
                    c = !M.pinTowns;
                    var p = M.showTowns && c;
                    q.addItem("Hidden", function() {
                        b.view.toggleTownsEx(0)
                    }, !M.showTowns);
                    q.addItem("Icons", function() {
                        b.view.toggleTownsEx(1)
                    }, M.showTowns && c);
                    q.addItem("Pins", function() {
                        b.view.toggleTownsEx(2)
                    }, M.showTowns && !c);
                    q.addSeparator();
                    q.addItem("Uniform", p ? (D = this.view,
                    m(D, D.toggleUniform)) : null).setCheck(M.uniformTowns);
                    q.addItem("Random icons", p ? (D = this.view,
                    m(D, D.randomTowns)) : null);
                    q.addItem("Outline", p ? (D = this.view,
                    m(D, D.outlineTowns)) : null).setCheck(Hb.outline);
                    c = new fc;
                    c.addItem("Rugged", m(this, this.toggleRugged), ea.rugged);
                    c.addSeparator();
                    c.addSubmenu("Towns", q);
                    c.addItem("Roads", (D = this.view,
                    m(D, D.toggleRoads)), M.showRoads);
                    c.addItem("Sea routes", (D = this.view,
                    m(D, D.toggleRoutes)), M.showRoutes);
                    c.addItem("Dangers", (D = this.view,
                    m(D, D.toggleDangers)), M.showDangers);
                    c.addItem("Meadows", (D = this.view,
                    m(D, D.toggleMeadows)), M.showMeadows);
                    c.addSeparator();
                    c.addItem("Individual trees", (D = this.view,
                    m(D, D.toggleIndividualTrees)), M.individualTrees);
                    c.addItem("Front trees", M.individualTrees ? null : (D = this.view,
                    m(D, D.toggleFrontTrees))).setCheck(Ka.frontTrees);
                    c.addItem("Edge trees", (D = this.view,
                    m(D, D.toggleEdgeTrees))).setCheck(M.edgeTrees);
                    c.addItem("Shadows", (D = this.view,
                    m(D, D.toggleTreeShadows))).setCheck(M.treeShadows);
                    c.addItem("Reveal rivers", M.individualTrees ? null : (D = this.view,
                    m(D, D.toggleRevealRivers)), M.revealRivers);
                    c.addSubmenu("Forest type", k);
                    c.addSeparator();
                    c.addItem("Simple rivers", (D = this.view,
                    m(D, D.toggleHollowRivers)), !M.hollowRivers);
                    c.addItem("Shade banks", (D = this.view,
                    m(D, D.toggleRiverBanks)), M.riverBanks);
                    var l = new fc;
                    q = function(a, c) {
                        l.addItem(a, function() {
                            b.view.setLabels(c)
                        }).setCheck(Ib.mode == c)
                    }
                    ;
                    q("Hidden", "hidden");
                    q("Straight", "straight");
                    q("Arced", "arced");
                    q("Curved", "curved");
                    l.addSeparator();
                    l.addItem("Toponymy...", m(this, this.showToponymy));
                    l.addItem("Reroll names", m(this, this.rerollNames));
                    var h = new fc;
                    q = function(a, c) {
                        h.addItem(a, function() {
                            b.view.setHeader(c)
                        }, M.headerDecor == c)
                    }
                    ;
                    q("Hidden", Qc.HIDDEN);
                    q("Plain", Qc.NONE);
                    q("Plaque", Qc.PLAQUE);
                    q("Banner", Qc.BANNER);
                    q = new fc;
                    q.addSubmenu("Header", h);
                    q.addItem("Matte", (D = this.view,
                    m(D, D.toggleMatte))).setCheck(M.showMatte);
                    q.addItem("Compass", (D = this.view,
                    m(D, D.toggleCompass))).setCheck(M.showCompass);
                    q.addItem("Descriptions", (D = this.view,
                    m(D, D.toggleInfo))).setCheck(M.showInfo);
                    q.addItem("Clouds", (D = this.view,
                    m(D, D.toggleClouds))).setCheck(M.showClouds);
                    q.addItem("Light", m(this, this.customizeLight), M.showLight);
                    p = new fc;
                    p.addItem("PNG", (D = this.view,
                    m(D, D.exportPNG)));
                    p.addItem("SVG", function() {
                        Ld.export(b.region, b.view)
                    });
                    Za.menu.addItem("Procgen Arcana", m(this, this.arcana));
                    Za.menu.addSeparator();
                    Za.menu.addItem("New region", m(this, this.newRegion));
                    Za.menu.addItem("Parameters...", m(this, this.showTags));
                    Za.menu.addSubmenu("Hexes", g);
                    Za.menu.addSubmenu("Rotate", a);
                    Za.menu.addSeparator();
                    Za.menu.addItem("Style...", m(this, this.showStyle));
                    Za.menu.addItem("Vantage...", m(this, this.showVantage));
                    Za.menu.addSubmenu("Grid", f);
                    Za.menu.addSubmenu("Details", c);
                    Za.menu.addSubmenu("Labels", l);
                    Za.menu.addSubmenu("Elements", q);
                    Za.menu.addSeparator();
                    Za.menu.addSubmenu("Export as", p);
                    w.showMenu(Za.menu)
                },
                updateContext: function() {
                    Za.context = null;
                    for (var a = new B(this.view.get_mouseX(),this.view.get_mouseY()), b = 0, c = this.region.dcel.faces; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d = d.data;
                        if (d.containsPoint(a)) {
                            d.land && (Za.context = d);
                            break
                        }
                    }
                    return Za.context
                },
                editFeature: function(a) {
                    null != a && a.edit()
                },
                addTown: function(a) {
                    a = this.region.addTown(a);
                    this.view.draw(this.region);
                    this.view.stickers.recreate();
                    a.edit()
                },
                addDanger: function(a) {
                    a = this.region.addDanger(a);
                    this.view.draw(this.region);
                    this.view.stickers.recreate();
                    a.edit()
                },
                reset: function(a, b) {
                    null == b && (b = !0);
                    b && null != this.region && Za.history.push(this.region.bp);
                    u.hide();
                    this.view.stickers.clear();
                    this.region = new ea(a,this);
                    this.view.draw(this.region);
                    this.layout();
                    M.headerDecor == Qc.HIDDEN && u.show(this.region.name)
                },
                newRegion: function() {
                    this.reset(Yd.random())
                },
                resetRegion: function() {
                    this.reset(this.region.bp)
                },
                restoreRegion: function() {
                    var a = Yd.fromURL();
                    this.reset(null != a ? a : Yd.random())
                },
                rerollNames: function() {
                    this.region.rerollNames();
                    M.updateLabels()
                },
                layout: function() {
                    null == this.region && this.restoreRegion();
                    var a = Math.min(this.rWidth / this.region.viewWidth, this.rHeight / this.region.viewHeight);
                    this.view.set_x(this.rWidth / 2);
                    this.view.set_y(this.rHeight / 2);
                    this.view.set_scaleX(this.view.set_scaleY(a));
                    var b = ea.hexRadius * ea.vantage * 2;
                    a = this.region.viewWidth - b;
                    b = this.region.viewHeight - b;
                    this.view.stickers.view.setTo(-a / 2, -b / 2, a, b);
                    this.updateShutters()
                },
                toggleRugged: function() {
                    ea.rugged = !ea.rugged;
                    this.reset(this.region.bp)
                },
                setTilt: function(a) {
                    Da.set("tilt", ea.tiltMode = a);
                    this.region.bp.hexes = a;
                    this.reset(this.region.bp)
                },
                rotate180: function() {
                    this.region.rotate180();
                    this.view.draw(this.region)
                },
                rotate90cw: function() {
                    this.region.rotate90cw();
                    this.view.draw(this.region);
                    this.layout()
                },
                rotate90ccw: function() {
                    this.region.rotate90ccw();
                    this.view.draw(this.region);
                    this.layout()
                },
                flipHorizontal: function() {
                    this.region.flipHorizontal();
                    this.view.draw(this.region)
                },
                flipVertical: function() {
                    this.region.flipVertical();
                    this.view.draw(this.region)
                },
                setShading: function(a) {
                    x.shadingMode = a;
                    this.view.draw(this.region)
                },
                applyStyle: function(a) {
                    x.applyPalette(a, !0);
                    this.view.draw(this.region);
                    this.view.stickers.recreate()
                },
                applyPreset: function(a) {
                    this.applyStyle(kd.fromJSON(Rb.getText(a)))
                },
                showTags: function() {
                    var a = this;
                    if (null == w.findForm(tf)) {
                        var b = null;
                        b = new tf(this.region.bp.tags,function(c) {
                            a.reset(Yd.fromTags(b.getWidth(), b.getHeight(), c));
                            return a.region.bp.tags
                        }
                        );
                        w.showDialog(b).minimizable = !0
                    }
                },
                showToponymy: function() {
                    null == w.findForm(Vf) && (w.showDialog(new Vf(m(this, this.rerollNames))).minimizable = !0)
                },
                showStyle: function() {
                    if (null == w.findForm(Ic)) {
                        var a = new Ic(m(this, this.applyStyle),"Default default B&W bw Antique antique Soft soft Cartoon cartoon October october".split(" "));
                        a.getName = Ic.swatches(null, ["colorBackground", "colorWater", "colorLightWood"]);
                        x.fillForm(a);
                        w.showDialog(a, "Style")
                    }
                },
                showVantage: function() {
                    var a = this;
                    null == w.findForm(dh) && w.showDialog(new dh(function(b) {
                        a.region.setVantage(b);
                        Da.set("vantage", ea.vantage);
                        a.view.draw(a.region);
                        a.layout()
                    }
                    ))
                },
                customizeLight: function() {
                    null == w.findForm(eh) && (Ba.enable(!0),
                    w.showDialog(new eh).minimizable = !0)
                },
                toggleLight: function() {
                    Ba.enable(!M.showLight)
                },
                updateShutters: function() {
                    var a = this.region.viewWidth
                      , b = this.region.viewHeight;
                    this.rWidth / a > this.rHeight / b ? (a = Math.ceil((this.rWidth - a * this.view.get_scaleX()) / 2),
                    this.screena.set_width(a),
                    this.screena.set_height(this.rHeight),
                    this.screenb.set_x(this.rWidth - a),
                    this.screenb.set_y(0),
                    this.screenb.set_width(a),
                    this.screenb.set_height(this.rHeight)) : (a = Math.ceil((this.rHeight - b * this.view.get_scaleY()) / 2),
                    this.screena.set_width(this.rWidth),
                    this.screena.set_height(a),
                    this.screenb.set_x(0),
                    this.screenb.set_y(this.rHeight - a),
                    this.screenb.set_width(this.rWidth),
                    this.screenb.set_height(a))
                },
                arcana: function() {
                    var a = new Wf("https://watabou.github.io/");
                    Sa.navigateToURL(a, "arcana")
                },
                __class__: Za
            });
            var sc = function(a, b) {
                null == b && (b = !1);
                this.g = a.get_graphics();
                b && this.g.clear();
                this.thickness1 = x.normal;
                this.thickness2 = x.ultraThin;
                this.brush = m(this, this.decay);
                this.filling = this.drawing = !1
            };
            h["com.watabou.perilous.mapping.Canvas"] = sc;
            sc.__name__ = "com.watabou.perilous.mapping.Canvas";
            sc.prototype = {
                draw: function(a, b, c) {
                    null == c && (c = 1);
                    this.drawing = !0;
                    this.strokeColor = a;
                    this.strokeAlpha = c;
                    this.thickness1 = this.thickness2 = b;
                    this.delta = 0;
                    this.g.lineStyle(b, a, c)
                },
                useBrush: function(a, b, c, d) {
                    null == d && (d = -1);
                    this.brush = null != a ? a : m(this, this.decay);
                    this.strokeColor = b;
                    this.strokeAlpha = x.alpha;
                    this.thickness1 = c;
                    this.thickness2 = -1 != d ? d : x.ultraThin;
                    this.delta = this.thickness1 - this.thickness2;
                    this.hatchStep = Math.max(this.thickness1, this.thickness2) / x.alpha;
                    this.transparency = x.alpha
                },
                drawThin: function() {
                    4 != x.shadingMode && this.draw(x.black, x.thin)
                },
                drawNormal: function() {
                    4 != x.shadingMode && this.draw(x.black, x.normal)
                },
                drawThick: function() {
                    4 != x.shadingMode && this.draw(x.black, x.thick)
                },
                fill: function(a) {
                    this.filling = !0;
                    this.fillColor = a;
                    this.g.beginFill(a)
                },
                end: function() {
                    this.filling = this.drawing = !1;
                    this.g.endFill()
                },
                line: function(a, b, c, d) {
                    this.g.moveTo(a, b);
                    this.g.lineTo(c, d)
                },
                rect: function(a, b, c, d) {
                    this.g.drawRect(a, b, c, d)
                },
                circle: function(a, b, c) {
                    this.g.drawCircle(a, b, c)
                },
                dashedLine: function(a, b, c) {
                    Rc.dashedLine(this.g, a, b, c)
                },
                polyline: function(a) {
                    Rc.drawPolyline(this.g, a)
                },
                polygon: function(a) {
                    Rc.drawPolygon(this.g, a)
                },
                polygonAt: function(a, b, c) {
                    Rc.drawPolygonAt(this.g, a, b, c)
                },
                multiPolygon: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = 0);
                    if (0 == b && 0 == c)
                        for (var d = 0; d < a.length; ) {
                            var f = a[d];
                            ++d;
                            Rc.drawPolygon(this.g, f)
                        }
                    else
                        for (d = 0; d < a.length; )
                            f = a[d],
                            ++d,
                            Rc.drawPolygonAt(this.g, f, b, c)
                },
                dashedMultiPolygon: function(a, b) {
                    for (var c = 0; c < a.length; ) {
                        var d = a[c];
                        ++c;
                        this.dashedPolygon(d, b)
                    }
                },
                dashedPolyline: function(a, b) {
                    Rc.dashedPolyline(this.g, a, null, b)
                },
                dashedPolygon: function(a, b) {
                    Rc.dashedPolyline(this.g, a.concat([a[0]]), null, b)
                },
                fillArea: function(a, b) {
                    if (!(3 == x.shadingMode || 0 >= this.transparency))
                        if (0 == x.shadingMode) {
                            a = rc.rotateYX(a, b.y, b.x);
                            var c = Vc.rect(a)
                              , d = c.get_bottom()
                              , f = c.get_topLeft();
                            c = new B(f.x,f.y + this.hatchStep);
                            for (var g = new B(c.x + 1,c.y); c.y < d; ) {
                                for (var k = Ce.pierce(a, c, g); 2 <= k.length; ) {
                                    f = k.shift();
                                    var q = -b.y
                                      , p = b.x;
                                    f = new B(f.x * p - f.y * q,f.y * p + f.x * q);
                                    q = k.shift();
                                    p = -b.y;
                                    var h = b.x;
                                    q = new B(q.x * h - q.y * p,q.y * h + q.x * p);
                                    this.shortStroke(q, f)
                                }
                                k = this.hatchStep * (1 + .5 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                                c.y += k;
                                g.y += k
                            }
                        } else
                            this.end(),
                            this.g.beginFill(x.black, 1 == x.shadingMode || 4 == x.shadingMode ? this.transparency : 1),
                            Rc.drawPolygon(this.g, a)
                },
                fillMultiArea: function(a, b) {
                    if (!(3 == x.shadingMode || 0 >= this.transparency))
                        if (0 == x.shadingMode) {
                            for (var c = [], d = 0; d < a.length; ) {
                                var f = a[d];
                                ++d;
                                c.push(rc.rotateYX(f, b.y, b.x))
                            }
                            a = c;
                            d = null;
                            for (c = 0; c < a.length; )
                                f = a[c],
                                ++c,
                                d = null == d ? Vc.rect(f) : d.union(Vc.rect(f));
                            c = d.get_bottom();
                            f = d.get_topLeft();
                            f = new B(f.x,f.y + this.hatchStep);
                            for (d = new B(f.x + 1,f.y); f.y < c; ) {
                                for (var g = Ce.pierceMulti(a, f, d); 2 <= g.length; ) {
                                    var k = g.shift()
                                      , q = -b.y
                                      , p = b.x;
                                    k.setTo(k.x * p - k.y * q, k.y * p + k.x * q);
                                    q = g.shift();
                                    p = -b.y;
                                    var h = b.x;
                                    q.setTo(q.x * h - q.y * p, q.y * h + q.x * p);
                                    this.shortStroke(q, k)
                                }
                                g = this.hatchStep * (1 + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                                f.y += g;
                                d.y += g
                            }
                        } else
                            for (this.end(),
                            this.g.beginFill(x.black, 1 == x.shadingMode || 4 == x.shadingMode ? this.transparency : 1),
                            c = 0; c < a.length; )
                                f = a[c],
                                ++c,
                                Rc.drawPolygon(this.g, f)
                },
                trueStroke: function(a) {
                    var b = Cd.$length(a)
                      , c = 0
                      , d = a[0]
                      , f = a[1]
                      , g = f.subtract(d)
                      , k = g.get_length();
                    g.normalize(1);
                    var q = this.brush(0, b)
                      , p = new B(-g.y,g.x)
                      , l = q / 2;
                    p.x *= l;
                    p.y *= l;
                    var h = [d.add(p)]
                      , n = [d.subtract(p)];
                    l = 2;
                    for (var u = a.length; l < u; ) {
                        q = l++;
                        c += k;
                        d = f;
                        f = a[q];
                        var w = g;
                        g = f.subtract(d);
                        k = g.get_length();
                        g.normalize(1);
                        q = this.brush(c, b);
                        p = w.add(g);
                        p = new B(-p.y,p.x);
                        w = Math.sqrt((1 + (w.x * g.x + w.y * g.y)) / 2);
                        .1 > w && (w = .1);
                        p.normalize(q / 2 / w);
                        h.push(d.add(p));
                        n.unshift(d.subtract(p))
                    }
                    q = this.brush(b, b);
                    p = new B(-g.y,g.x);
                    l = q / 2;
                    p.x *= l;
                    p.y *= l;
                    h.push(f.add(p));
                    n.unshift(f.subtract(p));
                    this.g.endFill();
                    this.g.beginFill(this.strokeColor);
                    Rc.drawPolygon(this.g, h.concat(n));
                    this.g.endFill()
                },
                shortStroke: function(a, b) {
                    var c = this.brush(0, 1)
                      , d = this.brush(1, 1)
                      , f = b.x - a.x
                      , g = b.y - a.y
                      , k = new B(-g,f);
                    k.normalize(c / 2);
                    c = a.add(k);
                    var q = a.subtract(k);
                    k.normalize(d / 2);
                    d = b.add(k);
                    b = b.subtract(k);
                    this.brush == m(this, this.middle) ? (a = new B(a.x + f / 2,a.y + g / 2),
                    f = this.brush(.5, 1),
                    k.normalize(f / 2),
                    f = a.add(k),
                    k = a.subtract(k),
                    k = [c, f, d, b, k, q]) : k = [c, d, b, q];
                    this.g.endFill();
                    this.g.beginFill(this.strokeColor);
                    Rc.drawPolygon(this.g, k)
                },
                decay: function(a, b) {
                    return this.thickness2 + this.delta * (1 - a / b)
                },
                middle: function(a, b) {
                    return this.thickness2 + this.delta * (1 - Math.abs(2 * a / b - 1))
                },
                __class__: sc
            };
            var Db = function() {};
            h["com.watabou.perilous.mapping.sprites.DarkTree"] = Db;
            Db.__name__ = "com.watabou.perilous.mapping.sprites.DarkTree";
            Db.proto = function() {
                var a = new Ye("darkTree",Db.draw);
                a.getColor = function() {
                    return x.darkWood
                }
                ;
                a.getDist = function() {
                    return Db.max_width * x.clutterScale
                }
                ;
                a.getTrunk = function() {
                    return Db.min_trunk
                }
                ;
                a.getBump = Db.getBump;
                a.getCloud = Db.getCloud;
                a.getFold = Db.getFold;
                return a
            }
            ;
            Db.draw = function(a) {
                var b = Db.min_trunk + (Db.max_trunk - Db.min_trunk) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)
                  , c = Db.min_width + (Db.max_width - Db.min_width) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)
                  , d = Db.min_height + (Db.max_height - Db.min_height) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                b *= x.clutterScale;
                c *= x.clutterScale;
                d *= x.clutterScale;
                a = new sc(a);
                Ye.drawShadow(a, -c / 2, d / 2);
                var f = $b.lerp(x.darkWood, x.black, x.alpha);
                a.g.lineStyle(x.thin, f);
                a.line(0, 0, 0, -b);
                a.end();
                a.drawThin();
                a.fill(x.darkWood);
                b = [new B(0,-b - d), new B(2 * c / 3,-b), new B(0,-b), new B(2 * -c / 3,-b)];
                b = jc.render(b, !0, 2, [b[0]]);
                a.polygon(b);
                a.useBrush(null, x.black, x.thin);
                for (c = 0; c < b.length; )
                    d = b[c],
                    ++c,
                    0 > d.x && (d.x *= -.3);
                a.fillArea(b, Db.hatching)
            }
            ;
            Db.getBump = function() {
                return Db.min_width * (1 <= x.clutterScale ? x.clutterScale : Math.sqrt(x.clutterScale))
            }
            ;
            Db.getCloud = function(a) {
                return Db.confBloat(a, 1.5)
            }
            ;
            Db.getFold = function(a) {
                return Db.createConfTop(a, 1.2)
            }
            ;
            Db.confBloat = function(a, b) {
                for (var c = 2 * Db.getBump(), d = [], f = a.length, g = a[f - 1], k = 0; k < f; ) {
                    var q = k++
                      , p = g;
                    g = a[q];
                    q = g.x - p.x;
                    if (0 < q) {
                        q *= b;
                        var l = sa.lerp(p, g);
                        l.y -= q;
                        var h = sa.lerp(p, l);
                        h.y -= .1 * q;
                        var n = sa.lerp(g, l);
                        n.y -= .1 * q;
                        d.push(p);
                        d.push(h);
                        d.push(l);
                        d.push(n)
                    } else
                        for (p = Zd.extrudeEx(p, g, c, .1),
                        q = 0; q < p.length; )
                            l = p[q],
                            ++q,
                            d.push(l)
                }
                return d
            }
            ;
            Db.createConfTop = function(a, b) {
                for (var c = [], d = a[0], f = 1, g = a.length; f < g; ) {
                    var k = f++
                      , q = d;
                    d = a[k];
                    k = (d.x - q.x) * b;
                    var p = sa.lerp(q, d);
                    p.y -= k;
                    var l = sa.lerp(q, p);
                    l.y -= .1 * k;
                    var h = sa.lerp(d, p);
                    h.y -= .1 * k;
                    c.push(q);
                    c.push(l);
                    c.push(p);
                    c.push(h)
                }
                c.push(d);
                return c
            }
            ;
            var l = function() {};
            h["com.watabou.utils.Random"] = l;
            l.__name__ = "com.watabou.utils.Random";
            l.reset = function(a) {
                null == a && (a = -1);
                l.seed = -1 != a ? a : (new Date).getTime() % 2147483647 | 0
            }
            ;
            l.save = function() {
                return l.saved = l.seed
            }
            ;
            l.restore = function(a) {
                null == a && (a = -1);
                -1 != a ? l.seed = a : -1 != l.saved && (l.seed = l.saved,
                l.saved = -1)
            }
            ;
            l.preserve = function(a) {
                var b = l.save();
                a = a();
                l.restore(b);
                return a
            }
            ;
            l.run = function(a, b, c) {
                null == c && (c = !0);
                null == a && (a = -1);
                var d = l.save();
                -1 != a && l.reset(a);
                a = b();
                l.restore(d);
                c && (l.seed = 48271 * l.seed % 2147483647 | 0);
                return a
            }
            ;
            l.float = function() {
                return (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647
            }
            ;
            var x = function() {};
            h["com.watabou.perilous.mapping.Style"] = x;
            x.__name__ = "com.watabou.perilous.mapping.Style";
            x.getFormat = function(a, b) {
                null == b && (b = 1);
                a = kd.font2format(a);
                null == a && (a = new Ae);
                a.color = x.textColor;
                1 != b && (a.size = Math.round(a.size * b));
                return a
            }
            ;
            x.scaleFormat = function(a, b) {
                a = a.clone();
                a.size = Math.round(b * a.size);
                return a
            }
            ;
            x.applyPalette = function(a, b) {
                null == b && (b = !1);
                x.black = a.getColor("colorForeground", 5062454);
                x.earth = a.getColor("colorBackground", 15460575);
                x.water = a.getColor("colorWater", x.earth);
                x.shadingMode = x.shadings.indexOf(a.getString("enumShading", "Hatching"));
                x.alpha = a.getFloat("floatAlpha", .5);
                x.landBorderColor = a.getColor("colorLandShadow", 6708311);
                x.landBorderAlpha = a.getFloat("alphaLandShadow", .2);
                x.landBorderWidth = a.getFloat("widthLandShadow", .666);
                x.lightWood = a.getColor("colorLightWood", x.earth);
                x.darkWood = a.getColor("colorDarkWood", x.earth);
                x.shallow = a.getColor("colorShallow", x.water);
                x.rivers = a.getColor("colorRivers", x.black);
                x.contours = a.getColor("colorContours", x.black);
                x.routes = a.getColor("colorRoutes", x.black);
                x.mountain = a.getColor("colorMountain", x.earth);
                x.danger = a.getColor("colorDanger", x.earth);
                x.walls = a.getColor("colorWalls", x.earth);
                x.roofs = a.getColor("colorRoofs", x.earth);
                x.flags = a.getColor("colorFlags", x.black);
                x.shallowEdge = a.getFloat("shallowEdge", .666);
                x.shallowSize = a.getFloat("shallowSize", .4);
                x.bandsNumber = a.getInt("bandsNumber", 1);
                x.townScale = a.getFloat("townScale", 1);
                x.dangerScale = a.getFloat("dangerScale", 1);
                x.textColor = a.getColor("textColor", x.black);
                x.outlineColor = a.getColor("outlineColor", x.earth);
                x.compass = a.getColor("colorCompass", x.earth);
                x.clouds = a.getColor("colorClouds", 16777215);
                x.banner = a.getColor("colorBanners", x.earth);
                x.matte = a.getColor("colorMatte", x.earth);
                x.ruggedMountains = a.getBool("ruggedMountains", !0);
                x.treesDensity = a.getFloat("treesDensity", .2);
                x.treesRegularity = a.getFloat("treesRegularity", .5);
                x.clutterScale = a.getFloat("clutterScale", .7);
                x.fontTown = a.getFont("fontTown", x.fontTown);
                x.fontDanger = a.getFont("fontDanger", x.fontDanger);
                x.fontArea = a.getFont("fontArea", x.fontArea);
                x.fontTitle = a.getFont("fontTitle", x.fontArea);
                x.ultraThin = a.getFloat("ultraThin", .4);
                x.thin = a.getFloat("thin", .8);
                x.normal = a.getFloat("normal", 1.4);
                x.thick = a.getFloat("thick", 3);
                x.river = a.getFloat("river", x.thick);
                x.formatSticker = x.getFormat(x.fontSticker);
                x.formatHead = x.scaleFormat(x.formatSticker, 1.25);
                x.formatTown = x.getFormat(x.fontTown);
                x.formatDanger = x.getFormat(x.fontDanger);
                x.formatArea = x.getFormat(x.fontArea);
                x.formatTitle = x.getFormat(x.fontTitle);
                x.formatTown.align = x.formatDanger.align = 0;
                x.landShadeColor = $b.lerp(x.earth, x.landBorderColor, x.landBorderAlpha);
                b && Da.set("palette", a.data())
            }
            ;
            x.restorePalette = function() {
                var a = Da.get("palette");
                null != a ? x.applyPalette(kd.fromData(a)) : (x.formatSticker = x.getFormat(x.fontSticker),
                x.formatHead = x.scaleFormat(x.formatSticker, 1.25),
                x.formatTown = x.getFormat(x.fontTown),
                x.formatDanger = x.getFormat(x.fontDanger),
                x.formatArea = x.getFormat(x.fontArea),
                x.formatTitle = x.getFormat(x.fontTitle),
                x.formatTown.align = x.formatDanger.align = 0,
                x.landShadeColor = $b.lerp(x.earth, x.landBorderColor, x.landBorderAlpha))
            }
            ;
            x.fillForm = function(a) {
                a.setMaxTabs(4);
                a.addTab("Basic");
                a.addColor("colorForeground", "Linework", x.black);
                a.addColor("colorBackground", "Earth", x.earth);
                a.addColor("colorWater", "Water", x.water);
                a.addColor("colorRivers", "Rivers", x.rivers);
                a.addEnum("enumShading", "Shading", x.shadings, x.shadings[x.shadingMode]);
                a.addFloat("floatAlpha", "Density", x.alpha, 0, 1);
                a.addTab("Land");
                a.addColor("colorLandShadow", "Inner shadow", x.landBorderColor);
                a.addFloat("alphaLandShadow", "Opacity", x.landBorderAlpha, 0, 1);
                a.addFloat("widthLandShadow", "Width", x.landBorderWidth, 0, 1);
                a.addTab("Water");
                a.addColor("colorRoutes", "Sea route color", x.routes);
                a.addColor("colorContours", "Contour color", x.contours);
                a.addColor("colorShallow", "Shallow color", x.shallow);
                a.addFloat("shallowEdge", "Shallow contour", x.shallowEdge, 0, 1);
                a.addFloat("shallowSize", "Shallow width", x.shallowSize, 0, 4);
                a.addInt("bandsNumber", "No. of bands", x.bandsNumber, 0, 5);
                a.addTab("Terrain");
                a.addColor("colorMountain", "Mountain", x.mountain);
                a.addCheck("ruggedMountains", "Jagged", x.ruggedMountains);
                a.addColor("colorLightWood", "Light wood", x.lightWood);
                a.addColor("colorDarkWood", "Dark wood", x.darkWood);
                a.addFloat("treesDensity", "Trees density", x.treesDensity, .1, 1);
                a.addFloat("treesRegularity", "Trees regularity", x.treesRegularity, .1, 1);
                a.addFloat("clutterScale", "Clutter scale", x.clutterScale, .5, 2);
                a.addTab("Sites");
                a.addColor("colorDanger", "Danger", x.danger);
                a.addColor("colorWalls", "Town walls", x.walls);
                a.addColor("colorRoofs", "Town roofs", x.roofs);
                a.addColor("colorFlags", "Flags", x.flags);
                a.addFloat("townScale", "Town scale", x.townScale, .1, 2);
                a.addFloat("dangerScale", "Danger scale", x.dangerScale, .1, 2);
                a.addTab("Elements");
                a.addColor("textColor", "Labels", x.textColor);
                a.addColor("outlineColor", "Outline", x.outlineColor);
                a.addColor("colorCompass", "Compass", x.compass);
                a.addColor("colorClouds", "Clouds", x.clouds);
                a.addColor("colorBanners", "Banners", x.banner);
                a.addColor("colorMatte", "Matte", x.matte);
                a.addTab("Strokes");
                a.addFloat("ultraThin", "Ultra-thin", x.ultraThin, .1, 8);
                a.addFloat("thin", "Thin", x.thin, .1, 8);
                a.addFloat("normal", "Normal", x.normal, .1, 8);
                a.addFloat("thick", "Thick", x.thick, .1, 8);
                a.addFloat("river", "Rivers", x.river, .1, 8);
                a.addTab("Text");
                a.addFont("fontTown", "Towns", x.fontTown, null, "def_font");
                a.addFont("fontDanger", "Dangers", x.fontDanger, null, "def_font");
                a.addFont("fontArea", "Terrain", x.fontArea, null, "def_font");
                a.addFont("fontTitle", "Header", x.fontTitle, null, "def_font");
                a.addFont("fontSticker", "Stickers", x.fontSticker, null, "def_font")
            }
            ;
            var Ye = function(a, b) {
                this.id = a;
                this.draw = b
            };
            h["com.watabou.perilous.mapping.sprites.TreeType"] = Ye;
            Ye.__name__ = "com.watabou.perilous.mapping.sprites.TreeType";
            Ye.drawShadow = function(a, b, c) {
                if (M.treeShadows)
                    switch (x.shadingMode) {
                    case 0:
                        a.drawThin();
                        b = new B(b);
                        c = new B(c);
                        var d = [];
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        d.push(5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        a.dashedLine(b, c, d);
                        break;
                    case 2:
                        a.drawThin();
                        a.line(b, 0, c, 0);
                        break;
                    case 1:
                    case 4:
                        a.draw(x.black, x.thin, x.alpha),
                        a.line(b, 0, c, 0)
                    }
            }
            ;
            Ye.prototype = {
                getSprite: function() {
                    var a = this
                      , b = new T;
                    md.draw(b.get_graphics(), this.id, null, function() {
                        a.draw(b)
                    });
                    return b
                },
                __class__: Ye
            };
            var Qc = N["com.watabou.perilous.mapping.elements.Decoration"] = {
                __ename__: "com.watabou.perilous.mapping.elements.Decoration",
                __constructs__: null,
                PLAQUE: {
                    _hx_name: "PLAQUE",
                    _hx_index: 0,
                    __enum__: "com.watabou.perilous.mapping.elements.Decoration",
                    toString: r
                },
                BANNER: {
                    _hx_name: "BANNER",
                    _hx_index: 1,
                    __enum__: "com.watabou.perilous.mapping.elements.Decoration",
                    toString: r
                },
                NONE: {
                    _hx_name: "NONE",
                    _hx_index: 2,
                    __enum__: "com.watabou.perilous.mapping.elements.Decoration",
                    toString: r
                },
                HIDDEN: {
                    _hx_name: "HIDDEN",
                    _hx_index: 3,
                    __enum__: "com.watabou.perilous.mapping.elements.Decoration",
                    toString: r
                }
            };
            Qc.__constructs__ = [Qc.PLAQUE, Qc.BANNER, Qc.NONE, Qc.HIDDEN];
            Qc.__empty_constructs__ = [Qc.PLAQUE, Qc.BANNER, Qc.NONE, Qc.HIDDEN];
            var M = function() {
                M.inst = this;
                T.call(this);
                M.gridMode = Da.get("grid", 0);
                M.oceanTiles = Da.get("oceanTiles", !1);
                M.showNumbers = Da.get("hexNumbers", !1);
                M.pinTowns = Da.get("pinTowns", !1);
                M.uniformTowns = Da.get("uniformTowns", !1);
                M.showRoutes = Da.get("seaRoutes", !1);
                Hb.outline = Da.get("outlineTowns", !0);
                M.individualTrees = Da.get("individualTrees", !1);
                M.edgeTrees = Da.get("edgeTrees", !0);
                M.treeShadows = Da.get("treeShadows", !1);
                M.revealRivers = Da.get("revealRivers", !0);
                M.hollowRivers = Da.get("hollowRivers", !0);
                M.riverBanks = Da.get("riverBanks", !0);
                Ka.frontTrees = Da.get("frontTrees", !0);
                Ib.mode = Da.get("labels", "arced");
                M.headerDecor = z.createEnum(Qc, Da.get("header", "NONE"), null);
                M.showMatte = Da.get("matte", !0);
                M.showCompass = Da.get("compass", !0);
                M.showInfo = Da.get("info", !0);
                M.showLight = Da.get("spotlight", !1);
                this.grid = new T;
                this.addChild(this.grid);
                this.numbers = new ie(this);
                this.water = new $d;
                this.addChild(this.water);
                this.land = new T;
                this.addChild(this.land);
                this.landMask = new T;
                this.addChild(this.landMask);
                this.landOver = new T;
                this.addChild(this.landOver);
                this.roads = new T;
                this.roads.set_visible(M.showRoads);
                this.addChild(this.roads);
                this.objects = new T;
                this.addChild(this.objects);
                this.labels = new Ib;
                this.addChild(this.labels);
                this.spotlight = new Ba;
                this.spotlight.set_visible(M.showLight);
                this.addChild(this.spotlight);
                this.clouds = new fi;
                this.addChild(this.clouds);
                this.compass = new La(100);
                this.compass.set_visible(M.showCompass);
                this.addChild(this.compass);
                this.stickers = new Xf;
                this.addChild(this.stickers);
                this.matte = new gi;
                this.matte.set_visible(M.showMatte);
                this.addChild(this.matte);
                this.header = new uf;
                this.addChild(this.header);
                this.setGrid(M.gridMode)
            };
            h["com.watabou.perilous.mapping.MapView"] = M;
            M.__name__ = "com.watabou.perilous.mapping.MapView";
            M.updateMap = function() {
                M.inst.draw(M.inst.region)
            }
            ;
            M.updateNetwork = function() {
                M.inst.updateRoads()
            }
            ;
            M.updateNavigation = function() {
                M.showRoutes && M.inst.water.drawRoutes(M.inst.region)
            }
            ;
            M.updateSprites = function() {
                M.inst.updateObjects()
            }
            ;
            M.updateLabels = function(a) {
                M.inst.updateLabelsInst(a)
            }
            ;
            M.updateNumbers = function() {
                M.inst.numbers.reset(M.inst.region)
            }
            ;
            M.updateGrid = function() {
                M.inst.drawGrid()
            }
            ;
            M.getGridColor = function() {
                return Da.get("useInkColor", !1) ? x.black : Da.get("numbersColor", 52479)
            }
            ;
            M.__super__ = T;
            M.prototype = v(T.prototype, {
                draw: function(a) {
                    a != this.region && (this.compass.manual = !1,
                    this.region = a);
                    this.stage.set_color(x.water);
                    this.maskNeeded = !a.noWater && x.landBorderColor != x.earth && 0 < x.landBorderAlpha && 0 < x.landBorderWidth;
                    this.updateWater();
                    this.updateLand();
                    this.updateRoads();
                    this.updateObjects();
                    M.updateLabels();
                    this.drawGrid();
                    this.clouds.update(a);
                    this.matte.update(a);
                    M.showCompass && this.updateCompass();
                    M.headerDecor != Qc.HIDDEN && (this.header.update(M.headerDecor),
                    this.autoPlaceHeader());
                    this.numbers.reset(a);
                    Ba.update(a)
                },
                updateWater: function() {
                    this.water.draw(this.region, this.compass.rhumbs)
                },
                updateLand: function() {
                    this.land.set_visible(this.landMask.set_visible(this.maskNeeded));
                    $k.draw(this.region, this.land, this.landOver, this.maskNeeded ? this.landMask : null)
                },
                updateRoads: function() {
                    var a = new sc(this.roads,!0)
                      , b = [x.normal, 3 * x.normal];
                    a.draw(x.flags, x.normal);
                    for (var c = 0, d = this.region.islands; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        var g = 0;
                        for (f = f.network.getSegments(Hb.getBaseline()); g < f.length; ) {
                            var k = f[g];
                            ++g;
                            a.dashedPolyline(jc.render(k, !1, 2), b)
                        }
                    }
                },
                updateObjects: function() {
                    this.objects.get_graphics().clear();
                    this.objects.removeChildren();
                    this.sprites = [];
                    this.drawMountains();
                    this.drawContent();
                    this.sprites.sort(function(a, b) {
                        a = a.get_y() - b.get_y();
                        return 0 == a ? 0 : 0 > a ? -1 : 1
                    });
                    for (var a = 0, b = this.sprites; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        this.objects.addChild(c)
                    }
                },
                drawMountains: function() {
                    for (var a = this.sprites, b = cc.draw(this.region), c = 0; c < b.length; ) {
                        var d = b[c];
                        ++c;
                        a.push(d)
                    }
                },
                drawContent: function() {
                    md.reset();
                    for (var a = 0, b = this.region.dcel.faces; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        var d = !1
                          , f = c.data
                          , g = f.site;
                        if (null != g)
                            switch (xa.getClass(g)) {
                            case vf:
                                this.drawDungeon(g);
                                d = !0;
                                break;
                            case bd:
                                this.drawTown(g),
                                d = !0
                            }
                        else
                            switch (g = f.terrain,
                            xa.getClass(g)) {
                            case Ee:
                                d = !0;
                                this.drawDesert(g);
                                break;
                            case fh:
                                this.drawRocks(g);
                                break;
                            case Fe:
                                d = !0;
                                this.drawSwamp(g);
                                break;
                            case Ub:
                                M.individualTrees && Ka.drawWood(g, this.sprites);
                                break;
                            default:
                                f.land && !f.mountain && (d = !0,
                                this.drawMeadow(c.data))
                            }
                        d && M.edgeTrees && Ka.drawOrphans(c, this.sprites)
                    }
                    if (!M.individualTrees) {
                        a = 0;
                        for (b = this.region.islands; a < b.length; )
                            c = b[a],
                            ++a,
                            Ka.drawUngroupForests(c, this.sprites);
                        Ka.frontTrees && Ka.drawFront(this.region, this.sprites)
                    }
                },
                drawRocks: function(a) {
                    var b = new sc(this.landOver)
                      , c = a.cell.center
                      , d = 0;
                    for (a = a.rocks; d < a.length; ) {
                        var f = a[d];
                        ++d;
                        b.drawThick();
                        b.fill(x.landShadeColor);
                        b.polygonAt(f, c.x, c.y);
                        b.end()
                    }
                },
                drawSwamp: function(a) {
                    var b = 0;
                    for (a = je.some(a.cell, 16, 5, 11); b < a.length; ) {
                        var c = a[b];
                        ++b;
                        var d = cd.reed();
                        d.set_x(c.x);
                        d.set_y(c.y);
                        this.sprites.push(d)
                    }
                },
                drawDesert: function(a) {
                    a = je.get(a.cell, ea.hexRadius, .5);
                    for (var b = 0; b < a.length; ) {
                        var c = a[b];
                        ++b;
                        var d = new hi;
                        d.set_x(c.x);
                        d.set_y(c.y);
                        this.sprites.push(d)
                    }
                },
                drawTown: function(a) {
                    var b = M.pinTowns ? Hb.pin(a) : Hb.icon(a);
                    b.set_visible(M.showTowns);
                    var c = a.cell.center;
                    a = a.getOffset();
                    b.set_x(c.x + a.x);
                    b.set_y(c.y + a.y * ea.vantage + Hb.getBaseline());
                    this.sprites.push(b)
                },
                drawDungeon: function(a) {
                    var b = new Sc;
                    b.set_visible(M.showDangers);
                    b.set_x(a.cell.center.x);
                    b.set_y(a.cell.center.y);
                    this.sprites.push(b)
                },
                drawMeadow: function(a) {
                    var b = 0;
                    for (a = je.some(a, 12, 0, 4); b < a.length; ) {
                        var c = a[b];
                        ++b;
                        var d = cd.grass();
                        d.set_visible(M.showMeadows);
                        d.set_x(c.x);
                        d.set_y(c.y);
                        this.sprites.push(d)
                    }
                },
                drawGrid: function() {
                    this.grid.set_alpha(Da.get("gridAlpha", .4));
                    this.grid.get_graphics().clear();
                    var a = new sc(this.grid);
                    a.draw(M.getGridColor(), x.thin);
                    var b = []
                      , c = [10, 10];
                    if (M.revealRivers || M.individualTrees)
                        for (var d = 0, f = this.region.dcel.edges; d < f.length; ) {
                            var g = f[d];
                            ++d;
                            g.data == Ed.NONE && -1 == b.indexOf(g.twin) && (M.oceanTiles || g.face.data.land) && (a.dashedLine(g.origin.point, g.next.origin.point, c),
                            b.push(g))
                        }
                    else
                        for (d = 0,
                        f = this.region.dcel.edges; d < f.length; )
                            g = f[d],
                            ++d,
                            g.data == Ed.NONE ? -1 == b.indexOf(g.twin) && (M.oceanTiles || g.face.data.land) && (a.dashedLine(g.origin.point, g.next.origin.point, c),
                            b.push(g)) : null != g.data.river && -1 == b.indexOf(g.twin) && g.face.data.terrain instanceof Ub && g.twin.face.data.terrain instanceof Ub && (M.oceanTiles || g.face.data.land) && (a.dashedLine(g.origin.point, g.next.origin.point, c),
                            b.push(g))
                },
                addNumbers: function() {
                    this.addChildAt(this.numbers, this.getChildIndex(this.objects) + 1)
                },
                setGrid: function(a) {
                    Da.set("grid", M.gridMode = a);
                    this.removeChild(this.grid);
                    switch (a) {
                    case 1:
                        this.addChildAt(this.grid, 5);
                        break;
                    case 2:
                        this.addChildAt(this.grid, 6)
                    }
                    this.numbers.update(this.region)
                },
                toggleGrid: function() {
                    0 == M.gridMode ? this.setGrid(1) : this.setGrid(0)
                },
                toggleOceanTiles: function() {
                    0 == M.gridMode && this.setGrid(1);
                    Da.set("oceanTiles", M.oceanTiles = !M.oceanTiles);
                    this.drawGrid();
                    M.updateNumbers()
                },
                toggleNumbers: function() {
                    0 == M.gridMode ? (Da.set("hexNumbers", M.showNumbers = !0),
                    this.setGrid(1)) : (Da.set("hexNumbers", M.showNumbers = !M.showNumbers),
                    this.numbers.update(this.region))
                },
                toggleMatte: function() {
                    Da.set("matte", this.matte.set_visible(M.showMatte = !M.showMatte));
                    this.labels.update(this.region);
                    M.headerDecor != Qc.HIDDEN && this.autoPlaceHeader()
                },
                toggleTowns: function() {
                    M.showTowns = !M.showTowns;
                    this.updateVisibility();
                    this.updateLabelsInst()
                },
                togglePinTowns: function() {
                    Da.set("pinTowns", M.pinTowns = !M.pinTowns);
                    this.updateObjects();
                    this.labels.update(this.region)
                },
                toggleTownsEx: function(a) {
                    switch (a) {
                    case 0:
                        M.showTowns && this.toggleTowns();
                        break;
                    case 1:
                        M.showTowns || this.toggleTowns();
                        M.pinTowns && this.togglePinTowns();
                        break;
                    case 2:
                        M.showTowns || this.toggleTowns(),
                        M.pinTowns || this.togglePinTowns()
                    }
                    a = 0;
                    for (var b = this.region.islands; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.network.resetSegments()
                    }
                    this.updateRoads()
                },
                randomTowns: function() {
                    if (M.uniformTowns)
                        Hb.commonDesign = new wf;
                    else
                        for (var a = 0, b = this.region.islands; a < b.length; ) {
                            var c = b[a];
                            ++a;
                            var d = 0;
                            for (c = c.towns; d < c.length; ) {
                                var f = c[d];
                                ++d;
                                f.design = new wf
                            }
                        }
                    M.showTowns || this.toggleTowns();
                    M.pinTowns ? this.togglePinTowns() : this.updateObjects()
                },
                toggleUniform: function() {
                    Da.set("uniformTowns", M.uniformTowns = !M.uniformTowns);
                    this.updateObjects()
                },
                outlineTowns: function() {
                    Da.set("outlineTowns", Hb.outline = !Hb.outline);
                    this.updateObjects()
                },
                toggleDangers: function() {
                    M.showDangers = !M.showDangers;
                    this.updateVisibility();
                    this.updateLabelsInst()
                },
                toggleRoads: function() {
                    this.roads.set_visible(M.showRoads = !M.showRoads)
                },
                toggleRoutes: function() {
                    this.water.routes.set_visible(M.showRoutes = !M.showRoutes) && this.water.drawRoutes(this.region);
                    Da.set("seaRoutes", M.showRoutes)
                },
                toggleMeadows: function() {
                    M.showMeadows = !M.showMeadows;
                    this.updateVisibility()
                },
                toggleLabels: function() {
                    var a = Ib.MODES
                      , b = a.indexOf(Ib.mode);
                    0 > b && (b = 0);
                    this.setLabels(a[(b + 1) % a.length])
                },
                setLabels: function(a) {
                    Da.set("labels", Ib.mode = a);
                    Ib.mode != Ib.HIDDEN ? (this.labels.set_visible(!0),
                    this.labels.update(this.region)) : this.labels.set_visible(!1)
                },
                toggleCompass: function() {
                    (M.showCompass = !M.showCompass) ? (this.compass.manual = !1,
                    this.compass.set_visible(!0),
                    this.updateCompass()) : this.compass.set_visible(!1);
                    Da.set("compass", M.showCompass);
                    M.headerDecor != Qc.HIDDEN && this.autoPlaceHeader()
                },
                customizeCompass: function() {
                    M.showCompass || this.toggleCompass();
                    this.compass.customize()
                },
                setHeader: function(a) {
                    this.header.manual = !1;
                    this.header.update(M.headerDecor = a);
                    this.autoPlaceHeader();
                    Da.set("header", N[a.__enum__].__constructs__[a._hx_index]._hx_name)
                },
                toggleInfo: function() {
                    Da.set("info", M.showInfo = !M.showInfo);
                    this.stickers.recreate()
                },
                toggleClouds: function() {
                    M.showClouds = !M.showClouds;
                    this.clouds.update(this.region)
                },
                toggleIndividualTrees: function() {
                    M.individualTrees = !M.individualTrees;
                    Da.set("individualTrees", M.individualTrees);
                    this.updateLand();
                    this.updateObjects();
                    M.revealRivers || this.drawGrid()
                },
                toggleFrontTrees: function() {
                    Da.set("frontTrees", Ka.frontTrees = !Ka.frontTrees);
                    this.updateObjects()
                },
                toggleEdgeTrees: function() {
                    Da.set("edgeTrees", M.edgeTrees = !M.edgeTrees);
                    this.updateObjects()
                },
                toggleTreeShadows: function() {
                    M.treeShadows = !M.treeShadows;
                    Da.set("treeShadows", M.treeShadows);
                    md.reset("lightTree");
                    md.reset("darkTree");
                    md.reset("deadTree");
                    (M.individualTrees || M.edgeTrees) && this.updateObjects();
                    M.individualTrees || this.updateLand()
                },
                toggleRevealRivers: function() {
                    M.revealRivers = !M.revealRivers;
                    Da.set("revealRivers", M.revealRivers);
                    for (var a = 0, b = this.region.islands; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.forests = null
                    }
                    this.updateLand();
                    this.drawGrid()
                },
                toggleHollowRivers: function() {
                    Da.set("hollowRivers", M.hollowRivers = !M.hollowRivers);
                    this.updateLand()
                },
                toggleRiverBanks: function() {
                    Da.set("riverBanks", M.riverBanks = !M.riverBanks);
                    this.updateLand();
                    Ka.frontTrees && this.updateObjects()
                },
                setForestType: function(a) {
                    Ka.type = a;
                    M.individualTrees ? this.updateObjects() : (this.updateLand(),
                    (M.edgeTrees || Ka.frontTrees) && this.updateObjects())
                },
                toggleForestType: function() {
                    this.setForestType(null == Ka.type ? Ka.lightTree : Ka.type == Ka.lightTree ? Ka.darkTree : Ka.type == Ka.darkTree ? Ka.deadTree : null)
                },
                updateCompass: function() {
                    var a = ea.hexRadius
                      , b = -this.region.viewWidth / 2 + a
                      , c = -this.region.viewHeight / 2 + a
                      , d = this.region.viewWidth / 2 - a;
                    a = this.region.viewHeight / 2 - a;
                    this.compass.update(100 * Math.sqrt((this.region.width + this.region.height) / 2 / 1200));
                    this.compass.manual || this.compass.place(this.region, b, c, d, a)
                },
                autoPlaceHeader: function() {
                    if (!this.header.manual) {
                        var a = this.region.viewWidth
                          , b = this.region.viewHeight
                          , c = new oa(0,0,a,b);
                        c.offset(-a / 2, -b / 2);
                        M.showMatte && c.inflate(-ea.hexRadius, -ea.hexRadius);
                        this.header.place(this.region, c, M.showCompass ? this.compass.getBounds(this) : null)
                    }
                },
                updateVisibility: function() {
                    for (var a = 0, b = this.sprites; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c instanceof Hb ? c.set_visible(M.showTowns) : c instanceof Sc ? c.set_visible(M.showDangers) : c instanceof cd && xa.__cast(c, cd).meadow && c.set_visible(M.showMeadows)
                    }
                },
                exportPNG: function() {
                    this.labels.exportAsPNG();
                    this.header.exportAsPNG();
                    var a = Math.sqrt(16777215 / (this.region.width * this.region.height))
                      , b = this.region.width * a | 0
                      , c = this.region.height * a * ea.vantage | 0
                      , d = new Yb(b,c,!1,x.water)
                      , f = new ta;
                    f.scale(a, a);
                    f.translate(b / 2, c / 2);
                    d.draw(this, f, null, null, null, !0);
                    M.updateLabels();
                    Be.savePNG(d, this.region.name)
                },
                updateLabelsInst: function(a) {
                    null != a ? this.stickers.update(a) : this.stickers.recreate();
                    Ib.mode != Ib.HIDDEN ? (this.labels.update(this.region),
                    this.labels.set_visible(!0)) : (this.labels.isDirty = !0,
                    this.labels.set_visible(!1));
                    M.headerDecor != Qc.HIDDEN && (this.header.update(M.headerDecor),
                    this.autoPlaceHeader())
                },
                __class__: M
            });
            var Zd = function() {};
            h["com.watabou.perilous.utils.Bloater"] = Zd;
            Zd.__name__ = "com.watabou.perilous.utils.Bloater";
            Zd.doBloat = function(a, b, c) {
                null == c && (c = .1);
                for (var d = a.length, f = [], g = 0; g < d; ) {
                    var k = g++;
                    k = Zd.extrudeEx(a[k], a[(k + 1) % d], b, c);
                    for (var q = 0; q < k.length; ) {
                        var p = k[q];
                        ++q;
                        f.push(p)
                    }
                }
                return f
            }
            ;
            Zd.doBloatOpen = function(a, b, c) {
                null == c && (c = .1);
                for (var d = [], f = 1, g = a.length; f < g; ) {
                    var k = f++;
                    k = Zd.extrudeEx(a[k - 1], a[k], b, c);
                    for (var q = 0; q < k.length; ) {
                        var p = k[q];
                        ++q;
                        d.push(p)
                    }
                }
                return d
            }
            ;
            Zd.extrude = function(a, b, c, d) {
                var f = a.subtract(b);
                c = f.get_length() / c;
                return c > d ? (f.setTo(-f.y, f.x),
                d = .5 * (1 > c ? c : 1),
                f.x *= d,
                f.y *= d,
                a = sa.lerp(a, b),
                a.x += f.x,
                a.y += f.y,
                a) : null
            }
            ;
            Zd.extrudeEx = function(a, b, c, d) {
                var f = Zd.extrude(a, b, c, d);
                return null == f ? [a] : Zd.extrudeEx(a, f, c, d).concat(Zd.extrudeEx(f, b, c, d))
            }
            ;
            var Ze = function() {};
            h["com.watabou.perilous.mapping.sprites.DeadTree"] = Ze;
            Ze.__name__ = "com.watabou.perilous.mapping.sprites.DeadTree";
            Ze.proto = function() {
                return new Ye("deadTree",Ze.draw)
            }
            ;
            Ze.draw = function(a) {
                var b = Ze.min_height + (Ze.max_height - Ze.min_height) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)
                  , c = new sc(a);
                Ye.drawShadow(c, -b / 6, b / 3);
                var d = null;
                d = function(a, g, k) {
                    if (5 > k) {
                        var f = a.add(B.polar(k, g))
                          , p = x.ultraThin;
                        k /= b;
                        null == k && (k = .5);
                        c.useBrush(null, x.black, p + (x.normal - p) * k, x.ultraThin);
                        c.shortStroke(a, f)
                    } else {
                        f = k * (.2 + .2 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                        var h = k - f
                          , u = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3
                          , n = 1 - u;
                        f = a.add(B.polar(f, g));
                        p = x.ultraThin;
                        k /= b;
                        null == k && (k = .5);
                        var w = x.ultraThin
                          , r = h / b;
                        null == r && (r = .5);
                        c.useBrush(null, x.black, p + (x.normal - p) * k, w + (x.normal - w) * r);
                        c.shortStroke(a, f);
                        a = h * Math.sqrt(n);
                        p = u * Math.PI / 2 * Math.sqrt(1 - a / b);
                        d(f, g - p, a);
                        a = h * Math.sqrt(u);
                        p = n * Math.PI / 2 * Math.sqrt(1 - a / b);
                        d(f, g + p, a)
                    }
                }
                ;
                c.brush = m(c, c.decay);
                d(new B, Math.PI * (-.5 + .1 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)), b)
            }
            ;
            var ea = function(a,p) {
                this.indices = new pa;
                var b = this;
                ea.inst = this;
                this.bp = a;
                l.reset(a.seed);
                Z.processTags(a.tags);
                console.log("Source/com/watabou/perilous/model/Region.hx:91:", a.seed + ": " + a.tags.join(", "));
                /////////////////////////////////////
                PSDataManager(this,p)
                /////////////////////////////////////
                this.width = a.width;
                this.height = a.height;
                this.viewWidth = this.width;
                this.viewHeight = this.height * ea.vantage;
                ea.hexInner = ea.hexRadius * Math.sqrt(3) / 2;
                ea.hexWidth2 = ea.hexInner;
                ea.hexHeight2 = ea.hexRadius;
                var c = Math.max(this.width, this.height);
                this.cols = Math.ceil(Math.sqrt(2) * c / 2 / ea.hexWidth2);
                this.rows = Math.ceil(Math.sqrt(2) * c / 2 / (.75 * ea.hexHeight2));
                l.preserve(function() {
                    ja.reset(b)
                });
                Qa.reset();
                this.createMesh();
                this.createLandscape();
                this.createIslands();
                this.spawnDungeons();
                this.name = null != a.name ? a.name : this.rollName();
                a.updateURL();
                Z.width = this.width;
                Z.height = this.height
            };
            h["com.watabou.perilous.model.Region"] = ea;
            ea.__name__ = "com.watabou.perilous.model.Region";
            ea.getVicinity = function(a, b) {
                for (var c = [a]; 0 < b--; ) {
                    for (var d = [], f = 0; f < c.length; )
                        a = c[f],
                        ++f,
                        ia.addAll(d, a.getNeighbours());
                    ia.addAll(c, d)
                }
                return c
            }
            ;
            ea.getAlign = function(a, b) {
                null == b && (b = 0);
                null == a && (a = yb.NEUTRAL);
                null == b && (b = 0);
                null == b && (b = 0);
                b = 1 + Math.floor((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 12) + b;
                b = 1 > b ? 1 : 12 < b ? 12 : b;
                switch (a._hx_index) {
                case 0:
                    switch (b) {
                    case 1:
                        return yb.EVIL;
                    case 2:
                    case 3:
                        return yb.CHAOTIC;
                    case 4:
                    case 5:
                        return yb.NEUTRAL;
                    case 6:
                    case 7:
                        return yb.LAWFUL;
                    default:
                        return yb.GOOD
                    }
                case 1:
                    switch (b) {
                    case 1:
                    case 2:
                        return yb.EVIL;
                    case 3:
                        return yb.CHAOTIC;
                    case 4:
                    case 5:
                        return yb.NEUTRAL;
                    case 11:
                    case 12:
                        return yb.GOOD;
                    default:
                        return yb.LAWFUL
                    }
                case 2:
                    switch (b) {
                    case 1:
                        return yb.EVIL;
                    case 2:
                    case 3:
                        return yb.CHAOTIC;
                    case 10:
                    case 11:
                        return yb.LAWFUL;
                    case 12:
                        return yb.GOOD;
                    default:
                        return yb.NEUTRAL
                    }
                case 3:
                    switch (b) {
                    case 1:
                    case 2:
                        return yb.EVIL;
                    case 10:
                        return yb.LAWFUL;
                    case 11:
                    case 12:
                        return yb.GOOD;
                    default:
                        return yb.CHAOTIC
                    }
                case 4:
                    switch (b) {
                    case 6:
                    case 7:
                        return yb.CHAOTIC;
                    case 8:
                    case 9:
                        return yb.NEUTRAL;
                    case 10:
                    case 11:
                        return yb.LAWFUL;
                    case 12:
                        return yb.GOOD;
                    default:
                        return yb.EVIL
                    }
                }
            }
            ;
            ea.prototype = {
                rerollNames: function() {
                    ja.reset(this);
                    this.name = this.bp.name = this.rollName();
                    for (var a = 0, b = this.getFeatures(); a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.rollName()
                    }
                    this.bp.updateURL()
                },
                rollName: function() {
                    switch (Z.template) {
                    case "archipelago":
                        return ja.archi();
                    case "bay":
                        return ja.bay();
                    case "coast":
                        return ja.coast();
                    case "fjord":
                        return ja.fjord();
                    case "lake":
                        for (var a = 0, b = 0, c = this.islands; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            a += d.outline.length - 1
                        }
                        b = (a - 1) / 3;
                        null == b && (b = .5);
                        return ja.lake((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b);
                    case "land":
                        return ja.land();
                    case "peninsula":
                        return ja.peninsula();
                    default:
                        b = 1 - 1 / this.islands.length;
                        null == b && (b = .5);
                        b = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b;
                        if (!b) {
                            var f = a = 0;
                            b = 0;
                            for (c = this.islands; b < c.length; )
                                d = c[b],
                                ++b,
                                d = d.size,
                                a += d,
                                f < d && (f = d);
                            b = f < 2 * a / 3
                        }
                        return ja.island(b)
                    }
                },
                createMesh: function() {
                    var a = Math.PI / 3 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 - .5)
                      , b = 1 == this.bp.hexes ? 0 : 2 == this.bp.hexes ? Math.PI / 6 : a
                      , c = Math.sin(b)
                      , d = Math.cos(b)
                      , f = 2 == this.bp.hexes ? function(a, b) {
                        b = Math.floor((b - a) / 2);
                        return new Xh(b,a + Math.floor(b / 2))
                    }
                    : function(a, b) {
                        return new Xh(Math.floor(b / 2),a)
                    }
                    ;
                    a = [];
                    var g = 0;
                    for (b = this.rows + 1; g < b; ) {
                        for (var k = g++, q = [], p = 0, h = 2 * this.cols + 2; p < h; ) {
                            var u = p++
                              , n = ea.hexWidth2 * (u - this.cols - .5)
                              , w = ea.hexHeight2 * (k - this.rows / 2) * 1.5;
                            w += ea.hexHeight2 / 4 * ((u & 1) == (k & 1) ? 1 : -1);
                            n = new B(n,w);
                            n.setTo(n.x * d - n.y * c, n.y * d + n.x * c);
                            w = this.indices;
                            u = f(k, u);
                            w.set(n, u);
                            q.push(n)
                        }
                        a.push(q)
                    }
                    n = a;
                    d = c = 16777215;
                    f = this.width / 2 + ea.hexRadius;
                    q = this.height / 2 + ea.hexRadius;
                    a = [];
                    g = 0;
                    for (b = this.cols * this.rows; g < b; )
                        k = g++,
                        p = k / this.cols | 0,
                        h = k % this.cols * 2,
                        0 != (p & 1) && ++h,
                        k = sa.lerp(n[p][h], n[p + 1][h + 2]),
                        Math.abs(k.x) > f || Math.abs(k.y) > q || (k = this.indices.h[n[p][h].__id__],
                        c > k.x && (c = k.x),
                        d > k.y && (d = k.y),
                        a.push([n[p][h], n[p][h + 1], n[p][h + 2], n[p + 1][h + 2], n[p + 1][h + 1], n[p + 1][h]]));
                    this.dcel = new ac(a);
                    if (1 != ea.vantage)
                        for (u = this.dcel.vertices.iterator(); u.hasNext(); )
                            u.next().point.y *= ea.vantage;
                    for (k = this.indices.iterator(); k.hasNext(); )
                        a = k.next(),
                        a.x -= c,
                        a.y -= d;
                    if (3 == this.bp.hexes) {
                        l.save();
                        a = new pa;
                        g = 0;
                        for (b = this.dcel.faces; g < b.length; )
                            n = b[g],
                            ++g,
                            c = n.halfEdge,
                            a.set(n, sa.lerp(c.origin.point, c.next.next.next.origin.point));
                        f = a;
                        a = 0;
                        for (g = this.dcel.faces; a < g.length; )
                            for (n = g[a],
                            ++a,
                            k = f.h[n.__id__],
                            b = Math.PI / 6 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1),
                            p = q = n.halfEdge,
                            h = !0; h; )
                                n = p,
                                p = p.next,
                                h = p != q,
                                n = n.origin.point,
                                u = n.subtract(k),
                                c = Math.sin(b),
                                d = Math.cos(b),
                                ii.set(n, (new B(u.x * d - u.y * c,u.y * d + u.x * c)).add(k));
                        l.restore()
                    }
                },
                getCells: function(a) {
                    for (var b = [], c = 0, d = this.dcel.faces; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        a.containsPoint(f.data.center) && b.push(f.data)
                    }
                    return b
                },
                createLandscape: function() {
                    var a = Math.max(this.width, this.height)
                      , b = 1 + 2 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)
                      , c = .3 + .3 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    -1 != this.bp.tags.indexOf("chaotic") ? c += .1 : -1 != this.bp.tags.indexOf("lawful") && (c -= .1);
                    var d = gh.fractal(6, b, c)
                      , f = kc.get(this);
                    this.minLevel = Infinity;
                    this.maxLevel = -Infinity;
                    b = 0;
                    for (c = this.dcel.faces; b < c.length; ) {
                        var g = c[b];
                        ++b;
                        g = g.data = new fk(this,g);
                        var k = new B(g.center.x,g.center.y / ea.vantage)
                          , q = Zb.gate(k.x / a + .5, 0, 1)
                          , p = Zb.gate(k.y / a + .5, 0, 1);
                        k = d.get(q, p) + f.raise(k);
                        g.level = k;
                        this.minLevel > k && (this.minLevel = k);
                        this.maxLevel < k && (this.maxLevel = k)
                    }
                    a = [];
                    b = 0;
                    for (c = this.dcel.edges; b < c.length; )
                        d = c[b],
                        ++b,
                        null == d.twin ? (d.data = Ed.EDGE,
                        d.face.data.border = !0,
                        ia.add(a, d.face)) : d.data = Ed.NONE;
                    for (b = 0; b < a.length; )
                        for (g = a[b],
                        ++b,
                        c = 0,
                        d = g.getNeighbours(); c < d.length; )
                            f = d[c],
                            ++c,
                            f.data.march = !0
                },
                createIslands: function() {
                    switch (Z.template) {
                    case "archipelago":
                        var a = .65;
                        break;
                    case "bay":
                        a = .4;
                        break;
                    case "coast":
                        a = .5;
                        break;
                    case "fjord":
                        a = .3;
                        break;
                    case "island":
                        a = .65;
                        break;
                    case "lake":
                        a = .3;
                        break;
                    case "land":
                        a = -.1;
                        break;
                    case "peninsula":
                        a = .5;
                        break;
                    default:
                        a = 0
                    }
                    var b = this.minLevel;
                    null == a && (a = .5);
                    var c = b + (this.maxLevel - b) * a;
                    a = [];
                    var d = [];
                    b = 0;
                    for (var f = this.dcel.faces; b < f.length; ) {
                        var g = f[b];
                        ++b;
                        var k = g.data;
                        k.level > c ? (k.land = !0,
                        k.aboveSea = (k.level - c) / (this.maxLevel - c),
                        a.push(g),
                        k.aboveSea > Z.lowlandArea && d.push(k)) : k.aboveSea = (k.level - c) / (c - this.minLevel)
                    }
                    for (; 0 < d.length; )
                        for (f = [ia.pick(d)]; 0 < f.length; ) {
                            k = ia.pick(f);
                            g = k.aboveSea;
                            k.mountain = !0;
                            new ji(k,g - Z.lowlandArea);
                            var q = k.face.getNeighbours();
                            for (b = 0; b < q.length; )
                                k = q[b],
                                ++b,
                                c = k.data,
                                -1 != d.indexOf(c) && (Q.remove(d, c),
                                c = 2 * (1 - (g - c.aboveSea)) / 3,
                                null == c && (c = .5),
                                (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < c && ia.add(f, k.data))
                        }
                    for (this.islands = []; 0 < a.length; )
                        b = ac.floodFill(a[0], function(a) {
                            return a.data.land
                        }),
                        this.islands.push(new gk(b)),
                        ia.removeAll(a, b);
                    this.noWater = ia.every(this.islands, function(a) {
                        return a.landlocked
                    });
                    this.rocks = [];
                    if (!this.noWater) {
                        a = [];
                        b = 0;
                        for (f = this.dcel.faces; b < f.length; )
                            g = f[b],
                            ++b,
                            g.data.land || (k = ia.count(g.getNeighbours(), function(a) {
                                return a.data.land
                            }),
                            d = c = (1 == k ? .1 : 0 == k ? .01 : .001) * (1 + g.data.aboveSea),
                            null == d && (d = .5),
                            (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d && a.push(g));
                        l.save();
                        for (b = 0; b < a.length; )
                            g = a[b],
                            ++b,
                            this.rocks.push(new fh(g.data)),
                            g.data.shallow = !0;
                        l.restore()
                    }
                },
                spawnDungeons: function() {
                    for (var a = [], b = 0, c = this.dcel.faces; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        var f = d.data;
                        !f.land || f.march || f.mountain || null != f.site || a.push(d)
                    }
                    d = a;
                    a = 0;
                    for (b = this.islands; a < b.length; )
                        for (f = b[a],
                        ++a,
                        c = 0,
                        f = f.towns; c < f.length; ) {
                            var g = f[c];
                            ++c;
                            ia.removeAll(d, ea.getVicinity(g.cell.face, g.type._hx_index + 1))
                        }
                    a = Math.sqrt(d.length * Z.dungeonDensity);
                    b = a - (a | 0);
                    null == b && (b = .5);
                    c = (a | 0) + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b ? 1 : 0);
                    a = [];
                    for (b = 0; b < c; ) {
                        b++;
                        if (0 == d.length)
                            break;
                        f = ia.random(d);
                        g = ea.getVicinity(f, 1);
                        for (var k = 0; k < g.length; ) {
                            var q = g[k];
                            for (++k; Q.remove(d, q); )
                                ;
                        }
                        a.push(new vf(f.data,0))
                    }
                    this.dangers = a
                },
                getNavigation: function() {
                    null == this.routes && (this.routes = new hh(this));
                    return this.routes
                },
                resetNavigation: function() {
                    this.routes = null
                },
                getFeatures: function() {
                    if (null == this.features) {
                        l.save();
                        l.reset(this.bp.seed);
                        this.features = [];
                        for (var a = 0, b = this.islands; a < b.length; ) {
                            var c = b[a];
                            ++a;
                            var d = 0;
                            for (c = c.towns; d < c.length; ) {
                                var f = c[d];
                                ++d;
                                f.init();
                                this.features.push(f)
                            }
                        }
                        a = 0;
                        for (b = this.dangers; a < b.length; )
                            d = b[a],
                            ++a,
                            d.init(),
                            this.features.push(d);
                        a = [];
                        b = 0;
                        for (d = this.dcel.faces; b < d.length; )
                            c = d[b],
                            ++b,
                            c.data.land && !c.data.march && a.push(c);
                        d = a;
                        c = Math.sqrt(d.length) | 0;
                        a = 0;
                        for (b = c; a < b; ) {
                            a++;
                            if (this.features.length >= c)
                                break;
                            f = ia.random(d).data.terrain;
                            null != f && (f.init(),
                            ia.add(this.features, f.area))
                        }
                        l.restore()
                    }
                    return this.features
                },
                getIsland: function(a) {
                    for (var b = 0, c = this.islands; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        if (-1 != d.faces.indexOf(a))
                            return d
                    }
                    return null
                },
                getCell: function(a) {
                    for (var b = 0, c = this.dcel.faces; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d = d.data;
                        if (d.containsPoint(a))
                            return d
                    }
                    return null
                },
                deleteDanger: function(a) {
                    Q.remove(this.features, a);
                    var b = a.cell;
                    b.site = null;
                    Q.remove(this.dangers, a);
                    b.terrain instanceof Ub && (null == b.island && (b.island = b.region.getIsland(b.face)),
                    b.island.forests = null)
                },
                addDanger: function(a) {
                    var b = new vf(a,0);
                    this.dangers.push(b);
                    a.terrain instanceof Ub && (null == a.island && (a.island = a.region.getIsland(a.face)),
                    a.island.forests = null);
                    this.features.push(b);
                    return b
                },
                deleteTown: function(a) {
                    Q.remove(this.features, a);
                    var b = a.cell;
                    b.site = null;
                    null == b.island && (b.island = b.region.getIsland(b.face));
                    var c = b.island;
                    Q.remove(c.towns, a);
                    c.createRoads();
                    b.coastal && this.resetNavigation();
                    b.terrain instanceof Ub && (c.forests = null)
                },
                addTown: function(a) {
                    var b = ia.random(Z.settlementChances);
                    b = new bd(a,b,!0);
                    null == a.island && (a.island = a.region.getIsland(a.face));
                    var c = a.island;
                    c.towns.push(b);
                    c.createRoads();
                    a.coastal && this.resetNavigation();
                    a.terrain instanceof Ub && (c.forests = null);
                    this.getFeatures().push(b);
                    return b
                },
                validateTownCell: function(a, b) {
                    if (a.march || a.mountain || null != a.site)
                        return !1;
                    null == b && (null == a.island && (a.island = a.region.getIsland(a.face)),
                    b = a.island.towns);
                    var c = 0;
                    for (a = a.face.getNeighbours(); c < a.length; ) {
                        var d = a[c];
                        ++c;
                        for (var f = 0; f < b.length; ) {
                            var g = b[f];
                            ++f;
                            if (g.cell.face == d)
                                return !1
                        }
                    }
                    return !0
                },
                validateDangerCell: function(a, b) {
                    if (a.march || a.mountain || null != a.site)
                        return !1;
                    null == b && (null == a.island && (a.island = a.region.getIsland(a.face)),
                    b = a.island.towns);
                    var c = 0;
                    for (a = a.face.getNeighbours(); c < a.length; ) {
                        var d = a[c];
                        ++c;
                        for (var f = 0; f < b.length; ) {
                            var g = b[f];
                            ++f;
                            if (g.cell.face == d)
                                return !1
                        }
                    }
                    return !0
                },
                rotate: function(a, b) {
                    null == b && (b = !1);
                    for (var c = this.dcel.vertices.iterator(); c.hasNext(); ) {
                        var d = c.next();
                        a(d.point)
                    }
                    c = 0;
                    for (d = this.dcel.faces; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        a(f.data.center);
                        b && (f.invert(),
                        f.data.poly.reverse())
                    }
                    c = 0;
                    for (d = this.islands; c < d.length; ) {
                        a = d[c];
                        ++c;
                        if (b) {
                            f = 0;
                            for (var g = a.outline; f < g.length; ) {
                                var k = g[f];
                                ++f;
                                k.reverse()
                            }
                            a.forests = null
                        }
                        a.recreateGeometry()
                    }
                    null != this.routes && this.routes.resetCurves()
                },
                rotate180: function() {
                    this.rotate(function(a) {
                        a.x = -a.x;
                        a.y = -a.y
                    })
                },
                flipHorizontal: function() {
                    this.rotate(function(a) {
                        a.x = -a.x
                    }, !0)
                },
                flipVertical: function() {
                    this.rotate(function(a) {
                        a.y = -a.y
                    }, !0)
                },
                rotate90cw: function() {
                    var a = this.width;
                    this.width = this.height;
                    this.height = a;
                    this.viewWidth = this.width;
                    this.viewHeight = this.height * ea.vantage;
                    this.rotate(function(a) {
                        var b = a.y;
                        a.y = a.x;
                        a.x = -b
                    })
                },
                rotate90ccw: function() {
                    var a = this.width;
                    this.width = this.height;
                    this.height = a;
                    this.viewWidth = this.width;
                    this.viewHeight = this.height * ea.vantage;
                    this.rotate(function(a) {
                        var b = a.x;
                        a.x = a.y;
                        a.y = -b
                    })
                },
                setVantage: function(a) {
                    var b = a / ea.vantage;
                    this.viewHeight = this.height * (ea.vantage = a);
                    this.rotate(function(a) {
                        a.y *= b
                    })
                },
                __class__: ea
            };
            var Mb = function() {};
            h["com.watabou.perilous.mapping.sprites.LightTree"] = Mb;
            Mb.__name__ = "com.watabou.perilous.mapping.sprites.LightTree";
            Mb.proto = function() {
                var a = new Ye("lightTree",Mb.draw);
                a.getColor = function() {
                    return x.lightWood
                }
                ;
                a.getDist = function() {
                    return Mb.max_width * x.clutterScale
                }
                ;
                a.getTrunk = function() {
                    return Mb.min_trunk
                }
                ;
                a.getBump = Mb.getBump;
                a.getCloud = Mb.getCloud;
                a.getFold = Mb.getFold;
                return a
            }
            ;
            Mb.draw = function(a) {
                var b = Mb.min_trunk + (Mb.max_trunk - Mb.min_trunk) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)
                  , c = Mb.min_width + (Mb.max_width - Mb.min_width) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)
                  , d = Mb.min_height + (Mb.max_height - Mb.min_height) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                b *= x.clutterScale;
                c *= x.clutterScale;
                d *= x.clutterScale;
                a = new sc(a);
                Ye.drawShadow(a, -c / 4, d / 2);
                var f = $b.lerp(x.lightWood, x.black, x.alpha);
                a.g.lineStyle(x.thin, f);
                a.line(0, 0, 0, -b);
                a.end();
                a.drawThin();
                a.fill(x.lightWood);
                f = [];
                for (var g = 0; 16 > g; ) {
                    var k = g++ / 8 * Math.PI;
                    f.push(new B(c / 2 * Math.cos(k),d / 2 * Math.sin(k) - b - d / 2))
                }
                b = f;
                a.polygon(b);
                for (f = 0; f < b.length; )
                    c = b[f],
                    ++f,
                    0 > c.x && (c.x *= -.5);
                a.useBrush(null, x.black, x.thin);
                a.fillArea(b, Mb.hatching)
            }
            ;
            Mb.getBump = function() {
                return Mb.min_width * (1 <= x.clutterScale ? x.clutterScale : Math.sqrt(x.clutterScale))
            }
            ;
            Mb.getCloud = function(a) {
                return Zd.doBloat(a, 2 * Mb.getBump())
            }
            ;
            Mb.getFold = function(a) {
                return Zd.doBloatOpen(a, 2 * Mb.getBump())
            }
            ;
            var Ka = function() {};
            h["com.watabou.perilous.mapping.ForestView"] = Ka;
            Ka.__name__ = "com.watabou.perilous.mapping.ForestView";
            Ka.draw = function(a, b) {
                null == b.forests && Ka.createForests(b);
                var c = 0;
                for (b = b.forests; c < b.length; ) {
                    var d = b[c];
                    ++c;
                    Ka.updateForest(d);
                    Ka.drawForest(a, d)
                }
            }
            ;
            Ka.updateForests = function(a) {
                if (null != a.forests) {
                    var b = 0;
                    for (a = a.forests; b < a.length; ) {
                        var c = a[b];
                        ++b;
                        c.springs && (c.poly = null)
                    }
                }
            }
            ;
            Ka.updateForest = function(a) {
                if (a.springs && null == a.poly) {
                    var b = ac.outlineEx(a.faces, M.revealRivers ? function(a) {
                        return null == a.data.river
                    }
                    : null);
                    a.poly = Ka.outline2polyPolygon(b)
                }
            }
            ;
            Ka.createForests = function(a) {
                for (var b = [], c = 0, d = a.faces; c < d.length; ) {
                    var f = d[c];
                    ++c;
                    f.data.terrain instanceof Ub && null == f.data.site && b.push(f)
                }
                var g = b;
                for (b = []; !ia.isEmpty(g); ) {
                    var k = [M.revealRivers ? ac.floodFillEx(g[0], function() {
                        return function(a) {
                            return a.data.isEdge || null != a.data.river ? !1 : -1 != g.indexOf(a.twin.face)
                        }
                    }()) : ac.floodFill(g[0], function() {
                        return function(a) {
                            return -1 != g.indexOf(a)
                        }
                    }())];
                    ia.removeAll(g, k[0]);
                    c = [];
                    d = 0;
                    for (var q = k[0]; d < q.length; )
                        f = q[d],
                        ++d,
                        6 == ia.count(f.getNeighbours(), function(a) {
                            return function(b) {
                                return -1 != a[0].indexOf(b)
                            }
                        }(k)) && c.push(f);
                    d = new pa;
                    d.set(Ka.lightTree, 0);
                    d.set(Ka.darkTree, 0);
                    d.set(Ka.deadTree, 0);
                    q = d;
                    for (d = 0; d < k[0].length; )
                        f = k[0][d],
                        ++d,
                        f = xa.__cast(f.data.terrain, Ub).type,
                        q.set(f, q.h[f.__id__] + 1);
                    f = 0;
                    d = null;
                    var p = q;
                    q = p;
                    for (p = p.keys(); p.hasNext(); ) {
                        var l = p.next()
                          , h = q.get(l);
                        f < h && (f = h,
                        d = l)
                    }
                    f = M.revealRivers ? function() {
                        return function(a) {
                            return null == a.data.river
                        }
                    }() : null;
                    f = ac.outlineEx(k[0], f);
                    f = Ka.outline2polyPolygon(f);
                    b.push({
                        faces: k[0],
                        inner: c,
                        type: d,
                        poly: f,
                        springs: Ka.hasSprings
                    })
                }
                a.forests = b
            }
            ;
            Ka.outline2polyPolygon = function(a) {
                Ka.hasSprings = !1;
                for (var b = [], c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    for (var f = d.length, g = ld.toPoly(d), k = !1, q = 0, p = f; q < p; ) {
                        var l = q++;
                        if (d[l].twin == d[(l + 1) % f]) {
                            k = Ka.hasSprings = !0;
                            break
                        }
                    }
                    if (k) {
                        d = [];
                        p = g.length;
                        f = g[p - 2];
                        k = g[p - 1];
                        for (q = 0; q < p; ) {
                            var h = q++;
                            l = f;
                            f = k;
                            k = g[h];
                            l != k ? d.push(f) : (h = f.subtract(l),
                            h.setTo(-h.y, h.x),
                            l = new B(l.y - f.y,f.x - l.x),
                            l.normalize(Ka.inset / 2),
                            d.push(f.add(l)),
                            d.push(f.subtract(l)))
                        }
                        b.push(d)
                    } else
                        b.push(g)
                }
                return b
            }
            ;
            Ka.drawForest = function(a, b) {
                var c = ea.hexRadius
                  , d = Ka.type;
                var f = null != d ? d : b.type;
                if (null != f.getDist) {
                    var g = f.getBump()
                      , k = g / 2 + f.getTrunk() * (1 <= x.clutterScale ? x.clutterScale : Math.sqrt(x.clutterScale));
                    d = [];
                    for (var q = [], p = [], h = 0, u = b.poly; h < u.length; ) {
                        var n = u[h];
                        ++h;
                        n = xc.wobbleFixed(n, .5 * c);
                        n = Ce.insetEq(n, Ka.inset);
                        rc.asTranslate(n, 0, -k);
                        n = xc.resampleClosed(jc.render(n, !0), g);
                        n = xc.wobbleFixed(n, g);
                        var w = n.length
                          , r = n[w - 2];
                        w = n[w - 1];
                        for (var C = 0, K = n.length; C < K; ) {
                            var z = C++
                              , A = r;
                            r = w;
                            w = n[z];
                            z = r.x - A.x;
                            A = r.y - A.y;
                            var I = w.x - r.x
                              , N = w.y - r.y;
                            0 < A * N && 0 > z * N - A * I && (z = Math.sqrt(1 - (z * I + A * N) / Math.sqrt((z * z + A * A) * (I * I + N * N))),
                            null == z && (z = .5),
                            (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < z && (A = 0 < A ? d : q,
                            (0 == A.length || B.distance(A[A.length - 1], r) > c) && A.push(r)))
                        }
                        p.push(n)
                    }
                    C = p;
                    b.curves = C;
                    if (M.treeShadows && 3 != x.shadingMode) {
                        p = [];
                        for (h = 0; h < C.length; )
                            n = C[h],
                            ++h,
                            n = rc.translate(n, k / 2, k),
                            p.push(0 == x.shadingMode ? n : jc.render(n, !0));
                        a.useBrush(m(a, a.middle), x.black, x.thin);
                        a.fillMultiArea(p, Ka.shadowHatching)
                    }
                    if (!(Ka.frontTrees || M.treeShadows && 2 == x.shadingMode)) {
                        p = $b.lerp(f.getColor(), x.black, x.alpha);
                        a.g.lineStyle(x.normal, p);
                        for (p = 0; p < C.length; )
                            for (n = C[p],
                            ++p,
                            w = n.length,
                            r = n[w - 1],
                            h = 0,
                            u = w; h < u; )
                                z = h++,
                                A = r,
                                r = n[z],
                                A.x > r.x && (w = sa.lerp(A, r),
                                a.line(w.x, w.y, w.x, w.y + k));
                        a.end()
                    }
                    a.drawNormal();
                    a.fill(f.getColor());
                    p = [];
                    for (h = 0; h < C.length; )
                        n = C[h],
                        ++h,
                        p.push(f.getCloud(n));
                    a.multiPolygon(p);
                    a.end();
                    a.drawNormal();
                    p = 0;
                    for (h = b.inner; p < h.length; )
                        for (b = h[p],
                        ++p,
                        u = 0,
                        C = je.get(b.data, 2 * c, .5); u < C.length; )
                            w = C[u],
                            ++u,
                            b = c * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),
                            A = new B(w.x + -b,w.y),
                            r = new B(w.x + b,w.y),
                            b = new B(w.x,w.y + -b * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)),
                            b = xc.resampleOpen(jc.render([A, b, r], !1), g),
                            n = xc.wobbleFixedInner(b, .8 * g),
                            a.polyline(f.getFold(n));
                    c = ea.hexInner - Ka.inset;
                    Ka.frontTrees ? a.drawThin() : a.drawNormal();
                    h = function(b, d) {
                        var k = c * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)
                          , p = d ? new B(b.x + -k,b.y + .4 * -k) : b;
                        b = d ? b : new B(b.x + k,b.y + .4 * -k);
                        d = d ? new B(p.x + .6 * k,p.y) : new B(b.x + .6 * -k,b.y);
                        p = xc.resampleOpen(jc.render([p, d, b], !1), .8 * g);
                        p = xc.wobbleFixedInner(p, .5 * g);
                        a.polyline(f.getFold(p))
                    }
                    ;
                    for (p = 0; p < d.length; )
                        u = d[p],
                        ++p,
                        h(u, !0);
                    for (p = 0; p < q.length; )
                        u = q[p],
                        ++p,
                        h(u, !1)
                }
            }
            ;
            Ka.drawFront = function(a, b) {
                var c = 0;
                for (a = a.islands; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    var f = 0;
                    for (d = d.forests; f < d.length; ) {
                        var g = d[f];
                        ++f;
                        var k = Ka.type;
                        k = null != k ? k : g.type;
                        if (null != k.getDist) {
                            var q = k.getDist()
                              , p = k.getBump() / 2 + k.getTrunk() * x.clutterScale
                              , l = 0;
                            for (g = g.curves; l < g.length; ) {
                                var h = g[l];
                                ++l;
                                h = xc.resampleClosed(h, q);
                                for (var n = h.length, u = h[n - 2], w = h[n - 1], r = 0; r < n; ) {
                                    var C = r++
                                      , m = u;
                                    u = w;
                                    w = h[C];
                                    u.x < m.x && w.x < u.x && (C = k.getSprite(),
                                    C.set_x(u.x),
                                    C.set_y(u.y + p),
                                    b.push(C))
                                }
                            }
                        }
                    }
                }
            }
            ;
            Ka.drawWood = function(a, b) {
                var c = Ka.type;
                Ka.drawGrove(a, null != c ? c : a.type, b)
            }
            ;
            Ka.drawUngroupForests = function(a, b) {
                var c = 0;
                for (a = a.forests; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    var f = Ka.type;
                    f = null != f ? f : d.type;
                    if (null == f.getDist) {
                        var g = 0;
                        for (d = d.faces; g < d.length; ) {
                            var k = d[g];
                            ++g;
                            Ka.drawGrove(k.data.terrain, f, b)
                        }
                    }
                }
            }
            ;
            Ka.drawGrove = function(a, b, c) {
                var d = 0;
                for (a = a.getTrees(); d < a.length; ) {
                    var f = a[d];
                    ++d;
                    var g = b.getSprite();
                    g.set_x(f.x);
                    g.set_y(f.y);
                    c.push(g)
                }
            }
            ;
            Ka.drawOrphans = function(a, b) {
                for (var c = a.data.center, d = a = a.halfEdge, f = !0; f; ) {
                    var g = d;
                    d = d.next;
                    f = d != a;
                    var k = g.twin;
                    k = null != k ? k.face.data.terrain : null;
                    if (k instanceof Ub) {
                        var q = Ka.type;
                        for (k = null != q ? q : xa.__cast(k, Ub).type; ; ) {
                            q = .4;
                            null == q && (q = .5);
                            if (!((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < q))
                                break;
                            q = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647;
                            null == q && (q = .5);
                            q = sa.lerp(sa.lerp(g.origin.point, g.next.origin.point, q), c, Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                            var p = k.getSprite();
                            p.set_x(q.x);
                            p.set_y(q.y);
                            b.push(p)
                        }
                    }
                }
            }
            ;
            var Ib = function() {
                this.isDirty = !0;
                T.call(this)
            };
            h["com.watabou.perilous.mapping.LabelsLayer"] = Ib;
            Ib.__name__ = "com.watabou.perilous.mapping.LabelsLayer";
            Ib.__super__ = T;
            Ib.prototype = v(T.prototype, {
                update: function(a) {
                    this.removeChildren();
                    var b = x.normal * (Mh.get_screenDPI() / 72);
                    Ib.outlineGlow = x.outlineColor != x.textColor ? [new ad(x.outlineColor,1,b,b,64,3)] : null;
                    a = a.getFeatures();
                    for (b = 0; b < a.length; ) {
                        var c = a[b];
                        ++b;
                        if (!(c instanceof bd) || M.showTowns)
                            if (!(c instanceof vf) || M.showDangers) {
                                var d = null;
                                if (c instanceof bd)
                                    d = new ki(c);
                                else if (c instanceof vf)
                                    d = new li(c);
                                else if (c instanceof ke) {
                                    d = [];
                                    for (var f = 0, g = c.faces; f < g.length; ) {
                                        var k = g[f];
                                        ++f;
                                        -1 == a.indexOf(k.data.site) && d.push(k)
                                    }
                                    d = [d];
                                    g = ac.outline(d[0]);
                                    if (1 < g.length) {
                                        f = [];
                                        k = 1;
                                        for (var q = g.length; k < q; ) {
                                            var p = k++;
                                            p = ac.floodFill(g[p][0].twin.face, function(a) {
                                                return function(b) {
                                                    return -1 == a[0].indexOf(b)
                                                }
                                            }(d));
                                            for (var l = 0; l < p.length; ) {
                                                var h = p[l];
                                                ++l;
                                                f.push(h)
                                            }
                                        }
                                        for (g = 0; g < f.length; )
                                            k = f[g],
                                            ++g,
                                            k.data.land && (q = k.data.getFeature(),
                                            -1 == a.indexOf(q) && d[0].push(k))
                                    }
                                    c = c.getName();
                                    d = Ib.mode == Ib.CURVED ? new xf(d[0],c) : new Md(d[0],c)
                                }
                                null != d && this.addChild(d)
                            }
                    }
                    this.outline(x.outlineColor != x.textColor);
                    this.isDirty = !1
                },
                outline: function(a) {
                    for (var b = 0, c = this.get_numChildren(); b < c; ) {
                        var d = b++;
                        xa.__cast(this.getChildAt(d), le).setOutline(a)
                    }
                },
                exportAsPNG: function() {
                    for (var a = 0, b = this.get_numChildren(); a < b; ) {
                        var c = a++;
                        xa.__cast(this.getChildAt(c), le).exportAsPNG()
                    }
                },
                __class__: Ib
            });
            var $k = function() {};
            h["com.watabou.perilous.mapping.LandView"] = $k;
            $k.__name__ = "com.watabou.perilous.mapping.LandView";
            $k.draw = function(a, b, c, d) {
                var f = null != b.set_mask(d);
                if (f) {
                    d = new sc(d,!0);
                    d.fill(16711680);
                    for (var g = 0, k = a.islands; g < k.length; ) {
                        var q = k[g];
                        ++g;
                        for (var p = [], l = q.coasts.iterator(); l.hasNext(); ) {
                            var h = l.next();
                            p.push(h)
                        }
                        d.multiPolygon(p)
                    }
                    g = ea.hexRadius * x.landBorderWidth;
                    var n = .5 * -g * (1 - ea.vantage);
                    d = new sc(b,!0);
                    d.fill(x.earth);
                    d.draw(x.landShadeColor, g);
                    g = 0;
                    for (k = a.islands; g < k.length; ) {
                        q = k[g];
                        ++g;
                        p = [];
                        for (l = q.coasts.iterator(); l.hasNext(); )
                            h = l.next(),
                            p.push(h);
                        d.multiPolygon(p, 0, n)
                    }
                }
                d = new sc(c,!0);
                g = 0;
                for (k = a.islands; g < k.length; ) {
                    q = k[g];
                    ++g;
                    f || d.fill(x.earth);
                    d.drawThick();
                    p = [];
                    for (l = q.coasts.iterator(); l.hasNext(); )
                        h = l.next(),
                        p.push(h);
                    d.multiPolygon(p);
                    d.end();
                    if (4 != x.shadingMode)
                        for (d.useBrush(null, x.black, x.thick),
                        a = 0,
                        b = q.nicks; a < b.length; )
                            c = b[a],
                            ++a,
                            d.trueStroke(c);
                    al.draw(d, q.rivers);
                    M.individualTrees || Ka.draw(d, q);
                    d.end()
                }
            }
            ;
            var cc = function() {};
            h["com.watabou.perilous.mapping.MountainsView"] = cc;
            cc.__name__ = "com.watabou.perilous.mapping.MountainsView";
            cc.draw = function(a) {
                var b = -1 != a.bp.tags.indexOf("highland") ? 1.2 : -1 != a.bp.tags.indexOf("lowland") ? .8 : 1
                  , c = []
                  , d = 0;
                for (a = a.islands; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    var g = []
                      , k = 0;
                    for (f = f.faces; k < f.length; ) {
                        var q = f[k];
                        ++k;
                        q.data.mountain && null == q.data.site && g.push(q)
                    }
                    for (g = [g]; !ia.isEmpty(g[0]); ) {
                        k = ac.floodFill(g[0][0], function(a) {
                            return function(b) {
                                return -1 != a[0].indexOf(b)
                            }
                        }(g));
                        if (1 == k.length)
                            c.push(cc.getLonely(k[0], b));
                        else
                            for (f = cc.getRange(k, b),
                            q = 0; q < f.length; ) {
                                var p = f[q];
                                ++q;
                                c.push(p)
                            }
                        ia.removeAll(g[0], k)
                    }
                }
                return c
            }
            ;
            cc.getRange = function(a, b) {
                for (var c = ac.outline(a), d = [], f = 0; f < c.length; ) {
                    var g = c[f];
                    ++f;
                    d.push(ld.toPoly(g))
                }
                c = d;
                var k = cc.halfBase / cc.density;
                null == cc.pattern && (cc.pattern = new ah(10 * k,10 * k,k),
                cc.pattern.uneven(.3));
                var q = cc.pattern.fill(new ai(c));
                d = [];
                for (f = 0; f < q.length; ) {
                    var p = q[f];
                    ++f;
                    var l = Infinity;
                    for (g = 0; g < q.length; ) {
                        var h = q[g];
                        ++g;
                        h != p && (h = B.distance(p, h),
                        l > h && (l = h))
                    }
                    for (h = 0; h < c.length; ) {
                        g = c[h];
                        ++h;
                        for (var n = g.length, u = 0, w = n; u < w; ) {
                            var r = u++;
                            r = Math.sqrt(cc.dist2segSq(p, g[r], g[(r + 1) % n]));
                            l > r && (l = r)
                        }
                    }
                    for (g = 0; g < a.length; )
                        for (h = a[g],
                        ++g,
                        n = h = h.halfEdge,
                        u = !0; u; )
                            w = n,
                            n = n.next,
                            u = n != h,
                            null != w.data.river && (w = Math.sqrt(cc.dist2segSq(p, w.origin.point, w.next.origin.point)) / 1.2,
                            l > w && (l = w));
                    l /= k;
                    .3 <= l && (l = new gc(cc.halfBase * l,b * cc.height * Math.pow(l, 2)),
                    l.set_x(p.x),
                    l.set_y(p.y),
                    d.push(l))
                }
                return d
            }
            ;
            cc.getLonely = function(a, b) {
                a = a.data.center;
                var c = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - .5;
                a = a.add(B.polar(c * cc.halfBase, Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647)));
                c = 1 - Math.abs(c);
                b = new gc(cc.halfBase * c,b * cc.height * Math.pow(c, 2));
                b.set_x(a.x);
                b.set_y(a.y + ea.hexRadius / 3);
                return b
            }
            ;
            cc.distSq = function(a, b) {
                var c = a.x - b.x;
                a = a.y - b.y;
                return c * c + a * a
            }
            ;
            cc.dist2segSq = function(a, b, c) {
                var d = cc.distSq(b, c);
                if (0 == d)
                    return cc.distSq(a, b);
                var f = c.x - b.x;
                c = c.y - b.y;
                d = ((a.x - b.x) * f + (a.y - b.y) * c) / d;
                d = Zb.gate(d, 0, 1);
                return cc.distSq(a, new B(b.x + d * f,b.y + d * c))
            }
            ;
            var ie = function(a) {
                this.tfCache = [];
                T.call(this);
                this.map = a
            };
            h["com.watabou.perilous.mapping.NumbersLayer"] = ie;
            ie.__name__ = "com.watabou.perilous.mapping.NumbersLayer";
            ie.getPlacing = function(a) {
                a = Da.get("numbersPos", "Top");
                if ("Center" == a)
                    return ie.center;
                switch (ea.tiltMode) {
                case 0:
                    var b = (1 - ea.hexInner / ea.hexRadius) / 2
                      , c = 0;
                    "Bottom" == a && (b = 1 - b,
                    c = 1);
                    return function(a, d) {
                        d = sa.lerp(d[1], d[4], b);
                        a.set_x(d.x - a.get_width() / 2);
                        a.set_y(d.y - a.get_height() * c)
                    }
                    ;
                case 1:
                    var d = ea.hexRadius - ea.hexInner
                      , f = 0;
                    "Bottom" == a && (d = 2 * ea.hexRadius - d,
                    f = 1);
                    return function(a, b) {
                        a.set_x(b[1].x - a.get_width() / 2);
                        a.set_y(b[1].y + d - a.get_height() * f)
                    }
                    ;
                case 2:
                    var g = "Top" == a ? 0 : 3
                      , k = "Top" == a ? 1 : 4
                      , q = "Top" == a ? 0 : 1;
                    return function(a, b) {
                        a.set_x((b[g].x + b[k].x - a.get_width()) / 2);
                        a.set_y(b[g].y - a.get_height() * q)
                    }
                    ;
                default:
                    return ie.center
                }
            }
            ;
            ie.center = function(a, b) {
                a.set_x((b[0].x + b[3].x) / 2 - a.get_width() / 2);
                a.set_y((b[0].y + b[3].y) / 2 - a.get_height() / 2)
            }
            ;
            ie.customize = function() {
                null == w.findForm(ih) && w.showDialog(new ih)
            }
            ;
            ie.__super__ = T;
            ie.prototype = v(T.prototype, {
                reset: function(a) {
                    this.map.removeChild(this);
                    this.update(a)
                },
                update: function(a) {
                    this.set_visible(M.showNumbers && 0 != M.gridMode);
                    null == this.parent && this.get_visible() && this.draw(a)
                },
                draw: function(a) {
                    if (null != a) {
                        this.map.addNumbers();
                        for (var b = 0, c = this.get_numChildren(); b < c; ) {
                            var d = b++;
                            this.tfCache.push(this.getChildAt(d))
                        }
                        this.removeChildren();
                        d = oc.format("ui_font_mono", Da.get("numbersSize", 14), M.getGridColor());
                        var f = ie.getPlacing(a);
                        b = 0;
                        for (c = a.dcel.faces; b < c.length; ) {
                            var g = c[b];
                            ++b;
                            if (M.oceanTiles || g.data.land) {
                                g = g.data.poly;
                                var k = a.indices.h[g[0].__id__]
                                  , q = P.lpad(null == k.x ? "null" : "" + k.x, "0", 2);
                                k = P.lpad(null == k.y ? "null" : "" + k.y, "0", 2);
                                q = P.replace(q + k, "0", "O");
                                0 < this.tfCache.length ? (k = this.tfCache.pop(),
                                k.set_defaultTextFormat(d),
                                k.set_text(q)) : k = oc.get(q, d);
                                q = k;
                                f(q, g);
                                this.addChild(q)
                            }
                        }
                    }
                },
                __class__: ie
            });
            var $d = function() {
                T.call(this);
                this.tide = new T;
                this.addChild(this.tide);
                this.routes = new T;
                this.addChild(this.routes)
            };
            h["com.watabou.perilous.mapping.OceanView"] = $d;
            $d.__name__ = "com.watabou.perilous.mapping.OceanView";
            $d.drawContour = function(a, b, c, d) {
                0 < d && (c += 2 * x.thin,
                1 == d ? (a.draw(x.contours, c),
                a.multiPolygon(b)) : (d = $d.getTidePattern(d),
                a.g.lineStyle(c, x.contours, null, null, null, 0),
                a.dashedMultiPolygon(b, d)))
            }
            ;
            $d.drawBand = function(a, b, c, d) {
                a.draw(d, c);
                a.multiPolygon(b)
            }
            ;
            $d.getTidePattern = function(a) {
                var b = 10 / Math.min(a, 1 - a)
                  , c = [];
                c.push(b * a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * (1 - a) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * (1 - a) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * (1 - a) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * (1 - a) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                c.push(b * (1 - a) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                return c
            }
            ;
            $d.__super__ = T;
            $d.prototype = v(T.prototype, {
                draw: function(a, b) {
                    this.get_graphics().clear();
                    this.tide.get_graphics().clear();
                    if (!a.noWater) {
                        for (var c = [], d = 0, f = a.rocks; d < f.length; ) {
                            var g = f[d];
                            ++d;
                            var k = g.cell.center
                              , q = 0;
                            for (g = g.rocks; q < g.length; ) {
                                var p = g[q];
                                ++q;
                                c.push(rc.translate(p, k.x, k.y))
                            }
                        }
                        k = [];
                        d = 0;
                        for (f = a.islands; d < f.length; )
                            for (q = f[d],
                            ++d,
                            q = q.coasts.iterator(); q.hasNext(); )
                                g = q.next(),
                                k.push(g);
                        0 < x.shallowSize && (0 < x.bandsNumber ? this.drawTidelines(k, c) : this.drawShallow(a));
                        M.showRoutes && this.drawRoutes(a);
                        this.addChildAt(b, 0 < x.shallowEdge ? 0 : 1)
                    }
                },
                drawTidelines: function(a, b) {
                    var c = new sc(this.tide)
                      , d = ea.hexRadius * x.shallowSize
                      , f = x.shallowSize / 4;
                    null == f && (f = .5);
                    f = 1 + f;
                    for (var g = 0, k = x.bandsNumber; g < k; ) {
                        var q = g++
                          , p = d * Math.pow(1 - q / x.bandsNumber, f) * 2
                          , l = p / 1.5;
                        q = x.water == x.shallow ? x.water : $b.lerpHSV(x.water, x.shallow, (q + 1) / x.bandsNumber);
                        $d.drawContour(c, b, l, x.shallowEdge);
                        $d.drawContour(c, a, p, x.shallowEdge);
                        $d.drawBand(c, b, l, q);
                        $d.drawBand(c, a, p, q)
                    }
                },
                drawShallow: function(a) {
                    for (var b = [x.shallow, x.shallow, x.shallow], c = [1, .25, 0], d = this.tide.get_graphics(), f = 0, g = a.islands; f < g.length; ) {
                        var k = g[f];
                        ++f;
                        for (var q = 0, p = k.faces; q < p.length; ) {
                            var l = p[q];
                            ++q;
                            if (l.data.coastal) {
                                k = l.data.center;
                                var h = new ta;
                                l = ia.count(l.getNeighbours(), function(a) {
                                    return a.data.land
                                });
                                l = ea.hexInner * (1 + 2 * x.shallowSize * (l + 1) / 4);
                                var n = Math.round(255 * ea.hexInner / l)
                                  , u = n + 255 >> 1;
                                h.createGradientBox(2 * l, 2 * l, 0, k.x - l, k.y - l);
                                d.beginGradientFill(1, b, c, [n, u, 255], h);
                                d.drawCircle(k.x, k.y, l)
                            }
                        }
                    }
                    c = [.6, .2, 0];
                    n = Math.round(255 / (1 + x.shallowSize));
                    n = [n, n + 255 >> 1, 255];
                    f = 0;
                    for (g = a.rocks; f < g.length; )
                        for (p = g[f],
                        ++f,
                        k = p.cell.center,
                        q = 0,
                        p = p.circles; q < p.length; )
                            l = p[q],
                            ++q,
                            h = new ta,
                            a = k.add(l.c),
                            l = l.r * (1 + x.shallowSize),
                            h.createGradientBox(2 * l, 2 * l, 0, a.x - l, a.y - l),
                            d.beginGradientFill(1, b, c, n, h),
                            d.drawCircle(a.x, a.y, l)
                },
                drawRoutes: function(a) {
                    var b = new sc(this.routes,!0);
                    b.draw(x.routes, x.normal);
                    var c = [10, 10];
                    a = a.getNavigation();
                    for (var d = a.getCurves(), f = 0, g = a.routes.length; f < g; ) {
                        var k = f++;
                        a.enabled.h[a.routes[k].__id__] && b.dashedPolyline(qf.smoothOpen(d[k], 8), c)
                    }
                },
                __class__: $d
            });
            var jh = function(a, b, c, d) {
                null == d && (d = 4);
                this.matrix = new ta;
                this.obj = a;
                this.size = c;
                this.quality = d;
                this.color = new Kb;
                this.color.set_color(b);
                ze.call(this);
                this.update(d)
            };
            h["com.watabou.perilous.mapping.Outline"] = jh;
            jh.__name__ = "com.watabou.perilous.mapping.Outline";
            jh.__super__ = ze;
            jh.prototype = v(ze.prototype, {
                destroy: function() {
                    null != this.get_bitmapData() && this.get_bitmapData().dispose()
                },
                update: function(a) {
                    null == a && (a = 0);
                    this.destroy();
                    0 == a && (a = this.quality);
                    var b = this.obj.getRect(this.obj)
                      , c = new Yb(Math.ceil(b.width * a),Math.ceil(b.height * a),!0,0);
                    this.matrix.identity();
                    this.matrix.translate(-b.get_left(), -b.get_top());
                    this.matrix.scale(a, a);
                    c.draw(this.obj, this.matrix, null, null, null, !0);
                    c.colorTransform(c.rect, this.color);
                    for (var d = new Yb(Math.ceil((b.width + 2 * this.size) * a),Math.ceil((b.height + 2 * this.size) * a),!0,0), f = Math.ceil(a * this.size * 6), g = 0; g < f; ) {
                        var k = g++;
                        k = B.polar(this.size, k / f * 2 * Math.PI);
                        k.offset(this.size, this.size);
                        this.matrix.identity();
                        this.matrix.translate(k.x * a, k.y * a);
                        d.draw(c, this.matrix, null, null, null, !0)
                    }
                    c.dispose();
                    this.set_bitmapData(d);
                    this.smoothing = !0;
                    this.set_scaleX(this.set_scaleY(1 / a));
                    this.set_x(this.obj.get_x() + b.get_left() - this.size);
                    this.set_y(this.obj.get_y() + b.get_top() - this.size)
                },
                __class__: jh
            });
            var al = function() {};
            h["com.watabou.perilous.mapping.RiversView"] = al;
            al.__name__ = "com.watabou.perilous.mapping.RiversView";
            al.draw = function(a, b) {
                for (var c = M.hollowRivers, d = new pa, f = 0; f < b.length; ) {
                    var g = b[f];
                    ++f;
                    var k = x.ultraThin
                      , q = g.start;
                    null == q && (q = .5);
                    var p = x.ultraThin
                      , l = g.end;
                    null == l && (l = .5);
                    if (c) {
                        var h = x.thin;
                        var n = g.start;
                        null == n && (n = .5);
                        h = 2 * (h + (x.normal - h) * n)
                    } else
                        h = 0;
                    if (c) {
                        n = x.thin;
                        var u = g.end;
                        null == u && (u = .5);
                        n = 2 * (n + (x.normal - n) * u)
                    } else
                        n = 0;
                    d.set(g, [k + (x.river - k) * q, p + (x.river - p) * l, h, n])
                }
                f = d;
                if (x.landBorderColor != x.earth && 0 < x.landBorderAlpha && 0 < x.landBorderWidth && M.riverBanks)
                    for (q = 2 * Math.min(x.landBorderWidth * ea.hexRadius, x.river),
                    d = 0; d < b.length; )
                        g = b[d],
                        ++d,
                        k = f.h[g.__id__],
                        a.useBrush(null, x.landShadeColor, k[0] + k[2] + q * g.start, k[1] + k[3] + q * g.end),
                        a.trueStroke(g.poly);
                if (4 != x.shadingMode || !c)
                    for (d = 0; d < b.length; )
                        g = b[d],
                        ++d,
                        k = f.h[g.__id__],
                        q = k[0] + k[2],
                        k = k[1] + k[3],
                        a.useBrush(null, x.rivers, q, k),
                        a.trueStroke(g.poly),
                        a.fill(x.rivers),
                        l = g.poly[g.poly.length - 1],
                        a.circle(l.x, l.y, k / 2),
                        l = g.poly[0],
                        k = g.poly[1],
                        g = rg.rect(q, q),
                        q = k.subtract(l),
                        q = Math.atan2(q.y, q.x),
                        rc.asRotateYX(g, Math.sin(q), Math.cos(q)),
                        rc.asTranslate(g, l.x, l.y),
                        a.polygon(g),
                        a.end();
                if (c)
                    for (d = 0; d < b.length; )
                        g = b[d],
                        ++d,
                        k = f.h[g.__id__],
                        a.useBrush(null, x.shallow, k[0], k[1]),
                        a.trueStroke(g.poly),
                        1 == g.start && (c = g.poly[0],
                        l = g.poly[1],
                        q = c.subtract(l),
                        l = Math.max(x.thick, x.river),
                        null == l && (l = 1),
                        q = q.clone(),
                        q.normalize(l),
                        q = c.add(q),
                        a.draw(x.shallow, x.river),
                        a.line(c.x, c.y, q.x, q.y),
                        a.end()),
                        l = g.poly[g.poly.length - 1],
                        a.fill(x.shallow),
                        a.circle(l.x, l.y, k[1] / 2),
                        a.end()
            }
            ;
            var je = function() {};
            h["com.watabou.perilous.mapping.Scattering"] = je;
            je.__name__ = "com.watabou.perilous.mapping.Scattering";
            je.get = function(a, b, c) {
                null == c && (c = 1);
                var d = ea.vantage
                  , f = Math.floor((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 2)
                  , g = "" + b + "-" + c + "-" + d + "-" + f
                  , k = je.cache.h[g];
                null == k && (0 == f && (b *= Math.pow(2, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - .5)),
                f = Math.max(10 * b, 2 * ea.hexRadius),
                k = new ah(f,f,b),
                1 > c && k.uneven(1 - c),
                1 != d && k.scale(1, d),
                je.cache.h[g] = k);
                return k.fill(new rf(a.getLand()))
            }
            ;
            je.some = function(a, b, c, d) {
                a = je.get(a, b);
                return ia.subset(a, Math.floor(c + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * (d - c)))
            }
            ;
            var Xf = function() {
                this.view = new oa;
                this.stickers = new pa;
                Xf.inst = this;
                T.call(this)
            };
            h["com.watabou.perilous.mapping.StickerLayer"] = Xf;
            Xf.__name__ = "com.watabou.perilous.mapping.StickerLayer";
            Xf.placeAround = function(a, b, c) {
                a += 2 * c;
                b += 2 * c;
                c = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 - .5;
                var d = a / (a + b);
                null == d && (d = .5);
                return (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d ? new B(a * c,.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? -b / 2 : b / 2) : new B(.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? -a / 2 : a / 2,b * c)
            }
            ;
            Xf.__super__ = T;
            Xf.prototype = v(T.prototype, {
                clear: function() {
                    for (var a = this.stickers, b = a.keys(); b.hasNext(); ) {
                        var c = b.next();
                        c = a.get(c);
                        this.removeChild(c)
                    }
                    this.stickers = new pa
                },
                recreate: function() {
                    var a = new pa
                      , b = this.stickers
                      , c = b;
                    for (b = b.keys(); b.hasNext(); ) {
                        var d = b.next()
                          , f = c.get(d);
                        a.set(d, new B(f.content.get_x() + f.content.get_width() / 2,f.content.get_y() + f.content.get_height() / 2))
                    }
                    this.clear();
                    c = b = a;
                    for (b = b.keys(); b.hasNext(); )
                        d = b.next(),
                        a = f = c.get(d),
                        this.add(d, !0).set_offset(a)
                },
                add: function(a, b) {
                    null == b && (b = !1);
                    this.remove(a) && (a = null);
                    b || this.clear();
                    if (null != a) {
                        b = a.getInfo();
                        var c = b.indexOf("\n");
                        b = M.showInfo ? -1 == c ? Pb.title(b) : Pb.titleNdesc(Q.substr(b, 0, c), Q.substr(b, c + 1, null)) : Pb.title(-1 == c ? b : Q.substr(b, 0, c));
                        b.set_x(a.cell.center.x);
                        b.set_y(a.cell.center.y);
                        this.addChild(b);
                        this.place(b);
                        this.stickers.set(a, b);
                        return b
                    }
                    return null
                },
                remove: function(a) {
                    return null != a && null != this.stickers.h.__keys__[a.__id__] ? (this.removeChild(this.stickers.h[a.__id__]),
                    this.stickers.remove(a),
                    !0) : !1
                },
                update: function(a) {
                    this.remove(a) && this.add(a, !0)
                },
                place: function(a) {
                    for (var b = Infinity, c = null, d = ea.inst, f = [], g = 0, k = d.islands; g < k.length; ) {
                        var q = k[g];
                        ++g;
                        var p = 0;
                        for (q = q.towns; p < q.length; ) {
                            var h = q[p];
                            ++p;
                            f.push(h)
                        }
                    }
                    g = 0;
                    for (k = d.dangers; g < k.length; )
                        d = k[g],
                        ++g,
                        f.push(d);
                    for (g = 0; 100 > g; )
                        if (g++,
                        d = Xf.placeAround(a.rectWidth, a.rectHeight, 50 * (1 + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))),
                        p = a.rectAt(d),
                        this.view.containsRect(p)) {
                            q = 0;
                            for (k = this.stickers.iterator(); k.hasNext(); )
                                h = k.next(),
                                h != a && (h = h.rectAt().intersection(p),
                                q += h.width * h.height);
                            p.inflate(2 * ea.hexRadius, 2 * ea.hexRadius);
                            for (k = 0; k < f.length; )
                                h = f[k],
                                ++k,
                                p.containsPoint(h.cell.center) && (q += p.width * p.height);
                            if (b > q && (b = q,
                            c = d,
                            0 >= b))
                                break
                        }
                    a.set_offset(null != c ? c : new B)
                },
                __class__: Xf
            });
            var Ld = function() {};
            h["com.watabou.perilous.mapping.SvgExporter"] = Ld;
            Ld.__name__ = "com.watabou.perilous.mapping.SvgExporter";
            Ld.export = function(a, b) {
                var c = a.width
                  , d = a.height * ea.vantage
                  , f = ha.create(c, d, x.water);
                ha.substituteFont = Ld.fixFontNames;
                ha.handleObject = yf.handleTooltips;
                var g = new yf(a);
                b.addChild(g);
                var k = ha.drawSprite(b);
                Ca.clearTransform(k);
                Ca.translate(k, c / 2, d / 2);
                c = ha.getImports();
                f.root.addChild(c);
                c = ha.getGradients();
                f.root.addChild(c);
                f.root.addChild(k);
                b.removeChild(g);
                Be.saveText('<?xml version="1.0" encoding="UTF-8" standalone="no"?>' + Tf.print(f.root), Ld.escape(a.name) + ".svg", "image/svg+xml")
            }
            ;
            Ld.fixFontNames = function(a) {
                if (!Ld.embeddedScanned) {
                    Ld.embeddedScanned = !0;
                    for (var b = new Ia, c = Ld.embedded.h, d = Object.keys(c), f = d.length, g = 0; g < f; ) {
                        var k = d[g++]
                          , q = c[k];
                        k = Rb.getFont(k).name;
                        b.h[k] = {
                            name: q.name,
                            url: q.url
                        }
                    }
                    Ld.embedded = b
                }
                q = Ld.embedded.h[a];
                return null != q ? (ha.addImport(q.url),
                q.name) : ha.substituteGenerics(a)
            }
            ;
            Ld.escape = function(a) {
                return a.toLowerCase().split(" ").join("_").split("'").join("")
            }
            ;
            var yf = function(a) {
                T.call(this);
                var b = a.getFeatures();
                a = [];
                for (var c = 0, d = b; c < d.length; ) {
                    var f = d[c];
                    ++c;
                    f instanceof ke && a.push(f)
                }
                var g = a;
                for (a = 0; a < g.length; ) {
                    f = g[a];
                    ++a;
                    c = xa.__cast(f, ke);
                    f = new T;
                    f.set_name(M.showInfo ? c.getInfo() : c.getName());
                    var k = ac.outline(c.faces);
                    c = [];
                    for (d = 0; d < k.length; ) {
                        var q = k[d];
                        ++d;
                        c.push(ld.toPoly(q))
                    }
                    d = c;
                    c = f.get_graphics();
                    c.beginFill(65280);
                    for (k = 0; k < d.length; )
                        q = d[k],
                        ++k,
                        Rc.drawPolygon(c, q);
                    this.addChild(f)
                }
                a = [];
                c = 0;
                for (d = b; c < d.length; )
                    f = d[c],
                    ++c,
                    f instanceof ae && a.push(f);
                b = a;
                for (a = 0; a < b.length; )
                    g = b[a],
                    ++a,
                    f = new T,
                    f.set_name(M.showInfo ? g.getInfo() : g.getName()),
                    c = f.get_graphics(),
                    c.beginFill(16711680),
                    Rc.drawPolygon(c, g.cell.poly),
                    this.addChild(f)
            };
            h["com.watabou.perilous.mapping.TooltipLayer"] = yf;
            yf.__name__ = "com.watabou.perilous.mapping.TooltipLayer";
            yf.handleTooltips = function(a) {
                if (a instanceof yf) {
                    a = xa.__cast(a, yf);
                    var b = Ca.group("features");
                    Ca.setOpacity(b, 0);
                    for (var c = 0, d = a.get_numChildren(); c < d; ) {
                        var f = c++
                          , g = a.getChildAt(f);
                        f = ha.drawSprite(g);
                        var k = da.createElement("title");
                        g = da.createPCData(g.get_name());
                        k.addChild(g);
                        f.addChild(k);
                        b.addChild(f)
                    }
                    return b
                }
                return null
            }
            ;
            yf.__super__ = T;
            yf.prototype = v(T.prototype, {
                __class__: yf
            });
            var hc = function() {};
            h["com.watabou.perilous.mapping.clouds.Cloud"] = hc;
            hc.__name__ = "com.watabou.perilous.mapping.clouds.Cloud";
            hc.draw = function(a, b, c, d, f) {
                null == f && (f = 0);
                var g = b + (c - b) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)
                  , k = new B(b,0)
                  , q = new B(c,0)
                  , p = Math.max(-d, f)
                  , h = function() {
                    return Math.pow((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647, 2)
                };
                c = [k, new B(b + (g - b) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),d * h()), new B(g,d), new B(g + (c - g) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),d * h()), q, new B(c + (g - c) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),f * h()), new B(g,f), new B(g + (b - g) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),f * h())];
                c = jc.render(c, !0, 3, [k, q]);
                k = c.splice(0, c.length >> 2);
                for (b = 0; b < k.length; )
                    q = k[b],
                    ++b,
                    c.push(q);
                k = [c[0]];
                b = new sg(c.concat([c[0]]));
                for (q = 0; ; )
                    if (q += hc.chord * Math.pow(2, Math.abs(k[k.length - 1].y) / p * 2 - 1) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647),
                    f = b.getPos(q),
                    null != f)
                        k.push(f);
                    else
                        break;
                p = xc.distort(k);
                a.fill(hc.fillColor);
                a.draw(hc.fillColor, x.normal);
                a.polygon(p);
                a.end();
                c = p.length;
                b = [];
                for (d = 0; d < c; )
                    f = d++,
                    k = new hk(p[f],p[(f + 1) % c]),
                    q = (1 - hc.chaos * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)) / hc.fluffiness,
                    q = Math.PI * Math.pow(k.d / (k.d + hc.chord), q),
                    k.setSinCos(Math.sin(q), Math.cos(q)),
                    a.fill(hc.fillColor),
                    f = k.p0,
                    a.g.moveTo(f.x, f.y),
                    hc.drawArc(a.g, k.c.x, k.c.y, k.r, k.a0, k.a1),
                    a.end(),
                    4 != x.shadingMode && (a.draw(x.black, x.thick),
                    q = k.p0,
                    a.g.moveTo(q.x, q.y),
                    hc.drawArc(a.g, k.c.x, k.c.y, k.r, k.a0, k.a1),
                    a.end()),
                    b.push(k);
                q = b;
                if (4 != x.shadingMode)
                    for (a.useBrush(m(a, a.decay), x.black, x.thick, x.thin),
                    c = [],
                    q.sort(function(a, b) {
                        a = b.d - a.d;
                        return 0 == a ? 0 : 0 > a ? -1 : 1
                    }); 0 < q.length; ) {
                        f = q.length * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1) | 0;
                        k = q[f];
                        q.splice(f, 1);
                        d = new Vh(k.c,k.r);
                        f = !0;
                        for (b = 0; b < c.length; )
                            if (g = c[b],
                            ++b,
                            d.overlaps(g)) {
                                f = !1;
                                break
                            }
                        f && (f = B.polar(-k.r, (k.a0 + k.a1) / 2).add(k.c),
                        f = Vc.containsPoint(p, f));
                        if (f) {
                            b = k.r;
                            f = b / (2 * Math.PI / hc.minAngle) / hc.swirlTurns;
                            if (0 > k.v.x * k.v.y) {
                                g = k.a1;
                                h = hc.minAngle;
                                var u = [k.p1]
                            } else
                                g = k.a0,
                                h = -hc.minAngle,
                                u = [k.p0];
                            for (var n = b * (1 - hc.swirlDepth); (b -= f) > n; )
                                g += h,
                                u.push(B.polar(b, g).add(k.c));
                            a.trueStroke(u);
                            k = c.push(d);
                            k /= k + 4;
                            null == k && (k = .5);
                            if ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < k)
                                break
                        }
                    }
            }
            ;
            hc.drawArc = function(a, b, c, d, f, g) {
                for (var k = Math.ceil((g - f) / hc.minAngle), q = 0; q < k; ) {
                    var p = q++;
                    p = B.polar(d, f + (p + 1) / k * (g - f));
                    p = new B(p.x + b,p.y + c);
                    a.lineTo(p.x, p.y)
                }
            }
            ;
            var hk = function(a, b) {
                this.p0 = a;
                this.p1 = b;
                this.v = b.subtract(a);
                this.d = this.v.get_length()
            };
            h["com.watabou.perilous.mapping.clouds._Cloud.CloudSeg"] = hk;
            hk.__name__ = "com.watabou.perilous.mapping.clouds._Cloud.CloudSeg";
            hk.prototype = {
                setSinCos: function(a, b) {
                    this.r = this.d / 2 / a;
                    var c = -this.r * b;
                    this.c = sa.lerp(this.p0, this.p1);
                    a = this.v;
                    b = new B(-a.y,a.x);
                    a = this.c;
                    c = -c / this.d;
                    b = new B(b.x * c,b.y * c);
                    a.x += b.x;
                    a.y += b.y;
                    a = this.p0.subtract(this.c);
                    this.a0 = Math.atan2(a.y, a.x);
                    a = this.p1.subtract(this.c);
                    this.a1 = Math.atan2(a.y, a.x);
                    this.a1 < this.a0 && (this.a1 += 2 * Math.PI)
                },
                __class__: hk
            };
            var fi = function() {
                T.call(this)
            };
            h["com.watabou.perilous.mapping.clouds.CloudsLayer"] = fi;
            fi.__name__ = "com.watabou.perilous.mapping.clouds.CloudsLayer";
            fi.__super__ = T;
            fi.prototype = v(T.prototype, {
                update: function(a) {
                    if (this.set_visible(M.showClouds)) {
                        this.removeChildren();
                        hc.fillColor = x.clouds;
                        hc.chord = Math.min(a.width, a.height) / 30;
                        var b = a.width / 3
                          , c = a.height / 4
                          , d = b / 5
                          , f = c / 5
                          , g = .2 * Math.pow(ea.vantage, 2)
                          , k = a.viewWidth / 2;
                        a = a.viewHeight / 2;
                        for (var q = [], p = 0; 4 > p; )
                            for (var h = p++, u = 0; 10 > u; ) {
                                var n = u++
                                  , w = (h + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3) * Math.PI / 2
                                  , r = Math.sqrt(n / 9) * (Math.sqrt(2) - 1);
                                n = (1 + r) * Math.cos(w) * k;
                                w = (1 + r) * Math.sin(w) * a;
                                var C = r;
                                null == C && (C = .5);
                                C = d + (b - d) * C;
                                if (!(Math.abs(n) - C > k || (null == r && (r = .5),
                                r = f + (c - f) * r,
                                w + r * g < -a || w - r > a))) {
                                    var m = new T;
                                    m.set_x(n);
                                    m.set_y(w);
                                    hc.draw(new sc(m), -C, C, -r, r * g);
                                    q.push(m)
                                }
                            }
                        q.sort(function(a, b) {
                            a = a.get_y() - b.get_y();
                            return 0 == a ? 0 : 0 > a ? -1 : 1
                        });
                        for (p = 0; p < q.length; )
                            m = q[p],
                            ++p,
                            this.addChild(m)
                    }
                },
                __class__: fi
            });
            var me = function() {};
            h["com.watabou.perilous.mapping.elements.Banner"] = me;
            me.__name__ = "com.watabou.perilous.mapping.elements.Banner";
            me.draw = function(a, b, c, d) {
                c += 2 * d;
                var f = [-c / 2, c / 2];
                b = me.createCurve(b / 2, d);
                var g = zf.cutDistant(b, me.fromAbove);
                try {
                    var k = me.fromAbove;
                    zf.sortSegments(g, new B(k.x * c,k.y * c), !0)
                } catch (tl) {
                    Ua.lastError = tl;
                    var q = aa.caught(tl).unwrap();
                    console.log("Source/com/watabou/perilous/mapping/elements/Banner.hx:28:", q)
                }
                k = c / 4;
                for (var p = c / 4, h = 0, u = g.length; h < u; ) {
                    var n = h++;
                    n = g[n];
                    q = [];
                    var w = [];
                    var r = zf.extrudeDistant(n, f, me.fromAbove);
                    var C = r[0];
                    r = r[1];
                    var m = n.length - 1;
                    if (n[n.length - 1] == b[b.length - 1] && 0 < k) {
                        w = [];
                        var K = []
                          , z = 0;
                        do {
                            z += B.distance(n[m--], n[m]);
                            if (z > k)
                                break;
                            var A = z / k
                              , I = r[m]
                              , N = C[m];
                            w.push(sa.lerp(N, I, A / 2));
                            K.push(sa.lerp(I, N, A / 2))
                        } while (0 < m);
                        z > k && (A = B.distance(n[m + 1], n[m]),
                        A = (k - (z - A)) / A,
                        z = sa.lerp(r[m + 1], r[m], A),
                        A = sa.lerp(C[m + 1], C[m], A),
                        z = sa.lerp(z, A),
                        K.push(z));
                        w = w.concat(ia.revert(K))
                    }
                    z = 0;
                    if (n[0] == b[0] && 0 < p) {
                        q = [];
                        K = [];
                        A = 0;
                        do {
                            A += B.distance(n[z++], n[z]);
                            if (A > p)
                                break;
                            I = A / p;
                            N = r[z];
                            var t = C[z];
                            q.push(sa.lerp(t, N, I / 2));
                            K.push(sa.lerp(N, t, I / 2))
                        } while (z < n.length - 1);
                        A > p && (I = B.distance(n[z - 1], n[z]),
                        I = (p - (A - I)) / I,
                        A = sa.lerp(r[z - 1], r[z], I),
                        I = sa.lerp(C[z - 1], C[z], I),
                        A = sa.lerp(A, I),
                        K.push(A));
                        q = q.concat(ia.revert(K))
                    }
                    q = C.concat(w).concat(ia.revert(q.concat(r)));
                    a.drawThick();
                    a.fill(x.banner);
                    a.polygon(q);
                    w = n[1].subtract(n[0]);
                    K = me.fromAbove;
                    w = w.x * K.y - w.y * K.x;
                    0 == x.shadingMode ? me.shadeFolds(a, n, r, C, d / 2, n[0] != b[0], n[n.length - 1] != b[b.length - 1]) : 0 < w && (a.useBrush(null, x.black, x.thin),
                    a.fillArea(q, new B(0,1)));
                    if (4 != x.shadingMode && (0 > w || 1 == x.shadingMode || 3 == x.shadingMode)) {
                        a.useBrush(null, x.black, x.thick);
                        q = [];
                        for (w = z + 1; w < m; )
                            K = w++,
                            q.push(K);
                        m = q;
                        q = Cd.$length(n) / c;
                        w = q - (q | 0);
                        null == w && (w = .5);
                        for (w = (q | 0) + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < w ? 1 : 0); 0 < m.length && 0 < w--; )
                            K = ia.pick(m),
                            Q.remove(m, K - 1),
                            Q.remove(m, K + 1),
                            q = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? C[K] : r[K],
                            K = n[K].subtract(q),
                            z = x.thick + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1) * d,
                            K.normalize(z),
                            a.shortStroke(q, q.add(K))
                    }
                }
            }
            ;
            me.createCurve = function(a, b) {
                var c = function(c) {
                    var d = a * c
                      , g = [new B(d,0)]
                      , k = function(a, b) {
                        var f = g[g.length - 1].y;
                        g.push(new B(d + c * a,f - .5 * b * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)));
                        g.push(new B(d + c * a,f + b + .5 * b * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)));
                        g.push(new B(d,f + b));
                        c = -c
                    }
                      , q = function() {
                        return Math.pow(2, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)
                    };
                    k(b, b / 2 * q());
                    k(b * q(), b / 2 * q());
                    (function(a, b) {
                        var f = g[g.length - 1].y;
                        g.push(new B(d + c * b / 2,f));
                        g.push(new B(d + c * b,f + a * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)))
                    }
                    )(b, 3 * b);
                    return g
                };
                c = ia.revert(c(-1)).concat(c(1));
                return c = jc.render(c, !1, 2)
            }
            ;
            me.shadeFolds = function(a, b, c, d, f, g, k) {
                var q = function(g, k) {
                    for (var p = 1, q = b.length; p < q; ) {
                        var l = p++ * k;
                        if (Math.abs(b[g + l].x - b[g].x) > f) {
                            g = new B(b[g].x - b[g + l].x,b[g + l].y - b[g].y);
                            g.normalize(1);
                            k = function(a, b) {
                                return 0 < b ? a.slice(0, b) : a.slice(b)
                            }
                            ;
                            l = k(d, l).concat(ia.revert(k(c, l)));
                            a.fillArea(l, g);
                            break
                        }
                    }
                };
                a.useBrush(null, x.black, x.normal);
                g && q(0, 1);
                k && q(b.length - 1, -1)
            }
            ;
            var La = function(a) {
                this.manual = !1;
                this.scale = 0;
                var b = this;
                T.call(this);
                this.rhumbs = new be;
                this.rhumbs.mouseEnabled = !1;
                0 == La.convexity && this.init();
                this.update(a);
                this.addEventListener("click", m(this, this.onClick));
                this.addEventListener("rightClick", m(this, this.onRightClick));
                this.addEventListener("mouseWheel", m(this, this.onWheel));
                new mi(this,function() {
                    b.manual = !0
                }
                )
            };
            h["com.watabou.perilous.mapping.elements.Compass"] = La;
            La.__name__ = "com.watabou.perilous.mapping.elements.Compass";
            La.__super__ = T;
            La.prototype = v(T.prototype, {
                init: function() {
                    La.showRhumbs = Da.get("rhumbs", !0);
                    La.convexity = .2 + .1 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    La.secondary = La.convexity + (1 - La.convexity) * (.2 + .8 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                    La.mainRing = La.convexity + (1 - La.convexity) * (.2 + .8 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                    La.auxRing = La.convexity + (1 - La.convexity) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647);
                    La.north = 1.4 + .2 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    La.south = 1;
                    La.nipple = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? 0 : Math.max(.5 * La.convexity, .1)
                },
                reroll: function() {
                    La.convexity = .15 + .2 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647);
                    var a = .9;
                    null == a && (a = .5);
                    La.secondary = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? La.convexity + (1 - La.convexity) * (.1 + .9 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647)) : 0;
                    a = .8;
                    null == a && (a = .5);
                    (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? (La.mainRing = La.convexity + (1 - La.convexity) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),
                    La.auxRing = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) : La.mainRing = La.auxRing = 0;
                    a = Math.pow(1 - La.convexity, 2);
                    null == a && (a = .5);
                    (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? (La.north = 1.3 + .6 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),
                    a = .7,
                    null == a && (a = .5),
                    La.south = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? 1 + (La.north - 1) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3) : 1) : La.north = La.south = 1;
                    a = .3;
                    null == a && (a = .5);
                    (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a && (La.secondary = 1,
                    La.convexity = Math.pow(La.convexity, .7));
                    a = .3;
                    null == a && (a = .5);
                    La.nipple = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? Math.min(.1 + .2 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647), La.convexity) : 0;
                    this.redraw()
                },
                reset: function() {
                    this.set_rotation(0);
                    this.scale = 0;
                    this.redraw()
                },
                update: function(a) {
                    this.baseR = a;
                    this.redraw()
                },
                redraw: function() {
                    this.radius = this.baseR * Math.pow(2, this.scale);
                    this.rhumbs.update(this.radius * La.mainRing);
                    var a = this.get_graphics();
                    a.clear();
                    a.beginFill(16711680, 0);
                    a.drawCircle(0, 0, this.radius);
                    a.endFill();
                    var b = new sc(this);
                    0 < La.mainRing && (a.lineStyle(x.thick, x.black),
                    b.circle(0, 0, this.radius * La.mainRing),
                    a.lineStyle(x.normal, x.black),
                    b.circle(0, 0, this.radius * La.auxRing),
                    b.end());
                    1 == La.secondary ? this.drawStarN(b, 8, 1, La.convexity) : (this.drawStarN(b, 4, La.secondary, La.convexity * La.secondary, .5),
                    this.drawStarN(b, 4, 1, La.convexity));
                    0 < La.nipple && (b.drawThick(),
                    b.fill(x.compass),
                    b.circle(0, 0, this.radius * La.nipple),
                    b.end(),
                    b.fill(x.black),
                    b.circle(0, 0, x.thick),
                    b.end())
                },
                drawStarN: function(a, b, c, d, f) {
                    null == f && (f = 0);
                    for (var g = 2 * Math.PI / b, k = [], q = 0, p = b; q < p; ) {
                        var l = q++
                          , h = this.radius * c;
                        0 == f && (l == 3 * (b >> 2) && (h *= La.north),
                        l == b >> 2 && (h *= La.south));
                        k.push(B.polar(h, g * (l + f)));
                        k.push(B.polar(this.radius * d, g * (l + f + .5)))
                    }
                    a.fill(x.compass);
                    a.polygon(k);
                    a.useBrush(m(a, a.decay), x.black, x.thin);
                    q = 0;
                    for (p = b; q < p; )
                        l = q++,
                        a.fillArea([k[2 * l], k[2 * l + 1], La.o], B.polar(1, g * (1.5 - f - l)));
                    a.end();
                    a.drawThick();
                    a.polygon(k);
                    if (2 != x.shadingMode)
                        for (a.drawThin(),
                        c = function(c) {
                            a.line(k[c].x, k[c].y, k[c + b].x, k[c + b].y)
                        }
                        ,
                        q = 0,
                        p = b >> 1; q < p; )
                            l = q++,
                            c(2 * l),
                            3 == x.shadingMode && c(2 * l + 1);
                    a.end()
                },
                onClick: function(a) {
                    a.ctrlKey || a.commandKey ? this.reset() : a.shiftKey && this.reroll();
                    a.stopPropagation()
                },
                onRightClick: function(a) {
                    Za.menu.addItem("Compass...", m(this, this.customize));
                    Za.menu.addSeparator()
                },
                onWheel: function(a) {
                    if (a.commandKey || a.ctrlKey)
                        a = a.delta,
                        this.scale = Zb.gate(this.scale + .1 * (0 == a ? 0 : 0 > a ? -1 : 1), -1, 1),
                        this.redraw();
                    else {
                        var b = this.get_rotation();
                        a = a.delta;
                        this.set_rotation(b + 360 / be.NLINES * (0 == a ? 0 : 0 > a ? -1 : 1))
                    }
                },
                place: function(a, b, c, d, f) {
                    b += this.radius;
                    c += this.radius * La.north;
                    d -= this.radius;
                    f -= this.radius * La.south;
                    for (var g = Math.ceil(this.radius / ea.hexInner), k = null, q = function(a) {
                        return a.land ? null != a.site ? 20 : a.mountain || a.riverside || a.coastal ? 5 : xa.getClass(a.terrain) != k ? 3 : 2 : null == a.terrain ? 0 : 1
                    }, p = function(a, b) {
                        k = xa.getClass(a.terrain);
                        var c = q(a);
                        if (c > b)
                            return NaN;
                        var d = [a.face];
                        a = [a.face];
                        for (var f = 0; f < g; ) {
                            for (var p = f++, n = [], l = 0; l < a.length; ) {
                                var h = a[l];
                                ++l;
                                ia.addAll(n, h.getNeighbours())
                            }
                            a = ia.difference(n, d);
                            for (d = 0; d < a.length; )
                                if (l = a[d],
                                ++d,
                                c += q(l.data) / (p + 1),
                                c > b)
                                    return NaN;
                            if (c > b)
                                return NaN;
                            d = n
                        }
                        return c
                    }, l = [], h = 0, n = a.dcel.faces; h < n.length; ) {
                        var u = n[h];
                        ++h;
                        var w = u.data.center;
                        w.x >= b && w.x <= d && w.y >= c && w.y <= f && l.push(u)
                    }
                    h = l;
                    0 == h.length && (h.push(a.getCell(new B((b + d) / 2,(c + f) / 2)).face),
                    f - c < d - b ? (h.push(a.getCell(new B(b,(c + f) / 2)).face),
                    h.push(a.getCell(new B(d,(c + f) / 2)).face)) : (h.push(a.getCell(new B((b + d) / 2,c)).face),
                    h.push(a.getCell(new B((b + d) / 2,f)).face)));
                    b = null;
                    c = Infinity;
                    for (l = 0; l < h.length; )
                        u = h[l],
                        ++l,
                        u = u.data,
                        d = p(u, c),
                        isNaN(d) || (d == c ? b.push(u) : (c = d,
                        b = [u]));
                    if (null == b)
                        this.set_x(this.set_y(0));
                    else if (1 == b.length)
                        w = b[0].center,
                        this.set_x(w.x),
                        this.set_y(w.y);
                    else {
                        var r = new B;
                        if ("land" != Z.template) {
                            l = p = 0;
                            for (h = a.dcel.faces; l < h.length; )
                                u = h[l],
                                ++l,
                                u.data.land && (a = u.data.center,
                                r.x += a.x,
                                r.y += a.y,
                                ++p);
                            l = 1 / p;
                            r.x *= l;
                            r.y *= l
                        }
                        u = ia.max(b, function(a) {
                            return B.distance(a.center, r)
                        });
                        this.set_x(u.center.x);
                        this.set_y(u.center.y)
                    }
                    this.rhumbs.update(this.radius * La.mainRing)
                },
                customize: function() {
                    null == w.findForm(Af) && w.showDialog(new Af(this))
                },
                set_visible: function(a) {
                    this.rhumbs.set_visible(a && La.showRhumbs);
                    return T.prototype.set_visible.call(this, a)
                },
                set_x: function(a) {
                    this.rhumbs.set_x(a);
                    this.rhumbs.update(this.radius * La.mainRing);
                    return T.prototype.set_x.call(this, a)
                },
                set_y: function(a) {
                    this.rhumbs.set_y(a);
                    this.rhumbs.update(this.radius * La.mainRing);
                    return T.prototype.set_y.call(this, a)
                },
                __class__: La
            });
            var uf = function() {
                this.manual = !1;
                var a = this;
                T.call(this);
                new mi(this,function() {
                    a.manual = !0
                }
                );
                this.addEventListener("click", m(this, this.onClick));
                this.addEventListener("rightClick", m(this, this.onRightClick))
            };
            h["com.watabou.perilous.mapping.elements.Header"] = uf;
            uf.__name__ = "com.watabou.perilous.mapping.elements.Header";
            uf.__super__ = T;
            uf.prototype = v(T.prototype, {
                update: function(a) {
                    var b = ea.inst.name;
                    null != this.tf && (this.manual && this.tf.text != b && (this.manual = !1),
                    this.removeChild(this.tf));
                    var c = this.get_graphics();
                    c.clear();
                    null != this.outline && (this.removeChild(this.outline),
                    this.outline.destroy(),
                    this.outline = null);
                    if (a == Qc.HIDDEN)
                        this.set_visible(!1);
                    else
                        switch (this.set_visible(!0),
                        this.tf = new Ge(b,x.formatTitle),
                        this.tf.layoutStraight(),
                        this.addChild(this.tf),
                        a._hx_index) {
                        case 0:
                            a = this.tf.get_width() + 2 * uf.MARGIN;
                            b = this.tf.get_height() + 2 * uf.MARGIN;
                            c.beginFill(x.banner);
                            c.lineStyle(x.thick, x.black, null, null, null, 2, 1);
                            c.drawRect(-a / 2, -b / 2, a, b);
                            break;
                        case 1:
                            c = new sc(this);
                            me.draw(c, this.tf.get_width(), this.tf.get_height(), uf.MARGIN);
                            break;
                        case 2:
                            x.outlineColor != x.textColor && this.tf.set_filters(Ib.outlineGlow)
                        }
                },
                place: function(a, b, c) {
                    var d = b.x
                      , f = b.y
                      , g = b.get_right();
                    b = b.get_bottom();
                    var k = ea.hexRadius * ea.vantage / 2
                      , q = this.getBounds(this);
                    q.inflate(k, k);
                    k = d - q.get_left();
                    var p = g - q.get_right();
                    d = (d + g) / 2;
                    f -= q.get_top();
                    b -= q.get_bottom();
                    q.inflate(ea.hexRadius, ea.hexRadius);
                    f = ia.min([new B(k,f), new B(p,f), new B(k,b), new B(p,b), new B(d,f), new B(d,b)], function(b) {
                        var d = q.clone();
                        d.offsetPoint(b);
                        if (null != c && d.intersects(c))
                            return Infinity;
                        b = 0;
                        d = a.getCells(d);
                        for (var f = 0; f < d.length; ) {
                            var g = d[f];
                            ++f;
                            b += g.land ? null != g.site ? 20 : g.mountain || g.riverside || g.coastal ? 5 : 2 : null == g.terrain ? 0 : 1
                        }
                        return b
                    });
                    this.set_x(f.x);
                    this.set_y(f.y)
                },
                onClick: function(a) {
                    a.stopPropagation()
                },
                onRightClick: function(a) {
                    Za.menu.addItem("Rename...", m(this, this.rename));
                    Za.menu.addSeparator()
                },
                rename: function() {
                    null == w.findForm(Yf) && w.showDialog(new Yf(ea.inst.name,function(a) {
                        ea.inst.name = a;
                        M.updateLabels()
                    }
                    ))
                },
                exportAsPNG: function() {
                    x.outlineColor != x.textColor && null != this.tf && null != this.tf.get_filters() && (this.tf.set_filters(null),
                    this.outline = new jh(this.tf,x.outlineColor,x.normal,8),
                    this.addChildAt(this.outline, 0))
                },
                __class__: uf
            });
            var gi = function() {
                T.call(this)
            };
            h["com.watabou.perilous.mapping.elements.Matte"] = gi;
            gi.__name__ = "com.watabou.perilous.mapping.elements.Matte";
            gi.__super__ = T;
            gi.prototype = v(T.prototype, {
                update: function(a) {
                    var b = new sc(this,!0)
                      , c = ea.hexRadius * ea.vantage
                      , d = a.viewWidth / 2
                      , f = d - c;
                    a = a.viewHeight / 2;
                    c = a - c;
                    d = [new B(-d,-a), new B(d,-a), new B(d,a), new B(-d,a)];
                    a = [new B(-f,-c), new B(-f,c), new B(f,c), new B(f,-c)];
                    b.fill(x.matte);
                    b.multiPolygon([d, a]);
                    b.end();
                    b.g.lineStyle(2 * x.thick, x.black, null, null, null, 2, 1);
                    b.polygon(a);
                    b.end();
                    f = f + 2 * x.thick + x.normal;
                    c = c + 2 * x.thick + x.normal;
                    b.g.lineStyle(x.normal, x.black, null, null, null, 2, 1);
                    b.rect(-f, -c, 2 * f, 2 * c)
                },
                __class__: gi
            });
            var be = function() {
                T.call(this)
            };
            h["com.watabou.perilous.mapping.elements.RhumbNexus"] = be;
            be.__name__ = "com.watabou.perilous.mapping.elements.RhumbNexus";
            be.__super__ = T;
            be.prototype = v(T.prototype, {
                update: function(a) {
                    if (null != ea.inst) {
                        var b = ea.inst.viewWidth / 2
                          , c = ea.inst.viewHeight / 2
                          , d = this.get_graphics();
                        d.clear();
                        d.lineStyle(x.ultraThin, x.black);
                        for (var f = 0, g = be.NLINES; f < g; ) {
                            var k = f++
                              , q = k / be.NLINES * Math.PI * 2;
                            k = Math.sin(q);
                            q = Math.cos(q);
                            var p = (0 > q ? -b - this.get_x() : b - this.get_x()) / q
                              , l = (0 > k ? -c - this.get_y() : c - this.get_y()) / k;
                            p = Math.min(p, l);
                            0 < p && (d.moveTo(a * q, a * k),
                            d.lineTo(p * q, p * k))
                        }
                    }
                },
                __class__: be
            });
            var zf = function() {};
            h["com.watabou.perilous.mapping.elements.Ribbons"] = zf;
            zf.__name__ = "com.watabou.perilous.mapping.elements.Ribbons";
            zf.cut = function(a, b) {
                if (null == a)
                    return null;
                if (0 == a.length)
                    return [];
                if (1 == a.length)
                    return [[a[0]]];
                var c = a[1]
                  , d = [a[0], c]
                  , f = b(d[0], c);
                var g = [d];
                for (var k = 2, q = a.length; k < q; ) {
                    var p = k++
                      , l = c;
                    c = a[p];
                    p = b(l, c);
                    0 > p * f ? (d = [l, c],
                    g.push(d),
                    f = p) : d.push(c)
                }
                return g
            }
            ;
            zf.cutDistant = function(a, b) {
                return zf.cut(a, function(a, d) {
                    a = d.subtract(a);
                    return a.x * b.y - a.y * b.x
                })
            }
            ;
            zf.sortSegments = function(a, b, c) {
                for (var d = 0, f = a.length * a.length; ; ) {
                    for (var g = !0, k = 0, q = a.length - 1; k < q; ) {
                        for (var p = k++, l = a[p], h = l.length, n = l[0], u = l[h - 1], w = p + 1, r = a.length; w < r; ) {
                            for (var C = w++, x = !1, m = a[C], z = m.length, K = m[0], A = m[z - 1], I = 0, B = [n, u]; I < B.length; ) {
                                var N = B[I];
                                ++I;
                                if (!x && N != K && N != A)
                                    for (var t = c ? b : b.subtract(N), v = 0, D = z - 1; v < D; ) {
                                        var E = v++
                                          , wa = m[E];
                                        E = m[E + 1];
                                        wa = sa.intersectLines(N.x, N.y, t.x, t.y, wa.x, wa.y, E.x - wa.x, E.y - wa.y);
                                        if (null != wa && 0 > wa.x && 0 <= wa.y && 1 >= wa.y) {
                                            x = !0;
                                            break
                                        }
                                    }
                            }
                            z = 0;
                            for (K = [K, A]; z < K.length; )
                                if (A = K[z],
                                ++z,
                                !x && A != n && A != u)
                                    for (I = c ? b : b.subtract(A),
                                    B = 0,
                                    N = h - 1; B < N; )
                                        if (v = B++,
                                        t = l[v],
                                        v = l[v + 1],
                                        t = sa.intersectLines(A.x, A.y, I.x, I.y, t.x, t.y, v.x - t.x, v.y - t.y),
                                        null != t && 0 < t.x && 1 > t.x && 0 <= t.y && 1 >= t.y) {
                                            x = !0;
                                            break
                                        }
                            if (x) {
                                g = !1;
                                a.splice(C, 1);
                                a.splice(p, 0, m);
                                break
                            }
                        }
                        if (!g)
                            break
                    }
                    if (g)
                        break;
                    else if (++d > f)
                        throw aa.thrown("*** failed to sort segments ***");
                }
            }
            ;
            zf.extrudeDistant = function(a, b, c) {
                for (var d = b.length, f = [], g = 0, k = d; g < k; )
                    g++,
                    f.push([]);
                var q = f;
                for (f = 0; f < a.length; ) {
                    var p = a[f];
                    ++f;
                    g = 0;
                    for (k = d; g < k; ) {
                        var l = g++
                          , h = c
                          , n = b[l];
                        null == n && (n = 1);
                        h = h.clone();
                        h.normalize(n);
                        h = p.add(h);
                        q[l].push(h)
                    }
                }
                return q
            }
            ;
            var Ba = function() {
                T.call(this);
                Ba.inst = this;
                this.light = new T;
                this.light.set_blendMode(0);
                this.light.mouseEnabled = !1;
                this.addChild(this.light);
                this.dark = new T;
                this.dark.set_blendMode(9);
                this.dark.mouseEnabled = !1;
                this.addChild(this.dark);
                this.addEventListener("mouseDown", m(this, this.onMouseDown));
                this.mouseEnabled = this.mouseChildren = !1
            };
            h["com.watabou.perilous.mapping.elements.Spotlight"] = Ba;
            Ba.__name__ = "com.watabou.perilous.mapping.elements.Spotlight";
            Ba.enable = function(a) {
                Da.set("spotlight", M.showLight = a);
                null != Ba.inst && Ba.inst.set_visible(a)
            }
            ;
            Ba.activate = function(a) {
                Ba.inst.mouseEnabled = Ba.inst.mouseChildren = a
            }
            ;
            Ba.update = function(a) {
                Ba.inst.redraw(a)
            }
            ;
            Ba.reset = function() {
                Ba.balance = .7;
                Ba.opaLight = .2;
                Ba.satLight = .5;
                Ba.opaDark = .2;
                Ba.satDark = .5;
                Ba.spotFocus = new B;
                Ba.frontAnchor = new B(-1,-1)
            }
            ;
            Ba.adjust = function(a, b) {
                a = 0 == a ? Ba.GREY : $b.scale(a, $b.brightness(Ba.GREY) / $b.brightness(a));
                return 1 > b ? $b.lerp(Ba.GREY, a, Ba.satDark) : a
            }
            ;
            Ba.__super__ = T;
            Ba.prototype = v(T.prototype, {
                redraw: function(a) {
                    null != a && (this.w2 = a.width / 2,
                    this.h2 = a.height / 2);
                    a = this.light.get_graphics();
                    a.clear();
                    var b = this.dark.get_graphics();
                    b.clear();
                    var c = Ba.type == Ba.SPOTLIGHT ? 1 : 0
                      , d = 255 * Ba.balance | 0
                      , f = new ta;
                    if (Ba.type == Ba.FRONT) {
                        var g = Ba.frontAnchor
                          , k = this.h2;
                        null == k && (k = 1);
                        k = new B(g.x * this.w2,g.y * k);
                        if (0 == k.x) {
                            g = 0;
                            var q = k.y;
                            q = (0 == q ? 0 : 0 > q ? -1 : 1) * this.h2
                        } else
                            Math.abs(k.y / k.x) > this.h2 / this.w2 ? (q = k.y,
                            q = (0 == q ? 0 : 0 > q ? -1 : 1) * this.h2,
                            g = q / k.y * k.x) : (q = k.x,
                            g = (0 == q ? 0 : 0 > q ? -1 : 1) * this.w2,
                            q = g / k.x * k.y);
                        k = 2 * Math.sqrt(g * g + q * q);
                        f.createGradientBox(k, k, Math.atan2(-q, -g), -k / 2, -k / 2)
                    } else
                        g = Ba.spotFocus,
                        k = this.h2,
                        null == k && (k = 1),
                        k = new B(g.x * this.w2,g.y * k),
                        q = [],
                        g = new B(-this.w2,-this.h2),
                        q.push(B.distance(k, g)),
                        g = new B(this.w2,-this.h2),
                        q.push(B.distance(k, g)),
                        g = new B(-this.w2,this.h2),
                        q.push(B.distance(k, g)),
                        g = new B(this.w2,this.h2),
                        q.push(B.distance(k, g)),
                        g = ia.max(q, function(a) {
                            return a
                        }),
                        f.createGradientBox(2 * g, 2 * g, 0, -g + k.x, -g + k.y);
                    0 < d && (g = Ba.adjust(Ba.clrLight, Ba.satLight),
                    a.beginGradientFill(c, [g, g], [Ba.opaLight, 0], [0, d], f),
                    a.drawRect(-this.w2, -this.h2, 2 * this.w2, 2 * this.h2));
                    255 > d && (g = Ba.adjust(Ba.clrDark, Ba.satDark),
                    b.beginGradientFill(c, [g, g], [0, Ba.opaDark], [d, 255], f),
                    b.drawRect(-this.w2, -this.h2, 2 * this.w2, 2 * this.h2))
                },
                onMouseDown: function(a) {
                    this.stage.addEventListener("mouseMove", m(this, this.onMouseMove));
                    this.stage.addEventListener("mouseUp", m(this, this.onMouseUp));
                    this.onMouseMove(a);
                    a.stopImmediatePropagation();
                    a.stopPropagation();
                    a.preventDefault()
                },
                onMouseUp: function(a) {
                    this.stage.removeEventListener("mouseMove", m(this, this.onMouseMove));
                    this.stage.removeEventListener("mouseUp", m(this, this.onMouseUp));
                    a.stopImmediatePropagation();
                    a.stopPropagation();
                    a.preventDefault()
                },
                onMouseMove: function(a) {
                    (Ba.type == Ba.FRONT ? Ba.frontAnchor : Ba.spotFocus).setTo(this.get_mouseX() / this.w2, this.get_mouseY() / this.h2);
                    this.redraw(null);
                    a.updateAfterEvent()
                },
                __class__: Ba
            });
            var le = function() {
                T.call(this)
            };
            h["com.watabou.perilous.mapping.labels.MapLabel"] = le;
            le.__name__ = "com.watabou.perilous.mapping.labels.MapLabel";
            le.__super__ = T;
            le.prototype = v(T.prototype, {
                getFormat: function() {
                    return null
                },
                setOutline: function(a) {
                    this.set_filters(a ? Ib.outlineGlow : null)
                },
                exportAsPNG: function() {
                    this.setOutline(!1);
                    if (x.outlineColor != x.textColor) {
                        var a = new jh(this,x.outlineColor,x.normal,8);
                        this.addChildAt(a, 0)
                    }
                },
                __class__: le
            });
            var Md = function(a, b) {
                T.call(this);
                var c = new Ge(b,this.getFormat())
                  , d = Md.largestPatch(a);
                a = new B;
                for (var f = 0, g = 0; g < d.length; ) {
                    var k = d[g];
                    ++g;
                    k = k.data.center;
                    a.x += k.x;
                    a.y += k.y;
                    ++f
                }
                g = 1 / f;
                a.x *= g;
                a.y *= g;
                k = ac.outline(d);
                g = [];
                for (f = 0; f < k.length; ) {
                    var q = k[f];
                    ++f;
                    g.push(ld.toPoly(q))
                }
                k = g;
                k[0] = Md.smooth(k[0]);
                q = ea.inst.width / 2;
                var p = ea.inst.height / 2;
                for (g = 0; g < k.length; ) {
                    var l = k[g];
                    ++g;
                    f = 0;
                    for (var h = l.length; f < h; ) {
                        var n = f++;
                        n = l[n];
                        n.x = Zb.gate(n.x, -q, q);
                        n.y = Zb.gate(n.y, -p, p)
                    }
                }
                g = Ib.mode == Ib.ARCED && 1 < d.length ? Vc.obb(k[0]) : Vc.aabb(k[0]);
                q = g[0].subtract(g[3]);
                d = g[1].subtract(g[0]);
                Math.abs(d.y / d.x) > Math.pow(d.get_length() / q.get_length(), 2) && (q = g[1].subtract(g[0]),
                d = g[2].subtract(g[1]));
                n = new B(a.x + .5,a.y + .5);
                g = Md.largestSpan(Ce.pierceMulti(k, n, n.add(q)));
                l = g[0];
                h = g[1];
                var u = null;
                p = -Infinity;
                g = 0;
                for (f = Md.marks; g < f.length; ) {
                    var w = f[g];
                    ++g;
                    n = sa.lerp(l, h, w);
                    n = new B(n.x + .5,n.y + .5);
                    n = Md.largestSpan(Ce.pierceMulti(k, n, n.add(d)));
                    var r = B.distance(n[0], n[1]);
                    .5 != w && (r *= .999);
                    p < r && (p = r,
                    u = n)
                }
                g = sa.lerp(u[0], u[1]);
                f = new T;
                f.addChild(c);
                n = c.proto.get_textWidth() + 0 * (c.text.length - 1);
                k = Zb.gate(Math.sqrt(p / n), .5, 2);
                b = (n * k < p ? Math.max(n * k, p - 2 * ea.hexRadius) / k - n : 0) / b.length;
                Ib.mode == Ib.ARCED ? (a = 2 * ii.project(q, g.subtract(a)),
                a = 0 < a ? Math.sqrt(a) : -Math.sqrt(-a),
                a = q.get_length() / (2 * a),
                0 < d.x && (a = -a),
                c.layoutArced(a, b)) : c.layoutStraight(b);
                f.set_scaleX(f.set_scaleY(k));
                f.set_rotation(Math.atan(d.y / d.x) / Math.PI * 180);
                f.set_x(g.x);
                f.set_y(g.y);
                this.addChild(f)
            };
            h["com.watabou.perilous.mapping.labels.AreaLabel"] = Md;
            Md.__name__ = "com.watabou.perilous.mapping.labels.AreaLabel";
            Md.largestSpan = function(a) {
                for (var b = -1, c = 0, d = 0; d + 1 < a.length; ) {
                    var f = B.distance(a[d], a[d + 1]);
                    c < f && (c = f,
                    b = d);
                    d += 2
                }
                return [a[b], a[b + 1]]
            }
            ;
            Md.largestPatch = function(a) {
                return ia.max(ac.split(a), function(a) {
                    return a.length
                })
            }
            ;
            Md.smooth = function(a) {
                for (var b = a.length, c = [], d = 0; d < b; ) {
                    var f = d++
                      , g = a[f]
                      , k = a[(f + b - 1) % b];
                    f = a[(f + 1) % b];
                    c.push(new B(.5 * (g.x + .5 * (k.x + f.x)),.5 * (g.y + .5 * (k.y + f.y))))
                }
                return c
            }
            ;
            Md.__super__ = le;
            Md.prototype = v(le.prototype, {
                getFormat: function() {
                    return x.formatArea
                },
                __class__: Md
            });
            var tg = function(a, b, c) {
                T.call(this);
                this.tf = oc.get(a, this.getFormat());
                this.addChild(this.tf);
                var d = 3 * ea.hexRadius;
                if (this.tf.get_textWidth() > d) {
                    var f = (new Ta("[ ]+","g")).split(a);
                    if (1 < f.length) {
                        for (var g = 0, k = 0; k < f.length; ) {
                            var q = f[k];
                            ++k;
                            this.tf.set_text(q);
                            q = Math.ceil(this.tf.get_textWidth());
                            g < q && (g = q)
                        }
                        this.tf.set_text(a);
                        this.tf.set_wordWrap(!0);
                        if (g < d) {
                            this.tf.set_width(d + 4);
                            a = this.tf.get_numLines();
                            do
                                d = this.tf,
                                d.set_width(d.get_width() - 2);
                            while (this.tf.get_numLines() == a && this.tf.get_width() > g + 4);
                            d = this.tf;
                            d.set_width(d.get_width() + 2)
                        } else
                            this.tf.set_width(g + 4)
                    }
                }
                this.tf.set_x(b - this.tf.get_width() / 2);
                this.tf.set_y(c - this.tf.get_height() / 2)
            };
            h["com.watabou.perilous.mapping.labels.PointLabel"] = tg;
            tg.__name__ = "com.watabou.perilous.mapping.labels.PointLabel";
            tg.__super__ = le;
            tg.prototype = v(le.prototype, {
                __class__: tg
            });
            var $e = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                tg.call(this, b, a.center.x, a.center.y);
                0 < c && (a = this.tf,
                a.set_x(a.get_x() + (this.tf.get_width() / 2 + c)));
                0 > c && (a = this.tf,
                a.set_x(a.get_x() - (this.tf.get_width() / 2 - c)));
                0 < d && (a = this.tf,
                a.set_y(a.get_y() + (this.tf.get_height() / 2 + d)));
                0 > d && (a = this.tf,
                a.set_y(a.get_y() - (this.tf.get_height() / 2 - d)))
            };
            h["com.watabou.perilous.mapping.labels.CellLabel"] = $e;
            $e.__name__ = "com.watabou.perilous.mapping.labels.CellLabel";
            $e.__super__ = tg;
            $e.prototype = v(tg.prototype, {
                getFormat: function() {
                    return x.formatTown
                },
                __class__: $e
            });
            var li = function(a) {
                $e.call(this, a.cell, a.getName(), 0, .5 * ea.hexRadius * x.dangerScale)
            };
            h["com.watabou.perilous.mapping.labels.DangerLabel"] = li;
            li.__name__ = "com.watabou.perilous.mapping.labels.DangerLabel";
            li.__super__ = $e;
            li.prototype = v($e.prototype, {
                getFormat: function() {
                    return x.formatDanger
                },
                __class__: li
            });
            var xf = function(a, b) {
                T.call(this);
                b = new Ge(b,this.getFormat());
                this.addChild(b);
                a = ia.max(ac.split(a), function(a) {
                    return a.length
                });
                a = ld.toPoly(ac.outline(a)[0]);
                for (var c = a.length, d = [], f = 0; f < c; ) {
                    var g = f++;
                    d.push(sa.lerp(a[(g + 1) % c], sa.lerp(a[g], a[(g + 2) % c])))
                }
                xc.simplify(d, Math.pow(3, 1.5) * Math.pow(ea.hexRadius, 2) / 2);
                a = xf.getRidge(d);
                a = xf.getRidgeSegment(a, b.proto.get_textWidth() + 0 * (b.text.length - 1));
                b.layoutCurved(a)
            };
            h["com.watabou.perilous.mapping.labels.SkeletonLabel"] = xf;
            xf.__name__ = "com.watabou.perilous.mapping.labels.SkeletonLabel";
            xf.getRidge = function(a) {
                for (var b = new Uf(a,!0); 0 < b.ribs.length; ) {
                    for (var c = [], d = 0; d < a.length; )
                        b = a[d],
                        ++d,
                        c.push(b.add(B.polar(1, 2 * Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647))));
                    a = c;
                    b = new Uf(a,!0)
                }
                var f = 0
                  , g = null
                  , k = null;
                c = 0;
                for (d = a.length - 1; c < d; )
                    for (var q = c++, p = q + 1, h = a.length; p < h; ) {
                        var u = p++
                          , n = a[q];
                        u = a[u];
                        var w = B.distance(n, u) + Math.abs(n.x - u.x);
                        f < w && (f = w,
                        g = n,
                        k = u)
                    }
                a = b.leaves.h[g.__id__];
                k = b.leaves.h[k.__id__];
                c = [];
                d = 0;
                for (p = b.getPath(a, k); d < p.length; )
                    b = p[d],
                    ++d,
                    c.push(b.point);
                return c
            }
            ;
            xf.getRidgeSegment = function(a, b) {
                var c = new sg(jc.render(a, !1))
                  , d = c.length()
                  , f = .9 * d;
                b = f > b ? .5 * (f + b) : f;
                d = (d - b) / 2;
                f = [];
                for (var g = 0; 5 > g; ) {
                    var k = g++;
                    f.push(c.getPos(d + b * k / 4))
                }
                xc.visvalingam(f, 3);
                f.unshift(a[0]);
                f.push(a[a.length - 1]);
                a = qf.smoothOpen(f, 4);
                a = a.slice(4, -4);
                a[0].x > a[a.length - 1].x && a.reverse();
                return a
            }
            ;
            xf.__super__ = le;
            xf.prototype = v(le.prototype, {
                getFormat: function() {
                    return x.formatArea
                },
                __class__: xf
            });
            var Ge = function(a, b) {
                T.call(this);
                this.text = a;
                this.format = b;
                this.proto = new Oc;
                this.proto.set_autoSize(1);
                this.proto.set_defaultTextFormat(b);
                this.proto.set_text(a)
            };
            h["com.watabou.perilous.mapping.labels.TextFieldEx"] = Ge;
            Ge.__name__ = "com.watabou.perilous.mapping.labels.TextFieldEx";
            Ge.__super__ = T;
            Ge.prototype = v(T.prototype, {
                layoutStraight: function(a) {
                    null == a && (a = 0);
                    this.dispose();
                    var b = a;
                    null == b && (b = 0);
                    b = this.proto.get_textWidth() + (this.text.length - 1) * b;
                    for (var c = 0, d = this.text.length; c < d; ) {
                        var f = c++
                          , g = this.getChar(this.text.charAt(f));
                        this.addChild(g);
                        var k = this.proto.getCharBoundaries(f);
                        g.set_x(k.x + k.width / 2 + a * f - b / 2);
                        g.set_y(0)
                    }
                },
                layoutArced: function(a, b) {
                    null == b && (b = 0);
                    this.dispose();
                    var c = b;
                    null == c && (c = 0);
                    c = this.proto.get_textWidth() + (this.text.length - 1) * c;
                    Math.abs(a) < c / Math.PI && (a = c / Math.PI * (0 == a ? 0 : 0 > a ? -1 : 1));
                    for (var d = c / a, f = 0, g = this.text.length; f < g; ) {
                        var k = f++
                          , q = this.getChar(this.text.charAt(k));
                        this.addChild(q);
                        var p = this.proto.getCharBoundaries(k);
                        k = ((p.x - 2 + .5 * p.width + b * k) / c - .5) * d;
                        q.set_rotation(-k / Math.PI * 180);
                        q.set_x(a * Math.sin(k));
                        q.set_y(a * Math.cos(k) - a)
                    }
                },
                layoutCurved: function(a) {
                    this.dispose();
                    a = new sg(a);
                    var b = a.length()
                      , c = this.proto.get_textWidth()
                      , d = b / c
                      , f = 0;
                    1 < d && (d = Math.min(Math.sqrt(d), 2),
                    1 < this.text.length && (f = (b - c * d) / (this.text.length - 1)));
                    b = (b - (c * d + f * (this.text.length - 1))) / 2;
                    c = 0;
                    for (var g = this.text.length; c < g; ) {
                        var k = c++
                          , q = this.proto.getCharBoundaries(k);
                        q = a.getPos(b + (q.x + .5 * q.width) * d + k * f);
                        k = this.getChar(this.text.charAt(k));
                        this.addChild(k);
                        var p = a.get_tangent();
                        k.set_rotation(Math.atan2(p.y, p.x) / Math.PI * 180);
                        k.set_scaleX(k.set_scaleY(d));
                        k.set_x(q.x);
                        k.set_y(q.y)
                    }
                },
                dispose: function() {
                    for (var a = 0, b = this.get_numChildren(); a < b; ) {
                        var c = a++;
                        c = this.getChildAt(c);
                        Ge.cache.push(c)
                    }
                    this.removeChildren()
                },
                getChar: function(a) {
                    var b = 0 == Ge.cache.length ? new ni : Ge.cache.pop();
                    b.set(a, this.format);
                    return b
                },
                __class__: Ge
            });
            var ni = function() {
                T.call(this);
                this.tf = new Oc;
                this.tf.set_selectable(!1);
                this.tf.set_autoSize(1);
                this.addChild(this.tf)
            };
            h["com.watabou.perilous.mapping.labels._TextFieldEx.Char"] = ni;
            ni.__name__ = "com.watabou.perilous.mapping.labels._TextFieldEx.Char";
            ni.__super__ = T;
            ni.prototype = v(T.prototype, {
                set: function(a, b) {
                    this.tf.set_defaultTextFormat(b);
                    this.tf.set_text(a);
                    this.tf.set_x(-this.tf.get_width() / 2);
                    this.tf.set_y(-this.tf.get_height() / 2)
                },
                __class__: ni
            });
            var ki = function(a, b, c) {
                this.town = a;
                $e.call(this, a.cell, a.getName(), 0, Hb.getBaseline() + Hb.getLabelPos(a));
                a = a.getOffset();
                b = this.tf;
                b.set_x(b.get_x() + a.x);
                b = this.tf;
                b.set_y(b.get_y() + a.y * ea.vantage)
            };
            h["com.watabou.perilous.mapping.labels.TownLabel"] = ki;
            ki.__name__ = "com.watabou.perilous.mapping.labels.TownLabel";
            ki.__super__ = $e;
            ki.prototype = v($e.prototype, {
                getFormat: function() {
                    switch (this.town.type._hx_index) {
                    case 0:
                        var a = .8;
                        break;
                    case 1:
                        a = 1;
                        break;
                    case 2:
                        a = 1.2
                    }
                    return x.scaleFormat(x.formatTown, a)
                },
                __class__: ki
            });
            var md = function() {};
            h["com.watabou.perilous.mapping.sprites.CachedDrawing"] = md;
            md.__name__ = "com.watabou.perilous.mapping.sprites.CachedDrawing";
            md.reset = function(a) {
                if (null == a)
                    md.cache.h = Object.create(null);
                else {
                    var b = md.cache;
                    Object.prototype.hasOwnProperty.call(b.h, a) && delete b.h[a]
                }
            }
            ;
            md.draw = function(a, b, c, d) {
                null == c && (c = 10);
                var f = md.cache.h[b];
                null == f && (f = [],
                md.cache.h[b] = f);
                f.length >= c ? a.drawGraphicsData(ia.random(f)) : (d(),
                f.push(a.readGraphicsData(!1)))
            }
            ;
            var Sc = function() {
                T.call(this);
                md.draw(this.get_graphics(), "danger", 2, m(this, this.draw))
            };
            h["com.watabou.perilous.mapping.sprites.DangerSprite"] = Sc;
            Sc.__name__ = "com.watabou.perilous.mapping.sprites.DangerSprite";
            Sc.buildShapes = function(a) {
                Sc.shape = jc.render([new B(-1 * a,.5 * a), new B(-1 * a,-1 * a), new B(a,-1 * a), new B(a,.5 * a), new B(.75 * a,.5 * a), new B(.5 * a,.5 * a), new B(.5 * a,a), new B(.25 * a,a), new B(-.25 * a,a), new B(-.5 * a,a), new B(-.5 * a,.5 * a), new B(-.75 * a,.5 * a)], !0, 3);
                Sc.leftEye = jc.render([new B(-.75 * a,-.35 * a), new B(-.75 * a,.25 * a), new B(-.25 * a,.25 * a), new B(-.15 * a,-.25 * a)], !0, 3);
                Sc.rightEye = jc.render([new B(.15 * a,-.25 * a), new B(.25 * a,.25 * a), new B(.75 * a,.25 * a), new B(.75 * a,-.35 * a)], !0, 3);
                Sc.nose = jc.render([new B(0 * a,0 * a), new B(-.2 * a,.5 * a), new B(0 * a,.5 * a), new B(.2 * a,.5 * a)], !0, 3);
                Sc.strokes = [[new B(-.16666666666666666 * a,a), new B(-.16666666666666666 * a,.75 * a)], [new B(.16666666666666666 * a,a), new B(.16666666666666666 * a,.75 * a)]]
            }
            ;
            Sc.__super__ = T;
            Sc.prototype = v(T.prototype, {
                draw: function() {
                    var a = new sc(this)
                      , b = 20 * x.dangerScale;
                    Sc.buildShapes(b);
                    a.brush = m(a, a.middle);
                    b = 1 + x.thick / b;
                    a.useBrush(m(a, a.middle), x.black, x.thin);
                    a.fillArea(rc.scale(Sc.shape, b, b), Sc.dir);
                    a.drawNormal();
                    a.fill(x.danger);
                    a.multiPolygon([Sc.shape, Sc.leftEye, Sc.rightEye, Sc.nose]);
                    a.useBrush(null, x.black, x.normal, x.thin);
                    b = 0;
                    for (var c = Sc.strokes; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        a.shortStroke(d[0], d[1])
                    }
                },
                __class__: Sc
            });
            var hi = function() {
                T.call(this);
                md.draw(this.get_graphics(), "dune", 5, m(this, this.draw))
            };
            h["com.watabou.perilous.mapping.sprites.DuneSprite"] = hi;
            hi.__name__ = "com.watabou.perilous.mapping.sprites.DuneSprite";
            hi.__super__ = T;
            hi.prototype = v(T.prototype, {
                draw: function() {
                    var a = ea.hexRadius / 2
                      , b = a * (1 - .5 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))
                      , c = b * (.4 + .1 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3))
                      , d = new sc(this);
                    d.brush = m(d, d.middle);
                    var f = new B
                      , g = new B(f.x,f.y + -c)
                      , k = new B(f.x + -b,f.y)
                      , q = sa.lerp(f, sa.lerp(k, g, .5 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), .9);
                    a = new B(f.x + b,f.y);
                    var p = sa.lerp(f, sa.lerp(a, g, Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), .7);
                    q = [a, p, g, q, k];
                    q = jc.render(q, !1, 3);
                    d.fill(x.earth);
                    d.polygon(q.concat([new B(f.x,f.y + 5)]));
                    d.end();
                    d.drawThin();
                    d.polyline(q);
                    b = new B(.5 * b,c);
                    b.normalize(1);
                    c = 0;
                    p = q[c].y;
                    for (var h = 1, u = q.length; h < u; ) {
                        var n = h++;
                        p > q[n].y && (p = q[n].y,
                        c = n)
                    }
                    q = q.slice(0, c + 1);
                    a = jc.render([q[q.length - 1], sa.lerp(k, sa.lerp(g, f), .7), sa.lerp(a, f), a], !1, 2);
                    a.shift();
                    a.pop();
                    a = q.concat(a);
                    d.useBrush(null, x.black, x.thin);
                    d.fillArea(a, new B(-b.x,b.y))
                },
                __class__: hi
            });
            var cd = function() {
                this.meadow = this.swamp = !1;
                T.call(this)
            };
            h["com.watabou.perilous.mapping.sprites.GrassSprite"] = cd;
            cd.__name__ = "com.watabou.perilous.mapping.sprites.GrassSprite";
            cd.drawBlade = function(a, b, c, d) {
                b *= x.clutterScale;
                d *= x.clutterScale * (1 - .5 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                a.trueStroke(jc.render([new B(b), new B(b * (1 + c / 2),.75 * -d), new B(b * (1 + c),-d)], !1, 2))
            }
            ;
            cd.grass = function() {
                var a = new cd;
                a.meadow = !0;
                md.draw(a.get_graphics(), "grass", 5, function() {
                    var b = new sc(a);
                    b.useBrush(null, x.black, x.thin);
                    cd.drawBlade(b, -1 - 5 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3), .5, 5);
                    cd.drawBlade(b, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1, .5, 6);
                    cd.drawBlade(b, 1 + 5 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3), .5, 5)
                });
                return a
            }
            ;
            cd.reed = function() {
                var a = new cd;
                a.swamp = !0;
                md.draw(a.get_graphics(), "reed", null, function() {
                    var b = new sc(a);
                    b.useBrush(null, x.black, x.thin);
                    .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 && (cd.drawBlade(b, -1 - 4 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3), 1, 6),
                    cd.drawBlade(b, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1, 1, 9),
                    cd.drawBlade(b, 1 + 4 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3), 1, 6));
                    var c = 6 * Math.sqrt(x.clutterScale);
                    b.useBrush(m(b, b.middle), x.black, x.thin);
                    b.shortStroke(new B(-c * (1 + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))), new B(c * (1 + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))))
                });
                return a
            }
            ;
            cd.__super__ = T;
            cd.prototype = v(T.prototype, {
                __class__: cd
            });
            var gc = function(a, b) {
                T.call(this);
                x.ruggedMountains ? this.rugged(a, b) : this.smooth(a, b)
            };
            h["com.watabou.perilous.mapping.sprites.MountainSprite"] = gc;
            gc.__name__ = "com.watabou.perilous.mapping.sprites.MountainSprite";
            gc.fill = function(a, b, c) {
                if (x.mountain != x.earth) {
                    var d = new ta;
                    b = Math.sqrt(b * b + c * c);
                    d.createGradientBox(2 * b, 2 * b, 0, -b, 2 * -b);
                    a.g.beginGradientFill(1, [x.mountain, x.earth], [1, 1], [128, 255], d)
                } else
                    a.fill(x.earth)
            }
            ;
            gc.wobble = function(a, b, c) {
                null == c && (c = .5);
                for (var d = a.length, f = [], g = 0; g < d; ) {
                    var k = g++
                      , q = a[k];
                    0 == k || k == d - 1 || -1 != b.indexOf(q) ? f.push(q) : f.push(new B(q.x,q.y + Math.min(Math.abs(a[k - 1].y - q.y), Math.abs(q.y - a[k + 1].y)) * c * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)))
                }
                return f
            }
            ;
            gc.__super__ = T;
            gc.prototype = v(T.prototype, {
                smooth: function(a, b) {
                    var c = new sc(this)
                      , d = gc.o
                      , f = new B(d.x,d.y + -b);
                    d = gc.o;
                    var g = new B(d.x + -a,d.y + -10 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))
                      , k = sa.lerp(gc.o, sa.lerp(g, f, Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), .9);
                    d = gc.o;
                    var q = new B(d.x + a,d.y + -10 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))
                      , p = sa.lerp(gc.o, sa.lerp(q, f, Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), .9);
                    d = gc.o;
                    d = new B(d.x,d.y + .1 * b * ea.vantage);
                    k = [q, p, f, k, g];
                    k = jc.render(k, !1, 3);
                    gc.fill(c, a, b);
                    c.polygon(k.concat([d]));
                    c.end();
                    4 != x.shadingMode && (c.useBrush(m(c, c.middle), x.black, x.thick, x.thin),
                    c.trueStroke(k));
                    a = new B(2 * a,-b);
                    a.normalize(1);
                    b = 0;
                    p = k[b].y;
                    for (var h = 1, u = k.length; h < u; ) {
                        var n = h++;
                        p > k[n].y && (p = k[n].y,
                        b = n)
                    }
                    k = k.slice(0, b + 1);
                    f = jc.render([k[k.length - 1], sa.lerp(q, sa.lerp(f, gc.o), .7), sa.lerp(g, d), sa.lerp(q, d), q], !1, 2);
                    f.shift();
                    f.pop();
                    f = k.concat(f);
                    c.useBrush(m(c, c.middle), x.black, x.thin);
                    c.fillArea(f, a)
                },
                rugged: function(a, b) {
                    var c = new sc(this)
                      , d = gc.o
                      , f = new B(d.x,d.y + -b);
                    d = gc.o;
                    var g = new B(d.x,d.y + -a);
                    d = gc.o;
                    var k = new B(d.x + -a,d.y + -10 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                    d = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                    var q = sa.lerp(gc.o, sa.lerp(k, g, d * d), .9);
                    d = gc.o;
                    var p = new B(d.x + a,d.y + -10 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                    d = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                    var h = sa.lerp(gc.o, sa.lerp(p, g, d * d), .9);
                    g = new B(f.x + 10 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 - .5),f.y);
                    k = g.x < f.x ? [p, h, f, g, q, k] : [p, h, g, f, q, k];
                    k = gc.wobble(k, [f], .5);
                    k = jc.render(k, !1, 2, [f]);
                    k = gc.wobble(k, [f], b / a);
                    gc.fill(c, a, b);
                    c.polygon(k.concat([gc.ob]));
                    4 != x.shadingMode && (c.useBrush(m(c, c.middle), x.black, x.thick, x.thin),
                    c.trueStroke(k));
                    if (4 != x.shadingMode)
                        for (h = k.length >> 1,
                        c.useBrush(m(c, c.decay), x.black, x.normal, x.ultraThin),
                        q = h + 1,
                        g = k.length - 1; q < g; ) {
                            d = q++;
                            h = k[d];
                            var u = k[d + 1];
                            d = h.subtract(k[d - 1]);
                            u = u.subtract(h);
                            var n = d.x * u.y - d.y * u.x;
                            0 < n && n / d.get_length() / u.get_length() > 1 + h.y / b && (u = -h.y * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3),
                            null == u && (u = 1),
                            d = d.clone(),
                            d.normalize(u),
                            c.shortStroke(h, h.add(d)))
                        }
                    u = Math.sqrt(1.5 * b) | 0;
                    f = [f];
                    q = 0;
                    for (g = u; q < g; )
                        h = q++,
                        d = f[h],
                        h = (h + 1) / u,
                        f.push(new B(.5 * d.x + h * a * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - .5),d.y + b / u));
                    q = f[f.length - 1];
                    q.y += .1 * b * ea.vantage;
                    f.push(new B(.5 * q.x + .5 * p.x,.8 * q.y + .2 * p.y));
                    a = new B(2 * -a,-b);
                    a.normalize(1);
                    b = k.slice(0, k.length >> 1).concat(f);
                    c.useBrush(null, x.black, x.thin);
                    c.fillArea(b, a)
                },
                __class__: gc
            });
            var nd = function() {};
            h["com.watabou.perilous.mapping.sprites.Options"] = nd;
            nd.__name__ = "com.watabou.perilous.mapping.sprites.Options";
            var ne = N["com.watabou.perilous.mapping.sprites.TownType"] = {
                __ename__: "com.watabou.perilous.mapping.sprites.TownType",
                __constructs__: null,
                VILLAGE: {
                    _hx_name: "VILLAGE",
                    _hx_index: 0,
                    __enum__: "com.watabou.perilous.mapping.sprites.TownType",
                    toString: r
                },
                TOWN: {
                    _hx_name: "TOWN",
                    _hx_index: 1,
                    __enum__: "com.watabou.perilous.mapping.sprites.TownType",
                    toString: r
                },
                CITY: {
                    _hx_name: "CITY",
                    _hx_index: 2,
                    __enum__: "com.watabou.perilous.mapping.sprites.TownType",
                    toString: r
                }
            };
            ne.__constructs__ = [ne.VILLAGE, ne.TOWN, ne.CITY];
            ne.__empty_constructs__ = [ne.VILLAGE, ne.TOWN, ne.CITY];
            var oe = N["com.watabou.perilous.mapping.sprites.TownLayer"] = {
                __ename__: "com.watabou.perilous.mapping.sprites.TownLayer",
                __constructs__: null,
                NORMAL: {
                    _hx_name: "NORMAL",
                    _hx_index: 0,
                    __enum__: "com.watabou.perilous.mapping.sprites.TownLayer",
                    toString: r
                },
                OUTLINE: {
                    _hx_name: "OUTLINE",
                    _hx_index: 1,
                    __enum__: "com.watabou.perilous.mapping.sprites.TownLayer",
                    toString: r
                },
                INNER: {
                    _hx_name: "INNER",
                    _hx_index: 2,
                    __enum__: "com.watabou.perilous.mapping.sprites.TownLayer",
                    toString: r
                }
            };
            oe.__constructs__ = [oe.NORMAL, oe.OUTLINE, oe.INNER];
            oe.__empty_constructs__ = [oe.NORMAL, oe.OUTLINE, oe.INNER];
            var wf = function(a) {
                null == a && (a = !0);
                this.house_many_doors = this.house_flat_roof = this.tower_square = this.tower_no_roof = this.tower_crown = !1;
                this.flag_folds = 5;
                this.flag_swing = 1;
                this.flag_width = 6;
                this.flag_length = 20;
                this.tower_roof_onion = 0;
                this.tower_roof_concave = .4;
                this.tower_roof_slope = 3;
                this.tower_roof_radius = 1.5;
                this.tower_nub_ratio = .4;
                this.tower_max_height = 60;
                this.tower_min_height = 40;
                this.tower_max_radius = 7;
                this.tower_min_radius = 5;
                this.house_spheric_roof = 0;
                this.house_spine_concave = .96;
                this.house_window_shape = .4;
                this.house_window_width = 2;
                this.house_window_height = 6;
                this.house_door_width = 3;
                this.house_door_height = 8;
                this.house_side = 10;
                this.house_wall_slope = .05;
                this.house_roof_slope = 1.8;
                this.house_max_width = 30;
                this.house_min_width = 15;
                this.house_max_height = 30;
                this.house_min_height = 10;
                this.house_room_width = 15;
                this.house_floor_height = 20;
                if (a) {
                    l.reset(G.random(1073741823));
                    a = .3;
                    null == a && (a = .5);
                    this.house_many_doors = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a;
                    a = .2;
                    null == a && (a = .5);
                    this.house_flat_roof = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a;
                    this.house_floor_height = 15 + 10 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    a = this.house_many_doors ? 10 : 15;
                    this.house_room_width = a + (7 - a) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                    this.house_min_height = .5 * this.house_floor_height;
                    this.house_max_height = this.house_floor_height * (1 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    this.house_min_width = 10 + 10 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    this.house_max_width = this.house_min_width * (1 + 2 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                    a = this.house_min_height;
                    this.house_door_height = .5 * (a + (this.house_floor_height - a) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                    this.house_door_width = this.house_door_height * (.25 + .25 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                    this.house_window_height = this.house_door_height * (.5 + .30000000000000004 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                    this.house_window_width = Math.min(this.house_window_height * (.3 + .7 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), this.house_door_width);
                    this.house_window_shape = Math.pow(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3, 2);
                    this.house_roof_slope = .4 + 2.8000000000000003 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    this.house_wall_slope = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1;
                    this.house_wall_slope *= 0 < this.house_wall_slope ? .2 : .1;
                    this.house_side = this.house_min_width / Math.pow(1.5, 2 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                    this.tower_min_radius = 4 + 4 * Math.pow(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3, 2);
                    this.tower_max_radius = this.tower_min_radius * (1 + 2 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                    this.tower_min_height = this.house_max_height * (1 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    this.tower_max_height = this.tower_min_height * (1 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3);
                    this.tower_roof_radius = 1 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647;
                    a = this.house_roof_slope;
                    this.tower_roof_slope = a + (2 * this.house_roof_slope - a) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647);
                    this.tower_roof_concave = -.4 + 1.2000000000000002 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647);
                    a = this.house_flat_roof ? .5 : .3333333333333333;
                    null == a && (a = .5);
                    (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a && (this.tower_roof_onion = .4 + .6 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                    a = .2;
                    null == a && (a = .5);
                    this.tower_square = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a;
                    a = .2;
                    null == a && (a = .5);
                    if (this.tower_no_roof = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a)
                        this.tower_min_height += this.house_floor_height / 2,
                        this.tower_max_height += this.house_floor_height / 2,
                        this.tower_min_radius += 2 * this.house_window_width,
                        this.tower_max_radius += 2 * this.house_window_width;
                    0 == this.tower_roof_onion ? (a = this.tower_no_roof ? .5 : .3,
                    null == a && (a = .5),
                    a = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a) : a = !1;
                    this.tower_crown = a;
                    this.house_spine_concave = 1 - this.tower_roof_concave / this.house_roof_slope * 1.2 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - .4);
                    this.tower_nub_ratio = 1 + -1 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647);
                    1 > this.tower_min_radius * (this.tower_roof_radius - 1) * this.tower_nub_ratio && (this.tower_nub_ratio = 0);
                    this.flag_length = 20 * Math.pow(2, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                    this.flag_folds = (this.flag_length / 4 | 0) + Math.floor((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 3);
                    this.flag_width = 4 + 8 * Math.pow(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3, 2);
                    this.flag_swing = Math.pow(2, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                    this.house_flat_roof && (this.house_roof_slope = 0,
                    this.house_spine_concave = 1,
                    this.house_min_height *= 1.5,
                    this.house_max_height *= 1.5,
                    this.house_spheric_roof = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647,
                    .3 > this.house_spheric_roof && (this.house_spheric_roof = 0))
                }
            };
            h["com.watabou.perilous.mapping.sprites.Design"] = wf;
            wf.__name__ = "com.watabou.perilous.mapping.sprites.Design";
            wf.prototype = {
                __class__: wf
            };
            var J = function() {
                this.right = 40;
                J.lastScale != x.townScale && (J.lastScale = x.townScale,
                J.updateScale());
                T.call(this);
                this.canvas = new sc(this)
            };
            h["com.watabou.perilous.mapping.sprites.TownIcon"] = J;
            J.__name__ = "com.watabou.perilous.mapping.sprites.TownIcon";
            J.setDesign = function(a) {
                J.design != a && (J.design = a,
                J.house_window_shape = J.design.house_window_shape,
                J.house_roof_slope = J.design.house_roof_slope,
                J.house_wall_slope = J.design.house_wall_slope,
                J.house_spine_concave = J.design.house_spine_concave,
                J.house_spheric_roof = J.design.house_spheric_roof,
                J.tower_roof_radius = J.design.tower_roof_radius,
                J.tower_nub_ratio = J.design.tower_nub_ratio,
                J.tower_roof_slope = J.design.tower_roof_slope,
                J.tower_roof_concave = J.design.tower_roof_concave,
                J.tower_roof_onion = J.design.tower_roof_onion,
                J.flag_swing = J.design.flag_swing,
                J.flag_folds = J.design.flag_folds,
                J.house_many_doors = J.design.house_many_doors,
                J.house_flat_roof = J.design.house_flat_roof,
                J.tower_square = J.design.tower_square,
                J.tower_no_roof = J.design.tower_no_roof,
                J.tower_crown = J.design.tower_crown,
                J.updateScale())
            }
            ;
            J.updateScale = function() {
                var a = x.townScale;
                J.xSpan = 20 * a;
                J.house_floor_height = a * J.design.house_floor_height;
                J.house_room_width = a * J.design.house_room_width;
                J.house_min_height = a * J.design.house_min_height;
                J.house_max_height = a * J.design.house_max_height;
                J.house_min_width = a * J.design.house_min_width;
                J.house_max_width = a * J.design.house_max_width;
                J.house_door_height = a * J.design.house_door_height;
                J.house_door_width = a * J.design.house_door_width;
                J.house_window_height = a * J.design.house_window_height;
                J.house_window_width = a * J.design.house_window_width;
                J.house_side = a * J.design.house_side;
                J.tower_min_radius = a * J.design.tower_min_radius;
                J.tower_max_radius = a * J.design.tower_max_radius;
                J.tower_min_height = a * J.design.tower_min_height;
                J.tower_max_height = a * J.design.tower_max_height;
                J.flag_length = a * J.design.flag_length;
                J.flag_width = a * J.design.flag_width
            }
            ;
            J.town = function(a, b, c) {
                null == c && (c = oe.NORMAL);
                l.reset(b);
                var d = new J;
                d.layer = c;
                var f = b = 0;
                switch (a._hx_index) {
                case 0:
                    b = Math.floor(2 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 2);
                    break;
                case 1:
                    b = Math.floor(3 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 3);
                    f = 1;
                    break;
                case 2:
                    b = Math.floor(5 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 3),
                    f = 2
                }
                c = function(a, b, c) {
                    null == c && (c = !0);
                    for (var f = [], g = 0; g < a; ) {
                        var k = g++;
                        f.push(B.polar(1, Math.PI * (k + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - .5) / (a - 1)))
                    }
                    g = f;
                    g.sort(function(a, b) {
                        a = a.y - b.y;
                        return 0 == a ? 0 : 0 > a ? -1 : 1
                    });
                    for (f = 0; f < g.length; ) {
                        var p = g[f];
                        ++f;
                        var q = 1 - Math.abs(p.x);
                        k = J.house_min_width;
                        k += (J.house_max_width - k) * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                        q = J.house_min_height + (J.house_max_height - J.house_min_height) * q * (.5 + .5 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        var h = Math.min(1, a / 3) * b * p.x - J.house_side / 2;
                        p = c ? p.y * b / 3 : -p.y * b / 3 - J.house_min_height / 2;
                        nd.sideView && c && (p = 0);
                        var u = .7;
                        null == u && (u = .5);
                        (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < u ? d.drawFrontHouse(h, p, k, q) : d.drawSideHouse(h, p, k, q)
                    }
                }
                ;
                a == ne.CITY && c(Math.floor(3 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * (b - 3)), J.xSpan, !1);
                d.canvas.end();
                if (1 == f) {
                    f = J.tower_min_radius;
                    var g = J.tower_min_height;
                    d.drawTower(J.xSpan * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - (.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? 1 : 0)), 0, f + (J.tower_max_radius - f) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647), g + (J.tower_max_height - g) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647))
                } else if (2 == f) {
                    g = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? 1 : 0;
                    f = J.tower_min_height;
                    var k = f + (J.tower_max_height - f) * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3)
                      , q = k * (1.1 + .3999999999999999 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                    f = J.tower_min_radius;
                    d.drawTower(J.xSpan * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - (1 - g)), 0, f + (J.tower_max_radius - f) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647), q);
                    f = J.tower_min_radius;
                    d.drawTower(J.xSpan * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - g), 0, f + (J.tower_max_radius - f) * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647), k)
                }
                c(b, (a == ne.CITY ? 1.4 : 1) * J.xSpan);
                return d
            }
            ;
            J.getBaseline = function() {
                return x.townScale * J.R / 2
            }
            ;
            J.__super__ = T;
            J.prototype = v(T.prototype, {
                drawFrontHouse: function(a, b, c, d) {
                    var f = c / 2
                      , g = f * J.house_roof_slope
                      , k = nd.rigid ? 0 : d * J.house_wall_slope
                      , q = k / 2
                      , p = g * (nd.rigid ? 0 : 1 - J.house_spine_concave)
                      , l = .75 * p;
                    this.canvas.fill(x.walls);
                    this.drawNormal();
                    this.canvas.polygon([new B(a + (-f - k),b), new B(a + -f,b + -d), new B(a,b + (-d - g)), new B(a + f,b + -d), new B(a + (f + q),b)]);
                    var h = new B(a + (f + q),b)
                      , n = new B(a + f,b + -d)
                      , u = new B(a,b + (-d - g))
                      , w = new B(a + .25 * J.house_side,b + (-d - g + l))
                      , r = new B(a + .5 * J.house_side,b + (-d - g + p))
                      , C = new B(a + .75 * J.house_side,b + (-d - g + l))
                      , m = new B(a + J.house_side,b + (-d - g))
                      , z = new B(a + (J.house_side + f),b + -d);
                    q = J.house_side + f + k;
                    k = b;
                    k = [h, n, u, w, r, C, m, z, new B(a + q,0 < k ? k * (this.right - (a + q)) / (this.right - a) : k)];
                    this.canvas.polygon(k);
                    x.roofs == x.walls || J.house_flat_roof ? this.canvas.line(a + f, b - d, a + f + J.house_side, b - d) : (this.canvas.fill(x.roofs),
                    this.canvas.polygon([new B(a + f,b + -d), new B(a,b + (-d - g)), new B(a + .25 * J.house_side,b + (-d - g + l)), new B(a + .5 * J.house_side,b + (-d - g + p)), new B(a + .75 * J.house_side,b + (-d - g + l)), new B(a + J.house_side,b + (-d - g)), new B(a + (J.house_side + f),b + -d)]));
                    this.canvas.useBrush(null, x.black, x.thin);
                    this.fillArea(k, J.hatching_dirSW);
                    this.canvas.end();
                    if (d > J.house_floor_height)
                        if (g = Math.round(c / J.house_room_width),
                        1 < g)
                            for (p = Math.ceil(d / J.house_floor_height),
                            l = 1,
                            h = p; l < h; )
                                for (k = l++,
                                k = b - d / p * (k + .5),
                                n = 0,
                                u = g; n < u; )
                                    q = n++,
                                    q = a - f + c / (g + 1) * (q + 1),
                                    this.drawWindow(q, k);
                        else
                            J.house_flat_roof || this.drawAttic(a, b - d);
                    if (J.house_many_doors)
                        for (g = Math.round(c / J.house_room_width),
                        l = 0,
                        h = g; l < h; )
                            q = l++,
                            q = a - f + c / (g + 1) * (q + 1),
                            this.drawDoor(q, b);
                    else
                        this.drawDoor(a, b);
                    0 < J.house_spheric_roof && this.drawSphericRoof(c, a + J.house_side / 2, b - d)
                },
                drawSideHouse: function(a, b, c, d) {
                    var f = c / 2
                      , g = f * J.house_roof_slope
                      , k = nd.rigid ? 0 : d * J.house_wall_slope
                      , q = k / 2
                      , p = g * (nd.rigid ? 0 : 1 - J.house_spine_concave)
                      , l = .75 * p;
                    this.canvas.fill(x.walls);
                    this.drawNormal();
                    this.canvas.polygon([new B(a + (-f - k),b), new B(a + -f,b + -d), new B(a + (-f + J.house_side / 2),b + (-d - g)), new B(a + (-f / 2 + J.house_side / 2),b + (-d - g + l)), new B(a + J.house_side / 2,b + (-d - g + p)), new B(a + (f / 2 + J.house_side / 2),b + (-d - g + l)), new B(a + (f + J.house_side / 2),b + (-d - g)), new B(a + f,b + -d), new B(a + (f + q),b)]);
                    this.canvas.line(a - f, b - d, a + f, b - d);
                    q = new B(a + (f + q),b);
                    var h = new B(a + f,b + -d)
                      , n = new B(a + (f + J.house_side / 2),b + (-d - g))
                      , u = new B(a + (f + J.house_side),b + -d);
                    k = f + J.house_side + k;
                    k = [q, h, n, u, new B(a + k,0 < b ? b * (this.right - (a + k)) / (this.right - a) : b)];
                    this.canvas.polygon(k);
                    x.roofs == x.walls || J.house_flat_roof || (this.canvas.fill(x.roofs),
                    this.canvas.polygon([new B(a + -f,b + -d), new B(a + (-f + J.house_side / 2),b + (-d - g)), new B(a + (-f / 2 + J.house_side / 2),b + (-d - g + l)), new B(a + J.house_side / 2,b + (-d - g + p)), new B(a + (f / 2 + J.house_side / 2),b + (-d - g + l)), new B(a + (f + J.house_side / 2),b + (-d - g)), new B(a + f,b + -d)]));
                    this.canvas.useBrush(null, x.black, x.thin);
                    this.fillArea(k, J.hatching_dirSW);
                    this.canvas.end();
                    g = Math.ceil(d / J.house_floor_height);
                    p = Math.round(2 * f / J.house_room_width);
                    for (l = 0; l < g; )
                        for (q = l++,
                        h = b - d / g * (q + .5),
                        n = 0,
                        u = p; n < u; )
                            k = n++,
                            k = a - f + c / (p + 1) * (k + 1),
                            0 == q && J.house_many_doors ? this.drawDoor(k, b) : this.drawWindow(k, h);
                    0 < J.house_spheric_roof && this.drawSphericRoof(c, a + J.house_side / 2, b - d)
                },
                drawSphericRoof: function(a, b, c) {
                    var d = J.house_spheric_roof * Math.PI / 2;
                    a = a / 2 / Math.sin(d);
                    for (var f = Math.cos(d) * a, g = Math.ceil(d / (Math.PI / 12)), k = [], q = 0; q < g; ) {
                        var p = q++;
                        p = B.polar(a, p / (g - 1) * d - Math.PI / 2);
                        k.push(new B(p.x,p.y + f))
                    }
                    this.drawConicRoof(k, b, c)
                },
                drawTower: function(a, b, c, d) {
                    var f = c * J.tower_roof_radius
                      , g = f * J.tower_roof_slope
                      , k = nd.rigid ? c : c * (1 + 5 * J.house_wall_slope);
                    this.canvas.fill(x.walls);
                    this.drawNormal();
                    var q = d
                      , p = c
                      , h = 0;
                    if (0 < J.tower_nub_ratio) {
                        q = d - J.house_floor_height;
                        var u = J.tower_nub_ratio;
                        null == u && (u = .5);
                        p = c + (f - c) * u;
                        h = p - c;
                        u = [new B(p,-d), new B(p,-q), new B(c,-q + h), new B(k,0)]
                    } else
                        u = [new B(c,-d), new B(k,0)];
                    this.drawCylinder(u, a, b, J.tower_square);
                    J.tower_no_roof ? J.tower_crown ? this.drawSpire(a, b - d - (J.house_floor_height / 2 + (f - p) / 2), J.flag_width / 2) : (this.drawBattlements(a - p, a + p * (J.tower_square ? J.SHADE : 1), b - d),
                    this.drawSpire(a, b - d, J.flag_width / 2)) : (u = b - d,
                    J.tower_crown && (u -= (f - p) / 2),
                    0 < J.tower_roof_onion ? this.drawOnion(a, u, p, g) : this.drawCone(a, u, f, g),
                    this.drawSpire(a, u - g));
                    J.tower_crown && this.drawCrown(a, b - d, p, f);
                    u = J.tower_nub_ratio;
                    null == u && (u = .5);
                    f = (c + (f - c) * u) * (J.tower_square ? (J.SHADE - 1) / 2 : ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                    this.drawWindow(a + f, b - d + J.house_floor_height / 2);
                    J.tower_square && 2 != x.shadingMode && (this.drawNormal(),
                    this.canvas.polyline(0 < J.tower_nub_ratio ? [new B(a + k * J.SHADE,b), new B(a + c * J.SHADE,b + (-q + h)), new B(a + p * J.SHADE,b + -q), new B(a + p * J.SHADE,b + -d)] : [new B(a + k * J.SHADE,b), new B(a + c * J.SHADE,b + -d)]),
                    this.canvas.end())
                },
                drawCylinder: function(a, b, c, d) {
                    for (var f = a.slice(), g = 0; g < a.length; ) {
                        var k = a[g];
                        ++g;
                        f.unshift(new B(-k.x,k.y))
                    }
                    this.drawNormal();
                    this.canvas.fill(x.walls);
                    this.canvas.polygonAt(f, b, c);
                    g = [];
                    for (f = 0; f < a.length; )
                        k = a[f],
                        ++f,
                        g.push(new B(k.x * J.SHADE,k.y));
                    a = a.concat(ia.revert(g));
                    rc.asTranslate(a, b, c);
                    this.canvas.useBrush(null, x.black, x.thin);
                    this.fillArea(a, d ? J.hatching_dirSW : J.hatching_dirNE);
                    this.canvas.end();
                    d && (this.drawNormal(),
                    this.canvas.polyline(g),
                    this.canvas.end())
                },
                drawBattlements: function(a, b, c) {
                    b -= a;
                    for (var d = Math.max(J.house_window_width, x.normal), f = Math.max(J.house_window_height, x.normal), g = Math.floor((b / d - 1) / 2), k = 1; k < g; ) {
                        var q = k++;
                        q = a + q / g * b;
                        this.drawFenestra([new B(q - d / 2,c), new B(q + d / 2,c), new B(q + d / 2,c + f), new B(q - d / 2,c + f)])
                    }
                },
                drawCrown: function(a, b, c, d) {
                    var f = J.house_floor_height / 2
                      , g = (d - c) / 2;
                    this.drawCylinder([new B(c,0), new B(d,-g), new B(d,-g - f)], a, b, J.tower_square);
                    this.drawBattlements(a - d, a + d * (J.tower_square ? J.SHADE : 1), b - g - f)
                },
                drawSpire: function(a, b, c) {
                    null == c && (c = 0);
                    var d = this;
                    if (nd.showFlags || nd.showPoles) {
                        var f = function(a, b, c) {
                            d.canvas.drawNormal();
                            d.canvas.line(a, b, a, b - c)
                        }
                          , g = function(a, b) {
                            l.save();
                            var c = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? 1 : 0
                              , f = new B(a + J.flag_length,b - J.flag_width / 2)
                              , g = new B(a,b);
                            a = new B(a,b - J.flag_width);
                            b = [f];
                            for (var k = J.flag_length / J.flag_folds * J.flag_swing, p = 1, q = J.flag_folds; p < q; ) {
                                var h = p++
                                  , u = (h + (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 - .5)) / J.flag_folds;
                                h = k * u * ((h & 1) == c ? 1 : -1);
                                h *= .5 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647;
                                var w = sa.lerp(f, g, u);
                                b.push(new B(w.x,w.y + h));
                                u = sa.lerp(f, a, u);
                                b.unshift(new B(u.x,u.y + h))
                            }
                            b.push(g);
                            b.unshift(a);
                            b = jc.render(b, !1, 2, [f]);
                            4 != x.shadingMode && (d.canvas.draw(x.earth, 2 * x.thin),
                            d.canvas.polygon(b),
                            d.canvas.end());
                            d.canvas.fill(x.flags);
                            d.canvas.polygon(b);
                            l.restore()
                        };
                        if (nd.showFlags) {
                            var k = x.thin + x.normal / 2;
                            nd.showPoles ? (g(a, b - k - c),
                            f(a, b, J.flag_width + k + c)) : g(a - x.thin / 2, b - k - c)
                        } else
                            f(a, b, J.flag_width)
                    }
                },
                drawDoor: function(a, b) {
                    var c = Math.max(J.house_door_width, x.normal)
                      , d = J.house_door_height
                      , f = c * J.house_window_shape
                      , g = f / 2;
                    this.drawFenestra([new B(a + -c / 2,b), new B(a + -c / 2,b + (-d + f)), new B(a + (-c / 2 + g),b + -d), new B(a + (c / 2 - g),b + -d), new B(a + c / 2,b + (-d + f)), new B(a + c / 2,b)])
                },
                drawWindow: function(a, b) {
                    var c = Math.max(J.house_window_width, x.normal)
                      , d = Math.max(J.house_window_height, x.normal)
                      , f = c * J.house_window_shape
                      , g = f / 2;
                    this.drawFenestra([new B(a + c / 2,b + d / 2), new B(a + c / 2,b + (-d / 2 + f)), new B(a + (c / 2 - g),b + -d / 2), new B(a + (-c / 2 + g),b + -d / 2), new B(a + -c / 2,b + (-d / 2 + f)), new B(a + -c / 2,b + d / 2)])
                },
                drawAttic: function(a, b) {
                    var c = rg.regular(12, Math.max(J.house_window_width, x.normal) / 2);
                    rc.asTranslate(c, a, b);
                    this.drawFenestra(c)
                },
                drawFenestra: function(a) {
                    this.canvas.end();
                    nd.darkDoors || 2 == x.shadingMode ? (this.canvas.fill(x.black),
                    this.canvas.polygon(a)) : (this.canvas.drawThin(),
                    this.canvas.fill(x.walls),
                    this.canvas.polygon(a),
                    this.canvas.useBrush(null, x.black, x.thin),
                    this.fillArea(a, J.hatching_dirNE));
                    this.canvas.end()
                },
                drawConicRoof: function(a, b, c, d) {
                    null == d && (d = !1);
                    var f = rc.scale(a, -1, 1);
                    f.reverse();
                    0 == a[0].x && (a = a.slice(1));
                    this.canvas.fill(x.roofs);
                    this.drawNormal();
                    this.canvas.polygonAt(a.concat(f), b, c);
                    this.canvas.end();
                    this.canvas.useBrush(null, x.black, x.thin);
                    a = a.concat(rc.scale(f, -J.SHADE, 1));
                    rc.asTranslate(a, b, c);
                    this.fillArea(a, d ? J.hatching_dirW : J.hatching_dirE);
                    this.canvas.end();
                    d && 3 == x.shadingMode && (this.drawNormal(),
                    d = rc.scale(f, -J.SHADE, 1),
                    rc.asTranslate(d, b, c),
                    this.canvas.polyline(d))
                },
                drawCone: function(a, b, c, d) {
                    var f = d > c ? new B(0,-((d * d - c * c) / (2 * d))) : new B((c * c - d * d) / (2 * c),-d);
                    c = jc.render([new B(0,-d), sa.lerp(new B(c / 2,-d / 2), f, J.tower_roof_concave), new B(c,0)], !1, 2);
                    this.drawConicRoof(c, a, b, J.tower_square)
                },
                drawOnion: function(a, b, c, d) {
                    var f = new B(0,-d);
                    d = new B(c * (1 - J.tower_roof_concave),-d / 2);
                    var g = new B(c,0);
                    c = g.subtract(B.polar(c, Math.PI * J.tower_roof_onion));
                    for (var k = [], q = 0; 8 > q; ) {
                        var p = q++ / 7
                          , l = sa.lerp(f, d, p)
                          , h = sa.lerp(d, c, p)
                          , n = sa.lerp(c, g, p);
                        l = sa.lerp(l, h, p);
                        h = sa.lerp(h, n, p);
                        k.push(sa.lerp(l, h, p))
                    }
                    this.drawConicRoof(k, a, b)
                },
                drawNormal: function() {
                    switch (this.layer._hx_index) {
                    case 1:
                        this.canvas.draw(x.black, 2 * x.thick - x.thin);
                        break;
                    case 2:
                        this.canvas.drawThin();
                        break;
                    default:
                        this.canvas.drawNormal()
                    }
                },
                fillArea: function(a, b) {
                    this.layer != oe.OUTLINE && (l.save(),
                    this.canvas.fillArea(a, b),
                    l.restore())
                },
                __class__: J
            });
            var Hb = function() {
                T.call(this)
            };
            h["com.watabou.perilous.mapping.sprites.TownSprite"] = Hb;
            Hb.__name__ = "com.watabou.perilous.mapping.sprites.TownSprite";
            Hb.icon = function(a) {
                var b = new Hb;
                M.uniformTowns ? J.setDesign(Hb.commonDesign) : (null == a.design && (a.design = new wf),
                J.setDesign(a.design));
                switch (a.type._hx_index) {
                case 0:
                    var c = ne.VILLAGE;
                    break;
                case 1:
                    c = ne.TOWN;
                    break;
                case 2:
                    c = ne.CITY
                }
                l.run(a.cityscape, function() {
                    var d = a.cityscape;
                    return Hb.outline ? (b.addChild(J.town(c, d, oe.OUTLINE)),
                    b.addChild(J.town(c, d, oe.INNER))) : b.addChild(J.town(c, d, oe.NORMAL))
                });
                return b
            }
            ;
            Hb.getBaseline = function() {
                return !M.showTowns || M.pinTowns ? 0 : J.getBaseline() * ea.vantage
            }
            ;
            Hb.getLabelPos = function(a) {
                if (M.pinTowns) {
                    switch (a.type._hx_index) {
                    case 0:
                        var b = 8;
                        break;
                    case 1:
                        b = 15;
                        break;
                    case 2:
                        b = 20
                    }
                    a = -b
                } else
                    a = 10;
                return x.townScale * a
            }
            ;
            Hb.pin = function(a) {
                var b = new Hb
                  , c = b.get_graphics();
                c.beginFill(x.flags);
                switch (a.type._hx_index) {
                case 0:
                    c.drawCircle(0, 0, 8 * x.townScale);
                    break;
                case 1:
                    Hb.drawRhombus(c, 15 * x.townScale);
                    a = 15 * x.townScale - x.thick * Hb.sqrt2;
                    0 < a && (c.beginFill(x.roofs),
                    Hb.drawRhombus(c, a));
                    break;
                case 2:
                    Hb.drawRhombus(c, 20 * x.townScale),
                    a = 20 * x.townScale - x.thick * Hb.sqrt2,
                    0 < a && (c.beginFill(x.roofs),
                    Hb.drawRhombus(c, a),
                    c.beginFill(x.flags),
                    c.drawCircle(0, 0, Math.min(a, 8 * x.townScale)))
                }
                return b
            }
            ;
            Hb.drawRhombus = function(a, b) {
                a.moveTo(-b, 0);
                a.lineTo(0, -b);
                a.lineTo(b, 0);
                a.lineTo(0, b);
                a.endFill()
            }
            ;
            Hb.__super__ = T;
            Hb.prototype = v(T.prototype, {
                __class__: Hb
            });
            var Yd = function(a, b) {
                null == a && (a = 0);
                this.seed = 0 != a ? a : l.seed = 48271 * l.seed % 2147483647 | 0;
                this.tags = null != b ? b : Z.randomTags();
                Z.resolve(this.tags);
                this.width = Z.width;
                this.height = Z.height;
                this.name = null;
                this.hexes = ea.tiltMode
            };
            h["com.watabou.perilous.model.Blueprint"] = Yd;
            Yd.__name__ = "com.watabou.perilous.model.Blueprint";
            Yd.random = function() {
                return new Yd
            }
            ;
            Yd.fromTags = function(a, b, c) {
                c = new Yd(null,c);
                c.width = a;
                c.height = b;
                return c
            }
            ;
            Yd.fromURL = function() {
                var a = rb.getInt("seed", 0)
                  , b = rb.get("tags", null);
                if (0 == a && null == b)
                    return null;
                b = null == b ? null : b.split(",");
                a = new Yd(a,b);
                a.width = rb.getInt("w", 1200);
                a.height = rb.getInt("h", 1200);
                a.name = rb.get("name", null);
                a.hexes = rb.getInt("hexes", 0);
                return a
            }
            ;
            Yd.prototype = {
                updateURL: function() {
                    rb.reset();
                    rb.set("seed", this.seed);
                    rb.set("tags", this.tags.join(","));
                    1200 != this.width && rb.set("w", this.width);
                    1200 != this.height && rb.set("h", this.height);
                    null != this.name && rb.set("name", encodeURIComponent(this.name));
                    0 != this.hexes && rb.set("hexes", this.hexes)
                },
                __class__: Yd
            };
            var fk = function(a, b) {
                this.border = this.march = !1;
                this.region = a;
                this.face = b;
                this.poly = b.getPoly();
                this.center = Cd.center(this.poly)
            };
            h["com.watabou.perilous.model.Cell"] = fk;
            fk.__name__ = "com.watabou.perilous.model.Cell";
            fk.prototype = {
                squash: function() {
                    if (null != this.terrain) {
                        for (var a = xa.getClass(this.terrain), b = !0, c = 0, d = this.face.getNeighbours(); c < d.length; ) {
                            var f = d[c];
                            ++c;
                            if (xa.getClass(f.data.terrain) == a) {
                                b = !1;
                                break
                            }
                        }
                        b && (this.terrain = null)
                    }
                },
                containsPoint: function(a) {
                    var b = this.center
                      , c = a.x - b.x;
                    b = a.y - b.y;
                    return c * c + b * b < ea.hexSqrR ? Vc.containsPoint(this.poly, a) : !1
                },
                getLand: function() {
                    if (null == this.landPoly) {
                        if (this.coastal) {
                            var a = [];
                            for (var b = this.face.halfEdge, c = b, d = !0; d; ) {
                                var f = c;
                                c = c.next;
                                d = c != b;
                                var g = f.next.data.isCoast;
                                f.data.isCoast && g ? a.push(sa.lerp(f.origin.point, f.next.next.origin.point)) : a.push(f.next.origin.point)
                            }
                        } else
                            a = this.poly;
                        this.landPoly = a
                    }
                    return this.landPoly
                },
                getFeature: function() {
                    null != this.site ? this.site.init() : null != this.terrain && this.terrain.init();
                    return null != this.site ? this.site : null != this.terrain ? this.terrain.area : null
                },
                __class__: fk
            };
            var Ed = function(a, b, c) {
                null == b && (b = !1);
                null == a && (a = !1);
                this.isEdge = a;
                this.isCoast = b;
                this.river = c
            };
            h["com.watabou.perilous.model.Edge"] = Ed;
            Ed.__name__ = "com.watabou.perilous.model.Edge";
            Ed.prototype = {
                __class__: Ed
            };
            var gk = function(a) {
                this.towns = [];
                this.rivers = [];
                this.landlocked = !0;
                this.nicks = [];
                this.faces = a;
                this.size = a.length;
                this.buildCoast();
                this.buildRivers();
                this.spawnTerrains();
                this.spawnTowns()
            };
            h["com.watabou.perilous.model.Island"] = gk;
            gk.__name__ = "com.watabou.perilous.model.Island";
            gk.prototype = {
                buildCoast: function() {
                    this.outline = ac.outline(this.faces);
                    for (var a = 0, b = this.outline; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        for (var d = 0; d < c.length; ) {
                            var f = c[d];
                            ++d;
                            null != f.twin && (f.data = f.twin.data = Ed.COAST,
                            f.face.data.coastal = !0,
                            f.twin.face.data.shallow = !0,
                            this.landlocked = !1)
                        }
                    }
                    this.buildCurves()
                },
                buildCurves: function() {
                    l.save();
                    this.rough = new pa;
                    this.coasts = new pa;
                    for (var a = 0, b = this.outline; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        var d = ld.toPoly(c);
                        if (this.landlocked) {
                            this.coasts.set(c, d);
                            break
                        }
                        for (var f = d.length, g = d[f - 2], k = d[f - 1], q = [], p = 0; p < f; ) {
                            var h = p++
                              , u = g;
                            g = k;
                            k = d[h];
                            h = sa.lerp(u, k);
                            q.push(sa.lerp(h, g, Math.pow((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647, .5)))
                        }
                        d = q;
                        d = xc.fractalize(d, null, .4);
                        this.rough.set(c, d);
                        d = ea.rugged ? xc.fractalize(d, 2) : jc.render(d, !0, 2);
                        this.coasts.set(c, d)
                    }
                    l.restore()
                },
                buildRivers: function() {
                    var a = this
                      , b = this.faces[0].data.region;
                    b = Math.max(b.width, b.height);
                    var c = B.polar(1, 2 * Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647))
                      , d = 2 / (b / 2);
                    b = function(b) {
                        for (var f = 0, g = 0, k = b.edges; g < k.length; ) {
                            var p = k[g];
                            ++g;
                            f += p.face.data.level
                        }
                        f /= b.edges.length;
                        a.landlocked && (f += d * (c.y * b.point.x - c.x * b.point.y));
                        return f
                    }
                    ;
                    for (var f = [], g = 0, k = this.outline; g < k.length; ) {
                        var q = k[g];
                        ++g;
                        for (var p = ld.vertices(q), h = 0; h < p.length; ) {
                            var u = p[h];
                            ++h;
                            f.push(u)
                        }
                    }
                    q = f.slice();
                    var n = []
                      , w = [];
                    for (g = 0; g < f.length; ) {
                        var r = f[g];
                        ++g;
                        k = 0;
                        for (h = r.edges; k < h.length; )
                            if (u = h[k],
                            ++k,
                            null == u.twin) {
                                w.push(r);
                                break
                            }
                    }
                    for (; 0 < q.length; ) {
                        p = u = null;
                        h = 2;
                        g = 0;
                        for (k = q.slice(); g < k.length; ) {
                            r = k[g];
                            ++g;
                            var C = this.growChannel(r, f, n.slice(), b);
                            null != C && 3 <= C.length ? C.length > h && (h = C.length,
                            p = C,
                            u = r) : Q.remove(q, r)
                        }
                        if (null != p) {
                            g = p[p.length - 1].next.origin;
                            k = null;
                            h = 0;
                            for (r = this.outline.length; h < r; )
                                if (C = h++,
                                null != ld.edgeByOrigin(this.outline[C], u)) {
                                    k = this.outline[C];
                                    break
                                }
                            h = new oi(this,k,null,p,-1 != w.indexOf(u) ? .666 : 1,-1 != w.indexOf(g) ? .333 : 0);
                            this.rivers.push(h);
                            Q.remove(q, u);
                            p = ld.vertices(p, !0);
                            for (g = 0; g < p.length; )
                                u = p[g],
                                ++g,
                                n.push(u);
                            u = Z.riverDensity;
                            for (g = [h]; ; ) {
                                p = [];
                                h = 0;
                                for (g = ia.shuffle(g); h < g.length; ) {
                                    k = g[h];
                                    ++h;
                                    r = k.channel;
                                    C = [];
                                    for (var x = 1, m = r.length - 3; x < m; ) {
                                        var z = x++;
                                        C.push(z)
                                    }
                                    C = ia.shuffle(C);
                                    for (x = 0; x < C.length; ) {
                                        z = C[x];
                                        ++x;
                                        var K = r[z].origin;
                                        m = k.getWidth(z);
                                        var A = u * Math.sqrt(m);
                                        null == A && (A = .5);
                                        if ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < A && (K = this.growChannel(K, f, n.slice(), b),
                                        null != K && 3 <= K.length))
                                            for (K.length > r.length - z && (K = K.slice(0, r.length - z)),
                                            z = -1 != w.indexOf(K[K.length - 1].next.origin) ? .333 * m : 0,
                                            m = new oi(this,null,k,K,m,z),
                                            p.push(m),
                                            m = ld.vertices(K, !0),
                                            z = 0; z < m.length; )
                                                K = m[z],
                                                ++z,
                                                n.push(K)
                                    }
                                }
                                if (0 < p.length)
                                    for (g = p,
                                    h = this.rivers,
                                    k = 0; k < p.length; )
                                        r = p[k],
                                        ++k,
                                        h.push(r);
                                else
                                    break
                            }
                        } else
                            break;
                        if (ia.count(this.faces, function(a) {
                            return a.data.riverside
                        }) >= this.size * Z.riverDensity)
                            break
                    }
                    this.createRiverCurves();
                    this.createNicks()
                },
                growChannel: function(a, b, c, d) {
                    var f = null
                      , g = 0;
                    for (a = a.edges; g < a.length; ) {
                        var k = a[g];
                        ++g;
                        null == k.data.river && k.face.data.land && null != k.twin && k.twin.face.data.land && (f = k)
                    }
                    if (null != f && -1 == b.indexOf(f.next.origin) && d(f.origin) < d(f.next.origin)) {
                        var q = [f];
                        a = f.next.origin;
                        c.push(a);
                        for (var p = d(a); ; ) {
                            var h = null;
                            f = NaN;
                            g = 0;
                            for (a = a.edges; g < a.length; ) {
                                k = a[g];
                                ++g;
                                if (-1 == c.indexOf(k.next.origin)) {
                                    var u = k.data;
                                    u = !u.isEdge && !u.isCoast
                                } else
                                    u = !1;
                                u && (u = d(k.next.origin),
                                u > p && (null == h || .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) && (f = u,
                                h = k))
                            }
                            g = h;
                            if (null != g) {
                                if (a = g.next.origin,
                                q.push(g),
                                c.push(a),
                                p = f,
                                -1 != b.indexOf(a))
                                    break
                            } else
                                break
                        }
                        return q
                    }
                    return null
                },
                createRiverCurves: function() {
                    for (var a = 0, b = this.rivers; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.poly = null
                    }
                    for (b = this.rivers.slice(); !ia.isEmpty(b); ) {
                        c = null;
                        for (a = 0; a < b.length; ) {
                            var d = b[a];
                            ++a;
                            if (null != d.coast || null != d.parent.poly) {
                                c = d;
                                break
                            }
                        }
                        c.createCurve();
                        Q.remove(b, c)
                    }
                },
                createNicks: function() {
                    this.nicks = [];
                    if (!this.landlocked) {
                        l.save();
                        for (var a = [], b = 0, c = this.rivers; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            a.push(d.poly[0])
                        }
                        for (b = this.coasts.iterator(); b.hasNext(); ) {
                            c = b.next();
                            var f = Cd.perimeter(c) / 100 | 0;
                            d = c.length;
                            var g = ia.difference(c, a);
                            for (g = ia.subset(g, f); 0 < g.length; ) {
                                f = g.pop();
                                var k = c.indexOf(f)
                                  , q = c[(k + d - 1) % d];
                                k = c[(k + 1) % d];
                                Q.remove(g, q);
                                Q.remove(g, k);
                                q = k.subtract(q);
                                q.setTo(-q.y, q.x);
                                k = Math.abs(q.x) / q.get_length();
                                k = Math.pow(k, 2);
                                null == k && (k = .5);
                                q.normalize((1 + k) * (1 + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)));
                                k = new B(2 * q.x,2 * q.y);
                                f.x += k.x;
                                f.y += k.y;
                                q = new B(f.x + 5 * q.x,f.y + 5 * q.y);
                                q = new B(q.x,q.y + -2);
                                k = sa.lerp(f, q);
                                k = new B(k.x,k.y + -1);
                                this.nicks.push(jc.render([f, k, q], !1))
                            }
                        }
                        l.restore()
                    }
                },
                spawnTerrains: function() {
                    for (var a = [], b = 0, c = this.faces; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        null == d.data.terrain && a.push(d)
                    }
                    c = a;
                    a = c.length * Z.forestDensity;
                    d = a - (a | 0);
                    null == d && (d = .5);
                    b = (a | 0) + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d ? 1 : 0);
                    a = c.length * Z.swampDensity;
                    d = a - (a | 0);
                    null == d && (d = .5);
                    var f = (a | 0) + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d ? 1 : 0);
                    a = c.length * Z.dessertDensity;
                    d = a - (a | 0);
                    null == d && (d = .5);
                    var g = (a | 0) + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d ? 1 : 0);
                    d = [];
                    for (a = 0; a < b; )
                        a++,
                        d.push(Ub);
                    a = 0;
                    for (b = f; a < b; )
                        a++,
                        d.push(Fe);
                    a = 0;
                    for (b = g; a < b; )
                        a++,
                        d.push(Ee);
                    1 < c.length && d.push(Bf);
                    for (a = []; !ia.isEmpty(c) && !ia.isEmpty(d); ) {
                        f = ia.pick(d);
                        b = ia.pick(c);
                        switch (f) {
                        case Ee:
                            f = new Ee(b.data);
                            break;
                        case Bf:
                            f = new Bf(b.data);
                            break;
                        case Fe:
                            f = new Fe(b.data);
                            break;
                        case Ub:
                            f = new Ub(b.data,Ub.randomType());
                            break;
                        default:
                            f = null
                        }
                        b.data.terrain = f;
                        a.push(b)
                    }
                    for (; !ia.isEmpty(a); )
                        for (b = ia.pick(a),
                        c = b.data.terrain,
                        b = d = b.halfEdge,
                        f = !0; f; )
                            if (g = b,
                            b = b.next,
                            f = b != d,
                            null != g.twin) {
                                var k = g.twin.face;
                                k.data.land && null == k.data.terrain && c.willGrow(g) && (c.spawn(k.data),
                                a.push(k))
                            }
                    a = 0;
                    for (b = this.faces; a < b.length; )
                        c = b[a],
                        ++a,
                        c.data.terrain instanceof Bf && (c.data.terrain = null)
                },
                spawnTowns: function() {
                    for (var a = [], b = 0, c = this.faces; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d.data.march || (a.push(d),
                        d.data.mountain || (d.data.riverside && a.push(d),
                        d.data.coastal && (a.push(d),
                        a.push(d))))
                    }
                    b = a.length * Z.settlementDensity * Math.pow(2, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                    c = b - (b | 0);
                    null == c && (c = .5);
                    c = (b | 0) + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < c ? 1 : 0);
                    0 == c && 0 < a.length && 18 < this.size && (c = 1);
                    for (b = 0; b < c; ) {
                        b++;
                        if (0 == a.length)
                            break;
                        d = ia.random(a);
                        var f = this.addTown(d);
                        d = ea.getVicinity(d, f.type._hx_index + 1);
                        for (f = 0; f < d.length; ) {
                            var g = d[f];
                            for (++f; Q.remove(a, g); )
                                ;
                        }
                    }
                    this.createRoads()
                },
                createRoads: function() {
                    for (var a = [], b = 0, c = this.faces; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d.data.border && a.push(d)
                    }
                    d = a;
                    a = 2 * d.length * Z.settlementDensity;
                    b = a - (a | 0);
                    null == b && (b = .5);
                    d = ia.subset(d, (a | 0) + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b ? 1 : 0));
                    var f = this.faces;
                    a = [];
                    b = 0;
                    for (c = this.towns; b < c.length; ) {
                        var g = c[b];
                        ++b;
                        a.push(g.cell.face)
                    }
                    this.network = new kh(f,a.concat(d))
                },
                addTown: function(a) {
                    var b = ia.random(Z.settlementChances);
                    a = new bd(a.data,b);
                    this.towns.push(a);
                    return a
                },
                recreateGeometry: function() {
                    for (var a = 0, b = this.faces; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.data.landPoly = null
                    }
                    this.buildCurves();
                    a = 0;
                    for (b = this.rivers; a < b.length; )
                        c = b[a],
                        ++a,
                        c.createCurve();
                    this.createNicks();
                    a = 0;
                    for (b = this.towns; a < b.length; )
                        c = b[a],
                        ++a,
                        c.cellOffset = null;
                    this.network.resetSegments();
                    Ka.updateForests(this)
                },
                __class__: gk
            };
            var hh = function(a) {
                l.save();
                l.reset(a.bp.seed);
                this.routes = [];
                if ("land" != Z.template) {
                    for (var b = [], c = 0, d = a.islands; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        for (var g = [], k = 0, q = f.towns; k < q.length; )
                            f = q[k],
                            ++k,
                            f.cell.coastal && g.push(f);
                        k = g;
                        g = [];
                        f = 0;
                        for (q = k; f < q.length; ) {
                            var p = q[f];
                            ++f;
                            p.type != ic.VILLAGE && g.push(p)
                        }
                        for (q = 0; q < g.length; )
                            f = g[q],
                            ++q,
                            b.push(f);
                        k = ia.difference(k, g);
                        for (g = 0; g < k.length; )
                            f = k[g],
                            ++g,
                            .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 && b.push(f)
                    }
                    if (0 != b.length) {
                        c = [];
                        for (d = 0; d < b.length; )
                            k = b[d],
                            ++d,
                            c.push(k.cell.face);
                        b = c;
                        c = [];
                        d = 0;
                        for (g = a.dcel.faces; d < g.length; )
                            f = g[d],
                            ++d,
                            f.data.land || c.push(f);
                        k = c;
                        c = [];
                        d = 0;
                        for (g = k; d < g.length; )
                            f = g[d],
                            ++d,
                            f.data.border && c.push(f);
                        g = c;
                        for (c = 0; c < b.length; )
                            f = b[c],
                            ++c,
                            k.push(f);
                        c = 2 * a.cols + 2 * a.rows;
                        f = Math.round(Math.sqrt((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) * (4 * g.length / c));
                        q = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647;
                        a = 2 * Math.max(a.width, a.height);
                        c = 0;
                        for (d = f; c < d; ) {
                            p = c++;
                            if (0 == g.length)
                                break;
                            p = 2 * Math.PI * ((p + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3) / f + q);
                            p = [B.polar(a, p)];
                            p = ia.min(g, function(a) {
                                return function(b) {
                                    return B.distance(b.data.center, a[0])
                                }
                            }(p));
                            b.push(p);
                            Q.remove(g, p);
                            ia.removeAll(g, p.getNeighbours())
                        }
                        this.enabled = new pa;
                        this.initGraph(k);
                        this.buildLinks(b);
                        l.restore()
                    }
                }
            };
            h["com.watabou.perilous.model.Navigation"] = hh;
            hh.__name__ = "com.watabou.perilous.model.Navigation";
            hh.getPathPrice = function(a) {
                var b = a.length - 1
                  , c = a[0];
                c = xa.__cast(c.data.site, bd);
                b = null != c ? b / (c.type._hx_index + 2) : 10 * b;
                c = a[a.length - 1];
                c = xa.__cast(c.data.site, bd);
                return b = null != c ? b / (c.type._hx_index + 2) : 10 * b
            }
            ;
            hh.prototype = {
                initGraph: function(a) {
                    this.graph = new Yh;
                    this.f2n = new pa;
                    for (var b = 0; b < a.length; ) {
                        var c = a[b];
                        ++b;
                        var d = this.f2n
                          , f = this.graph.add(new Zh(c));
                        d.set(c, f)
                    }
                    for (b = 0; b < a.length; ) {
                        c = a[b];
                        ++b;
                        d = this.f2n.h[c.__id__];
                        f = 0;
                        for (var g = c.getNeighbours(); f < g.length; ) {
                            var k = g[f];
                            ++f;
                            -1 != a.indexOf(k) && d.link(this.f2n.h[k.__id__], c.data.shallow || k.data.shallow ? 10 : 1)
                        }
                    }
                },
                buildLinks: function(a) {
                    for (var b = a.length, c = [], d = 0, f = b; d < f; ) {
                        d++;
                        for (var g = [], k = 0, q = b; k < q; )
                            k++,
                            g.push(null);
                        c.push(g)
                    }
                    var p = c
                      , l = new pa;
                    c = 0;
                    for (d = b - 1; c < d; ) {
                        var h = c++
                          , n = a[h]
                          , u = this.f2n.h[n.__id__];
                        f = h + 1;
                        for (g = b; f < g; ) {
                            var w = f++;
                            k = a[w];
                            if (n.data.land || k.data.land) {
                                var r = this.graph.aStar(u, this.f2n.h[k.__id__]);
                                if (null != r) {
                                    q = n.data;
                                    null == q.island && (q.island = q.region.getIsland(q.face));
                                    q = q.island;
                                    if (null != q) {
                                        var C = k.data;
                                        null == C.island && (C.island = C.region.getIsland(C.face));
                                        C = q == C.island
                                    } else
                                        C = !1;
                                    if (!(C && q.network.getDistance(n, k) <= r.length)) {
                                        k = [];
                                        for (q = 0; q < r.length; )
                                            C = r[q],
                                            ++q,
                                            k.push(C.data);
                                        q = hh.getPathPrice(k);
                                        l.set(k, q);
                                        p[h][w] = p[w][h] = k
                                    }
                                }
                            }
                        }
                    }
                    c = 0;
                    for (d = b; c < d; )
                        if (h = c++,
                        !a[h].data.land) {
                            q = Infinity;
                            n = -1;
                            f = 0;
                            for (g = b; f < g; )
                                w = f++,
                                k = p[h][w],
                                null != k && q > l.h[k.__id__] && (q = l.h[k.__id__],
                                n = w);
                            if (-1 != n)
                                for (k = 0,
                                q = b; k < q; )
                                    f = k++,
                                    f != n && (p[h][f] = p[f][h] = null)
                        }
                    c = [];
                    d = 0;
                    for (f = b; d < f; )
                        h = d++,
                        c.push(ia.count(p[h], function(a) {
                            return null != a
                        }));
                    q = c;
                    c = 0;
                    for (d = b - 1; c < d; )
                        for (h = c++,
                        f = h + 1,
                        g = b; f < g; )
                            w = f++,
                            k = p[h][w],
                            null != k && q[h] > q[w] != (k[0] == a[h]) && k.reverse();
                    this.routes = [];
                    c = 0;
                    for (d = b - 1; c < d; )
                        for (h = c++,
                        f = h + 1,
                        g = b; f < g; )
                            if (w = f++,
                            null != p[h][w]) {
                                a = l.h[p[h][w].__id__];
                                n = !0;
                                k = 0;
                                for (q = b; k < q; )
                                    if (r = k++,
                                    r != h && r != w && (u = p[r][w],
                                    r = p[h][r],
                                    null != u && null != r && (r = l.h[r.__id__],
                                    l.h[u.__id__] < a && r < a))) {
                                        n = !1;
                                        break
                                    }
                                n && (w = p[h][w],
                                this.routes.push(w),
                                this.enabled.set(w, !0))
                            }
                },
                buildCurves: function() {
                    for (var a = [], b = 0, c = this.routes; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        for (var f = d.length, g = [], k = 0, q = f; k < q; ) {
                            var p = k++;
                            p = d[p].data;
                            if (p.border)
                                g.push(ia.max(p.poly, function(a) {
                                    return a.get_length()
                                }));
                            else {
                                var l = p.center;
                                p.site instanceof bd ? g.push(l.add(xa.__cast(p.site, bd).getOffset())) : g.push(l)
                            }
                        }
                        d = g;
                        g = [];
                        k = 1;
                        for (q = f - 1; k < q; )
                            p = k++,
                            g.push(sa.lerp(d[p], sa.lerp(d[p - 1], d[p + 1])));
                        xc.visvalingam(g, 8 > f ? 2 : f >> 2, 1.02);
                        g.unshift(d[0]);
                        g.push(d[d.length - 1]);
                        a.push(g)
                    }
                    this.curves = a
                },
                getCurves: function() {
                    null == this.curves && this.buildCurves();
                    return this.curves
                },
                resetCurves: function() {
                    this.curves = null
                },
                __class__: hh
            };
            var kh = function(a, b) {
                this.enabled = new pa;
                1 < b.length ? (this.initGraph(a),
                this.buildLinks(b)) : (this.roads = [],
                this.segments = [])
            };
            h["com.watabou.perilous.model.Network"] = kh;
            kh.__name__ = "com.watabou.perilous.model.Network";
            kh.getPathPrice = function(a) {
                for (var b = 0, c = 1, d = a.length; c < d; ) {
                    var f = c++
                      , g = a[f - 1].data;
                    f = a[f].data;
                    b += (g.site instanceof bd ? 0 : g.mountain ? 4 : 1) + (f.site instanceof bd ? 0 : f.mountain ? 4 : 1)
                }
                return b
            }
            ;
            kh.prototype = {
                initGraph: function(a) {
                    this.graph = new Yh;
                    this.f2n = new pa;
                    for (var b = 0; b < a.length; ) {
                        var c = a[b];
                        ++b;
                        var d = this.f2n
                          , f = this.graph.add(new Zh(c));
                        d.set(c, f)
                    }
                    for (b = 0; b < a.length; ) {
                        c = a[b];
                        ++b;
                        d = this.f2n.h[c.__id__];
                        f = 0;
                        for (var g = c.getNeighbours(); f < g.length; ) {
                            var k = g[f];
                            ++f;
                            if (-1 != a.indexOf(k)) {
                                var q = c.data
                                  , p = k.data;
                                d.link(this.f2n.h[k.__id__], (q.site instanceof bd ? 0 : q.mountain ? 4 : 1) + (p.site instanceof bd ? 0 : p.mountain ? 4 : 1))
                            }
                        }
                    }
                },
                buildLinks: function(a) {
                    for (var b = a.length, c = [], d = 0, f = b; d < f; ) {
                        d++;
                        for (var g = [], k = 0, q = b; k < q; )
                            k++,
                            g.push(null);
                        c.push(g)
                    }
                    var p = c
                      , l = new pa;
                    c = 0;
                    for (d = b - 1; c < d; ) {
                        var h = c++
                          , n = this.f2n.h[a[h].__id__];
                        f = h + 1;
                        for (g = b; f < g; ) {
                            var u = f++
                              , w = this.graph.aStar(n, this.f2n.h[a[u].__id__]);
                            k = [];
                            for (q = 0; q < w.length; ) {
                                var r = w[q];
                                ++q;
                                k.push(r.data)
                            }
                            p[h][u] = p[u][h] = k;
                            u = kh.getPathPrice(k);
                            l.set(k, u)
                        }
                    }
                    this.roads = [];
                    c = 0;
                    for (d = b - 1; c < d; )
                        for (h = c++,
                        f = h + 1,
                        g = b; f < g; ) {
                            u = f++;
                            a = l.h[p[h][u].__id__];
                            n = !0;
                            k = 0;
                            for (q = b; k < q; )
                                if (w = k++,
                                w != h && w != u && (r = l.h[p[h][w].__id__],
                                l.h[p[w][u].__id__] < a && r < a)) {
                                    n = !1;
                                    break
                                }
                            n && (u = p[h][u],
                            this.roads.push(u),
                            this.enabled.set(u, !0))
                        }
                },
                getDistance: function(a, b) {
                    for (var c = 0, d = this.roads; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        var g = f[0]
                          , k = f[f.length - 1];
                        if (g == a && k == b || g == b && k == a)
                            return f.length
                    }
                    return Infinity
                },
                buildSegments: function(a) {
                    if (0 == this.roads.length)
                        this.segments = [];
                    else {
                        a = ea.hexRadius / 2;
                        for (var b = new pa, c = function(a) {
                            if (null != b.h.__keys__[a.__id__])
                                return b.h[a.__id__];
                            var c = a.data
                              , d = c.border ? ia.max(c.poly, function(a) {
                                return a.get_length()
                            }) : c.center;
                            c.site instanceof bd && (d = d.add(xa.__cast(c.site, bd).getOffset()));
                            b.set(a, d);
                            return d
                        }, d = [], f = 0, g = this.roads; f < g.length; ) {
                            var k = g[f];
                            ++f;
                            ia.addAll(d, k)
                        }
                        f = [];
                        g = 0;
                        for (k = ia.shuffle(this.roads); g < k.length; ) {
                            var q = k[g];
                            ++g;
                            this.enabled.h[q.__id__] && f.push(q)
                        }
                        k = f;
                        for (this.segments = []; 0 < k.length; ) {
                            var p = k.pop();
                            for (f = 0; f < p.length; ) {
                                for (var h = f; h < p.length && -1 == d.indexOf(p[h]); )
                                    ++h;
                                if (h >= p.length)
                                    break;
                                for (var u = h + 1; u < p.length && -1 != d.indexOf(p[u]); )
                                    ++u;
                                0 < h && --h;
                                u < p.length && ++u;
                                var n = [c(p[h])];
                                q = null;
                                f = h + 1;
                                for (g = u; f < g; ) {
                                    var w = f++
                                      , r = sa.lerp(p[w - 1].data.center, p[w].data.center)
                                      , C = B.polar(a * Math.sqrt((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647), 2 * Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                                    r.x += C.x;
                                    r.y += C.y;
                                    n.push(r);
                                    w > h + 1 && (q = sa.lerp(r, q),
                                    b.set(p[w - 1], q));
                                    q = r
                                }
                                n.push(c(p[u - 1]));
                                this.segments.push(n);
                                ia.removeAll(d, p.slice(h, u));
                                f = h + 1
                            }
                        }
                    }
                },
                getSegments: function(a) {
                    null == this.segments && this.buildSegments(a);
                    return this.segments
                },
                resetSegments: function() {
                    this.segments = null
                },
                __class__: kh
            };
            var yb = N["com.watabou.perilous.model.Alignment"] = {
                __ename__: "com.watabou.perilous.model.Alignment",
                __constructs__: null,
                GOOD: {
                    _hx_name: "GOOD",
                    _hx_index: 0,
                    __enum__: "com.watabou.perilous.model.Alignment",
                    toString: r
                },
                LAWFUL: {
                    _hx_name: "LAWFUL",
                    _hx_index: 1,
                    __enum__: "com.watabou.perilous.model.Alignment",
                    toString: r
                },
                NEUTRAL: {
                    _hx_name: "NEUTRAL",
                    _hx_index: 2,
                    __enum__: "com.watabou.perilous.model.Alignment",
                    toString: r
                },
                CHAOTIC: {
                    _hx_name: "CHAOTIC",
                    _hx_index: 3,
                    __enum__: "com.watabou.perilous.model.Alignment",
                    toString: r
                },
                EVIL: {
                    _hx_name: "EVIL",
                    _hx_index: 4,
                    __enum__: "com.watabou.perilous.model.Alignment",
                    toString: r
                }
            };
            yb.__constructs__ = [yb.GOOD, yb.LAWFUL, yb.NEUTRAL, yb.CHAOTIC, yb.EVIL];
            yb.__empty_constructs__ = [yb.GOOD, yb.LAWFUL, yb.NEUTRAL, yb.CHAOTIC, yb.EVIL];
            var oi = function(a, b, c, d, f, g) {
                null == g && (g = 0);
                null == f && (f = 1);
                this.island = a;
                this.coast = b;
                this.parent = c;
                this.channel = d;
                this.start = f;
                this.end = g;
                for (a = 0; a < d.length; )
                    b = d[a],
                    ++a,
                    b.data = b.twin.data = new Ed(null,null,this),
                    b.face.data.riverside = !0,
                    b.twin.face.data.riverside = !0
            };
            h["com.watabou.perilous.model.River"] = oi;
            oi.__name__ = "com.watabou.perilous.model.River";
            oi.prototype = {
                createCurve: function() {
                    var a = this;
                    this.poly = ld.toPolyline(this.channel);
                    var b = null != this.coast ? this.island.coasts.h[this.coast.__id__] : this.parent.poly
                      , c = ia.min(b, function(b) {
                        return B.distance(b, a.poly[1])
                    });
                    this.poly.shift();
                    this.poly.unshift(c);
                    if (1 == this.start) {
                        var d = b.indexOf(c);
                        if (-1 != d) {
                            var f = b.length;
                            f = b[(d + f - 1) % f]
                        } else
                            f = null;
                        d = b.indexOf(c);
                        d = -1 != d ? b[(d + 1) % b.length] : null;
                        var g = d.subtract(f);
                        b = new B(-g.y,g.x);
                        var k = 3;
                        null == k && (k = 1);
                        g = b.clone();
                        g.normalize(k);
                        f.x += g.x;
                        f.y += g.y;
                        k = 9;
                        null == k && (k = 1);
                        g = b.clone();
                        g.normalize(k);
                        c.x += g.x;
                        c.y += g.y;
                        k = 3;
                        null == k && (k = 1);
                        g = b.clone();
                        g.normalize(k);
                        d.x += g.x;
                        d.y += g.y
                    }
                    c = this.poly;
                    c[0] = c[0].clone();
                    c = this.poly;
                    d = this.poly.length - 1;
                    c[d] = c[d].clone();
                    this.poly = jc.render(this.poly, !1, 2);
                    c = ea.vantage;
                    1 != c && rc.asScale(this.poly, 1, 1 / c);
                    l.save();
                    this.poly = this.meander(this.poly);
                    l.restore();
                    1 != c && rc.asScale(this.poly, 1, c)
                },
                meander: function(a) {
                    var b = .5 * ea.hexInner
                      , c = b * (1 + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))
                      , d = Cd.$length(a)
                      , f = new sg(a);
                    a = [a[0], f.getPos(.5 * c)];
                    for (var g = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? 1 : -1; ; ) {
                        var k = f.getPos(c);
                        if (null == k)
                            break;
                        else {
                            var q = this.start
                              , p = c / d;
                            null == p && (p = .5);
                            p = q + (this.end - q) * p;
                            q = b * (.5 + .5 * p);
                            p = .2 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * p;
                            p = g * Math.PI / 2 * p * Z.riverTortuosity;
                            var h = f.get_tangent()
                              , u = Math.sin(p)
                              , n = Math.cos(p);
                            h = new B(h.x * n - h.y * u,h.y * n + h.x * u);
                            p = .5 * q / (1 + Math.cos(p));
                            null == p && (p = 1);
                            h = h.clone();
                            h.normalize(p);
                            p = h;
                            2 < a.length && a.push(k.subtract(p));
                            a.push(k.add(p));
                            g = -g;
                            c += q
                        }
                    }
                    return qf.smoothOpen(a)
                },
                getWidth: function(a) {
                    var b = this.start;
                    a /= this.channel.length;
                    null == a && (a = .5);
                    return b + (this.end - b) * a
                },
                __class__: oi
            };
            var ic = N["com.watabou.perilous.model.content.TownType"] = {
                __ename__: "com.watabou.perilous.model.content.TownType",
                __constructs__: null,
                VILLAGE: {
                    _hx_name: "VILLAGE",
                    _hx_index: 0,
                    __enum__: "com.watabou.perilous.model.content.TownType",
                    toString: r
                },
                TOWN: {
                    _hx_name: "TOWN",
                    _hx_index: 1,
                    __enum__: "com.watabou.perilous.model.content.TownType",
                    toString: r
                },
                CITY: {
                    _hx_name: "CITY",
                    _hx_index: 2,
                    __enum__: "com.watabou.perilous.model.content.TownType",
                    toString: r
                }
            };
            ic.__constructs__ = [ic.VILLAGE, ic.TOWN, ic.CITY];
            ic.__empty_constructs__ = [ic.VILLAGE, ic.TOWN, ic.CITY];
            var Z = function() {};
            h["com.watabou.perilous.model.Settings"] = Z;
            Z.__name__ = "com.watabou.perilous.model.Settings";
            Z.processTags = function(a) {
                var b = ia.intersect(a, Z.TEMPLATE);
                Z.template = 0 < b.length ? b[0] : "island";
                Z.lowlandArea = .6;
                -1 != a.indexOf("lowland") && (Z.lowlandArea = 1.1 - .4 * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3));
                -1 != a.indexOf("highland") && (Z.lowlandArea = .5);
                -1 != a.indexOf("difficult") && (Z.lowlandArea -= .1);
                Z.riverDensity = .25;
                -1 != a.indexOf("wetland") && (Z.riverDensity *= 1.5);
                -1 != a.indexOf("barren") && (Z.riverDensity /= 2);
                "coast" == Z.template ? Z.riverDensity /= 1.5 : "lake" == Z.template ? Z.riverDensity /= 2 : "land" == Z.template && (Z.riverDensity /= 2);
                Z.riverTortuosity = 1;
                -1 != a.indexOf("lowland") && (Z.riverTortuosity *= 1.2);
                -1 != a.indexOf("highland") && (Z.riverTortuosity /= 1.2);
                Z.swampDensity = .03333333333333333;
                -1 != a.indexOf("wetland") && (Z.swampDensity *= 1.5);
                -1 != a.indexOf("barren") && (Z.swampDensity /= 3);
                -1 != a.indexOf("difficult") && (Z.swampDensity *= 1.2);
                Z.forestDensity = .1;
                -1 != a.indexOf("woodland") && (Z.forestDensity *= 2);
                -1 != a.indexOf("wetland") && (Z.forestDensity /= 2);
                -1 != a.indexOf("barren") && (Z.forestDensity /= 3);
                -1 != a.indexOf("difficult") && (Z.forestDensity *= 1.2);
                Z.deadForestChance = .01;
                -1 != a.indexOf("wetland") && (Z.deadForestChance += .1);
                -1 != a.indexOf("barren") && (Z.deadForestChance += .1);
                -1 != a.indexOf("chaotic") && (Z.deadForestChance += .1);
                Z.dessertDensity = .025;
                -1 != a.indexOf("woodland") && (Z.dessertDensity /= 2);
                -1 != a.indexOf("wetland") && (Z.dessertDensity = 0);
                -1 != a.indexOf("barren") && (Z.dessertDensity *= 2);
                Z.settlementDensity = .016666666666666666;
                -1 != a.indexOf("civilized") && (Z.settlementDensity *= 1.5);
                -1 != a.indexOf("barren") && (Z.settlementDensity /= 1.5);
                Z.dungeonDensity = .03333333333333333;
                -1 != a.indexOf("safe") && (Z.dungeonDensity = 0);
                -1 != a.indexOf("perilous") && (Z.dungeonDensity *= 1.5);
                -1 != a.indexOf("land") && (Z.forestDensity /= 5,
                Z.swampDensity /= 5,
                Z.dessertDensity /= 5);
                Z.alignment = yb.NEUTRAL;
                b = 0;
                for (var c = yb.__empty_constructs__.slice(); b < c.length; ) {
                    var d = c[b];
                    ++b;
                    -1 != a.indexOf(N[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase()) && (Z.alignment = d)
                }
            }
            ;
            Z.randomTags = function() {
                var a = [];
                a.push(ia.random("lake land peninsula bay coast archipelago fjord island island island island island".split(" ")));
                var b = .3333333333333333;
                null == b && (b = .5);
                (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b && a.push(.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "highland" : "lowland");
                b = .3333333333333333;
                null == b && (b = .5);
                (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b && a.push("wetland");
                b = .3333333333333333;
                null == b && (b = .5);
                (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b && a.push("woodland");
                b = "island" == Z.template ? .2 : .125;
                null == b && (b = .5);
                (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b && a.push("difficult");
                b = .2;
                null == b && (b = .5);
                (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b && a.push("civilized");
                b = .2;
                null == b && (b = .5);
                (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < b && (a.push("barren"),
                Q.remove(a, "wetland"),
                Q.remove(a, "woodland"));
                b = ea.getAlign();
                a.push(N[b.__enum__].__constructs__[b._hx_index]._hx_name.toLowerCase());
                switch (b._hx_index) {
                case 0:
                    var c = -3;
                    break;
                case 1:
                    c = -5;
                    break;
                case 2:
                    c = 0;
                    break;
                case 3:
                    c = 5;
                    break;
                case 4:
                    c = 3
                }
                null == c && (c = 0);
                null == c && (c = 0);
                c = 1 + Math.floor((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 12) + c;
                switch (1 > c ? 1 : 12 < c ? 12 : c) {
                case 1:
                    a.push("safe");
                    break;
                case 10:
                case 11:
                case 12:
                    a.push("perilous")
                }
                return a
            }
            ;
            Z.resolve = function(a, b) {
                for (var c = [["barren", "wetland"], ["barren", "woodland"], ["highland", "lowland"], Z.DANGER, Z.ALIGNMENT, Z.TEMPLATE], d = 0; d < c.length; ) {
                    var f = c[d];
                    ++d;
                    -1 != f.indexOf(b) && ia.removeAll(a, ia.difference(f, [b]))
                }
                null != b && a.push(b);
                ia.intersects(a, Z.ALIGNMENT) || a.push("neutral");
                ia.intersects(a, Z.TEMPLATE) || a.push("island")
            }
            ;
            Z.getInfo = function(a) {
                switch (a) {
                case "archipelago":
                    return "A number of relatively small islands.";
                case "barren":
                    return "There are fewer rivers, swamps and forests, more deserts. There are fewer settlements.";
                case "bay":
                    return "A bay or a gulf.";
                case "chaotic":
                    return "Most feature names hint their chaotic nature, coastlines are more jagged.";
                case "civilized":
                    return "There are more settlements.";
                case "coast":
                    return "A coastal region.";
                case "difficult":
                    return "There are more mountains, forests and swamps.";
                case "evil":
                case "good":
                case "neutral":
                    return "Most feature names hint their " + a + " nature.";
                case "fjord":
                    return "A fjord.";
                case "highland":
                    return "The mountains are higher, there are more of them.";
                case "island":
                    return "An island or a small archipelago.";
                case "lake":
                    return "A waterbody surrounded by earth.";
                case "land":
                    return "A landlocked region.";
                case "lawful":
                    return "Most feature names hint their lawful nature, coastlines are smoother.";
                case "lowland":
                    return "The mountains are lower, there are fewer of them.";
                case "peninsula":
                    return "A peninsula, a headland or an isthmus.";
                case "perilous":
                    return "More dangers, towns and cities are more defended.";
                case "safe":
                    return "No dangers, towns and cities less defended.";
                case "wetland":
                    return "There are more rivers and swamps, fewer forests and no deserts.";
                case "woodland":
                    return "There are more forests and fewer deserts.";
                default:
                    return null
                }
            }
            ;
            var Qa = function() {};
            h["com.watabou.perilous.model.TownStory"] = Qa;
            Qa.__name__ = "com.watabou.perilous.model.TownStory";
            Qa.reset = function() {
                Qa.resources = ia.shuffle(Qa.resources)
            }
            ;
            Qa.get = function(a) {
                var b = a.cell.region
                  , c = a.getNoun()
                  , d = null;
                a.cell.coastal ? d = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "coastal" : -1 != b.bp.tags.indexOf("lake") ? "lakeside" : "seaside" : a.cell.riverside ? d = "riverside" : a.cell.mountain ? d = "mountain" : a.cell.terrain instanceof Ub ? d = "forest" : a.cell.terrain instanceof Ee ? d = "desert" : a.cell.terrain instanceof Fe && (d = "swamp");
                var f = a.countRoads()
                  , g = f;
                a.cell.coastal && ++g;
                a.cell.riverside && ++g;
                var k = [null];
                switch (a.type._hx_index) {
                case 0:
                    a.cell.coastal && (k.push("fishing"),
                    -1 == b.bp.tags.indexOf("lake") && k.push("whaling"));
                    a.cell.mountain && k.push(.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "mining" : ia.fallOff("coal iron copper slate gold gem".split(" ")) + "-mining");
                    a.cell.terrain instanceof Ub && ia.addAll(k, ["logging", "hunting"]);
                    2 < g && k.push("market");
                    break;
                case 1:
                    a.cell.coastal && (ia.addAll(k, ["fishing", "shipbuilding"]),
                    0 < f && k.push("port"),
                    -1 == b.bp.tags.indexOf("lake") && k.push("whaling"));
                    a.cell.mountain && k.push(.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "mining" : ia.fallOff("coal iron copper slate gold gem".split(" ")) + "-mining");
                    3 < g && k.push(ia.random(["trade", "market"]));
                    break;
                case 2:
                    a.cell.coastal && k.push("port")
                }
                k = ia.random(k);
                b = [];
                null != d && b.push(d);
                if (null != k)
                    for (d = [k, k],
                    k = 0; k < d.length; ) {
                        var q = d[k];
                        ++k;
                        b.push(q)
                    }
                c = 0 < b.length ? "" + ia.random(b) + " " + c : c;
                d = null;
                0 == g || 0 == f && .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? d = "isolated" : 1 == g ? d = "remote" : 5 == g ? d = "busy" : 6 <= g && (d = "bustling");
                null != d && (c = "" + d + " " + c);
                switch (a.type._hx_index) {
                case 0:
                    switch (Math.floor((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * (0 == b.length && null == d ? 2 : 3))) {
                    case 0:
                        var p = Qa.pickOne();
                        break;
                    case 1:
                        p = Qa.pickTwo();
                        break;
                    default:
                        p = null
                    }
                    break;
                case 1:
                    p = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? Qa.pickOne() : Qa.pickTwo();
                    break;
                case 2:
                    p = Qa.pickTwo()
                }
                a = He.capitalize(bl.a(c));
                null != p && (a += " of " + p);
                return a + "."
            }
            ;
            Qa.pickOne = function() {
                return (.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "abundant " : "scarce ") + Qa.pickRes()
            }
            ;
            Qa.pickTwo = function() {
                var a = .8;
                null == a && (a = .5);
                return (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? "abundant " + Qa.pickRes() + (.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? " and " : " but ") + "scarce " + Qa.pickRes() : (.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "abundant " : "scarce ") + Qa.pickRes() + " and " + Qa.pickRes()
            }
            ;
            Qa.pickRes = function() {
                var a = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647;
                a = Math.floor((Qa.resources.length - 1) * a * a);
                var b = Qa.resources[a];
                Qa.resources.splice(a, 1);
                Qa.resources.push(b);
                return b
            }
            ;
            var ug = function() {
                this.initialized = !1
            };
            h["com.watabou.perilous.model.content.Feature"] = ug;
            ug.__name__ = "com.watabou.perilous.model.content.Feature";
            ug.prototype = {
                init: function() {
                    this.initialized || (this.initialize(),
                    this.initialized = !0)
                },
                getName: function() {
                    null == this.name && this.rollName();
                    return this.name
                },
                getInfo: function() {
                    return this.getName()
                },
                rollName: function() {
                    this.name = G.string(this)
                },
                initialize: function() {},
                toString: function() {
                    return this.getName()
                },
                fillMenu: function(a) {
                    a.addItem("Edit...", m(this, this.edit));
                    var b = this.cell.region.features;
                    null != b && -1 != b.indexOf(this) ? a.addItem("Unlabel", m(this, this.remove)) : a.addItem("Label", m(this, this.add))
                },
                edit: function() {
                    var a = this;
                    return null == w.findForm(Yf) ? (w.showDialog(new Yf(this.name,function(b) {
                        a.name = b;
                        M.updateLabels(a)
                    }
                    )),
                    !0) : !1
                },
                add: function() {
                    ia.add(this.cell.region.getFeatures(), this);
                    M.updateLabels(this)
                },
                remove: function() {
                    Q.remove(this.cell.region.features, this);
                    M.updateLabels(this)
                },
                __class__: ug
            };
            var ke = function(a) {
                this.initialized = !1;
                this.cell = a[0].data;
                this.faces = a
            };
            h["com.watabou.perilous.model.content.Area"] = ke;
            ke.__name__ = "com.watabou.perilous.model.content.Area";
            ke.__super__ = ug;
            ke.prototype = v(ug.prototype, {
                initialize: function() {
                    for (var a = new B, b = 0, c = 0, d = this.faces; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        f = f.data.center;
                        a.x += f.x;
                        a.y += f.y;
                        ++b
                    }
                    f = 1 / b;
                    a.x *= f;
                    a.y *= f;
                    this.cell = ia.min(this.faces, function(b) {
                        return null == b.data.site ? B.distance(a, b.data.center) : Infinity
                    }).data
                },
                __class__: ke
            });
            var ae = function(a) {
                this.initialized = !1;
                this.cell = a;
                a.site = this;
                a.squash()
            };
            h["com.watabou.perilous.model.content.Site"] = ae;
            ae.__name__ = "com.watabou.perilous.model.content.Site";
            ae.__super__ = ug;
            ae.prototype = v(ug.prototype, {
                getFlags: function() {
                    var a = [];
                    this.cell.coastal && a.push("COAST");
                    this.cell.riverside && a.push("RIVER");
                    this.cell.mountain && a.push("MOUNT");
                    if (null != this.cell.terrain) {
                        switch (xa.getClass(this.cell.terrain)) {
                        case Ee:
                            var b = "DESERT";
                            break;
                        case Fe:
                            b = "SWAMP";
                            break;
                        case Ub:
                            b = "FOREST";
                            break;
                        default:
                            b = "PLAIN"
                        }
                        a.push(b)
                    }
                    return a
                },
                __class__: ae
            });
            var vf = function(a, b) {
                ae.call(this, a);
                this.type = b;
                this.seed = l.seed
            };
            h["com.watabou.perilous.model.content.Danger"] = vf;
            vf.__name__ = "com.watabou.perilous.model.content.Danger";
            vf.__super__ = ae;
            vf.prototype = v(ae.prototype, {
                rollName: function() {
                    this.name = 0 == this.type ? ja.dungeon(this.getFlags()) : "???"
                },
                fillMenu: function(a) {
                    ae.prototype.fillMenu.call(this, a);
                    a.addItem("Open in 1PDG", m(this, this.pdg))
                },
                pdg: function() {
                    l.save();
                    l.reset(this.seed);
                    var a = new Wf("https://watabou.github.io/one-page-dungeon/");
                    a.method = "GET";
                    a.data = {
                        seed: this.seed,
                        name: this.name
                    };
                    a.data.from = "perilous";
                    Sa.getURL(a, this.name);
                    l.restore()
                },
                edit: function() {
                    w.replaceDialog(new pi(this), null);
                    return !0
                },
                __class__: vf
            });
            var Tc = function(a) {
                this.cell = a;
                a.terrain = this
            };
            h["com.watabou.perilous.model.content.Terrain"] = Tc;
            Tc.__name__ = "com.watabou.perilous.model.content.Terrain";
            Tc.prototype = {
                willGrow: function(a) {
                    return !1
                },
                spawn: function(a) {
                    throw aa.thrown("This kind of terrain can't grow!");
                },
                init: function() {
                    null == this.area && (this.area = new qi(this.buildArea()),
                    this.area.align = this.getAlign(),
                    this.area.init())
                },
                buildArea: function() {
                    var a = xa.getClass(this);
                    return ac.floodFill(this.cell.face, function(b) {
                        return xa.getClass(b.data.terrain) == a
                    })
                },
                getName: function(a, b) {
                    return G.string(this)
                },
                getAlign: function() {
                    return ea.getAlign(Z.alignment)
                },
                __class__: Tc
            };
            var Ee = function(a) {
                Tc.call(this, a)
            };
            h["com.watabou.perilous.model.content.Desert"] = Ee;
            Ee.__name__ = "com.watabou.perilous.model.content.Desert";
            Ee.__super__ = Tc;
            Ee.prototype = v(Tc.prototype, {
                willGrow: function(a) {
                    a = 1 - a.twin.face.data.aboveSea;
                    null == a && (a = .5);
                    return (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a
                },
                spawn: function(a) {
                    a.terrain = new Ee(a)
                },
                getName: function(a, b) {
                    a = (a - 5) / 6;
                    null == a && (a = .5);
                    return ja.terrain("desert" + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? "-n" : "-1"), b)
                },
                __class__: Ee
            });
            var ji = function(a, b) {
                Tc.call(this, a);
                this.height = b
            };
            h["com.watabou.perilous.model.content.Mountain"] = ji;
            ji.__name__ = "com.watabou.perilous.model.content.Mountain";
            ji.__super__ = Tc;
            ji.prototype = v(Tc.prototype, {
                getName: function(a, b) {
                    a = (a - 1) / 2;
                    null == a && (a = .5);
                    return ja.terrain("mountain" + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? "-n" : "-1"), b)
                },
                __class__: ji
            });
            var Bf = function(a) {
                Tc.call(this, a)
            };
            h["com.watabou.perilous.model.content.Plain"] = Bf;
            Bf.__name__ = "com.watabou.perilous.model.content.Plain";
            Bf.__super__ = Tc;
            Bf.prototype = v(Tc.prototype, {
                willGrow: function(a) {
                    return null == a.data.river
                },
                spawn: function(a) {
                    a.terrain = new Bf(a)
                },
                getName: function(a, b) {
                    return "_plain_"
                },
                __class__: Bf
            });
            var fh = function(a) {
                Tc.call(this, a);
                this.rocks = [];
                for (this.circles = []; ; ) {
                    var b = ea.hexInner * (.2 + .4 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))
                      , c = B.polar((ea.hexInner - b) * Math.sqrt((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647), 2 * Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                    a = new Vh(c,b);
                    for (var d = !0, f = 0, g = this.circles; f < g.length; ) {
                        var k = g[f];
                        ++f;
                        if (a.overlaps(k)) {
                            d = !1;
                            break
                        }
                    }
                    if (!d)
                        if (a = 1 / (this.rocks.length + 1),
                        null == a && (a = .5),
                        (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a)
                            continue;
                        else
                            break;
                    d = Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647);
                    f = Math.floor(4 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 4);
                    g = [];
                    k = 0;
                    for (var q = f; k < q; ) {
                        var p = k++;
                        p = B.polar(b * (1 - Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)), d + 2 * Math.PI * (p + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3) / f);
                        p.x += c.x;
                        p.y += c.y;
                        p.y *= ea.vantage;
                        g.push(p)
                    }
                    b = g;
                    b = ea.rugged ? xc.fractalize(b) : jc.render(b, !0, 2);
                    this.rocks.push(b);
                    this.circles.push(a);
                    a = 1 / (this.rocks.length + 1);
                    null == a && (a = .5);
                    if (!((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a))
                        break
                }
            };
            h["com.watabou.perilous.model.content.SeaRocks"] = fh;
            fh.__name__ = "com.watabou.perilous.model.content.SeaRocks";
            fh.__super__ = Tc;
            fh.prototype = v(Tc.prototype, {
                __class__: fh
            });
            var Fe = function(a) {
                Tc.call(this, a)
            };
            h["com.watabou.perilous.model.content.Swamp"] = Fe;
            Fe.__name__ = "com.watabou.perilous.model.content.Swamp";
            Fe.__super__ = Tc;
            Fe.prototype = v(Tc.prototype, {
                willGrow: function(a) {
                    a = a.twin.face.data;
                    if (a.riverside && a.coastal)
                        return !0;
                    a = (a.riverside ? 1 : .3333333333333333) * (1 - a.aboveSea);
                    null == a && (a = .5);
                    return (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a
                },
                spawn: function(a) {
                    a.terrain = new Fe(a)
                },
                getName: function(a, b) {
                    a = (a - 1) / 3;
                    null == a && (a = .5);
                    return ja.terrain("swamp" + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? "-n" : "-1"), b)
                },
                getAlign: function() {
                    return ea.getAlign(Z.alignment, -2)
                },
                __class__: Fe
            });
            var qi = function(a) {
                ke.call(this, a)
            };
            h["com.watabou.perilous.model.content.TerrainArea"] = qi;
            qi.__name__ = "com.watabou.perilous.model.content.TerrainArea";
            qi.__super__ = ke;
            qi.prototype = v(ke.prototype, {
                rollName: function() {
                    this.name = this.cell.terrain.getName(this.faces.length, this.align)
                },
                initialize: function() {
                    ke.prototype.initialize.call(this);
                    for (var a = 0, b = this.faces; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.data.terrain.area = this
                    }
                },
                edit: function() {
                    return this.cell.terrain instanceof Ub ? (w.replaceDialog(new ri(this), null),
                    !0) : ke.prototype.edit.call(this)
                },
                __class__: qi
            });
            var bd = function(a, b, c) {
                null == c && (c = !1);
                null == b && (b = ic.TOWN);
                this.cellOffset = null;
                ae.call(this, a);
                this.type = b;
                this.seed = this.cityscape = l.seed;
                if (b == ic.CITY && !c)
                    for (b = 0,
                    a = ea.getVicinity(a.face, 1); b < a.length; )
                        c = a[b],
                        ++b,
                        c.data.terrain instanceof Ub && (c.data.terrain = null)
            };
            h["com.watabou.perilous.model.content.Town"] = bd;
            bd.__name__ = "com.watabou.perilous.model.content.Town";
            bd.__super__ = ae;
            bd.prototype = v(ae.prototype, {
                getOffset: function() {
                    if (null == this.cellOffset) {
                        this.cellOffset = new B;
                        for (var a = this.cell.face.halfEdge, b = a, c = !0; c; ) {
                            var d = b;
                            b = b.next;
                            c = b != a;
                            if (d.data.isCoast || null != d.data.river) {
                                d = sa.lerp(d.origin.point, d.next.origin.point, .5).subtract(this.cell.center);
                                var f = this.cellOffset;
                                f.x += d.x;
                                f.y += d.y
                            }
                        }
                        .001 < this.cellOffset.get_length() && this.cellOffset.normalize(ea.hexInner / (1 + x.townScale))
                    }
                    return this.cellOffset
                },
                initialize: function() {
                    null != this.cell.terrain && this.cell.terrain.init();
                    this.story = Qa.get(this)
                },
                toString: function() {
                    return this.getName() + " " + He.capitalizeAll(this.getNoun())
                },
                rollName: function() {
                    var a = this.getFlags();
                    switch (this.type._hx_index) {
                    case 0:
                        var b = ja.village(a);
                        break;
                    case 1:
                        b = ja.town(a);
                        break;
                    case 2:
                        b = ja.city(a)
                    }
                    this.name = b
                },
                getNoun: function() {
                    var a = this.type;
                    return N[a.__enum__].__constructs__[a._hx_index]._hx_name.toLowerCase()
                },
                fillMenu: function(a) {
                    ae.prototype.fillMenu.call(this, a);
                    M.pinTowns || a.addItem("Reroll icon", m(this, this.rollIcon));
                    this.type == ic.TOWN || this.type == ic.CITY ? a.addItem("Open in MFCG", m(this, this.mfcg)) : a.addItem("Open in VG", m(this, this.vg))
                },
                edit: function() {
                    w.replaceDialog(new si(this), null);
                    return !0
                },
                getInfo: function() {
                    return this.getName() + "\n" + this.story
                },
                countRoads: function() {
                    for (var a = 0, b = 0, c = this.cell.region.getIsland(this.cell.face).network.roads; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d[0] != this.cell.face && d[d.length - 1] != this.cell.face || ++a
                    }
                    return a
                },
                rollIcon: function() {
                    this.design = new wf;
                    this.cityscape = l.seed = 48271 * l.seed % 2147483647 | 0;
                    M.updateSprites()
                },
                mfcg: function() {
                    l.save();
                    l.reset(this.seed);
                    var a = this.cell.region
                      , b = -1 != a.bp.tags.indexOf("safe")
                      , c = -1 != a.bp.tags.indexOf("perilous")
                      , d = .5;
                    -1 != a.bp.tags.indexOf("civilized") && (d += .5);
                    this.type == ic.CITY && (d += .5);
                    b && (d *= 1.5);
                    c && (d *= .5);
                    a = .4;
                    this.type == ic.CITY && (a += .5);
                    b && (a *= .5);
                    c && (d *= 1.5);
                    b = new B;
                    c = 0;
                    for (var f = this.cell.face.getNeighbours(); c < f.length; ) {
                        var g = f[c];
                        ++c;
                        g.data.land || (g = g.data.center.subtract(this.cell.center),
                        b.x += g.x,
                        b.y += g.y)
                    }
                    b = 1 < b.get_length() ? Math.atan2(b.y, b.x) / Math.PI - .5 : (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 2;
                    c = new Wf("https://watabou.github.io/city-generator/");
                    c.method = "GET";
                    f = this.type == ic.TOWN ? Math.floor(15 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 15) : Math.floor(30 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * 20);
                    g = this.seed;
                    var k = this.name
                      , q = this.type == ic.CITY ? 1 : 0;
                    if (this.type == ic.CITY) {
                        var p = .25;
                        null == p && (p = .5);
                        var h = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < p
                    } else
                        h = !1;
                    p = a;
                    null == p && (p = .5);
                    a = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < p ? 1 : 0;
                    p = d;
                    null == p && (p = .5);
                    d = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < p ? 1 : 0;
                    p = this.countRoads();
                    var u = this.type == ic.CITY || .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647
                      , n = this.type == ic.CITY || .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647;
                    c.data = {
                        size: f,
                        seed: g,
                        name: k,
                        citadel: q,
                        urban_castle: h ? 1 : 0,
                        walls: a,
                        shantytown: d,
                        gates: p,
                        plaza: u ? 1 : 0,
                        temple: n ? 1 : 0,
                        river: this.cell.riverside ? 1 : 0,
                        coast: this.cell.coastal ? 1 : 0,
                        sea: b
                    };
                    c.data.from = "perilous";
                    Sa.getURL(c, this.name);
                    l.restore()
                },
                vg: function() {
                    var a = [];
                    if (this.cell.coastal) {
                        var b = this.cell;
                        null == b.island && (b.island = b.region.getIsland(b.face));
                        1 == b.island.size ? a.push("island") : a.push("coast")
                    } else
                        this.cell.riverside ? a.push("river") : a.push("nowater");
                    b = new Wf("https://watabou.github.io/village-generator/");
                    b.method = "GET";
                    b.data = {
                        seed: this.seed,
                        name: this.name,
                        tags: a.join(",")
                    };
                    b.data.from = "perilous";
                    Sa.getURL(b, this.name)
                },
                __class__: bd
            });
            var Ub = function(a, b) {
                Tc.call(this, a);
                this.type = b
            };
            h["com.watabou.perilous.model.content.Wood"] = Ub;
            Ub.__name__ = "com.watabou.perilous.model.content.Wood";
            Ub.randomType = function() {
                var a = Z.deadForestChance;
                null == a && (a = .5);
                return (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? Ka.deadTree : .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? Ka.lightTree : Ka.darkTree
            }
            ;
            Ub.__super__ = Tc;
            Ub.prototype = v(Tc.prototype, {
                willGrow: function(a) {
                    a = null != a.data.river ? .2 : .5;
                    null == a && (a = .5);
                    return (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a
                },
                spawn: function(a) {
                    a.terrain = new Ub(a,this.type)
                },
                getName: function(a, b) {
                    a = (a - 1) / 3;
                    null == a && (a = .5);
                    return ja.terrain("wood" + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a ? "-n" : "-1"), b)
                },
                getTrees: function() {
                    return je.get(this.cell, Ub.minR / Math.sqrt(x.treesDensity), x.treesRegularity)
                },
                __class__: Ub
            });
            var kc = function(a) {
                this.region = a;
                this.long = Math.max(a.width, a.height);
                this.short = Math.min(a.width, a.height);
                this.long2 = this.long / 2;
                this.short2 = this.short / 2
            };
            h["com.watabou.perilous.model.templates.Raiser"] = kc;
            kc.__name__ = "com.watabou.perilous.model.templates.Raiser";
            kc.get = function(a) {
                switch (Z.template) {
                case "archipelago":
                    return new ti(a);
                case "bay":
                    return new ui(a);
                case "coast":
                    return new vi(a);
                case "fjord":
                    return new wi(a);
                case "island":
                    return new Ie(a);
                case "lake":
                    return new xi(a);
                case "peninsula":
                    return new yi(a);
                default:
                    return new kc(a)
                }
            }
            ;
            kc.prototype = {
                raise: function(a) {
                    return 0
                },
                __class__: kc
            };
            var ti = function(a) {
                kc.call(this, a);
                var b = a.dcel.faces.length;
                this.distance = Math.sqrt(b / Math.ceil(Math.pow(b / 20, .7))) * ea.hexRadius;
                var c = new ah(a.viewWidth,a.viewHeight,this.distance);
                b = .5;
                -1 != a.bp.tags.indexOf("lawful") ? b = 0 : -1 != a.bp.tags.indexOf("chaotic") && (b = 1);
                c.uneven(b);
                b = [];
                var d = 0;
                for (c = c.points; d < c.length; ) {
                    var f = c[d];
                    ++d;
                    b.push(new B(f.x - a.viewWidth / 2,f.y - a.viewHeight / 2))
                }
                this.islands = b
            };
            h["com.watabou.perilous.model.templates.ArchiRaiser"] = ti;
            ti.__name__ = "com.watabou.perilous.model.templates.ArchiRaiser";
            ti.__super__ = kc;
            ti.prototype = v(kc.prototype, {
                raise: function(a) {
                    for (var b = 0, c = 0, d = this.islands; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        f = 1 - B.distance(f, a) / (this.distance / 2);
                        f = .5 * (0 < f ? f * f * (3 - 2 * f) : 0);
                        b < f && (b = f)
                    }
                    return b
                },
                __class__: ti
            });
            var ui = function(a) {
                kc.call(this, a);
                this.slope = 1 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                this.dir = B.polar(1, 2 * Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                this.dir.x *= a.width / a.height;
                this.dir.normalize(1)
            };
            h["com.watabou.perilous.model.templates.BayRaiser"] = ui;
            ui.__name__ = "com.watabou.perilous.model.templates.BayRaiser";
            ui.__super__ = kc;
            ui.prototype = v(kc.prototype, {
                raise: function(a) {
                    return this.slope * Math.min(1, (a.get_length() + (this.dir.y * a.x - this.dir.x * a.y)) / this.long2)
                },
                __class__: ui
            });
            var vi = function(a) {
                kc.call(this, a);
                this.slope = .5 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                this.dir = B.polar(1, 2 * Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                this.dir.x *= a.width / a.height;
                this.dir.normalize(1)
            };
            h["com.watabou.perilous.model.templates.CoastRaiser"] = vi;
            vi.__name__ = "com.watabou.perilous.model.templates.CoastRaiser";
            vi.__super__ = kc;
            vi.prototype = v(kc.prototype, {
                raise: function(a) {
                    return this.slope * Math.min(1, (this.dir.y * a.x - this.dir.x * a.y) / this.short2)
                },
                __class__: vi
            });
            var wi = function(a) {
                kc.call(this, a);
                this.slope = 1.5 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                var b = this.short2 * Math.pow(.5, 2 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))
                  , c = a.width;
                a = a.height;
                var d = rg.rect(c, a);
                a = Ce.pierce(d, new B, new B(c * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 - .5),a * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 - .5)));
                c = a[0];
                a = a[1];
                d = 1 - Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                a = new B(a.x * d,a.y * d);
                this.skeleton = new lh;
                b = this.skeleton.addBone(c, b, a, 0);
                this.skeleton.shatter(b, 10, .7, 1 + .5 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                do {
                    b = [];
                    c = 0;
                    for (a = this.skeleton.bones; c < a.length; )
                        d = a[c],
                        ++c,
                        0 < d.r1 && b.push(d);
                    b = ia.random(b);
                    c = b.p1.subtract(b.p0);
                    c.normalize(this.short2 * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                    d = Math.PI / 2 * (1 - Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)) * ia.random([-1, 1]);
                    a = Math.sin(d);
                    d = Math.cos(d);
                    c.setTo(c.x * d - c.y * a, c.y * d + c.x * a);
                    b = this.skeleton.addBone(b.p1, b.r1, b.p1.add(c), 0);
                    this.skeleton.shatter(b, 5, .5)
                } while (.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647)
            };
            h["com.watabou.perilous.model.templates.FjordRaiser"] = wi;
            wi.__name__ = "com.watabou.perilous.model.templates.FjordRaiser";
            wi.__super__ = kc;
            wi.prototype = v(kc.prototype, {
                raise: function(a) {
                    var b = this.skeleton.distRidge(a);
                    a = this.slope;
                    0 < b ? b = 1 - Zb.gate(b, 0, 1) : (b = Zb.gate(-b, 0, 1),
                    b = -(b * b * (3 - 2 * b)));
                    return a * b
                },
                __class__: wi
            });
            var yi = function(a) {
                kc.call(this, a);
                this.slope = 1 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                this.ridge = Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                var b = this.round = this.short2 * Math.pow(2, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1)
                  , c = this.round * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647)
                  , d = rg.rect(a.width, a.height);
                d = Ce.pierce(d, new B, new B(a.width * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 - .5),a.height * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 - .5)));
                a = d[0];
                var f = d[1];
                d = B.distance(a, f);
                f = f.subtract(a);
                d = (d - c) / d;
                f = a.add(new B(f.x * d,f.y * d));
                f = sa.lerp(a, f, 1 - .5 * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1));
                this.skeleton = new lh;
                b = this.skeleton.addBone(a, b, f, c);
                this.skeleton.shatter(b, 20, .5, 1 + Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1))
            };
            h["com.watabou.perilous.model.templates.HeadRaiser"] = yi;
            yi.__name__ = "com.watabou.perilous.model.templates.HeadRaiser";
            yi.__super__ = kc;
            yi.prototype = v(kc.prototype, {
                raise: function(a) {
                    var b = this.skeleton.distSoftRidge(a, this.ridge, this.round);
                    if (0 < b)
                        return 0;
                    a = this.slope;
                    b = Zb.gate(-b, 0, 1);
                    return a * b * b * (3 - 2 * b)
                },
                __class__: yi
            });
            var Ie = function(a) {
                kc.call(this, a);
                this.slope = 1 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                var b = ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3;
                null == b && (b = .5);
                var c = 1 + (this.long / this.short - 1) * b;
                this.ridge = Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                this.round = this.short2 * Math.pow(2, ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                var d = this.round * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)
                  , f = this.round * Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1)
                  , g = 2 * Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647)
                  , k = B.polar(this.short2 - d, g);
                g = B.polar(this.short2 - f, g + Math.PI * (.5 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                b = k.add(g);
                b = new B(-.5 * b.x,-.5 * b.y);
                a.width > a.height ? (k.x *= c,
                g.x *= c) : (k.y *= c,
                g.y *= c);
                Ie.skeleton = new lh;
                a = Ie.skeleton.addBone(k, d, b, this.round);
                f = Ie.skeleton.addBone(g, f, b, this.round);
                Ie.skeleton.shatter(a, 10);
                Ie.skeleton.shatter(f, 10)
            };
            h["com.watabou.perilous.model.templates.IslandRaiser"] = Ie;
            Ie.__name__ = "com.watabou.perilous.model.templates.IslandRaiser";
            Ie.__super__ = kc;
            Ie.prototype = v(kc.prototype, {
                raise: function(a) {
                    var b = Ie.skeleton.distSoftRidge(a, this.ridge, this.round);
                    if (0 < b)
                        return 0;
                    a = this.slope;
                    b = Zb.gate(-b, 0, 1);
                    return a * b * b * (3 - 2 * b)
                },
                __class__: Ie
            });
            var xi = function(a) {
                kc.call(this, a);
                this.slope = .5 + ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3
            };
            h["com.watabou.perilous.model.templates.LakeRaiser"] = xi;
            xi.__name__ = "com.watabou.perilous.model.templates.LakeRaiser";
            xi.__super__ = kc;
            xi.prototype = v(kc.prototype, {
                raise: function(a) {
                    return this.slope * Math.min(1, a.get_length() / this.short2)
                },
                __class__: xi
            });
            var ja = function() {};
            h["com.watabou.perilous.toponymy.Namer"] = ja;
            ja.__name__ = "com.watabou.perilous.toponymy.Namer";
            ja.reset = function(a) {
                ja.useLang = Da.get("useConlang", !1);
                ja.terrNoun = Da.get("terrNoun", !1);
                null == ja.lang ? ja.lang = yc.common() : ja.lang.reset();
                null == ja.grammar && (af.rng = l.float,
                ja.grammar = new ik(JSON.parse(Rb.getText("grammar"))),
                ja.grammar.defaultSelector = zi,
                ja.grammar.addModifiers(Va.get()),
                ja.grammar.addExternal("word", ja.word),
                ja.grammar.addExternal("fantasy", ja.fantasy),
                ja.grammar.addExternal("evil", ja.evil),
                ja.grammar.addExternal("given", ja.given),
                ja.english = new Id(Rb.getText("english").split(" ")),
                ja.elven = new Id(Rb.getText("elven").split(" ")),
                ja.demonic = new Id(Rb.getText("demonic").split(" ")),
                ja.male = new Id(Rb.getText("male").split(" ")),
                ja.female = new Id(Rb.getText("female").split(" ")));
                ja.grammar.clearState();
                var b = 0;
                for (a = a.bp.tags; b < a.length; ) {
                    var c = a[b];
                    ++b;
                    var d = ja.grammar;
                    c = c.toUpperCase();
                    ia.addAll(d.flags, (new Ta(", +","")).split(c))
                }
            }
            ;
            ja.given = function() {
                return (.5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? ja.male : ja.female).generate(4)
            }
            ;
            ja.generate = function(a, b, c) {
                null == c && (c = 4);
                for (null == b && (b = 1); ; ) {
                    var d = a.generate(c);
                    if (d.length >= b && -1 == a.source.indexOf(d))
                        return d
                }
            }
            ;
            ja.word = function() {
                return ja.generate(ja.english, 4, 3)
            }
            ;
            ja.fantasy = function() {
                return ja.generate(ja.elven)
            }
            ;
            ja.evil = function() {
                return ja.useLang ? ja.lang.getWord().join("") : ja.generate(ja.demonic)
            }
            ;
            ja.get = function(a, b, c, d) {
                null == d && (d = !1);
                if (null != c)
                    for (var f = 0; f < c.length; ) {
                        var g = c[f];
                        ++f;
                        var k = ja.grammar;
                        ia.addAll(k.flags, (new Ta(", +","")).split(g))
                    }
                null != b && (k = ja.grammar,
                b = N[b.__enum__].__constructs__[b._hx_index]._hx_name.toUpperCase(),
                ia.addAll(k.flags, (new Ta(", +","")).split(b)));
                a = ja.grammar.flatten("#" + a + "#");
                ja.grammar.flags = [];
                return d ? He.capitalizeAll(a) : a
            }
            ;
            ja.terrain = function(a, b) {
                null == b && (b = Z.alignment);
                return ja.useLang ? (b = a.split("-")[0],
                b = ja.lang.newName(b),
                ja.terrNoun && (b += " " + He.capitalizeAll(ja.get(a))),
                b) : ja.get("[place:#" + a + "#][short-place:#" + a + "-suffix#]terrain", b, ["NATURE"], !0)
            }
            ;
            ja.village = function(a) {
                return ja.useLang ? ja.lang.newName("town") : ja.get("village", null, a, !0)
            }
            ;
            ja.town = function(a) {
                return ja.useLang ? ja.lang.newName("town") : ja.get("town", null, a, !0)
            }
            ;
            ja.city = function(a) {
                return ja.useLang ? ja.lang.newName("town") : ja.get("city", null, a, !0)
            }
            ;
            ja.dungeon = function(a) {
                return ja.get("dungeon", null, a, !0)
            }
            ;
            ja.island = function(a) {
                null == a && (a = !1);
                a = "island" + (a ? "-n" : "-1");
                return ja.useLang ? ja.terrain(a) : ja.get("[island-noun:#" + a + "#]island", Z.alignment, null, !0)
            }
            ;
            ja.lake = function(a) {
                null == a && (a = !1);
                a = "lake" + (a ? "-n" : "-1");
                return ja.useLang ? ja.terrain(a) : ja.get("[lake-noun:#" + a + "#]lake", Z.alignment, null, !0)
            }
            ;
            ja.coast = function() {
                return ja.useLang ? ja.terrain("coast-noun") : ja.get("coast", Z.alignment, null, !0)
            }
            ;
            ja.archi = function() {
                return ja.useLang ? ja.terrain("archi-noun") : ja.get("archi", Z.alignment, null, !0)
            }
            ;
            ja.land = function() {
                return ja.useLang ? ja.terrain("land-noun") : ja.get("landlocked", Z.alignment, null, !0)
            }
            ;
            ja.peninsula = function() {
                return ja.useLang ? ja.terrain("peninsula-noun") : ja.get("peninsula", Z.alignment, null, !0)
            }
            ;
            ja.fjord = function() {
                return ja.useLang ? ja.terrain("fjord-noun") : ja.get("fjord", Z.alignment, null, !0)
            }
            ;
            ja.bay = function() {
                return ja.useLang ? ja.terrain("bay-noun") : ja.get("bay", Z.alignment, null, !0)
            }
            ;
            var yc = function(a, b, c, d, f, g, k, q, p) {
                null == c && (c = 0);
                null == b && (b = 0);
                Lb.call(this, a, b, c, d, f, g, k, q);
                this.double = Math.abs(((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 2 - 1);
                this.joiner = .5 > (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 ? "-" : " ";
                if (null == p)
                    for (a = new Ia,
                    b = 0,
                    c = yc.concepts; b < c.length; )
                        d = c[b],
                        ++b,
                        f = [this.getNewMorpheme()],
                        a.h[d] = f;
                else
                    a = p;
                this.premade = a;
                this.reset()
            };
            h["com.watabou.perilous.toponymy.NamingLang"] = yc;
            yc.__name__ = "com.watabou.perilous.toponymy.NamingLang";
            yc.common = function() {
                for (var a = new yc("sClVF",2,3,"nrtsdlkmpbfh\u0283\u02a4\u02a7\u03b8".split(""),["s"],["r", "l"],["s", "n", "j", "l", "r"],"eaoiuOE".split("")), b = a.badSeqs, c = "sd sb sf sr s\u03b8 \u02a4r \u02a4l s\u02a4 \u03b8l".split(" "), d = 0; d < c.length; ) {
                    var f = c[d];
                    ++d;
                    b.push(f)
                }
                a.double = .1;
                a.joiner = " ";
                a.spellConsonant = Hd.spellConsDefault;
                a.spellVowel = Hd.spellVowDoubles;
                return a
            }
            ;
            yc.elvish = function() {
                var a = new yc("clVf",1,3,"nmtrlskxbfpv".split(""),[],["r", "l"],["s", "n", "l", "r", "t"],["a", "e", "i", "u", "o"]);
                a.double = .3;
                a.joiner = "-";
                a.spellConsonant = Hd.spellConsDefault;
                a.spellVowel = Hd.spellVowDefault;
                return a
            }
            ;
            yc.exotic = function() {
                var a = new yc("vCVC",1,3,"rltks\u0283dbf\u0263xmn\u02a4".split(""),[],[],[],["a", "u", "i"]);
                a.double = .4;
                a.joiner = " ";
                a.spellConsonant = Hd.spellConsDefault;
                a.spellVowel = Hd.spellVowDefault;
                return a
            }
            ;
            yc.alien = function() {
                var a = new yc("ccVc",1,2,"\u0263\u02a4\u0283zkwgmr".split(""),[],[],[],["u", "i", "o", "a", "e"]);
                a.double = .9;
                a.joiner = "`";
                a.spellConsonant = Hd.spellConsDefault;
                a.spellVowel = Hd.spellVowDefault;
                return a
            }
            ;
            yc.__super__ = Lb;
            yc.prototype = v(Lb.prototype, {
                reset: function() {
                    this.names = [];
                    this.morphemes = new Ia;
                    for (var a = this.premade.h, b = Object.keys(a), c = b.length, d = 0; d < c; ) {
                        var f = b[d++]
                          , g = f
                          , k = this.morphemes;
                        f = a[f].slice();
                        k.h[g] = f
                    }
                },
                newName: function(a) {
                    for (; ; ) {
                        var b = null == a ? this.getWord().join("") : this.getWordSuffix(a);
                        b = this.spellWord(b);
                        b = He.capitalize(b);
                        var c = this.double;
                        null == c && (c = .5);
                        if ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < c) {
                            c = this.spellWord(this.getWord().join(""));
                            c = He.capitalize(c);
                            var d = .5 * this.double;
                            null == d && (d = .5);
                            if ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < d) {
                                d = this.spellWord(this.getMorpheme("prep"));
                                var f = " " == this.joiner ? "-" : this.joiner;
                                b = "" + b + f + d + f + c
                            } else
                                b = "" + c + this.joiner + b
                        }
                        if (-1 == this.names.indexOf(b) && b.length >= yc.minLen && b.length <= yc.maxLen)
                            return this.names.push(b),
                            b
                    }
                },
                __class__: yc
            });
            var Af = function(a) {
                Ra.call(this, [Af.REROLL]);
                this.compass = a;
                var b = new gb
                  , c = new Te;
                c.setMargins(0, 10);
                var d = new wb("Angle");
                c.add(d);
                d = new jd(-be.NLINES >> 1,be.NLINES >> 1);
                d.set_value(a.get_rotation() / 360 * be.NLINES);
                d.change.add(m(this, this.onAngle));
                d.valign = "center";
                c.add(d);
                d = new wb("Size");
                c.add(d);
                d = new jd(-1,1,1);
                d.set_value(a.scale);
                d.change.add(m(this, this.onSize));
                d.valign = "center";
                c.add(d);
                b.add(c);
                a = new Uc("Rhumb lines");
                a.set_value(La.showRhumbs);
                a.changed.add(m(this, this.onRhumbs));
                b.add(a);
                this.add(b)
            };
            h["com.watabou.perilous.ui.CompassForm"] = Af;
            Af.__name__ = "com.watabou.perilous.ui.CompassForm";
            Af.__super__ = Ra;
            Af.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Compass"
                },
                onButton: function(a) {
                    a == Af.REROLL ? this.compass.reroll() : Ra.prototype.onButton.call(this, a)
                },
                onAngle: function(a) {
                    this.compass.set_rotation(360 * a / be.NLINES)
                },
                onSize: function(a) {
                    this.compass.scale = a;
                    this.compass.redraw()
                },
                onRhumbs: function(a) {
                    Da.set("rhumbs", La.showRhumbs = a);
                    this.compass.set_visible(!0)
                },
                __class__: Af
            });
            var mi = function(a, b) {
                this.target = a;
                this.onEndDrag = b;
                a.addEventListener("mouseDown", m(this, this.onMouseDown))
            };
            h["com.watabou.perilous.ui.Draggable"] = mi;
            mi.__name__ = "com.watabou.perilous.ui.Draggable";
            mi.prototype = {
                onMouseDown: function(a) {
                    a.commandKey || a.shiftKey || a.ctrlKey || (this.parent = this.target.parent,
                    this.localX = this.parent.get_mouseX() - this.target.get_x(),
                    this.localY = this.parent.get_mouseY() - this.target.get_y(),
                    a = this.target.stage,
                    a.addEventListener("mouseMove", m(this, this.onMouseMove)),
                    a.addEventListener("mouseUp", m(this, this.onMouseUp)))
                },
                onMouseMove: function(a) {
                    this.target.set_x(this.parent.get_mouseX() - this.localX);
                    this.target.set_y(this.parent.get_mouseY() - this.localY);
                    a.updateAfterEvent()
                },
                onMouseUp: function(a) {
                    a = this.target.stage;
                    a.removeEventListener("mouseMove", m(this, this.onMouseMove));
                    a.removeEventListener("mouseUp", m(this, this.onMouseUp));
                    a.set_focus(a);
                    if (null != this.onEndDrag)
                        this.onEndDrag()
                },
                __class__: mi
            };
            var pi = function(a) {
                var b = this;
                Ra.call(this, ["Apply", "Delete"]);
                this.danger = a;
                var c = new pf;
                this.txtName = new pc(a.name);
                this.txtName.set_prompt("Name");
                this.txtName.set_width(300);
                this.txtName.enter.add(function(a) {
                    b.onButton("Apply")
                });
                c.add(this.txtName);
                this.add(c);
                this.txtName.selecteAll()
            };
            h["com.watabou.perilous.ui.EditDangerForm"] = pi;
            pi.__name__ = "com.watabou.perilous.ui.EditDangerForm";
            pi.__super__ = Ra;
            pi.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Danger"
                },
                onShow: function() {
                    this.stage.set_focus(this.txtName)
                },
                onButton: function(a) {
                    switch (a) {
                    case "Apply":
                        this.apply();
                        this.stage.set_focus(this.txtName);
                        this.txtName.selecteAll();
                        break;
                    case "Delete":
                        this.delete();
                        Ra.prototype.onButton.call(this, a);
                        break;
                    default:
                        Ra.prototype.onButton.call(this, a)
                    }
                },
                "delete": function() {
                    this.danger.cell.region.deleteDanger(this.danger);
                    M.updateMap()
                },
                apply: function() {
                    var a = this.txtName.get_text();
                    this.danger.name != a && (this.danger.name = a,
                    M.updateLabels())
                },
                __class__: pi
            });
            var Yf = function(a, b) {
                var c = this;
                Ra.call(this, ["OK", "Cancel"]);
                this.onSubmit = b;
                b = new pf;
                this.input = new pc(a);
                this.input.set_prompt("Name");
                this.input.enter.add(function(a) {
                    c.onButton("OK")
                });
                this.input.set_width(300);
                b.add(this.input);
                this.add(b);
                this.input.selecteAll()
            };
            h["com.watabou.perilous.ui.EditNameForm"] = Yf;
            Yf.__name__ = "com.watabou.perilous.ui.EditNameForm";
            Yf.__super__ = Ra;
            Yf.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Edit name"
                },
                onShow: function() {
                    this.stage.set_focus(this.input)
                },
                onButton: function(a) {
                    "OK" == a ? (a = this.input.get_text(),
                    0 < a.length && (this.onSubmit(a),
                    this.dialog.hide())) : Ra.prototype.onButton.call(this, a)
                },
                __class__: Yf
            });
            var si = function(a) {
                var b = this;
                Ra.call(this, ["Apply", "Delete"]);
                this.town = a;
                var c = new gb;
                this.txtName = new pc(a.name);
                this.txtName.set_prompt("Name");
                this.txtName.set_width(220);
                this.txtName.enter.add(function(a) {
                    b.onButton("Apply")
                });
                c.add(this.txtName);
                this.ddType = new Zc(["Village", "Town", "City"],[ic.VILLAGE, ic.TOWN, ic.CITY]);
                this.ddType.set_value(a.type);
                this.ddType.halign = "fill";
                this.ddType.set_centered(!0);
                c.add(this.ddType);
                this.chkRoads = new pa;
                this.chkRoutes = new pa;
                var d = a.cell.face
                  , f = a.cell;
                null == f.island && (f.island = f.region.getIsland(f.face));
                this.network = f.island.network;
                f = [];
                for (var g = 0, k = this.network.roads; g < k.length; ) {
                    var q = k[g];
                    ++g;
                    q[0] != d && q[q.length - 1] != d || f.push(q)
                }
                this.nav = a.cell.region.getNavigation();
                a = [];
                g = 0;
                for (k = this.nav.routes; g < k.length; )
                    q = k[g],
                    ++g,
                    q[0] != d && q[q.length - 1] != d || a.push(q);
                if (0 < f.length || 0 < a.length) {
                    g = Xa.black();
                    g.halign = "fill";
                    g.set_height(2);
                    c.add(g);
                    k = function(a) {
                        a = a[0] == d ? a[a.length - 1] : a[0];
                        return null != a.data.site ? a.data.site.getName() : "offmap..."
                    }
                    ;
                    if (0 < f.length)
                        for (g = new wb("Roads:",!0),
                        g.set_color(C.dark),
                        c.add(g),
                        g = 0; g < f.length; ) {
                            q = f[g];
                            ++g;
                            var p = new Uc(k(q));
                            p.set_value(this.network.enabled.h[q.__id__]);
                            c.add(p);
                            this.chkRoads.set(p, q)
                        }
                    if (0 < a.length)
                        for (g = new wb("Sea routes:",!0),
                        g.set_color(C.dark),
                        c.add(g),
                        g = 0; g < a.length; )
                            q = a[g],
                            ++g,
                            p = new Uc(k(q)),
                            p.set_value(this.nav.enabled.h[q.__id__]),
                            c.add(p),
                            this.chkRoutes.set(p, q)
                }
                this.add(c);
                this.txtName.selecteAll()
            };
            h["com.watabou.perilous.ui.EditTownForm"] = si;
            si.__name__ = "com.watabou.perilous.ui.EditTownForm";
            si.__super__ = Ra;
            si.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Settlement"
                },
                onShow: function() {
                    this.stage.set_focus(this.txtName)
                },
                onButton: function(a) {
                    switch (a) {
                    case "Apply":
                        this.apply();
                        this.stage.set_focus(this.txtName);
                        this.txtName.selecteAll();
                        break;
                    case "Delete":
                        this.delete();
                        Ra.prototype.onButton.call(this, a);
                        break;
                    default:
                        Ra.prototype.onButton.call(this, a)
                    }
                },
                "delete": function() {
                    this.town.cell.region.deleteTown(this.town);
                    M.updateMap()
                },
                apply: function() {
                    var a = !1
                      , b = !1
                      , c = !1
                      , d = !1
                      , f = this.txtName.get_text();
                    this.town.name != f && (this.town.name = f,
                    b = !0);
                    f = this.ddType.get_value();
                    this.town.type != f && (this.town.type = f,
                    b = a = !0);
                    var g = this.chkRoads;
                    f = g;
                    for (g = g.keys(); g.hasNext(); ) {
                        var k = g.next()
                          , q = f.get(k)
                          , p = q;
                        this.network.enabled.h[p.__id__] != k.get_value() && (q = this.network.enabled,
                        k = k.get_value(),
                        q.set(p, k),
                        c = !0)
                    }
                    c && this.network.resetSegments();
                    f = g = this.chkRoutes;
                    for (g = g.keys(); g.hasNext(); )
                        k = g.next(),
                        p = q = f.get(k),
                        this.nav.enabled.h[p.__id__] != k.get_value() && (q = this.nav.enabled,
                        k = k.get_value(),
                        q.set(p, k),
                        d = !0);
                    a && M.updateSprites();
                    b && M.updateLabels();
                    c && M.updateNetwork();
                    d && M.updateNavigation()
                },
                __class__: si
            });
            var ri = function(a) {
                var b = this;
                Ra.call(this, ["OK", "Cancel"]);
                this.wood = a;
                this.type = xa.__cast(a.cell.terrain, Ub).type;
                ia.some(a.faces, function(a) {
                    return xa.__cast(a.data.terrain, Ub).type != b.type
                }) && (this.type = null);
                var c = new gb;
                this.inpName = new pc(a.getName());
                this.inpName.set_prompt("Name");
                this.inpName.enter.add(function(a) {
                    b.onButton("OK")
                });
                this.inpName.set_width(240);
                c.add(this.inpName);
                a = ["Light", "Dark", "Dead"];
                var d = [Ka.lightTree, Ka.darkTree, Ka.deadTree];
                null == this.type && (a.unshift("Varied"),
                d.unshift(null));
                this.drpType = new Zc(a,d);
                this.drpType.set_value(this.type);
                this.drpType.set_centered(!0);
                this.drpType.set_width(240);
                c.add(this.drpType);
                this.add(c);
                this.inpName.selecteAll()
            };
            h["com.watabou.perilous.ui.EditWoodForm"] = ri;
            ri.__name__ = "com.watabou.perilous.ui.EditWoodForm";
            ri.__super__ = Ra;
            ri.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Forest"
                },
                onShow: function() {
                    this.stage.set_focus(this.inpName)
                },
                onButton: function(a) {
                    if ("OK" == a) {
                        var b = this.inpName.get_text();
                        if (0 < b.length) {
                            a = this.drpType.get_value();
                            if (this.type != a) {
                                b = 0;
                                for (var c = this.wood.faces; b < c.length; ) {
                                    var d = c[b];
                                    ++b;
                                    xa.__cast(d.data.terrain, Ub).type = a
                                }
                                a = this.wood.cell;
                                null == a.island && (a.island = a.region.getIsland(a.face));
                                a.island.forests = null;
                                M.updateMap()
                            } else
                                this.wood.name != b && (this.wood.name = b,
                                M.updateLabels());
                            this.dialog.hide()
                        }
                    } else
                        Ra.prototype.onButton.call(this, a)
                },
                __class__: ri
            });
            var ih = function() {
                Ra.call(this, ["Reset", "Apply"]);
                this.grid = new Te(2);
                this.chkInk = new Uc("Use ink color");
                this.chkInk.set_value(Da.get("useInkColor", !1));
                this.chkInk.changed.add(m(this, this.onUseInk));
                this.grid.add(this.chkInk);
                this.grid.addEmpty();
                var a = Da.get("numbersColor", 52479);
                this.addLabel("Color");
                var b = new id;
                b.setMargins(0, 10);
                this.inColor = new pc(P.hex(a, 6),!0);
                this.inColor.update.add(m(this, this.onColorInput));
                this.inColor.set_restrict("0-9a-fA-F");
                b.add(this.inColor);
                this.swColor = new $c(a,this.inColor.get_height());
                this.swColor.onClick(m(this, this.onColorSwatch));
                b.add(this.swColor);
                this.grid.add(b);
                this.addLabel("Grid opacity");
                this.flAlpha = new wa(Da.get("gridAlpha", .4),0,1);
                this.flAlpha.halign = "fill";
                this.flAlpha.set_centered(!0);
                this.grid.add(this.flAlpha);
                this.addLabel("Numbers size");
                this.inSize = new lc(Da.get("numbersSize", 14),8,18);
                this.inSize.halign = "fill";
                this.inSize.set_centered(!0);
                this.grid.add(this.inSize);
                this.addLabel("Numbers position");
                this.ddPos = Zc.ofStrings(["Top", "Bottom", "Center"]);
                this.ddPos.set_value(Da.get("numbersPos", "Top"));
                this.ddPos.set_centered(!0);
                this.ddPos.halign = "fill";
                this.grid.add(this.ddPos);
                this.add(this.grid);
                this.onUseInk(this.chkInk.get_value())
            };
            h["com.watabou.perilous.ui.NumbersForm"] = ih;
            ih.__name__ = "com.watabou.perilous.ui.NumbersForm";
            ih.__super__ = Ra;
            ih.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Grid parameters"
                },
                onButton: function(a) {
                    switch (a) {
                    case "Apply":
                        Da.set("useInkColor", this.chkInk.get_value());
                        Da.set("gridAlpha", this.flAlpha.get_value());
                        Da.set("numbersColor", this.swColor.paint.bmp.get_bitmapData().getPixel(0, 0));
                        Da.set("numbersSize", this.inSize.get_value());
                        Da.set("numbersPos", this.ddPos.get_value());
                        M.updateGrid();
                        M.updateNumbers();
                        break;
                    case "Reset":
                        this.chkInk.set_value(!1);
                        this.swColor.paint.bmp.get_bitmapData().setPixel(0, 0, 52479);
                        this.inColor.set_text("00CCFF");
                        this.flAlpha.set_value(.4);
                        this.inSize.set_value(14);
                        this.ddPos.set_value("Top");
                        break;
                    default:
                        Ra.prototype.onButton.call(this, a)
                    }
                },
                addLabel: function(a) {
                    a = new wb(a);
                    a.valign = "center";
                    this.grid.add(a)
                },
                onUseInk: function(a) {
                    this.inColor.set_enabled(!a)
                },
                onColorInput: function(a) {
                    "#" == a.charAt(0) && (a = Q.substr(a, 1, null));
                    if (3 == a.length) {
                        var b = [];
                        b.push(a.charAt(0) + a.charAt(0));
                        b.push(a.charAt(1) + a.charAt(1));
                        b.push(a.charAt(2) + a.charAt(2));
                        a = b.join("")
                    }
                    6 < a.length && (a = Q.substr(a, 0, 6));
                    a = G.parseInt("0x" + a);
                    this.swColor.paint.bmp.get_bitmapData().setPixel(0, 0, a)
                },
                onColorSwatch: function() {
                    var a = this
                      , b = w.findForm(ge);
                    null == b && (b = new ge,
                    w.showDialog(b));
                    b.link("Numbers color", this.swColor.paint.bmp.get_bitmapData().getPixel(0, 0), function(b) {
                        a.inColor.set_text(P.hex(b, 6));
                        a.swColor.paint.bmp.get_bitmapData().setPixel(0, 0, b)
                    }, this)
                },
                __class__: ih
            });
            var eh = function() {
                this.synching = !1;
                var a = this;
                Ra.call(this, ["Reset"]);
                var b = new Te(3)
                  , c = new wb("Type");
                c.valign = "center";
                b.add(c);
                this.cmbPosition = Zc.ofStrings([Ba.FRONT, Ba.SPOTLIGHT]);
                this.cmbPosition.setSize(120, this.cmbPosition.get_height());
                this.cmbPosition.update.add(function(b) {
                    a.onChange(0)
                });
                b.add(this.cmbPosition);
                b.add(new la);
                c = function(c) {
                    c = new wb(c);
                    b.add(c);
                    c = new jd(0,1,1);
                    c.setSize(120, 20);
                    c.valign = "center";
                    c.change.add(m(a, a.onChange));
                    b.add(c);
                    var d = new wb("0.0",!0);
                    d.valign = "center";
                    b.add(d);
                    c.change.add(function(a) {
                        d.set_text(null == a ? "null" : "" + a)
                    });
                    return c
                }
                ;
                var d = function(c) {
                    var d = new wb(c);
                    b.add(d);
                    var f = new $c(0,d.get_height());
                    f.onClick(function() {
                        a.onColor(c, f, function(b) {
                            f.paint.bmp.get_bitmapData().setPixel(0, 0, b);
                            a.onChange(0)
                        })
                    });
                    b.add(f);
                    b.add(new la);
                    return f
                };
                this.slSpotSize = c("Size");
                this.swLightColor = d("Light");
                this.slLightOpacity = c("Intensity");
                this.slLightVividness = c("Saturation");
                this.swDarkColor = d("Shadow");
                this.slDarkOpacity = c("Intensity");
                this.slDarkVividness = c("Saturation");
                b.add(new la);
                b.add(this.chkEnable = new Uc("Enable"));
                this.chkEnable.set_value(M.showLight);
                this.chkEnable.changed.add(function(b) {
                    a.onChange(0)
                });
                this.add(b);
                this.sync()
            };
            h["com.watabou.perilous.ui.SpotlightForm"] = eh;
            eh.__name__ = "com.watabou.perilous.ui.SpotlightForm";
            eh.__super__ = Ra;
            eh.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Dramatic light"
                },
                onShow: function() {
                    Ba.activate(!0)
                },
                onHide: function() {
                    Ba.activate(!1)
                },
                onButton: function(a) {
                    "Reset" == a ? (Ba.reset(),
                    Ba.update(),
                    this.sync()) : Ra.prototype.onButton.call(this, a)
                },
                sync: function() {
                    this.synching = !0;
                    this.cmbPosition.set_value(Ba.type);
                    this.slSpotSize.set_value(Ba.balance);
                    var a = Ba.clrLight;
                    this.swLightColor.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                    this.slLightOpacity.set_value(Ba.opaLight);
                    this.slLightVividness.set_value(Ba.satLight);
                    a = Ba.clrDark;
                    this.swDarkColor.paint.bmp.get_bitmapData().setPixel(0, 0, a);
                    this.slDarkOpacity.set_value(Ba.opaDark);
                    this.slDarkVividness.set_value(Ba.satDark);
                    this.synching = !1
                },
                onChange: function(a) {
                    this.synching || (Ba.type = this.cmbPosition.get_value(),
                    Ba.balance = this.slSpotSize.get_value(),
                    Ba.clrLight = this.swLightColor.paint.bmp.get_bitmapData().getPixel(0, 0),
                    Ba.opaLight = this.slLightOpacity.get_value(),
                    Ba.satLight = this.slLightVividness.get_value(),
                    Ba.clrDark = this.swDarkColor.paint.bmp.get_bitmapData().getPixel(0, 0),
                    Ba.opaDark = this.slDarkOpacity.get_value(),
                    Ba.satDark = this.slDarkVividness.get_value(),
                    Ba.enable(this.chkEnable.get_value()),
                    M.showLight && Ba.update())
                },
                onColor: function(a, b, c) {
                    var d = w.findForm(ge);
                    null == d && (d = new ge,
                    w.showDialog(d));
                    d.link(a, b.paint.bmp.get_bitmapData().getPixel(0, 0), c, this)
                },
                __class__: eh
            });
            var Pb = function(a) {
                T.call(this);
                this.content = a;
                this.rectWidth = a.get_width() + 2 * Pb.MARGIN;
                this.rectHeight = a.get_height() + 2 * Pb.MARGIN;
                this.addChild(a)
            };
            h["com.watabou.perilous.ui.Sticker"] = Pb;
            Pb.__name__ = "com.watabou.perilous.ui.Sticker";
            Pb.text = function(a, b) {
                a = oc.get(a, b);
                a.set_multiline(!0);
                a.set_wordWrap(!0);
                Pb.setWidth(a, Pb.MAX_WIDTH);
                return new Pb(a)
            }
            ;
            Pb.title = function(a) {
                return Pb.text(a, x.formatHead)
            }
            ;
            Pb.titleNdesc = function(a, b) {
                var c = new T;
                a = oc.get(a, x.formatHead);
                c.addChild(a);
                b = oc.get(b, x.formatSticker);
                b.set_y(a.get_height());
                b.set_multiline(!0);
                b.set_wordWrap(!0);
                Pb.setWidth(b, Pb.MAX_WIDTH);
                c.addChild(b);
                return new Pb(c)
            }
            ;
            Pb.setWidth = function(a, b) {
                a.set_width(b);
                var c = a.get_numLines();
                if (1 < c) {
                    do
                        a.set_width(a.get_width() - 4);
                    while (a.get_numLines() == c);
                    a.set_width(a.get_width() + 4)
                } else
                    a.get_textWidth() < b - 4 && a.set_width(a.get_textWidth() + 6);
                b = a.get_width();
                c = a.get_height();
                a.set_autoSize(2);
                a.set_width(b);
                a.set_height(Math.ceil(c))
            }
            ;
            Pb.__super__ = T;
            Pb.prototype = v(T.prototype, {
                set_offset: function(a) {
                    this.content.set_x(a.x - this.content.get_width() / 2);
                    this.content.set_y(a.y - this.content.get_height() / 2);
                    this.updatePoly(a);
                    return a
                },
                rectAt: function(a) {
                    null == a && (a = new B(this.content.get_x() + this.content.get_width() / 2,this.content.get_y() + this.content.get_height() / 2));
                    return new oa(this.get_x() + a.x - this.rectWidth / 2,this.get_y() + a.y - this.rectHeight / 2,this.rectWidth,this.rectHeight)
                },
                updatePoly: function(a) {
                    var b = this.get_graphics();
                    b.clear();
                    var c = this.content.get_x()
                      , d = this.content.get_y()
                      , f = this.content.get_width()
                      , g = this.content.get_height();
                    c = [new B(c - Pb.MARGIN,d - Pb.MARGIN), new B(c + f + Pb.MARGIN,d - Pb.MARGIN), new B(c + f + Pb.MARGIN,d + g + Pb.MARGIN), new B(c - Pb.MARGIN,d + g + Pb.MARGIN)];
                    f = Pb.DISTANCE;
                    null == f && (f = 1);
                    d = a.clone();
                    d.normalize(f);
                    g = new B(-a.y,a.x);
                    f = -10;
                    null == f && (f = 1);
                    g = g.clone();
                    g.normalize(f);
                    var k = a.add(g);
                    g = new B(-a.y,a.x);
                    f = 10;
                    null == f && (f = 1);
                    g = g.clone();
                    g.normalize(f);
                    a = [d, k, a.add(g)];
                    a = ci.or(c, a);
                    b.beginFill(x.banner);
                    b.lineStyle(x.normal, x.black);
                    Rc.drawPolygon(b, a)
                },
                __class__: Pb,
                __properties__: v(T.prototype.__properties__, {
                    set_offset: "set_offset"
                })
            });
            var tf = function(a, b) {
                qc.getTags = function() {
                    return Z.tags
                }
                ;
                qc.getInfo = function(a) {
                    return Z.getInfo(a)
                }
                ;
                qc.resTags = function(a, b) {
                    Z.resolve(a, b)
                }
                ;
                Ue.call(this, a, b);
                this.onSize(null)
            };
            h["com.watabou.perilous.ui.TagsForm"] = tf;
            tf.__name__ = "com.watabou.perilous.ui.TagsForm";
            tf.__super__ = Ue;
            tf.prototype = v(Ue.prototype, {
                getTitle: function() {
                    return "Region parameters"
                },
                addAbove: function() {
                    var a = this
                      , b = new id;
                    b.setMargins(0, 10);
                    var c = new wb("Size:");
                    c.valign = "center";
                    b.add(c);
                    this.inpWidth = new lc(Z.width,200,4E3,4);
                    this.inpWidth.update.add(m(this, this.onSize));
                    this.inpWidth.set_centered(!0);
                    b.add(this.inpWidth);
                    this.inpHeight = new lc(Z.height,200,4E3,4);
                    this.inpHeight.update.add(m(this, this.onSize));
                    this.inpHeight.set_centered(!0);
                    b.add(this.inpHeight);
                    this.inpWidth.enter.add(function(b) {
                        a.onEnter()
                    });
                    this.inpHeight.enter.add(function(b) {
                        a.onEnter()
                    });
                    this.cmbSize = Zc.ofStrings(["Small", "Medium", "Large", "Huge"]);
                    this.cmbSize.update.add(m(this, this.onPredifined));
                    this.cmbSize.set_centered(!0);
                    b.add(this.cmbSize);
                    this.content.add(b)
                },
                onSize: function(a) {
                    this.cmbSize.set_text("Custom");
                    a = this.inpWidth.get_value();
                    for (var b = this.inpHeight.get_value(), c = tf.predefined.h, d = Object.keys(c), f = d.length, g = 0; g < f; ) {
                        var k = d[g++]
                          , q = k;
                        k = c[k];
                        if (a == k && b == k) {
                            this.cmbSize.set_value(q);
                            break
                        }
                    }
                },
                onPredifined: function(a) {
                    this.inpWidth.set_value(this.inpHeight.set_value(tf.predefined.h[a]))
                },
                getWidth: function() {
                    return Zb.gatei(this.inpWidth.get_value(), 200, 4E3)
                },
                getHeight: function() {
                    return Zb.gatei(this.inpHeight.get_value(), 200, 4E3)
                },
                __class__: tf
            });
            var Vf = function(a) {
                Ra.call(this, ["Apply"]);
                this.onApply = a;
                this.lang = ja.lang;
                this.content = new gb;
                this.content.setMargins(10, 8);
                this.chkConlang = new Uc("Use naming language");
                this.chkConlang.changed.add(m(this, this.onConlang));
                this.chkConlang.set_value(ja.useLang);
                this.chkConlang.set_width(280);
                this.content.add(this.chkConlang);
                this.langBox = new gb;
                this.langBox.setMargins(0, 8);
                a = Xa.dark();
                a.set_height(2);
                a.halign = "fill";
                this.langBox.add(a);
                a = new fe("New language",Vf.presets);
                a.action.add(m(this, this.onPreset));
                this.langBox.add(a);
                this.txtSamples = new Wd(this.createSamples());
                this.txtSamples.set_width(280);
                this.langBox.add(this.txtSamples);
                this.chkCommon = new Uc("Append terrain noun");
                this.chkCommon.set_value(ja.terrNoun);
                this.langBox.add(this.chkCommon);
                ja.useLang && this.content.add(this.langBox);
                this.add(this.content)
            };
            h["com.watabou.perilous.ui.ToponymyForm"] = Vf;
            Vf.__name__ = "com.watabou.perilous.ui.ToponymyForm";
            Vf.__super__ = Ra;
            Vf.prototype = v(Ra.prototype, {
                createSamples: function() {
                    for (var a = [], b = 0; 10 > b; )
                        for (b++; ; ) {
                            var c = this.lang.spellWord(this.lang.getWord().join(""));
                            if (-1 == a.indexOf(c)) {
                                a.push(c);
                                break
                            }
                        }
                    b = [];
                    for (var d = 0; d < a.length; )
                        c = a[d],
                        ++d,
                        b.push(He.capitalize(c));
                    return b.join(", ")
                },
                getTitle: function() {
                    return "Toponymy"
                },
                onButton: function(a) {
                    "Apply" == a ? (Da.set("useConlang", ja.useLang = this.chkConlang.get_value()),
                    Da.set("terrNoun", ja.terrNoun = this.chkCommon.get_value()),
                    ja.useLang && (ja.lang = this.lang),
                    this.onApply()) : Ra.prototype.onButton.call(this, a)
                },
                onEnter: function() {
                    this.onButton("Apply")
                },
                onConlang: function(a) {
                    a ? this.content.add(this.langBox) : (this.content.removeChild(this.langBox),
                    this.content.layout());
                    this.resize(this.content)
                },
                onPreset: function(a) {
                    switch (a) {
                    case "Alien":
                        this.lang = yc.alien();
                        break;
                    case "Common":
                        this.lang = yc.common();
                        break;
                    case "Elvish":
                        this.lang = yc.elvish();
                        break;
                    case "Exotic":
                        this.lang = yc.exotic();
                        break;
                    case "Random":
                        this.lang = new yc
                    }
                    this.txtSamples.set_text(this.createSamples());
                    this.txtSamples.set_width(280);
                    this.resize(this.txtSamples)
                },
                resize: function(a) {
                    do
                        a = a.parent,
                        a.layout();
                    while (a != this);
                    xa.__cast(this.parent, hd).resize()
                },
                __class__: Vf
            });
            var jk = function(a) {
                Ra.call(this, ["Copy", "Generate"]);
                this.onGenerate = a;
                a = new pf;
                this.input = new pc(rb.getURL());
                this.input.set_width(500);
                a.add(this.input);
                this.add(a)
            };
            h["com.watabou.perilous.ui.URLForm"] = jk;
            jk.__name__ = "com.watabou.perilous.ui.URLForm";
            jk.__super__ = Ra;
            jk.prototype = v(Ra.prototype, {
                onShow: function() {
                    this.highlight()
                },
                getTitle: function() {
                    return "Permalink"
                },
                onButton: function(a) {
                    switch (a) {
                    case "Copy":
                        Je.get_generalClipboard().setData(2, this.input.get_text());
                        this.highlight();
                        break;
                    case "Generate":
                        this.onGenerate(this.input.get_text());
                        this.highlight();
                        break;
                    default:
                        Ra.prototype.onButton.call(this, a)
                    }
                },
                highlight: function() {
                    this.stage.set_focus(this.input);
                    this.input.selecteAll()
                },
                __class__: jk
            });
            var dh = function(a) {
                var b = this;
                Ra.call(this, ["Apply"]);
                this.onApply = a;
                var c = new id;
                this.slider = new jd(.5,1,2);
                this.slider.set_value(ea.vantage);
                this.slider.valign = "fill";
                this.slider.set_width(250);
                c.add(this.slider);
                var d = new wa(ea.vantage,.5,1,2);
                d.update.add(function(a) {
                    b.slider.set_value(d.get_value())
                });
                d.enter.add(function(c) {
                    a(b.slider.get_value())
                });
                c.add(d);
                this.slider.change.add(function(a) {
                    d.set_value(a)
                });
                this.add(c)
            };
            h["com.watabou.perilous.ui.VantageForm"] = dh;
            dh.__name__ = "com.watabou.perilous.ui.VantageForm";
            dh.__super__ = Ra;
            dh.prototype = v(Ra.prototype, {
                getTitle: function() {
                    return "Vantage point"
                },
                onButton: function(a) {
                    if ("Apply" == a)
                        this.onApply(this.slider.get_value());
                    else
                        Ra.prototype.onButton.call(this, a)
                },
                __class__: dh
            });
            var ek = function() {};
            h["com.watabou.perilous.utils.DoubleClicker"] = ek;
            ek.__name__ = "com.watabou.perilous.utils.DoubleClicker";
            ek.prototype = {
                click: function(a) {
                    var b = this;
                    if (null != this.process)
                        return tb.cancel(this.process),
                        this.process = null,
                        a(),
                        !0;
                    this.process = tb.wait(.5, function() {
                        b.process = null
                    });
                    return !1
                },
                __class__: ek
            };
            var sg = function(a) {
                this.path = a;
                this.size = a.length;
                this.reset()
            };
            h["com.watabou.perilous.utils.PathTracker"] = sg;
            sg.__name__ = "com.watabou.perilous.utils.PathTracker";
            sg.prototype = {
                getPos: function(a) {
                    for (a < this.offset && this.reset(); a > this.offset + this.curLength; ) {
                        if (++this.curIndex >= this.size - 1)
                            return this.reset(),
                            null;
                        this.offset += this.curLength;
                        this.curVector = this.path[this.curIndex + 1].subtract(this.path[this.curIndex]);
                        this.curLength = this.curVector.get_length()
                    }
                    return sa.lerp(this.path[this.curIndex], this.path[this.curIndex + 1], (a - this.offset) / this.curLength)
                },
                reset: function() {
                    this.curIndex = this.offset = 0;
                    this.curVector = this.path[1].subtract(this.path[0]);
                    this.curLength = this.curVector.get_length()
                },
                length: function() {
                    return Cd.$length(this.path)
                },
                get_tangent: function() {
                    return this.curVector
                },
                __class__: sg,
                __properties__: {
                    get_tangent: "get_tangent"
                }
            };
            var xc = function() {};
            h["com.watabou.perilous.utils.PolyUtils"] = xc;
            xc.__name__ = "com.watabou.perilous.utils.PolyUtils";
            xc.distort = function(a, b) {
                null == b && (b = .5);
                for (var c = a.length, d = a[c - 2], f = a[c - 1], g = B.distance(d, f), k = [], q = 0; q < c; ) {
                    var p = q++;
                    d = f;
                    f = a[p];
                    p = g;
                    g = B.distance(d, f);
                    k.push(d.add(B.polar(Math.min(p, g) * b * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647))))
                }
                return k
            }
            ;
            xc.wobbleFixed = function(a, b) {
                for (var c = [], d = 0, f = a.length; d < f; ) {
                    var g = d++
                      , k = B.polar(b * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                    c.push(a[g].add(k))
                }
                return c
            }
            ;
            xc.wobbleFixedInner = function(a, b) {
                for (var c = a.length, d = [], f = 0; f < c; ) {
                    var g = f++;
                    if (0 == g || g == c - 1)
                        g = a[g];
                    else {
                        var k = B.polar(b * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1), Math.PI * ((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647));
                        g = a[g].add(k)
                    }
                    d.push(g)
                }
                return d
            }
            ;
            xc.resampleClosed = function(a, b) {
                var c = Cd.perimeter(a);
                b = c / Math.round(c / b);
                c = a[a.length - 1];
                for (var d = [c], f = b, g = 0, k = 0, q = a.length; k < q; ) {
                    var p = k++
                      , l = c;
                    c = a[p];
                    for (p = B.distance(l, c); g + p > f; )
                        d.push(sa.lerp(l, c, (f - g) / p)),
                        f += b;
                    g += p
                }
                return d
            }
            ;
            xc.resampleOpen = function(a, b) {
                var c = Cd.$length(a);
                b = c / Math.round(c / b);
                c = a[0];
                for (var d = [c], f = b, g = 0, k = 1, q = a.length; k < q; ) {
                    var p = k++
                      , l = c;
                    c = a[p];
                    for (p = B.distance(l, c); g + p > f; )
                        d.push(sa.lerp(l, c, (f - g) / p)),
                        f += b;
                    g += p
                }
                d.push(a[a.length - 1]);
                return d
            }
            ;
            xc.fractalize = function(a, b, c, d) {
                null == d && (d = !0);
                null == c && (c = .5);
                null == b && (b = 1);
                var f = []
                  , g = null;
                g = function(a, b, d) {
                    if (0 < d) {
                        var k = new B(a.y - b.y,b.x - a.x)
                          , p = sa.lerp(a, b)
                          , q = c * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                        p.x += k.x * q;
                        p.y += k.y * q;
                        g(a, p, d - 1);
                        f.push(p);
                        g(p, b, d - 1)
                    }
                }
                ;
                for (var k = a.length, q = 0, p = k - 1; q < p; ) {
                    var h = q++
                      , u = a[h];
                    h = a[h + 1];
                    f.push(u);
                    g(u, h, b)
                }
                d ? (u = a[k - 1],
                h = a[0],
                f.push(u),
                g(u, h, b)) : f.push(a[k - 1]);
                return f
            }
            ;
            xc.simplify = function(a, b, c) {
                null == c && (c = 1.01);
                null == b && (b = 0);
                var d = Cd.area(a);
                0 == b && (b = d);
                for (var f = d, g = a.length; 3 <= g; ) {
                    for (var k = !1, q = 0; q < g; ) {
                        var p = sa.triArea(a[(q + g - 1) % g], a[q], a[(q + 1) % g])
                          , l = (f - p) / d;
                        Math.abs(p) < b && l < c && 1 / l < c ? (a.splice(q, 1),
                        k = !0,
                        f -= p,
                        --g) : ++q
                    }
                    if (!k)
                        break
                }
            }
            ;
            xc.visvalingam = function(a, b, c) {
                null == c && (c = 1.1);
                null == b && (b = 2);
                for (var d = a.length, f = [], g = 0, k = d; g < k; ) {
                    var q = g++;
                    f.push(q < d - 1 ? B.distance(a[q], a[q + 1]) : 0)
                }
                var p = f;
                f = [];
                g = 0;
                for (k = d; g < k; )
                    q = g++,
                    f.push(0 == q || q == d - 1 ? 0 : Math.abs(sa.triArea(a[q - 1], a[q], a[q + 1])));
                k = f;
                var l = 0;
                for (f = 0; f < p.length; )
                    g = p[f],
                    ++f,
                    l += g;
                for (var h = l; d > b; ) {
                    q = 1;
                    var n = k[q];
                    f = 1;
                    for (g = d - 1; f < g; ) {
                        var u = f++;
                        n > k[u] && (n = k[u],
                        q = u)
                    }
                    g = B.distance(a[q - 1], a[q + 1]);
                    h = h - p[q - 1] - p[q] + g;
                    if (l / h > c)
                        break;
                    --d;
                    a.splice(q, 1);
                    p.splice(q, 1);
                    p[q - 1] = g;
                    k.splice(q, 1);
                    1 < q && (k[q - 1] = Math.abs(sa.triArea(a[q - 2], a[q - 1], a[q])));
                    q < d - 1 && (k[q] = Math.abs(sa.triArea(a[q - 1], a[q], a[q + 1])))
                }
            }
            ;
            var lh = function() {
                this.bones = []
            };
            h["com.watabou.perilous.utils.Skeleton"] = lh;
            lh.__name__ = "com.watabou.perilous.utils.Skeleton";
            lh.prototype = {
                addBone: function(a, b, c, d) {
                    null == d && (d = 0);
                    null == b && (b = 0);
                    a = new mh(a,b,c,d);
                    this.bones.push(a);
                    return a
                },
                distRidge: function(a) {
                    for (var b = Infinity, c = 0, d = this.bones; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        b = Math.min(b, f.distRidge(a))
                    }
                    return b
                },
                distSoftRidge: function(a, b, c) {
                    for (var d = Infinity, f = 0, g = this.bones; f < g.length; ) {
                        var k = g[f];
                        ++f;
                        d = Math.min(d, k.distSoftRidge(a, b, c))
                    }
                    return d
                },
                shatter: function(a, b, c, d) {
                    null == d && (d = 2);
                    null == c && (c = .5);
                    Q.remove(this.bones, a);
                    var f = Math.pow(.5, 1 / d);
                    d = Math.pow(.5, d);
                    a = [a];
                    for (var g = 0, k = b; g < k; ) {
                        g++;
                        for (var q = [], p = 0; p < a.length; ) {
                            var h = a[p];
                            ++p;
                            q.push(h.len / (h.r0 + h.r1))
                        }
                        q = ia.weighted(a, q);
                        Q.remove(a, q);
                        p = q.p0;
                        h = q.p1;
                        b = q.r0;
                        var u = q.r0 < q.r1 ? f : d;
                        null == u && (u = .5);
                        u = b + (q.r1 - b) * u;
                        var n = sa.lerp(p, h);
                        b = new B(p.y - h.y,h.x - p.x);
                        var w = c * (((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 + (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647) / 3 * 2 - 1);
                        n.x += b.x * w;
                        n.y += b.y * w;
                        a.push(new mh(p,q.r0,n,u));
                        a.push(new mh(n,u,h,q.r1))
                    }
                    b = this.bones;
                    for (g = 0; g < a.length; )
                        c = a[g],
                        ++g,
                        b.push(c)
                },
                __class__: lh
            };
            var mh = function(a, b, c, d) {
                null == d && (d = 0);
                null == b && (b = 0);
                this.p0 = a;
                this.p1 = c;
                this.r0 = b;
                this.r1 = d;
                this.dx = c.x - a.x;
                this.dy = c.y - a.y;
                this.d2 = this.dx * this.dx + this.dy * this.dy;
                this.len = Math.sqrt(this.d2)
            };
            h["com.watabou.perilous.utils.Bone"] = mh;
            mh.__name__ = "com.watabou.perilous.utils.Bone";
            mh.prototype = {
                project: function(a) {
                    return 0 == this.d2 ? 0 : Zb.gate(((a.x - this.p0.x) * this.dx + (a.y - this.p0.y) * this.dy) / this.d2, 0, 1)
                },
                distRidge: function(a) {
                    var b = this.project(a)
                      , c = new B(this.p0.x + b * this.dx,this.p0.y + b * this.dy)
                      , d = this.r0;
                    null == b && (b = .5);
                    d += (this.r1 - d) * b;
                    return (B.distance(a, c) - d) / (0 != d ? d : 1)
                },
                distSoftRidge: function(a, b, c) {
                    var d = this.project(a)
                      , f = new B(this.p0.x + d * this.dx,this.p0.y + d * this.dy)
                      , g = this.r0;
                    null == d && (d = .5);
                    g += (this.r1 - g) * d;
                    f = B.distance(a, f) - g;
                    g = 0 != g ? 1 / g : 1;
                    a = b;
                    null == a && (a = .5);
                    return f * (g + (1 / c - g) * a)
                },
                __class__: mh
            };
            var Ai = function() {
                this.complete = new xe
            };
            h["com.watabou.processes.Process"] = Ai;
            Ai.__name__ = "com.watabou.processes.Process";
            Ai.prototype = {
                onComplete: function(a) {
                    null != a && this.complete.add(a);
                    return this
                },
                __class__: Ai
            };
            var nf = function() {
                this.complete = new xe
            };
            h["com.watabou.processes.Tweener"] = nf;
            nf.__name__ = "com.watabou.processes.Tweener";
            nf.create = function(a, b) {
                var c = new nf;
                c.time = a;
                c.updateCallback = b;
                return c
            }
            ;
            nf.run = function(a, b) {
                a = nf.create(a, b);
                a.start();
                return a
            }
            ;
            nf.__super__ = Ai;
            nf.prototype = v(Ai.prototype, {
                start: function() {
                    this.passed = 0;
                    this.paused = !1;
                    this.updateCallback(0);
                    return this.resume()
                },
                stop: function() {
                    return this.pause()
                },
                resume: function() {
                    tb.get_tick().add(m(this, this.update));
                    this.paused = !1;
                    return this
                },
                pause: function() {
                    tb.get_tick().remove(m(this, this.update));
                    this.paused = !0;
                    return this
                },
                update: function(a) {
                    this.paused || ((this.passed += a) < this.time ? this.updateCallback(this.passed / this.time) : (this.updateCallback(1),
                    this.stop(),
                    this.complete.dispatch()))
                },
                __class__: nf
            });
            var Be = function() {};
            h["com.watabou.system.Exporter"] = Be;
            Be.__name__ = "com.watabou.system.Exporter";
            Be.saveBinary = function(a, b, c) {
                b = Be.fixName(b);
                a = Kd.toArrayBuffer(a);
                window.saveAs(new Blob([a],{
                    type: c
                }), b, !0)
            }
            ;
            Be.saveText = function(a, b, c) {
                b = Be.fixName(b);
                window.saveAs(new Blob([a],{
                    type: c
                }), b, !0)
            }
            ;
            Be.savePNG = function(a, b) {
                a = a.encode(a.rect, new di);
                Be.saveBinary(a, b + ".png", "image/png")
            }
            ;
            Be.fixName = function(a) {
                return (new Ta("[ ']","g")).split(a.toLowerCase()).join("_")
            }
            ;
            var Da = function() {};
            h["com.watabou.system.State"] = Da;
            Da.__name__ = "com.watabou.system.State";
            Da.init = function(a, b) {
                null == Da.so && (null == a && (a = F.current.meta.h.packageName),
                Da.so = dd.getLocal(a),
                Da.data = Da.so.data,
                null != b && 0 == Aa.fields(Da.data).length && b(Da.data))
            }
            ;
            Da.get = function(a, b) {
                Da.init();
                return Object.prototype.hasOwnProperty.call(Da.data, a) ? Da.data[a] : b
            }
            ;
            Da.set = function(a, b) {
                Da.init();
                Da.data[a] = b;
                Da.so.flush()
            }
            ;
            var rb = function() {};
            h["com.watabou.system.URLState"] = rb;
            rb.__name__ = "com.watabou.system.URLState";
            rb.init = function() {
                if (null == rb.data) {
                    rb.data = {};
                    var a = new URLSearchParams(y.location.search);
                    null != a && a.forEach(function(a, c) {
                        return rb.data[c] = a
                    })
                }
            }
            ;
            rb.reset = function() {
                rb.data = {};
                rb.update()
            }
            ;
            rb.get = function(a, b) {
                rb.init();
                return Object.prototype.hasOwnProperty.call(rb.data, a) ? rb.data[a] : b
            }
            ;
            rb.getInt = function(a, b) {
                null == b && (b = 0);
                rb.init();
                return Object.prototype.hasOwnProperty.call(rb.data, a) ? G.parseInt(rb.data[a]) : b
            }
            ;
            rb.set = function(a, b) {
                rb.init();
                rb.data[a] = b;
                rb.update()
            }
            ;
            rb.getParams = function() {
                for (var a = "", b = rb.data, c = Aa.fields(b), d = 0; d < c.length; ) {
                    var f = c[d++];
                    a += ("" == a ? "?" : "&") + ("" + f + "=" + G.string(b[f]))
                }
                return a
            }
            ;
            rb.getURL = function() {
                return rb.baseURL + rb.getParams()
            }
            ;
            rb.update = function() {
                window.history.replaceState(rb.data, "", rb.getParams())
            }
            ;
            var vg = function(a) {
                this.ruleSet = a;
                this.clearState()
            };
            h["com.watabou.tracery.RuleSelector"] = vg;
            vg.__name__ = "com.watabou.tracery.RuleSelector";
            vg.prototype = {
                select: function() {
                    var a = this.ruleSet.defaultRules
                      , b = af.rng() * a.length | 0;
                    return a[b]
                },
                clearState: function() {},
                __class__: vg
            };
            var zi = function(a) {
                vg.call(this, a)
            };
            h["com.watabou.tracery.DeckRuleSelector"] = zi;
            zi.__name__ = "com.watabou.tracery.DeckRuleSelector";
            zi.__super__ = vg;
            zi.prototype = v(vg.prototype, {
                select: function() {
                    0 == this.deck.length && this.clearState();
                    var a = af.rng() * this.deck.length | 0
                      , b = this.deck[a];
                    this.deck.splice(a, 1);
                    return b
                },
                clearState: function() {
                    this.deck = this.ruleSet.defaultRules.slice()
                },
                __class__: zi
            });
            var Zf = function(a, b, c) {
                this.grammar = a;
                this.key = b;
                this.baseRules = c;
                this.clearState()
            };
            h["com.watabou.tracery.Symbol"] = Zf;
            Zf.__name__ = "com.watabou.tracery.Symbol";
            Zf.prototype = {
                clearState: function() {
                    this.stack = [this.baseRules];
                    this.baseRules.clearState()
                },
                pushRules: function(a) {
                    this.pushRuleSet(new wg(this.grammar,a))
                },
                pushRuleSet: function(a) {
                    this.stack.push(a)
                },
                popRules: function() {
                    this.stack.pop()
                },
                selectRule: function() {
                    return 0 == this.stack.length ? (console.log("../classes/com/watabou/tracery/Symbol.hx:37:", "The rule stack for " + this.key + " is empty, too many pops?"),
                    "((" + this.key + "))") : this.top().selectRule()
                },
                top: function() {
                    return this.stack[this.stack.length - 1]
                },
                __class__: Zf
            };
            var Bi = function(a, b, c) {
                Zf.call(this, a, b, new wg(a,[]));
                this.generator = c
            };
            h["com.watabou.tracery.ExtSymbol"] = Bi;
            Bi.__name__ = "com.watabou.tracery.ExtSymbol";
            Bi.__super__ = Zf;
            Bi.prototype = v(Zf.prototype, {
                selectRule: function() {
                    return this.generator()
                },
                __class__: Bi
            });
            var ik = function(a) {
                this.autoID = 0;
                this.defaultSelector = vg;
                this.modifiers = new Ia;
                this.flags = [];
                this.loadFromRawObj(a)
            };
            h["com.watabou.tracery.Grammar"] = ik;
            ik.__name__ = "com.watabou.tracery.Grammar";
            ik.prototype = {
                clearState: function() {
                    for (var a = this.symbols.h, b = Object.keys(a), c = b.length, d = 0; d < c; )
                        a[b[d++]].clearState();
                    this.flags = []
                },
                addModifiers: function(a) {
                    for (var b = Object.keys(a.h), c = b.length, d = 0; d < c; ) {
                        var f = b[d++];
                        this.modifiers.h[f] = a.h[f]
                    }
                },
                loadFromRawObj: function(a) {
                    this.raw = a;
                    this.symbols = new Ia;
                    this.subgrammars = [];
                    if (null != a)
                        for (var b = Aa.fields(a), c = 0; c < b.length; ) {
                            var d = b[c++]
                              , f = d;
                            d = a[d];
                            var g = "string" == typeof d ? [d] : d;
                            null == g && (console.log("../classes/com/watabou/tracery/Grammar.hx:55:", a),
                            console.log("../classes/com/watabou/tracery/Grammar.hx:56:", f));
                            d = this.symbols;
                            g = new Zf(this,f,new wg(this,this.unwrap(a, g)));
                            d.h[f] = g
                        }
                },
                unwrap: function(a, b) {
                    for (var c = [], d = 0; d < b.length; ) {
                        var f = b[d];
                        ++d;
                        if ("@" == Q.substr(f, 0, 1)) {
                            var g = Q.substr(f, 1, null);
                            f = null;
                            var k = g.indexOf("?-");
                            -1 != k && (f = Q.substr(g, 0, k),
                            g = Q.substr(g, k + 2, null));
                            k = a[g];
                            g = 0;
                            for (k = this.unwrap(a, "string" == typeof k ? [k] : k); g < k.length; ) {
                                var q = k[g];
                                ++g;
                                c.push(null == f ? q : "" + f + "?-" + q)
                            }
                        } else
                            c.push(f)
                    }
                    return c
                },
                createRoot: function(a) {
                    return new nh(this,null,0,{
                        type: -1,
                        raw: a
                    })
                },
                expand: function(a, b) {
                    null == b && (b = !1);
                    a = this.createRoot(a);
                    a.expand();
                    b || a.clearEscapeChars();
                    return a
                },
                flatten: function(a, b) {
                    null == b && (b = !1);
                    return this.expand(a, b).finishedText
                },
                execute: function(a) {
                    "set " == Q.substr(a, 0, 4) ? (a = Q.substr(a, 4, null),
                    ia.addAll(this.flags, (new Ta(", +","")).split(a))) : "clear " == Q.substr(a, 0, 6) ? (a = Q.substr(a, 6, null),
                    ia.addAll(this.flags, (new Ta(", +","")).split(a))) : console.log("../classes/com/watabou/tracery/Grammar.hx:113:", 'Unknown function "' + a + '" is called')
                },
                pushRules: function(a, b) {
                    if (Object.prototype.hasOwnProperty.call(this.symbols.h, a))
                        this.symbols.h[a].pushRules(b);
                    else {
                        var c = this.symbols;
                        b = new Zf(this,a,new wg(this,b));
                        c.h[a] = b
                    }
                },
                popRules: function(a) {
                    Object.prototype.hasOwnProperty.call(this.symbols.h, a) ? this.symbols.h[a].popRules() : console.log("../classes/com/watabou/tracery/Grammar.hx:142:", "Can't pop: no symbol for key " + a)
                },
                addAutoRules: function(a) {
                    var b = "_auto" + this.autoID++;
                    this.pushRules(b, a);
                    return b
                },
                selectRule: function(a) {
                    for (var b = this.symbols.h[a], c = 0, d = this.flags; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        f = this.symbols.h["" + f + "?-" + a];
                        if (null != f) {
                            b = f;
                            break
                        }
                    }
                    if (null != b && (c = b.selectRule(),
                    null != c))
                        return c;
                    c = 0;
                    for (d = this.subgrammars; c < d.length; )
                        if (b = d[c],
                        ++c,
                        Object.prototype.hasOwnProperty.call(b.symbols.h, a))
                            return b.symbols.h[a].selectRule();
                    console.log("../classes/com/watabou/tracery/Grammar.hx:177:", 'No symbol for "' + a + '"');
                    return "((" + a + "))"
                },
                validateRule: function(a) {
                    var b = a.indexOf("?-");
                    if (-1 == b)
                        return a;
                    var c = Q.substr(a, 0, b);
                    return this.eval(c) ? Q.substr(a, b + 2, null) : null
                },
                eval: function(a) {
                    var b = parseFloat(a);
                    if (!isNaN(b))
                        return a = b,
                        null == a && (a = .5),
                        (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 < a;
                    b = a.split("&");
                    if (1 < b.length) {
                        for (a = 0; a < b.length; ) {
                            var c = b[a];
                            ++a;
                            if (!this.eval(c))
                                return !1
                        }
                        return !0
                    }
                    a = (b = "!" == a.charAt(0)) ? Q.substr(a, 1, null) : a;
                    return -1 != this.flags.indexOf(a) != b
                },
                addExternal: function(a, b) {
                    var c = this.symbols;
                    b = new Bi(this,a,b);
                    c.h[a] = b
                },
                __class__: ik
            };
            var Va = function() {};
            h["com.watabou.tracery.ModsEngBasic"] = Va;
            Va.__name__ = "com.watabou.tracery.ModsEngBasic";
            Va.isVowel = function(a) {
                return -1 != "ieaou".indexOf(a.toLowerCase())
            }
            ;
            Va.isAlphaNum = function(a) {
                return "a" <= a && "z" >= a || "A" <= a && "Z" >= a ? !0 : "0" <= a ? "9" >= a : !1
            }
            ;
            Va.isPlural = function(a) {
                a = a.toLowerCase();
                return "s" == Q.substr(a, -1, null) ? "ss" != Q.substr(a, -2, null) : !1
            }
            ;
            Va.escapeRegExp = function(a) {
                return a.replace(/([.*+?^=!:${}()|\[\]/\\])/g, "\\$1")
            }
            ;
            Va.replace = function(a, b) {
                var c = new RegExp(Va.escapeRegExp(b[0]),"g");
                return a.replace(c, b[1])
            }
            ;
            Va.capitalizeAll = function(a, b) {
                b = "";
                for (var c = !0, d = 0, f = a.length; d < f; ) {
                    var g = d++;
                    g = a.charAt(g);
                    Va.isAlphaNum(g) || "'" == g ? c ? (b += g.toUpperCase(),
                    c = !1) : b += g : (c = !0,
                    b += g)
                }
                return b
            }
            ;
            Va.capitalize = function(a, b) {
                return a.charAt(0).toUpperCase() + Q.substr(a, 1, null)
            }
            ;
            Va.caps = function(a, b) {
                return a.toUpperCase()
            }
            ;
            Va.a = function(a, b) {
                if (0 < a.length) {
                    if ("u" == a.charAt(0).toLowerCase() && 2 < a.length && "i" == a.charAt(2).toLowerCase())
                        return "a " + a;
                    if (Va.isVowel(a.charAt(0)))
                        return "an " + a
                }
                return "a " + a
            }
            ;
            Va.firstS = function(a, b) {
                a = a.split(" ");
                return 1 == a.length ? Va.s(a[0], null) : Va.s(a[0], null) + " " + a.slice(1).join(" ")
            }
            ;
            Va.s = function(a, b) {
                b = Va.plurals.h;
                for (var c = Object.keys(b), d = c.length, f = 0; f < d; ) {
                    var g = c[f++]
                      , k = g;
                    g = b[g];
                    if (Q.substr(a, -k.length, null) == k)
                        return Q.substr(a, 0, a.length - k.length) + g
                }
                b = Q.substr(a, -1, null);
                if ("s" == b || "x" == b || "z" == b)
                    return a + "es";
                if ("y" == b && -1 == "ieaou".indexOf(Q.substr(a, -2, 1)))
                    return Q.substr(a, 0, -1) + "ies";
                b = Q.substr(a, -2, null);
                return "ch" == b || "sh" == b ? a + "es" : a + "s"
            }
            ;
            Va.possessive = function(a, b) {
                return "s" == Q.substr(a, -1, null) ? a + "'" : a + "'s"
            }
            ;
            Va.ed = function(a, b) {
                switch (Q.substr(a, -1, null)) {
                case "e":
                    return a + "d";
                case "h":
                    return a + "ed";
                case "s":
                    return a + "ed";
                case "x":
                    return a + "ed";
                case "y":
                    return Va.isVowel(a.charAt(a.length - 2)) ? a + "d" : a.substring(0, a.length - 1) + "ied";
                default:
                    return a + "ed"
                }
            }
            ;
            Va.ing = function(a, b) {
                return "e" == Q.substr(a, -1, null) ? a.substring(0, a.length - 1) + "ing" : a + "ing"
            }
            ;
            Va.thiss = function(a, b) {
                return Va.isPlural(a) ? "these" : "this"
            }
            ;
            Va.they = function(a, b) {
                return Va.isPlural(a) ? "they" : "it"
            }
            ;
            Va.them = function(a, b) {
                return Va.isPlural(a) ? "them" : "it"
            }
            ;
            Va.is = function(a, b) {
                return Va.isPlural(a) ? "are" : "is"
            }
            ;
            Va.was = function(a, b) {
                return Va.isPlural(a) ? "were" : "was"
            }
            ;
            Va.get = function() {
                var a = new Ia;
                a.h.replace = Va.replace;
                a.h.possessive = Va.possessive;
                a.h.capitalize = Va.capitalize;
                a.h.capitalizeAll = Va.capitalizeAll;
                a.h.caps = Va.caps;
                a.h.firstS = Va.firstS;
                a.h.s = Va.s;
                a.h.a = Va.a;
                a.h.ed = Va.ed;
                a.h.ing = Va.ing;
                a.h["this"] = Va.thiss;
                a.h.they = Va.they;
                a.h.them = Va.them;
                a.h.is = Va.is;
                a.h.was = Va.was;
                return a
            }
            ;
            var oh = function(a, b) {
                this.node = a;
                a = b.split(":");
                this.target = a[0];
                1 == a.length ? this.type = 2 : (this.rule = a[1],
                this.type = "POP" == this.rule ? 1 : 0)
            };
            h["com.watabou.tracery.NodeAction"] = oh;
            oh.__name__ = "com.watabou.tracery.NodeAction";
            oh.prototype = {
                createUndo: function() {
                    return 0 == this.type ? new oh(this.node,this.target + ":POP") : null
                },
                activate: function() {
                    var a = this.node.grammar;
                    switch (this.type) {
                    case 0:
                        for (var b = this.rule.split(","), c = [], d = 0; d < b.length; ) {
                            var f = b[d];
                            ++d;
                            f = new nh(a,null,0,{
                                type: -1,
                                raw: f
                            });
                            f.expand();
                            c.push(f.finishedText)
                        }
                        a.pushRules(this.target, c);
                        break;
                    case 1:
                        a.popRules(this.target);
                        break;
                    case 2:
                        a.execute(this.target)
                    }
                },
                __class__: oh
            };
            var wg = function(a, b) {
                this.grammar = a;
                a = [];
                for (var c = 0; c < b.length; ) {
                    var d = b[c];
                    ++c;
                    a.push(this.process(d))
                }
                this.defaultRules = this.raw = a
            };
            h["com.watabou.tracery.RuleSet"] = wg;
            wg.__name__ = "com.watabou.tracery.RuleSet";
            wg.prototype = {
                process: function(a) {
                    var b = a.indexOf("{");
                    if (-1 == b)
                        return a;
                    for (var c = -1, d = 1, f = [], g = b + 1, k = b + 1, q = a.length; k < q; ) {
                        var p = k++
                          , l = a.charAt(p);
                        if ("|" == l && 1 == d)
                            f.push(a.substring(g, p)),
                            g = p + 1;
                        else if ("{" == l)
                            ++d;
                        else if ("}" == l && 0 == --d) {
                            f.push(a.substring(g, p));
                            c = p;
                            break
                        }
                    }
                    return -1 != c ? (b = Q.substr(a, 0, b),
                    a = Q.substr(a, c + 1, null),
                    f = this.grammar.addAutoRules(1 == f.length ? [f[0], ""] : f),
                    "" + b + "#" + f + "#" + this.process(a)) : a
                },
                selectRule: function() {
                    null == this.selector && (this.selector = z.createInstance(this.grammar.defaultSelector, [this]));
                    for (; ; ) {
                        var a = this.grammar.validateRule(this.selector.select());
                        if (null != a)
                            return a
                    }
                },
                clearState: function() {
                    null != this.selector && this.selector.clearState()
                },
                __class__: wg
            };
            var af = function() {};
            h["com.watabou.tracery.Tracery"] = af;
            af.__name__ = "com.watabou.tracery.Tracery";
            af.parseTag = function(a) {
                for (var b = {
                    symbol: null,
                    preactions: [],
                    postactions: [],
                    modifiers: []
                }, c = af.parse(a), d = null, f = 0; f < c.length; ) {
                    var g = c[f];
                    ++f;
                    if (0 == g.type)
                        if (null == d)
                            d = g.raw;
                        else
                            throw aa.thrown("multiple main sections in " + a);
                    else
                        b.preactions.push(g.raw)
                }
                null != d && (a = d.split("."),
                b.symbol = a[0],
                b.modifiers = a.slice(1));
                return b
            }
            ;
            af.parse = function(a) {
                var b = 0
                  , c = !1
                  , d = []
                  , f = !1
                  , g = 0
                  , k = ""
                  , q = -1;
                if (null == a)
                    return [];
                for (var p = function(b, c, f) {
                    1 > c - b && (1 == f && console.log("../classes/com/watabou/tracery/Tracery.hx:63:", "" + b + ": empty tag"),
                    2 == f && console.log("../classes/com/watabou/tracery/Tracery.hx:65:", "" + b + ": empty action"));
                    b = -1 != q ? k + "\\" + a.substring(q + 1, c) : a.substring(b, c);
                    d.push({
                        type: f,
                        raw: b
                    });
                    q = -1;
                    k = ""
                }, l = 0, h = a.length; l < h; ) {
                    var n = l++;
                    if (f)
                        f = !f;
                    else
                        switch (a.charAt(n)) {
                        case "#":
                            0 == b && (c ? p(g, n, 1) : g < n && p(g, n, 0),
                            g = n + 1,
                            c = !c);
                            break;
                        case "[":
                            0 != b || c || (g < n && p(g, n, 0),
                            g = n + 1);
                            ++b;
                            break;
                        case "\\":
                            f = !0;
                            k += a.substring(g, n);
                            g = n + 1;
                            q = n;
                            break;
                        case "]":
                            --b,
                            0 != b || c || (p(g, n, 2),
                            g = n + 1)
                        }
                }
                g < a.length && p(g, a.length, 0);
                c && console.log("../classes/com/watabou/tracery/Tracery.hx:130:", "Unclosed tag");
                0 < b && console.log("../classes/com/watabou/tracery/Tracery.hx:132:", "Too many [");
                0 > b && console.log("../classes/com/watabou/tracery/Tracery.hx:134:", "Too many ]");
                l = [];
                h = 0;
                for (b = d; h < b.length; )
                    c = b[h],
                    ++h,
                    (0 != c.type || 0 < c.raw.length) && l.push(c);
                return d = l
            }
            ;
            var nh = function(a, b, c, d) {
                null == d.raw && (console.log("../classes/com/watabou/tracery/TraceryNode.hx:35:", "Empty input for node"),
                d.raw = "");
                this.grammar = a;
                this.parent = b;
                this.depth = null != b ? b.depth + 1 : 0;
                this.childIndex = c;
                this.raw = d.raw;
                this.type = d.type;
                this.isExpanded = !1
            };
            h["com.watabou.tracery.TraceryNode"] = nh;
            nh.__name__ = "com.watabou.tracery.TraceryNode";
            nh.prototype = {
                expandChildren: function(a, b) {
                    this.children = [];
                    this.finishedText = "";
                    this.childRule = a;
                    if (null != a) {
                        a = af.parse(a);
                        for (var c = 0, d = a.length; c < d; ) {
                            var f = c++
                              , g = new nh(this.grammar,this,f,a[f]);
                            this.children[f] = g;
                            b || g.expand(!1);
                            this.finishedText += g.finishedText
                        }
                    } else
                        console.log("../classes/com/watabou/tracery/TraceryNode.hx:72:", "No child rule provided, can't expand children")
                },
                expand: function(a) {
                    null == a && (a = !1);
                    if (!this.isExpanded)
                        switch (this.isExpanded = !0,
                        this.type) {
                        case 0:
                            this.finishedText = this.raw;
                            break;
                        case 1:
                            var b = af.parseTag(this.raw);
                            this.symbol = b.symbol;
                            this.modifiers = b.modifiers;
                            var c = []
                              , d = 0;
                            for (b = b.preactions; d < b.length; ) {
                                var f = b[d];
                                ++d;
                                c.push(new oh(this,f))
                            }
                            this.preactions = c;
                            this.postaction = [];
                            c = 0;
                            for (d = this.preactions; c < d.length; )
                                f = d[c],
                                ++c,
                                0 == f.type && this.postaction.push(f.createUndo());
                            c = 0;
                            for (d = this.preactions; c < d.length; )
                                f = d[c],
                                ++c,
                                f.activate();
                            this.finishedText = this.raw;
                            c = this.grammar.selectRule(this.symbol);
                            this.expandChildren(c, a);
                            c = 0;
                            for (d = this.modifiers; c < d.length; )
                                a = d[c],
                                ++c,
                                b = [],
                                f = a.indexOf("("),
                                -1 != f && (b = a.substring(f + 1, a.indexOf(")")).split(","),
                                a = a.substring(0, f)),
                                f = this.grammar.modifiers.h[a],
                                null == f ? (console.log("../classes/com/watabou/tracery/TraceryNode.hx:114:", "Missing modifier " + a),
                                this.finishedText += "((." + a + "))") : this.finishedText = f(this.finishedText, b);
                            c = 0;
                            for (d = this.postaction; c < d.length; )
                                a = d[c],
                                ++c,
                                a.activate();
                            break;
                        case 2:
                            this.action = new oh(this,this.raw);
                            this.action.activate();
                            this.finishedText = "";
                            break;
                        default:
                            this.expandChildren(this.raw, a)
                        }
                },
                clearEscapeChars: function() {},
                __class__: nh
            };
            var ia = function() {};
            h["com.watabou.utils.ArrayExtender"] = ia;
            ia.__name__ = "com.watabou.utils.ArrayExtender";
            ia.revert = function(a) {
                a = a.slice();
                a.reverse();
                return a
            }
            ;
            ia.shuffle = function(a) {
                for (var b = [], c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    b.splice((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * (b.length + 1) | 0, 0, d)
                }
                return b
            }
            ;
            ia.random = function(a) {
                return a[(l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * a.length | 0]
            }
            ;
            ia.pick = function(a) {
                var b = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * a.length | 0
                  , c = a[b];
                a.splice(b, 1);
                return c
            }
            ;
            ia.fallOff = function(a, b) {
                null == b && (b = 2);
                return a[Math.pow((l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647, b) * a.length | 0]
            }
            ;
            ia.subset = function(a, b) {
                return ia.shuffle(a).slice(0, b)
            }
            ;
            ia.weighted = function(a, b) {
                for (var c = (l.seed = 48271 * l.seed % 2147483647 | 0) / 2147483647 * ia.sum(b), d = 0, f = 0, g = a.length; f < g; ) {
                    var k = f++;
                    if (c <= (d += b[k]))
                        return a[k]
                }
                return a[0]
            }
            ;
            ia.isEmpty = function(a) {
                return 0 == a.length
            }
            ;
            ia.min = function(a, b) {
                for (var c = a[0], d = b(c), f = 1, g = a.length; f < g; ) {
                    var k = f++;
                    k = a[k];
                    var q = b(k);
                    q < d && (c = k,
                    d = q)
                }
                return c
            }
            ;
            ia.max = function(a, b) {
                for (var c = a[0], d = b(c), f = 1, g = a.length; f < g; ) {
                    var k = f++;
                    k = a[k];
                    var q = b(k);
                    q > d && (c = k,
                    d = q)
                }
                return c
            }
            ;
            ia.every = function(a, b) {
                for (var c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    if (!b(d))
                        return !1
                }
                return !0
            }
            ;
            ia.some = function(a, b) {
                for (var c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    if (b(d))
                        return !0
                }
                return !1
            }
            ;
            ia.count = function(a, b) {
                for (var c = 0, d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    b(f) && ++c
                }
                return c
            }
            ;
            ia.sum = function(a) {
                for (var b = 0, c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    b += d
                }
                return b
            }
            ;
            ia.add = function(a, b) {
                return -1 == a.indexOf(b) ? (a.push(b),
                !0) : !1
            }
            ;
            ia.intersect = function(a, b) {
                for (var c = [], d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    -1 != b.indexOf(f) && c.push(f)
                }
                return c
            }
            ;
            ia.addAll = function(a, b) {
                for (var c = 0; c < b.length; ) {
                    var d = b[c];
                    ++c;
                    -1 == a.indexOf(d) && a.push(d)
                }
            }
            ;
            ia.removeAll = function(a, b) {
                for (var c = 0; c < b.length; ) {
                    var d = b[c];
                    ++c;
                    Q.remove(a, d)
                }
            }
            ;
            ia.difference = function(a, b) {
                for (var c = [], d = 0; d < a.length; ) {
                    var f = a[d];
                    ++d;
                    -1 == b.indexOf(f) && c.push(f)
                }
                return c
            }
            ;
            ia.intersects = function(a, b) {
                for (var c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    if (-1 != b.indexOf(d))
                        return !0
                }
                return !1
            }
            ;
            var Sh = function() {};
            h["com.watabou.utils.ColorNames"] = Sh;
            Sh.__name__ = "com.watabou.utils.ColorNames";
            Sh.get = function(a) {
                for (var b = a >>> 16, c = a >>> 8 & 255, d = a & 255, f = "", g = 1E10, k = Sh.values.h, q = Object.keys(k), p = q.length, l = 0; l < p; ) {
                    var h = q[l++]
                      , n = h;
                    a = k[h];
                    h = a >> 16;
                    var u = a >> 8 & 255;
                    a &= 255;
                    h = (b - h) * (b - h) + (c - u) * (c - u) + (d - a) * (d - a);
                    g > ab.toFloat(h) && (g = ab.toFloat(h),
                    f = n)
                }
                return f
            }
            ;
            var bl = function() {};
            h["com.watabou.utils.GrammarExtender"] = bl;
            bl.__name__ = "com.watabou.utils.GrammarExtender";
            bl.a = function(a, b) {
                null == b && (b = !1);
                return (-1 != "ieaou".indexOf(a.charAt(0).toLowerCase()) ? "an" : "a") + (b ? "" : " " + a)
            }
            ;
            var Rc = function() {};
            h["com.watabou.utils.GraphicsExtender"] = Rc;
            Rc.__name__ = "com.watabou.utils.GraphicsExtender";
            Rc.drawPolygon = function(a, b) {
                var c = b[b.length - 1];
                a.moveTo(c.x, c.y);
                for (var d = 0; d < b.length; )
                    c = b[d],
                    ++d,
                    a.lineTo(c.x, c.y)
            }
            ;
            Rc.drawPolygonAt = function(a, b, c, d) {
                var f = b[b.length - 1];
                a.moveTo(f.x + c, f.y + d);
                for (var g = 0; g < b.length; )
                    f = b[g],
                    ++g,
                    a.lineTo(f.x + c, f.y + d)
            }
            ;
            Rc.drawPolyline = function(a, b) {
                var c = b[0];
                a.moveTo(c.x, c.y);
                for (var d = 1, f = b.length; d < f; )
                    c = d++,
                    c = b[c],
                    a.lineTo(c.x, c.y)
            }
            ;
            Rc.dashedLine = function(a, b, c, d) {
                var f = !0
                  , g = 0;
                for (a.moveTo(b.x, b.y); ; ) {
                    var k = B.distance(b, c)
                      , q = d[g];
                    if (0 < q) {
                        if (k < q) {
                            f && a.lineTo(c.x, c.y);
                            break
                        }
                        b = sa.lerp(b, c, q / k);
                        f ? a.lineTo(b.x, b.y) : a.moveTo(b.x, b.y)
                    }
                    ++g >= d.length && (g = 0);
                    f = !f
                }
            }
            ;
            Rc.dashedPolyline = function(a, b, c, d) {
                null == c && (c = !1);
                if (!(2 > b.length)) {
                    var f = !0
                      , g = 0
                      , k = 0
                      , q = d[0]
                      , p = c ? -1 : 0
                      , l = b[c ? b.length - 1 : 0];
                    c = b[c ? 0 : 1];
                    for (a.moveTo(l.x, l.y); ; ) {
                        var h = B.distance(l, c);
                        if (k + h < q) {
                            f && a.lineTo(c.x, c.y);
                            if (++p >= b.length)
                                break;
                            l = c;
                            c = b[p];
                            k += h
                        } else
                            0 < q && (l = sa.lerp(l, c, (q - k) / h),
                            f ? a.lineTo(l.x, l.y) : a.moveTo(l.x, l.y)),
                            ++g >= d.length && (g = 0),
                            q = d[g],
                            k = 0,
                            f = !f
                    }
                }
            }
            ;
            var Zb = function() {};
            h["com.watabou.utils.MathUtils"] = Zb;
            Zb.__name__ = "com.watabou.utils.MathUtils";
            Zb.gate = function(a, b, c) {
                return a < b ? b : a < c ? a : c
            }
            ;
            Zb.cycle = function(a, b, c) {
                for (; a < b; )
                    a += c - b;
                for (; a > c; )
                    a -= c - b;
                return a
            }
            ;
            Zb.gatei = function(a, b, c) {
                return a < b ? b : a < c ? a : c
            }
            ;
            var gh = function() {
                this.components = []
            };
            h["com.watabou.utils.Noise"] = gh;
            gh.__name__ = "com.watabou.utils.Noise";
            gh.fractal = function(a, b, c) {
                null == c && (c = .5);
                null == b && (b = 1);
                null == a && (a = 1);
                for (var d = new gh, f = 1, g = 0; g < a; ) {
                    g++;
                    var k = new bf(l.seed = 48271 * l.seed % 2147483647 | 0);
                    k.gridSize = b;
                    k.amplitude = f;
                    d.components.push(k);
                    b *= 2;
                    f *= c
                }
                return d
            }
            ;
            gh.prototype = {
                get: function(a, b) {
                    for (var c = 0, d = 0, f = this.components; d < f.length; ) {
                        var g = f[d];
                        ++d;
                        c += g.get(a, b)
                    }
                    return c
                },
                __class__: gh
            };
            var bf = function(a) {
                this.offsetX = this.offsetY = 0;
                this.gridSize = this.amplitude = 1;
                for (var b = [], c = 0; 256 > c; ) {
                    var d = c++;
                    b.push(bf.permutation[(d + a) % 256])
                }
                this.p = b;
                this.p = this.p.concat(this.p);
                if (null == bf.smooth) {
                    b = [];
                    for (c = 0; 4096 > c; )
                        d = c++,
                        a = d / 4096,
                        b.push(a * a * a * (a * (6 * a - 15) + 10));
                    bf.smooth = b
                }
            };
            h["com.watabou.utils.Perlin"] = bf;
            bf.__name__ = "com.watabou.utils.Perlin";
            bf.prototype = {
                get: function(a, b) {
                    a = a * this.gridSize + this.offsetX;
                    0 > a && (a += 256);
                    b = b * this.gridSize + this.offsetY;
                    0 > b && (b += 256);
                    var c = Math.floor(a)
                      , d = c + 1
                      , f = a - c
                      , g = bf.smooth[4096 * f | 0];
                    a = Math.floor(b);
                    var k = a + 1
                      , q = b - a
                      , p = bf.smooth[4096 * q | 0];
                    b = this.p[this.p[d] + a];
                    var l = this.p[this.p[c] + k];
                    d = this.p[this.p[d] + k];
                    switch (this.p[this.p[c] + a] & 3) {
                    case 0:
                        c = f + q;
                        break;
                    case 1:
                        c = f - q;
                        break;
                    case 2:
                        c = -f + q;
                        break;
                    case 3:
                        c = -f - q;
                        break;
                    default:
                        c = 0
                    }
                    a = f - 1;
                    switch (b & 3) {
                    case 0:
                        b = a + q;
                        break;
                    case 1:
                        b = a - q;
                        break;
                    case 2:
                        b = -a + q;
                        break;
                    case 3:
                        b = -a - q;
                        break;
                    default:
                        b = 0
                    }
                    k = c + (b - c) * g;
                    b = q - 1;
                    switch (l & 3) {
                    case 0:
                        c = f + b;
                        break;
                    case 1:
                        c = f - b;
                        break;
                    case 2:
                        c = -f + b;
                        break;
                    case 3:
                        c = -f - b;
                        break;
                    default:
                        c = 0
                    }
                    a = f - 1;
                    b = q - 1;
                    switch (d & 3) {
                    case 0:
                        b = a + b;
                        break;
                    case 1:
                        b = a - b;
                        break;
                    case 2:
                        b = -a + b;
                        break;
                    case 3:
                        b = -a - b;
                        break;
                    default:
                        b = 0
                    }
                    return this.amplitude * (k + (c + (b - c) * g - k) * p)
                },
                __class__: bf
            };
            var Cb = N["com.watabou.utils.ParamType"] = {
                __ename__: "com.watabou.utils.ParamType",
                __constructs__: null,
                COLOR: {
                    _hx_name: "COLOR",
                    _hx_index: 0,
                    __enum__: "com.watabou.utils.ParamType",
                    toString: r
                },
                MULTI: {
                    _hx_name: "MULTI",
                    _hx_index: 1,
                    __enum__: "com.watabou.utils.ParamType",
                    toString: r
                },
                FONT: {
                    _hx_name: "FONT",
                    _hx_index: 2,
                    __enum__: "com.watabou.utils.ParamType",
                    toString: r
                },
                FLOAT: {
                    _hx_name: "FLOAT",
                    _hx_index: 3,
                    __enum__: "com.watabou.utils.ParamType",
                    toString: r
                },
                INT: {
                    _hx_name: "INT",
                    _hx_index: 4,
                    __enum__: "com.watabou.utils.ParamType",
                    toString: r
                },
                STRING: {
                    _hx_name: "STRING",
                    _hx_index: 5,
                    __enum__: "com.watabou.utils.ParamType",
                    toString: r
                },
                BOOL: {
                    _hx_name: "BOOL",
                    _hx_index: 6,
                    __enum__: "com.watabou.utils.ParamType",
                    toString: r
                }
            };
            Cb.__constructs__ = [Cb.COLOR, Cb.MULTI, Cb.FONT, Cb.FLOAT, Cb.INT, Cb.STRING, Cb.BOOL];
            Cb.__empty_constructs__ = [Cb.COLOR, Cb.MULTI, Cb.FONT, Cb.FLOAT, Cb.INT, Cb.STRING, Cb.BOOL];
            var kd = function() {
                this.params = []
            };
            h["com.watabou.utils.Palette"] = kd;
            kd.__name__ = "com.watabou.utils.Palette";
            kd.float2str = function(a) {
                a = null == a ? "null" : "" + a;
                -1 == a.indexOf(".") && (a += ".0");
                return a
            }
            ;
            kd.font2format = function(a) {
                if (null == a)
                    return null;
                var b = null != a.face ? a.face : null != a.embedded && Rb.exists(a.embedded) ? Rb.getFont(a.embedded).name : "_serif";
                return new Ae(b,a.size,0,a.bold,a.italic)
            }
            ;
            kd.fromData = function(a) {
                for (var b = new kd, c = Aa.fields(a), d = 0; d < c.length; ) {
                    var f = c[d++]
                      , g = f;
                    f = a[f];
                    if ("number" == typeof f && (f | 0) === f)
                        b.setInt(g, f);
                    else if ("number" == typeof f)
                        b.setFloat(g, f);
                    else if ("boolean" == typeof f)
                        b.setBool(g, f);
                    else if ("string" == typeof f) {
                        if (7 == f.length && "#" == f.charAt(0)) {
                            var k = G.parseInt("0x" + Q.substr(f, 1, null));
                            if (null != k) {
                                b.setColor(g, k);
                                continue
                            }
                        }
                        k = parseFloat(f);
                        if (isNaN(k))
                            switch (f) {
                            case "false":
                                b.setBool(g, !1);
                                break;
                            case "true":
                                b.setBool(g, !0);
                                break;
                            default:
                                b.setString(g, f)
                            }
                        else
                            -1 == f.indexOf(".") ? b.setInt(g, k | 0) : b.setFloat(g, k)
                    } else if (f instanceof Array) {
                        k = [];
                        for (var q = 0; q < f.length; ) {
                            var p = f[q];
                            ++q;
                            p = G.parseInt("0x" + Q.substr(p, 1, null));
                            null != p && k.push(p)
                        }
                        b.setMulti(g, k)
                    } else
                        null != f && b.setFont(g, f)
                }
                return b
            }
            ;
            kd.fromJSON = function(a) {
                a = JSON.parse(a);
                return kd.fromData(a)
            }
            ;
            kd.prototype = {
                getColor: function(a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        if (f.id == a) {
                            if (f.type == Cb.COLOR)
                                return f.color;
                            if (f.type == Cb.MULTI)
                                return f.multi[0];
                            break
                        }
                    }
                    return b
                },
                getMulti: function(a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        if (f.id == a) {
                            if (f.type == Cb.MULTI)
                                return f.multi;
                            if (f.type == Cb.COLOR)
                                return [f.color];
                            break
                        }
                    }
                    return [b]
                },
                getFont: function(a, b) {
                    for (var c = 0, d = this.params; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        if (f.id == a && f.type == Cb.FONT)
                            return f.font
                    }
                    return b
                },
                getFloat: function(a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        if (f.id == a && f.type == Cb.FLOAT)
                            return f.float
                    }
                    return b
                },
                getInt: function(a, b) {
                    null == b && (b = 0);
                    for (var c = 0, d = this.params; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        if (f.id == a && f.type == Cb.INT)
                            return f.int
                    }
                    return b
                },
                getString: function(a, b) {
                    for (var c = 0, d = this.params; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        if (f.id == a && f.type == Cb.STRING)
                            return f.string
                    }
                    return b
                },
                getBool: function(a, b) {
                    null == b && (b = !1);
                    for (var c = 0, d = this.params; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        if (f.id == a && f.type == Cb.BOOL)
                            return f.bool
                    }
                    return b
                },
                setColor: function(a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.COLOR,
                        color: b
                    })
                },
                setMulti: function(a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.MULTI,
                        multi: b
                    })
                },
                setFont: function(a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.FONT,
                        font: b
                    })
                },
                setFloat: function(a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.FLOAT,
                        float: b
                    })
                },
                setInt: function(a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.INT,
                        int: b
                    })
                },
                setString: function(a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.STRING,
                        string: b
                    })
                },
                setBool: function(a, b) {
                    this.params.push({
                        id: a,
                        type: Cb.BOOL,
                        bool: b
                    })
                },
                data: function() {
                    for (var a = {}, b = 0, c = this.params; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        switch (d.type._hx_index) {
                        case 0:
                            a[d.id] = "#" + P.hex(d.color, 6);
                            break;
                        case 1:
                            var f = d.id
                              , g = []
                              , k = 0;
                            for (d = d.multi; k < d.length; ) {
                                var q = d[k];
                                ++k;
                                g.push("#" + P.hex(q, 6))
                            }
                            a[f] = g;
                            break;
                        case 2:
                            a[d.id] = d.font;
                            break;
                        case 3:
                            a[d.id] = kd.float2str(d.float);
                            break;
                        case 4:
                            a[d.id] = null == d.int ? "null" : "" + d.int;
                            break;
                        case 5:
                            a[d.id] = d.string;
                            break;
                        case 6:
                            a[d.id] = null == d.bool ? "null" : "" + d.bool
                        }
                    }
                    return a
                },
                json: function() {
                    return JSON.stringify(this.data(), null, "  ")
                },
                __class__: kd
            };
            var ii = function() {};
            h["com.watabou.utils.PointExtender"] = ii;
            ii.__name__ = "com.watabou.utils.PointExtender";
            ii.set = function(a, b) {
                a.x = b.x;
                a.y = b.y
            }
            ;
            ii.project = function(a, b) {
                var c = a.get_length();
                return (a.x * b.x + a.y * b.y) / (c * c)
            }
            ;
            var Ve = function() {};
            h["com.watabou.utils.SetUtils"] = Ve;
            Ve.__name__ = "com.watabou.utils.SetUtils";
            Ve.fromArray = function(a) {
                for (var b = new pa, c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    b.set(d, !0)
                }
                return b
            }
            ;
            Ve.removeArr = function(a, b) {
                for (var c = 0; c < b.length; ) {
                    var d = b[c];
                    ++c;
                    a.remove(d)
                }
            }
            ;
            Ve.isEmpty = function(a) {
                for (a = a.iterator(); a.hasNext(); )
                    return a.next(),
                    !1;
                return !0
            }
            ;
            var He = function() {};
            h["com.watabou.utils.StringUtils"] = He;
            He.__name__ = "com.watabou.utils.StringUtils";
            He.capitalize = function(a) {
                return Q.substr(a, 0, 1).toUpperCase() + Q.substr(a, 1, null)
            }
            ;
            He.capitalizeAll = function(a) {
                var b = []
                  , c = 0;
                for (a = a.split(" "); c < a.length; ) {
                    var d = a[c];
                    ++c;
                    b.push(He.capitalize(d))
                }
                return b.join(" ")
            }
            ;
            var pe = function(a) {
                null == a && (a = []);
                this.valueClasses = a;
                this.slots = vd.NIL;
                this.priorityBased = !1
            };
            h["msignal.Signal"] = pe;
            pe.__name__ = "msignal.Signal";
            pe.prototype = {
                add: function(a) {
                    return this.registerListener(a)
                },
                addOnce: function(a) {
                    return this.registerListener(a, !0)
                },
                addWithPriority: function(a, b) {
                    null == b && (b = 0);
                    return this.registerListener(a, !1, b)
                },
                addOnceWithPriority: function(a, b) {
                    null == b && (b = 0);
                    return this.registerListener(a, !0, b)
                },
                remove: function(a) {
                    var b = this.slots.find(a);
                    if (null == b)
                        return null;
                    this.slots = this.slots.filterNot(a);
                    return b
                },
                removeAll: function() {
                    this.slots = vd.NIL
                },
                registerListener: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return this.registrationPossible(a, b) ? (a = this.createSlot(a, b, c),
                    this.priorityBased || 0 == c || (this.priorityBased = !0),
                    this.slots = this.priorityBased || 0 != c ? this.slots.insertWithPriority(a) : this.slots.prepend(a),
                    a) : this.slots.find(a)
                },
                registrationPossible: function(a, b) {
                    return this.slots.nonEmpty && null != this.slots.find(a) ? !1 : !0
                },
                createSlot: function(a, b, c) {
                    return null
                },
                get_numListeners: function() {
                    return this.slots.get_length()
                },
                __class__: pe,
                __properties__: {
                    get_numListeners: "get_numListeners"
                }
            };
            var Ac = function(a) {
                pe.call(this, [a])
            };
            h["msignal.Signal1"] = Ac;
            Ac.__name__ = "msignal.Signal1";
            Ac.__super__ = pe;
            Ac.prototype = v(pe.prototype, {
                dispatch: function(a) {
                    for (var b = this.slots; b.nonEmpty; )
                        b.head.execute(a),
                        b = b.tail
                },
                createSlot: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new Ci(this,a,b,c)
                },
                __class__: Ac
            });
            var vd = function(a, b) {
                this.nonEmpty = !1;
                null == a && null == b ? this.nonEmpty = !1 : null != a && (this.head = a,
                this.tail = null == b ? vd.NIL : b,
                this.nonEmpty = !0)
            };
            h["msignal.SlotList"] = vd;
            vd.__name__ = "msignal.SlotList";
            vd.prototype = {
                get_length: function() {
                    if (!this.nonEmpty)
                        return 0;
                    if (this.tail == vd.NIL)
                        return 1;
                    for (var a = 0, b = this; b.nonEmpty; )
                        ++a,
                        b = b.tail;
                    return a
                },
                prepend: function(a) {
                    return new vd(a,this)
                },
                insertWithPriority: function(a) {
                    if (!this.nonEmpty)
                        return new vd(a);
                    var b = a.priority;
                    if (b >= this.head.priority)
                        return this.prepend(a);
                    for (var c = new vd(this.head), d = c, f = this.tail; f.nonEmpty; ) {
                        if (b > f.head.priority)
                            return d.tail = f.prepend(a),
                            c;
                        d = d.tail = new vd(f.head);
                        f = f.tail
                    }
                    d.tail = new vd(a);
                    return c
                },
                filterNot: function(a) {
                    if (!this.nonEmpty || null == a)
                        return this;
                    if (this.head.listener == a)
                        return this.tail;
                    for (var b = new vd(this.head), c = b, d = this.tail; d.nonEmpty; ) {
                        if (d.head.listener == a)
                            return c.tail = d.tail,
                            b;
                        c = c.tail = new vd(d.head);
                        d = d.tail
                    }
                    return this
                },
                find: function(a) {
                    if (!this.nonEmpty)
                        return null;
                    for (var b = this; b.nonEmpty; ) {
                        if (b.head.listener == a)
                            return b.head;
                        b = b.tail
                    }
                    return null
                },
                __class__: vd,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var tb = function() {};
            h["com.watabou.utils.Updater"] = tb;
            tb.__name__ = "com.watabou.utils.Updater";
            tb.__properties__ = {
                get_tick: "get_tick"
            };
            tb.get_tick = function() {
                null == tb.source && tb.useTimer(60);
                return tb._tick
            }
            ;
            tb.fire = function() {
                var a = Sa.getTimer();
                0 == tb.lastTime ? tb._tick.dispatch(0) : tb._tick.dispatch((a - tb.lastTime) / 1E3 * tb.timeScale);
                tb.lastTime = a
            }
            ;
            tb.useTimer = function(a) {
                null != tb.source && tb.source.stop();
                tb.source = new Di(a)
            }
            ;
            tb.useEnterFrame = function(a) {
                null != tb.source && tb.source.stop();
                tb.source = new Ei(a)
            }
            ;
            tb.wait = function(a, b) {
                var c = 0
                  , d = null;
                d = function(f) {
                    (c += f) >= a && (tb.get_tick().remove(d),
                    b())
                }
                ;
                tb.get_tick().add(d);
                return d
            }
            ;
            tb.cancel = function(a) {
                tb.get_tick().remove(a)
            }
            ;
            tb.stop = function() {
                null != tb.source && (tb.source.stop(),
                tb.source = null)
            }
            ;
            var xg = function() {};
            h["com.watabou.utils.RecurringEventDispatcher"] = xg;
            xg.__name__ = "com.watabou.utils.RecurringEventDispatcher";
            xg.prototype = {
                stop: function() {},
                __class__: xg
            };
            var Di = function(a) {
                this.timer = new Fi(a);
                this.timer.addEventListener("timer", m(this, this.onTimer));
                this.timer.start()
            };
            h["com.watabou.utils._Updater.TimerEventDispatcher"] = Di;
            Di.__name__ = "com.watabou.utils._Updater.TimerEventDispatcher";
            Di.__super__ = xg;
            Di.prototype = v(xg.prototype, {
                onTimer: function(a) {
                    tb.fire();
                    a.updateAfterEvent()
                },
                stop: function() {
                    this.timer.stop()
                },
                __class__: Di
            });
            var Ei = function(a) {
                this.dispObj = a;
                a.addEventListener("enterFrame", m(this, this.onEnterFrame))
            };
            h["com.watabou.utils._Updater.FrameEventDispatcher"] = Ei;
            Ei.__name__ = "com.watabou.utils._Updater.FrameEventDispatcher";
            Ei.__super__ = xg;
            Ei.prototype = v(xg.prototype, {
                onEnterFrame: function(a) {
                    tb.fire()
                },
                stop: function() {
                    this.dispObj.removeEventListener("enterFrame", m(this, this.onEnterFrame))
                },
                __class__: Ei
            });
            var Nd = N["haxe.StackItem"] = {
                __ename__: "haxe.StackItem",
                __constructs__: null,
                CFunction: {
                    _hx_name: "CFunction",
                    _hx_index: 0,
                    __enum__: "haxe.StackItem",
                    toString: r
                },
                Module: (D = function(a) {
                    return {
                        _hx_index: 1,
                        m: a,
                        __enum__: "haxe.StackItem",
                        toString: r
                    }
                }
                ,
                D._hx_name = "Module",
                D.__params__ = ["m"],
                D),
                FilePos: (D = function(a, b, c, d) {
                    return {
                        _hx_index: 2,
                        s: a,
                        file: b,
                        line: c,
                        column: d,
                        __enum__: "haxe.StackItem",
                        toString: r
                    }
                }
                ,
                D._hx_name = "FilePos",
                D.__params__ = ["s", "file", "line", "column"],
                D),
                Method: (D = function(a, b) {
                    return {
                        _hx_index: 3,
                        classname: a,
                        method: b,
                        __enum__: "haxe.StackItem",
                        toString: r
                    }
                }
                ,
                D._hx_name = "Method",
                D.__params__ = ["classname", "method"],
                D),
                LocalFunction: (D = function(a) {
                    return {
                        _hx_index: 4,
                        v: a,
                        __enum__: "haxe.StackItem",
                        toString: r
                    }
                }
                ,
                D._hx_name = "LocalFunction",
                D.__params__ = ["v"],
                D)
            };
            Nd.__constructs__ = [Nd.CFunction, Nd.Module, Nd.FilePos, Nd.Method, Nd.LocalFunction];
            Nd.__empty_constructs__ = [Nd.CFunction];
            var Cf = {
                callStack: function() {
                    return Ua.toHaxe(Ua.callStack())
                },
                exceptionStack: function(a) {
                    null == a && (a = !1);
                    var b = Ua.toHaxe(Ua.exceptionStack());
                    return a ? b : Cf.subtract(b, Cf.callStack())
                },
                toString: function(a) {
                    for (var b = new K, c = 0; c < a.length; ) {
                        var d = a[c];
                        ++c;
                        b.b += "\nCalled from ";
                        Cf.itemToString(b, d)
                    }
                    return b.b
                },
                subtract: function(a, b) {
                    for (var c = -1, d = -1; ++d < a.length; ) {
                        for (var f = 0, g = b.length; f < g; ) {
                            var k = f++;
                            if (Cf.equalItems(a[d], b[k])) {
                                if (0 > c && (c = d),
                                ++d,
                                d >= a.length)
                                    break
                            } else
                                c = -1
                        }
                        if (0 <= c)
                            break
                    }
                    return 0 <= c ? a.slice(0, c) : a
                },
                equalItems: function(a, b) {
                    if (null == a)
                        return null == b ? !0 : !1;
                    switch (a._hx_index) {
                    case 0:
                        return null == b ? !1 : 0 == b._hx_index ? !0 : !1;
                    case 1:
                        return null == b ? !1 : 1 == b._hx_index ? a.m == b.m : !1;
                    case 2:
                        if (null == b)
                            return !1;
                        if (2 == b._hx_index) {
                            var c = b.s
                              , d = b.line
                              , f = b.column
                              , g = a.column
                              , k = a.line
                              , q = a.s;
                            return a.file == b.file && k == d && g == f ? Cf.equalItems(q, c) : !1
                        }
                        return !1;
                    case 3:
                        return null == b ? !1 : 3 == b._hx_index ? (c = b.method,
                        d = a.method,
                        a.classname == b.classname ? d == c : !1) : !1;
                    case 4:
                        return null == b ? !1 : 4 == b._hx_index ? a.v == b.v : !1
                    }
                },
                itemToString: function(a, b) {
                    switch (b._hx_index) {
                    case 0:
                        a.b += "a C function";
                        break;
                    case 1:
                        b = b.m;
                        a.b += "module ";
                        a.b += null == b ? "null" : "" + b;
                        break;
                    case 2:
                        var c = b.s
                          , d = b.file
                          , f = b.line;
                        b = b.column;
                        null != c && (Cf.itemToString(a, c),
                        a.b += " (");
                        a.b += null == d ? "null" : "" + d;
                        a.b += " line ";
                        a.b += null == f ? "null" : "" + f;
                        null != b && (a.b += " column ",
                        a.b += null == b ? "null" : "" + b);
                        null != c && (a.b += ")");
                        break;
                    case 3:
                        c = b.classname;
                        b = b.method;
                        a.b += G.string(null == c ? "<unknown>" : c);
                        a.b += ".";
                        a.b += null == b ? "null" : "" + b;
                        break;
                    case 4:
                        b = b.v,
                        a.b += "local function #",
                        a.b += null == b ? "null" : "" + b
                    }
                }
            }
              , aa = function(a, b, c) {
                Error.call(this, a);
                this.message = a;
                this.__previousException = b;
                this.__nativeException = null != c ? c : this;
                this.__skipStack = 0;
                a = Error.prepareStackTrace;
                Error.prepareStackTrace = function(a) {
                    return a.stack
                }
                ;
                if (c instanceof Error)
                    this.stack = c.stack;
                else {
                    c = null;
                    if (Error.captureStackTrace)
                        Error.captureStackTrace(this, aa),
                        c = this;
                    else if (c = Error(),
                    "undefined" == typeof c.stack) {
                        try {
                            throw c;
                        } catch (d) {}
                        this.__skipStack++
                    }
                    this.stack = c.stack
                }
                Error.prepareStackTrace = a
            };
            h["haxe.Exception"] = aa;
            aa.__name__ = "haxe.Exception";
            aa.caught = function(a) {
                return a instanceof aa ? a : a instanceof Error ? new aa(a.message,null,a) : new ph(a,null,a)
            }
            ;
            aa.thrown = function(a) {
                if (a instanceof aa)
                    return a.get_native();
                if (a instanceof Error)
                    return a;
                a = new ph(a);
                a.__skipStack++;
                return a
            }
            ;
            aa.__super__ = Error;
            aa.prototype = v(Error.prototype, {
                unwrap: function() {
                    return this.__nativeException
                },
                toString: function() {
                    return this.get_message()
                },
                __shiftStack: function() {
                    this.__skipStack++
                },
                get_message: function() {
                    return this.message
                },
                get_native: function() {
                    return this.__nativeException
                },
                get_stack: function() {
                    var a = this.__exceptionStack;
                    null == a && (a = Ua.toHaxe(Ua.normalize(this.stack), this.__skipStack),
                    this.setProperty("__exceptionStack", a));
                    return a
                },
                setProperty: function(a, b) {
                    try {
                        Object.defineProperty(this, a, {
                            value: b
                        })
                    } catch (c) {
                        this[a] = b
                    }
                },
                __class__: aa,
                __properties__: {
                    get_native: "get_native",
                    get_stack: "get_stack",
                    get_message: "get_message"
                }
            });
            var kb = function(a, b) {
                this.high = a;
                this.low = b
            };
            h["haxe._Int64.___Int64"] = kb;
            kb.__name__ = "haxe._Int64.___Int64";
            kb.prototype = {
                __class__: kb
            };
            var Ua = function() {};
            h["haxe.NativeStackTrace"] = Ua;
            Ua.__name__ = "haxe.NativeStackTrace";
            Ua.saveStack = function(a) {
                Ua.lastError = a
            }
            ;
            Ua.callStack = function() {
                var a = Error("")
                  , b = Ua.tryHaxeStack(a);
                if ("undefined" == typeof b) {
                    try {
                        throw a;
                    } catch (c) {}
                    b = a.stack
                }
                return Ua.normalize(b, 2)
            }
            ;
            Ua.exceptionStack = function() {
                return Ua.normalize(Ua.tryHaxeStack(Ua.lastError))
            }
            ;
            Ua.toHaxe = function(a, b) {
                null == b && (b = 0);
                if (null == a)
                    return [];
                if ("string" == typeof a) {
                    a = a.split("\n");
                    "Error" == a[0] && a.shift();
                    for (var c = [], d = 0, f = a.length; d < f; ) {
                        var g = d++;
                        if (!(b > g)) {
                            var k = a[g];
                            g = k.match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);
                            if (null != g) {
                                k = g[1].split(".");
                                "$hxClasses" == k[0] && k.shift();
                                var q = k.pop()
                                  , p = g[2]
                                  , l = G.parseInt(g[3]);
                                g = G.parseInt(g[4]);
                                c.push(Nd.FilePos("Anonymous function" == q ? Nd.LocalFunction() : "Global code" == q ? null : Nd.Method(k.join("."), q), p, l, g))
                            } else
                                c.push(Nd.Module(P.trim(k)))
                        }
                    }
                    return c
                }
                return 0 < b && Array.isArray(a) ? a.slice(b) : a
            }
            ;
            Ua.tryHaxeStack = function(a) {
                if (null == a)
                    return [];
                var b = Error.prepareStackTrace;
                Error.prepareStackTrace = Ua.prepareHxStackTrace;
                a = a.stack;
                Error.prepareStackTrace = b;
                return a
            }
            ;
            Ua.prepareHxStackTrace = function(a, b) {
                a = [];
                for (var c = 0; c < b.length; ) {
                    var d = b[c];
                    ++c;
                    null != Ua.wrapCallSite && (d = Ua.wrapCallSite(d));
                    var f = null
                      , g = d.getFunctionName();
                    if (null != g) {
                        var k = g.lastIndexOf(".");
                        0 <= k ? (f = g.substring(0, k),
                        g = g.substring(k + 1),
                        f = Nd.Method(f, g)) : f = Nd.Method(null, g)
                    }
                    g = d.getFileName();
                    k = null == g ? -1 : g.indexOf("file:");
                    null != Ua.wrapCallSite && 0 < k && (g = g.substring(k + 6));
                    a.push(Nd.FilePos(f, g, d.getLineNumber(), d.getColumnNumber()))
                }
                return a
            }
            ;
            Ua.normalize = function(a, b) {
                null == b && (b = 0);
                if (Array.isArray(a) && 0 < b)
                    return a.slice(b);
                if ("string" == typeof a) {
                    switch (a.substring(0, 6)) {
                    case "Error\n":
                    case "Error:":
                        ++b
                    }
                    return Ua.skipLines(a, b)
                }
                return a
            }
            ;
            Ua.skipLines = function(a, b, c) {
                null == c && (c = 0);
                return 0 < b ? (c = a.indexOf("\n", c),
                0 > c ? "" : Ua.skipLines(a, --b, c + 1)) : a.substring(c)
            }
            ;
            var wd = function() {
                this.buf = new K;
                this.cache = [];
                this.useCache = wd.USE_CACHE;
                this.useEnumIndex = wd.USE_ENUM_INDEX;
                this.shash = new Ia;
                this.scount = 0
            };
            h["haxe.Serializer"] = wd;
            wd.__name__ = "haxe.Serializer";
            wd.run = function(a) {
                var b = new wd;
                b.serialize(a);
                return b.toString()
            }
            ;
            wd.prototype = {
                toString: function() {
                    return this.buf.b
                },
                serializeString: function(a) {
                    var b = this.shash.h[a];
                    null != b ? (this.buf.b += "R",
                    this.buf.b += null == b ? "null" : "" + b) : (this.shash.h[a] = this.scount++,
                    this.buf.b += "y",
                    a = encodeURIComponent(a),
                    this.buf.b += G.string(a.length),
                    this.buf.b += ":",
                    this.buf.b += null == a ? "null" : "" + a)
                },
                serializeRef: function(a) {
                    for (var b = typeof a, c = 0, d = this.cache.length; c < d; ) {
                        var f = c++
                          , g = this.cache[f];
                        if (typeof g == b && g == a)
                            return this.buf.b += "r",
                            this.buf.b += null == f ? "null" : "" + f,
                            !0
                    }
                    this.cache.push(a);
                    return !1
                },
                serializeFields: function(a) {
                    for (var b = 0, c = Aa.fields(a); b < c.length; ) {
                        var d = c[b];
                        ++b;
                        this.serializeString(d);
                        this.serialize(Aa.field(a, d))
                    }
                    this.buf.b += "g"
                },
                serialize: function(a) {
                    var b = z.typeof(a);
                    switch (b._hx_index) {
                    case 0:
                        this.buf.b += "n";
                        break;
                    case 1:
                        if (0 == a) {
                            this.buf.b += "z";
                            break
                        }
                        this.buf.b += "i";
                        this.buf.b += null == a ? "null" : "" + a;
                        break;
                    case 2:
                        isNaN(a) ? this.buf.b += "k" : isFinite(a) ? (this.buf.b += "d",
                        this.buf.b += null == a ? "null" : "" + a) : this.buf.b += 0 > a ? "m" : "p";
                        break;
                    case 3:
                        this.buf.b += a ? "t" : "f";
                        break;
                    case 4:
                        xa.__instanceof(a, ul) ? (a = a.__name__,
                        this.buf.b += "A",
                        this.serializeString(a)) : xa.__instanceof(a, vl) ? (this.buf.b += "B",
                        this.serializeString(a.__ename__)) : this.useCache && this.serializeRef(a) || (this.buf.b += "o",
                        this.serializeFields(a));
                        break;
                    case 5:
                        throw aa.thrown("Cannot serialize function");
                    case 6:
                        b = b.c;
                        if (b == String) {
                            this.serializeString(a);
                            break
                        }
                        if (this.useCache && this.serializeRef(a))
                            break;
                        switch (b) {
                        case Array:
                            var c = 0;
                            this.buf.b += "a";
                            for (var d = 0, f = a.length; d < f; )
                                b = d++,
                                null == a[b] ? ++c : (0 < c && (1 == c ? this.buf.b += "n" : (this.buf.b += "u",
                                this.buf.b += null == c ? "null" : "" + c),
                                c = 0),
                                this.serialize(a[b]));
                            0 < c && (1 == c ? this.buf.b += "n" : (this.buf.b += "u",
                            this.buf.b += null == c ? "null" : "" + c));
                            this.buf.b += "h";
                            break;
                        case Date:
                            this.buf.b += "v";
                            this.buf.b += G.string(a.getTime());
                            break;
                        case tc:
                            this.buf.b += "q";
                            for (b = a.keys(); b.hasNext(); )
                                c = b.next(),
                                this.buf.b += ":",
                                this.buf.b += null == c ? "null" : "" + c,
                                this.serialize(a.h[c]);
                            this.buf.b += "h";
                            break;
                        case $a:
                            this.buf.b += "l";
                            for (a = a.h; null != a; )
                                b = a.item,
                                a = a.next,
                                this.serialize(b);
                            this.buf.b += "h";
                            break;
                        case pa:
                            this.buf.b += "M";
                            for (b = a.keys(); b.hasNext(); ) {
                                c = b.next();
                                var g = Aa.field(c, "__id__");
                                Aa.deleteField(c, "__id__");
                                this.serialize(c);
                                c.__id__ = g;
                                this.serialize(a.h[c.__id__])
                            }
                            this.buf.b += "h";
                            break;
                        case Ia:
                            this.buf.b += "b";
                            c = Object.keys(a.h);
                            g = c.length;
                            for (d = 0; d < g; )
                                b = c[d++],
                                this.serializeString(b),
                                this.serialize(a.h[b]);
                            this.buf.b += "h";
                            break;
                        case xb:
                            this.buf.b += "s";
                            this.buf.b += G.string(Math.ceil(8 * a.length / 6));
                            this.buf.b += ":";
                            b = 0;
                            c = a.length - 2;
                            g = wd.BASE64_CODES;
                            if (null == g) {
                                g = Array(wd.BASE64.length);
                                d = 0;
                                for (f = wd.BASE64.length; d < f; ) {
                                    var k = d++;
                                    g[k] = Q.cca(wd.BASE64, k)
                                }
                                wd.BASE64_CODES = g
                            }
                            for (; b < c; )
                                d = a.b[b++],
                                f = a.b[b++],
                                k = a.b[b++],
                                this.buf.b += String.fromCodePoint(g[d >> 2]),
                                this.buf.b += String.fromCodePoint(g[(d << 4 | f >> 4) & 63]),
                                this.buf.b += String.fromCodePoint(g[(f << 2 | k >> 6) & 63]),
                                this.buf.b += String.fromCodePoint(g[k & 63]);
                            b == c ? (d = a.b[b++],
                            f = a.b[b++],
                            this.buf.b += String.fromCodePoint(g[d >> 2]),
                            this.buf.b += String.fromCodePoint(g[(d << 4 | f >> 4) & 63]),
                            this.buf.b += String.fromCodePoint(g[f << 2 & 63])) : b == c + 1 && (d = a.b[b++],
                            this.buf.b += String.fromCodePoint(g[d >> 2]),
                            this.buf.b += String.fromCodePoint(g[d << 4 & 63]));
                            break;
                        default:
                            this.useCache && this.cache.pop(),
                            null != a.hxSerialize ? (this.buf.b += "C",
                            this.serializeString(b.__name__),
                            this.useCache && this.cache.push(a),
                            a.hxSerialize(this),
                            this.buf.b += "g") : (this.buf.b += "c",
                            this.serializeString(b.__name__),
                            this.useCache && this.cache.push(a),
                            this.serializeFields(a))
                        }
                        break;
                    case 7:
                        b = b.e;
                        if (this.useCache) {
                            if (this.serializeRef(a))
                                break;
                            this.cache.pop()
                        }
                        this.buf.b += G.string(this.useEnumIndex ? "j" : "w");
                        this.serializeString(b.__ename__);
                        this.useEnumIndex ? (this.buf.b += ":",
                        this.buf.b += G.string(a._hx_index)) : (b = a,
                        this.serializeString(N[b.__enum__].__constructs__[b._hx_index]._hx_name));
                        this.buf.b += ":";
                        c = z.enumParameters(a);
                        this.buf.b += G.string(c.length);
                        for (b = 0; b < c.length; )
                            g = c[b],
                            ++b,
                            this.serialize(g);
                        this.useCache && this.cache.push(a);
                        break;
                    default:
                        throw aa.thrown("Cannot serialize " + G.string(a));
                    }
                },
                __class__: wd
            };
            var $f = function(a) {
                var b = this;
                this.id = setInterval(function() {
                    b.run()
                }, a)
            };
            h["haxe.Timer"] = $f;
            $f.__name__ = "haxe.Timer";
            $f.delay = function(a, b) {
                var c = new $f(b);
                c.run = function() {
                    c.stop();
                    a()
                }
                ;
                return c
            }
            ;
            $f.prototype = {
                stop: function() {
                    null != this.id && (clearInterval(this.id),
                    this.id = null)
                },
                run: function() {},
                __class__: $f
            };
            var Gi = function() {};
            h["haxe._Unserializer.DefaultResolver"] = Gi;
            Gi.__name__ = "haxe._Unserializer.DefaultResolver";
            Gi.prototype = {
                resolveClass: function(a) {
                    return h[a]
                },
                resolveEnum: function(a) {
                    return N[a]
                },
                __class__: Gi
            };
            var od = function(a) {
                this.buf = a;
                this.length = this.buf.length;
                this.pos = 0;
                this.scache = [];
                this.cache = [];
                a = od.DEFAULT_RESOLVER;
                null == a && (a = new Gi,
                od.DEFAULT_RESOLVER = a);
                this.resolver = a
            };
            h["haxe.Unserializer"] = od;
            od.__name__ = "haxe.Unserializer";
            od.initCodes = function() {
                for (var a = [], b = 0, c = od.BASE64.length; b < c; ) {
                    var d = b++;
                    a[od.BASE64.charCodeAt(d)] = d
                }
                return a
            }
            ;
            od.run = function(a) {
                return (new od(a)).unserialize()
            }
            ;
            od.prototype = {
                setResolver: function(a) {
                    null == a ? (null == yg.instance && (yg.instance = new yg),
                    this.resolver = yg.instance) : this.resolver = a
                },
                readDigits: function() {
                    for (var a = 0, b = !1, c = this.pos; ; ) {
                        var d = this.buf.charCodeAt(this.pos);
                        if (d != d)
                            break;
                        if (45 == d) {
                            if (this.pos != c)
                                break;
                            b = !0
                        } else {
                            if (48 > d || 57 < d)
                                break;
                            a = 10 * a + (d - 48)
                        }
                        this.pos++
                    }
                    b && (a *= -1);
                    return a
                },
                readFloat: function() {
                    for (var a = this.pos; ; ) {
                        var b = this.buf.charCodeAt(this.pos);
                        if (b != b)
                            break;
                        if (43 <= b && 58 > b || 101 == b || 69 == b)
                            this.pos++;
                        else
                            break
                    }
                    return parseFloat(Q.substr(this.buf, a, this.pos - a))
                },
                unserializeObject: function(a) {
                    for (; ; ) {
                        if (this.pos >= this.length)
                            throw aa.thrown("Invalid object");
                        if (103 == this.buf.charCodeAt(this.pos))
                            break;
                        var b = this.unserialize();
                        if ("string" != typeof b)
                            throw aa.thrown("Invalid object key");
                        var c = this.unserialize();
                        a[b] = c
                    }
                    this.pos++
                },
                unserializeEnum: function(a, b) {
                    if (58 != this.buf.charCodeAt(this.pos++))
                        throw aa.thrown("Invalid enum format");
                    var c = this.readDigits();
                    if (0 == c)
                        return z.createEnum(a, b);
                    for (var d = []; 0 < c--; )
                        d.push(this.unserialize());
                    return z.createEnum(a, b, d)
                },
                unserialize: function() {
                    switch (this.buf.charCodeAt(this.pos++)) {
                    case 65:
                        var a = this.unserialize()
                          , b = this.resolver.resolveClass(a);
                        if (null == b)
                            throw aa.thrown("Class not found " + a);
                        return b;
                    case 66:
                        a = this.unserialize();
                        b = this.resolver.resolveEnum(a);
                        if (null == b)
                            throw aa.thrown("Enum not found " + a);
                        return b;
                    case 67:
                        a = this.unserialize();
                        b = this.resolver.resolveClass(a);
                        if (null == b)
                            throw aa.thrown("Class not found " + a);
                        b = Object.create(b.prototype);
                        this.cache.push(b);
                        b.hxUnserialize(this);
                        if (103 != this.buf.charCodeAt(this.pos++))
                            throw aa.thrown("Invalid custom data");
                        return b;
                    case 77:
                        a = new pa;
                        this.cache.push(a);
                        for (var c; 104 != this.buf.charCodeAt(this.pos); )
                            b = this.unserialize(),
                            a.set(b, this.unserialize());
                        this.pos++;
                        return a;
                    case 82:
                        a = this.readDigits();
                        if (0 > a || a >= this.scache.length)
                            throw aa.thrown("Invalid string reference");
                        return this.scache[a];
                    case 97:
                        b = [];
                        for (this.cache.push(b); ; ) {
                            c = this.buf.charCodeAt(this.pos);
                            if (104 == c) {
                                this.pos++;
                                break
                            }
                            117 == c ? (this.pos++,
                            a = this.readDigits(),
                            b[b.length + a - 1] = null) : b.push(this.unserialize())
                        }
                        return b;
                    case 98:
                        a = new Ia;
                        for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos); )
                            b = this.unserialize(),
                            c = this.unserialize(),
                            a.h[b] = c;
                        this.pos++;
                        return a;
                    case 99:
                        a = this.unserialize();
                        b = this.resolver.resolveClass(a);
                        if (null == b)
                            throw aa.thrown("Class not found " + a);
                        b = Object.create(b.prototype);
                        this.cache.push(b);
                        this.unserializeObject(b);
                        return b;
                    case 100:
                        return this.readFloat();
                    case 102:
                        return !1;
                    case 105:
                        return this.readDigits();
                    case 106:
                        a = this.unserialize();
                        c = this.resolver.resolveEnum(a);
                        if (null == c)
                            throw aa.thrown("Enum not found " + a);
                        this.pos++;
                        for (var d = this.readDigits(), f = c.__constructs__, g = Array(f.length), k = 0, q = f.length; k < q; )
                            b = k++,
                            g[b] = f[b]._hx_name;
                        b = g[d];
                        if (null == b)
                            throw aa.thrown("Unknown enum index " + a + "@" + d);
                        b = this.unserializeEnum(c, b);
                        this.cache.push(b);
                        return b;
                    case 107:
                        return NaN;
                    case 108:
                        b = new $a;
                        for (this.cache.push(b); 104 != this.buf.charCodeAt(this.pos); )
                            b.add(this.unserialize());
                        this.pos++;
                        return b;
                    case 109:
                        return -Infinity;
                    case 110:
                        return null;
                    case 111:
                        return b = {},
                        this.cache.push(b),
                        this.unserializeObject(b),
                        b;
                    case 112:
                        return Infinity;
                    case 113:
                        a = new tc;
                        this.cache.push(a);
                        for (c = this.buf.charCodeAt(this.pos++); 58 == c; )
                            b = this.readDigits(),
                            c = this.unserialize(),
                            a.h[b] = c,
                            c = this.buf.charCodeAt(this.pos++);
                        if (104 != c)
                            throw aa.thrown("Invalid IntMap format");
                        return a;
                    case 114:
                        a = this.readDigits();
                        if (0 > a || a >= this.cache.length)
                            throw aa.thrown("Invalid reference");
                        return this.cache[a];
                    case 115:
                        a = this.readDigits();
                        c = this.buf;
                        if (58 != this.buf.charCodeAt(this.pos++) || this.length - this.pos < a)
                            throw aa.thrown("Invalid bytes length");
                        d = od.CODES;
                        null == d && (d = od.initCodes(),
                        od.CODES = d);
                        b = this.pos;
                        f = a & 3;
                        g = b + (a - f);
                        k = new xb(new ArrayBuffer(3 * (a >> 2) + (2 <= f ? f - 1 : 0)));
                        for (q = 0; b < g; ) {
                            var p = d[c.charCodeAt(b++)]
                              , l = d[c.charCodeAt(b++)];
                            k.b[q++] = (p << 2 | l >> 4) & 255;
                            p = d[c.charCodeAt(b++)];
                            k.b[q++] = (l << 4 | p >> 2) & 255;
                            l = d[c.charCodeAt(b++)];
                            k.b[q++] = (p << 6 | l) & 255
                        }
                        2 <= f && (p = d[c.charCodeAt(b++)],
                        l = d[c.charCodeAt(b++)],
                        k.b[q++] = (p << 2 | l >> 4) & 255,
                        3 == f && (p = d[c.charCodeAt(b++)],
                        k.b[q++] = (l << 4 | p >> 2) & 255));
                        this.pos += a;
                        this.cache.push(k);
                        return k;
                    case 116:
                        return !0;
                    case 118:
                        return 48 <= this.buf.charCodeAt(this.pos) && 57 >= this.buf.charCodeAt(this.pos) && 48 <= this.buf.charCodeAt(this.pos + 1) && 57 >= this.buf.charCodeAt(this.pos + 1) && 48 <= this.buf.charCodeAt(this.pos + 2) && 57 >= this.buf.charCodeAt(this.pos + 2) && 48 <= this.buf.charCodeAt(this.pos + 3) && 57 >= this.buf.charCodeAt(this.pos + 3) && 45 == this.buf.charCodeAt(this.pos + 4) ? (b = Q.strDate(Q.substr(this.buf, this.pos, 19)),
                        this.pos += 19) : b = new Date(this.readFloat()),
                        this.cache.push(b),
                        b;
                    case 119:
                        a = this.unserialize();
                        c = this.resolver.resolveEnum(a);
                        if (null == c)
                            throw aa.thrown("Enum not found " + a);
                        b = this.unserializeEnum(c, this.unserialize());
                        this.cache.push(b);
                        return b;
                    case 120:
                        throw aa.thrown(this.unserialize());
                    case 121:
                        a = this.readDigits();
                        if (58 != this.buf.charCodeAt(this.pos++) || this.length - this.pos < a)
                            throw aa.thrown("Invalid string length");
                        b = Q.substr(this.buf, this.pos, a);
                        this.pos += a;
                        b = decodeURIComponent(b.split("+").join(" "));
                        this.scache.push(b);
                        return b;
                    case 122:
                        return 0
                    }
                    this.pos--;
                    throw aa.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
                },
                __class__: od
            };
            var yg = function() {};
            h["haxe._Unserializer.NullResolver"] = yg;
            yg.__name__ = "haxe._Unserializer.NullResolver";
            yg.prototype = {
                resolveClass: function(a) {
                    return null
                },
                resolveEnum: function(a) {
                    return null
                },
                __class__: yg
            };
            var ph = function(a, b, c) {
                aa.call(this, String(a), b, c);
                this.value = a;
                this.__skipStack++
            };
            h["haxe.ValueException"] = ph;
            ph.__name__ = "haxe.ValueException";
            ph.__super__ = aa;
            ph.prototype = v(aa.prototype, {
                unwrap: function() {
                    return this.value
                },
                __class__: ph
            });
            var zg = function() {
                this.a1 = 1;
                this.a2 = 0
            };
            h["haxe.crypto.Adler32"] = zg;
            zg.__name__ = "haxe.crypto.Adler32";
            zg.read = function(a) {
                var b = new zg
                  , c = a.readByte()
                  , d = a.readByte()
                  , f = a.readByte();
                a = a.readByte();
                b.a1 = f << 8 | a;
                b.a2 = c << 8 | d;
                return b
            }
            ;
            zg.prototype = {
                update: function(a, b, c) {
                    var d = this.a1
                      , f = this.a2
                      , g = b;
                    for (b += c; g < b; )
                        c = g++,
                        d = (d + a.b[c]) % 65521,
                        f = (f + d) % 65521;
                    this.a1 = d;
                    this.a2 = f
                },
                equals: function(a) {
                    return a.a1 == this.a1 ? a.a2 == this.a2 : !1
                },
                __class__: zg
            };
            var xb = function(a) {
                this.length = a.byteLength;
                this.b = new Uint8Array(a);
                this.b.bufferValue = a;
                a.hxBytes = this;
                a.bytes = this.b
            };
            h["haxe.io.Bytes"] = xb;
            xb.__name__ = "haxe.io.Bytes";
            xb.ofString = function(a, b) {
                b = [];
                for (var c = 0; c < a.length; ) {
                    var d = a.charCodeAt(c++);
                    55296 <= d && 56319 >= d && (d = d - 55232 << 10 | a.charCodeAt(c++) & 1023);
                    127 >= d ? b.push(d) : (2047 >= d ? b.push(192 | d >> 6) : (65535 >= d ? b.push(224 | d >> 12) : (b.push(240 | d >> 18),
                    b.push(128 | d >> 12 & 63)),
                    b.push(128 | d >> 6 & 63)),
                    b.push(128 | d & 63))
                }
                return new xb((new Uint8Array(b)).buffer)
            }
            ;
            xb.ofData = function(a) {
                var b = a.hxBytes;
                return null != b ? b : new xb(a)
            }
            ;
            xb.prototype = {
                blit: function(a, b, c, d) {
                    if (0 > a || 0 > c || 0 > d || a + d > this.length || c + d > b.length)
                        throw aa.thrown(xd.OutsideBounds);
                    0 == c && d == b.b.byteLength ? this.b.set(b.b, a) : this.b.set(b.b.subarray(c, c + d), a)
                },
                setUInt16: function(a, b) {
                    null == this.data && (this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));
                    this.data.setUint16(a, b, !0)
                },
                setInt32: function(a, b) {
                    null == this.data && (this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength));
                    this.data.setInt32(a, b, !0)
                },
                getString: function(a, b, c) {
                    if (0 > a || 0 > b || a + b > this.length)
                        throw aa.thrown(xd.OutsideBounds);
                    c = "";
                    var d = this.b
                      , f = vb.fromCharCode
                      , g = a;
                    for (a += b; g < a; )
                        if (b = d[g++],
                        128 > b) {
                            if (0 == b)
                                break;
                            c += f(b)
                        } else if (224 > b)
                            c += f((b & 63) << 6 | d[g++] & 127);
                        else if (240 > b) {
                            var k = d[g++];
                            c += f((b & 31) << 12 | (k & 127) << 6 | d[g++] & 127)
                        } else {
                            k = d[g++];
                            var q = d[g++];
                            b = (b & 15) << 18 | (k & 127) << 12 | (q & 127) << 6 | d[g++] & 127;
                            c += f((b >> 10) + 55232);
                            c += f(b & 1023 | 56320)
                        }
                    return c
                },
                toString: function() {
                    return this.getString(0, this.length)
                },
                __class__: xb
            };
            var Jc = function() {};
            h["haxe.ds.ArraySort"] = Jc;
            Jc.__name__ = "haxe.ds.ArraySort";
            Jc.sort = function(a, b) {
                Jc.rec(a, b, 0, a.length)
            }
            ;
            Jc.rec = function(a, b, c, d) {
                var f = c + d >> 1;
                if (12 > d - c) {
                    if (!(d <= c))
                        for (f = c + 1; f < d; )
                            for (var g = f++; g > c; ) {
                                if (0 > b(a[g], a[g - 1]))
                                    Jc.swap(a, g - 1, g);
                                else
                                    break;
                                --g
                            }
                } else
                    Jc.rec(a, b, c, f),
                    Jc.rec(a, b, f, d),
                    Jc.doMerge(a, b, c, f, d, f - c, d - f)
            }
            ;
            Jc.doMerge = function(a, b, c, d, f, g, k) {
                if (0 != g && 0 != k)
                    if (2 == g + k)
                        0 > b(a[d], a[c]) && Jc.swap(a, d, c);
                    else {
                        if (g > k) {
                            var q = g >> 1;
                            var p = c + q;
                            var l = Jc.lower(a, b, d, f, p);
                            var h = l - d
                        } else
                            h = k >> 1,
                            l = d + h,
                            p = Jc.upper(a, b, c, d, l),
                            q = p - c;
                        Jc.rotate(a, b, p, d, l);
                        d = p + h;
                        Jc.doMerge(a, b, c, p, d, q, h);
                        Jc.doMerge(a, b, d, l, f, g - q, k - h)
                    }
            }
            ;
            Jc.rotate = function(a, b, c, d, f) {
                if (c != d && d != f)
                    for (b = Jc.gcd(f - c, d - c); 0 != b--; ) {
                        for (var g = a[c + b], k = d - c, q = c + b, p = c + b + k; p != c + b; )
                            a[q] = a[p],
                            q = p,
                            p = f - p > k ? p + k : c + (k - (f - p));
                        a[q] = g
                    }
            }
            ;
            Jc.gcd = function(a, b) {
                for (; 0 != b; ) {
                    var c = a % b;
                    a = b;
                    b = c
                }
                return a
            }
            ;
            Jc.upper = function(a, b, c, d, f) {
                d -= c;
                for (var g, k; 0 < d; )
                    g = d >> 1,
                    k = c + g,
                    0 > b(a[f], a[k]) ? d = g : (c = k + 1,
                    d = d - g - 1);
                return c
            }
            ;
            Jc.lower = function(a, b, c, d, f) {
                d -= c;
                for (var g, k; 0 < d; )
                    g = d >> 1,
                    k = c + g,
                    0 > b(a[k], a[f]) ? (c = k + 1,
                    d = d - g - 1) : d = g;
                return c
            }
            ;
            Jc.swap = function(a, b, c) {
                var d = a[b];
                a[b] = a[c];
                a[c] = d
            }
            ;
            var tc = function() {
                this.h = {}
            };
            h["haxe.ds.IntMap"] = tc;
            tc.__name__ = "haxe.ds.IntMap";
            tc.__interfaces__ = [ma];
            tc.prototype = {
                set: function(a, b) {
                    this.h[a] = b
                },
                get: function(a) {
                    return this.h[a]
                },
                remove: function(a) {
                    if (!this.h.hasOwnProperty(a))
                        return !1;
                    delete this.h[a];
                    return !0
                },
                keys: function() {
                    var a = [], b;
                    for (b in this.h)
                        this.h.hasOwnProperty(b) && a.push(+b);
                    return new Nf(a)
                },
                iterator: function() {
                    return {
                        ref: this.h,
                        it: this.keys(),
                        hasNext: function() {
                            return this.it.hasNext()
                        },
                        next: function() {
                            var a = this.it.next();
                            return this.ref[a]
                        }
                    }
                },
                __class__: tc
            };
            var Jh = function(a, b) {
                this.item = a;
                this.next = b
            };
            h["haxe.ds._List.ListNode"] = Jh;
            Jh.__name__ = "haxe.ds._List.ListNode";
            Jh.prototype = {
                __class__: Jh
            };
            var Sj = function(a) {
                this.head = a
            };
            h["haxe.ds._List.ListIterator"] = Sj;
            Sj.__name__ = "haxe.ds._List.ListIterator";
            Sj.prototype = {
                hasNext: function() {
                    return null != this.head
                },
                next: function() {
                    var a = this.head.item;
                    this.head = this.head.next;
                    return a
                },
                __class__: Sj
            };
            var Ia = function() {
                this.h = Object.create(null)
            };
            h["haxe.ds.StringMap"] = Ia;
            Ia.__name__ = "haxe.ds.StringMap";
            Ia.__interfaces__ = [ma];
            Ia.prototype = {
                get: function(a) {
                    return this.h[a]
                },
                set: function(a, b) {
                    this.h[a] = b
                },
                remove: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.h, a) ? (delete this.h[a],
                    !0) : !1
                },
                keys: function() {
                    return new Nh(this.h)
                },
                __class__: Ia
            };
            var Nh = function(a) {
                this.h = a;
                this.keys = Object.keys(a);
                this.length = this.keys.length;
                this.current = 0
            };
            h["haxe.ds._StringMap.StringMapKeyIterator"] = Nh;
            Nh.__name__ = "haxe.ds._StringMap.StringMapKeyIterator";
            Nh.prototype = {
                hasNext: function() {
                    return this.current < this.length
                },
                next: function() {
                    return this.keys[this.current++]
                },
                __class__: Nh
            };
            var Ag = function(a, b, c) {
                aa.call(this, a, b);
                this.posInfos = null == c ? {
                    fileName: "(unknown)",
                    lineNumber: 0,
                    className: "(unknown)",
                    methodName: "(unknown)"
                } : c;
                this.__skipStack++
            };
            h["haxe.exceptions.PosException"] = Ag;
            Ag.__name__ = "haxe.exceptions.PosException";
            Ag.__super__ = aa;
            Ag.prototype = v(aa.prototype, {
                toString: function() {
                    return "" + aa.prototype.toString.call(this) + " in " + this.posInfos.className + "." + this.posInfos.methodName + " at " + this.posInfos.fileName + ":" + this.posInfos.lineNumber
                },
                __class__: Ag
            });
            var Hi = function(a, b, c) {
                null == a && (a = "Not implemented");
                Ag.call(this, a, b, c);
                this.__skipStack++
            };
            h["haxe.exceptions.NotImplementedException"] = Hi;
            Hi.__name__ = "haxe.exceptions.NotImplementedException";
            Hi.__super__ = Ag;
            Hi.prototype = v(Ag.prototype, {
                __class__: Hi
            });
            var Ii = function() {
                this.size = this.pos = 0
            };
            h["haxe.io.BytesBuffer"] = Ii;
            Ii.__name__ = "haxe.io.BytesBuffer";
            Ii.prototype = {
                addByte: function(a) {
                    this.pos == this.size && this.grow(1);
                    this.view.setUint8(this.pos++, a)
                },
                add: function(a) {
                    this.pos + a.length > this.size && this.grow(a.length);
                    if (0 != this.size) {
                        var b = new Uint8Array(a.b.buffer,a.b.byteOffset,a.length);
                        this.u8.set(b, this.pos);
                        this.pos += a.length
                    }
                },
                addBytes: function(a, b, c) {
                    if (0 > b || 0 > c || b + c > a.length)
                        throw aa.thrown(xd.OutsideBounds);
                    this.pos + c > this.size && this.grow(c);
                    0 != this.size && (a = new Uint8Array(a.b.buffer,a.b.byteOffset + b,c),
                    this.u8.set(a, this.pos),
                    this.pos += c)
                },
                grow: function(a) {
                    var b = this.pos + a;
                    for (a = 0 == this.size ? 16 : this.size; a < b; )
                        a = 3 * a >> 1;
                    b = new ArrayBuffer(a);
                    var c = new Uint8Array(b);
                    0 < this.size && c.set(this.u8);
                    this.size = a;
                    this.buffer = b;
                    this.u8 = c;
                    this.view = new DataView(this.buffer)
                },
                getBytes: function() {
                    if (0 == this.size)
                        return new xb(new ArrayBuffer(0));
                    var a = new xb(this.buffer);
                    a.length = this.pos;
                    return a
                },
                __class__: Ii
            };
            var Ji = function() {};
            h["haxe.io.Input"] = Ji;
            Ji.__name__ = "haxe.io.Input";
            Ji.prototype = {
                readByte: function() {
                    throw new Hi(null,null,{
                        fileName: "haxe/io/Input.hx",
                        lineNumber: 53,
                        className: "haxe.io.Input",
                        methodName: "readByte"
                    });
                },
                readBytes: function(a, b, c) {
                    var d = c
                      , f = a.b;
                    if (0 > b || 0 > c || b + c > a.length)
                        throw aa.thrown(xd.OutsideBounds);
                    try {
                        for (; 0 < d; )
                            f[b] = this.readByte(),
                            ++b,
                            --d
                    } catch (g) {
                        if (Ua.lastError = g,
                        !(aa.caught(g).unwrap()instanceof qh))
                            throw g;
                    }
                    return c - d
                },
                readFullBytes: function(a, b, c) {
                    for (; 0 < c; ) {
                        var d = this.readBytes(a, b, c);
                        if (0 == d)
                            throw aa.thrown(xd.Blocked);
                        b += d;
                        c -= d
                    }
                },
                read: function(a) {
                    for (var b = new xb(new ArrayBuffer(a)), c = 0; 0 < a; ) {
                        var d = this.readBytes(b, c, a);
                        if (0 == d)
                            throw aa.thrown(xd.Blocked);
                        c += d;
                        a -= d
                    }
                    return b
                },
                readInt16: function() {
                    var a = this.readByte()
                      , b = this.readByte();
                    a = this.bigEndian ? b | a << 8 : a | b << 8;
                    return 0 != (a & 32768) ? a - 65536 : a
                },
                readUInt16: function() {
                    var a = this.readByte()
                      , b = this.readByte();
                    return this.bigEndian ? b | a << 8 : a | b << 8
                },
                readInt32: function() {
                    var a = this.readByte()
                      , b = this.readByte()
                      , c = this.readByte()
                      , d = this.readByte();
                    return this.bigEndian ? d | c << 8 | b << 16 | a << 24 : a | b << 8 | c << 16 | d << 24
                },
                readString: function(a, b) {
                    var c = new xb(new ArrayBuffer(a));
                    this.readFullBytes(c, 0, a);
                    return c.getString(0, a, b)
                },
                __class__: Ji
            };
            var Ki = function(a, b, c) {
                null == b && (b = 0);
                null == c && (c = a.length - b);
                if (0 > b || 0 > c || b + c > a.length)
                    throw aa.thrown(xd.OutsideBounds);
                this.b = a.b;
                this.pos = b;
                this.totlen = this.len = c
            };
            h["haxe.io.BytesInput"] = Ki;
            Ki.__name__ = "haxe.io.BytesInput";
            Ki.__super__ = Ji;
            Ki.prototype = v(Ji.prototype, {
                readByte: function() {
                    if (0 == this.len)
                        throw aa.thrown(new qh);
                    this.len--;
                    return this.b[this.pos++]
                },
                readBytes: function(a, b, c) {
                    if (0 > b || 0 > c || b + c > a.length)
                        throw aa.thrown(xd.OutsideBounds);
                    if (0 == this.len && 0 < c)
                        throw aa.thrown(new qh);
                    this.len < c && (c = this.len);
                    var d = this.b;
                    a = a.b;
                    for (var f = 0, g = c; f < g; ) {
                        var k = f++;
                        a[b + k] = d[this.pos + k]
                    }
                    this.pos += c;
                    this.len -= c;
                    return c
                },
                __class__: Ki
            });
            var Li = N["haxe.io.Encoding"] = {
                __ename__: "haxe.io.Encoding",
                __constructs__: null,
                UTF8: {
                    _hx_name: "UTF8",
                    _hx_index: 0,
                    __enum__: "haxe.io.Encoding",
                    toString: r
                },
                RawNative: {
                    _hx_name: "RawNative",
                    _hx_index: 1,
                    __enum__: "haxe.io.Encoding",
                    toString: r
                }
            };
            Li.__constructs__ = [Li.UTF8, Li.RawNative];
            Li.__empty_constructs__ = [Li.UTF8, Li.RawNative];
            var qh = function() {};
            h["haxe.io.Eof"] = qh;
            qh.__name__ = "haxe.io.Eof";
            qh.prototype = {
                toString: function() {
                    return "Eof"
                },
                __class__: qh
            };
            var xd = N["haxe.io.Error"] = {
                __ename__: "haxe.io.Error",
                __constructs__: null,
                Blocked: {
                    _hx_name: "Blocked",
                    _hx_index: 0,
                    __enum__: "haxe.io.Error",
                    toString: r
                },
                Overflow: {
                    _hx_name: "Overflow",
                    _hx_index: 1,
                    __enum__: "haxe.io.Error",
                    toString: r
                },
                OutsideBounds: {
                    _hx_name: "OutsideBounds",
                    _hx_index: 2,
                    __enum__: "haxe.io.Error",
                    toString: r
                },
                Custom: (D = function(a) {
                    return {
                        _hx_index: 3,
                        e: a,
                        __enum__: "haxe.io.Error",
                        toString: r
                    }
                }
                ,
                D._hx_name = "Custom",
                D.__params__ = ["e"],
                D)
            };
            xd.__constructs__ = [xd.Blocked, xd.Overflow, xd.OutsideBounds, xd.Custom];
            xd.__empty_constructs__ = [xd.Blocked, xd.Overflow, xd.OutsideBounds];
            var Gl = {
                fromBytes: function(a, b, c) {
                    null == b && (b = 0);
                    null == c && (c = a.length - b >> 2);
                    return new Float32Array(a.b.bufferValue,b,c)
                }
            }
              , Od = function(a) {
                switch (a) {
                case ".":
                case "..":
                    this.dir = a;
                    this.file = "";
                    return
                }
                var b = a.lastIndexOf("/")
                  , c = a.lastIndexOf("\\");
                b < c ? (this.dir = Q.substr(a, 0, c),
                a = Q.substr(a, c + 1, null),
                this.backslash = !0) : c < b ? (this.dir = Q.substr(a, 0, b),
                a = Q.substr(a, b + 1, null)) : this.dir = null;
                b = a.lastIndexOf(".");
                -1 != b ? (this.ext = Q.substr(a, b + 1, null),
                this.file = Q.substr(a, 0, b)) : (this.ext = null,
                this.file = a)
            };
            h["haxe.io.Path"] = Od;
            Od.__name__ = "haxe.io.Path";
            Od.withoutDirectory = function(a) {
                a = new Od(a);
                a.dir = null;
                return a.toString()
            }
            ;
            Od.directory = function(a) {
                a = new Od(a);
                return null == a.dir ? "" : a.dir
            }
            ;
            Od.extension = function(a) {
                a = new Od(a);
                return null == a.ext ? "" : a.ext
            }
            ;
            Od.prototype = {
                toString: function() {
                    return (null == this.dir ? "" : this.dir + (this.backslash ? "\\" : "/")) + this.file + (null == this.ext ? "" : "." + this.ext)
                },
                __class__: Od
            };
            var Nf = function(a) {
                this.current = 0;
                this.array = a
            };
            h["haxe.iterators.ArrayIterator"] = Nf;
            Nf.__name__ = "haxe.iterators.ArrayIterator";
            Nf.prototype = {
                hasNext: function() {
                    return this.current < this.array.length
                },
                next: function() {
                    return this.array[this.current++]
                },
                __class__: Nf
            };
            var Kc = function(a, b, c) {
                this.xml = b;
                this.message = a;
                this.position = c;
                this.lineNumber = 1;
                for (a = this.positionAtLine = 0; a < c; ) {
                    var d = a++;
                    d = b.charCodeAt(d);
                    10 == d ? (this.lineNumber++,
                    this.positionAtLine = 0) : 13 != d && this.positionAtLine++
                }
            };
            h["haxe.xml.XmlParserException"] = Kc;
            Kc.__name__ = "haxe.xml.XmlParserException";
            Kc.prototype = {
                toString: function() {
                    return xa.getClass(this).__name__ + ": " + this.message + " at line " + this.lineNumber + " char " + this.positionAtLine
                },
                __class__: Kc
            };
            var lf = function() {};
            h["haxe.xml.Parser"] = lf;
            lf.__name__ = "haxe.xml.Parser";
            lf.parse = function(a, b) {
                null == b && (b = !1);
                var c = da.createDocument();
                lf.doParse(a, b, 0, c);
                return c
            }
            ;
            lf.doParse = function(a, b, c, d) {
                null == c && (c = 0);
                for (var f = null, g = 1, k = 1, q = null, p = 0, l = 0, h = 0, n = new K, u = 1, w = -1; c < a.length; ) {
                    var r = a.charCodeAt(c);
                    switch (g) {
                    case 0:
                        switch (r) {
                        case 9:
                        case 10:
                        case 13:
                        case 32:
                            break;
                        default:
                            g = k;
                            continue
                        }
                        break;
                    case 1:
                        if (60 == r)
                            g = 0,
                            k = 2;
                        else {
                            p = c;
                            g = 13;
                            continue
                        }
                        break;
                    case 2:
                        switch (r) {
                        case 33:
                            if (91 == a.charCodeAt(c + 1)) {
                                c += 2;
                                if ("CDATA[" != Q.substr(a, c, 6).toUpperCase())
                                    throw aa.thrown(new Kc("Expected <![CDATA[",a,c));
                                c += 5;
                                g = 17
                            } else if (68 == a.charCodeAt(c + 1) || 100 == a.charCodeAt(c + 1)) {
                                if ("OCTYPE" != Q.substr(a, c + 2, 6).toUpperCase())
                                    throw aa.thrown(new Kc("Expected <!DOCTYPE",a,c));
                                c += 8;
                                g = 16
                            } else {
                                if (45 != a.charCodeAt(c + 1) || 45 != a.charCodeAt(c + 2))
                                    throw aa.thrown(new Kc("Expected \x3c!--",a,c));
                                c += 2;
                                g = 15
                            }
                            p = c + 1;
                            break;
                        case 47:
                            if (null == d)
                                throw aa.thrown(new Kc("Expected node name",a,c));
                            p = c + 1;
                            g = 0;
                            k = 10;
                            break;
                        case 63:
                            g = 14;
                            p = c;
                            break;
                        default:
                            g = 3;
                            p = c;
                            continue
                        }
                        break;
                    case 3:
                        if (!(97 <= r && 122 >= r || 65 <= r && 90 >= r || 48 <= r && 57 >= r || 58 == r || 46 == r || 95 == r || 45 == r)) {
                            if (c == p)
                                throw aa.thrown(new Kc("Expected node name",a,c));
                            f = da.createElement(Q.substr(a, p, c - p));
                            d.addChild(f);
                            ++l;
                            g = 0;
                            k = 4;
                            continue
                        }
                        break;
                    case 4:
                        switch (r) {
                        case 47:
                            g = 11;
                            break;
                        case 62:
                            g = 9;
                            break;
                        default:
                            g = 5;
                            p = c;
                            continue
                        }
                        break;
                    case 5:
                        if (!(97 <= r && 122 >= r || 65 <= r && 90 >= r || 48 <= r && 57 >= r || 58 == r || 46 == r || 95 == r || 45 == r)) {
                            if (p == c)
                                throw aa.thrown(new Kc("Expected attribute name",a,c));
                            q = Q.substr(a, p, c - p);
                            if (f.exists(q))
                                throw aa.thrown(new Kc("Duplicate attribute [" + q + "]",a,c));
                            g = 0;
                            k = 6;
                            continue
                        }
                        break;
                    case 6:
                        if (61 == r)
                            g = 0,
                            k = 7;
                        else
                            throw aa.thrown(new Kc("Expected =",a,c));
                        break;
                    case 7:
                        switch (r) {
                        case 34:
                        case 39:
                            n = new K;
                            g = 8;
                            p = c + 1;
                            w = r;
                            break;
                        default:
                            throw aa.thrown(new Kc('Expected "',a,c));
                        }
                        break;
                    case 8:
                        switch (r) {
                        case 38:
                            u = c - p;
                            n.b += null == u ? Q.substr(a, p, null) : Q.substr(a, p, u);
                            g = 18;
                            u = 8;
                            p = c + 1;
                            break;
                        case 60:
                        case 62:
                            if (b)
                                throw aa.thrown(new Kc("Invalid unescaped " + String.fromCodePoint(r) + " in attribute value",a,c));
                            r == w && (k = c - p,
                            n.b += null == k ? Q.substr(a, p, null) : Q.substr(a, p, k),
                            k = n.b,
                            n = new K,
                            f.set(q, k),
                            g = 0,
                            k = 4);
                            break;
                        default:
                            r == w && (k = c - p,
                            n.b += null == k ? Q.substr(a, p, null) : Q.substr(a, p, k),
                            k = n.b,
                            n = new K,
                            f.set(q, k),
                            g = 0,
                            k = 4)
                        }
                        break;
                    case 9:
                        p = c = lf.doParse(a, b, c, f);
                        g = 1;
                        break;
                    case 10:
                        if (!(97 <= r && 122 >= r || 65 <= r && 90 >= r || 48 <= r && 57 >= r || 58 == r || 46 == r || 95 == r || 45 == r)) {
                            if (p == c)
                                throw aa.thrown(new Kc("Expected node name",a,c));
                            k = Q.substr(a, p, c - p);
                            if (null == d || 0 != d.nodeType)
                                throw aa.thrown(new Kc("Unexpected </" + k + ">, tag is not open",a,c));
                            if (d.nodeType != da.Element)
                                throw aa.thrown("Bad node type, expected Element but found " + (null == d.nodeType ? "null" : eb.toString(d.nodeType)));
                            if (k != d.nodeName) {
                                if (d.nodeType != da.Element)
                                    throw aa.thrown("Bad node type, expected Element but found " + (null == d.nodeType ? "null" : eb.toString(d.nodeType)));
                                throw aa.thrown(new Kc("Expected </" + d.nodeName + ">",a,c));
                            }
                            g = 0;
                            k = 12;
                            continue
                        }
                        break;
                    case 11:
                        if (62 == r)
                            g = 1;
                        else
                            throw aa.thrown(new Kc("Expected >",a,c));
                        break;
                    case 12:
                        if (62 == r)
                            return 0 == l && d.addChild(da.createPCData("")),
                            c;
                        throw aa.thrown(new Kc("Expected >",a,c));
                    case 13:
                        60 == r ? (k = c - p,
                        n.b += null == k ? Q.substr(a, p, null) : Q.substr(a, p, k),
                        k = da.createPCData(n.b),
                        n = new K,
                        d.addChild(k),
                        ++l,
                        g = 0,
                        k = 2) : 38 == r && (u = c - p,
                        n.b += null == u ? Q.substr(a, p, null) : Q.substr(a, p, u),
                        g = 18,
                        u = 13,
                        p = c + 1);
                        break;
                    case 14:
                        63 == r && 62 == a.charCodeAt(c + 1) && (++c,
                        g = Q.substr(a, p + 1, c - p - 2),
                        d.addChild(da.createProcessingInstruction(g)),
                        ++l,
                        g = 1);
                        break;
                    case 15:
                        45 == r && 45 == a.charCodeAt(c + 1) && 62 == a.charCodeAt(c + 2) && (d.addChild(da.createComment(Q.substr(a, p, c - p))),
                        ++l,
                        c += 2,
                        g = 1);
                        break;
                    case 16:
                        91 == r ? ++h : 93 == r ? --h : 62 == r && 0 == h && (d.addChild(da.createDocType(Q.substr(a, p, c - p))),
                        ++l,
                        g = 1);
                        break;
                    case 17:
                        93 == r && 93 == a.charCodeAt(c + 1) && 62 == a.charCodeAt(c + 2) && (g = da.createCData(Q.substr(a, p, c - p)),
                        d.addChild(g),
                        ++l,
                        c += 2,
                        g = 1);
                        break;
                    case 18:
                        if (59 == r) {
                            p = Q.substr(a, p, c - p);
                            if (35 == p.charCodeAt(0))
                                p = 120 == p.charCodeAt(1) ? G.parseInt("0" + Q.substr(p, 1, p.length - 1)) : G.parseInt(Q.substr(p, 1, p.length - 1)),
                                n.b += String.fromCodePoint(p);
                            else if (Object.prototype.hasOwnProperty.call(lf.escapes.h, p))
                                n.b += G.string(lf.escapes.h[p]);
                            else {
                                if (b)
                                    throw aa.thrown(new Kc("Undefined entity: " + p,a,c));
                                n.b += G.string("&" + p + ";")
                            }
                            p = c + 1;
                            g = u
                        } else if (!(97 <= r && 122 >= r || 65 <= r && 90 >= r || 48 <= r && 57 >= r || 58 == r || 46 == r || 95 == r || 45 == r) && 35 != r) {
                            if (b)
                                throw aa.thrown(new Kc("Invalid character in entity: " + String.fromCodePoint(r),a,c));
                            n.b += String.fromCodePoint(38);
                            g = c - p;
                            n.b += null == g ? Q.substr(a, p, null) : Q.substr(a, p, g);
                            --c;
                            p = c + 1;
                            g = u
                        }
                    }
                    ++c
                }
                1 == g && (p = c,
                g = 13);
                if (13 == g) {
                    if (0 == d.nodeType) {
                        if (d.nodeType != da.Element)
                            throw aa.thrown("Bad node type, expected Element but found " + (null == d.nodeType ? "null" : eb.toString(d.nodeType)));
                        throw aa.thrown(new Kc("Unclosed node <" + d.nodeName + ">",a,c));
                    }
                    if (c != p || 0 == l)
                        u = c - p,
                        n.b += null == u ? Q.substr(a, p, null) : Q.substr(a, p, u),
                        d.addChild(da.createPCData(n.b));
                    return c
                }
                if (!b && 18 == g && 13 == u)
                    return n.b += String.fromCodePoint(38),
                    u = c - p,
                    n.b += null == u ? Q.substr(a, p, null) : Q.substr(a, p, u),
                    d.addChild(da.createPCData(n.b)),
                    c;
                throw aa.thrown(new Kc("Unexpected end",a,c));
            }
            ;
            var Tf = function(a) {
                this.output = new K;
                this.pretty = a
            };
            h["haxe.xml.Printer"] = Tf;
            Tf.__name__ = "haxe.xml.Printer";
            Tf.print = function(a, b) {
                null == b && (b = !1);
                b = new Tf(b);
                b.writeNode(a, "");
                return b.output.b
            }
            ;
            Tf.prototype = {
                writeNode: function(a, b) {
                    switch (a.nodeType) {
                    case 0:
                        this.output.b += G.string(b + "<");
                        if (a.nodeType != da.Element)
                            throw aa.thrown("Bad node type, expected Element but found " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                        this.output.b += G.string(a.nodeName);
                        for (var c = a.attributes(); c.hasNext(); ) {
                            var d = c.next();
                            this.output.b += G.string(" " + d + '="');
                            d = P.htmlEscape(a.get(d), !0);
                            this.output.b += G.string(d);
                            this.output.b += '"'
                        }
                        if (this.hasChildren(a)) {
                            this.output.b += ">";
                            this.pretty && (this.output.b += "\n");
                            if (a.nodeType != da.Document && a.nodeType != da.Element)
                                throw aa.thrown("Bad node type, expected Element or Document but found " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                            c = 0;
                            for (d = a.children; c < d.length; ) {
                                var f = d[c++];
                                this.writeNode(f, this.pretty ? b + "\t" : b)
                            }
                            this.output.b += G.string(b + "</");
                            if (a.nodeType != da.Element)
                                throw aa.thrown("Bad node type, expected Element but found " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                            this.output.b += G.string(a.nodeName);
                            this.output.b += ">"
                        } else
                            this.output.b += "/>";
                        this.pretty && (this.output.b += "\n");
                        break;
                    case 1:
                        if (a.nodeType == da.Document || a.nodeType == da.Element)
                            throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                        a = a.nodeValue;
                        0 != a.length && (d = b + P.htmlEscape(a),
                        this.output.b += G.string(d),
                        this.pretty && (this.output.b += "\n"));
                        break;
                    case 2:
                        this.output.b += G.string(b + "<![CDATA[");
                        if (a.nodeType == da.Document || a.nodeType == da.Element)
                            throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                        this.output.b += G.string(a.nodeValue);
                        this.output.b += "]]\x3e";
                        this.pretty && (this.output.b += "\n");
                        break;
                    case 3:
                        if (a.nodeType == da.Document || a.nodeType == da.Element)
                            throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                        a = a.nodeValue;
                        a = a.replace(/[\n\r\t]+/g, "");
                        this.output.b += null == b ? "null" : "" + b;
                        d = P.trim("\x3c!--" + a + "--\x3e");
                        this.output.b += G.string(d);
                        this.pretty && (this.output.b += "\n");
                        break;
                    case 4:
                        if (a.nodeType == da.Document || a.nodeType == da.Element)
                            throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                        this.output.b += G.string("<!DOCTYPE " + a.nodeValue + ">");
                        this.pretty && (this.output.b += "\n");
                        break;
                    case 5:
                        if (a.nodeType == da.Document || a.nodeType == da.Element)
                            throw aa.thrown("Bad node type, unexpected " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                        this.output.b += G.string("<?" + a.nodeValue + "?>");
                        this.pretty && (this.output.b += "\n");
                        break;
                    case 6:
                        if (a.nodeType != da.Document && a.nodeType != da.Element)
                            throw aa.thrown("Bad node type, expected Element or Document but found " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                        c = 0;
                        for (d = a.children; c < d.length; )
                            f = d[c++],
                            this.writeNode(f, b)
                    }
                },
                hasChildren: function(a) {
                    if (a.nodeType != da.Document && a.nodeType != da.Element)
                        throw aa.thrown("Bad node type, expected Element or Document but found " + (null == a.nodeType ? "null" : eb.toString(a.nodeType)));
                    var b = 0;
                    for (a = a.children; b < a.length; ) {
                        var c = a[b++];
                        switch (c.nodeType) {
                        case 0:
                        case 1:
                            return !0;
                        case 2:
                        case 3:
                            if (c.nodeType == da.Document || c.nodeType == da.Element)
                                throw aa.thrown("Bad node type, unexpected " + (null == c.nodeType ? "null" : eb.toString(c.nodeType)));
                            if (0 != P.ltrim(c.nodeValue).length)
                                return !0
                        }
                    }
                    return !1
                },
                __class__: Tf
            };
            var Df = N["haxe.zip.ExtraField"] = {
                __ename__: "haxe.zip.ExtraField",
                __constructs__: null,
                FUnknown: (D = function(a, b) {
                    return {
                        _hx_index: 0,
                        tag: a,
                        bytes: b,
                        __enum__: "haxe.zip.ExtraField",
                        toString: r
                    }
                }
                ,
                D._hx_name = "FUnknown",
                D.__params__ = ["tag", "bytes"],
                D),
                FInfoZipUnicodePath: (D = function(a, b) {
                    return {
                        _hx_index: 1,
                        name: a,
                        crc: b,
                        __enum__: "haxe.zip.ExtraField",
                        toString: r
                    }
                }
                ,
                D._hx_name = "FInfoZipUnicodePath",
                D.__params__ = ["name", "crc"],
                D),
                FUtf8: {
                    _hx_name: "FUtf8",
                    _hx_index: 2,
                    __enum__: "haxe.zip.ExtraField",
                    toString: r
                }
            };
            Df.__constructs__ = [Df.FUnknown, Df.FInfoZipUnicodePath, Df.FUtf8];
            Df.__empty_constructs__ = [Df.FUtf8];
            var ce = N["haxe.zip.Huffman"] = {
                __ename__: "haxe.zip.Huffman",
                __constructs__: null,
                Found: (D = function(a) {
                    return {
                        _hx_index: 0,
                        i: a,
                        __enum__: "haxe.zip.Huffman",
                        toString: r
                    }
                }
                ,
                D._hx_name = "Found",
                D.__params__ = ["i"],
                D),
                NeedBit: (D = function(a, b) {
                    return {
                        _hx_index: 1,
                        left: a,
                        right: b,
                        __enum__: "haxe.zip.Huffman",
                        toString: r
                    }
                }
                ,
                D._hx_name = "NeedBit",
                D.__params__ = ["left", "right"],
                D),
                NeedBits: (D = function(a, b) {
                    return {
                        _hx_index: 2,
                        n: a,
                        table: b,
                        __enum__: "haxe.zip.Huffman",
                        toString: r
                    }
                }
                ,
                D._hx_name = "NeedBits",
                D.__params__ = ["n", "table"],
                D)
            };
            ce.__constructs__ = [ce.Found, ce.NeedBit, ce.NeedBits];
            ce.__empty_constructs__ = [];
            var kk = function() {};
            h["haxe.zip.HuffTools"] = kk;
            kk.__name__ = "haxe.zip.HuffTools";
            kk.prototype = {
                treeDepth: function(a) {
                    switch (a._hx_index) {
                    case 0:
                        return 0;
                    case 1:
                        var b = a.right;
                        a = this.treeDepth(a.left);
                        b = this.treeDepth(b);
                        return 1 + (a < b ? a : b);
                    case 2:
                        throw aa.thrown("assert");
                    }
                },
                treeCompress: function(a) {
                    var b = this.treeDepth(a);
                    if (0 == b)
                        return a;
                    if (1 == b) {
                        if (1 == a._hx_index)
                            return b = a.right,
                            ce.NeedBit(this.treeCompress(a.left), this.treeCompress(b));
                        throw aa.thrown("assert");
                    }
                    for (var c = [], d = 0, f = 1 << b; d < f; )
                        d++,
                        c.push(ce.Found(-1));
                    this.treeWalk(c, 0, 0, b, a);
                    return ce.NeedBits(b, c)
                },
                treeWalk: function(a, b, c, d, f) {
                    if (1 == f._hx_index) {
                        var g = f.left
                          , k = f.right;
                        0 < d ? (this.treeWalk(a, b, c + 1, d - 1, g),
                        this.treeWalk(a, b | 1 << c, c + 1, d - 1, k)) : a[b] = this.treeCompress(f)
                    } else
                        a[b] = this.treeCompress(f)
                },
                treeMake: function(a, b, c, d) {
                    if (d > b)
                        throw aa.thrown("Invalid huffman");
                    var f = c << 5 | d;
                    if (a.h.hasOwnProperty(f))
                        return ce.Found(a.h[f]);
                    c <<= 1;
                    ++d;
                    return ce.NeedBit(this.treeMake(a, b, c, d), this.treeMake(a, b, c | 1, d))
                },
                make: function(a, b, c, d) {
                    if (1 == c)
                        return ce.NeedBit(ce.Found(0), ce.Found(0));
                    var f = []
                      , g = [];
                    if (32 < d)
                        throw aa.thrown("Invalid huffman");
                    for (var k = 0, q = d; k < q; )
                        k++,
                        f.push(0),
                        g.push(0);
                    k = 0;
                    for (q = c; k < q; ) {
                        var p = k++;
                        p = a[p + b];
                        if (p >= d)
                            throw aa.thrown("Invalid huffman");
                        f[p]++
                    }
                    var l = 0;
                    k = 1;
                    for (q = d - 1; k < q; )
                        p = k++,
                        l = l + f[p] << 1,
                        g[p] = l;
                    f = new tc;
                    k = 0;
                    for (q = c; k < q; )
                        p = k++,
                        c = a[p + b],
                        0 != c && (l = g[c - 1],
                        g[c - 1] = l + 1,
                        f.h[l << 5 | c] = p);
                    return this.treeCompress(ce.NeedBit(this.treeMake(f, d, 0, 1), this.treeMake(f, d, 1, 1)))
                },
                __class__: kk
            };
            var lk = function(a) {
                this.buffer = new xb(new ArrayBuffer(65536));
                this.pos = 0;
                a && (this.crc = new zg)
            };
            h["haxe.zip._InflateImpl.Window"] = lk;
            lk.__name__ = "haxe.zip._InflateImpl.Window";
            lk.prototype = {
                slide: function() {
                    null != this.crc && this.crc.update(this.buffer, 0, 32768);
                    var a = new xb(new ArrayBuffer(65536));
                    this.pos -= 32768;
                    a.blit(0, this.buffer, 32768, this.pos);
                    this.buffer = a
                },
                addBytes: function(a, b, c) {
                    65536 < this.pos + c && this.slide();
                    this.buffer.blit(this.pos, a, b, c);
                    this.pos += c
                },
                addByte: function(a) {
                    65536 == this.pos && this.slide();
                    this.buffer.b[this.pos] = a & 255;
                    this.pos++
                },
                getLastChar: function() {
                    return this.buffer.b[this.pos - 1]
                },
                available: function() {
                    return this.pos
                },
                checksum: function() {
                    null != this.crc && this.crc.update(this.buffer, 0, this.pos);
                    return this.crc
                },
                __class__: lk
            };
            var Nb = N["haxe.zip._InflateImpl.State"] = {
                __ename__: "haxe.zip._InflateImpl.State",
                __constructs__: null,
                Head: {
                    _hx_name: "Head",
                    _hx_index: 0,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                },
                Block: {
                    _hx_name: "Block",
                    _hx_index: 1,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                },
                CData: {
                    _hx_name: "CData",
                    _hx_index: 2,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                },
                Flat: {
                    _hx_name: "Flat",
                    _hx_index: 3,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                },
                Crc: {
                    _hx_name: "Crc",
                    _hx_index: 4,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                },
                Dist: {
                    _hx_name: "Dist",
                    _hx_index: 5,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                },
                DistOne: {
                    _hx_name: "DistOne",
                    _hx_index: 6,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                },
                Done: {
                    _hx_name: "Done",
                    _hx_index: 7,
                    __enum__: "haxe.zip._InflateImpl.State",
                    toString: r
                }
            };
            Nb.__constructs__ = [Nb.Head, Nb.Block, Nb.CData, Nb.Flat, Nb.Crc, Nb.Dist, Nb.DistOne, Nb.Done];
            Nb.__empty_constructs__ = [Nb.Head, Nb.Block, Nb.CData, Nb.Flat, Nb.Crc, Nb.Dist, Nb.DistOne, Nb.Done];
            var ed = function(a, b, c) {
                null == c && (c = !0);
                null == b && (b = !0);
                this.isFinal = !1;
                this.htools = new kk;
                this.huffman = this.buildFixedHuffman();
                this.huffdist = null;
                this.dist = this.len = 0;
                this.state = b ? Nb.Head : Nb.Block;
                this.input = a;
                this.needed = this.nbits = this.bits = 0;
                this.output = null;
                this.outpos = 0;
                this.lengths = [];
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.lengths.push(-1);
                this.window = new lk(c)
            };
            h["haxe.zip.InflateImpl"] = ed;
            ed.__name__ = "haxe.zip.InflateImpl";
            ed.prototype = {
                buildFixedHuffman: function() {
                    if (null != ed.FIXED_HUFFMAN)
                        return ed.FIXED_HUFFMAN;
                    for (var a = [], b = 0; 288 > b; ) {
                        var c = b++;
                        a.push(143 >= c ? 8 : 255 >= c ? 9 : 279 >= c ? 7 : 8)
                    }
                    ed.FIXED_HUFFMAN = this.htools.make(a, 0, 288, 10);
                    return ed.FIXED_HUFFMAN
                },
                readBytes: function(a, b, c) {
                    this.needed = c;
                    this.outpos = b;
                    this.output = a;
                    if (0 < c)
                        for (; this.inflateLoop(); )
                            ;
                    return c - this.needed
                },
                getBits: function(a) {
                    for (; this.nbits < a; )
                        this.bits |= this.input.readByte() << this.nbits,
                        this.nbits += 8;
                    var b = this.bits & (1 << a) - 1;
                    this.nbits -= a;
                    this.bits >>= a;
                    return b
                },
                getBit: function() {
                    0 == this.nbits && (this.nbits = 8,
                    this.bits = this.input.readByte());
                    var a = 1 == (this.bits & 1);
                    this.nbits--;
                    this.bits >>= 1;
                    return a
                },
                getRevBits: function(a) {
                    return 0 == a ? 0 : this.getBit() ? 1 << a - 1 | this.getRevBits(a - 1) : this.getRevBits(a - 1)
                },
                resetBits: function() {
                    this.nbits = this.bits = 0
                },
                addBytes: function(a, b, c) {
                    this.window.addBytes(a, b, c);
                    this.output.blit(this.outpos, a, b, c);
                    this.needed -= c;
                    this.outpos += c
                },
                addByte: function(a) {
                    this.window.addByte(a);
                    this.output.b[this.outpos] = a & 255;
                    this.needed--;
                    this.outpos++
                },
                addDistOne: function(a) {
                    for (var b = this.window.getLastChar(), c = 0; c < a; )
                        c++,
                        this.addByte(b)
                },
                addDist: function(a, b) {
                    this.addBytes(this.window.buffer, this.window.pos - a, b)
                },
                applyHuffman: function(a) {
                    switch (a._hx_index) {
                    case 0:
                        var b = a.i;
                        return b;
                    case 1:
                        return b = a.left,
                        a = a.right,
                        this.applyHuffman(this.getBit() ? a : b);
                    case 2:
                        return b = a.n,
                        this.applyHuffman(a.table[this.getBits(b)])
                    }
                },
                inflateLengths: function(a, b) {
                    for (var c = 0, d = 0; c < b; ) {
                        var f = this.applyHuffman(this.huffman);
                        switch (f) {
                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:
                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                            d = f;
                            a[c] = f;
                            ++c;
                            break;
                        case 16:
                            f = c + 3 + this.getBits(2);
                            if (f > b)
                                throw aa.thrown("Invalid data");
                            for (; c < f; )
                                a[c] = d,
                                ++c;
                            break;
                        case 17:
                            c += 3 + this.getBits(3);
                            if (c > b)
                                throw aa.thrown("Invalid data");
                            break;
                        case 18:
                            c += 11 + this.getBits(7);
                            if (c > b)
                                throw aa.thrown("Invalid data");
                            break;
                        default:
                            throw aa.thrown("Invalid data");
                        }
                    }
                },
                inflateLoop: function() {
                    switch (this.state._hx_index) {
                    case 0:
                        var a = this.input.readByte();
                        if (8 != (a & 15))
                            throw aa.thrown("Invalid data");
                        var b = this.input.readByte()
                          , c = 0 != (b & 32);
                        if (0 != ((a << 8) + b) % 31)
                            throw aa.thrown("Invalid data");
                        if (c)
                            throw aa.thrown("Unsupported dictionary");
                        this.state = Nb.Block;
                        return !0;
                    case 1:
                        switch (this.isFinal = this.getBit(),
                        this.getBits(2)) {
                        case 0:
                            this.len = this.input.readUInt16();
                            if (this.input.readUInt16() != 65535 - this.len)
                                throw aa.thrown("Invalid data");
                            this.state = Nb.Flat;
                            a = this.inflateLoop();
                            this.resetBits();
                            return a;
                        case 1:
                            return this.huffman = this.buildFixedHuffman(),
                            this.huffdist = null,
                            this.state = Nb.CData,
                            !0;
                        case 2:
                            a = this.getBits(5) + 257;
                            b = this.getBits(5) + 1;
                            var d = this.getBits(4) + 4;
                            c = 0;
                            for (var f = d; c < f; ) {
                                var g = c++;
                                this.lengths[ed.CODE_LENGTHS_POS[g]] = this.getBits(3)
                            }
                            c = d;
                            for (f = 19; c < f; )
                                g = c++,
                                this.lengths[ed.CODE_LENGTHS_POS[g]] = 0;
                            this.huffman = this.htools.make(this.lengths, 0, 19, 8);
                            d = [];
                            c = 0;
                            for (f = a + b; c < f; )
                                c++,
                                d.push(0);
                            this.inflateLengths(d, a + b);
                            this.huffdist = this.htools.make(d, a, b, 16);
                            this.huffman = this.htools.make(d, 0, a, 16);
                            this.state = Nb.CData;
                            return !0;
                        default:
                            throw aa.thrown("Invalid data");
                        }
                    case 2:
                        b = this.applyHuffman(this.huffman);
                        if (256 > b)
                            return this.addByte(b),
                            0 < this.needed;
                        if (256 == b)
                            this.state = this.isFinal ? Nb.Crc : Nb.Block;
                        else {
                            b -= 257;
                            a = ed.LEN_EXTRA_BITS_TBL[b];
                            if (-1 == a)
                                throw aa.thrown("Invalid data");
                            this.len = ed.LEN_BASE_VAL_TBL[b] + this.getBits(a);
                            b = null == this.huffdist ? this.getRevBits(5) : this.applyHuffman(this.huffdist);
                            a = ed.DIST_EXTRA_BITS_TBL[b];
                            if (-1 == a)
                                throw aa.thrown("Invalid data");
                            this.dist = ed.DIST_BASE_VAL_TBL[b] + this.getBits(a);
                            if (this.dist > this.window.available())
                                throw aa.thrown("Invalid data");
                            this.state = 1 == this.dist ? Nb.DistOne : Nb.Dist
                        }
                        return !0;
                    case 3:
                        return a = this.len < this.needed ? this.len : this.needed,
                        b = this.input.read(a),
                        this.len -= a,
                        this.addBytes(b, 0, a),
                        0 == this.len && (this.state = this.isFinal ? Nb.Crc : Nb.Block),
                        0 < this.needed;
                    case 4:
                        a = this.window.checksum();
                        if (null == a)
                            return this.state = Nb.Done,
                            !0;
                        b = zg.read(this.input);
                        if (!a.equals(b))
                            throw aa.thrown("Invalid CRC");
                        this.state = Nb.Done;
                        return !0;
                    case 5:
                        for (; 0 < this.len && 0 < this.needed; )
                            a = this.len < this.dist ? this.len : this.dist,
                            a = this.needed < a ? this.needed : a,
                            this.addDist(this.dist, a),
                            this.len -= a;
                        0 == this.len && (this.state = Nb.CData);
                        return 0 < this.needed;
                    case 6:
                        return a = this.len < this.needed ? this.len : this.needed,
                        this.addDistOne(a),
                        this.len -= a,
                        0 == this.len && (this.state = Nb.CData),
                        0 < this.needed;
                    case 7:
                        return !1
                    }
                },
                __class__: ed
            };
            var rh = function(a) {
                this.i = a
            };
            h["haxe.zip.Reader"] = rh;
            rh.__name__ = "haxe.zip.Reader";
            rh.readZip = function(a) {
                return (new rh(a)).read()
            }
            ;
            rh.prototype = {
                readZipDate: function() {
                    var a = this.i.readUInt16()
                      , b = a >> 11 & 31
                      , c = a >> 5 & 63;
                    a &= 31;
                    var d = this.i.readUInt16();
                    return new Date((d >> 9) + 1980,(d >> 5 & 15) - 1,d & 31,b,c,a << 1)
                },
                readExtraFields: function(a) {
                    for (var b = new $a; 0 < a; ) {
                        if (4 > a)
                            throw aa.thrown("Invalid extra fields data");
                        var c = this.i.readUInt16()
                          , d = this.i.readUInt16();
                        if (a < d)
                            throw aa.thrown("Invalid extra fields data");
                        if (28789 == c) {
                            var f = this.i.readByte();
                            if (1 != f) {
                                var g = new Ii;
                                g.addByte(f);
                                g.add(this.i.read(d - 1));
                                b.add(Df.FUnknown(c, g.getBytes()))
                            } else
                                c = this.i.readInt32(),
                                f = this.i.read(d - 5).toString(),
                                b.add(Df.FInfoZipUnicodePath(f, c))
                        } else
                            b.add(Df.FUnknown(c, this.i.read(d)));
                        a -= 4 + d
                    }
                    return b
                },
                readEntryHeader: function() {
                    var a = this.i
                      , b = a.readInt32();
                    if (33639248 == b || 101010256 == b)
                        return null;
                    if (67324752 != b)
                        throw aa.thrown("Invalid Zip Data");
                    a.readUInt16();
                    b = a.readUInt16();
                    var c = 0 != (b & 2048);
                    if (0 != (b & 63473))
                        throw aa.thrown("Unsupported flags " + b);
                    var d = a.readUInt16()
                      , f = 0 != d;
                    if (f && 8 != d)
                        throw aa.thrown("Unsupported compression " + d);
                    d = this.readZipDate();
                    var g = a.readInt32()
                      , k = a.readInt32()
                      , q = a.readInt32()
                      , p = a.readInt16()
                      , l = a.readInt16();
                    a = a.readString(p);
                    l = this.readExtraFields(l);
                    c && l.push(Df.FUtf8);
                    0 != (b & 8) && (g = null);
                    return {
                        fileName: a,
                        fileSize: q,
                        fileTime: d,
                        compressed: f,
                        dataSize: k,
                        data: null,
                        crc32: g,
                        extraFields: l
                    }
                },
                read: function() {
                    for (var a = new $a, b = null; ; ) {
                        var c = this.readEntryHeader();
                        if (null == c)
                            break;
                        if (null == c.crc32) {
                            if (c.compressed) {
                                null == b && (b = new xb(new ArrayBuffer(65536)));
                                for (var d = new Ii, f = new ed(this.i,!1,!1); ; ) {
                                    var g = f.readBytes(b, 0, 65536);
                                    d.addBytes(b, 0, g);
                                    if (65536 > g)
                                        break
                                }
                                c.data = d.getBytes()
                            } else
                                c.data = this.i.read(c.dataSize);
                            c.crc32 = this.i.readInt32();
                            134695760 == c.crc32 && (c.crc32 = this.i.readInt32());
                            c.dataSize = this.i.readInt32();
                            c.fileSize = this.i.readInt32();
                            c.dataSize = c.fileSize;
                            c.compressed = !1
                        } else
                            c.data = this.i.read(c.dataSize);
                        a.add(c)
                    }
                    return a
                },
                __class__: rh
            };
            var Ef = function() {};
            h["js.Browser"] = Ef;
            Ef.__name__ = "js.Browser";
            Ef.__properties__ = {
                get_supported: "get_supported"
            };
            Ef.get_supported = function() {
                return "undefined" != typeof window && "undefined" != typeof window.location ? "string" == typeof window.location.protocol : !1
            }
            ;
            Ef.getLocalStorage = function() {
                try {
                    var a = window.localStorage;
                    a.getItem("");
                    if (0 == a.length) {
                        var b = "_hx_" + Math.random();
                        a.setItem(b, b);
                        a.removeItem(b)
                    }
                    return a
                } catch (c) {
                    return Ua.lastError = c,
                    null
                }
            }
            ;
            var cl = function() {};
            h["js.html._CanvasElement.CanvasUtil"] = cl;
            cl.__name__ = "js.html._CanvasElement.CanvasUtil";
            cl.getContextWebGL = function(a, b) {
                var c = a.getContext("webgl", b);
                if (null != c)
                    return c;
                c = a.getContext("experimental-webgl", b);
                return null != c ? c : null
            }
            ;
            var Pj = function() {
                this.connected = !0;
                this.buttons = [];
                this.axes = []
            };
            h["lime._internal.backend.html5.GameDeviceData"] = Pj;
            Pj.__name__ = "lime._internal.backend.html5.GameDeviceData";
            Pj.prototype = {
                __class__: Pj
            };
            var nk = function(a) {
                this.parent = a;
                this.id = -1;
                this.gain = 1;
                this.position = new mk
            };
            h["lime._internal.backend.html5.HTML5AudioSource"] = nk;
            nk.__name__ = "lime._internal.backend.html5.HTML5AudioSource";
            nk.prototype = {
                dispose: function() {},
                init: function() {},
                play: function() {
                    if (!this.playing && null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        this.playing = !0;
                        var a = this.getCurrentTime();
                        this.completed = !1;
                        var b = this.parent.buffer.__srcHowl._volume;
                        this.parent.buffer.__srcHowl._volume = this.parent.get_gain();
                        this.id = this.parent.buffer.__srcHowl.play();
                        this.parent.buffer.__srcHowl._volume = b;
                        this.setPosition(this.parent.get_position());
                        this.parent.buffer.__srcHowl.on("end", m(this, this.howl_onEnd), this.id);
                        this.setCurrentTime(a)
                    }
                },
                stop: function() {
                    this.playing = !1;
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && (this.parent.buffer.__srcHowl.stop(this.id),
                    this.parent.buffer.__srcHowl.off("end", m(this, this.howl_onEnd), this.id))
                },
                howl_onEnd: function() {
                    this.playing = !1;
                    0 < this.loops ? (this.loops--,
                    this.stop(),
                    this.play()) : (null != this.parent.buffer && null != this.parent.buffer.__srcHowl && (this.parent.buffer.__srcHowl.stop(this.id),
                    this.parent.buffer.__srcHowl.off("end", m(this, this.howl_onEnd), this.id)),
                    this.completed = !0,
                    this.parent.onComplete.dispatch())
                },
                getCurrentTime: function() {
                    if (-1 == this.id)
                        return 0;
                    if (this.completed)
                        return this.getLength();
                    if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        var a = (1E3 * this.parent.buffer.__srcHowl.seek(this.id) | 0) - this.parent.offset;
                        return 0 > a ? 0 : a
                    }
                    return 0
                },
                setCurrentTime: function(a) {
                    if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
                        var b = (a + this.parent.offset) / 1E3;
                        0 > b && (b = 0);
                        this.parent.buffer.__srcHowl.seek(b, this.id)
                    }
                    return a
                },
                getGain: function() {
                    return this.gain
                },
                setGain: function(a) {
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && -1 != this.id && this.parent.buffer.__srcHowl.volume(a, this.id);
                    return this.gain = a
                },
                getLength: function() {
                    return 0 != this.length ? this.length : null != this.parent.buffer && null != this.parent.buffer.__srcHowl ? 1E3 * this.parent.buffer.__srcHowl.duration() | 0 : 0
                },
                setLength: function(a) {
                    return this.length = a
                },
                setLoops: function(a) {
                    return this.loops = a
                },
                getPosition: function() {
                    return this.position
                },
                setPosition: function(a) {
                    this.position.x = a.x;
                    this.position.y = a.y;
                    this.position.z = a.z;
                    this.position.w = a.w;
                    null != this.parent.buffer && null != this.parent.buffer.__srcHowl && null != this.parent.buffer.__srcHowl.pos && this.parent.buffer.__srcHowl.pos(this.position.x, this.position.y, this.position.z, this.id);
                    return this.position
                },
                __class__: nk
            };
            var Ea = function() {
                this.validStatus0 = (new Ta("Tizen","gi")).match(window.navigator.userAgent)
            };
            h["lime._internal.backend.html5.HTML5HTTPRequest"] = Ea;
            Ea.__name__ = "lime._internal.backend.html5.HTML5HTTPRequest";
            Ea.loadImage = function(a) {
                var b = new Bd;
                Ea.activeRequests < Ea.requestLimit ? (Ea.activeRequests++,
                Ea.__loadImage(a, b, 0)) : Ea.requestQueue.add({
                    instance: null,
                    uri: a,
                    promise: b,
                    type: "IMAGE",
                    options: 0
                });
                return b.future
            }
            ;
            Ea.loadImageFromBytes = function(a, b) {
                var c = URL.createObjectURL(new Blob([a.b.bufferValue],{
                    type: b
                }));
                return null != c ? (a = new Bd,
                Ea.activeRequests < Ea.requestLimit ? (Ea.activeRequests++,
                Ea.__loadImage(c, a, 1)) : Ea.requestQueue.add({
                    instance: null,
                    uri: c,
                    promise: a,
                    type: "IMAGE",
                    options: 1
                }),
                a.future) : Ea.loadImage("data:" + b + ";base64," + De.encode(a))
            }
            ;
            Ea.processQueue = function() {
                if (Ea.activeRequests < Ea.requestLimit && 0 < Ea.requestQueue.length) {
                    Ea.activeRequests++;
                    var a = Ea.requestQueue.pop();
                    switch (a.type) {
                    case "BINARY":
                        a.instance.__loadData(a.uri, a.promise);
                        break;
                    case "IMAGE":
                        Ea.__loadImage(a.uri, a.promise, a.options);
                        break;
                    case "TEXT":
                        a.instance.__loadText(a.uri, a.promise);
                        break;
                    default:
                        Ea.activeRequests--
                    }
                }
            }
            ;
            Ea.__fixHostname = function(a) {
                return null == a ? "" : a
            }
            ;
            Ea.__fixPort = function(a, b) {
                if (null == a || "" == a)
                    switch (b) {
                    case "ftp:":
                        return "21";
                    case "gopher:":
                        return "70";
                    case "http:":
                        return "80";
                    case "https:":
                        return "443";
                    case "ws:":
                        return "80";
                    case "wss:":
                        return "443";
                    default:
                        return ""
                    }
                return a
            }
            ;
            Ea.__fixProtocol = function(a) {
                return null == a || "" == a ? "http:" : a
            }
            ;
            Ea.__isInMemoryURI = function(a) {
                return P.startsWith(a, "data:") ? !0 : P.startsWith(a, "blob:")
            }
            ;
            Ea.__isSameOrigin = function(a) {
                if (null == a || "" == a || Ea.__isInMemoryURI(a))
                    return !0;
                null == Ea.originElement && (Ea.originElement = window.document.createElement("a"),
                Ea.originHostname = Ea.__fixHostname(y.location.hostname),
                Ea.originProtocol = Ea.__fixProtocol(y.location.protocol),
                Ea.originPort = Ea.__fixPort(y.location.port, Ea.originProtocol));
                var b = Ea.originElement;
                b.href = a;
                "" == b.hostname && (b.href = b.href);
                var c = Ea.__fixHostname(b.hostname);
                a = Ea.__fixProtocol(b.protocol);
                b = Ea.__fixPort(b.port, a);
                c = "" == c || c == Ea.originHostname;
                b = "" == b || b == Ea.originPort;
                return "file:" != a && c ? b : !1
            }
            ;
            Ea.__loadImage = function(a, b, c) {
                var d = new window.Image;
                Ea.__isSameOrigin(a) || (d.crossOrigin = "Anonymous");
                null == Ea.supportsImageProgress && (Ea.supportsImageProgress = "onprogress"in d);
                if (Ea.supportsImageProgress || Ea.__isInMemoryURI(a))
                    d.addEventListener("load", function(f) {
                        Ea.__revokeBlobURI(a, c);
                        f = new Xe(null,d.width,d.height);
                        f.__srcImage = d;
                        Ea.activeRequests--;
                        Ea.processQueue();
                        b.complete(new Tb(f))
                    }, !1),
                    d.addEventListener("progress", function(a) {
                        b.progress(a.loaded, a.total)
                    }, !1),
                    d.addEventListener("error", function(d) {
                        Ea.__revokeBlobURI(a, c);
                        Ea.activeRequests--;
                        Ea.processQueue();
                        b.error(new Bg(d.detail,null))
                    }, !1),
                    d.src = a;
                else {
                    var f = new XMLHttpRequest;
                    f.onload = function(a) {
                        Ea.activeRequests--;
                        Ea.processQueue();
                        (new Tb).__fromBytes(xb.ofData(f.response), function(a) {
                            b.complete(a)
                        })
                    }
                    ;
                    f.onerror = function(a) {
                        b.error(new Bg(a.message,null))
                    }
                    ;
                    f.onprogress = function(a) {
                        a.lengthComputable && b.progress(a.loaded, a.total)
                    }
                    ;
                    f.open("GET", a, !0);
                    f.responseType = "arraybuffer";
                    f.overrideMimeType("text/plain; charset=x-user-defined");
                    f.send(null)
                }
            }
            ;
            Ea.__revokeBlobURI = function(a, b) {
                0 != (b & 1) && URL.revokeObjectURL(a)
            }
            ;
            Ea.prototype = {
                init: function(a) {
                    this.parent = a
                },
                load: function(a, b, c) {
                    this.request = new XMLHttpRequest;
                    "POST" == this.parent.method ? this.request.upload.addEventListener("progress", b, !1) : this.request.addEventListener("progress", b, !1);
                    this.request.onreadystatechange = c;
                    b = "";
                    if (null == this.parent.data) {
                        c = Object.keys(this.parent.formData.h);
                        for (var d = c.length, f = 0; f < d; ) {
                            var g = c[f++];
                            0 < b.length && (b += "&");
                            var k = this.parent.formData.h[g];
                            if (-1 < g.indexOf("[]") && k instanceof Array) {
                                var q = [];
                                for (k = H(k); k.hasNext(); ) {
                                    var p = k.next();
                                    q.push(encodeURIComponent(p))
                                }
                                q = q.join("&amp;" + g + "=");
                                b += encodeURIComponent(g) + "=" + q
                            } else
                                q = encodeURIComponent(g) + "=",
                                g = G.string(k),
                                b += q + encodeURIComponent(g)
                        }
                        "GET" == this.parent.method && "" != b && (a = -1 < a.indexOf("?") ? a + ("&" + b) : a + ("?" + b),
                        b = "")
                    }
                    this.request.open(G.string(this.parent.method), a, !0);
                    0 < this.parent.timeout && (this.request.timeout = this.parent.timeout);
                    this.binary && (this.request.responseType = "arraybuffer");
                    a = null;
                    q = 0;
                    for (c = this.parent.headers; q < c.length; )
                        d = c[q],
                        ++q,
                        "Content-Type" == d.name ? a = d.value : this.request.setRequestHeader(d.name, d.value);
                    null != this.parent.contentType && (a = this.parent.contentType);
                    null == a && (null != this.parent.data ? a = "application/octet-stream" : "" != b && (a = "application/x-www-form-urlencoded"));
                    null != a && this.request.setRequestHeader("Content-Type", a);
                    this.parent.withCredentials && (this.request.withCredentials = !0);
                    null != this.parent.data ? this.request.send(this.parent.data.b.bufferValue) : this.request.send(b)
                },
                loadData: function(a) {
                    var b = new Bd;
                    Ea.activeRequests < Ea.requestLimit ? (Ea.activeRequests++,
                    this.__loadData(a, b)) : Ea.requestQueue.add({
                        instance: this,
                        uri: a,
                        promise: b,
                        type: "BINARY",
                        options: 0
                    });
                    return b.future
                },
                loadText: function(a) {
                    var b = new Bd;
                    Ea.activeRequests < Ea.requestLimit ? (Ea.activeRequests++,
                    this.__loadText(a, b)) : Ea.requestQueue.add({
                        instance: this,
                        uri: a,
                        promise: b,
                        type: "TEXT",
                        options: 0
                    });
                    return b.future
                },
                processResponse: function() {
                    if (this.parent.enableResponseHeaders) {
                        this.parent.responseHeaders = [];
                        for (var a, b, c = 0, d = this.request.getAllResponseHeaders().split("\n"); c < d.length; )
                            b = d[c],
                            ++c,
                            a = P.trim(Q.substr(b, 0, b.indexOf(":"))),
                            b = P.trim(Q.substr(b, b.indexOf(":") + 1, null)),
                            "" != a && this.parent.responseHeaders.push(new Mi(a,b))
                    }
                    this.parent.responseStatus = this.request.status
                },
                __loadData: function(a, b) {
                    var c = this;
                    this.binary = !0;
                    this.load(a, function(a) {
                        b.progress(a.loaded, a.total)
                    }, function(a) {
                        4 == c.request.readyState && (a = null,
                        "" == c.request.responseType ? null != c.request.responseText && (a = xb.ofString(c.request.responseText)) : null != c.request.response && (a = xb.ofData(c.request.response)),
                        null != c.request.status && (200 <= c.request.status && 400 > c.request.status || c.validStatus0 && 0 == c.request.status) ? (c.processResponse(),
                        b.complete(a)) : (c.processResponse(),
                        b.error(new Bg(c.request.status,a))),
                        c.request = null,
                        Ea.activeRequests--,
                        Ea.processQueue())
                    })
                },
                __loadText: function(a, b) {
                    var c = this;
                    this.binary = !1;
                    this.load(a, function(a) {
                        b.progress(a.loaded, a.total)
                    }, function(a) {
                        4 == c.request.readyState && (null != c.request.status && (200 <= c.request.status && 400 > c.request.status || c.validStatus0 && 0 == c.request.status) ? (c.processResponse(),
                        b.complete(c.request.responseText)) : (c.processResponse(),
                        b.error(new Bg(c.request.status,c.request.responseText))),
                        c.request = null,
                        Ea.activeRequests--,
                        Ea.processQueue())
                    })
                },
                __class__: Ea
            };
            var Ma = function(a) {
                this.imeCompositionActive = !1;
                this.unusedTouchesPool = new $a;
                this.scale = 1;
                this.currentTouches = new tc;
                this.parent = a;
                this.cursor = ub.DEFAULT;
                this.cacheMouseY = this.cacheMouseX = 0;
                var b = a.__attributes;
                Object.prototype.hasOwnProperty.call(b, "context") || (b.context = {});
                this.renderType = b.context.type;
                Object.prototype.hasOwnProperty.call(b, "element") && (a.element = b.element);
                var c = a.element;
                Object.prototype.hasOwnProperty.call(b, "allowHighDPI") && b.allowHighDPI && "dom" != this.renderType && (this.scale = window.devicePixelRatio);
                a.__scale = this.scale;
                this.setWidth = Object.prototype.hasOwnProperty.call(b, "width") ? b.width : 0;
                this.setHeight = Object.prototype.hasOwnProperty.call(b, "height") ? b.height : 0;
                a.__width = this.setWidth;
                a.__height = this.setHeight;
                a.id = Ma.windowID++;
                c instanceof HTMLCanvasElement ? this.canvas = c : "dom" == this.renderType ? this.div = window.document.createElement("div") : this.canvas = window.document.createElement("canvas");
                if (null != this.canvas) {
                    var d = this.canvas.style;
                    d.setProperty("-webkit-transform", "translateZ(0)", null);
                    d.setProperty("transform", "translateZ(0)", null)
                } else
                    null != this.div && (d = this.div.style,
                    d.setProperty("-webkit-transform", "translate3D(0,0,0)", null),
                    d.setProperty("transform", "translate3D(0,0,0)", null),
                    d.position = "relative",
                    d.overflow = "hidden",
                    d.setProperty("-webkit-user-select", "none", null),
                    d.setProperty("-moz-user-select", "none", null),
                    d.setProperty("-ms-user-select", "none", null),
                    d.setProperty("-o-user-select", "none", null));
                0 == a.__width && 0 == a.__height && (null != c ? (a.__width = c.clientWidth,
                a.__height = c.clientHeight) : (a.__width = window.innerWidth,
                a.__height = window.innerHeight),
                this.cacheElementWidth = a.__width,
                this.cacheElementHeight = a.__height,
                this.resizeElement = !0);
                null != this.canvas ? (this.canvas.width = Math.round(a.__width * this.scale),
                this.canvas.height = Math.round(a.__height * this.scale),
                this.canvas.style.width = a.__width + "px",
                this.canvas.style.height = a.__height + "px") : (this.div.style.width = a.__width + "px",
                this.div.style.height = a.__height + "px");
                if (Object.prototype.hasOwnProperty.call(b, "resizable") && b.resizable || !Object.prototype.hasOwnProperty.call(b, "width") && 0 == this.setWidth && 0 == this.setHeight)
                    a.__resizable = !0;
                this.updateSize();
                if (null != c) {
                    null != this.canvas ? c != this.canvas && c.appendChild(this.canvas) : c.appendChild(this.div);
                    b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
                    for (d = 0; d < b.length; ) {
                        var f = b[d];
                        ++d;
                        c.addEventListener(f, m(this, this.handleMouseEvent), !0)
                    }
                    c.addEventListener("contextmenu", m(this, this.handleContextMenuEvent), !0);
                    c.addEventListener("dragstart", m(this, this.handleDragEvent), !0);
                    c.addEventListener("dragover", m(this, this.handleDragEvent), !0);
                    c.addEventListener("drop", m(this, this.handleDragEvent), !0);
                    c.addEventListener("touchstart", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchmove", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchend", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("touchcancel", m(this, this.handleTouchEvent), !0);
                    c.addEventListener("gamepadconnected", m(this, this.handleGamepadEvent), !0);
                    c.addEventListener("gamepaddisconnected", m(this, this.handleGamepadEvent), !0)
                }
                this.createContext();
                "webgl" == a.context.type && (this.canvas.addEventListener("webglcontextlost", m(this, this.handleContextEvent), !1),
                this.canvas.addEventListener("webglcontextrestored", m(this, this.handleContextEvent), !1))
            };
            h["lime._internal.backend.html5.HTML5Window"] = Ma;
            Ma.__name__ = "lime._internal.backend.html5.HTML5Window";
            Ma.prototype = {
                close: function() {
                    var a = this.parent.element;
                    if (null != a) {
                        null != this.canvas ? (a != this.canvas && a.removeChild(this.canvas),
                        this.canvas = null) : null != this.div && (a.removeChild(this.div),
                        this.div = null);
                        for (var b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" "), c = 0; c < b.length; ) {
                            var d = b[c];
                            ++c;
                            a.removeEventListener(d, m(this, this.handleMouseEvent), !0)
                        }
                        a.removeEventListener("contextmenu", m(this, this.handleContextMenuEvent), !0);
                        a.removeEventListener("dragstart", m(this, this.handleDragEvent), !0);
                        a.removeEventListener("dragover", m(this, this.handleDragEvent), !0);
                        a.removeEventListener("drop", m(this, this.handleDragEvent), !0);
                        a.removeEventListener("touchstart", m(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchmove", m(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchend", m(this, this.handleTouchEvent), !0);
                        a.removeEventListener("touchcancel", m(this, this.handleTouchEvent), !0);
                        a.removeEventListener("gamepadconnected", m(this, this.handleGamepadEvent), !0);
                        a.removeEventListener("gamepaddisconnected", m(this, this.handleGamepadEvent), !0)
                    }
                    this.parent.application.__removeWindow(this.parent)
                },
                createContext: function() {
                    var a = new ok
                      , b = this.parent.__attributes.context;
                    a.window = this.parent;
                    a.attributes = b;
                    if (null != this.div)
                        a.dom = this.div,
                        a.type = "dom",
                        a.version = "";
                    else if (null != this.canvas) {
                        var c = null
                          , d = "canvas" == this.renderType
                          , f = "opengl" == this.renderType || "opengles" == this.renderType || "webgl" == this.renderType
                          , g = !Object.prototype.hasOwnProperty.call(b, "version") || "1" != b.version
                          , k = !1;
                        if (f || !d && (!Object.prototype.hasOwnProperty.call(b, "hardware") || b.hardware)) {
                            d = Object.prototype.hasOwnProperty.call(b, "background") && null == b.background;
                            f = Object.prototype.hasOwnProperty.call(b, "colorDepth") ? b.colorDepth : 16;
                            var q = Object.prototype.hasOwnProperty.call(b, "antialiasing") && 0 < b.antialiasing
                              , p = Object.prototype.hasOwnProperty.call(b, "depth") ? b.depth : !0
                              , l = Object.prototype.hasOwnProperty.call(b, "stencil") && b.stencil;
                            b = Object.prototype.hasOwnProperty.call(b, "preserveDrawingBuffer") && b.preserveDrawingBuffer;
                            b = {
                                alpha: d || 16 < f,
                                antialias: q,
                                depth: p,
                                premultipliedAlpha: !0,
                                stencil: l,
                                preserveDrawingBuffer: b,
                                failIfMajorPerformanceCaveat: !1
                            };
                            d = ["webgl", "experimental-webgl"];
                            g && d.unshift("webgl2");
                            for (g = 0; g < d.length && (f = d[g],
                            ++g,
                            c = this.canvas.getContext(f, b),
                            null != c && "webgl2" == f && (k = !0),
                            null == c); )
                                ;
                        }
                        null == c ? (a.canvas2D = this.canvas.getContext("2d"),
                        a.type = "canvas",
                        a.version = "") : (a.webgl = Lc.fromWebGL2RenderContext(c),
                        k && (a.webgl2 = c),
                        null == cf.context && (cf.context = c,
                        cf.type = "webgl",
                        cf.version = k ? 2 : 1),
                        a.type = "webgl",
                        a.version = k ? "2" : "1")
                    }
                    this.parent.context = a
                },
                focusTextInput: function() {
                    var a = this;
                    this.__focusPending || (this.__focusPending = !0,
                    $f.delay(function() {
                        a.__focusPending = !1;
                        a.textInputEnabled && Ma.textInput.focus()
                    }, 20))
                },
                getFrameRate: function() {
                    return null == this.parent.application ? 0 : 0 > this.parent.application.__backend.framePeriod ? 60 : 1E3 == this.parent.application.__backend.framePeriod ? 0 : 1E3 / this.parent.application.__backend.framePeriod
                },
                handleContextEvent: function(a) {
                    switch (a.type) {
                    case "webglcontextlost":
                        a.cancelable && a.preventDefault();
                        this.parent.context = null;
                        this.parent.onRenderContextLost.dispatch();
                        break;
                    case "webglcontextrestored":
                        this.createContext(),
                        this.parent.onRenderContextRestored.dispatch(this.parent.context)
                    }
                },
                handleContextMenuEvent: function(a) {
                    (this.parent.onMouseUp.canceled || this.parent.onMouseDown.canceled) && a.cancelable && a.preventDefault()
                },
                handleCutOrCopyEvent: function(a) {
                    var b = zc.get_text();
                    null == b && (b = "");
                    a.clipboardData.setData("text/plain", b);
                    a.cancelable && a.preventDefault()
                },
                handleDragEvent: function(a) {
                    switch (a.type) {
                    case "dragover":
                        return a.preventDefault(),
                        !1;
                    case "dragstart":
                        if ("img" == xa.__cast(a.target, HTMLElement).nodeName.toLowerCase() && a.cancelable)
                            return a.preventDefault(),
                            !1;
                        break;
                    case "drop":
                        if (null != a.dataTransfer && 0 < a.dataTransfer.files.length)
                            return this.parent.onDropFile.dispatch(a.dataTransfer.files),
                            a.preventDefault(),
                            !1
                    }
                    return !0
                },
                handleFocusEvent: function(a) {
                    this.textInputEnabled && (null == a.relatedTarget || this.isDescendent(a.relatedTarget)) && this.focusTextInput()
                },
                handleGamepadEvent: function(a) {
                    switch (a.type) {
                    case "gamepadconnected":
                        mc.__connect(a.gamepad.index);
                        "standard" == a.gamepad.mapping && uc.__connect(a.gamepad.index);
                        break;
                    case "gamepaddisconnected":
                        mc.__disconnect(a.gamepad.index),
                        uc.__disconnect(a.gamepad.index)
                    }
                },
                handleInputEvent: function(a) {
                    this.imeCompositionActive || Ma.textInput.value == Ma.dummyCharacter || (a = P.replace(Ma.textInput.value, Ma.dummyCharacter, ""),
                    0 < a.length && this.parent.onTextInput.dispatch(a),
                    Ma.textInput.value = Ma.dummyCharacter)
                },
                handleMouseEvent: function(a) {
                    if ("wheel" != a.type) {
                        if (null != this.parent.element)
                            if (null != this.canvas) {
                                var b = this.canvas.getBoundingClientRect();
                                var c = this.parent.__width / b.width * (a.clientX - b.left);
                                b = this.parent.__height / b.height * (a.clientY - b.top)
                            } else
                                null != this.div ? (b = this.div.getBoundingClientRect(),
                                c = a.clientX - b.left,
                                b = a.clientY - b.top) : (b = this.parent.element.getBoundingClientRect(),
                                c = this.parent.__width / b.width * (a.clientX - b.left),
                                b = this.parent.__height / b.height * (a.clientY - b.top));
                        else
                            c = a.clientX,
                            b = a.clientY;
                        switch (a.type) {
                        case "mousedown":
                            a.currentTarget == this.parent.element && window.addEventListener("mouseup", m(this, this.handleMouseEvent));
                            this.parent.clickCount = a.detail;
                            this.parent.onMouseDown.dispatch(c, b, a.button);
                            this.parent.clickCount = 0;
                            this.parent.onMouseDown.canceled && a.cancelable && a.preventDefault();
                            break;
                        case "mouseenter":
                            a.target == this.parent.element && (this.parent.onEnter.dispatch(),
                            this.parent.onEnter.canceled && a.cancelable && a.preventDefault());
                            break;
                        case "mouseleave":
                            a.target == this.parent.element && (this.parent.onLeave.dispatch(),
                            this.parent.onLeave.canceled && a.cancelable && a.preventDefault());
                            break;
                        case "mousemove":
                            if (c != this.cacheMouseX || b != this.cacheMouseY)
                                this.parent.onMouseMove.dispatch(c, b),
                                this.parent.onMouseMoveRelative.dispatch(c - this.cacheMouseX, b - this.cacheMouseY),
                                (this.parent.onMouseMove.canceled || this.parent.onMouseMoveRelative.canceled) && a.cancelable && a.preventDefault();
                            break;
                        case "mouseup":
                            window.removeEventListener("mouseup", m(this, this.handleMouseEvent)),
                            a.currentTarget == this.parent.element && a.stopPropagation(),
                            this.parent.clickCount = a.detail,
                            this.parent.onMouseUp.dispatch(c, b, a.button),
                            this.parent.clickCount = 0,
                            this.parent.onMouseUp.canceled && a.cancelable && a.preventDefault()
                        }
                        this.cacheMouseX = c;
                        this.cacheMouseY = b
                    } else {
                        switch (a.deltaMode) {
                        case 0:
                            c = Pd.PIXELS;
                            break;
                        case 1:
                            c = Pd.LINES;
                            break;
                        case 2:
                            c = Pd.PAGES;
                            break;
                        default:
                            c = Pd.UNKNOWN
                        }
                        this.parent.onMouseWheel.dispatch(a.deltaX, -a.deltaY, c);
                        this.parent.onMouseWheel.canceled && a.cancelable && a.preventDefault()
                    }
                },
                handlePasteEvent: function(a) {
                    if (-1 < a.clipboardData.types.indexOf("text/plain")) {
                        var b = a.clipboardData.getData("text/plain");
                        zc.set_text(b);
                        this.textInputEnabled && this.parent.onTextInput.dispatch(b);
                        a.cancelable && a.preventDefault()
                    }
                },
                handleResizeEvent: function(a) {
                    this.primaryTouch = null;
                    this.updateSize()
                },
                handleTouchEvent: function(a) {
                    a.cancelable && a.preventDefault();
                    var b = null;
                    null != this.parent.element && (b = null != this.canvas ? this.canvas.getBoundingClientRect() : null != this.div ? this.div.getBoundingClientRect() : this.parent.element.getBoundingClientRect());
                    var c = this.setWidth
                      , d = this.setHeight;
                    if (0 == c || 0 == d)
                        null != b ? (c = b.width,
                        d = b.height) : d = c = 1;
                    for (var f, g, k, q, p, l = 0, h = a.changedTouches; l < h.length; ) {
                        var n = h[l];
                        ++l;
                        null != b ? (g = c / b.width * (n.clientX - b.left),
                        k = d / b.height * (n.clientY - b.top)) : (g = n.clientX,
                        k = n.clientY);
                        if ("touchstart" == a.type)
                            f = this.unusedTouchesPool.pop(),
                            null == f ? f = new ec(g / c,k / d,n.identifier,0,0,n.force,this.parent.id) : (f.x = g / c,
                            f.y = k / d,
                            f.id = n.identifier,
                            f.dx = 0,
                            f.dy = 0,
                            f.pressure = n.force,
                            f.device = this.parent.id),
                            this.currentTouches.h[n.identifier] = f,
                            ec.onStart.dispatch(f),
                            null == this.primaryTouch && (this.primaryTouch = f),
                            f == this.primaryTouch && this.parent.onMouseDown.dispatch(g, k, 0);
                        else if (f = this.currentTouches.h[n.identifier],
                        null != f)
                            switch (q = f.x,
                            p = f.y,
                            f.x = g / c,
                            f.y = k / d,
                            f.dx = f.x - q,
                            f.dy = f.y - p,
                            f.pressure = n.force,
                            a.type) {
                            case "touchcancel":
                                ec.onCancel.dispatch(f);
                                this.currentTouches.remove(n.identifier);
                                this.unusedTouchesPool.add(f);
                                f == this.primaryTouch && (this.primaryTouch = null);
                                break;
                            case "touchend":
                                ec.onEnd.dispatch(f);
                                this.currentTouches.remove(n.identifier);
                                this.unusedTouchesPool.add(f);
                                f == this.primaryTouch && (this.parent.onMouseUp.dispatch(g, k, 0),
                                this.primaryTouch = null);
                                break;
                            case "touchmove":
                                ec.onMove.dispatch(f),
                                f == this.primaryTouch && this.parent.onMouseMove.dispatch(g, k)
                            }
                    }
                },
                isDescendent: function(a) {
                    if (a == this.parent.element)
                        return !0;
                    for (; null != a; ) {
                        if (a.parentNode == this.parent.element)
                            return !0;
                        a = a.parentNode
                    }
                    return !1
                },
                setClipboard: function(a) {
                    null == Ma.textArea && (Ma.textArea = window.document.createElement("textarea"),
                    Ma.textArea.style.height = "0px",
                    Ma.textArea.style.left = "-100px",
                    Ma.textArea.style.opacity = "0",
                    Ma.textArea.style.position = "fixed",
                    Ma.textArea.style.top = "-100px",
                    Ma.textArea.style.width = "0px",
                    window.document.body.appendChild(Ma.textArea));
                    Ma.textArea.value = a;
                    Ma.textArea.focus();
                    Ma.textArea.select();
                    window.document.queryCommandEnabled("copy") && window.document.execCommand("copy");
                    this.textInputEnabled && this.focusTextInput()
                },
                setCursor: function(a) {
                    if (this.cursor != a) {
                        if (null == a)
                            this.parent.element.style.cursor = "none";
                        else {
                            switch (a._hx_index) {
                            case 0:
                                var b = "default";
                                break;
                            case 1:
                                b = "crosshair";
                                break;
                            case 3:
                                b = "move";
                                break;
                            case 4:
                                b = "pointer";
                                break;
                            case 5:
                                b = "nesw-resize";
                                break;
                            case 6:
                                b = "ns-resize";
                                break;
                            case 7:
                                b = "nwse-resize";
                                break;
                            case 8:
                                b = "ew-resize";
                                break;
                            case 9:
                                b = "text";
                                break;
                            case 10:
                                b = "wait";
                                break;
                            case 11:
                                b = "wait";
                                break;
                            default:
                                b = "auto"
                            }
                            this.parent.element.style.cursor = b
                        }
                        this.cursor = a
                    }
                    return this.cursor
                },
                setTextInputEnabled: function(a) {
                    if (a) {
                        if (null == Ma.textInput) {
                            Ma.textInput = window.document.createElement("input");
                            var b = 0 <= y.navigator.userAgent.indexOf("Android") ? "password" : "text";
                            Ma.textInput.type = b;
                            Ma.textInput.style.position = "absolute";
                            Ma.textInput.style.opacity = "0";
                            Ma.textInput.style.color = "transparent";
                            Ma.textInput.value = Ma.dummyCharacter;
                            Ma.textInput.autocapitalize = "off";
                            Ma.textInput.autocorrect = "off";
                            Ma.textInput.autocomplete = "off";
                            Ma.textInput.style.left = "0px";
                            Ma.textInput.style.top = "50%";
                            (new Ta("(iPad|iPhone|iPod).*OS 8_","gi")).match(window.navigator.userAgent) ? (Ma.textInput.style.fontSize = "0px",
                            Ma.textInput.style.width = "0px",
                            Ma.textInput.style.height = "0px") : (Ma.textInput.style.width = "1px",
                            Ma.textInput.style.height = "1px");
                            Ma.textInput.style.pointerEvents = "none";
                            Ma.textInput.style.zIndex = "-10000000"
                        }
                        null == Ma.textInput.parentNode && this.parent.element.appendChild(Ma.textInput);
                        this.textInputEnabled || (Ma.textInput.addEventListener("input", m(this, this.handleInputEvent), !0),
                        Ma.textInput.addEventListener("blur", m(this, this.handleFocusEvent), !0),
                        Ma.textInput.addEventListener("cut", m(this, this.handleCutOrCopyEvent), !0),
                        Ma.textInput.addEventListener("copy", m(this, this.handleCutOrCopyEvent), !0),
                        Ma.textInput.addEventListener("paste", m(this, this.handlePasteEvent), !0),
                        Ma.textInput.addEventListener("compositionstart", m(this, this.handleCompositionstartEvent), !0),
                        Ma.textInput.addEventListener("compositionend", m(this, this.handleCompositionendEvent), !0));
                        Ma.textInput.focus();
                        Ma.textInput.select()
                    } else
                        null != Ma.textInput && (Ma.textInput.blur(),
                        Ma.textInput.removeEventListener("input", m(this, this.handleInputEvent), !0),
                        Ma.textInput.removeEventListener("blur", m(this, this.handleFocusEvent), !0),
                        Ma.textInput.removeEventListener("cut", m(this, this.handleCutOrCopyEvent), !0),
                        Ma.textInput.removeEventListener("copy", m(this, this.handleCutOrCopyEvent), !0),
                        Ma.textInput.removeEventListener("paste", m(this, this.handlePasteEvent), !0),
                        Ma.textInput.removeEventListener("compositionstart", m(this, this.handleCompositionstartEvent), !0),
                        Ma.textInput.removeEventListener("compositionend", m(this, this.handleCompositionendEvent), !0));
                    return this.textInputEnabled = a
                },
                setTextInputRect: function(a) {
                    return this.textInputRect = a
                },
                handleCompositionstartEvent: function(a) {
                    this.imeCompositionActive = !0
                },
                handleCompositionendEvent: function(a) {
                    this.imeCompositionActive = !1;
                    this.handleInputEvent(a)
                },
                updateSize: function() {
                    if (this.parent.__resizable) {
                        if (null != this.parent.element) {
                            var a = this.parent.element.clientWidth;
                            var b = this.parent.element.clientHeight
                        } else
                            a = window.innerWidth,
                            b = window.innerHeight;
                        if (a != this.cacheElementWidth || b != this.cacheElementHeight) {
                            this.cacheElementWidth = a;
                            this.cacheElementHeight = b;
                            var c = this.resizeElement || 0 == this.setWidth && 0 == this.setHeight;
                            if (null != this.parent.element && (null == this.div || null != this.div && c))
                                if (c) {
                                    if (this.parent.__width != a || this.parent.__height != b)
                                        this.parent.__width = a,
                                        this.parent.__height = b,
                                        null != this.canvas ? this.parent.element != this.canvas && (this.canvas.width = Math.round(a * this.scale),
                                        this.canvas.height = Math.round(b * this.scale),
                                        this.canvas.style.width = a + "px",
                                        this.canvas.style.height = b + "px") : (this.div.style.width = a + "px",
                                        this.div.style.height = b + "px"),
                                        this.parent.onResize.dispatch(a, b)
                                } else {
                                    c = 0 != this.setWidth ? a / this.setWidth : 1;
                                    var d = 0 != this.setHeight ? b / this.setHeight : 1
                                      , f = a
                                      , g = b
                                      , k = 0
                                      , q = 0;
                                    c < d ? (g = Math.floor(this.setHeight * c),
                                    q = Math.floor((b - g) / 2)) : (f = Math.floor(this.setWidth * d),
                                    k = Math.floor((a - f) / 2));
                                    null != this.canvas ? this.parent.element != this.canvas && (this.canvas.style.width = f + "px",
                                    this.canvas.style.height = g + "px",
                                    this.canvas.style.marginLeft = k + "px",
                                    this.canvas.style.marginTop = q + "px") : (this.div.style.width = f + "px",
                                    this.div.style.height = g + "px",
                                    this.div.style.marginLeft = k + "px",
                                    this.div.style.marginTop = q + "px")
                                }
                        }
                    }
                },
                __class__: Ma
            };
            var Yk = function() {};
            h["lime._internal.format.BMP"] = Yk;
            Yk.__name__ = "lime._internal.format.BMP";
            Yk.encode = function(a, b) {
                if (a.get_premultiplied() || 0 != a.get_format())
                    a = a.clone(),
                    a.set_premultiplied(!1),
                    a.set_format(0);
                null == b && (b = qe.RGB);
                var c = 14
                  , d = 40
                  , f = a.width * a.height * 4;
                if (null != b)
                    switch (b._hx_index) {
                    case 0:
                        f = (3 * a.width + 3 * a.width % 4) * a.height;
                        break;
                    case 1:
                        d = 108;
                        break;
                    case 2:
                        c = 0,
                        f += a.width * a.height
                    }
                var g = new xb(new ArrayBuffer(c + d + f))
                  , k = 0;
                0 < c && (g.b[k++] = 66,
                g.b[k++] = 77,
                g.setInt32(k, g.length),
                k += 4,
                g.setUInt16(k, 0),
                k += 2,
                g.setUInt16(k, 0),
                k += 2,
                g.setInt32(k, c + d),
                k += 4);
                g.setInt32(k, d);
                k += 4;
                g.setInt32(k, a.width);
                k += 4;
                g.setInt32(k, b == qe.ICO ? 2 * a.height : a.height);
                k += 4;
                g.setUInt16(k, 1);
                k += 2;
                g.setUInt16(k, b == qe.RGB ? 24 : 32);
                k += 2;
                g.setInt32(k, b == qe.BITFIELD ? 3 : 0);
                k += 4;
                g.setInt32(k, f);
                k += 4;
                g.setInt32(k, 11824);
                k += 4;
                g.setInt32(k, 11824);
                k += 4;
                g.setInt32(k, 0);
                k += 4;
                g.setInt32(k, 0);
                k += 4;
                if (b == qe.BITFIELD)
                    for (g.setInt32(k, 16711680),
                    k += 4,
                    g.setInt32(k, 65280),
                    k += 4,
                    g.setInt32(k, 255),
                    k += 4,
                    g.setInt32(k, -16777216),
                    k += 4,
                    g.b[k++] = 32,
                    g.b[k++] = 110,
                    g.b[k++] = 105,
                    g.b[k++] = 87,
                    c = 0; 48 > c; )
                        c++,
                        g.b[k++] = 0;
                d = a.getPixels(new Dd(0,0,a.width,a.height), 1);
                if (null != b)
                    switch (b._hx_index) {
                    case 0:
                        c = 0;
                        for (b = a.height; c < b; ) {
                            var q = c++;
                            q = 4 * (a.height - 1 - q) * a.width;
                            for (var p = 0, l = a.width; p < l; ) {
                                p++;
                                q++;
                                var h = d.b[q++];
                                var n = d.b[q++];
                                var u = d.b[q++];
                                g.b[k++] = u & 255;
                                g.b[k++] = n & 255;
                                g.b[k++] = h & 255
                            }
                            f = 0;
                            for (var w = 3 * a.width % 4; f < w; )
                                f++,
                                g.b[k++] = 0
                        }
                        break;
                    case 1:
                        c = 0;
                        for (b = a.height; c < b; )
                            for (q = c++,
                            q = 4 * (a.height - 1 - q) * a.width,
                            p = 0,
                            l = a.width; p < l; ) {
                                p++;
                                var r = d.b[q++];
                                h = d.b[q++];
                                n = d.b[q++];
                                u = d.b[q++];
                                g.b[k++] = u & 255;
                                g.b[k++] = n & 255;
                                g.b[k++] = h & 255;
                                g.b[k++] = r & 255
                            }
                        break;
                    case 2:
                        f = new xb(new ArrayBuffer(a.width * a.height));
                        c = w = 0;
                        for (b = a.height; c < b; )
                            for (q = c++,
                            q = 4 * (a.height - 1 - q) * a.width,
                            p = 0,
                            l = a.width; p < l; )
                                p++,
                                r = d.b[q++],
                                h = d.b[q++],
                                n = d.b[q++],
                                u = d.b[q++],
                                g.b[k++] = u & 255,
                                g.b[k++] = n & 255,
                                g.b[k++] = h & 255,
                                g.b[k++] = r & 255,
                                f.b[w++] = 0;
                        g.blit(k, f, 0, a.width * a.height)
                    }
                return g
            }
            ;
            var qe = N["lime._internal.format.BMPType"] = {
                __ename__: "lime._internal.format.BMPType",
                __constructs__: null,
                RGB: {
                    _hx_name: "RGB",
                    _hx_index: 0,
                    __enum__: "lime._internal.format.BMPType",
                    toString: r
                },
                BITFIELD: {
                    _hx_name: "BITFIELD",
                    _hx_index: 1,
                    __enum__: "lime._internal.format.BMPType",
                    toString: r
                },
                ICO: {
                    _hx_name: "ICO",
                    _hx_index: 2,
                    __enum__: "lime._internal.format.BMPType",
                    toString: r
                }
            };
            qe.__constructs__ = [qe.RGB, qe.BITFIELD, qe.ICO];
            qe.__empty_constructs__ = [qe.RGB, qe.BITFIELD, qe.ICO];
            var De = function() {};
            h["lime._internal.format.Base64"] = De;
            De.__name__ = "lime._internal.format.Base64";
            De.encode = function(a) {
                var b = []
                  , c = De.DICTIONARY
                  , d = De.EXTENDED_DICTIONARY
                  , f = a.length
                  , g = Math.floor(f / 3)
                  , k = 2 * g;
                b.length = 2 * Math.ceil(f / 3);
                for (var q = 0, p = 0, l; p < k; )
                    l = a.b[q] << 16 | a.b[q + 1] << 8 | a.b[q + 2],
                    b[p] = d[l >> 12 & 4095],
                    b[p + 1] = d[l & 4095],
                    q += 3,
                    p += 2;
                switch (f - 3 * g) {
                case 1:
                    l = a.b[q] << 16;
                    b[p] = d[l >> 12 & 4095];
                    b[p + 1] = "==";
                    break;
                case 2:
                    l = a.b[q] << 16 | a.b[q + 1] << 8,
                    b[p] = d[l >> 12 & 4095],
                    b[p + 1] = c[l >> 6 & 63] + "="
                }
                return b.join("")
            }
            ;
            var dl = function() {};
            h["lime._internal.format.Deflate"] = dl;
            dl.__name__ = "lime._internal.format.Deflate";
            dl.decompress = function(a) {
                a = pako.inflateRaw(a.b.bufferValue);
                return xb.ofData(a)
            }
            ;
            var el = function() {};
            h["lime._internal.format.GZip"] = el;
            el.__name__ = "lime._internal.format.GZip";
            el.decompress = function(a) {
                a = pako.ungzip(a.b.bufferValue);
                return xb.ofData(a)
            }
            ;
            var Zk = function() {};
            h["lime._internal.format.JPEG"] = Zk;
            Zk.__name__ = "lime._internal.format.JPEG";
            Zk.encode = function(a, b) {
                if (a.get_premultiplied() || 0 != a.get_format())
                    a = a.clone(),
                    a.set_premultiplied(!1),
                    a.set_format(0);
                Na.convertToCanvas(a, !1);
                if (null != a.buffer.__srcCanvas) {
                    a = a.buffer.__srcCanvas.toDataURL("image/jpeg", b / 100);
                    a = window.atob(a.split(";base64,")[1]);
                    b = new xb(new ArrayBuffer(a.length));
                    for (var c = 0, d = a.length; c < d; ) {
                        var f = c++;
                        b.b[f] = Q.cca(a, f) & 255
                    }
                    return b
                }
                return null
            }
            ;
            var fl = function() {};
            h["lime._internal.format.LZMA"] = fl;
            fl.__name__ = "lime._internal.format.LZMA";
            fl.decompress = function(a) {
                var b = LZMA.decompress;
                a = a.b.bufferValue;
                a = null != a ? new Uint8Array(a,0) : null;
                b = b(a);
                return "string" == typeof b ? xb.ofString(b) : xb.ofData(b)
            }
            ;
            var ck = function() {};
            h["lime._internal.format.PNG"] = ck;
            ck.__name__ = "lime._internal.format.PNG";
            ck.encode = function(a) {
                if (a.get_premultiplied() || 0 != a.get_format())
                    a = a.clone(),
                    a.set_premultiplied(!1),
                    a.set_format(0);
                Na.convertToCanvas(a, !1);
                if (null != a.buffer.__srcCanvas) {
                    a = a.buffer.__srcCanvas.toDataURL("image/png");
                    a = window.atob(a.split(";base64,")[1]);
                    for (var b = new xb(new ArrayBuffer(a.length)), c = 0, d = a.length; c < d; ) {
                        var f = c++;
                        b.b[f] = Q.cca(a, f) & 255
                    }
                    return b
                }
                return null
            }
            ;
            var gl = function() {};
            h["lime._internal.format.Zlib"] = gl;
            gl.__name__ = "lime._internal.format.Zlib";
            gl.decompress = function(a) {
                a = pako.inflate(a.b.bufferValue);
                return xb.ofData(a)
            }
            ;
            var bc = function() {};
            h["lime._internal.graphics.ImageDataUtil"] = bc;
            bc.__name__ = "lime._internal.graphics.ImageDataUtil";
            bc.colorTransform = function(a, b, c) {
                var d = a.buffer.data;
                if (null != d) {
                    var f = a.buffer.format
                      , g = a.buffer.premultiplied;
                    b = new Ke(a,b);
                    var k = Pc.getAlphaTable(c)
                      , q = Pc.getRedTable(c)
                      , p = Pc.getGreenTable(c);
                    c = Pc.getBlueTable(c);
                    for (var l, h, n = 0, u = 0, w = b.height; u < w; ) {
                        l = u++;
                        l = b.byteOffset + b.stride * l;
                        for (var r = 0, C = b.width; r < C; ) {
                            h = r++;
                            h = l + 4 * h;
                            var x = f
                              , m = g;
                            null == m && (m = !1);
                            null == x && (x = 0);
                            switch (x) {
                            case 0:
                                n = (d[h] & 255) << 24 | (d[h + 1] & 255) << 16 | (d[h + 2] & 255) << 8 | d[h + 3] & 255;
                                break;
                            case 1:
                                n = (d[h + 1] & 255) << 24 | (d[h + 2] & 255) << 16 | (d[h + 3] & 255) << 8 | d[h] & 255;
                                break;
                            case 2:
                                n = (d[h + 2] & 255) << 24 | (d[h + 1] & 255) << 16 | (d[h] & 255) << 8 | d[h + 3] & 255
                            }
                            m && 0 != (n & 255) && 255 != (n & 255) && (R.unmult = 255 / (n & 255),
                            n = (R.__clamp[Math.round((n >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((n >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((n >>> 8 & 255) * R.unmult)] & 255) << 8 | n & 255);
                            n = (q[n >>> 24 & 255] & 255) << 24 | (p[n >>> 16 & 255] & 255) << 16 | (c[n >>> 8 & 255] & 255) << 8 | k[n & 255] & 255;
                            x = f;
                            m = g;
                            null == m && (m = !1);
                            null == x && (x = 0);
                            m && (0 == (n & 255) ? 0 != n && (n = 0) : 255 != (n & 255) && (R.a16 = R.__alpha16[n & 255],
                            n = ((n >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((n >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((n >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | n & 255));
                            switch (x) {
                            case 0:
                                d[h] = n >>> 24 & 255;
                                d[h + 1] = n >>> 16 & 255;
                                d[h + 2] = n >>> 8 & 255;
                                d[h + 3] = n & 255;
                                break;
                            case 1:
                                d[h] = n & 255;
                                d[h + 1] = n >>> 24 & 255;
                                d[h + 2] = n >>> 16 & 255;
                                d[h + 3] = n >>> 8 & 255;
                                break;
                            case 2:
                                d[h] = n >>> 8 & 255,
                                d[h + 1] = n >>> 16 & 255,
                                d[h + 2] = n >>> 24 & 255,
                                d[h + 3] = n & 255
                            }
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            }
            ;
            bc.copyChannel = function(a, b, c, d, f, g) {
                switch (g._hx_index) {
                case 0:
                    var k = 0;
                    break;
                case 1:
                    k = 1;
                    break;
                case 2:
                    k = 2;
                    break;
                case 3:
                    k = 3
                }
                switch (f._hx_index) {
                case 0:
                    var q = 0;
                    break;
                case 1:
                    q = 1;
                    break;
                case 2:
                    q = 2;
                    break;
                case 3:
                    q = 3
                }
                f = b.buffer.data;
                g = a.buffer.data;
                if (null != f && null != g) {
                    c = new Ke(b,c);
                    d = new Ke(a,new Dd(d.x,d.y,c.width,c.height));
                    var p = b.buffer.format
                      , l = a.buffer.format;
                    b = b.buffer.premultiplied;
                    for (var h = a.buffer.premultiplied, n, u, w = 0, r = 0, C = 0, x = 0, m = d.height; x < m; ) {
                        u = x++;
                        n = c.byteOffset + c.stride * u;
                        u = d.byteOffset + d.stride * u;
                        for (var z = 0, K = d.width; z < K; ) {
                            z++;
                            var A = p
                              , I = b;
                            null == I && (I = !1);
                            null == A && (A = 0);
                            switch (A) {
                            case 0:
                                w = (f[n] & 255) << 24 | (f[n + 1] & 255) << 16 | (f[n + 2] & 255) << 8 | f[n + 3] & 255;
                                break;
                            case 1:
                                w = (f[n + 1] & 255) << 24 | (f[n + 2] & 255) << 16 | (f[n + 3] & 255) << 8 | f[n] & 255;
                                break;
                            case 2:
                                w = (f[n + 2] & 255) << 24 | (f[n + 1] & 255) << 16 | (f[n] & 255) << 8 | f[n + 3] & 255
                            }
                            I && 0 != (w & 255) && 255 != (w & 255) && (R.unmult = 255 / (w & 255),
                            w = (R.__clamp[Math.round((w >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((w >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((w >>> 8 & 255) * R.unmult)] & 255) << 8 | w & 255);
                            A = l;
                            I = h;
                            null == I && (I = !1);
                            null == A && (A = 0);
                            switch (A) {
                            case 0:
                                r = (g[u] & 255) << 24 | (g[u + 1] & 255) << 16 | (g[u + 2] & 255) << 8 | g[u + 3] & 255;
                                break;
                            case 1:
                                r = (g[u + 1] & 255) << 24 | (g[u + 2] & 255) << 16 | (g[u + 3] & 255) << 8 | g[u] & 255;
                                break;
                            case 2:
                                r = (g[u + 2] & 255) << 24 | (g[u + 1] & 255) << 16 | (g[u] & 255) << 8 | g[u + 3] & 255
                            }
                            I && 0 != (r & 255) && 255 != (r & 255) && (R.unmult = 255 / (r & 255),
                            r = (R.__clamp[Math.round((r >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((r >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((r >>> 8 & 255) * R.unmult)] & 255) << 8 | r & 255);
                            switch (q) {
                            case 0:
                                C = w >>> 24 & 255;
                                break;
                            case 1:
                                C = w >>> 16 & 255;
                                break;
                            case 2:
                                C = w >>> 8 & 255;
                                break;
                            case 3:
                                C = w & 255
                            }
                            switch (k) {
                            case 0:
                                r = (C & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                                break;
                            case 1:
                                r = (r >>> 24 & 255) << 24 | (C & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                                break;
                            case 2:
                                r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (C & 255) << 8 | r & 255;
                                break;
                            case 3:
                                r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | C & 255
                            }
                            A = l;
                            I = h;
                            null == I && (I = !1);
                            null == A && (A = 0);
                            I && (0 == (r & 255) ? 0 != r && (r = 0) : 255 != (r & 255) && (R.a16 = R.__alpha16[r & 255],
                            r = ((r >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((r >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((r >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | r & 255));
                            switch (A) {
                            case 0:
                                g[u] = r >>> 24 & 255;
                                g[u + 1] = r >>> 16 & 255;
                                g[u + 2] = r >>> 8 & 255;
                                g[u + 3] = r & 255;
                                break;
                            case 1:
                                g[u] = r & 255;
                                g[u + 1] = r >>> 24 & 255;
                                g[u + 2] = r >>> 16 & 255;
                                g[u + 3] = r >>> 8 & 255;
                                break;
                            case 2:
                                g[u] = r >>> 8 & 255,
                                g[u + 1] = r >>> 16 & 255,
                                g[u + 2] = r >>> 24 & 255,
                                g[u + 3] = r & 255
                            }
                            n += 4;
                            u += 4
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            }
            ;
            bc.copyPixels = function(a, b, c, d, f, g, k) {
                null == k && (k = !1);
                if (a.width == b.width && a.height == b.height && c.width == b.width && c.height == b.height && 0 == c.x && 0 == c.y && 0 == d.x && 0 == d.y && null == f && null == g && 0 == k && a.get_format() == b.get_format())
                    a.buffer.data.set(b.buffer.data);
                else {
                    var q = b.buffer.data
                      , p = a.buffer.data;
                    if (null == q || null == p)
                        return;
                    c = new Ke(b,c);
                    var l = new Dd(d.x,d.y,c.width,c.height);
                    l = new Ke(a,l);
                    var h = b.buffer.format
                      , n = a.buffer.format
                      , u = 0
                      , w = 0
                      , r = b.buffer.premultiplied
                      , C = a.buffer.premultiplied
                      , x = b.buffer.bitsPerPixel / 8 | 0
                      , m = a.buffer.bitsPerPixel / 8 | 0
                      , z = null != f && f.get_transparent()
                      , K = k || z && !a.get_transparent() || !k && !a.get_transparent() && b.get_transparent();
                    if (z)
                        if (m = f.buffer.data,
                        b = f.buffer.format,
                        k = 0,
                        f = new Ke(f,new Dd(c.x + (null == g ? 0 : g.x),c.y + (null == g ? 0 : g.y),c.width,c.height)),
                        l.clip(d.x | 0, d.y | 0, f.width, f.height),
                        K)
                            for (K = 0,
                            x = l.height; K < x; )
                                for (z = K++,
                                d = c.byteOffset + c.stride * z,
                                g = l.byteOffset + l.stride * z,
                                z = f.byteOffset + f.stride * z,
                                t = 0,
                                v = l.width; t < v; ) {
                                    t++;
                                    var A = h;
                                    var I = r;
                                    null == I && (I = !1);
                                    null == A && (A = 0);
                                    switch (A) {
                                    case 0:
                                        u = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                        break;
                                    case 1:
                                        u = (q[d + 1] & 255) << 24 | (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                        break;
                                    case 2:
                                        u = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                    }
                                    I && 0 != (u & 255) && 255 != (u & 255) && (R.unmult = 255 / (u & 255),
                                    u = (R.__clamp[Math.round((u >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((u >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((u >>> 8 & 255) * R.unmult)] & 255) << 8 | u & 255);
                                    A = n;
                                    I = C;
                                    null == I && (I = !1);
                                    null == A && (A = 0);
                                    switch (A) {
                                    case 0:
                                        w = (p[g] & 255) << 24 | (p[g + 1] & 255) << 16 | (p[g + 2] & 255) << 8 | p[g + 3] & 255;
                                        break;
                                    case 1:
                                        w = (p[g + 1] & 255) << 24 | (p[g + 2] & 255) << 16 | (p[g + 3] & 255) << 8 | p[g] & 255;
                                        break;
                                    case 2:
                                        w = (p[g + 2] & 255) << 24 | (p[g + 1] & 255) << 16 | (p[g] & 255) << 8 | p[g + 3] & 255
                                    }
                                    I && 0 != (w & 255) && 255 != (w & 255) && (R.unmult = 255 / (w & 255),
                                    w = (R.__clamp[Math.round((w >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((w >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((w >>> 8 & 255) * R.unmult)] & 255) << 8 | w & 255);
                                    A = b;
                                    I = !1;
                                    null == I && (I = !1);
                                    null == A && (A = 0);
                                    switch (A) {
                                    case 0:
                                        k = (m[z] & 255) << 24 | (m[z + 1] & 255) << 16 | (m[z + 2] & 255) << 8 | m[z + 3] & 255;
                                        break;
                                    case 1:
                                        k = (m[z + 1] & 255) << 24 | (m[z + 2] & 255) << 16 | (m[z + 3] & 255) << 8 | m[z] & 255;
                                        break;
                                    case 2:
                                        k = (m[z + 2] & 255) << 24 | (m[z + 1] & 255) << 16 | (m[z] & 255) << 8 | m[z + 3] & 255
                                    }
                                    I && 0 != (k & 255) && 255 != (k & 255) && (R.unmult = 255 / (k & 255),
                                    k = (R.__clamp[Math.round((k >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((k >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((k >>> 8 & 255) * R.unmult)] & 255) << 8 | k & 255);
                                    I = (k & 255) / 255 * ((u & 255) / 255);
                                    if (0 < I) {
                                        var B = (w & 255) / 255;
                                        var N = 1 - I;
                                        A = I + B * N;
                                        D = R.__clamp[Math.round(((u >>> 24 & 255) * I + (w >>> 24 & 255) * B * N) / A)];
                                        w = (D & 255) << 24 | (w >>> 16 & 255) << 16 | (w >>> 8 & 255) << 8 | w & 255;
                                        D = R.__clamp[Math.round(((u >>> 16 & 255) * I + (w >>> 16 & 255) * B * N) / A)];
                                        w = (w >>> 24 & 255) << 24 | (D & 255) << 16 | (w >>> 8 & 255) << 8 | w & 255;
                                        I = R.__clamp[Math.round(((u >>> 8 & 255) * I + (w >>> 8 & 255) * B * N) / A)];
                                        w = (w >>> 24 & 255) << 24 | (w >>> 16 & 255) << 16 | (I & 255) << 8 | w & 255;
                                        A = R.__clamp[Math.round(255 * A)];
                                        w = (w >>> 24 & 255) << 24 | (w >>> 16 & 255) << 16 | (w >>> 8 & 255) << 8 | A & 255;
                                        A = n;
                                        I = C;
                                        null == I && (I = !1);
                                        null == A && (A = 0);
                                        I && (0 == (w & 255) ? 0 != w && (w = 0) : 255 != (w & 255) && (R.a16 = R.__alpha16[w & 255],
                                        w = ((w >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((w >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((w >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | w & 255));
                                        switch (A) {
                                        case 0:
                                            p[g] = w >>> 24 & 255;
                                            p[g + 1] = w >>> 16 & 255;
                                            p[g + 2] = w >>> 8 & 255;
                                            p[g + 3] = w & 255;
                                            break;
                                        case 1:
                                            p[g] = w & 255;
                                            p[g + 1] = w >>> 24 & 255;
                                            p[g + 2] = w >>> 16 & 255;
                                            p[g + 3] = w >>> 8 & 255;
                                            break;
                                        case 2:
                                            p[g] = w >>> 8 & 255,
                                            p[g + 1] = w >>> 16 & 255,
                                            p[g + 2] = w >>> 24 & 255,
                                            p[g + 3] = w & 255
                                        }
                                    }
                                    d += 4;
                                    g += 4;
                                    z += 4
                                }
                        else
                            for (K = 0,
                            x = l.height; K < x; )
                                for (z = K++,
                                d = c.byteOffset + c.stride * z,
                                g = l.byteOffset + l.stride * z,
                                z = f.byteOffset + f.stride * z,
                                t = 0,
                                v = l.width; t < v; ) {
                                    t++;
                                    A = h;
                                    I = r;
                                    null == I && (I = !1);
                                    null == A && (A = 0);
                                    switch (A) {
                                    case 0:
                                        u = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                        break;
                                    case 1:
                                        u = (q[d + 1] & 255) << 24 | (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                        break;
                                    case 2:
                                        u = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                    }
                                    I && 0 != (u & 255) && 255 != (u & 255) && (R.unmult = 255 / (u & 255),
                                    u = (R.__clamp[Math.round((u >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((u >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((u >>> 8 & 255) * R.unmult)] & 255) << 8 | u & 255);
                                    A = b;
                                    I = !1;
                                    null == I && (I = !1);
                                    null == A && (A = 0);
                                    switch (A) {
                                    case 0:
                                        k = (m[z] & 255) << 24 | (m[z + 1] & 255) << 16 | (m[z + 2] & 255) << 8 | m[z + 3] & 255;
                                        break;
                                    case 1:
                                        k = (m[z + 1] & 255) << 24 | (m[z + 2] & 255) << 16 | (m[z + 3] & 255) << 8 | m[z] & 255;
                                        break;
                                    case 2:
                                        k = (m[z + 2] & 255) << 24 | (m[z + 1] & 255) << 16 | (m[z] & 255) << 8 | m[z + 3] & 255
                                    }
                                    I && 0 != (k & 255) && 255 != (k & 255) && (R.unmult = 255 / (k & 255),
                                    k = (R.__clamp[Math.round((k >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((k >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((k >>> 8 & 255) * R.unmult)] & 255) << 8 | k & 255);
                                    D = Math.round((k & 255) / 255 * (u & 255));
                                    u = (u >>> 24 & 255) << 24 | (u >>> 16 & 255) << 16 | (u >>> 8 & 255) << 8 | D & 255;
                                    A = n;
                                    I = C;
                                    null == I && (I = !1);
                                    null == A && (A = 0);
                                    I && (0 == (u & 255) ? 0 != u && (u = 0) : 255 != (u & 255) && (R.a16 = R.__alpha16[u & 255],
                                    u = ((u >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((u >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((u >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | u & 255));
                                    switch (A) {
                                    case 0:
                                        p[g] = u >>> 24 & 255;
                                        p[g + 1] = u >>> 16 & 255;
                                        p[g + 2] = u >>> 8 & 255;
                                        p[g + 3] = u & 255;
                                        break;
                                    case 1:
                                        p[g] = u & 255;
                                        p[g + 1] = u >>> 24 & 255;
                                        p[g + 2] = u >>> 16 & 255;
                                        p[g + 3] = u >>> 8 & 255;
                                        break;
                                    case 2:
                                        p[g] = u >>> 8 & 255,
                                        p[g + 1] = u >>> 16 & 255,
                                        p[g + 2] = u >>> 24 & 255,
                                        p[g + 3] = u & 255
                                    }
                                    d += 4;
                                    g += 4;
                                    z += 4
                                }
                    else if (K)
                        for (K = 0,
                        x = l.height; K < x; ) {
                            z = K++;
                            d = c.byteOffset + c.stride * z;
                            g = l.byteOffset + l.stride * z;
                            for (var t = 0, v = l.width; t < v; ) {
                                t++;
                                A = h;
                                I = r;
                                null == I && (I = !1);
                                null == A && (A = 0);
                                switch (A) {
                                case 0:
                                    u = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                    break;
                                case 1:
                                    u = (q[d + 1] & 255) << 24 | (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                    break;
                                case 2:
                                    u = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                }
                                I && 0 != (u & 255) && 255 != (u & 255) && (R.unmult = 255 / (u & 255),
                                u = (R.__clamp[Math.round((u >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((u >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((u >>> 8 & 255) * R.unmult)] & 255) << 8 | u & 255);
                                A = n;
                                I = C;
                                null == I && (I = !1);
                                null == A && (A = 0);
                                switch (A) {
                                case 0:
                                    w = (p[g] & 255) << 24 | (p[g + 1] & 255) << 16 | (p[g + 2] & 255) << 8 | p[g + 3] & 255;
                                    break;
                                case 1:
                                    w = (p[g + 1] & 255) << 24 | (p[g + 2] & 255) << 16 | (p[g + 3] & 255) << 8 | p[g] & 255;
                                    break;
                                case 2:
                                    w = (p[g + 2] & 255) << 24 | (p[g + 1] & 255) << 16 | (p[g] & 255) << 8 | p[g + 3] & 255
                                }
                                I && 0 != (w & 255) && 255 != (w & 255) && (R.unmult = 255 / (w & 255),
                                w = (R.__clamp[Math.round((w >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((w >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((w >>> 8 & 255) * R.unmult)] & 255) << 8 | w & 255);
                                I = (u & 255) / 255;
                                B = (w & 255) / 255;
                                N = 1 - I;
                                A = I + B * N;
                                if (0 == A)
                                    w = 0;
                                else {
                                    var D = R.__clamp[Math.round(((u >>> 24 & 255) * I + (w >>> 24 & 255) * B * N) / A)];
                                    w = (D & 255) << 24 | (w >>> 16 & 255) << 16 | (w >>> 8 & 255) << 8 | w & 255;
                                    D = R.__clamp[Math.round(((u >>> 16 & 255) * I + (w >>> 16 & 255) * B * N) / A)];
                                    w = (w >>> 24 & 255) << 24 | (D & 255) << 16 | (w >>> 8 & 255) << 8 | w & 255;
                                    I = R.__clamp[Math.round(((u >>> 8 & 255) * I + (w >>> 8 & 255) * B * N) / A)];
                                    w = (w >>> 24 & 255) << 24 | (w >>> 16 & 255) << 16 | (I & 255) << 8 | w & 255;
                                    A = R.__clamp[Math.round(255 * A)];
                                    w = (w >>> 24 & 255) << 24 | (w >>> 16 & 255) << 16 | (w >>> 8 & 255) << 8 | A & 255
                                }
                                A = n;
                                I = C;
                                null == I && (I = !1);
                                null == A && (A = 0);
                                I && (0 == (w & 255) ? 0 != w && (w = 0) : 255 != (w & 255) && (R.a16 = R.__alpha16[w & 255],
                                w = ((w >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((w >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((w >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | w & 255));
                                switch (A) {
                                case 0:
                                    p[g] = w >>> 24 & 255;
                                    p[g + 1] = w >>> 16 & 255;
                                    p[g + 2] = w >>> 8 & 255;
                                    p[g + 3] = w & 255;
                                    break;
                                case 1:
                                    p[g] = w & 255;
                                    p[g + 1] = w >>> 24 & 255;
                                    p[g + 2] = w >>> 16 & 255;
                                    p[g + 3] = w >>> 8 & 255;
                                    break;
                                case 2:
                                    p[g] = w >>> 8 & 255,
                                    p[g + 1] = w >>> 16 & 255,
                                    p[g + 2] = w >>> 24 & 255,
                                    p[g + 3] = w & 255
                                }
                                d += 4;
                                g += 4
                            }
                        }
                    else if (h == n && r == C && x == m)
                        for (K = 0,
                        x = l.height; K < x; )
                            z = K++,
                            d = c.byteOffset + c.stride * z,
                            g = l.byteOffset + l.stride * z,
                            p.set(q.subarray(d, d + l.width * m), g);
                    else
                        for (K = 0,
                        x = l.height; K < x; )
                            for (z = K++,
                            d = c.byteOffset + c.stride * z,
                            g = l.byteOffset + l.stride * z,
                            t = 0,
                            v = l.width; t < v; ) {
                                t++;
                                A = h;
                                I = r;
                                null == I && (I = !1);
                                null == A && (A = 0);
                                switch (A) {
                                case 0:
                                    u = (q[d] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d + 2] & 255) << 8 | q[d + 3] & 255;
                                    break;
                                case 1:
                                    u = (q[d + 1] & 255) << 24 | (q[d + 2] & 255) << 16 | (q[d + 3] & 255) << 8 | q[d] & 255;
                                    break;
                                case 2:
                                    u = (q[d + 2] & 255) << 24 | (q[d + 1] & 255) << 16 | (q[d] & 255) << 8 | q[d + 3] & 255
                                }
                                I && 0 != (u & 255) && 255 != (u & 255) && (R.unmult = 255 / (u & 255),
                                u = (R.__clamp[Math.round((u >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((u >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((u >>> 8 & 255) * R.unmult)] & 255) << 8 | u & 255);
                                A = n;
                                I = C;
                                null == I && (I = !1);
                                null == A && (A = 0);
                                I && (0 == (u & 255) ? 0 != u && (u = 0) : 255 != (u & 255) && (R.a16 = R.__alpha16[u & 255],
                                u = ((u >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((u >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((u >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | u & 255));
                                switch (A) {
                                case 0:
                                    p[g] = u >>> 24 & 255;
                                    p[g + 1] = u >>> 16 & 255;
                                    p[g + 2] = u >>> 8 & 255;
                                    p[g + 3] = u & 255;
                                    break;
                                case 1:
                                    p[g] = u & 255;
                                    p[g + 1] = u >>> 24 & 255;
                                    p[g + 2] = u >>> 16 & 255;
                                    p[g + 3] = u >>> 8 & 255;
                                    break;
                                case 2:
                                    p[g] = u >>> 8 & 255,
                                    p[g + 1] = u >>> 16 & 255,
                                    p[g + 2] = u >>> 24 & 255,
                                    p[g + 3] = u & 255
                                }
                                d += 4;
                                g += 4
                            }
                }
                a.dirty = !0;
                a.version++
            }
            ;
            bc.fillRect = function(a, b, c, d) {
                switch (d) {
                case 1:
                    c = (c >>> 16 & 255) << 24 | (c >>> 8 & 255) << 16 | (c & 255) << 8 | c >>> 24 & 255;
                    break;
                case 2:
                    c = (c >>> 8 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 24 & 255) << 8 | c & 255
                }
                a.get_transparent() || (c = (c >>> 24 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 8 & 255) << 8 | 255);
                var f = a.buffer.data;
                if (null != f) {
                    d = a.buffer.format;
                    var g = a.buffer.premultiplied;
                    g && (0 == (c & 255) ? 0 != c && (c = 0) : 255 != (c & 255) && (R.a16 = R.__alpha16[c & 255],
                    c = ((c >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | c & 255));
                    b = new Ke(a,b);
                    for (var k, q = 0, p = b.height; q < p; ) {
                        g = q++;
                        k = b.byteOffset + b.stride * g;
                        for (var l = 0, h = b.width; l < h; ) {
                            g = l++;
                            var n = k + 4 * g
                              , u = d;
                            g = !1;
                            null == g && (g = !1);
                            null == u && (u = 0);
                            g && (0 == (c & 255) ? 0 != c && (c = 0) : 255 != (c & 255) && (R.a16 = R.__alpha16[c & 255],
                            c = ((c >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | c & 255));
                            switch (u) {
                            case 0:
                                f[n] = c >>> 24 & 255;
                                f[n + 1] = c >>> 16 & 255;
                                f[n + 2] = c >>> 8 & 255;
                                f[n + 3] = c & 255;
                                break;
                            case 1:
                                f[n] = c & 255;
                                f[n + 1] = c >>> 24 & 255;
                                f[n + 2] = c >>> 16 & 255;
                                f[n + 3] = c >>> 8 & 255;
                                break;
                            case 2:
                                f[n] = c >>> 8 & 255,
                                f[n + 1] = c >>> 16 & 255,
                                f[n + 2] = c >>> 24 & 255,
                                f[n + 3] = c & 255
                            }
                        }
                    }
                    a.dirty = !0;
                    a.version++
                }
            }
            ;
            bc.gaussianBlur = function(a, b, c, d, f, g, k, q, p) {
                null == k && (k = 1);
                null == g && (g = 4);
                null == f && (f = 4);
                (q = a.get_premultiplied()) && a.set_premultiplied(!1);
                yd.blur(a, b, c, d, f, g, k);
                a.dirty = !0;
                a.version++;
                q && a.set_premultiplied(!0);
                return a
            }
            ;
            bc.getPixel = function(a, b, c, d) {
                var f = 0
                  , g = a.buffer.data;
                b = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                c = a.buffer.format;
                a = a.buffer.premultiplied;
                null == a && (a = !1);
                null == c && (c = 0);
                switch (c) {
                case 0:
                    f = (g[b] & 255) << 24 | (g[b + 1] & 255) << 16 | (g[b + 2] & 255) << 8 | g[b + 3] & 255;
                    break;
                case 1:
                    f = (g[b + 1] & 255) << 24 | (g[b + 2] & 255) << 16 | (g[b + 3] & 255) << 8 | g[b] & 255;
                    break;
                case 2:
                    f = (g[b + 2] & 255) << 24 | (g[b + 1] & 255) << 16 | (g[b] & 255) << 8 | g[b + 3] & 255
                }
                a && 0 != (f & 255) && 255 != (f & 255) && (R.unmult = 255 / (f & 255),
                f = (R.__clamp[Math.round((f >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((f >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((f >>> 8 & 255) * R.unmult)] & 255) << 8 | f & 255);
                f = (f >>> 24 & 255) << 24 | (f >>> 16 & 255) << 16 | (f >>> 8 & 255) << 8 | 0;
                switch (d) {
                case 1:
                    return (f & 255) << 24 | (f >>> 24 & 255) << 16 | (f >>> 16 & 255) << 8 | f >>> 8 & 255;
                case 2:
                    return (f >>> 8 & 255) << 24 | (f >>> 16 & 255) << 16 | (f >>> 24 & 255) << 8 | f & 255;
                default:
                    return f
                }
            }
            ;
            bc.getPixels = function(a, b, c) {
                if (null == a.buffer.data)
                    return null;
                var d = new xb(new ArrayBuffer(4 * (b.width * b.height | 0)))
                  , f = a.buffer.data
                  , g = a.buffer.format
                  , k = a.buffer.premultiplied;
                a = new Ke(a,b);
                for (var q, p, l = b = p = 0, h = a.height; l < h; ) {
                    q = l++;
                    q = a.byteOffset + a.stride * q;
                    for (var n = 0, u = a.width; n < u; ) {
                        n++;
                        var w = g
                          , r = k;
                        null == r && (r = !1);
                        null == w && (w = 0);
                        switch (w) {
                        case 0:
                            p = (f[q] & 255) << 24 | (f[q + 1] & 255) << 16 | (f[q + 2] & 255) << 8 | f[q + 3] & 255;
                            break;
                        case 1:
                            p = (f[q + 1] & 255) << 24 | (f[q + 2] & 255) << 16 | (f[q + 3] & 255) << 8 | f[q] & 255;
                            break;
                        case 2:
                            p = (f[q + 2] & 255) << 24 | (f[q + 1] & 255) << 16 | (f[q] & 255) << 8 | f[q + 3] & 255
                        }
                        r && 0 != (p & 255) && 255 != (p & 255) && (R.unmult = 255 / (p & 255),
                        p = (R.__clamp[Math.round((p >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((p >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((p >>> 8 & 255) * R.unmult)] & 255) << 8 | p & 255);
                        switch (c) {
                        case 1:
                            p = (p & 255) << 24 | (p >>> 24 & 255) << 16 | (p >>> 16 & 255) << 8 | p >>> 8 & 255;
                            break;
                        case 2:
                            p = (p >>> 8 & 255) << 24 | (p >>> 16 & 255) << 16 | (p >>> 24 & 255) << 8 | p & 255
                        }
                        d.b[b++] = p >>> 24 & 255;
                        d.b[b++] = p >>> 16 & 255;
                        d.b[b++] = p >>> 8 & 255;
                        d.b[b++] = p & 255;
                        q += 4
                    }
                }
                return d
            }
            ;
            bc.multiplyAlpha = function(a) {
                var b = a.buffer.data;
                if (null != b && a.buffer.transparent) {
                    for (var c = a.buffer.format, d = 0, f = 0, g = b.length / 4 | 0; f < g; ) {
                        var k = f++
                          , q = 4 * k
                          , p = c
                          , l = !1;
                        null == l && (l = !1);
                        null == p && (p = 0);
                        switch (p) {
                        case 0:
                            d = (b[q] & 255) << 24 | (b[q + 1] & 255) << 16 | (b[q + 2] & 255) << 8 | b[q + 3] & 255;
                            break;
                        case 1:
                            d = (b[q + 1] & 255) << 24 | (b[q + 2] & 255) << 16 | (b[q + 3] & 255) << 8 | b[q] & 255;
                            break;
                        case 2:
                            d = (b[q + 2] & 255) << 24 | (b[q + 1] & 255) << 16 | (b[q] & 255) << 8 | b[q + 3] & 255
                        }
                        l && 0 != (d & 255) && 255 != (d & 255) && (R.unmult = 255 / (d & 255),
                        d = (R.__clamp[Math.round((d >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((d >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((d >>> 8 & 255) * R.unmult)] & 255) << 8 | d & 255);
                        k *= 4;
                        q = c;
                        p = !0;
                        null == p && (p = !1);
                        null == q && (q = 0);
                        p && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (R.a16 = R.__alpha16[d & 255],
                        d = ((d >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | d & 255));
                        switch (q) {
                        case 0:
                            b[k] = d >>> 24 & 255;
                            b[k + 1] = d >>> 16 & 255;
                            b[k + 2] = d >>> 8 & 255;
                            b[k + 3] = d & 255;
                            break;
                        case 1:
                            b[k] = d & 255;
                            b[k + 1] = d >>> 24 & 255;
                            b[k + 2] = d >>> 16 & 255;
                            b[k + 3] = d >>> 8 & 255;
                            break;
                        case 2:
                            b[k] = d >>> 8 & 255,
                            b[k + 1] = d >>> 16 & 255,
                            b[k + 2] = d >>> 24 & 255,
                            b[k + 3] = d & 255
                        }
                    }
                    a.buffer.premultiplied = !0;
                    a.dirty = !0;
                    a.version++
                }
            }
            ;
            bc.setFormat = function(a, b) {
                var c = a.buffer.data;
                if (null != c) {
                    var d = c.length / 4 | 0;
                    switch (a.get_format()) {
                    case 0:
                        var f = 0;
                        var g = 1;
                        var k = 2;
                        var q = 3;
                        break;
                    case 1:
                        f = 1;
                        g = 2;
                        k = 3;
                        q = 0;
                        break;
                    case 2:
                        f = 2,
                        g = 1,
                        k = 0,
                        q = 3
                    }
                    switch (b) {
                    case 0:
                        var p = 0;
                        var l = 1;
                        var h = 2;
                        var n = 3;
                        break;
                    case 1:
                        p = 1;
                        l = 2;
                        h = 3;
                        n = 0;
                        break;
                    case 2:
                        p = 2,
                        l = 1,
                        h = 0,
                        n = 3
                    }
                    for (var u = 0; u < d; ) {
                        var w = 4 * u++;
                        var r = c[w + f];
                        var C = c[w + g];
                        var x = c[w + k];
                        var m = c[w + q];
                        c[w + p] = r;
                        c[w + l] = C;
                        c[w + h] = x;
                        c[w + n] = m
                    }
                    a.buffer.format = b;
                    a.dirty = !0;
                    a.version++
                }
            }
            ;
            bc.setPixel = function(a, b, c, d, f) {
                switch (f) {
                case 1:
                    d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
                    break;
                case 2:
                    d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255
                }
                var g = 0
                  , k = a.buffer.data
                  , q = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                f = a.buffer.format;
                var p = a.buffer.premultiplied;
                null == p && (p = !1);
                null == f && (f = 0);
                switch (f) {
                case 0:
                    g = (k[q] & 255) << 24 | (k[q + 1] & 255) << 16 | (k[q + 2] & 255) << 8 | k[q + 3] & 255;
                    break;
                case 1:
                    g = (k[q + 1] & 255) << 24 | (k[q + 2] & 255) << 16 | (k[q + 3] & 255) << 8 | k[q] & 255;
                    break;
                case 2:
                    g = (k[q + 2] & 255) << 24 | (k[q + 1] & 255) << 16 | (k[q] & 255) << 8 | k[q + 3] & 255
                }
                p && 0 != (g & 255) && 255 != (g & 255) && (R.unmult = 255 / (g & 255),
                g = (R.__clamp[Math.round((g >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((g >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((g >>> 8 & 255) * R.unmult)] & 255) << 8 | g & 255);
                d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | g & 255;
                k = a.buffer.data;
                q = 4 * (c + a.offsetY) * a.buffer.width + 4 * (b + a.offsetX);
                f = a.buffer.format;
                p = a.buffer.premultiplied;
                null == p && (p = !1);
                null == f && (f = 0);
                p && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (R.a16 = R.__alpha16[d & 255],
                d = ((d >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | d & 255));
                switch (f) {
                case 0:
                    k[q] = d >>> 24 & 255;
                    k[q + 1] = d >>> 16 & 255;
                    k[q + 2] = d >>> 8 & 255;
                    k[q + 3] = d & 255;
                    break;
                case 1:
                    k[q] = d & 255;
                    k[q + 1] = d >>> 24 & 255;
                    k[q + 2] = d >>> 16 & 255;
                    k[q + 3] = d >>> 8 & 255;
                    break;
                case 2:
                    k[q] = d >>> 8 & 255,
                    k[q + 1] = d >>> 16 & 255,
                    k[q + 2] = d >>> 24 & 255,
                    k[q + 3] = d & 255
                }
                a.dirty = !0;
                a.version++
            }
            ;
            bc.unmultiplyAlpha = function(a) {
                var b = a.buffer.data;
                if (null != b) {
                    for (var c = a.buffer.format, d = 0, f = 0, g = b.length / 4 | 0; f < g; ) {
                        var k = f++
                          , q = 4 * k
                          , p = c
                          , l = !0;
                        null == l && (l = !1);
                        null == p && (p = 0);
                        switch (p) {
                        case 0:
                            d = (b[q] & 255) << 24 | (b[q + 1] & 255) << 16 | (b[q + 2] & 255) << 8 | b[q + 3] & 255;
                            break;
                        case 1:
                            d = (b[q + 1] & 255) << 24 | (b[q + 2] & 255) << 16 | (b[q + 3] & 255) << 8 | b[q] & 255;
                            break;
                        case 2:
                            d = (b[q + 2] & 255) << 24 | (b[q + 1] & 255) << 16 | (b[q] & 255) << 8 | b[q + 3] & 255
                        }
                        l && 0 != (d & 255) && 255 != (d & 255) && (R.unmult = 255 / (d & 255),
                        d = (R.__clamp[Math.round((d >>> 24 & 255) * R.unmult)] & 255) << 24 | (R.__clamp[Math.round((d >>> 16 & 255) * R.unmult)] & 255) << 16 | (R.__clamp[Math.round((d >>> 8 & 255) * R.unmult)] & 255) << 8 | d & 255);
                        k *= 4;
                        q = c;
                        p = !1;
                        null == p && (p = !1);
                        null == q && (q = 0);
                        p && (0 == (d & 255) ? 0 != d && (d = 0) : 255 != (d & 255) && (R.a16 = R.__alpha16[d & 255],
                        d = ((d >>> 24 & 255) * R.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * R.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * R.a16 >> 16 & 255) << 8 | d & 255));
                        switch (q) {
                        case 0:
                            b[k] = d >>> 24 & 255;
                            b[k + 1] = d >>> 16 & 255;
                            b[k + 2] = d >>> 8 & 255;
                            b[k + 3] = d & 255;
                            break;
                        case 1:
                            b[k] = d & 255;
                            b[k + 1] = d >>> 24 & 255;
                            b[k + 2] = d >>> 16 & 255;
                            b[k + 3] = d >>> 8 & 255;
                            break;
                        case 2:
                            b[k] = d >>> 8 & 255,
                            b[k + 1] = d >>> 16 & 255,
                            b[k + 2] = d >>> 24 & 255,
                            b[k + 3] = d & 255
                        }
                    }
                    a.buffer.premultiplied = !1;
                    a.dirty = !0;
                    a.version++
                }
            }
            ;
            var Ke = function(a, b) {
                this.image = a;
                null == b ? this.rect = a.get_rect() : (0 > b.x && (b.x = 0),
                0 > b.y && (b.y = 0),
                b.x + b.width > a.width && (b.width = a.width - b.x),
                b.y + b.height > a.height && (b.height = a.height - b.y),
                0 > b.width && (b.width = 0),
                0 > b.height && (b.height = 0),
                this.rect = b);
                this.stride = a.buffer.get_stride();
                this.__update()
            };
            h["lime._internal.graphics._ImageDataUtil.ImageDataView"] = Ke;
            Ke.__name__ = "lime._internal.graphics._ImageDataUtil.ImageDataView";
            Ke.prototype = {
                clip: function(a, b, c, d) {
                    null == this.tempRect && (this.tempRect = new Dd);
                    this.tempRect.setTo(a, b, c, d);
                    this.rect.intersection(this.tempRect, this.rect);
                    this.__update()
                },
                __update: function() {
                    this.x = Math.ceil(this.rect.x);
                    this.y = Math.ceil(this.rect.y);
                    this.width = Math.floor(this.rect.width);
                    this.height = Math.floor(this.rect.height);
                    this.byteOffset = this.stride * (this.y + this.image.offsetY) + 4 * (this.x + this.image.offsetX)
                },
                __class__: Ke
            };
            var yd = function() {};
            h["lime._internal.graphics.StackBlur"] = yd;
            yd.__name__ = "lime._internal.graphics.StackBlur";
            yd.blur = function(a, b, c, d, f, g, k) {
                a.copyPixels(b, c, d);
                yd.__stackBlurCanvasRGBA(a, c.width | 0, c.height | 0, f, g, k)
            }
            ;
            yd.__stackBlurCanvasRGBA = function(a, b, c, d, f, g) {
                d = Math.round(d) >> 1;
                f = Math.round(f) >> 1;
                if (null != yd.MUL_TABLE && (d >= yd.MUL_TABLE.length && (d = yd.MUL_TABLE.length - 1),
                f >= yd.MUL_TABLE.length && (f = yd.MUL_TABLE.length - 1),
                !(0 > d || 0 > f))) {
                    1 > g && (g = 1);
                    3 < g && (g = 3);
                    a = a.get_data();
                    var k, q = d + d + 1;
                    var p = f + f + 1;
                    var l = b - 1
                      , h = c - 1
                      , n = d + 1
                      , u = f + 1
                      , w = new Cg
                      , r = w;
                    var C = 1;
                    for (var x = q; C < x; )
                        C++,
                        r = r.n = new Cg;
                    r.n = w;
                    var m = q = new Cg;
                    C = 1;
                    for (x = p; C < x; )
                        C++,
                        m = m.n = new Cg;
                    m.n = q;
                    for (var z = yd.MUL_TABLE[d], A = yd.SHG_TABLE[d], K = yd.MUL_TABLE[f], I = yd.SHG_TABLE[f]; 0 < g; ) {
                        --g;
                        var B = k = 0;
                        var N = z
                          , t = A;
                        var v = c;
                        do {
                            var D = a[k];
                            p = n * D;
                            var E = a[k + 1];
                            var wa = n * E;
                            var J = a[k + 2];
                            var P = n * J;
                            C = a[k + 3];
                            var G = n * C;
                            r = w;
                            m = n;
                            do
                                r.r = D,
                                r.g = E,
                                r.b = J,
                                r.a = C,
                                r = r.n;
                            while (-1 < --m);
                            C = 1;
                            for (x = n; C < x; )
                                m = C++,
                                m = k + ((l < m ? l : m) << 2),
                                p += r.r = a[m],
                                wa += r.g = a[m + 1],
                                P += r.b = a[m + 2],
                                G += r.a = a[m + 3],
                                r = r.n;
                            x = w;
                            r = 0;
                            for (C = b; r < C; )
                                m = r++,
                                a[k++] = p * N >>> t,
                                a[k++] = wa * N >>> t,
                                a[k++] = P * N >>> t,
                                a[k++] = G * N >>> t,
                                m = m + d + 1,
                                m = B + (m < l ? m : l) << 2,
                                p -= x.r - (x.r = a[m]),
                                wa -= x.g - (x.g = a[m + 1]),
                                P -= x.b - (x.b = a[m + 2]),
                                G -= x.a - (x.a = a[m + 3]),
                                x = x.n;
                            B += b
                        } while (0 < --v);
                        N = K;
                        t = I;
                        v = 0;
                        for (B = b; v < B; ) {
                            r = v++;
                            k = r << 2;
                            D = a[k];
                            p = u * D;
                            E = a[k + 1];
                            wa = u * E;
                            J = a[k + 2];
                            P = u * J;
                            C = a[k + 3];
                            G = u * C;
                            m = q;
                            k = 0;
                            for (x = u; k < x; )
                                k++,
                                m.r = D,
                                m.g = E,
                                m.b = J,
                                m.a = C,
                                m = m.n;
                            C = b;
                            x = 1;
                            for (D = f + 1; x < D; )
                                E = x++,
                                k = C + r << 2,
                                p += m.r = a[k],
                                wa += m.g = a[k + 1],
                                P += m.b = a[k + 2],
                                G += m.a = a[k + 3],
                                m = m.n,
                                E < h && (C += b);
                            k = r;
                            x = q;
                            if (0 < g)
                                for (D = 0,
                                E = c; D < E; )
                                    J = D++,
                                    m = k << 2,
                                    C = G * N >>> t,
                                    a[m + 3] = C,
                                    0 < C ? (a[m] = p * N >>> t,
                                    a[m + 1] = wa * N >>> t,
                                    a[m + 2] = P * N >>> t) : a[m] = a[m + 1] = a[m + 2] = 0,
                                    m = J + u,
                                    m = r + (m < h ? m : h) * b << 2,
                                    p -= x.r - (x.r = a[m]),
                                    wa -= x.g - (x.g = a[m + 1]),
                                    P -= x.b - (x.b = a[m + 2]),
                                    G -= x.a - (x.a = a[m + 3]),
                                    x = x.n,
                                    k += b;
                            else
                                for (var pb = 0, ob = c; pb < ob; ) {
                                    var M = pb++;
                                    m = k << 2;
                                    C = G * N >>> t;
                                    a[m + 3] = C;
                                    0 < C ? (C = 255 / C,
                                    D = (p * N >>> t) * C | 0,
                                    E = (wa * N >>> t) * C | 0,
                                    J = (P * N >>> t) * C | 0,
                                    a[m] = 255 < D ? 255 : D,
                                    a[m + 1] = 255 < E ? 255 : E,
                                    a[m + 2] = 255 < J ? 255 : J) : a[m] = a[m + 1] = a[m + 2] = 0;
                                    m = M + u;
                                    m = r + (m < h ? m : h) * b << 2;
                                    p -= x.r - (x.r = a[m]);
                                    wa -= x.g - (x.g = a[m + 1]);
                                    P -= x.b - (x.b = a[m + 2]);
                                    G -= x.a - (x.a = a[m + 3]);
                                    x = x.n;
                                    k += b
                                }
                        }
                    }
                }
            }
            ;
            var Cg = function() {
                this.a = this.b = this.g = this.r = 0;
                this.n = null
            };
            h["lime._internal.graphics.BlurStack"] = Cg;
            Cg.__name__ = "lime._internal.graphics.BlurStack";
            Cg.prototype = {
                __class__: Cg
            };
            var nc = function(a, b) {
                if (null != a)
                    try {
                        this.value = a(),
                        this.isComplete = !0
                    } catch (c) {
                        Ua.lastError = c,
                        this.error = aa.caught(c).unwrap(),
                        this.isError = !0
                    }
            };
            h["lime.app.Future"] = nc;
            nc.__name__ = "lime.app.Future";
            nc.withValue = function(a) {
                var b = new nc;
                b.isComplete = !0;
                b.value = a;
                return b
            }
            ;
            nc.prototype = {
                onComplete: function(a) {
                    null != a && (this.isComplete ? a(this.value) : this.isError || (null == this.__completeListeners && (this.__completeListeners = []),
                    this.__completeListeners.push(a)));
                    return this
                },
                onError: function(a) {
                    null != a && (this.isError ? a(this.error) : this.isComplete || (null == this.__errorListeners && (this.__errorListeners = []),
                    this.__errorListeners.push(a)));
                    return this
                },
                onProgress: function(a) {
                    null != a && (null == this.__progressListeners && (this.__progressListeners = []),
                    this.__progressListeners.push(a));
                    return this
                },
                then: function(a) {
                    if (this.isComplete)
                        return a(this.value);
                    if (this.isError) {
                        var b = new nc;
                        b.isError = !0;
                        b.error = this.error;
                        return b
                    }
                    var c = new Bd;
                    this.onError(m(c, c.error));
                    this.onProgress(m(c, c.progress));
                    this.onComplete(function(b) {
                        b = a(b);
                        b.onError(m(c, c.error));
                        b.onComplete(m(c, c.complete))
                    });
                    return c.future
                },
                __class__: nc
            };
            var Bd = function() {
                this.future = new nc
            };
            h["lime.app.Promise"] = Bd;
            Bd.__name__ = "lime.app.Promise";
            Bd.prototype = {
                complete: function(a) {
                    if (!this.future.isError && (this.future.isComplete = !0,
                    this.future.value = a,
                    null != this.future.__completeListeners)) {
                        for (var b = 0, c = this.future.__completeListeners; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            d(a)
                        }
                        this.future.__completeListeners = null
                    }
                    return this
                },
                completeWith: function(a) {
                    a.onComplete(m(this, this.complete));
                    a.onError(m(this, this.error));
                    a.onProgress(m(this, this.progress));
                    return this
                },
                error: function(a) {
                    if (!this.future.isComplete && (this.future.isError = !0,
                    this.future.error = a,
                    null != this.future.__errorListeners)) {
                        for (var b = 0, c = this.future.__errorListeners; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            d(a)
                        }
                        this.future.__errorListeners = null
                    }
                    return this
                },
                progress: function(a, b) {
                    if (!this.future.isError && !this.future.isComplete && null != this.future.__progressListeners)
                        for (var c = 0, d = this.future.__progressListeners; c < d.length; ) {
                            var f = d[c];
                            ++c;
                            f(a, b)
                        }
                    return this
                },
                __class__: Bd
            };
            var pk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_Float_Void"] = pk;
            pk.__name__ = "lime.app._Event_Float_Float_Float_Void";
            pk.prototype = {
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, f = this.__repeat, g = 0; g < d.length && (d[g](a, b, c),
                    f[g] ? ++g : this.remove(d[g]),
                    !this.canceled); )
                        ;
                },
                __class__: pk
            };
            var qk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_Int_Void"] = qk;
            qk.__name__ = "lime.app._Event_Float_Float_Int_Void";
            qk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function() {
                    this.canceled = !0
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, f = this.__repeat, g = 0; g < d.length && (d[g](a, b, c),
                    f[g] ? ++g : this.remove(d[g]),
                    !this.canceled); )
                        ;
                },
                __class__: qk
            };
            var sh = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_Void"] = sh;
            sh.__name__ = "lime.app._Event_Float_Float_Void";
            sh.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, f = 0; f < c.length && (c[f](a, b),
                    d[f] ? ++f : this.remove(c[f]),
                    !this.canceled); )
                        ;
                },
                __class__: sh
            };
            var rk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"] = rk;
            rk.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseButton_Void";
            rk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function() {
                    this.canceled = !0
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, f = this.__repeat, g = 0; g < d.length && (d[g](a, b, c),
                    f[g] ? ++g : this.remove(d[g]),
                    !this.canceled); )
                        ;
                },
                __class__: rk
            };
            var sk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"] = sk;
            sk.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";
            sk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function() {
                    this.canceled = !0
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b, c) {
                    this.canceled = !1;
                    for (var d = this.__listeners, f = this.__repeat, g = 0; g < d.length && (d[g](a, b, c),
                    f[g] ? ++g : this.remove(d[g]),
                    !this.canceled); )
                        ;
                },
                __class__: sk
            };
            var tk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_Float_Void"] = tk;
            tk.__name__ = "lime.app._Event_Int_Float_Void";
            tk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, f = 0; f < c.length && (c[f](a, b),
                    d[f] ? ++f : this.remove(c[f]),
                    !this.canceled); )
                        ;
                },
                __class__: tk
            };
            var Ni = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_Int_Void"] = Ni;
            Ni.__name__ = "lime.app._Event_Int_Int_Void";
            Ni.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, f = 0; f < c.length && (c[f](a, b),
                    d[f] ? ++f : this.remove(c[f]),
                    !this.canceled); )
                        ;
                },
                __class__: Ni
            };
            var Of = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_Void"] = Of;
            Of.__name__ = "lime.app._Event_Int_Void";
            Of.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: Of
            };
            var uk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"] = uk;
            uk.__name__ = "lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";
            uk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                __class__: uk
            };
            var vk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_String_Int_Int_Void"] = vk;
            vk.__name__ = "lime.app._Event_String_Int_Int_Void";
            vk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                __class__: vk
            };
            var Oi = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_String_Void"] = Oi;
            Oi.__name__ = "lime.app._Event_String_Void";
            Oi.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function() {
                    this.canceled = !0
                },
                has: function(a) {
                    for (var b = 0, c = this.__listeners; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        if (d == a)
                            return !0
                    }
                    return !1
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: Oi
            };
            var Bc = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_Void_Void"] = Bc;
            Bc.__name__ = "lime.app._Event_Void_Void";
            Bc.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function() {
                    this.canceled = !1;
                    for (var a = this.__listeners, b = this.__repeat, c = 0; c < a.length && (a[c](),
                    b[c] ? ++c : this.remove(a[c]),
                    !this.canceled); )
                        ;
                },
                __class__: Bc
            };
            var Pi = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_graphics_RenderContext_Void"] = Pi;
            Pi.__name__ = "lime.app._Event_lime_graphics_RenderContext_Void";
            Pi.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function() {
                    this.canceled = !0
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: Pi
            };
            var wk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_GamepadAxis_Float_Void"] = wk;
            wk.__name__ = "lime.app._Event_lime_ui_GamepadAxis_Float_Void";
            wk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, f = 0; f < c.length && (c[f](a, b),
                    d[f] ? ++f : this.remove(c[f]),
                    !this.canceled); )
                        ;
                },
                __class__: wk
            };
            var Qi = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_GamepadButton_Void"] = Qi;
            Qi.__name__ = "lime.app._Event_lime_ui_GamepadButton_Void";
            Qi.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: Qi
            };
            var xk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Gamepad_Void"] = xk;
            xk.__name__ = "lime.app._Event_lime_ui_Gamepad_Void";
            xk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: xk
            };
            var yk = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Joystick_Void"] = yk;
            yk.__name__ = "lime.app._Event_lime_ui_Joystick_Void";
            yk.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: yk
            };
            var Ri = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"] = Ri;
            Ri.__name__ = "lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";
            Ri.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                cancel: function() {
                    this.canceled = !0
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a, b) {
                    this.canceled = !1;
                    for (var c = this.__listeners, d = this.__repeat, f = 0; f < c.length && (c[f](a, b),
                    d[f] ? ++f : this.remove(c[f]),
                    !this.canceled); )
                        ;
                },
                __class__: Ri
            };
            var Dg = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Touch_Void"] = Dg;
            Dg.__name__ = "lime.app._Event_lime_ui_Touch_Void";
            Dg.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: Dg
            };
            var Qj = function() {
                this.canceled = !1;
                this.__listeners = [];
                this.__priorities = [];
                this.__repeat = []
            };
            h["lime.app._Event_lime_ui_Window_Void"] = Qj;
            Qj.__name__ = "lime.app._Event_lime_ui_Window_Void";
            Qj.prototype = {
                add: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    for (var d = 0, f = this.__priorities.length; d < f; ) {
                        var g = d++;
                        if (c > this.__priorities[g]) {
                            this.__listeners.splice(g, 0, a);
                            this.__priorities.splice(g, 0, c);
                            this.__repeat.splice(g, 0, !b);
                            return
                        }
                    }
                    this.__listeners.push(a);
                    this.__priorities.push(c);
                    this.__repeat.push(!b)
                },
                remove: function(a) {
                    for (var b = this.__listeners.length; 0 <= --b; )
                        this.__listeners[b] == a && (this.__listeners.splice(b, 1),
                        this.__priorities.splice(b, 1),
                        this.__repeat.splice(b, 1))
                },
                dispatch: function(a) {
                    this.canceled = !1;
                    for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a),
                    c[d] ? ++d : this.remove(b[d]),
                    !this.canceled); )
                        ;
                },
                __class__: Qj
            };
            var he = N["lime.graphics.ImageChannel"] = {
                __ename__: "lime.graphics.ImageChannel",
                __constructs__: null,
                RED: {
                    _hx_name: "RED",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: r
                },
                GREEN: {
                    _hx_name: "GREEN",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: r
                },
                BLUE: {
                    _hx_name: "BLUE",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: r
                },
                ALPHA: {
                    _hx_name: "ALPHA",
                    _hx_index: 3,
                    __enum__: "lime.graphics.ImageChannel",
                    toString: r
                }
            };
            he.__constructs__ = [he.RED, he.GREEN, he.BLUE, he.ALPHA];
            he.__empty_constructs__ = [he.RED, he.GREEN, he.BLUE, he.ALPHA];
            var sf = N["lime.graphics.ImageFileFormat"] = {
                __ename__: "lime.graphics.ImageFileFormat",
                __constructs__: null,
                BMP: {
                    _hx_name: "BMP",
                    _hx_index: 0,
                    __enum__: "lime.graphics.ImageFileFormat",
                    toString: r
                },
                JPEG: {
                    _hx_name: "JPEG",
                    _hx_index: 1,
                    __enum__: "lime.graphics.ImageFileFormat",
                    toString: r
                },
                PNG: {
                    _hx_name: "PNG",
                    _hx_index: 2,
                    __enum__: "lime.graphics.ImageFileFormat",
                    toString: r
                }
            };
            sf.__constructs__ = [sf.BMP, sf.JPEG, sf.PNG];
            sf.__empty_constructs__ = [sf.BMP, sf.JPEG, sf.PNG];
            var ok = function() {};
            h["lime.graphics.RenderContext"] = ok;
            ok.__name__ = "lime.graphics.RenderContext";
            ok.prototype = {
                __class__: ok
            };
            var Hl = {
                uniform2fv: function(a, b, c, d, f) {
                    null != d ? a.uniform2fv(b, c, d, f) : a.uniform2fv(b, c)
                }
            }
              , Lc = {
                bufferData: function(a, b, c, d) {
                    a.bufferData(b, c, d)
                },
                texImage2D: function(a, b, c, d, f, g, k, q, p, l) {
                    null != q ? a.texImage2D(b, c, d, f, g, k, q, p, l) : a.texImage2D(b, c, d, f, g, k)
                },
                uniformMatrix2fv: function(a, b, c, d) {
                    a.uniformMatrix2fv(b, c, d)
                },
                uniformMatrix3fv: function(a, b, c, d) {
                    a.uniformMatrix3fv(b, c, d)
                },
                uniformMatrix4fv: function(a, b, c, d) {
                    a.uniformMatrix4fv(b, c, d)
                },
                fromWebGL2RenderContext: function(a) {
                    return a
                }
            }
              , hl = function(a) {};
            h["lime.graphics.cairo.Cairo"] = hl;
            hl.__name__ = "lime.graphics.cairo.Cairo";
            hl.prototype = {
                clip: function() {},
                identityMatrix: function() {},
                newPath: function() {},
                paint: function() {},
                rectangle: function(a, b, c, d) {},
                restore: function() {},
                save: function() {},
                setOperator: function(a) {
                    return a
                },
                setSourceRGB: function(a, b, c) {},
                set_matrix: function(a) {
                    return a
                },
                __class__: hl,
                __properties__: {
                    set_matrix: "set_matrix"
                }
            };
            var Bl = {
                flush: function(a) {}
            }
              , cf = function() {};
            h["lime.graphics.opengl.GL"] = cf;
            cf.__name__ = "lime.graphics.opengl.GL";
            var il = function() {
                this.STACK_UNDERFLOW = 1284;
                this.STACK_OVERFLOW = 1283;
                this.CONTEXT_FLAG_DEBUG_BIT = 2;
                this.DEBUG_OUTPUT = 37600;
                this.DEBUG_SEVERITY_LOW = 37192;
                this.DEBUG_SEVERITY_MEDIUM = 37191;
                this.DEBUG_SEVERITY_HIGH = 37190;
                this.DEBUG_LOGGED_MESSAGES = 37189;
                this.MAX_DEBUG_LOGGED_MESSAGES = 37188;
                this.MAX_DEBUG_MESSAGE_LENGTH = 37187;
                this.MAX_LABEL_LENGTH = 33512;
                this.SAMPLER = 33510;
                this.QUERY = 33507;
                this.PROGRAM = 33506;
                this.SHADER = 33505;
                this.BUFFER = 33504;
                this.DEBUG_GROUP_STACK_DEPTH = 33389;
                this.MAX_DEBUG_GROUP_STACK_DEPTH = 33388;
                this.DEBUG_SEVERITY_NOTIFICATION = 33387;
                this.DEBUG_TYPE_POP_GROUP = 33386;
                this.DEBUG_TYPE_PUSH_GROUP = 33385;
                this.DEBUG_TYPE_MARKER = 33384;
                this.DEBUG_TYPE_OTHER = 33361;
                this.DEBUG_TYPE_PERFORMANCE = 33360;
                this.DEBUG_TYPE_PORTABILITY = 33359;
                this.DEBUG_TYPE_UNDEFINED_BEHAVIOR = 33358;
                this.DEBUG_TYPE_DEPRECATED_BEHAVIOR = 33357;
                this.DEBUG_TYPE_ERROR = 33356;
                this.DEBUG_SOURCE_OTHER = 33355;
                this.DEBUG_SOURCE_APPLICATION = 33354;
                this.DEBUG_SOURCE_THIRD_PARTY = 33353;
                this.DEBUG_SOURCE_SHADER_COMPILER = 33352;
                this.DEBUG_SOURCE_WINDOW_SYSTEM = 33351;
                this.DEBUG_SOURCE_API = 33350;
                this.DEBUG_CALLBACK_USER_PARAM = 33349;
                this.DEBUG_CALLBACK_FUNCTION = 33348;
                this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH = 33347;
                this.DEBUG_OUTPUT_SYNCHRONOUS = 33346
            };
            h["lime.graphics.opengl.ext.KHR_debug"] = il;
            il.__name__ = "lime.graphics.opengl.ext.KHR_debug";
            il.prototype = {
                __class__: il
            };
            var Pc = {
                getAlphaTable: function(a) {
                    null == Pc.__alphaTable && (Pc.__alphaTable = new Uint8Array(256));
                    Pc.__alphaTable[0] = 0;
                    for (var b = 1; 256 > b; ) {
                        var c = b++;
                        var d = Math.floor(c * a[18] + 255 * a[19]);
                        255 < d && (d = 255);
                        0 > d && (d = 0);
                        Pc.__alphaTable[c] = d
                    }
                    return Pc.__alphaTable
                },
                getBlueTable: function(a) {
                    null == Pc.__blueTable && (Pc.__blueTable = new Uint8Array(256));
                    for (var b, c = 0; 256 > c; ) {
                        var d = c++;
                        b = Math.floor(d * a[12] + 255 * a[14]);
                        255 < b && (b = 255);
                        0 > b && (b = 0);
                        Pc.__blueTable[d] = b
                    }
                    return Pc.__blueTable
                },
                getGreenTable: function(a) {
                    null == Pc.__greenTable && (Pc.__greenTable = new Uint8Array(256));
                    for (var b, c = 0; 256 > c; ) {
                        var d = c++;
                        b = Math.floor(d * a[6] + 255 * a[9]);
                        255 < b && (b = 255);
                        0 > b && (b = 0);
                        Pc.__greenTable[d] = b
                    }
                    return Pc.__greenTable
                },
                getRedTable: function(a) {
                    null == Pc.__redTable && (Pc.__redTable = new Uint8Array(256));
                    for (var b, c = 0; 256 > c; ) {
                        var d = c++;
                        b = Math.floor(d * a[0] + 255 * a[4]);
                        255 < b && (b = 255);
                        0 > b && (b = 0);
                        Pc.__redTable[d] = b
                    }
                    return Pc.__redTable
                },
                __toFlashColorTransform: function(a) {
                    return null
                }
            }
              , lb = {
                _new: function(a) {
                    if (null == a || 16 != a.length)
                        a = lb.__identity,
                        a = null != a ? new Float32Array(a) : null;
                    return a
                },
                append: function(a, b) {
                    var c = a[0]
                      , d = a[4]
                      , f = a[8]
                      , g = a[12]
                      , k = a[1]
                      , q = a[5]
                      , p = a[9]
                      , l = a[13]
                      , h = a[2]
                      , n = a[6]
                      , u = a[10]
                      , w = a[14]
                      , r = a[3]
                      , m = a[7]
                      , C = a[11]
                      , x = a[15]
                      , z = lb.get(b, 0)
                      , A = lb.get(b, 4)
                      , K = lb.get(b, 8)
                      , I = lb.get(b, 12)
                      , B = lb.get(b, 1)
                      , N = lb.get(b, 5)
                      , t = lb.get(b, 9)
                      , v = lb.get(b, 13)
                      , D = lb.get(b, 2)
                      , E = lb.get(b, 6)
                      , wa = lb.get(b, 10)
                      , J = lb.get(b, 14)
                      , P = lb.get(b, 3)
                      , G = lb.get(b, 7)
                      , pb = lb.get(b, 11);
                    b = lb.get(b, 15);
                    a[0] = c * z + k * A + h * K + r * I;
                    a[1] = c * B + k * N + h * t + r * v;
                    a[2] = c * D + k * E + h * wa + r * J;
                    a[3] = c * P + k * G + h * pb + r * b;
                    a[4] = d * z + q * A + n * K + m * I;
                    a[5] = d * B + q * N + n * t + m * v;
                    a[6] = d * D + q * E + n * wa + m * J;
                    a[7] = d * P + q * G + n * pb + m * b;
                    a[8] = f * z + p * A + u * K + C * I;
                    a[9] = f * B + p * N + u * t + C * v;
                    a[10] = f * D + p * E + u * wa + C * J;
                    a[11] = f * P + p * G + u * pb + C * b;
                    a[12] = g * z + l * A + w * K + x * I;
                    a[13] = g * B + l * N + w * t + x * v;
                    a[14] = g * D + l * E + w * wa + x * J;
                    a[15] = g * P + l * G + w * pb + x * b
                },
                createOrtho: function(a, b, c, d, f, g, k) {
                    var q = 1 / (c - b)
                      , p = 1 / (f - d)
                      , l = 1 / (k - g);
                    a[0] = 2 * q;
                    a[1] = 0;
                    a[2] = 0;
                    a[3] = 0;
                    a[4] = 0;
                    a[5] = 2 * p;
                    a[6] = 0;
                    a[7] = 0;
                    a[8] = 0;
                    a[9] = 0;
                    a[10] = -2 * l;
                    a[11] = 0;
                    a[12] = -(b + c) * q;
                    a[13] = -(d + f) * p;
                    a[14] = -(g + k) * l;
                    a[15] = 1
                },
                identity: function(a) {
                    a[0] = 1;
                    a[1] = 0;
                    a[2] = 0;
                    a[3] = 0;
                    a[4] = 0;
                    a[5] = 1;
                    a[6] = 0;
                    a[7] = 0;
                    a[8] = 0;
                    a[9] = 0;
                    a[10] = 1;
                    a[11] = 0;
                    a[12] = 0;
                    a[13] = 0;
                    a[14] = 0;
                    a[15] = 1
                },
                get: function(a, b) {
                    return a[b]
                },
                set: function(a, b, c) {
                    return a[b] = c
                }
            }
              , R = {}
              , mk = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.w = d;
                this.x = a;
                this.y = b;
                this.z = c
            };
            h["lime.math.Vector4"] = mk;
            mk.__name__ = "lime.math.Vector4";
            mk.prototype = {
                __class__: mk
            };
            var Cc = function() {};
            h["lime.media.AudioBuffer"] = Cc;
            Cc.__name__ = "lime.media.AudioBuffer";
            Cc.fromBytes = function(a) {
                if (null == a)
                    return null;
                var b = new Cc;
                b.set_src(new Howl({
                    src: ["data:" + Cc.__getCodec(a) + ";base64," + De.encode(a)],
                    html5: !0,
                    preload: !1
                }));
                return b
            }
            ;
            Cc.fromFile = function(a) {
                if (null == a)
                    return null;
                var b = new Cc;
                b.__srcHowl = new Howl({
                    src: [a],
                    preload: !1
                });
                return b
            }
            ;
            Cc.fromFiles = function(a) {
                var b = new Cc;
                b.__srcHowl = new Howl({
                    src: a,
                    preload: !1
                });
                return b
            }
            ;
            Cc.loadFromFile = function(a) {
                var b = new Bd
                  , c = Cc.fromFile(a);
                null != c ? null != c && (c.__srcHowl.on("load", function() {
                    b.complete(c)
                }),
                c.__srcHowl.on("loaderror", function(a, c) {
                    b.error(c)
                }),
                c.__srcHowl.load()) : b.error(null);
                return b.future
            }
            ;
            Cc.loadFromFiles = function(a) {
                var b = new Bd
                  , c = Cc.fromFiles(a);
                null != c ? (c.__srcHowl.on("load", function() {
                    b.complete(c)
                }),
                c.__srcHowl.on("loaderror", function() {
                    b.error(null)
                }),
                c.__srcHowl.load()) : b.error(null);
                return b.future
            }
            ;
            Cc.__getCodec = function(a) {
                switch (a.getString(0, 4)) {
                case "OggS":
                    return "audio/ogg";
                case "RIFF":
                    if ("WAVE" == a.getString(8, 4))
                        return "audio/wav";
                    var b = a.b[1]
                      , c = a.b[2];
                    switch (a.b[0]) {
                    case 73:
                        if (68 == b && 51 == c)
                            return "audio/mp3";
                        break;
                    case 255:
                        switch (b) {
                        case 243:
                        case 250:
                        case 251:
                            return "audio/mp3"
                        }
                    }
                    break;
                case "fLaC":
                    return "audio/flac";
                default:
                    switch (b = a.b[1],
                    c = a.b[2],
                    a.b[0]) {
                    case 73:
                        if (68 == b && 51 == c)
                            return "audio/mp3";
                        break;
                    case 255:
                        switch (b) {
                        case 243:
                        case 250:
                        case 251:
                            return "audio/mp3"
                        }
                    }
                }
                Ja.error("Unsupported sound format", {
                    fileName: "lime/media/AudioBuffer.hx",
                    lineNumber: 440,
                    className: "lime.media.AudioBuffer",
                    methodName: "__getCodec"
                });
                return null
            }
            ;
            Cc.prototype = {
                set_src: function(a) {
                    return this.__srcHowl = a
                },
                __class__: Cc,
                __properties__: {
                    set_src: "set_src"
                }
            };
            var Ak = function(a) {
                if ("custom" != a) {
                    if (null == a || "web" == a)
                        try {
                            window.AudioContext = window.AudioContext || window.webkitAudioContext,
                            this.web = new window.AudioContext,
                            this.type = "web"
                        } catch (b) {
                            Ua.lastError = b
                        }
                    null == this.web && "web" != a && (this.html5 = new zk,
                    this.type = "html5")
                } else
                    this.type = "custom"
            };
            h["lime.media.AudioContext"] = Ak;
            Ak.__name__ = "lime.media.AudioContext";
            Ak.prototype = {
                __class__: Ak
            };
            var Ne = function() {};
            h["lime.media.AudioManager"] = Ne;
            Ne.__name__ = "lime.media.AudioManager";
            Ne.init = function(a) {
                if (null == Ne.context) {
                    if (null == a && (Ne.context = new Ak,
                    a = Ne.context,
                    "openal" == a.type)) {
                        var b = a.openal
                          , c = b.openDevice();
                        c = b.createContext(c);
                        b.makeContextCurrent(c);
                        b.processContext(c)
                    }
                    Ne.context = a
                }
            }
            ;
            var jl = function(a, b, c, d) {
                null == d && (d = 0);
                null == b && (b = 0);
                this.onComplete = new Bc;
                this.buffer = a;
                this.offset = b;
                this.__backend = new nk(this);
                null != c && 0 != c && this.set_length(c);
                this.set_loops(d);
                null != a && this.init()
            };
            h["lime.media.AudioSource"] = jl;
            jl.__name__ = "lime.media.AudioSource";
            jl.prototype = {
                dispose: function() {
                    this.__backend.dispose()
                },
                init: function() {
                    this.__backend.init()
                },
                play: function() {
                    this.__backend.play()
                },
                stop: function() {
                    this.__backend.stop()
                },
                get_currentTime: function() {
                    return this.__backend.getCurrentTime()
                },
                set_currentTime: function(a) {
                    return this.__backend.setCurrentTime(a)
                },
                get_gain: function() {
                    return this.__backend.getGain()
                },
                set_gain: function(a) {
                    return this.__backend.setGain(a)
                },
                set_length: function(a) {
                    return this.__backend.setLength(a)
                },
                set_loops: function(a) {
                    return this.__backend.setLoops(a)
                },
                get_position: function() {
                    return this.__backend.getPosition()
                },
                set_position: function(a) {
                    return this.__backend.setPosition(a)
                },
                __class__: jl,
                __properties__: {
                    set_loops: "set_loops",
                    set_length: "set_length",
                    set_position: "set_position",
                    get_position: "get_position",
                    set_gain: "set_gain",
                    get_gain: "get_gain",
                    set_currentTime: "set_currentTime",
                    get_currentTime: "get_currentTime"
                }
            };
            var zk = function() {};
            h["lime.media.HTML5AudioContext"] = zk;
            zk.__name__ = "lime.media.HTML5AudioContext";
            zk.prototype = {
                __class__: zk
            };
            var kl = function() {};
            h["lime.media.OpenALAudioContext"] = kl;
            kl.__name__ = "lime.media.OpenALAudioContext";
            kl.prototype = {
                createContext: function(a, b) {
                    return Ff.createContext(a, b)
                },
                makeContextCurrent: function(a) {
                    return Ff.makeContextCurrent(a)
                },
                openDevice: function(a) {
                    return Ff.openDevice(a)
                },
                processContext: function(a) {
                    Ff.processContext(a)
                },
                __class__: kl
            };
            var Ff = function() {};
            h["lime.media.openal.ALC"] = Ff;
            Ff.__name__ = "lime.media.openal.ALC";
            Ff.createContext = function(a, b) {
                return null
            }
            ;
            Ff.makeContextCurrent = function(a) {
                return !1
            }
            ;
            Ff.openDevice = function(a) {
                return null
            }
            ;
            Ff.processContext = function(a) {}
            ;
            var Si = function() {};
            h["lime.net._IHTTPRequest"] = Si;
            Si.__name__ = "lime.net._IHTTPRequest";
            Si.__isInterface__ = !0;
            Si.prototype = {
                __class__: Si
            };
            var re = function(a) {
                this.uri = a;
                this.contentType = "application/x-www-form-urlencoded";
                this.followRedirects = !0;
                this.enableResponseHeaders = !1;
                this.formData = new Ia;
                this.headers = [];
                this.method = "GET";
                this.timeout = 3E4;
                this.withCredentials = !1;
                this.manageCookies = !0;
                this.__backend = new Ea;
                this.__backend.init(this)
            };
            h["lime.net._HTTPRequest.AbstractHTTPRequest"] = re;
            re.__name__ = "lime.net._HTTPRequest.AbstractHTTPRequest";
            re.__interfaces__ = [Si];
            re.prototype = {
                __class__: re
            };
            var Gf = function(a) {
                re.call(this, a)
            };
            h["lime.net._HTTPRequest_Bytes"] = Gf;
            Gf.__name__ = "lime.net._HTTPRequest_Bytes";
            Gf.__super__ = re;
            Gf.prototype = v(re.prototype, {
                fromBytes: function(a) {
                    return a
                },
                load: function(a) {
                    var b = this;
                    null != a && (this.uri = a);
                    var c = new Bd;
                    a = this.__backend.loadData(this.uri);
                    a.onProgress(m(c, c.progress));
                    a.onError(function(a) {
                        b.responseData = a.responseData;
                        c.error(a.error)
                    });
                    a.onComplete(function(a) {
                        b.responseData = b.fromBytes(a);
                        c.complete(b.responseData)
                    });
                    return c.future
                },
                __class__: Gf
            });
            var Eg = function(a) {
                re.call(this, a)
            };
            h["lime.net._HTTPRequest_String"] = Eg;
            Eg.__name__ = "lime.net._HTTPRequest_String";
            Eg.__super__ = re;
            Eg.prototype = v(re.prototype, {
                load: function(a) {
                    var b = this;
                    null != a && (this.uri = a);
                    var c = new Bd;
                    a = this.__backend.loadText(this.uri);
                    a.onProgress(m(c, c.progress));
                    a.onError(function(a) {
                        b.responseData = a.responseData;
                        c.error(a.error)
                    });
                    a.onComplete(function(a) {
                        b.responseData = a;
                        c.complete(b.responseData)
                    });
                    return c.future
                },
                __class__: Eg
            });
            var Bg = function(a, b) {
                this.error = a;
                this.responseData = b
            };
            h["lime.net._HTTPRequestErrorResponse"] = Bg;
            Bg.__name__ = "lime.net._HTTPRequestErrorResponse";
            Bg.prototype = {
                __class__: Bg
            };
            var Mi = function(a, b) {
                null == b && (b = "");
                this.name = a;
                this.value = b
            };
            h["lime.net.HTTPRequestHeader"] = Mi;
            Mi.__name__ = "lime.net.HTTPRequestHeader";
            Mi.prototype = {
                __class__: Mi
            };
            var Ti = function(a) {
                re.call(this, a)
            };
            h["lime.net._HTTPRequest_lime_utils_Bytes"] = Ti;
            Ti.__name__ = "lime.net._HTTPRequest_lime_utils_Bytes";
            Ti.__super__ = Gf;
            Ti.prototype = v(Gf.prototype, {
                fromBytes: function(a) {
                    return ag.fromBytes(a)
                },
                __class__: Ti
            });
            var Ui = function(a) {
                re.call(this, a)
            };
            h["lime.net._HTTPRequest_openfl_utils_ByteArray"] = Ui;
            Ui.__name__ = "lime.net._HTTPRequest_openfl_utils_ByteArray";
            Ui.__super__ = Gf;
            Ui.prototype = v(Gf.prototype, {
                fromBytes: function(a) {
                    return Kd.fromBytes(a)
                },
                __class__: Ui
            });
            var zc = function() {};
            h["lime.system.Clipboard"] = zc;
            zc.__name__ = "lime.system.Clipboard";
            zc.__properties__ = {
                set_text: "set_text",
                get_text: "get_text"
            };
            zc.__update = function() {
                var a = zc._text;
                zc._text = a;
                zc.__updated = !0;
                zc._text != a && zc.onUpdate.dispatch()
            }
            ;
            zc.get_text = function() {
                zc.__update();
                return zc._text
            }
            ;
            zc.set_text = function(a) {
                var b = zc._text;
                zc._text = a;
                var c = F.current.__window;
                null != c && c.__backend.setClipboard(a);
                zc._text != b && zc.onUpdate.dispatch();
                return a
            }
            ;
            var bg = N["lime.system.Endian"] = {
                __ename__: "lime.system.Endian",
                __constructs__: null,
                LITTLE_ENDIAN: {
                    _hx_name: "LITTLE_ENDIAN",
                    _hx_index: 0,
                    __enum__: "lime.system.Endian",
                    toString: r
                },
                BIG_ENDIAN: {
                    _hx_name: "BIG_ENDIAN",
                    _hx_index: 1,
                    __enum__: "lime.system.Endian",
                    toString: r
                }
            };
            bg.__constructs__ = [bg.LITTLE_ENDIAN, bg.BIG_ENDIAN];
            bg.__empty_constructs__ = [bg.LITTLE_ENDIAN, bg.BIG_ENDIAN];
            var Oe = function(a, b) {
                this.onUpdate = new pk;
                this.type = a;
                this.id = b
            };
            h["lime.system.Sensor"] = Oe;
            Oe.__name__ = "lime.system.Sensor";
            Oe.registerSensor = function(a, b) {
                a = new Oe(a,b);
                Oe.sensors.push(a);
                return Oe.sensorByID.h[b] = a
            }
            ;
            Oe.prototype = {
                __class__: Oe
            };
            var Oj = N["lime.system.SensorType"] = {
                __ename__: "lime.system.SensorType",
                __constructs__: null,
                ACCELEROMETER: {
                    _hx_name: "ACCELEROMETER",
                    _hx_index: 0,
                    __enum__: "lime.system.SensorType",
                    toString: r
                }
            };
            Oj.__constructs__ = [Oj.ACCELEROMETER];
            Oj.__empty_constructs__ = [Oj.ACCELEROMETER];
            var Dc = function() {};
            h["lime.system.System"] = Dc;
            Dc.__name__ = "lime.system.System";
            Dc.__properties__ = {
                get_endianness: "get_endianness"
            };
            Dc.embed = t.lime.embed = function(a, b, c, d, f) {
                if (null != Dc.__applicationEntryPoint && Object.prototype.hasOwnProperty.call(Dc.__applicationEntryPoint.h, a)) {
                    var g = "string" == typeof b ? window.document.getElementById(b) : null == b ? window.document.createElement("div") : b;
                    null == g ? window.console.log("[lime.embed] ERROR: Cannot find target element: " + G.string(b)) : (null == c && (c = 0),
                    null == d && (d = 0),
                    null == f && (f = {}),
                    Object.prototype.hasOwnProperty.call(f, "background") && "string" == typeof f.background && (b = P.replace(G.string(f.background), "#", ""),
                    -1 < b.indexOf("0x") ? f.background = G.parseInt(b) : f.background = G.parseInt("0x" + b)),
                    f.element = g,
                    f.width = c,
                    f.height = d,
                    Dc.__applicationEntryPoint.h[a](f))
                }
            }
            ;
            Dc.exit = function(a) {
                var b = F.current;
                if (null != b && (b.onExit.dispatch(a),
                b.onExit.canceled))
                    return;
                null != b && null != b.__window && b.__window.close()
            }
            ;
            Dc.getTimer = function() {
                return window.performance.now() | 0
            }
            ;
            Dc.openURL = function(a, b) {
                null == b && (b = "_blank");
                null != a && window.open(a, b)
            }
            ;
            Dc.__registerEntryPoint = function(a, b) {
                null == Dc.__applicationEntryPoint && (Dc.__applicationEntryPoint = new Ia);
                Dc.__applicationEntryPoint.h[a] = b
            }
            ;
            Dc.get_endianness = function() {
                if (null == Dc.__endianness) {
                    var a = new ArrayBuffer(2)
                      , b = null
                      , c = null
                      , d = null
                      , f = null
                      , g = null
                      , k = b = null != b ? new Uint8Array(b) : null != c ? new Uint8Array(c) : null != d ? new Uint8Array(d.__array) : null != f ? new Uint8Array(f) : null != a ? null == g ? new Uint8Array(a,0) : new Uint8Array(a,0,g) : null;
                    g = f = d = c = b = null;
                    b = null != b ? new Uint16Array(b) : null != c ? new Uint16Array(c) : null != d ? new Uint16Array(d.__array) : null != f ? new Uint16Array(f) : null != a ? null == g ? new Uint16Array(a,0) : new Uint16Array(a,0,g) : null;
                    k[0] = 170;
                    k[1] = 187;
                    Dc.__endianness = 43707 == b[0] ? bg.BIG_ENDIAN : bg.LITTLE_ENDIAN
                }
                return Dc.__endianness
            }
            ;
            var uc = function(a) {
                this.onDisconnect = new Bc;
                this.onButtonUp = new Qi;
                this.onButtonDown = new Qi;
                this.onAxisMove = new wk;
                this.id = a;
                this.connected = !0
            };
            h["lime.ui.Gamepad"] = uc;
            uc.__name__ = "lime.ui.Gamepad";
            uc.__connect = function(a) {
                if (!uc.devices.h.hasOwnProperty(a)) {
                    var b = new uc(a);
                    uc.devices.h[a] = b;
                    uc.onConnect.dispatch(b)
                }
            }
            ;
            uc.__disconnect = function(a) {
                var b = uc.devices.h[a];
                null != b && (b.connected = !1);
                uc.devices.remove(a);
                null != b && b.onDisconnect.dispatch()
            }
            ;
            uc.prototype = {
                __class__: uc
            };
            var mc = function(a) {
                this.onHatMove = new uk;
                this.onDisconnect = new Bc;
                this.onButtonUp = new Of;
                this.onButtonDown = new Of;
                this.onAxisMove = new tk;
                this.id = a;
                this.connected = !0
            };
            h["lime.ui.Joystick"] = mc;
            mc.__name__ = "lime.ui.Joystick";
            mc.__connect = function(a) {
                if (!mc.devices.h.hasOwnProperty(a)) {
                    var b = new mc(a);
                    mc.devices.h[a] = b;
                    mc.onConnect.dispatch(b)
                }
            }
            ;
            mc.__disconnect = function(a) {
                var b = mc.devices.h[a];
                null != b && (b.connected = !1);
                mc.devices.remove(a);
                null != b && b.onDisconnect.dispatch()
            }
            ;
            mc.__getDeviceData = function() {
                var a = null;
                try {
                    a = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : null
                } catch (b) {
                    Ua.lastError = b
                }
                return a
            }
            ;
            mc.prototype = {
                __class__: mc
            };
            var cb = {
                __properties__: {
                    get_shiftKey: "get_shiftKey",
                    get_metaKey: "get_metaKey",
                    get_ctrlKey: "get_ctrlKey",
                    get_altKey: "get_altKey"
                },
                get_altKey: function(a) {
                    return 0 >= (a & 256) ? 0 < (a & 512) : !0
                },
                get_ctrlKey: function(a) {
                    return 0 >= (a & 64) ? 0 < (a & 128) : !0
                },
                get_metaKey: function(a) {
                    return 0 >= (a & 1024) ? 0 < (a & 2048) : !0
                },
                get_shiftKey: function(a) {
                    return 0 >= (a & 1) ? 0 < (a & 2) : !0
                }
            }
              , ub = N["lime.ui.MouseCursor"] = {
                __ename__: "lime.ui.MouseCursor",
                __constructs__: null,
                ARROW: {
                    _hx_name: "ARROW",
                    _hx_index: 0,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                CROSSHAIR: {
                    _hx_name: "CROSSHAIR",
                    _hx_index: 1,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                DEFAULT: {
                    _hx_name: "DEFAULT",
                    _hx_index: 2,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                MOVE: {
                    _hx_name: "MOVE",
                    _hx_index: 3,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                POINTER: {
                    _hx_name: "POINTER",
                    _hx_index: 4,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                RESIZE_NESW: {
                    _hx_name: "RESIZE_NESW",
                    _hx_index: 5,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                RESIZE_NS: {
                    _hx_name: "RESIZE_NS",
                    _hx_index: 6,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                RESIZE_NWSE: {
                    _hx_name: "RESIZE_NWSE",
                    _hx_index: 7,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                RESIZE_WE: {
                    _hx_name: "RESIZE_WE",
                    _hx_index: 8,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                TEXT: {
                    _hx_name: "TEXT",
                    _hx_index: 9,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                WAIT: {
                    _hx_name: "WAIT",
                    _hx_index: 10,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                WAIT_ARROW: {
                    _hx_name: "WAIT_ARROW",
                    _hx_index: 11,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                },
                CUSTOM: {
                    _hx_name: "CUSTOM",
                    _hx_index: 12,
                    __enum__: "lime.ui.MouseCursor",
                    toString: r
                }
            };
            ub.__constructs__ = [ub.ARROW, ub.CROSSHAIR, ub.DEFAULT, ub.MOVE, ub.POINTER, ub.RESIZE_NESW, ub.RESIZE_NS, ub.RESIZE_NWSE, ub.RESIZE_WE, ub.TEXT, ub.WAIT, ub.WAIT_ARROW, ub.CUSTOM];
            ub.__empty_constructs__ = [ub.ARROW, ub.CROSSHAIR, ub.DEFAULT, ub.MOVE, ub.POINTER, ub.RESIZE_NESW, ub.RESIZE_NS, ub.RESIZE_NWSE, ub.RESIZE_WE, ub.TEXT, ub.WAIT, ub.WAIT_ARROW, ub.CUSTOM];
            var Pd = N["lime.ui.MouseWheelMode"] = {
                __ename__: "lime.ui.MouseWheelMode",
                __constructs__: null,
                PIXELS: {
                    _hx_name: "PIXELS",
                    _hx_index: 0,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: r
                },
                LINES: {
                    _hx_name: "LINES",
                    _hx_index: 1,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: r
                },
                PAGES: {
                    _hx_name: "PAGES",
                    _hx_index: 2,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: r
                },
                UNKNOWN: {
                    _hx_name: "UNKNOWN",
                    _hx_index: 3,
                    __enum__: "lime.ui.MouseWheelMode",
                    toString: r
                }
            };
            Pd.__constructs__ = [Pd.PIXELS, Pd.LINES, Pd.PAGES, Pd.UNKNOWN];
            Pd.__empty_constructs__ = [Pd.PIXELS, Pd.LINES, Pd.PAGES, Pd.UNKNOWN];
            var ec = function(a, b, c, d, f, g, k) {
                this.x = a;
                this.y = b;
                this.id = c;
                this.dx = d;
                this.dy = f;
                this.pressure = g;
                this.device = k
            };
            h["lime.ui.Touch"] = ec;
            ec.__name__ = "lime.ui.Touch";
            ec.prototype = {
                __class__: ec
            };
            var Fg = function(a, b) {
                this.clickCount = 0;
                this.onTextInput = new Oi;
                this.onTextEdit = new vk;
                this.onRestore = new Bc;
                this.onResize = new Ni;
                this.onRenderContextRestored = new Pi;
                this.onRenderContextLost = new Bc;
                this.onRender = new Pi;
                this.onMove = new sh;
                this.onMouseWheel = new sk;
                this.onMouseUp = new qk;
                this.onMouseMoveRelative = new sh;
                this.onMouseMove = new sh;
                this.onMouseDown = new rk;
                this.onMinimize = new Bc;
                this.onLeave = new Bc;
                this.onKeyUp = new Ri;
                this.onKeyDown = new Ri;
                this.onFullscreen = new Bc;
                this.onFocusOut = new Bc;
                this.onFocusIn = new Bc;
                this.onExpose = new Bc;
                this.onEnter = new Bc;
                this.onDropFile = new Oi;
                this.onDeactivate = new Bc;
                this.onClose = new Bc;
                this.onActivate = new Bc;
                this.application = a;
                this.__attributes = null != b ? b : {};
                Object.prototype.hasOwnProperty.call(this.__attributes, "parameters") && (this.parameters = this.__attributes.parameters);
                this.__height = this.__width = 0;
                this.__fullscreen = !1;
                this.__scale = 1;
                this.__y = this.__x = 0;
                this.__title = Object.prototype.hasOwnProperty.call(this.__attributes, "title") ? this.__attributes.title : "";
                this.id = -1;
                this.__backend = new Ma(this)
            };
            h["lime.ui.Window"] = Fg;
            Fg.__name__ = "lime.ui.Window";
            Fg.prototype = {
                close: function() {
                    this.__backend.close()
                },
                set_cursor: function(a) {
                    return this.__backend.setCursor(a)
                },
                setTextInputRect: function(a) {
                    return this.__backend.setTextInputRect(a)
                },
                __class__: Fg,
                __properties__: {
                    set_cursor: "set_cursor"
                }
            };
            var se = function() {
                this.data = new Ia;
                this.paths = []
            };
            h["lime.utils.AssetBundle"] = se;
            se.__name__ = "lime.utils.AssetBundle";
            se.fromBytes = function(a) {
                a = new Ki(a);
                return se.__extractBundle(a)
            }
            ;
            se.loadFromBytes = function(a) {
                return nc.withValue(se.fromBytes(a))
            }
            ;
            se.loadFromFile = function(a) {
                return ag.loadFromFile(a).then(se.loadFromBytes)
            }
            ;
            se.__extractBundle = function(a) {
                var b = rh.readZip(a);
                a = new se;
                for (b = b.h; null != b; ) {
                    var c = b.item;
                    b = b.next;
                    if (c.compressed) {
                        var d = a.data
                          , f = c.fileName
                          , g = ag.decompress(c.data, df.DEFLATE);
                        d.h[f] = g
                    } else
                        a.data.h[c.fileName] = c.data;
                    a.paths.push(c.fileName)
                }
                return a
            }
            ;
            se.prototype = {
                __class__: se
            };
            var Bk = function() {
                this.enabled = !0;
                this.audio = new Ia;
                this.font = new Ia;
                this.image = new Ia;
                this.version = 326616
            };
            h["lime.utils.AssetCache"] = Bk;
            Bk.__name__ = "lime.utils.AssetCache";
            Bk.prototype = {
                exists: function(a, b) {
                    return ("IMAGE" == b || null == b) && Object.prototype.hasOwnProperty.call(this.image.h, a) || ("FONT" == b || null == b) && Object.prototype.hasOwnProperty.call(this.font.h, a) || ("SOUND" == b || "MUSIC" == b || null == b) && Object.prototype.hasOwnProperty.call(this.audio.h, a) ? !0 : !1
                },
                set: function(a, b, c) {
                    switch (b) {
                    case "FONT":
                        this.font.h[a] = c;
                        break;
                    case "IMAGE":
                        if (!(c instanceof Tb))
                            throw aa.thrown("Cannot cache non-Image asset: " + G.string(c) + " as Image");
                        this.image.h[a] = c;
                        break;
                    case "MUSIC":
                    case "SOUND":
                        if (!(c instanceof Cc))
                            throw aa.thrown("Cannot cache non-AudioBuffer asset: " + G.string(c) + " as AudioBuffer");
                        this.audio.h[a] = c;
                        break;
                    default:
                        throw aa.thrown(b + " assets are not cachable");
                    }
                },
                clear: function(a) {
                    if (null == a)
                        this.audio = new Ia,
                        this.font = new Ia,
                        this.image = new Ia;
                    else {
                        var b = this.audio.h;
                        b = Object.keys(b);
                        for (var c = b.length, d = 0; d < c; ) {
                            var f = b[d++];
                            if (P.startsWith(f, a)) {
                                var g = this.audio;
                                Object.prototype.hasOwnProperty.call(g.h, f) && delete g.h[f]
                            }
                        }
                        b = this.font.h;
                        b = Object.keys(b);
                        c = b.length;
                        for (d = 0; d < c; )
                            f = b[d++],
                            P.startsWith(f, a) && (g = this.font,
                            Object.prototype.hasOwnProperty.call(g.h, f) && delete g.h[f]);
                        b = this.image.h;
                        b = Object.keys(b);
                        c = b.length;
                        for (d = 0; d < c; )
                            f = b[d++],
                            P.startsWith(f, a) && (g = this.image,
                            Object.prototype.hasOwnProperty.call(g.h, f) && delete g.h[f])
                    }
                },
                __class__: Bk
            };
            var Ob = function() {
                this.types = new Ia;
                this.sizes = new Ia;
                this.preload = new Ia;
                this.paths = new Ia;
                this.pathGroups = new Ia;
                this.classTypes = new Ia;
                this.cachedText = new Ia;
                this.cachedImages = new Ia;
                this.cachedFonts = new Ia;
                this.cachedBytes = new Ia;
                this.cachedAudioBuffers = new Ia;
                this.onChange = new Bc;
                this.bytesTotal = this.bytesLoaded = 0
            };
            h["lime.utils.AssetLibrary"] = Ob;
            Ob.__name__ = "lime.utils.AssetLibrary";
            Ob.fromBundle = function(a) {
                if (Object.prototype.hasOwnProperty.call(a.data.h, "library.json")) {
                    var b = td.fromBytes(a.data.h["library.json"]);
                    if (null != b) {
                        if (null == b.libraryType)
                            var c = new Ob;
                        else if (c = h[b.libraryType],
                        null != c)
                            c = z.createInstance(c, b.libraryArgs);
                        else
                            return Ja.warn("Could not find library type: " + b.libraryType, {
                                fileName: "lime/utils/AssetLibrary.hx",
                                lineNumber: 122,
                                className: "lime.utils.AssetLibrary",
                                methodName: "fromBundle"
                            }),
                            null;
                        c.__fromBundle(a, b);
                        return c
                    }
                } else
                    return c = new Ob,
                    c.__fromBundle(a),
                    c;
                return null
            }
            ;
            Ob.fromManifest = function(a) {
                if (null == a)
                    return null;
                if (null == a.libraryType)
                    var b = new Ob;
                else if (b = h[a.libraryType],
                null != b)
                    b = z.createInstance(b, a.libraryArgs);
                else
                    return Ja.warn("Could not find library type: " + a.libraryType, {
                        fileName: "lime/utils/AssetLibrary.hx",
                        lineNumber: 160,
                        className: "lime.utils.AssetLibrary",
                        methodName: "fromManifest"
                    }),
                    null;
                b.__fromManifest(a);
                return b
            }
            ;
            Ob.prototype = {
                exists: function(a, b) {
                    b = null != b ? xa.__cast(b, String) : null;
                    a = this.types.h[a];
                    return null == a || a != b && ("SOUND" != b && "MUSIC" != b || "MUSIC" != a && "SOUND" != a) && "BINARY" != b && null != b && ("BINARY" != a || "TEXT" != b) ? !1 : !0
                },
                getAsset: function(a, b) {
                    switch (b) {
                    case "BINARY":
                        return this.getBytes(a);
                    case "FONT":
                        return this.getFont(a);
                    case "IMAGE":
                        return this.getImage(a);
                    case "MUSIC":
                    case "SOUND":
                        return this.getAudioBuffer(a);
                    case "TEMPLATE":
                        throw aa.thrown("Not sure how to get template: " + a);
                    case "TEXT":
                        return this.getText(a);
                    default:
                        throw aa.thrown("Unknown asset type: " + b);
                    }
                },
                getAudioBuffer: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a) ? this.cachedAudioBuffers.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? Cc.fromBytes(xa.__cast(z.createInstance(this.classTypes.h[a], []), xb)) : Cc.fromFile(this.getPath(a))
                },
                getBytes: function(a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a))
                        return this.cachedBytes.h[a];
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
                        var b = ag.ofString(this.cachedText.h[a]);
                        return this.cachedBytes.h[a] = b
                    }
                    return Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? xa.__cast(z.createInstance(this.classTypes.h[a], []), xb) : ag.fromFile(this.getPath(a))
                },
                getFont: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a) ? this.cachedFonts.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? xa.__cast(z.createInstance(this.classTypes.h[a], []), db) : db.fromFile(this.getPath(a))
                },
                getImage: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) ? this.cachedImages.h[a] : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? xa.__cast(z.createInstance(this.classTypes.h[a], []), Tb) : Tb.fromFile(this.getPath(a))
                },
                getPath: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.paths.h, a) ? this.paths.h[a] : Object.prototype.hasOwnProperty.call(this.pathGroups.h, a) ? this.pathGroups.h[a][0] : null
                },
                getText: function(a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a))
                        return this.cachedText.h[a];
                    a = this.getBytes(a);
                    return null == a ? null : a.getString(0, a.length)
                },
                isLocal: function(a, b) {
                    if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a))
                        return !0;
                    b = xa.__cast(b, String);
                    if (null == b)
                        return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.cachedText.h, a) || Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) || Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a) ? !0 : Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
                    switch (b) {
                    case "FONT":
                        return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
                    case "IMAGE":
                        return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a);
                    case "MUSIC":
                    case "SOUND":
                        return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a);
                    default:
                        return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? !0 : Object.prototype.hasOwnProperty.call(this.cachedText.h, a)
                    }
                },
                load: function() {
                    if (this.loaded)
                        return nc.withValue(this);
                    if (null == this.promise) {
                        this.promise = new Bd;
                        this.bytesLoadedCache = new Ia;
                        this.assetsLoaded = 0;
                        this.assetsTotal = 1;
                        for (var a = Object.keys(this.preload.h), b = a.length, c = 0; c < b; ) {
                            var d = a[c++];
                            if (this.preload.h[d]) {
                                Ja.verbose("Preloading asset: " + d + " [" + this.types.h[d] + "]", {
                                    fileName: "lime/utils/AssetLibrary.hx",
                                    lineNumber: 408,
                                    className: "lime.utils.AssetLibrary",
                                    methodName: "load"
                                });
                                var f = this.types.h[d];
                                if (null != f)
                                    switch (f) {
                                    case "BINARY":
                                        this.assetsTotal++;
                                        f = this.loadBytes(d);
                                        f.onProgress(function(a, b) {
                                            return function(c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        f.onError(function(a, b) {
                                            return function(c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        f.onComplete(function(a, b) {
                                            return function(c) {
                                                b[0].loadBytes_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "FONT":
                                        this.assetsTotal++;
                                        f = this.loadFont(d);
                                        f.onProgress(function(a, b) {
                                            return function(c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        f.onError(function(a, b) {
                                            return function(c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        f.onComplete(function(a, b) {
                                            return function(c) {
                                                b[0].loadFont_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "IMAGE":
                                        this.assetsTotal++;
                                        f = this.loadImage(d);
                                        f.onProgress(function(a, b) {
                                            return function(c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        f.onError(function(a, b) {
                                            return function(c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        f.onComplete(function(a, b) {
                                            return function(c) {
                                                b[0].loadImage_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "MUSIC":
                                    case "SOUND":
                                        this.assetsTotal++;
                                        f = this.loadAudioBuffer(d);
                                        f.onProgress(function(a, b) {
                                            return function(c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this]));
                                        f.onError(function(a, b) {
                                            return function(c) {
                                                b[0].loadAudioBuffer_onError(a[0], c)
                                            }
                                        }([d], [this]));
                                        f.onComplete(function(a, b) {
                                            return function(c) {
                                                b[0].loadAudioBuffer_onComplete(a[0], c)
                                            }
                                        }([d], [this]));
                                        break;
                                    case "TEXT":
                                        this.assetsTotal++,
                                        f = this.loadText(d),
                                        f.onProgress(function(a, b) {
                                            return function(c, d) {
                                                b[0].load_onProgress(a[0], c, d)
                                            }
                                        }([d], [this])),
                                        f.onError(function(a, b) {
                                            return function(c) {
                                                b[0].load_onError(a[0], c)
                                            }
                                        }([d], [this])),
                                        f.onComplete(function(a, b) {
                                            return function(c) {
                                                b[0].loadText_onComplete(a[0], c)
                                            }
                                        }([d], [this]))
                                    }
                            }
                        }
                        this.__assetLoaded(null)
                    }
                    return this.promise.future
                },
                loadAudioBuffer: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a) ? nc.withValue(this.cachedAudioBuffers.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? nc.withValue(Cc.fromBytes(xa.__cast(z.createInstance(this.classTypes.h[a], []), xb))) : Object.prototype.hasOwnProperty.call(this.pathGroups.h, a) ? Cc.loadFromFiles(this.pathGroups.h[a]) : Cc.loadFromFile(this.paths.h[a])
                },
                loadBytes: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? nc.withValue(this.cachedBytes.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? nc.withValue(z.createInstance(this.classTypes.h[a], [])) : ag.loadFromFile(this.getPath(a))
                },
                loadFont: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a) ? nc.withValue(this.cachedFonts.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? (a = z.createInstance(this.classTypes.h[a], []),
                    a.__loadFromName(a.name)) : db.loadFromName(this.getPath(a))
                },
                loadImage: function(a) {
                    var b = this;
                    return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) ? nc.withValue(this.cachedImages.h[a]) : Object.prototype.hasOwnProperty.call(this.classTypes.h, a) ? nc.withValue(z.createInstance(this.classTypes.h[a], [])) : Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) ? Tb.loadFromBytes(this.cachedBytes.h[a]).then(function(c) {
                        var d = b.cachedBytes;
                        Object.prototype.hasOwnProperty.call(d.h, a) && delete d.h[a];
                        b.cachedImages.h[a] = c;
                        return nc.withValue(c)
                    }) : Tb.loadFromFile(this.getPath(a))
                },
                loadText: function(a) {
                    if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a))
                        return nc.withValue(this.cachedText.h[a]);
                    if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
                        var b = this.getBytes(a);
                        if (null == b)
                            return nc.withValue(null);
                        b = b.getString(0, b.length);
                        this.cachedText.h[a] = b;
                        return nc.withValue(b)
                    }
                    return (new Eg).load(this.getPath(a))
                },
                unload: function() {
                    this.cachedBytes.h = Object.create(null);
                    this.cachedFonts.h = Object.create(null);
                    this.cachedImages.h = Object.create(null);
                    this.cachedAudioBuffers.h = Object.create(null);
                    this.cachedText.h = Object.create(null)
                },
                __assetLoaded: function(a) {
                    this.assetsLoaded++;
                    null != a && Ja.verbose("Loaded asset: " + a + " [" + this.types.h[a] + "] (" + (this.assetsLoaded - 1) + "/" + (this.assetsTotal - 1) + ")", {
                        fileName: "lime/utils/AssetLibrary.hx",
                        lineNumber: 637,
                        className: "lime.utils.AssetLibrary",
                        methodName: "__assetLoaded"
                    });
                    if (null != a) {
                        var b = Object.prototype.hasOwnProperty.call(this.sizes.h, a) ? this.sizes.h[a] : 0;
                        if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
                            var c = this.bytesLoadedCache.h[a];
                            c < b && (this.bytesLoaded += b - c)
                        } else
                            this.bytesLoaded += b;
                        this.bytesLoadedCache.h[a] = b
                    }
                    this.assetsLoaded < this.assetsTotal ? this.promise.progress(this.bytesLoaded, this.bytesTotal) : (this.loaded = !0,
                    this.promise.progress(this.bytesTotal, this.bytesTotal),
                    this.promise.complete(this))
                },
                __cacheBreak: function(a) {
                    return Ha.__cacheBreak(a)
                },
                __fromBundle: function(a, b) {
                    if (null != b) {
                        var c = 0;
                        for (b = b.assets; c < b.length; ) {
                            var d = b[c];
                            ++c;
                            var f = Object.prototype.hasOwnProperty.call(d, "id") ? d.id : d.path;
                            var g = a.data.h[d.path];
                            if (Object.prototype.hasOwnProperty.call(d, "type")) {
                                var k = d.type;
                                "TEXT" == k ? this.cachedText.h[f] = null != g ? G.string(g) : null : this.cachedBytes.h[f] = g;
                                this.types.h[f] = d.type
                            } else
                                this.cachedBytes.h[f] = g,
                                this.types.h[f] = "BINARY"
                        }
                    } else
                        for (c = 0,
                        b = a.paths; c < b.length; )
                            f = b[c],
                            ++c,
                            this.cachedBytes.h[f] = a.data.h[f],
                            this.types.h[f] = "BINARY"
                },
                __fromManifest: function(a) {
                    var b = 2 <= a.version
                      , c = a.rootPath;
                    null == c && (c = "");
                    "" != c && (c += "/");
                    for (var d = 0, f = a.assets; d < f.length; ) {
                        var g = f[d];
                        ++d;
                        var k = b && Object.prototype.hasOwnProperty.call(g, "size") ? g.size : 100;
                        var q = Object.prototype.hasOwnProperty.call(g, "id") ? g.id : g.path;
                        if (Object.prototype.hasOwnProperty.call(g, "path")) {
                            var p = this.paths;
                            var l = this.__cacheBreak(this.__resolvePath(c + G.string(Aa.field(g, "path"))));
                            p.h[q] = l
                        }
                        if (Object.prototype.hasOwnProperty.call(g, "pathGroup")) {
                            p = Aa.field(g, "pathGroup");
                            l = 0;
                            for (var u = p.length; l < u; ) {
                                var n = l++;
                                p[n] = this.__cacheBreak(this.__resolvePath(c + p[n]))
                            }
                            this.pathGroups.h[q] = p
                        }
                        this.sizes.h[q] = k;
                        this.types.h[q] = g.type;
                        Object.prototype.hasOwnProperty.call(g, "preload") && (this.preload.h[q] = Aa.field(g, "preload"));
                        Object.prototype.hasOwnProperty.call(g, "className") && (k = Aa.field(g, "className"),
                        k = h[k],
                        this.classTypes.h[q] = k)
                    }
                    d = this.bytesTotal = 0;
                    for (f = a.assets; d < f.length; )
                        g = f[d],
                        ++d,
                        q = Object.prototype.hasOwnProperty.call(g, "id") ? g.id : g.path,
                        Object.prototype.hasOwnProperty.call(this.preload.h, q) && this.preload.h[q] && Object.prototype.hasOwnProperty.call(this.sizes.h, q) && (this.bytesTotal += this.sizes.h[q])
                },
                __resolvePath: function(a) {
                    a = P.replace(a, "\\", "/");
                    var b = a.indexOf(":");
                    P.startsWith(a, "http") && 0 < b ? (b += 3,
                    a = Q.substr(a, 0, b) + P.replace(Q.substr(a, b, null), "//", "/")) : a = P.replace(a, "//", "/");
                    if (-1 < a.indexOf("./")) {
                        a = a.split("/");
                        b = [];
                        for (var c = 0, d = a.length; c < d; ) {
                            var f = c++;
                            ".." == a[f] ? 0 == f || ".." == b[f - 1] ? b.push("..") : b.pop() : "." == a[f] ? 0 == f && b.push(".") : b.push(a[f])
                        }
                        a = b.join("/")
                    }
                    return a
                },
                loadAudioBuffer_onComplete: function(a, b) {
                    this.cachedAudioBuffers.h[a] = b;
                    if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a))
                        for (var c = this.pathGroups.h[a], d = Object.keys(this.pathGroups.h), f = d.length, g = 0; g < f; ) {
                            var k = d[g++];
                            if (k != a)
                                for (var q = 0; q < c.length; ) {
                                    var p = c[q];
                                    ++q;
                                    if (-1 < this.pathGroups.h[k].indexOf(p)) {
                                        this.cachedAudioBuffers.h[k] = b;
                                        break
                                    }
                                }
                        }
                    this.__assetLoaded(a)
                },
                loadAudioBuffer_onError: function(a, b) {
                    null != b && "" != b ? Ja.warn('Could not load "' + a + '": ' + G.string(b), {
                        fileName: "lime/utils/AssetLibrary.hx",
                        lineNumber: 883,
                        className: "lime.utils.AssetLibrary",
                        methodName: "loadAudioBuffer_onError"
                    }) : Ja.warn('Could not load "' + a + '"', {
                        fileName: "lime/utils/AssetLibrary.hx",
                        lineNumber: 887,
                        className: "lime.utils.AssetLibrary",
                        methodName: "loadAudioBuffer_onError"
                    });
                    this.loadAudioBuffer_onComplete(a, new Cc)
                },
                loadBytes_onComplete: function(a, b) {
                    this.cachedBytes.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadFont_onComplete: function(a, b) {
                    this.cachedFonts.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadImage_onComplete: function(a, b) {
                    this.cachedImages.h[a] = b;
                    this.__assetLoaded(a)
                },
                loadText_onComplete: function(a, b) {
                    this.cachedText.h[a] = b;
                    this.__assetLoaded(a)
                },
                load_onError: function(a, b) {
                    null != b && "" != b ? this.promise.error('Error loading asset "' + a + '": ' + G.string(b)) : this.promise.error('Error loading asset "' + a + '"')
                },
                load_onProgress: function(a, b, c) {
                    if (0 < b) {
                        var d = this.sizes.h[a];
                        0 < c ? (b /= c,
                        1 < b && (b = 1),
                        b = Math.floor(b * d)) : b > d && (b = d);
                        Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a) ? (d = this.bytesLoadedCache.h[a],
                        b != d && (this.bytesLoaded += b - d)) : this.bytesLoaded += b;
                        this.bytesLoadedCache.h[a] = b;
                        this.promise.progress(this.bytesLoaded, this.bytesTotal)
                    }
                },
                __class__: Ob
            };
            var td = function() {
                this.assets = [];
                this.libraryArgs = [];
                this.version = 2
            };
            h["lime.utils.AssetManifest"] = td;
            td.__name__ = "lime.utils.AssetManifest";
            td.fromBytes = function(a, b) {
                return null != a ? td.parse(a.getString(0, a.length), b) : null
            }
            ;
            td.loadFromFile = function(a, b) {
                a = td.__resolvePath(a);
                b = td.__resolveRootPath(b, a);
                return null == a ? null : ag.loadFromFile(a).then(function(a) {
                    return nc.withValue(td.fromBytes(a, b))
                })
            }
            ;
            td.parse = function(a, b) {
                if (null == a || "" == a)
                    return null;
                a = JSON.parse(a);
                var c = new td;
                Object.prototype.hasOwnProperty.call(a, "name") && (c.name = a.name);
                Object.prototype.hasOwnProperty.call(a, "libraryType") && (c.libraryType = a.libraryType);
                Object.prototype.hasOwnProperty.call(a, "libraryArgs") && (c.libraryArgs = a.libraryArgs);
                if (Object.prototype.hasOwnProperty.call(a, "assets")) {
                    var d = a.assets;
                    Object.prototype.hasOwnProperty.call(a, "version") && 2 >= a.version ? c.assets = od.run(d) : c.assets = d
                }
                Object.prototype.hasOwnProperty.call(a, "rootPath") && (c.rootPath = a.rootPath);
                null != b && "" != b && (c.rootPath = null == c.rootPath || "" == c.rootPath ? b : b + "/" + c.rootPath);
                return c
            }
            ;
            td.__resolvePath = function(a) {
                if (null == a)
                    return null;
                var b = a.indexOf("?");
                var c = -1 < b ? Q.substr(a, 0, b) : a;
                for (c = P.replace(c, "\\", "/"); P.endsWith(c, "/"); )
                    c = Q.substr(c, 0, c.length - 1);
                return P.endsWith(c, ".bundle") ? -1 < b ? c + "/library.json" + Q.substr(a, b, null) : c + "/library.json" : a
            }
            ;
            td.__resolveRootPath = function(a, b) {
                if (null != a)
                    return a;
                a = b.indexOf("?");
                a = -1 < a ? Q.substr(b, 0, a) : b;
                for (a = P.replace(a, "\\", "/"); P.endsWith(a, "/"); ) {
                    if ("/" == a)
                        return a;
                    a = Q.substr(a, 0, a.length - 1)
                }
                return P.endsWith(a, ".bundle") ? a : Od.directory(a)
            }
            ;
            td.prototype = {
                __class__: td
            };
            var Ha = function() {};
            h["lime.utils.Assets"] = Ha;
            Ha.__name__ = "lime.utils.Assets";
            Ha.exists = function(a, b) {
                null == b && (b = "BINARY");
                var c = a.indexOf(":")
                  , d = a.substring(0, c);
                a = a.substring(c + 1);
                d = Ha.getLibrary(d);
                return null != d ? d.exists(a, b) : !1
            }
            ;
            Ha.getAsset = function(a, b, c) {
                if (c && Ha.cache.enabled)
                    switch (b) {
                    case "FONT":
                        var d = Ha.cache.font.h[a];
                        if (null != d)
                            return d;
                        break;
                    case "IMAGE":
                        d = Ha.cache.image.h[a];
                        if (Ha.isValidImage(d))
                            return d;
                        break;
                    case "MUSIC":
                    case "SOUND":
                        d = Ha.cache.audio.h[a];
                        if (Ha.isValidAudio(d))
                            return d;
                        break;
                    case "TEMPLATE":
                        throw aa.thrown("Not sure how to get template: " + a);
                    case "BINARY":
                    case "TEXT":
                        c = !1;
                        break;
                    default:
                        return null
                    }
                var f = a.indexOf(":");
                d = a.substring(0, f);
                f = a.substring(f + 1);
                var g = Ha.getLibrary(d);
                if (null != g)
                    if (g.exists(f, b)) {
                        if (g.isLocal(f, b))
                            return d = g.getAsset(f, b),
                            c && Ha.cache.enabled && Ha.cache.set(a, b, d),
                            d;
                        Ja.error(b + ' asset "' + a + '" exists, but only asynchronously', {
                            fileName: "lime/utils/Assets.hx",
                            lineNumber: 133,
                            className: "lime.utils.Assets",
                            methodName: "getAsset"
                        })
                    } else
                        Ja.error("There is no " + b + ' asset with an ID of "' + a + '"', {
                            fileName: "lime/utils/Assets.hx",
                            lineNumber: 138,
                            className: "lime.utils.Assets",
                            methodName: "getAsset"
                        });
                else
                    Ja.error(Ha.__libraryNotFound(d), {
                        fileName: "lime/utils/Assets.hx",
                        lineNumber: 143,
                        className: "lime.utils.Assets",
                        methodName: "getAsset"
                    });
                return null
            }
            ;
            Ha.getBytes = function(a) {
                return Ha.getAsset(a, "BINARY", !1)
            }
            ;
            Ha.getFont = function(a, b) {
                null == b && (b = !0);
                return Ha.getAsset(a, "FONT", b)
            }
            ;
            Ha.getLibrary = function(a) {
                if (null == a || "" == a)
                    a = "default";
                return Ha.libraries.h[a]
            }
            ;
            Ha.getText = function(a) {
                return Ha.getAsset(a, "TEXT", !1)
            }
            ;
            Ha.isLocal = function(a, b, c) {
                null == c && (c = !0);
                if (c && Ha.cache.enabled && Ha.cache.exists(a, b))
                    return !0;
                var d = a.indexOf(":");
                c = a.substring(0, d);
                a = a.substring(d + 1);
                c = Ha.getLibrary(c);
                return null != c ? c.isLocal(a, b) : !1
            }
            ;
            Ha.isValidAudio = function(a) {
                return null != a
            }
            ;
            Ha.isValidImage = function(a) {
                return null != a ? null != a.buffer : !1
            }
            ;
            Ha.loadLibrary = function(a) {
                var b = new Bd
                  , c = Ha.getLibrary(a);
                if (null != c)
                    return c.load();
                c = a;
                var d = null;
                if (Object.prototype.hasOwnProperty.call(Ha.bundlePaths.h, a))
                    se.loadFromFile(Ha.bundlePaths.h[a]).onComplete(function(c) {
                        null == c ? b.error('Cannot load bundle for library "' + a + '"') : (c = Ob.fromBundle(c),
                        null == c ? b.error('Cannot open library "' + a + '"') : (Ha.libraries.h[a] = c,
                        c.onChange.add((D = Ha.onChange,
                        m(D, D.dispatch))),
                        b.completeWith(c.load())))
                    }).onError(function(c) {
                        b.error('There is no asset library with an ID of "' + a + '"')
                    });
                else
                    Object.prototype.hasOwnProperty.call(Ha.libraryPaths.h, a) ? (c = Ha.libraryPaths.h[a],
                    d = Od.directory(c)) : (P.endsWith(c, ".bundle") ? (d = c,
                    c += "/library.json") : d = Od.directory(c),
                    c = Ha.__cacheBreak(c)),
                    td.loadFromFile(c, d).onComplete(function(c) {
                        null == c ? b.error('Cannot parse asset manifest for library "' + a + '"') : (c = Ob.fromManifest(c),
                        null == c ? b.error('Cannot open library "' + a + '"') : (Ha.libraries.h[a] = c,
                        c.onChange.add((D = Ha.onChange,
                        m(D, D.dispatch))),
                        b.completeWith(c.load())))
                    }).onError(function(c) {
                        b.error('There is no asset library with an ID of "' + a + '"')
                    });
                return b.future
            }
            ;
            Ha.registerLibrary = function(a, b) {
                if (null == a || "" == a)
                    a = "default";
                if (Object.prototype.hasOwnProperty.call(Ha.libraries.h, a)) {
                    if (Ha.libraries.h[a] == b)
                        return;
                    Ha.unloadLibrary(a)
                }
                null != b && b.onChange.add(Ha.library_onChange);
                Ha.libraries.h[a] = b
            }
            ;
            Ha.unloadLibrary = function(a) {
                Ha.removeLibrary(a, !0)
            }
            ;
            Ha.removeLibrary = function(a, b) {
                null == b && (b = !0);
                if (null == a || "" == a)
                    a = "default";
                var c = Ha.libraries.h[a];
                null != c && (Ha.cache.clear(a + ":"),
                c.onChange.remove(Ha.library_onChange),
                b && c.unload());
                b = Ha.libraries;
                Object.prototype.hasOwnProperty.call(b.h, a) && delete b.h[a]
            }
            ;
            Ha.__cacheBreak = function(a) {
                0 < Ha.cache.version && (a = -1 < a.indexOf("?") ? a + ("&" + Ha.cache.version) : a + ("?" + Ha.cache.version));
                return a
            }
            ;
            Ha.__libraryNotFound = function(a) {
                if (null == a || "" == a)
                    a = "default";
                return null == F.current || null == F.current.__preloader || F.current.__preloader.complete ? 'There is no asset library named "' + a + '"' : 'There is no asset library named "' + a + '", or it is not yet preloaded'
            }
            ;
            Ha.library_onChange = function() {
                Ha.cache.clear();
                Ha.onChange.dispatch()
            }
            ;
            var Ck = function(a, b) {
                this.bytes = a;
                this.offset = b
            };
            h["lime.utils.BytePointerData"] = Ck;
            Ck.__name__ = "lime.utils.BytePointerData";
            Ck.prototype = {
                __class__: Ck
            };
            var ag = {
                _new: function(a, b) {
                    return new xb(b)
                },
                decompress: function(a, b) {
                    switch (b._hx_index) {
                    case 0:
                        return dl.decompress(a);
                    case 1:
                        return el.decompress(a);
                    case 2:
                        return fl.decompress(a);
                    case 3:
                        return gl.decompress(a)
                    }
                },
                fromBytes: function(a) {
                    return null == a ? null : ag._new(a.length, a.b.bufferValue)
                },
                fromFile: function(a) {
                    return null
                },
                loadFromFile: function(a) {
                    return (new Ti).load(a)
                },
                ofString: function(a) {
                    a = xb.ofString(a);
                    return ag._new(a.length, a.b.bufferValue)
                }
            }
              , df = N["lime.utils.CompressionAlgorithm"] = {
                __ename__: "lime.utils.CompressionAlgorithm",
                __constructs__: null,
                DEFLATE: {
                    _hx_name: "DEFLATE",
                    _hx_index: 0,
                    __enum__: "lime.utils.CompressionAlgorithm",
                    toString: r
                },
                GZIP: {
                    _hx_name: "GZIP",
                    _hx_index: 1,
                    __enum__: "lime.utils.CompressionAlgorithm",
                    toString: r
                },
                LZMA: {
                    _hx_name: "LZMA",
                    _hx_index: 2,
                    __enum__: "lime.utils.CompressionAlgorithm",
                    toString: r
                },
                ZLIB: {
                    _hx_name: "ZLIB",
                    _hx_index: 3,
                    __enum__: "lime.utils.CompressionAlgorithm",
                    toString: r
                }
            };
            df.__constructs__ = [df.DEFLATE, df.GZIP, df.LZMA, df.ZLIB];
            df.__empty_constructs__ = [df.DEFLATE, df.GZIP, df.LZMA, df.ZLIB];
            var ch = {
                toArrayBufferView: function(a) {
                    return a
                }
            }
              , Ja = function() {};
            h["lime.utils.Log"] = Ja;
            Ja.__name__ = "lime.utils.Log";
            Ja.debug = function(a, b) {
                4 <= Ja.level && console.debug("[" + b.className + "] " + G.string(a))
            }
            ;
            Ja.error = function(a, b) {
                if (1 <= Ja.level) {
                    a = "[" + b.className + "] ERROR: " + G.string(a);
                    if (Ja.throwErrors)
                        throw aa.thrown(a);
                    console.error(a)
                }
            }
            ;
            Ja.info = function(a, b) {
                3 <= Ja.level && console.info("[" + b.className + "] " + G.string(a))
            }
            ;
            Ja.verbose = function(a, b) {
                5 <= Ja.level && (a = "[" + b.className + "] " + G.string(a),
                console.log(a))
            }
            ;
            Ja.warn = function(a, b) {
                2 <= Ja.level && console.warn("[" + b.className + "] WARNING: " + G.string(a))
            }
            ;
            var Rj = function() {
                this.bytesTotalCache = new Ia;
                this.bytesLoadedCache2 = new Ia;
                this.bytesLoadedCache = new pa;
                this.onProgress = new Ni;
                this.onComplete = new Bc;
                this.bytesTotal = this.bytesLoaded = 0;
                this.libraries = [];
                this.libraryNames = [];
                this.onProgress.add(m(this, this.update))
            };
            h["lime.utils.Preloader"] = Rj;
            Rj.__name__ = "lime.utils.Preloader";
            Rj.prototype = {
                addLibrary: function(a) {
                    this.libraries.push(a)
                },
                addLibraryName: function(a) {
                    -1 == this.libraryNames.indexOf(a) && this.libraryNames.push(a)
                },
                load: function() {
                    for (var a = this, b = 0, c = this.libraries; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        this.bytesTotal += d.bytesTotal
                    }
                    this.loadedLibraries = -1;
                    this.preloadStarted = !1;
                    b = 0;
                    for (c = this.libraries; b < c.length; )
                        d = [c[b]],
                        ++b,
                        Ja.verbose("Preloading asset library", {
                            fileName: "lime/utils/Preloader.hx",
                            lineNumber: 134,
                            className: "lime.utils.Preloader",
                            methodName: "load"
                        }),
                        d[0].load().onProgress(function(b) {
                            return function(c, d) {
                                a.bytesLoaded = null == a.bytesLoadedCache.h.__keys__[b[0].__id__] ? a.bytesLoaded + c : a.bytesLoaded + (c - a.bytesLoadedCache.h[b[0].__id__]);
                                a.bytesLoadedCache.set(b[0], c);
                                a.simulateProgress || a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal)
                            }
                        }(d)).onComplete(function(b) {
                            return function(c) {
                                a.bytesLoaded = null == a.bytesLoadedCache.h.__keys__[b[0].__id__] ? a.bytesLoaded + b[0].bytesTotal : a.bytesLoaded + ((b[0].bytesTotal | 0) - a.bytesLoadedCache.h[b[0].__id__]);
                                a.loadedAssetLibrary()
                            }
                        }(d)).onError(function() {
                            return function(a) {
                                Ja.error(a, {
                                    fileName: "lime/utils/Preloader.hx",
                                    lineNumber: 170,
                                    className: "lime.utils.Preloader",
                                    methodName: "load"
                                })
                            }
                        }());
                    b = 0;
                    for (c = this.libraryNames; b < c.length; )
                        ++b,
                        this.bytesTotal += 200;
                    this.loadedLibraries++;
                    this.preloadStarted = !0;
                    this.updateProgress()
                },
                loadedAssetLibrary: function(a) {
                    this.loadedLibraries++;
                    var b = this.loadedLibraries;
                    this.preloadStarted || ++b;
                    var c = this.libraries.length + this.libraryNames.length;
                    null != a ? Ja.verbose("Loaded asset library: " + a + " [" + b + "/" + c + "]", {
                        fileName: "lime/utils/Preloader.hx",
                        lineNumber: 197,
                        className: "lime.utils.Preloader",
                        methodName: "loadedAssetLibrary"
                    }) : Ja.verbose("Loaded asset library [" + b + "/" + c + "]", {
                        fileName: "lime/utils/Preloader.hx",
                        lineNumber: 201,
                        className: "lime.utils.Preloader",
                        methodName: "loadedAssetLibrary"
                    });
                    this.updateProgress()
                },
                start: function() {
                    this.complete || this.simulateProgress || !this.preloadComplete || (this.complete = !0,
                    this.onComplete.dispatch())
                },
                update: function(a, b) {},
                updateProgress: function() {
                    var a = this;
                    this.simulateProgress || this.onProgress.dispatch(this.bytesLoaded, this.bytesTotal);
                    if (this.loadedLibraries == this.libraries.length && !this.initLibraryNames) {
                        this.initLibraryNames = !0;
                        for (var b = 0, c = this.libraryNames; b < c.length; ) {
                            var d = [c[b]];
                            ++b;
                            Ja.verbose("Preloading asset library: " + d[0], {
                                fileName: "lime/utils/Preloader.hx",
                                lineNumber: 239,
                                className: "lime.utils.Preloader",
                                methodName: "updateProgress"
                            });
                            Ha.loadLibrary(d[0]).onProgress(function(b) {
                                return function(c, d) {
                                    0 < d && (Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0]) || (a.bytesTotalCache.h[b[0]] = d,
                                    a.bytesTotal += d - 200),
                                    c > d && (c = d),
                                    Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0]) ? a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]] : a.bytesLoaded += c,
                                    a.bytesLoadedCache2.h[b[0]] = c,
                                    a.simulateProgress || a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal))
                                }
                            }(d)).onComplete(function(b) {
                                return function(c) {
                                    c = 200;
                                    Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0]) && (c = a.bytesTotalCache.h[b[0]]);
                                    Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0]) ? a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]] : a.bytesLoaded += c;
                                    a.loadedAssetLibrary(b[0])
                                }
                            }(d)).onError(function() {
                                return function(a) {
                                    Ja.error(a, {
                                        fileName: "lime/utils/Preloader.hx",
                                        lineNumber: 293,
                                        className: "lime.utils.Preloader",
                                        methodName: "updateProgress"
                                    })
                                }
                            }())
                        }
                    }
                    this.simulateProgress || this.loadedLibraries != this.libraries.length + this.libraryNames.length || (this.preloadComplete || (this.preloadComplete = !0,
                    Ja.verbose("Preload complete", {
                        fileName: "lime/utils/Preloader.hx",
                        lineNumber: 306,
                        className: "lime.utils.Preloader",
                        methodName: "updateProgress"
                    })),
                    this.start())
                },
                __class__: Rj
            };
            var xe = function() {
                pe.call(this)
            };
            h["msignal.Signal0"] = xe;
            xe.__name__ = "msignal.Signal0";
            xe.__super__ = pe;
            xe.prototype = v(pe.prototype, {
                dispatch: function() {
                    for (var a = this.slots; a.nonEmpty; )
                        a.head.execute(),
                        a = a.tail
                },
                createSlot: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new Vi(this,a,b,c)
                },
                __class__: xe
            });
            var pg = function(a, b) {
                pe.call(this, [a, b])
            };
            h["msignal.Signal2"] = pg;
            pg.__name__ = "msignal.Signal2";
            pg.__super__ = pe;
            pg.prototype = v(pe.prototype, {
                dispatch: function(a, b) {
                    for (var c = this.slots; c.nonEmpty; )
                        c.head.execute(a, b),
                        c = c.tail
                },
                createSlot: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = !1);
                    return new Wi(this,a,b,c)
                },
                __class__: pg
            });
            var te = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                this.signal = a;
                this.set_listener(b);
                this.once = c;
                this.priority = d;
                this.enabled = !0
            };
            h["msignal.Slot"] = te;
            te.__name__ = "msignal.Slot";
            te.prototype = {
                remove: function() {
                    this.signal.remove(this.listener)
                },
                set_listener: function(a) {
                    return this.listener = a
                },
                __class__: te,
                __properties__: {
                    set_listener: "set_listener"
                }
            };
            var Vi = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                te.call(this, a, b, c, d)
            };
            h["msignal.Slot0"] = Vi;
            Vi.__name__ = "msignal.Slot0";
            Vi.__super__ = te;
            Vi.prototype = v(te.prototype, {
                execute: function() {
                    this.enabled && (this.once && this.remove(),
                    this.listener())
                },
                __class__: Vi
            });
            var Ci = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                te.call(this, a, b, c, d)
            };
            h["msignal.Slot1"] = Ci;
            Ci.__name__ = "msignal.Slot1";
            Ci.__super__ = te;
            Ci.prototype = v(te.prototype, {
                execute: function(a) {
                    this.enabled && (this.once && this.remove(),
                    null != this.param && (a = this.param),
                    this.listener(a))
                },
                __class__: Ci
            });
            var Wi = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = !1);
                te.call(this, a, b, c, d)
            };
            h["msignal.Slot2"] = Wi;
            Wi.__name__ = "msignal.Slot2";
            Wi.__super__ = te;
            Wi.prototype = v(te.prototype, {
                execute: function(a, b) {
                    this.enabled && (this.once && this.remove(),
                    null != this.param1 && (a = this.param1),
                    null != this.param2 && (b = this.param2),
                    this.listener(a, b))
                },
                __class__: Wi
            });
            var Sa = function() {};
            h["openfl.Lib"] = Sa;
            Sa.__name__ = "openfl.Lib";
            Sa.__properties__ = {
                get_current: "get_current"
            };
            Sa.getTimer = function() {
                return Dc.getTimer()
            }
            ;
            Sa.getURL = function(a, b) {
                Sa.navigateToURL(a, b)
            }
            ;
            Sa.navigateToURL = function(a, b) {
                null == b && (b = "_blank");
                var c = a.url;
                if (z.typeof(a.data) == I.TObject) {
                    for (var d = "", f = Aa.fields(a.data), g = 0; g < f.length; ) {
                        var k = f[g];
                        ++g;
                        0 < d.length && (d += "&");
                        var q = encodeURIComponent(k) + "=";
                        k = G.string(Aa.field(a.data, k));
                        d += q + encodeURIComponent(k)
                    }
                    c = -1 < c.indexOf("?") ? c + ("&" + d) : c + ("?" + d)
                }
                Dc.openURL(c, b)
            }
            ;
            Sa.setTimeout = function(a, b, c) {
                var d = ++Sa.__lastTimerID
                  , f = Sa.__timers;
                b = $f.delay(function() {
                    Sa.__timers.remove(d);
                    if (null != Sa.get_current() && null != Sa.get_current().stage && Sa.get_current().stage.__uncaughtErrorEvents.__enabled)
                        try {
                            a.apply(a, null == c ? [] : c)
                        } catch (k) {
                            Ua.lastError = k;
                            var b = aa.caught(k).unwrap();
                            Sa.get_current().stage.__handleError(b)
                        }
                    else
                        a.apply(a, null == c ? [] : c)
                }, b);
                f.h[d] = b;
                return d
            }
            ;
            Sa.get_current = function() {
                null == Ec.current && (Ec.current = new Pf);
                return Ec.current
            }
            ;
            var ef = function() {};
            h["openfl._Vector.IVector"] = ef;
            ef.__name__ = "openfl._Vector.IVector";
            ef.__isInterface__ = !0;
            ef.prototype = {
                __class__: ef
            };
            var Xi = function(a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.BoolVector"] = Xi;
            Xi.__name__ = "openfl._Vector.BoolVector";
            Xi.__interfaces__ = [ef];
            Xi.prototype = {
                toJSON: function() {
                    return this.__array
                },
                set_length: function(a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a; ) {
                                var c = b++;
                                this.__array[c] = !1
                            }
                        else
                            for (; this.__array.length > a; )
                                this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: Xi,
                __properties__: {
                    set_length: "set_length"
                }
            };
            var Pe = function(a, b, c, d) {
                null == d && (d = !1);
                null == b && (b = !1);
                null == a && (a = 0);
                if (d) {
                    if (this.__array = [],
                    null != c) {
                        d = 0;
                        for (var f = c.length; d < f; ) {
                            var g = d++;
                            this.__array[g] = c[g]
                        }
                    }
                } else
                    null == c && (c = []),
                    this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.FloatVector"] = Pe;
            Pe.__name__ = "openfl._Vector.FloatVector";
            Pe.__interfaces__ = [ef];
            Pe.prototype = {
                concat: function(a) {
                    return null == a ? new Pe(0,!1,this.__array.slice()) : 0 < a.__array.length ? new Pe(0,!1,this.__array.concat(a.__array)) : new Pe(0,!1,this.__array.slice())
                },
                copy: function() {
                    return new Pe(0,this.fixed,this.__array.slice())
                },
                get: function(a) {
                    return this.__array[a]
                },
                push: function(a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                set: function(a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                toJSON: function() {
                    return this.__array
                },
                get_length: function() {
                    return this.__array.length
                },
                set_length: function(a) {
                    if (a != this.__array.length && !this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a; ) {
                                var c = b++;
                                this.__array[c] = 0
                            }
                        else
                            for (; this.__array.length > a; )
                                this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: Pe,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var Yi = function(a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.FunctionVector"] = Yi;
            Yi.__name__ = "openfl._Vector.FunctionVector";
            Yi.__interfaces__ = [ef];
            Yi.prototype = {
                toJSON: function() {
                    return this.__array
                },
                set_length: function(a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a; ) {
                                var c = b++;
                                this.__array[c] = null
                            }
                        else
                            for (; this.__array.length > a; )
                                this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: Yi,
                __properties__: {
                    set_length: "set_length"
                }
            };
            var Xg = function(a, b, c) {
                null == b && (b = !1);
                null == a && (a = 0);
                null == c && (c = []);
                this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.IntVector"] = Xg;
            Xg.__name__ = "openfl._Vector.IntVector";
            Xg.__interfaces__ = [ef];
            Xg.prototype = {
                get: function(a) {
                    return this.__array[a]
                },
                iterator: function() {
                    return new Nf(this.__array)
                },
                push: function(a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                toJSON: function() {
                    return this.__array
                },
                get_length: function() {
                    return this.__array.length
                },
                set_length: function(a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a; ) {
                                var c = b++;
                                this.__array[c] = 0
                            }
                        else
                            for (; this.__array.length > a; )
                                this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: Xg,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var og = function(a, b, c, d) {
                null == d && (d = !1);
                null == b && (b = !1);
                null == a && (a = 0);
                if (d) {
                    if (this.__array = [],
                    null != c) {
                        d = 0;
                        for (var f = c.length; d < f; ) {
                            var g = d++;
                            this.__array[g] = c[g]
                        }
                    }
                } else
                    null == c && (c = []),
                    this.__array = c;
                0 < a && this.set_length(a);
                this.fixed = b
            };
            h["openfl._Vector.ObjectVector"] = og;
            og.__name__ = "openfl._Vector.ObjectVector";
            og.__interfaces__ = [ef];
            og.prototype = {
                get: function(a) {
                    return this.__array[a]
                },
                indexOf: function(a, b) {
                    null == b && (b = 0);
                    for (var c = this.__array.length; b < c; ) {
                        var d = b++;
                        if (this.__array[d] == a)
                            return d
                    }
                    return -1
                },
                insertAt: function(a, b) {
                    (!this.fixed || a < this.__array.length) && this.__array.splice(a, 0, b)
                },
                iterator: function() {
                    return new Nf(this.__array)
                },
                push: function(a) {
                    return this.fixed ? this.__array.length : this.__array.push(a)
                },
                removeAt: function(a) {
                    return !this.fixed || a < this.__array.length ? this.__array.splice(a, 1)[0] : null
                },
                set: function(a, b) {
                    return !this.fixed || a < this.__array.length ? this.__array[a] = b : b
                },
                splice: function(a, b) {
                    return new og(0,!1,this.__array.splice(a, b))
                },
                toJSON: function() {
                    return this.__array
                },
                unshift: function(a) {
                    this.fixed || this.__array.unshift(a)
                },
                get_length: function() {
                    return this.__array.length
                },
                set_length: function(a) {
                    if (!this.fixed) {
                        var b = this.__array.length;
                        0 > a && (a = 0);
                        if (a > b)
                            for (; b < a; )
                                b++,
                                this.__array.push(null);
                        else
                            for (; this.__array.length > a; )
                                this.__array.pop()
                    }
                    return this.__array.length
                },
                __class__: og,
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                }
            };
            var Je = function() {};
            h["openfl.desktop.Clipboard"] = Je;
            Je.__name__ = "openfl.desktop.Clipboard";
            Je.__properties__ = {
                get_generalClipboard: "get_generalClipboard"
            };
            Je.get_generalClipboard = function() {
                null == Je.__generalClipboard && (Je.__generalClipboard = new Je,
                Je.__generalClipboard.__systemClipboard = !0);
                return Je.__generalClipboard
            }
            ;
            Je.prototype = {
                setData: function(a, b, c) {
                    if (this.__systemClipboard)
                        switch (a) {
                        case 0:
                        case 1:
                        case 2:
                            return a = b,
                            zc.set_text(null == a ? null : G.string(a)),
                            !0;
                        default:
                            return !1
                        }
                    switch (a) {
                    case 0:
                        return a = b,
                        this.__htmlText = null == a ? null : G.string(a),
                        !0;
                    case 1:
                        return a = b,
                        this.__richText = null == a ? null : G.string(a),
                        !0;
                    case 2:
                        return a = b,
                        this.__text = null == a ? null : G.string(a),
                        !0;
                    default:
                        return !1
                    }
                },
                __class__: Je
            };
            var Ug = function() {
                F.call(this);
                null == Ec.application && (Ec.application = this);
                null == Ec.current && (Ec.current = new Pf);
                Ec.current.__loaderInfo = ue.create(null);
                Ec.current.__loaderInfo.content = Ec.current
            };
            h["openfl.display.Application"] = Ug;
            Ug.__name__ = "openfl.display.Application";
            Ug.__super__ = F;
            Ug.prototype = v(F.prototype, {
                createWindow: function(a) {
                    var b = new th(this,a);
                    this.__windows.push(b);
                    this.__windowByID.h[b.id] = b;
                    var c = this;
                    b.onClose.add(function() {
                        c.__onWindowClose(b)
                    }, !1, -1E4);
                    null == this.__window && (this.__window = b,
                    b.onActivate.add(m(this, this.onWindowActivate)),
                    b.onRenderContextLost.add(m(this, this.onRenderContextLost)),
                    b.onRenderContextRestored.add(m(this, this.onRenderContextRestored)),
                    b.onDeactivate.add(m(this, this.onWindowDeactivate)),
                    b.onDropFile.add(m(this, this.onWindowDropFile)),
                    b.onEnter.add(m(this, this.onWindowEnter)),
                    b.onExpose.add(m(this, this.onWindowExpose)),
                    b.onFocusIn.add(m(this, this.onWindowFocusIn)),
                    b.onFocusOut.add(m(this, this.onWindowFocusOut)),
                    b.onFullscreen.add(m(this, this.onWindowFullscreen)),
                    b.onKeyDown.add(m(this, this.onKeyDown)),
                    b.onKeyUp.add(m(this, this.onKeyUp)),
                    b.onLeave.add(m(this, this.onWindowLeave)),
                    b.onMinimize.add(m(this, this.onWindowMinimize)),
                    b.onMouseDown.add(m(this, this.onMouseDown)),
                    b.onMouseMove.add(m(this, this.onMouseMove)),
                    b.onMouseMoveRelative.add(m(this, this.onMouseMoveRelative)),
                    b.onMouseUp.add(m(this, this.onMouseUp)),
                    b.onMouseWheel.add(m(this, this.onMouseWheel)),
                    b.onMove.add(m(this, this.onWindowMove)),
                    b.onRender.add(m(this, this.render)),
                    b.onResize.add(m(this, this.onWindowResize)),
                    b.onRestore.add(m(this, this.onWindowRestore)),
                    b.onTextEdit.add(m(this, this.onTextEdit)),
                    b.onTextInput.add(m(this, this.onTextInput)),
                    this.onWindowCreate());
                    this.onCreateWindow.dispatch(b);
                    return b
                },
                exec: function() {
                    return F.prototype.exec.call(this)
                },
                __checkForAllWindowsClosed: function() {
                    0 < this.__windows.length || F.prototype.__checkForAllWindowsClosed.call(this)
                },
                __onModuleExit: function(a) {
                    this.onExit.canceled || (Ec.application == this && (Ec.application = null),
                    F.prototype.__onModuleExit.call(this, a))
                },
                __class__: Ug
            });
            var pd = function() {
                qa.call(this);
                this.__allowSmoothing = !0;
                this.__pixelRatio = 1;
                this.__tempColorTransform = new Kb;
                this.__worldAlpha = 1
            };
            h["openfl.display.DisplayObjectRenderer"] = pd;
            pd.__name__ = "openfl.display.DisplayObjectRenderer";
            pd.__super__ = qa;
            pd.prototype = v(qa.prototype, {
                __clear: function() {},
                __getAlpha: function(a) {
                    return a * this.__worldAlpha
                },
                __popMaskObject: function(a, b) {},
                __pushMaskObject: function(a, b) {},
                __render: function(a) {},
                __renderEvent: function(a) {
                    if (null != a.__customRenderEvent && a.__renderable) {
                        a.__customRenderEvent.allowSmoothing = this.__allowSmoothing;
                        a.__customRenderEvent.objectMatrix.copyFrom(a.__renderTransform);
                        a.__customRenderEvent.objectColorTransform.__copyFrom(a.__worldColorTransform);
                        a.__customRenderEvent.renderer = this;
                        switch (this.__type) {
                        case "cairo":
                            a.__customRenderEvent.type = "renderCairo";
                            break;
                        case "canvas":
                            a.__customRenderEvent.type = "renderCanvas";
                            break;
                        case "dom":
                            a.__customRenderEvent.type = null != a.stage && a.__worldVisible ? "renderDOM" : "clearDOM";
                            break;
                        case "opengl":
                            this.__cleared || this.__clear();
                            this.setShader(a.__worldShader);
                            this.__context3D.__flushGL();
                            a.__customRenderEvent.type = "renderOpenGL";
                            break;
                        default:
                            return
                        }
                        this.__setBlendMode(a.__worldBlendMode);
                        this.__pushMaskObject(a);
                        a.dispatchEvent(a.__customRenderEvent);
                        this.__popMaskObject(a);
                        "opengl" == this.__type && this.setViewport()
                    }
                },
                __resize: function(a, b) {},
                __setBlendMode: function(a) {},
                __shouldCacheHardware: function(a, b) {
                    if (null == a)
                        return null;
                    switch (a.__drawableType) {
                    case 4:
                    case 5:
                        if (1 == b)
                            return !0;
                        b = this.__shouldCacheHardware_DisplayObject(a, b);
                        if (1 == b)
                            return !0;
                        if (null != a.__children) {
                            var c = 0;
                            for (a = a.__children; c < a.length; ) {
                                var d = a[c];
                                ++c;
                                b = this.__shouldCacheHardware_DisplayObject(d, b);
                                if (1 == b)
                                    return !0
                            }
                        }
                        return b;
                    case 7:
                        return 1 == b ? !0 : !1;
                    case 9:
                        return !0;
                    default:
                        return this.__shouldCacheHardware_DisplayObject(a, b)
                    }
                },
                __shouldCacheHardware_DisplayObject: function(a, b) {
                    return 1 == b || null != a.__filters ? !0 : 0 == b || null != a.__graphics && !Qb.isCompatible(a.__graphics) ? !1 : null
                },
                __updateCacheBitmap: function(a, b) {
                    if (null == a)
                        return !1;
                    switch (a.__drawableType) {
                    case 2:
                        var c = a;
                        if (null == c.__bitmapData || null == c.__filters && "opengl" == this.__type && null == c.__cacheBitmap)
                            return !1;
                        b = null != c.__bitmapData.image && c.__bitmapData.image.version != c.__imageVersion;
                        break;
                    case 7:
                        var d = a;
                        if (null == d.__filters && "opengl" == this.__type && null == d.__cacheBitmap && !d.__domRender)
                            return !1;
                        b && (d.__renderDirty = !0);
                        b = b || d.__dirty;
                        break;
                    case 9:
                        if (null == a.__filters && "opengl" == this.__type && null == a.__cacheBitmap)
                            return !1
                    }
                    if (a.__isCacheBitmapRender)
                        return !1;
                    d = Kb.__pool.get();
                    d.__copyFrom(a.__worldColorTransform);
                    null != this.__worldColorTransform && d.__combine(this.__worldColorTransform);
                    var f = !1;
                    if (a.get_cacheAsBitmap() || "opengl" != this.__type && !d.__isDefault(!0)) {
                        f = null;
                        var g = (b = null == a.__cacheBitmap || a.__renderDirty && (b || null != a.__children && 0 < a.__children.length) || a.opaqueBackground != a.__cacheBitmapBackground) || null != a.__graphics && a.__graphics.__softwareDirty || !a.__cacheBitmapColorTransform.__equals(d, !0)
                          , k = b || null != a.__graphics && a.__graphics.__hardwareDirty
                          , q = this.__type;
                        if (g || k)
                            "opengl" == q && 0 == this.__shouldCacheHardware(a, null) && (q = "canvas"),
                            !g || "canvas" != q && "cairo" != q || (b = !0),
                            k && "opengl" == q && (b = !0);
                        g = b || !a.__cacheBitmap.__worldTransform.equals(a.__worldTransform);
                        c = null != a.__filters;
                        if ("dom" == this.__type && !c)
                            return !1;
                        if (c && !b)
                            for (var p = 0, l = a.__filters; p < l.length; ) {
                                var h = l[p];
                                ++p;
                                if (h.__renderDirty) {
                                    b = !0;
                                    break
                                }
                            }
                        null == a.__cacheBitmapMatrix && (a.__cacheBitmapMatrix = new ta);
                        p = null != a.__cacheAsBitmapMatrix ? a.__cacheAsBitmapMatrix : a.__renderTransform;
                        b || p.a == a.__cacheBitmapMatrix.a && p.b == a.__cacheBitmapMatrix.b && p.c == a.__cacheBitmapMatrix.c && p.d == a.__cacheBitmapMatrix.d || (b = !0);
                        !b && "opengl" != this.__type && null != a.__cacheBitmapData && null != a.__cacheBitmapData.image && a.__cacheBitmapData.image.version < a.__cacheBitmapData.__textureVersion && (b = !0);
                        if (!b)
                            for (k = a; null != k; ) {
                                if (null != k.get_scrollRect()) {
                                    g = !0;
                                    break
                                }
                                k = k.parent
                            }
                        a.__cacheBitmapMatrix.copyFrom(p);
                        a.__cacheBitmapMatrix.tx = 0;
                        var n = k = a.__cacheBitmapMatrix.ty = 0
                          , u = 0
                          , w = 0
                          , r = h = 0;
                        l = this.__pixelRatio;
                        if (g || b)
                            f = oa.__pool.get(),
                            a.__getFilterBounds(f, a.__cacheBitmapMatrix),
                            u = 0 < f.width ? Math.ceil((f.width + 1) * l) : 0,
                            w = 0 < f.height ? Math.ceil((f.height + 1) * l) : 0,
                            h = 0 < f.x ? Math.ceil(f.x) : Math.floor(f.x),
                            r = 0 < f.y ? Math.ceil(f.y) : Math.floor(f.y),
                            null != a.__cacheBitmapData ? u > a.__cacheBitmapData.width || w > a.__cacheBitmapData.height ? (k = Math.ceil(Math.max(1.25 * u, a.__cacheBitmapData.width)),
                            n = Math.ceil(Math.max(1.25 * w, a.__cacheBitmapData.height)),
                            b = !0) : (k = a.__cacheBitmapData.width,
                            n = a.__cacheBitmapData.height) : (k = u,
                            n = w);
                        if (b)
                            if (g = !0,
                            a.__cacheBitmapBackground = a.opaqueBackground,
                            .5 <= u && .5 <= w) {
                                var m = null != a.opaqueBackground && (k != u || n != w)
                                  , C = null != a.opaqueBackground ? -16777216 | a.opaqueBackground : 0
                                  , x = m ? 0 : C
                                  , z = "opengl" == this.__type;
                                null == a.__cacheBitmapData || k > a.__cacheBitmapData.width || n > a.__cacheBitmapData.height ? (a.__cacheBitmapData = new Yb(k,n,!0,x),
                                null == a.__cacheBitmap && (a.__cacheBitmap = new ze),
                                a.__cacheBitmap.__bitmapData = a.__cacheBitmapData,
                                a.__cacheBitmapRenderer = null) : a.__cacheBitmapData.__fillRect(a.__cacheBitmapData.rect, x, z);
                                m && (f.setTo(0, 0, u, w),
                                a.__cacheBitmapData.__fillRect(f, C, z))
                            } else
                                return Kb.__pool.release(d),
                                a.__cacheBitmap = null,
                                a.__cacheBitmapData = null,
                                a.__cacheBitmapData2 = null,
                                a.__cacheBitmapData3 = null,
                                a.__cacheBitmapRenderer = null,
                                7 == a.__drawableType && (d = a,
                                null != d.__cacheBitmap && (d.__cacheBitmap.__renderTransform.tx -= d.__offsetX * l,
                                d.__cacheBitmap.__renderTransform.ty -= d.__offsetY * l)),
                                !0;
                        else
                            a.__cacheBitmapData = a.__cacheBitmap.get_bitmapData(),
                            a.__cacheBitmapData2 = null,
                            a.__cacheBitmapData3 = null;
                        if (g || b)
                            a.__cacheBitmap.__worldTransform.copyFrom(a.__worldTransform),
                            p == a.__renderTransform ? (a.__cacheBitmap.__renderTransform.identity(),
                            a.__cacheBitmap.__renderTransform.scale(1 / l, 1 / l),
                            a.__cacheBitmap.__renderTransform.tx = a.__renderTransform.tx + h,
                            a.__cacheBitmap.__renderTransform.ty = a.__renderTransform.ty + r) : (a.__cacheBitmap.__renderTransform.copyFrom(a.__cacheBitmapMatrix),
                            a.__cacheBitmap.__renderTransform.invert(),
                            a.__cacheBitmap.__renderTransform.concat(a.__renderTransform),
                            a.__cacheBitmap.__renderTransform.a *= 1 / l,
                            a.__cacheBitmap.__renderTransform.d *= 1 / l,
                            a.__cacheBitmap.__renderTransform.tx += h,
                            a.__cacheBitmap.__renderTransform.ty += r);
                        a.__cacheBitmap.smoothing = this.__allowSmoothing;
                        a.__cacheBitmap.__renderable = a.__renderable;
                        a.__cacheBitmap.__worldAlpha = a.__worldAlpha;
                        a.__cacheBitmap.__worldBlendMode = a.__worldBlendMode;
                        a.__cacheBitmap.__worldShader = a.__worldShader;
                        a.__cacheBitmap.set_mask(a.__mask);
                        if (b) {
                            if (null == a.__cacheBitmapRenderer || q != a.__cacheBitmapRenderer.__type)
                                "opengl" == q ? a.__cacheBitmapRenderer = new bb(xa.__cast(this, bb).__context3D,a.__cacheBitmapData) : (null == a.__cacheBitmapData.image && (a.__cacheBitmapData = new Yb(k,n,!0,null != a.opaqueBackground ? -16777216 | a.opaqueBackground : 0),
                                a.__cacheBitmap.__bitmapData = a.__cacheBitmapData),
                                Na.convertToCanvas(a.__cacheBitmapData.image),
                                a.__cacheBitmapRenderer = new We(a.__cacheBitmapData.image.buffer.__srcContext)),
                                a.__cacheBitmapRenderer.__worldTransform = new ta,
                                a.__cacheBitmapRenderer.__worldColorTransform = new Kb;
                            null == a.__cacheBitmapColorTransform && (a.__cacheBitmapColorTransform = new Kb);
                            a.__cacheBitmapRenderer.__stage = a.stage;
                            a.__cacheBitmapRenderer.__allowSmoothing = this.__allowSmoothing;
                            a.__cacheBitmapRenderer.__setBlendMode(10);
                            a.__cacheBitmapRenderer.__worldAlpha = 1 / a.__worldAlpha;
                            a.__cacheBitmapRenderer.__worldTransform.copyFrom(a.__renderTransform);
                            a.__cacheBitmapRenderer.__worldTransform.invert();
                            a.__cacheBitmapRenderer.__worldTransform.concat(a.__cacheBitmapMatrix);
                            a.__cacheBitmapRenderer.__worldTransform.tx -= h;
                            a.__cacheBitmapRenderer.__worldTransform.ty -= r;
                            a.__cacheBitmapRenderer.__worldTransform.scale(l, l);
                            a.__cacheBitmapRenderer.__pixelRatio = l;
                            a.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(d);
                            a.__cacheBitmapRenderer.__worldColorTransform.__invert();
                            a.__isCacheBitmapRender = !0;
                            if ("opengl" == a.__cacheBitmapRenderer.__type) {
                                m = a.__cacheBitmapRenderer;
                                C = m.__context3D;
                                x = C.__state.renderToTexture;
                                z = C.__state.renderToTextureDepthStencil;
                                var A = C.__state.renderToTextureAntiAlias
                                  , K = C.__state.renderToTextureSurfaceSelector
                                  , I = this.__blendMode;
                                this.__suspendClipAndMask();
                                m.__copyShader(this);
                                a.__cacheBitmapData.__setUVRect(C, 0, 0, u, w);
                                m.__setRenderTarget(a.__cacheBitmapData);
                                null != a.__cacheBitmapData.image && (a.__cacheBitmapData.__textureVersion = a.__cacheBitmapData.image.version + 1);
                                a.__cacheBitmapData.__drawGL(a, m);
                                if (c) {
                                    var N = !1;
                                    p = 0;
                                    for (l = a.__filters; p < l.length; )
                                        h = l[p],
                                        ++p,
                                        h.__preserveObject && (N = !0);
                                    c = a.__cacheBitmapData;
                                    r = null;
                                    null == a.__cacheBitmapData2 || k > a.__cacheBitmapData2.width || n > a.__cacheBitmapData2.height ? a.__cacheBitmapData2 = new Yb(k,n,!0,0) : (a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0),
                                    null != a.__cacheBitmapData2.image && (a.__cacheBitmapData2.__textureVersion = a.__cacheBitmapData2.image.version + 1));
                                    a.__cacheBitmapData2.__setUVRect(C, 0, 0, u, w);
                                    q = a.__cacheBitmapData2;
                                    N && (null == a.__cacheBitmapData3 || k > a.__cacheBitmapData3.width || n > a.__cacheBitmapData3.height ? a.__cacheBitmapData3 = new Yb(k,n,!0,0) : (a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0),
                                    null != a.__cacheBitmapData3.image && (a.__cacheBitmapData3.__textureVersion = a.__cacheBitmapData3.image.version + 1)),
                                    a.__cacheBitmapData3.__setUVRect(C, 0, 0, u, w),
                                    r = a.__cacheBitmapData3);
                                    m.__setBlendMode(10);
                                    m.__worldAlpha = 1;
                                    m.__worldTransform.identity();
                                    m.__worldColorTransform.__identity();
                                    p = 0;
                                    for (l = a.__filters; p < l.length; ) {
                                        h = l[p];
                                        ++p;
                                        h.__preserveObject && (m.__setRenderTarget(r),
                                        m.__renderFilterPass(c, m.__defaultDisplayShader, h.__smooth));
                                        n = 0;
                                        for (u = h.__numShaderPasses; n < u; )
                                            k = n++,
                                            k = h.__initShader(m, k, h.__preserveObject ? r : null),
                                            m.__setBlendMode(h.__shaderBlendMode),
                                            m.__setRenderTarget(q),
                                            m.__renderFilterPass(c, k, h.__smooth),
                                            k = c,
                                            c = q,
                                            q = k;
                                        h.__renderDirty = !1
                                    }
                                    a.__cacheBitmap.__bitmapData = c
                                }
                                this.__blendMode = 10;
                                this.__setBlendMode(I);
                                this.__copyShader(m);
                                null != x ? C.setRenderToTexture(x, z, A, K) : C.setRenderToBackBuffer();
                                this.__resumeClipAndMask(m);
                                this.setViewport();
                                a.__cacheBitmapColorTransform.__copyFrom(d)
                            } else {
                                a.__cacheBitmapData.__drawCanvas(a, a.__cacheBitmapRenderer);
                                if (c) {
                                    N = u = !1;
                                    p = 0;
                                    for (l = a.__filters; p < l.length; )
                                        h = l[p],
                                        ++p,
                                        h.__needSecondBitmapData && (u = !0),
                                        h.__preserveObject && (N = !0);
                                    c = a.__cacheBitmapData;
                                    r = null;
                                    u ? (null == a.__cacheBitmapData2 || null == a.__cacheBitmapData2.image || k > a.__cacheBitmapData2.width || n > a.__cacheBitmapData2.height ? a.__cacheBitmapData2 = new Yb(k,n,!0,0) : a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0),
                                    q = a.__cacheBitmapData2) : q = c;
                                    N && (null == a.__cacheBitmapData3 || null == a.__cacheBitmapData3.image || k > a.__cacheBitmapData3.width || n > a.__cacheBitmapData3.height ? a.__cacheBitmapData3 = new Yb(k,n,!0,0) : a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0),
                                    r = a.__cacheBitmapData3);
                                    null == a.__tempPoint && (a.__tempPoint = new B);
                                    n = a.__tempPoint;
                                    p = 0;
                                    for (l = a.__filters; p < l.length; )
                                        h = l[p],
                                        ++p,
                                        h.__preserveObject && r.copyPixels(c, c.rect, n),
                                        k = h.__applyFilter(q, c, c.rect, n),
                                        h.__preserveObject && k.draw(r, null, null != a.__objectTransform ? a.__objectTransform.__colorTransform : null),
                                        h.__renderDirty = !1,
                                        u && k == q && (k = c,
                                        c = q,
                                        q = k);
                                    a.__cacheBitmapData != c && (k = a.__cacheBitmapData,
                                    a.__cacheBitmapData = c,
                                    a.__cacheBitmapData2 = k,
                                    a.__cacheBitmap.__bitmapData = a.__cacheBitmapData,
                                    a.__cacheBitmapRenderer = null);
                                    a.__cacheBitmap.__imageVersion = a.__cacheBitmapData.__textureVersion
                                }
                                a.__cacheBitmapColorTransform.__copyFrom(d);
                                a.__cacheBitmapColorTransform.__isDefault(!0) || (a.__cacheBitmapColorTransform.alphaMultiplier = 1,
                                a.__cacheBitmapData.colorTransform(a.__cacheBitmapData.rect, a.__cacheBitmapColorTransform))
                            }
                            a.__isCacheBitmapRender = !1
                        }
                        (g || b) && oa.__pool.release(f);
                        f = g
                    } else
                        null != a.__cacheBitmap && ("dom" == this.__type && this.__renderDrawableClear(a.__cacheBitmap),
                        a.__cacheBitmap = null,
                        a.__cacheBitmapData = null,
                        a.__cacheBitmapData2 = null,
                        a.__cacheBitmapData3 = null,
                        a.__cacheBitmapColorTransform = null,
                        a.__cacheBitmapRenderer = null,
                        f = !0);
                    Kb.__pool.release(d);
                    f && 7 == a.__drawableType && (d = a,
                    null != d.__cacheBitmap && (d.__cacheBitmap.__renderTransform.tx -= d.__offsetX,
                    d.__cacheBitmap.__renderTransform.ty -= d.__offsetY));
                    return f
                },
                __class__: pd
            });
            var Zi = function(a) {
                pd.call(this)
            };
            h["openfl.display.CairoRenderer"] = Zi;
            Zi.__name__ = "openfl.display.CairoRenderer";
            Zi.__super__ = pd;
            Zi.prototype = v(pd.prototype, {
                applyMatrix: function(a, b) {
                    null == b && (b = this.cairo);
                    this.__matrix.copyFrom(a);
                    this.cairo == b && null != this.__worldTransform && this.__matrix.concat(this.__worldTransform);
                    this.__matrix3[0] = this.__matrix.a;
                    this.__matrix3[1] = this.__matrix.b;
                    this.__matrix3[3] = this.__matrix.c;
                    this.__matrix3[4] = this.__matrix.d;
                    this.__roundPixels ? (this.__matrix3[6] = Math.round(this.__matrix.tx),
                    this.__matrix3[7] = Math.round(this.__matrix.ty)) : (this.__matrix3[6] = this.__matrix.tx,
                    this.__matrix3[7] = this.__matrix.ty);
                    b.set_matrix(this.__matrix3)
                },
                __clear: function() {
                    if (null != this.cairo && (this.cairo.identityMatrix(),
                    null != this.__stage && this.__stage.__clearBeforeRender)) {
                        var a = this.__blendMode;
                        this.__setBlendMode(10);
                        this.cairo.setSourceRGB(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2]);
                        this.cairo.paint();
                        this.__setBlendMode(a)
                    }
                },
                __popMask: function() {
                    this.cairo.restore()
                },
                __popMaskObject: function(a, b) {
                    null == b && (b = !0);
                    a.__isCacheBitmapRender || null == a.__mask || this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function() {
                    this.cairo.restore()
                },
                __pushMask: function(a) {
                    this.cairo.save();
                    this.applyMatrix(a.__renderTransform, this.cairo);
                    this.cairo.newPath();
                    this.__renderDrawableMask(a);
                    this.cairo.clip()
                },
                __pushMaskObject: function(a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    a.__isCacheBitmapRender || null == a.__mask || this.__pushMask(a.__mask)
                },
                __pushMaskRect: function(a, b) {
                    this.cairo.save();
                    this.applyMatrix(b, this.cairo);
                    this.cairo.newPath();
                    this.cairo.rectangle(a.x, a.y, a.width, a.height);
                    this.cairo.clip()
                },
                __render: function(a) {
                    null != this.cairo && this.__renderDrawable(a)
                },
                __renderDrawable: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 6:
                            !a.__renderable || 0 >= a.__worldAlpha || null == a.__currentState || (this.__pushMaskObject(a),
                            this.__renderDrawable(a.__currentState),
                            this.__popMaskObject(a),
                            this.__renderEvent(a))
                        }
                },
                __renderDrawableMask: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 2:
                            this.cairo.rectangle(0, 0, a.get_width(), a.get_height());
                            break;
                        case 6:
                            this.__renderDrawableMask(a.__currentState)
                        }
                },
                __setBlendMode: function(a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a,
                    this.__setBlendModeCairo(this.cairo, a))
                },
                __setBlendModeCairo: function(a, b) {
                    switch (b) {
                    case 0:
                        a.setOperator(12);
                        break;
                    case 2:
                        a.setOperator(17);
                        break;
                    case 3:
                        a.setOperator(23);
                        break;
                    case 5:
                        a.setOperator(21);
                        break;
                    case 7:
                        a.setOperator(2);
                        break;
                    case 8:
                        a.setOperator(18);
                        break;
                    case 9:
                        a.setOperator(14);
                        break;
                    case 11:
                        a.setOperator(16);
                        break;
                    case 12:
                        a.setOperator(15);
                        break;
                    default:
                        a.setOperator(2)
                    }
                },
                __class__: Zi
            });
            var We = function(a) {
                pd.call(this);
                this.context = a;
                this.__tempMatrix = new ta;
                this.__type = "canvas"
            };
            h["openfl.display.CanvasRenderer"] = We;
            We.__name__ = "openfl.display.CanvasRenderer";
            We.__super__ = pd;
            We.prototype = v(pd.prototype, {
                applySmoothing: function(a, b) {
                    a.imageSmoothingEnabled = b
                },
                setTransform: function(a, b) {
                    null == b ? b = this.context : this.context == b && null != this.__worldTransform && (this.__tempMatrix.copyFrom(a),
                    this.__tempMatrix.concat(this.__worldTransform),
                    a = this.__tempMatrix);
                    this.__roundPixels ? b.setTransform(a.a, a.b, a.c, a.d, a.tx | 0, a.ty | 0) : b.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty)
                },
                __clear: function() {
                    if (null != this.__stage) {
                        var a = this.__blendMode;
                        this.__blendMode = null;
                        this.__setBlendMode(10);
                        this.context.setTransform(1, 0, 0, 1, 0, 0);
                        this.context.globalAlpha = 1;
                        !this.__stage.__transparent && this.__stage.__clearBeforeRender ? (this.context.fillStyle = this.__stage.__colorString,
                        this.context.fillRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale)) : this.__stage.__transparent && this.__stage.__clearBeforeRender && this.context.clearRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
                        this.__setBlendMode(a)
                    }
                },
                __popMask: function() {
                    this.context.restore()
                },
                __popMaskObject: function(a, b) {
                    null == b && (b = !0);
                    a.__isCacheBitmapRender || null == a.__mask || this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function() {
                    this.context.restore()
                },
                __pushMask: function(a) {
                    this.context.save();
                    this.setTransform(a.__renderTransform, this.context);
                    this.context.beginPath();
                    this.__renderDrawableMask(a);
                    this.context.closePath();
                    this.context.clip()
                },
                __pushMaskObject: function(a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    a.__isCacheBitmapRender || null == a.__mask || this.__pushMask(a.__mask)
                },
                __pushMaskRect: function(a, b) {
                    this.context.save();
                    this.setTransform(b, this.context);
                    this.context.beginPath();
                    this.context.rect(a.x, a.y, a.width, a.height);
                    this.context.clip()
                },
                __render: function(a) {
                    this.__renderDrawable(a)
                },
                __renderDrawable: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 0:
                            $i.renderDrawable(a, this);
                            break;
                        case 2:
                            uh.renderDrawable(a, this);
                            break;
                        case 3:
                            cg.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            aj.renderDrawable(a, this);
                            break;
                        case 6:
                            bj.renderDrawable(a, this);
                            break;
                        case 7:
                            ba.renderDrawable(a, this);
                            break;
                        case 8:
                            dg.renderDrawable(a, this);
                            break;
                        case 9:
                            ff.renderDrawable(a, this)
                        }
                },
                __renderDrawableMask: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 0:
                            $i.renderDrawableMask(a, this);
                            break;
                        case 2:
                            uh.renderDrawableMask(a, this);
                            break;
                        case 3:
                            cg.renderDrawableMask(a, this);
                            break;
                        case 4:
                        case 5:
                            aj.renderDrawableMask(a, this);
                            break;
                        case 6:
                            bj.renderDrawableMask(a, this);
                            break;
                        case 7:
                            ba.renderDrawableMask(a, this);
                            break;
                        case 8:
                            dg.renderDrawableMask(a, this);
                            break;
                        case 9:
                            ff.renderDrawableMask(a, this)
                        }
                },
                __setBlendMode: function(a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a,
                    this.__setBlendModeContext(this.context, a))
                },
                __setBlendModeContext: function(a, b) {
                    switch (b) {
                    case 0:
                        a.globalCompositeOperation = "lighter";
                        break;
                    case 2:
                        a.globalCompositeOperation = "darken";
                        break;
                    case 3:
                        a.globalCompositeOperation = "difference";
                        break;
                    case 5:
                        a.globalCompositeOperation = "hard-light";
                        break;
                    case 8:
                        a.globalCompositeOperation = "lighten";
                        break;
                    case 9:
                        a.globalCompositeOperation = "multiply";
                        break;
                    case 11:
                        a.globalCompositeOperation = "overlay";
                        break;
                    case 12:
                        a.globalCompositeOperation = "screen";
                        break;
                    default:
                        a.globalCompositeOperation = "source-over"
                    }
                },
                __class__: We
            });
            var Il = {
                toString: function(a) {
                    switch (a) {
                    case 0:
                        return "none";
                    case 1:
                        return "round";
                    case 2:
                        return "square";
                    default:
                        return null
                    }
                }
            }
              , cj = function(a) {
                ca.call(this);
                this.__drawableType = 10;
                this.__element = a
            };
            h["openfl.display.DOMElement"] = cj;
            cj.__name__ = "openfl.display.DOMElement";
            cj.__super__ = ca;
            cj.prototype = v(ca.prototype, {
                __class__: cj
            });
            var vh = function(a) {
                pd.call(this);
                this.element = a;
                ca.__supportDOM = !0;
                a = window.getComputedStyle(document.documentElement, "");
                a = (Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/) || "" === a.OLink && ["", "o"])[1];
                "WebKit|Moz|MS|O".match(new RegExp("(" + a + ")","i"));
                a[0].toUpperCase();
                a.substr(1);
                this.__vendorPrefix = a;
                this.__transformProperty = "webkit" == a ? "-webkit-transform" : "transform";
                this.__transformOriginProperty = "webkit" == a ? "-webkit-transform-origin" : "transform-origin";
                this.__clipRects = [];
                this.__z = this.__numClipRects = 0;
                this.__type = "dom";
                this.__canvasRenderer = new We(null);
                this.__canvasRenderer.__isDOM = !0
            };
            h["openfl.display.DOMRenderer"] = vh;
            vh.__name__ = "openfl.display.DOMRenderer";
            vh.__super__ = pd;
            vh.prototype = v(pd.prototype, {
                __applyStyle: function(a, b, c, d) {
                    var f = a.__style;
                    if (b && a.__renderTransformChanged) {
                        b = a.__renderTransform;
                        var g = this.__roundPixels;
                        null == g && (g = !1);
                        f.setProperty(this.__transformProperty, g ? "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + (b.tx | 0) + ", " + (b.ty | 0) + ", 0, 1)" : "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + b.tx + ", " + b.ty + ", 0, 1)", null)
                    }
                    a.__worldZ != ++this.__z && (a.__worldZ = this.__z,
                    f.setProperty("z-index", null == a.__worldZ ? "null" : "" + a.__worldZ, null));
                    c && a.__worldAlphaChanged && (1 > a.__worldAlpha ? f.setProperty("opacity", null == a.__worldAlpha ? "null" : "" + a.__worldAlpha, null) : f.removeProperty("opacity"));
                    d && a.__worldClipChanged && (null == a.__worldClip ? f.removeProperty("clip") : (a = a.__worldClip,
                    f.setProperty("clip", "rect(" + a.y + "px, " + a.get_right() + "px, " + a.get_bottom() + "px, " + a.x + "px)", null)))
                },
                __initializeElement: function(a, b) {
                    var c = a.__style = b.style;
                    c.setProperty("position", "absolute", null);
                    c.setProperty("top", "0", null);
                    c.setProperty("left", "0", null);
                    c.setProperty(this.__transformOriginProperty, "0 0 0", null);
                    this.element.appendChild(b);
                    a.__worldAlphaChanged = !0;
                    a.__renderTransformChanged = !0;
                    a.__worldVisibleChanged = !0;
                    a.__worldClipChanged = !0;
                    a.__worldClip = null;
                    a.__worldZ = -1
                },
                __popMask: function() {
                    this.__popMaskRect()
                },
                __popMaskObject: function(a, b) {
                    null == b && (b = !0);
                    null != a.__mask && this.__popMask();
                    b && null != a.__scrollRect && this.__popMaskRect()
                },
                __popMaskRect: function() {
                    0 < this.__numClipRects && (this.__numClipRects--,
                    this.__currentClipRect = 0 < this.__numClipRects ? this.__clipRects[this.__numClipRects - 1] : null)
                },
                __pushMask: function(a) {
                    this.__pushMaskRect(a.getBounds(a), a.__renderTransform)
                },
                __pushMaskObject: function(a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
                    null != a.__mask && this.__pushMask(a.__mask)
                },
                __pushMaskRect: function(a, b) {
                    this.__numClipRects == this.__clipRects.length && (this.__clipRects[this.__numClipRects] = new oa);
                    var c = this.__clipRects[this.__numClipRects];
                    a.__transform(c, b);
                    0 < this.__numClipRects && (a = this.__clipRects[this.__numClipRects - 1],
                    c.__contract(a.x, a.y, a.width, a.height));
                    0 > c.height && (c.height = 0);
                    0 > c.width && (c.width = 0);
                    this.__currentClipRect = c;
                    this.__numClipRects++
                },
                __render: function(a) {
                    this.element.style.background = this.__stage.__transparent ? "none" : this.__stage.__colorString;
                    this.__z = 1;
                    this.__renderDrawable(a)
                },
                __renderDrawable: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 2:
                            Vb.renderDrawable(a, this);
                            break;
                        case 3:
                            qd.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            dj.renderDrawable(a, this);
                            break;
                        case 6:
                            ej.renderDrawable(a, this);
                            break;
                        case 7:
                            Hf.renderDrawable(a, this);
                            break;
                        case 8:
                            gf.renderDrawable(a, this);
                            break;
                        case 9:
                            If.renderDrawable(a, this);
                            break;
                        case 10:
                            null != a.stage && a.__worldVisible && a.__renderable ? (a.__active || (this.__initializeElement(a, a.__element),
                            a.__active = !0),
                            this.__updateClip(a),
                            this.__applyStyle(a, !0, !0, !0)) : a.__active && (this.element.removeChild(a.__element),
                            a.__active = !1),
                            qd.renderDrawable(a, this)
                        }
                },
                __renderDrawableClear: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 2:
                            Vb.renderDrawableClear(a, this);
                            break;
                        case 3:
                            qd.renderDrawableClear(a, this);
                            break;
                        case 4:
                        case 5:
                            dj.renderDrawableClear(a, this);
                            break;
                        case 6:
                            ej.renderDrawableClear(a, this);
                            break;
                        case 7:
                            Hf.renderDrawableClear(a, this);
                            break;
                        case 8:
                            gf.renderDrawableClear(a, this);
                            break;
                        case 9:
                            If.renderDrawableClear(a, this)
                        }
                },
                __setBlendMode: function(a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    this.__blendMode != a && (this.__blendMode = a)
                },
                __updateClip: function(a) {
                    if (null == this.__currentClipRect)
                        a.__worldClipChanged = null != a.__worldClip,
                        a.__worldClip = null;
                    else {
                        null == a.__worldClip && (a.__worldClip = new oa);
                        var b = oa.__pool.get()
                          , c = ta.__pool.get();
                        c.copyFrom(a.__renderTransform);
                        c.invert();
                        this.__currentClipRect.__transform(b, c);
                        b.equals(a.__worldClip) ? a.__worldClipChanged = !1 : (a.__worldClip.copyFrom(b),
                        a.__worldClipChanged = !0);
                        oa.__pool.release(b);
                        ta.__pool.release(c)
                    }
                },
                __class__: vh
            });
            var zd = function(a) {
                this.byteCode = a;
                this.precisionHint = 1;
                this.__glSourceDirty = !0;
                this.__numPasses = 1;
                this.__data = wl._new(a)
            };
            h["openfl.display.Shader"] = zd;
            zd.__name__ = "openfl.display.Shader";
            zd.prototype = {
                __clearUseArray: function() {
                    for (var a = 0, b = this.__paramBool; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        c.__useArray = !1
                    }
                    a = 0;
                    for (b = this.__paramFloat; a < b.length; )
                        c = b[a],
                        ++a,
                        c.__useArray = !1;
                    a = 0;
                    for (b = this.__paramInt; a < b.length; )
                        c = b[a],
                        ++a,
                        c.__useArray = !1
                },
                __createGLShader: function(a, b) {
                    var c = this.__context.gl
                      , d = c.createShader(b);
                    c.shaderSource(d, a);
                    c.compileShader(d);
                    var f = c.getShaderInfoLog(d)
                      , g = null != f && "" != P.trim(f)
                      , k = c.getShaderParameter(d, c.COMPILE_STATUS);
                    if (g || 0 == k)
                        b = (0 == k ? "Error" : "Info") + (b == c.VERTEX_SHADER ? " compiling vertex shader" : " compiling fragment shader"),
                        b = b + ("\n" + f) + ("\n" + a),
                        0 == k ? Ja.error(b, {
                            fileName: "openfl/display/Shader.hx",
                            lineNumber: 337,
                            className: "openfl.display.Shader",
                            methodName: "__createGLShader"
                        }) : g && Ja.debug(b, {
                            fileName: "openfl/display/Shader.hx",
                            lineNumber: 338,
                            className: "openfl.display.Shader",
                            methodName: "__createGLShader"
                        });
                    return d
                },
                __createGLProgram: function(a, b) {
                    var c = this.__context.gl;
                    a = this.__createGLShader(a, c.VERTEX_SHADER);
                    var d = this.__createGLShader(b, c.FRAGMENT_SHADER);
                    b = c.createProgram();
                    for (var f = 0, g = this.__paramFloat; f < g.length; ) {
                        var k = g[f];
                        ++f;
                        if (-1 < k.name.indexOf("Position") && P.startsWith(k.name, "openfl_")) {
                            c.bindAttribLocation(b, 0, k.name);
                            break
                        }
                    }
                    c.attachShader(b, a);
                    c.attachShader(b, d);
                    c.linkProgram(b);
                    0 == c.getProgramParameter(b, c.LINK_STATUS) && (c = "Unable to initialize the shader program\n" + c.getProgramInfoLog(b),
                    Ja.error(c, {
                        fileName: "openfl/display/Shader.hx",
                        lineNumber: 371,
                        className: "openfl.display.Shader",
                        methodName: "__createGLProgram"
                    }));
                    return b
                },
                __disable: function() {
                    null != this.program && this.__disableGL()
                },
                __disableGL: function() {
                    for (var a = this.__context.gl, b = 0, c = 0, d = this.__inputBitmapData; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        f.__disableGL(this.__context, b);
                        ++b;
                        if (b == a.MAX_TEXTURE_IMAGE_UNITS)
                            break
                    }
                    c = 0;
                    for (d = this.__paramBool; c < d.length; )
                        b = d[c],
                        ++c,
                        b.__disableGL(this.__context);
                    c = 0;
                    for (d = this.__paramFloat; c < d.length; )
                        b = d[c],
                        ++c,
                        b.__disableGL(this.__context);
                    c = 0;
                    for (d = this.__paramInt; c < d.length; )
                        b = d[c],
                        ++c,
                        b.__disableGL(this.__context);
                    this.__context.__bindGLArrayBuffer(null);
                    "opengl" == this.__context.__context.type && a.disable(a.TEXTURE_2D)
                },
                __enable: function() {
                    this.__init();
                    null != this.program && this.__enableGL()
                },
                __enableGL: function() {
                    for (var a = 0, b = this.__context.gl, c = 0, d = this.__inputBitmapData; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        b.uniform1i(f.index, a);
                        ++a
                    }
                    "opengl" == this.__context.__context.type && 0 < a && b.enable(b.TEXTURE_2D)
                },
                __init: function() {
                    null == this.__data && (this.__data = wl._new(null));
                    null == this.__glFragmentSource || null == this.__glVertexSource || null != this.program && !this.__glSourceDirty || this.__initGL()
                },
                __initGL: function() {
                    if (this.__glSourceDirty || null == this.__paramBool)
                        this.__glSourceDirty = !1,
                        this.program = null,
                        this.__inputBitmapData = [],
                        this.__paramBool = [],
                        this.__paramFloat = [],
                        this.__paramInt = [],
                        this.__processGLData(this.get_glVertexSource(), "attribute"),
                        this.__processGLData(this.get_glVertexSource(), "uniform"),
                        this.__processGLData(this.get_glFragmentSource(), "uniform");
                    if (null != this.__context && null == this.program) {
                        var a = this.__context.gl
                          , b = 1 == this.precisionHint ? "precision mediump float;\n" : "precision lowp float;\n"
                          , c = b + this.get_glVertexSource();
                        b += this.get_glFragmentSource();
                        var d = c + b;
                        Object.prototype.hasOwnProperty.call(this.__context.__programs.h, d) ? this.program = this.__context.__programs.h[d] : (this.program = this.__context.createProgram(1),
                        this.program.__glProgram = this.__createGLProgram(c, b),
                        this.__context.__programs.h[d] = this.program);
                        if (null != this.program) {
                            this.glProgram = this.program.__glProgram;
                            c = 0;
                            for (b = this.__inputBitmapData; c < b.length; )
                                d = b[c],
                                ++c,
                                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramBool; c < b.length; )
                                d = b[c],
                                ++c,
                                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramFloat; c < b.length; )
                                d = b[c],
                                ++c,
                                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
                            c = 0;
                            for (b = this.__paramInt; c < b.length; )
                                d = b[c],
                                ++c,
                                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name)
                        }
                    }
                },
                __processGLData: function(a, b) {
                    var c = 0, d;
                    for (d = "uniform" == b ? new Ta("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)","") : new Ta("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)",""); d.matchSub(a, c); ) {
                        var f = d.matched(1);
                        var g = d.matched(2);
                        if (!P.startsWith(g, "gl_")) {
                            c = "uniform" == b;
                            if (P.startsWith(f, "sampler")) {
                                f = new fj;
                                f.name = g;
                                f.__isUniform = c;
                                this.__inputBitmapData.push(f);
                                switch (g) {
                                case "bitmap":
                                    this.__bitmap = f;
                                    break;
                                case "openfl_Texture":
                                    this.__texture = f
                                }
                                this.__data[g] = f;
                                this.__isGenerated && (this[g] = f)
                            } else if (!Object.prototype.hasOwnProperty.call(this.__data, g) || null == Aa.field(this.__data, g)) {
                                switch (f) {
                                case "bool":
                                    var k = 0;
                                    break;
                                case "bvec2":
                                    k = 1;
                                    break;
                                case "bvec3":
                                    k = 2;
                                    break;
                                case "bvec4":
                                    k = 3;
                                    break;
                                case "dvec2":
                                case "vec2":
                                    k = 5;
                                    break;
                                case "dvec3":
                                case "vec3":
                                    k = 6;
                                    break;
                                case "dvec4":
                                case "vec4":
                                    k = 7;
                                    break;
                                case "double":
                                case "float":
                                    k = 4;
                                    break;
                                case "mat2":
                                case "mat2x2":
                                    k = 12;
                                    break;
                                case "mat2x3":
                                    k = 13;
                                    break;
                                case "mat2x4":
                                    k = 14;
                                    break;
                                case "mat3x2":
                                    k = 15;
                                    break;
                                case "mat3":
                                case "mat3x3":
                                    k = 16;
                                    break;
                                case "mat3x4":
                                    k = 17;
                                    break;
                                case "mat4x2":
                                    k = 18;
                                    break;
                                case "mat4x3":
                                    k = 19;
                                    break;
                                case "mat4":
                                case "mat4x4":
                                    k = 20;
                                    break;
                                case "int":
                                case "uint":
                                    k = 8;
                                    break;
                                case "ivec2":
                                case "uvec2":
                                    k = 9;
                                    break;
                                case "ivec3":
                                case "uvec3":
                                    k = 10;
                                    break;
                                case "ivec4":
                                case "uvec4":
                                    k = 11;
                                    break;
                                default:
                                    k = null
                                }
                                switch (k) {
                                case 1:
                                case 5:
                                case 9:
                                    f = 2;
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    f = 3;
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                case 12:
                                    f = 4;
                                    break;
                                case 16:
                                    f = 9;
                                    break;
                                case 20:
                                    f = 16;
                                    break;
                                default:
                                    f = 1
                                }
                                switch (k) {
                                case 12:
                                    var q = 2;
                                    break;
                                case 16:
                                    q = 3;
                                    break;
                                case 20:
                                    q = 4;
                                    break;
                                default:
                                    q = 1
                                }
                                switch (k) {
                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                    var p = new Gg;
                                    p.set_name(g);
                                    p.type = k;
                                    p.__arrayLength = q;
                                    p.__isBool = !0;
                                    p.__isUniform = c;
                                    p.__length = f;
                                    this.__paramBool.push(p);
                                    "openfl_HasColorTransform" == g && (this.__hasColorTransform = p);
                                    this.__data[g] = p;
                                    this.__isGenerated && (this[g] = p);
                                    break;
                                case 8:
                                case 9:
                                case 10:
                                case 11:
                                    p = new Gg;
                                    p.set_name(g);
                                    p.type = k;
                                    p.__arrayLength = q;
                                    p.__isInt = !0;
                                    p.__isUniform = c;
                                    p.__length = f;
                                    this.__paramInt.push(p);
                                    this.__data[g] = p;
                                    this.__isGenerated && (this[g] = p);
                                    break;
                                default:
                                    p = new Gg;
                                    p.set_name(g);
                                    p.type = k;
                                    p.__arrayLength = q;
                                    0 < q && (k = q * q,
                                    k = null != k ? new Float32Array(k) : null,
                                    p.__uniformMatrix = k);
                                    p.__isFloat = !0;
                                    p.__isUniform = c;
                                    p.__length = f;
                                    this.__paramFloat.push(p);
                                    if (P.startsWith(g, "openfl_"))
                                        switch (g) {
                                        case "openfl_Alpha":
                                            this.__alpha = p;
                                            break;
                                        case "openfl_ColorMultiplier":
                                            this.__colorMultiplier = p;
                                            break;
                                        case "openfl_ColorOffset":
                                            this.__colorOffset = p;
                                            break;
                                        case "openfl_Matrix":
                                            this.__matrix = p;
                                            break;
                                        case "openfl_Position":
                                            this.__position = p;
                                            break;
                                        case "openfl_TextureCoord":
                                            this.__textureCoord = p;
                                            break;
                                        case "openfl_TextureSize":
                                            this.__textureSize = p
                                        }
                                    this.__data[g] = p;
                                    this.__isGenerated && (this[g] = p)
                                }
                            }
                            g = d.matchedPos();
                            c = g.pos + g.len
                        }
                    }
                },
                __update: function() {
                    null != this.program && this.__updateGL()
                },
                __updateFromBuffer: function(a, b) {
                    null != this.program && this.__updateGLFromBuffer(a, b)
                },
                __updateGL: function() {
                    for (var a = 0, b = 0, c = this.__inputBitmapData; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d.__updateGL(this.__context, a);
                        ++a
                    }
                    b = 0;
                    for (c = this.__paramBool; b < c.length; )
                        a = c[b],
                        ++b,
                        a.__updateGL(this.__context);
                    b = 0;
                    for (c = this.__paramFloat; b < c.length; )
                        a = c[b],
                        ++b,
                        a.__updateGL(this.__context);
                    b = 0;
                    for (c = this.__paramInt; b < c.length; )
                        a = c[b],
                        ++b,
                        a.__updateGL(this.__context)
                },
                __updateGLFromBuffer: function(a, b) {
                    for (var c = 0, d, f, g, k, q, p = 0, l = a.inputCount; p < l; )
                        q = p++,
                        d = a.inputRefs[q],
                        f = a.inputs[q],
                        g = a.inputFilter[q],
                        k = a.inputMipFilter[q],
                        q = a.inputWrap[q],
                        null != f && (d.__updateGL(this.__context, c, f, g, k, q),
                        ++c);
                    p = this.__context.gl;
                    0 < a.paramDataLength ? (null == a.paramDataBuffer && (a.paramDataBuffer = p.createBuffer()),
                    this.__context.__bindGLArrayBuffer(a.paramDataBuffer),
                    Lc.bufferData(p, p.ARRAY_BUFFER, a.paramData, p.DYNAMIC_DRAW)) : this.__context.__bindGLArrayBuffer(null);
                    f = d = c = 0;
                    g = a.paramBoolCount;
                    k = a.paramFloatCount;
                    var h = a.paramData
                      , n = null
                      , u = null
                      , w = null;
                    p = 0;
                    for (l = a.paramCount; p < l; ) {
                        q = p++;
                        var r = !1;
                        if (q < g) {
                            var m = a.paramRefs_Bool[c];
                            for (var C = 0, x = a.overrideBoolCount; C < x; ) {
                                var z = C++;
                                if (m.name == a.overrideBoolNames[z]) {
                                    n = a.overrideBoolValues[z];
                                    r = !0;
                                    break
                                }
                            }
                            r ? m.__updateGL(this.__context, n) : m.__updateGLFromBuffer(this.__context, h, a.paramPositions[q], a.paramLengths[q], b);
                            ++c
                        } else if (q < g + k) {
                            m = a.paramRefs_Float[d];
                            C = 0;
                            for (x = a.overrideFloatCount; C < x; )
                                if (z = C++,
                                m.name == a.overrideFloatNames[z]) {
                                    u = a.overrideFloatValues[z];
                                    r = !0;
                                    break
                                }
                            r ? m.__updateGL(this.__context, u) : m.__updateGLFromBuffer(this.__context, h, a.paramPositions[q], a.paramLengths[q], b);
                            ++d
                        } else {
                            m = a.paramRefs_Int[f];
                            C = 0;
                            for (x = a.overrideIntCount; C < x; )
                                if (z = C++,
                                m.name == a.overrideIntNames[z]) {
                                    w = a.overrideIntValues[z];
                                    r = !0;
                                    break
                                }
                            r ? m.__updateGL(this.__context, w) : m.__updateGLFromBuffer(this.__context, h, a.paramPositions[q], a.paramLengths[q], b);
                            ++f
                        }
                    }
                },
                get_glFragmentSource: function() {
                    return this.__glFragmentSource
                },
                get_glVertexSource: function() {
                    return this.__glVertexSource
                },
                __class__: zd,
                __properties__: {
                    get_glVertexSource: "get_glVertexSource",
                    get_glFragmentSource: "get_glFragmentSource"
                }
            };
            var gj = function(a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                zd.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.display.DisplayObjectShader"] = gj;
            gj.__name__ = "openfl.display.DisplayObjectShader";
            gj.__super__ = zd;
            gj.prototype = v(zd.prototype, {
                __class__: gj
            });
            var Dk = function(a, b) {
                qa.call(this);
                this.name = a;
                this.frame = b
            };
            h["openfl.display.FrameLabel"] = Dk;
            Dk.__name__ = "openfl.display.FrameLabel";
            Dk.__super__ = qa;
            Dk.prototype = v(qa.prototype, {
                __class__: Dk
            });
            var Ad = function(a) {
                this.__dirty = !0;
                this.__owner = a;
                this.__commands = new rd;
                this.__positionY = this.__positionX = this.__strokePadding = 0;
                this.__renderTransform = new ta;
                this.__usedShaderBuffers = new $a;
                this.__worldTransform = new ta;
                this.__height = this.__width = 0;
                this.__bitmapScale = 1;
                this.__shaderBufferPool = new ra(function() {
                    return new hj
                }
                );
                this.moveTo(0, 0)
            };
            h["openfl.display.Graphics"] = Ad;
            Ad.__name__ = "openfl.display.Graphics";
            Ad.prototype = {
                beginBitmapFill: function(a, b, c, d) {
                    null == d && (d = !1);
                    null == c && (c = !0);
                    this.__commands.beginBitmapFill(a, null != b ? b.clone() : null, c, d);
                    this.__visible = !0
                },
                beginFill: function(a, b) {
                    null == b && (b = 1);
                    null == a && (a = 0);
                    this.__commands.beginFill(a & 16777215, b);
                    0 < b && (this.__visible = !0)
                },
                beginGradientFill: function(a, b, c, d, f, g, k, q) {
                    null == q && (q = 0);
                    null == k && (k = 1);
                    null == g && (g = 0);
                    if (null != b && 0 != b.length) {
                        if (null == c) {
                            c = [];
                            for (var p = 0, l = b.length; p < l; )
                                p++,
                                c.push(1)
                        }
                        if (null == d)
                            for (d = [],
                            p = 0,
                            l = b.length; p < l; ) {
                                var h = p++;
                                d.push(Math.ceil(h / (b.length - 1) * 255))
                            }
                        if (!(c.length < b.length || d.length < b.length))
                            for (this.__commands.beginGradientFill(a, b, c, d, f, g, k, q),
                            p = 0; p < c.length; )
                                if (a = c[p],
                                ++p,
                                0 < a) {
                                    this.__visible = !0;
                                    break
                                }
                    }
                },
                beginShaderFill: function(a, b) {
                    null != a && (b = this.__shaderBufferPool.get(),
                    this.__usedShaderBuffers.add(b),
                    b.update(a),
                    this.__commands.beginShaderFill(b))
                },
                clear: function() {
                    for (var a = this.__usedShaderBuffers.h; null != a; ) {
                        var b = a.item;
                        a = a.next;
                        this.__shaderBufferPool.release(b)
                    }
                    this.__usedShaderBuffers.clear();
                    this.__commands.clear();
                    this.__strokePadding = 0;
                    null != this.__bounds && (this.set___dirty(!0),
                    this.__transformDirty = !0,
                    this.__bounds = null);
                    this.__visible = !1;
                    this.__positionY = this.__positionX = 0;
                    this.moveTo(0, 0)
                },
                cubicCurveTo: function(a, b, c, d, f, g) {
                    var k = this.__findExtrema(this.__positionX, a, c, f)
                      , q = this.__findExtrema(this.__positionY, b, d, g);
                    this.__inflateBounds(k.min - this.__strokePadding, q.min - this.__strokePadding);
                    this.__inflateBounds(k.max + this.__strokePadding, q.max + this.__strokePadding);
                    this.__positionX = f;
                    this.__positionY = g;
                    this.__commands.cubicCurveTo(a, b, c, d, f, g);
                    this.set___dirty(!0)
                },
                curveTo: function(a, b, c, d) {
                    this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
                    this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
                    var f = a < c && a > this.__positionX || a > c && a < this.__positionX ? c : this.__calculateBezierQuadPoint((this.__positionX - a) / (this.__positionX - 2 * a + c), this.__positionX, a, c);
                    var g = b < d && b > this.__positionY || b > d && b < this.__positionY ? d : this.__calculateBezierQuadPoint((this.__positionY - b) / (this.__positionY - 2 * b + d), this.__positionY, b, d);
                    this.__inflateBounds(f - this.__strokePadding, g - this.__strokePadding);
                    this.__inflateBounds(f + this.__strokePadding, g + this.__strokePadding);
                    this.__positionX = c;
                    this.__positionY = d;
                    this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
                    this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
                    this.__commands.curveTo(a, b, c, d);
                    this.set___dirty(!0)
                },
                drawCircle: function(a, b, c) {
                    0 >= c || (this.__inflateBounds(a - c - this.__strokePadding, b - c - this.__strokePadding),
                    this.__inflateBounds(a + c + this.__strokePadding, b + c + this.__strokePadding),
                    this.__commands.drawCircle(a, b, c),
                    this.set___dirty(!0))
                },
                drawGraphicsData: function(a) {
                    for (a = a.iterator(); a.hasNext(); ) {
                        var b = a.next();
                        switch (b.__graphicsDataType) {
                        case 0:
                            if (null != b.fill) {
                                var c = b.thickness;
                                isNaN(c) && (c = null);
                                switch (b.fill.__graphicsFillType) {
                                case 0:
                                    var d = b.fill;
                                    this.lineStyle(c, d.color, d.alpha, b.pixelHinting, b.scaleMode, b.caps, b.joints, b.miterLimit);
                                    break;
                                case 1:
                                    d = b.fill;
                                    this.lineStyle(c, 0, 1, b.pixelHinting, b.scaleMode, b.caps, b.joints, b.miterLimit);
                                    this.lineGradientStyle(d.type, d.colors, d.alphas, d.ratios, d.matrix, d.spreadMethod, d.interpolationMethod, d.focalPointRatio);
                                    break;
                                case 2:
                                    d = b.fill,
                                    this.lineStyle(c, 0, 1, b.pixelHinting, b.scaleMode, b.caps, b.joints, b.miterLimit),
                                    this.lineBitmapStyle(d.bitmapData, d.matrix, d.repeat, d.smooth)
                                }
                            } else
                                this.lineStyle();
                            break;
                        case 1:
                            d = b;
                            this.beginFill(d.color, d.alpha);
                            break;
                        case 2:
                            d = b;
                            this.beginGradientFill(d.type, d.colors, d.alphas, d.ratios, d.matrix, d.spreadMethod, d.interpolationMethod, d.focalPointRatio);
                            break;
                        case 3:
                            this.drawPath(b.commands, b.data, b.winding);
                            break;
                        case 4:
                            d = b;
                            this.beginBitmapFill(d.bitmapData, d.matrix, d.repeat, d.smooth);
                            break;
                        case 5:
                            this.endFill();
                            break;
                        case 6:
                            this.drawQuads(b.rects, b.indices, b.transforms);
                            break;
                        case 7:
                            this.drawTriangles(b.vertices, b.indices, b.uvtData, b.culling);
                            break;
                        case 8:
                            this.beginShaderFill(b.shader, b.matrix)
                        }
                    }
                },
                drawPath: function(a, b, c) {
                    null == c && (c = 0);
                    var d = 0;
                    1 == c && this.__commands.windingNonZero();
                    a = a.iterator();
                    a: for (; a.hasNext(); )
                        switch (a.next()) {
                        case 1:
                            this.moveTo(b.get(d), b.get(d + 1));
                            d += 2;
                            break;
                        case 2:
                            this.lineTo(b.get(d), b.get(d + 1));
                            d += 2;
                            break;
                        case 3:
                            this.curveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3));
                            d += 4;
                            break;
                        case 4:
                            this.moveTo(b.get(d + 2), b.get(d + 3));
                            break a;
                        case 5:
                            this.lineTo(b.get(d + 2), b.get(d + 3));
                            break a;
                        case 6:
                            this.cubicCurveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3), b.get(d + 4), b.get(d + 5)),
                            d += 6
                        }
                },
                drawQuads: function(a, b, c) {
                    if (null != a) {
                        var d = null != b
                          , f = !1
                          , g = !1
                          , k = d ? b.get_length() : Math.floor(a.get_length() / 4);
                        if (0 != k) {
                            null != c && (c.get_length() >= 6 * k ? g = f = !0 : c.get_length() >= 4 * k ? f = !0 : c.get_length() >= 2 * k && (g = !0));
                            for (var q = oa.__pool.get(), p = ta.__pool.get(), l = Infinity, h = Infinity, n = -Infinity, u = -Infinity, w, r = 0; r < k; ) {
                                var m = r++;
                                w = d ? 4 * b.get(m) : 4 * m;
                                0 > w || (q.setTo(0, 0, a.get(w + 2), a.get(w + 3)),
                                0 >= q.width || 0 >= q.height || (f && g ? (w = 6 * m,
                                p.setTo(c.get(w), c.get(w + 1), c.get(w + 2), c.get(w + 3), c.get(w + 4), c.get(w + 5))) : f ? (w = 4 * m,
                                p.setTo(c.get(w), c.get(w + 1), c.get(w + 2), c.get(w + 3), q.x, q.y)) : g ? (w = 2 * m,
                                p.tx = c.get(w),
                                p.ty = c.get(w + 1)) : (p.tx = q.x,
                                p.ty = q.y),
                                q.__transform(q, p),
                                l > q.x && (l = q.x),
                                h > q.y && (h = q.y),
                                n < q.get_right() && (n = q.get_right()),
                                u < q.get_bottom() && (u = q.get_bottom())))
                            }
                            this.__inflateBounds(l, h);
                            this.__inflateBounds(n, u);
                            this.__commands.drawQuads(a, b, c);
                            this.set___dirty(!0);
                            this.__visible = !0;
                            oa.__pool.release(q);
                            ta.__pool.release(p)
                        }
                    }
                },
                drawRect: function(a, b, c, d) {
                    if (0 != c || 0 != d) {
                        var f = 0 > c ? -1 : 1
                          , g = 0 > d ? -1 : 1;
                        this.__inflateBounds(a - this.__strokePadding * f, b - this.__strokePadding * g);
                        this.__inflateBounds(a + c + this.__strokePadding * f, b + d + this.__strokePadding * g);
                        this.__commands.drawRect(a, b, c, d);
                        this.set___dirty(!0)
                    }
                },
                drawRoundRect: function(a, b, c, d, f, g) {
                    if (0 != c || 0 != d) {
                        var k = 0 > c ? -1 : 1
                          , q = 0 > d ? -1 : 1;
                        this.__inflateBounds(a - this.__strokePadding * k, b - this.__strokePadding * q);
                        this.__inflateBounds(a + c + this.__strokePadding * k, b + d + this.__strokePadding * q);
                        this.__commands.drawRoundRect(a, b, c, d, f, g);
                        this.set___dirty(!0)
                    }
                },
                drawRoundRectComplex: function(a, b, c, d, f, g, k, q) {
                    if (!(0 >= c || 0 >= d)) {
                        this.__inflateBounds(a - this.__strokePadding, b - this.__strokePadding);
                        this.__inflateBounds(a + c + this.__strokePadding, b + d + this.__strokePadding);
                        var p = a + c
                          , l = b + d;
                        c = c < d ? 2 * c : 2 * d;
                        f < c || (f = c);
                        g < c || (g = c);
                        k < c || (k = c);
                        q < c || (q = c);
                        c = 1 - Math.sin(Math.PI / 180 * 45);
                        d = 1 - Math.tan(Math.PI / 180 * 22.5);
                        var h = q * c
                          , n = q * d;
                        this.moveTo(p, l - q);
                        this.curveTo(p, l - n, p - h, l - h);
                        this.curveTo(p - n, l, p - q, l);
                        h = k * c;
                        n = k * d;
                        this.lineTo(a + k, l);
                        this.curveTo(a + n, l, a + h, l - h);
                        this.curveTo(a, l - n, a, l - k);
                        h = f * c;
                        n = f * d;
                        this.lineTo(a, b + f);
                        this.curveTo(a, b + n, a + h, b + h);
                        this.curveTo(a + n, b, a + f, b);
                        h = g * c;
                        n = g * d;
                        this.lineTo(p - g, b);
                        this.curveTo(p - n, b, p - h, b + h);
                        this.curveTo(p, b + n, p, b + g);
                        this.lineTo(p, l - q);
                        this.set___dirty(!0)
                    }
                },
                drawTriangles: function(a, b, c, d) {
                    null == d && (d = 1);
                    if (null != a && 0 != a.get_length()) {
                        var f = a.get_length() / 2 | 0;
                        if (null == b) {
                            if (0 != f % 3)
                                throw new Sf("Not enough vertices to close a triangle.");
                            b = ua.toIntVector(null);
                            for (var g = 0, k = f; g < k; ) {
                                var q = g++;
                                b.push(q)
                            }
                        }
                        null == d && (d = 1);
                        var p = Infinity
                          , l = Infinity
                          , h = -Infinity
                          , n = -Infinity;
                        g = 0;
                        for (k = f; g < k; )
                            q = g++,
                            f = a.get(2 * q),
                            q = a.get(2 * q + 1),
                            p > f && (p = f),
                            l > q && (l = q),
                            h < f && (h = f),
                            n < q && (n = q);
                        this.__inflateBounds(p, l);
                        this.__inflateBounds(h, n);
                        this.__commands.drawTriangles(a, b, c, d);
                        this.set___dirty(!0);
                        this.__visible = !0
                    }
                },
                endFill: function() {
                    this.__commands.endFill()
                },
                lineBitmapStyle: function(a, b, c, d) {
                    null == d && (d = !1);
                    null == c && (c = !0);
                    this.__commands.lineBitmapStyle(a, null != b ? b.clone() : null, c, d)
                },
                lineGradientStyle: function(a, b, c, d, f, g, k, q) {
                    null == q && (q = 0);
                    null == k && (k = 1);
                    null == g && (g = 0);
                    if (null == c) {
                        c = [];
                        for (var p = 0, l = b.length; p < l; )
                            p++,
                            c.push(1)
                    }
                    if (null == d)
                        for (d = [],
                        p = 0,
                        l = b.length; p < l; ) {
                            var h = p++;
                            d.push(Math.ceil(h / (b.length - 1) * 255))
                        }
                    this.__commands.lineGradientStyle(a, b, c, d, f, g, k, q)
                },
                lineStyle: function(a, b, c, d, f, g, k, q) {
                    null == q && (q = 3);
                    null == f && (f = 2);
                    null == d && (d = !1);
                    null == c && (c = 1);
                    null == b && (b = 0);
                    null == g && (g = 1);
                    null == k && (k = 2);
                    null != a && (1 == k ? a > this.__strokePadding && (this.__strokePadding = Math.ceil(a)) : a / 2 > this.__strokePadding && (this.__strokePadding = Math.ceil(a / 2)));
                    this.__commands.lineStyle(a, b, c, d, f, g, k, q);
                    null != a && (this.__visible = !0)
                },
                lineTo: function(a, b) {
                    isFinite(a) && isFinite(b) && (this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding),
                    this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding),
                    this.__positionX = a,
                    this.__positionY = b,
                    this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding),
                    this.__inflateBounds(this.__positionX + 2 * this.__strokePadding, this.__positionY + this.__strokePadding),
                    this.__commands.lineTo(a, b),
                    this.set___dirty(!0))
                },
                moveTo: function(a, b) {
                    this.__positionX = a;
                    this.__positionY = b;
                    this.__commands.moveTo(a, b)
                },
                readGraphicsData: function(a) {
                    null == a && (a = !0);
                    var b = ua.toObjectVector(null);
                    this.__owner.__readGraphicsData(b, a);
                    return b
                },
                __calculateBezierCubicPoint: function(a, b, c, d, f) {
                    var g = 1 - a;
                    return b * g * g * g + 3 * c * a * g * g + 3 * d * g * a * a + f * a * a * a
                },
                __calculateBezierQuadPoint: function(a, b, c, d) {
                    var f = 1 - a;
                    return f * f * b + 2 * f * a * c + a * a * d
                },
                __cleanup: function() {
                    null != this.__bounds && null != this.__canvas && (this.set___dirty(!0),
                    this.__transformDirty = !0);
                    this.__context = this.__canvas = this.__bitmap = null
                },
                __getBounds: function(a, b) {
                    if (null != this.__bounds) {
                        var c = oa.__pool.get();
                        this.__bounds.__transform(c, b);
                        a.__expand(c.x, c.y, c.width, c.height);
                        oa.__pool.release(c)
                    }
                },
                __hitTest: function(a, b, c, d) {
                    if (null == this.__bounds)
                        return !1;
                    var f = d.a * d.d - d.b * d.c
                      , g = 0 == f ? -d.tx : 1 / f * (d.c * (d.ty - b) + d.d * (a - d.tx));
                    f = d.a * d.d - d.b * d.c;
                    a = 0 == f ? -d.ty : 1 / f * (d.a * (b - d.ty) + d.b * (d.tx - a));
                    return g > this.__bounds.x && a > this.__bounds.y && this.__bounds.contains(g, a) ? c ? A.hitTest(this, g, a) : !0 : !1
                },
                __findExtrema: function(a, b, c, d) {
                    var f = [];
                    if (!(b < d && b > a || b > d && b < a) || !(c < d && c > a || c > d && c < a)) {
                        var g = -a + 3 * b + d - 3 * c
                          , k = 2 * a - 4 * b + 2 * c
                          , q = b - a
                          , p = k * k - 4 * g * q;
                        0 == g ? (g = -q / k,
                        0 < g && 1 > g && f.push(this.__calculateBezierCubicPoint(g, a, b, c, d))) : 0 <= p && (q = (-k + Math.sqrt(p)) / (2 * g),
                        g = (-k - Math.sqrt(p)) / (2 * g),
                        0 < q && 1 > q && f.push(this.__calculateBezierCubicPoint(q, a, b, c, d)),
                        0 < g && 1 > g && f.push(this.__calculateBezierCubicPoint(g, a, b, c, d)))
                    }
                    b = a;
                    f.push(d);
                    for (d = 0; d < f.length; )
                        c = f[d],
                        ++d,
                        c < b && (b = c),
                        c > a && (a = c);
                    return {
                        min: b,
                        max: a
                    }
                },
                __inflateBounds: function(a, b) {
                    null == this.__bounds ? (this.__bounds = new oa(a,b,0,0),
                    this.__transformDirty = !0) : (a < this.__bounds.x && (this.__bounds.width += this.__bounds.x - a,
                    this.__bounds.x = a,
                    this.__transformDirty = !0),
                    b < this.__bounds.y && (this.__bounds.height += this.__bounds.y - b,
                    this.__bounds.y = b,
                    this.__transformDirty = !0),
                    a > this.__bounds.x + this.__bounds.width && (this.__bounds.width = a - this.__bounds.x),
                    b > this.__bounds.y + this.__bounds.height && (this.__bounds.height = b - this.__bounds.y))
                },
                __readGraphicsData: function(a) {
                    for (var b = new ve(this.__commands), c = null, d, f = 0, g = this.__commands.types; f < g.length; ) {
                        d = g[f];
                        ++f;
                        switch (d._hx_index) {
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 9:
                        case 10:
                        case 17:
                        case 18:
                            null == c && (c = new ij);
                            break;
                        default:
                            null != c && (a.push(c),
                            c = null)
                        }
                        switch (d._hx_index) {
                        case 0:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.BEGIN_BITMAP_FILL;
                            d = b;
                            a.push(new jj(d.buffer.o[d.oPos],d.buffer.o[d.oPos + 1],d.buffer.b[d.bPos],d.buffer.b[d.bPos + 1]));
                            break;
                        case 1:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.BEGIN_FILL;
                            d = b;
                            a.push(new wh(d.buffer.i[d.iPos],d.buffer.f[d.fPos]));
                            break;
                        case 2:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.BEGIN_GRADIENT_FILL;
                            d = b;
                            a.push(new kj(d.buffer.o[d.oPos],d.buffer.ii[d.iiPos],d.buffer.ff[d.ffPos],d.buffer.ii[d.iiPos + 1],d.buffer.o[d.oPos + 1],d.buffer.o[d.oPos + 2],d.buffer.o[d.oPos + 3],d.buffer.f[d.fPos]));
                            break;
                        case 3:
                            break;
                        case 4:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.CUBIC_CURVE_TO;
                            d = b;
                            c.cubicCurveTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.f[d.fPos + 5]);
                            break;
                        case 5:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.CURVE_TO;
                            d = b;
                            c.curveTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                            break;
                        case 6:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_CIRCLE;
                            d = b;
                            c.__drawCircle(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2]);
                            break;
                        case 7:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_ELLIPSE;
                            d = b;
                            c.__drawEllipse(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                            break;
                        case 9:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_RECT;
                            d = b;
                            c.__drawRect(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                            break;
                        case 10:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_ROUND_RECT;
                            d = b;
                            c.__drawRoundRect(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1], d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], null != d.buffer.o[d.oPos] ? d.buffer.o[d.oPos] : d.buffer.f[d.fPos + 4]);
                            break;
                        case 13:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.END_FILL;
                            a.push(new lj);
                            break;
                        case 14:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.LINE_BITMAP_STYLE;
                            c = null;
                            break;
                        case 15:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.LINE_GRADIENT_STYLE;
                            break;
                        case 16:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.LINE_STYLE;
                            var k = b;
                            d = new mj(k.buffer.o[k.oPos],k.buffer.b[k.bPos],k.buffer.o[k.oPos + 1],k.buffer.o[k.oPos + 2],k.buffer.o[k.oPos + 3],k.buffer.f[k.fPos + 1]);
                            d.fill = new wh(k.buffer.i[k.iPos],k.buffer.f[k.fPos]);
                            a.push(d);
                            break;
                        case 17:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.LINE_TO;
                            d = b;
                            c.lineTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1]);
                            break;
                        case 18:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.MOVE_TO;
                            d = b;
                            c.moveTo(d.buffer.f[d.fPos], d.buffer.f[d.fPos + 1]);
                            break;
                        default:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = d
                        }
                    }
                    null != c && a.push(c)
                },
                __update: function(a, b) {
                    if (!(null == this.__bounds || 0 >= this.__bounds.width || 0 >= this.__bounds.height)) {
                        var c = this.__owner.__renderTransform;
                        if (null != c) {
                            var d = b
                              , f = b;
                            null == this.__owner.__worldScale9Grid && (d = 0 == c.b ? Math.abs(c.a) : Math.sqrt(c.a * c.a + c.b * c.b),
                            f = 0 == c.c ? Math.abs(c.d) : Math.sqrt(c.c * c.c + c.d * c.d),
                            null != a && (d = 0 == a.b ? d * a.a : d * Math.sqrt(a.a * a.a + a.b * a.b),
                            f = 0 == a.c ? f * a.d : f * Math.sqrt(a.c * a.c + a.d * a.d)));
                            a = this.__bounds.width * d;
                            f *= this.__bounds.height;
                            if (1 > a || 1 > f)
                                (1 <= this.__width || 1 <= this.__height) && this.set___dirty(!0),
                                this.__height = this.__width = 0;
                            else {
                                null != Ad.maxTextureWidth && a > Ad.maxTextureWidth && (a = Ad.maxTextureWidth);
                                null != Ad.maxTextureWidth && f > Ad.maxTextureHeight && (f = Ad.maxTextureHeight);
                                if (null != this.__owner.__worldScale9Grid) {
                                    this.__renderTransform.a = b;
                                    this.__renderTransform.d = b;
                                    d = 1 / b;
                                    var g = 1 / b
                                } else
                                    this.__renderTransform.a = a / this.__bounds.width,
                                    this.__renderTransform.d = f / this.__bounds.height,
                                    d = 1 / this.__renderTransform.a,
                                    g = 1 / this.__renderTransform.d;
                                this.__worldTransform.a = d * c.a;
                                this.__worldTransform.b = d * c.b;
                                this.__worldTransform.c = g * c.c;
                                this.__worldTransform.d = g * c.d;
                                g = this.__bounds.x;
                                var k = this.__bounds.y;
                                d = g * c.a + k * c.c + c.tx;
                                c = g * c.b + k * c.d + c.ty;
                                1 < b ? (b = 1 / b,
                                this.__worldTransform.tx = Math.round(d / b) * b,
                                this.__worldTransform.ty = Math.round(c / b) * b) : (this.__worldTransform.tx = Math.round(d),
                                this.__worldTransform.ty = Math.round(c));
                                b = this.__worldTransform;
                                g = b.a * b.d - b.b * b.c;
                                this.__renderTransform.tx = 0 == g ? -b.tx : 1 / g * (b.c * (b.ty - c) + b.d * (d - b.tx));
                                b = this.__worldTransform;
                                g = b.a * b.d - b.b * b.c;
                                this.__renderTransform.ty = 0 == g ? -b.ty : 1 / g * (b.a * (c - b.ty) + b.b * (b.tx - d));
                                a = Math.ceil(a + 1);
                                f = Math.ceil(f + 1);
                                a == this.__width && f == this.__height || this.set___dirty(!0);
                                this.__width = a;
                                this.__height = f
                            }
                        }
                    }
                },
                set___dirty: function(a) {
                    if (a && null != this.__owner) {
                        var b = this.__owner;
                        b.__renderDirty || (b.__renderDirty = !0,
                        b.__setParentRenderDirty())
                    }
                    a && (this.__hardwareDirty = this.__softwareDirty = !0);
                    return this.__dirty = a
                },
                __class__: Ad,
                __properties__: {
                    set___dirty: "set___dirty"
                }
            };
            var Jf = function() {};
            h["openfl.display.IGraphicsFill"] = Jf;
            Jf.__name__ = "openfl.display.IGraphicsFill";
            Jf.__isInterface__ = !0;
            Jf.prototype = {
                __class__: Jf
            };
            var de = function() {};
            h["openfl.display.IGraphicsData"] = de;
            de.__name__ = "openfl.display.IGraphicsData";
            de.__isInterface__ = !0;
            de.prototype = {
                __class__: de
            };
            var jj = function(a, b, c, d) {
                null == d && (d = !1);
                null == c && (c = !0);
                this.bitmapData = a;
                this.matrix = b;
                this.repeat = c;
                this.smooth = d;
                this.__graphicsDataType = 4;
                this.__graphicsFillType = 2
            };
            h["openfl.display.GraphicsBitmapFill"] = jj;
            jj.__name__ = "openfl.display.GraphicsBitmapFill";
            jj.__interfaces__ = [Jf, de];
            jj.prototype = {
                __class__: jj
            };
            var lj = function() {
                this.__graphicsDataType = 5;
                this.__graphicsFillType = 3
            };
            h["openfl.display.GraphicsEndFill"] = lj;
            lj.__name__ = "openfl.display.GraphicsEndFill";
            lj.__interfaces__ = [Jf, de];
            lj.prototype = {
                __class__: lj
            };
            var kj = function(a, b, c, d, f, g, k, q) {
                null == q && (q = 0);
                null == a && (a = 0);
                null == g && (g = 0);
                null == k && (k = 1);
                this.type = a;
                this.colors = b;
                this.alphas = c;
                this.ratios = d;
                this.matrix = f;
                this.spreadMethod = g;
                this.interpolationMethod = k;
                this.focalPointRatio = q;
                this.__graphicsDataType = 2;
                this.__graphicsFillType = 1
            };
            h["openfl.display.GraphicsGradientFill"] = kj;
            kj.__name__ = "openfl.display.GraphicsGradientFill";
            kj.__interfaces__ = [Jf, de];
            kj.prototype = {
                __class__: kj
            };
            var nj = function() {};
            h["openfl.display.IGraphicsPath"] = nj;
            nj.__name__ = "openfl.display.IGraphicsPath";
            nj.__isInterface__ = !0;
            var ij = function(a, b, c) {
                null == c && (c = 0);
                this.commands = a;
                this.data = b;
                this.winding = c;
                this.__graphicsDataType = 3
            };
            h["openfl.display.GraphicsPath"] = ij;
            ij.__name__ = "openfl.display.GraphicsPath";
            ij.__interfaces__ = [nj, de];
            ij.prototype = {
                cubicCurveTo: function(a, b, c, d, f, g) {
                    null == this.commands && (this.commands = ua.toIntVector(null));
                    null == this.data && (this.data = ua.toFloatVector(null));
                    this.commands.push(6);
                    this.data.push(a);
                    this.data.push(b);
                    this.data.push(c);
                    this.data.push(d);
                    this.data.push(f);
                    this.data.push(g)
                },
                curveTo: function(a, b, c, d) {
                    null == this.commands && (this.commands = ua.toIntVector(null));
                    null == this.data && (this.data = ua.toFloatVector(null));
                    this.commands.push(3);
                    this.data.push(a);
                    this.data.push(b);
                    this.data.push(c);
                    this.data.push(d)
                },
                lineTo: function(a, b) {
                    null == this.commands && (this.commands = ua.toIntVector(null));
                    null == this.data && (this.data = ua.toFloatVector(null));
                    this.commands.push(2);
                    this.data.push(a);
                    this.data.push(b)
                },
                moveTo: function(a, b) {
                    null == this.commands && (this.commands = ua.toIntVector(null));
                    null == this.data && (this.data = ua.toFloatVector(null));
                    this.commands.push(1);
                    this.data.push(a);
                    this.data.push(b)
                },
                __drawCircle: function(a, b, c) {
                    this.__drawRoundRect(a - c, b - c, 2 * c, 2 * c, 2 * c, 2 * c)
                },
                __drawEllipse: function(a, b, c, d) {
                    this.__drawRoundRect(a, b, c, d, c, d)
                },
                __drawRect: function(a, b, c, d) {
                    this.moveTo(a, b);
                    this.lineTo(a + c, b);
                    this.lineTo(a + c, b + d);
                    this.lineTo(a, b + d);
                    this.lineTo(a, b)
                },
                __drawRoundRect: function(a, b, c, d, f, g) {
                    f *= .5;
                    g *= .5;
                    f > c / 2 && (f = c / 2);
                    g > d / 2 && (g = d / 2);
                    c = a + c;
                    d = b + d;
                    var k = -f + .7071067811865476 * f
                      , q = -f + .41421356237309503 * f
                      , p = -g + .7071067811865476 * g
                      , l = -g + .41421356237309503 * g;
                    this.moveTo(c, d - g);
                    this.curveTo(c, d + l, c + k, d + p);
                    this.curveTo(c + q, d, c - f, d);
                    this.lineTo(a + f, d);
                    this.curveTo(a - q, d, a - k, d + p);
                    this.curveTo(a, d + l, a, d - g);
                    this.lineTo(a, b + g);
                    this.curveTo(a, b - l, a - k, b - p);
                    this.curveTo(a - q, b, a + f, b);
                    this.lineTo(c - f, b);
                    this.curveTo(c + q, b, c + k, b - p);
                    this.curveTo(c, b - l, c, b + g);
                    this.lineTo(c, d - g)
                },
                __class__: ij
            };
            var Ek = function(a, b, c) {
                this.rects = a;
                this.indices = b;
                this.transforms = c;
                this.__graphicsDataType = 6
            };
            h["openfl.display.GraphicsQuadPath"] = Ek;
            Ek.__name__ = "openfl.display.GraphicsQuadPath";
            Ek.__interfaces__ = [nj, de];
            Ek.prototype = {
                __class__: Ek
            };
            var oj = function(a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                zd.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.display.GraphicsShader"] = oj;
            oj.__name__ = "openfl.display.GraphicsShader";
            oj.__super__ = zd;
            oj.prototype = v(zd.prototype, {
                __class__: oj
            });
            var Fk = function(a, b) {
                this.shader = a;
                this.matrix = b;
                this.__graphicsDataType = 8;
                this.__graphicsFillType = 4
            };
            h["openfl.display.GraphicsShaderFill"] = Fk;
            Fk.__name__ = "openfl.display.GraphicsShaderFill";
            Fk.__interfaces__ = [Jf, de];
            Fk.prototype = {
                __class__: Fk
            };
            var wh = function(a, b) {
                null == b && (b = 1);
                null == a && (a = 0);
                this.alpha = b;
                this.color = a;
                this.__graphicsDataType = 1;
                this.__graphicsFillType = 0
            };
            h["openfl.display.GraphicsSolidFill"] = wh;
            wh.__name__ = "openfl.display.GraphicsSolidFill";
            wh.__interfaces__ = [Jf, de];
            wh.prototype = {
                __class__: wh
            };
            var ll = function() {};
            h["openfl.display.IGraphicsStroke"] = ll;
            ll.__name__ = "openfl.display.IGraphicsStroke";
            ll.__isInterface__ = !0;
            var mj = function(a, b, c, d, f, g, k) {
                null == g && (g = 3);
                null == f && (f = 2);
                null == d && (d = 0);
                null == c && (c = 2);
                null == b && (b = !1);
                null == a && (a = NaN);
                this.caps = d;
                this.fill = k;
                this.joints = f;
                this.miterLimit = g;
                this.pixelHinting = b;
                this.scaleMode = c;
                this.thickness = a;
                this.__graphicsDataType = 0
            };
            h["openfl.display.GraphicsStroke"] = mj;
            mj.__name__ = "openfl.display.GraphicsStroke";
            mj.__interfaces__ = [ll, de];
            mj.prototype = {
                __class__: mj
            };
            var Gk = function(a, b, c, d) {
                null == d && (d = 1);
                this.vertices = a;
                this.indices = b;
                this.uvtData = c;
                this.culling = d;
                this.__graphicsDataType = 7
            };
            h["openfl.display.GraphicsTrianglePath"] = Gk;
            Gk.__name__ = "openfl.display.GraphicsTrianglePath";
            Gk.__interfaces__ = [nj, de];
            Gk.prototype = {
                __class__: Gk
            };
            var Hk = function() {};
            h["openfl.display.ITileContainer"] = Hk;
            Hk.__name__ = "openfl.display.ITileContainer";
            Hk.__isInterface__ = !0;
            var ei = function(a) {
                null == a && (a = 80);
                this.quality = a
            };
            h["openfl.display.JPEGEncoderOptions"] = ei;
            ei.__name__ = "openfl.display.JPEGEncoderOptions";
            ei.prototype = {
                __class__: ei
            };
            var Jl = {
                toString: function(a) {
                    switch (a) {
                    case 0:
                        return "bevel";
                    case 1:
                        return "miter";
                    case 2:
                        return "round";
                    default:
                        return null
                    }
                }
            }
              , Ik = function() {
                hb.call(this);
                this.__drawableType = 4;
                this.contentLoaderInfo = ue.create(this);
                this.uncaughtErrorEvents = this.contentLoaderInfo.uncaughtErrorEvents;
                this.__unloaded = !0
            };
            h["openfl.display.Loader"] = Ik;
            Ik.__name__ = "openfl.display.Loader";
            Ik.__super__ = hb;
            Ik.prototype = v(hb.prototype, {
                addChild: function(a) {
                    throw new dc("Error #2069: The Loader class does not implement this method.",2069);
                },
                addChildAt: function(a, b) {
                    throw new dc("Error #2069: The Loader class does not implement this method.",2069);
                },
                removeChild: function(a) {
                    if (a == this.content)
                        return hb.prototype.removeChild.call(this, this.content);
                    throw new dc("Error #2069: The Loader class does not implement this method.",2069);
                },
                removeChildAt: function(a) {
                    throw new dc("Error #2069: The Loader class does not implement this method.",2069);
                },
                __class__: Ik
            });
            var ue = function() {
                qa.call(this);
                this.applicationDomain = Hg.currentDomain;
                this.bytesTotal = this.bytesLoaded = 0;
                this.childAllowsParent = !0;
                this.parameters = {}
            };
            h["openfl.display.LoaderInfo"] = ue;
            ue.__name__ = "openfl.display.LoaderInfo";
            ue.create = function(a) {
                var b = new ue;
                b.uncaughtErrorEvents = new pj;
                null != a ? b.loader = a : b.url = ue.__rootURL;
                return b
            }
            ;
            ue.__super__ = qa;
            ue.prototype = v(qa.prototype, {
                __complete: function() {
                    this.__completed || (this.bytesLoaded < this.bytesTotal && (this.bytesLoaded = this.bytesTotal),
                    this.__update(this.bytesLoaded, this.bytesTotal),
                    this.__completed = !0,
                    this.dispatchEvent(new ya("complete")))
                },
                __update: function(a, b) {
                    this.bytesLoaded = a;
                    this.bytesTotal = b;
                    this.dispatchEvent(new eg("progress",!1,!1,a,b))
                },
                __class__: ue
            });
            var Pf = function() {
                T.call(this);
                this.__enabled = !0
            };
            h["openfl.display.MovieClip"] = Pf;
            Pf.__name__ = "openfl.display.MovieClip";
            Pf.__super__ = T;
            Pf.prototype = v(T.prototype, {
                gotoAndStop: function(a, b) {
                    null != this.__timeline && this.__timeline.__gotoAndStop(a, b)
                },
                __enterFrame: function(a) {
                    null != this.__timeline && this.__timeline.__enterFrame(a);
                    for (var b = 0, c = this.__children; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d.__enterFrame(a)
                    }
                },
                __tabTest: function(a) {
                    this.__enabled && T.prototype.__tabTest.call(this, a)
                },
                __onMouseDown: function(a) {
                    this.__enabled && this.__hasDown && this.gotoAndStop("_down");
                    this.__mouseIsDown = !0;
                    null != this.stage && this.stage.addEventListener("mouseUp", m(this, this.__onMouseUp), !0)
                },
                __onMouseUp: function(a) {
                    this.__mouseIsDown = !1;
                    null != this.stage && this.stage.removeEventListener("mouseUp", m(this, this.__onMouseUp));
                    this.__buttonMode && (ee.__eq(a.target, this) && this.__enabled && this.__hasOver ? this.gotoAndStop("_over") : this.__enabled && this.__hasUp && this.gotoAndStop("_up"))
                },
                __onRollOut: function(a) {
                    this.__enabled && (this.__mouseIsDown && this.__hasOver ? this.gotoAndStop("_over") : this.__hasUp && this.gotoAndStop("_up"))
                },
                __onRollOver: function(a) {
                    this.__enabled && this.__hasOver && this.gotoAndStop("_over")
                },
                set_buttonMode: function(a) {
                    if (this.__buttonMode != a) {
                        if (a) {
                            this.__hasUp = this.__hasOver = this.__hasDown = !1;
                            for (var b = 0, c = this.get_currentLabels(); b < c.length; ) {
                                var d = c[b];
                                ++b;
                                switch (d.name) {
                                case "_down":
                                    this.__hasDown = !0;
                                    break;
                                case "_over":
                                    this.__hasOver = !0;
                                    break;
                                case "_up":
                                    this.__hasUp = !0
                                }
                            }
                            if (this.__hasDown || this.__hasOver || this.__hasUp)
                                this.addEventListener("rollOver", m(this, this.__onRollOver)),
                                this.addEventListener("rollOut", m(this, this.__onRollOut)),
                                this.addEventListener("mouseDown", m(this, this.__onMouseDown))
                        } else
                            this.removeEventListener("rollOver", m(this, this.__onRollOver)),
                            this.removeEventListener("rollOut", m(this, this.__onRollOut)),
                            this.removeEventListener("mouseDown", m(this, this.__onMouseDown));
                        this.__buttonMode = a
                    }
                    return a
                },
                get_currentLabels: function() {
                    return null != this.__timeline ? this.__timeline.__currentLabels.slice() : []
                },
                __class__: Pf,
                __properties__: v(T.prototype.__properties__, {
                    get_currentLabels: "get_currentLabels"
                })
            });
            var bb = function(a, b) {
                pd.call(this);
                this.__context3D = a;
                this.__context = a.__context;
                this.__gl = this.gl = a.__context.webgl;
                this.__defaultRenderTarget = b;
                this.__flipped = null == this.__defaultRenderTarget;
                null == Ad.maxTextureWidth && (Ad.maxTextureWidth = Ad.maxTextureHeight = this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE));
                this.__matrix = lb._new();
                this.__values = [];
                this.__softwareRenderer = new We(null);
                this.__type = "opengl";
                this.__setBlendMode(10);
                this.__context3D.__setGLBlend(!0);
                this.__clipRects = [];
                this.__maskObjects = [];
                this.__numClipRects = 0;
                this.__projection = lb._new();
                this.__projectionFlipped = lb._new();
                this.__stencilReference = 0;
                this.__tempRect = new oa;
                this.__defaultDisplayShader = new gj;
                this.__defaultGraphicsShader = new oj;
                this.__defaultShader = this.__defaultDisplayShader;
                this.__initShader(this.__defaultShader);
                this.__scrollRectMasks = new ra(function() {
                    return new of
                }
                );
                this.__maskShader = new fg
            };
            h["openfl.display.OpenGLRenderer"] = bb;
            bb.__name__ = "openfl.display.OpenGLRenderer";
            bb.__super__ = pd;
            bb.prototype = v(pd.prototype, {
                applyAlpha: function(a) {
                    bb.__alphaValue[0] = a * this.__worldAlpha;
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addFloatOverride("openfl_Alpha", bb.__alphaValue) : null != this.__currentShader && null != this.__currentShader.__alpha && (this.__currentShader.__alpha.value = bb.__alphaValue)
                },
                applyBitmapData: function(a, b, c) {
                    null == c && (c = !1);
                    null != this.__currentShaderBuffer ? null != a && (bb.__textureSizeValue[0] = a.__textureWidth,
                    bb.__textureSizeValue[1] = a.__textureHeight,
                    this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize", bb.__textureSizeValue)) : null != this.__currentShader && (null != this.__currentShader.__bitmap && (this.__currentShader.__bitmap.input = a,
                    this.__currentShader.__bitmap.filter = b && this.__allowSmoothing ? 4 : 5,
                    this.__currentShader.__bitmap.mipFilter = 2,
                    this.__currentShader.__bitmap.wrap = c ? 2 : 0),
                    null != this.__currentShader.__texture && (this.__currentShader.__texture.input = a,
                    this.__currentShader.__texture.filter = b && this.__allowSmoothing ? 4 : 5,
                    this.__currentShader.__texture.mipFilter = 2,
                    this.__currentShader.__texture.wrap = c ? 2 : 0),
                    null != this.__currentShader.__textureSize && (null != a ? (bb.__textureSizeValue[0] = a.__textureWidth,
                    bb.__textureSizeValue[1] = a.__textureHeight,
                    this.__currentShader.__textureSize.value = bb.__textureSizeValue) : this.__currentShader.__textureSize.value = null))
                },
                applyColorTransform: function(a) {
                    var b = null != a && !a.__isDefault(!0);
                    this.applyHasColorTransform(b);
                    b ? (a.__setArrays(bb.__colorMultipliersValue, bb.__colorOffsetsValue),
                    null != this.__currentShaderBuffer ? (this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", bb.__colorMultipliersValue),
                    this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", bb.__colorOffsetsValue)) : null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.value = bb.__colorMultipliersValue),
                    null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.value = bb.__colorOffsetsValue))) : null != this.__currentShaderBuffer ? (this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", bb.__emptyColorValue),
                    this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", bb.__emptyColorValue)) : null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.value = bb.__emptyColorValue),
                    null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.value = bb.__emptyColorValue))
                },
                applyHasColorTransform: function(a) {
                    bb.__hasColorTransformValue[0] = a;
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform", bb.__hasColorTransformValue) : null != this.__currentShader && null != this.__currentShader.__hasColorTransform && (this.__currentShader.__hasColorTransform.value = bb.__hasColorTransformValue)
                },
                applyMatrix: function(a) {
                    null != this.__currentShaderBuffer ? this.__currentShaderBuffer.addFloatOverride("openfl_Matrix", a) : null != this.__currentShader && null != this.__currentShader.__matrix && (this.__currentShader.__matrix.value = a)
                },
                setShader: function(a) {
                    this.__currentShaderBuffer = null;
                    this.__currentShader != a && (null == a ? (this.__currentShader = null,
                    this.__context3D.setProgram(null)) : (this.__currentShader = a,
                    this.__initShader(a),
                    this.__context3D.setProgram(a.program),
                    this.__context3D.__flushGLProgram(),
                    this.__currentShader.__enable(),
                    this.__context3D.__state.shader = a))
                },
                setViewport: function() {
                    this.__gl.viewport(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight)
                },
                updateShader: function() {
                    null != this.__currentShader && (null != this.__currentShader.__position && (this.__currentShader.__position.__useArray = !0),
                    null != this.__currentShader.__textureCoord && (this.__currentShader.__textureCoord.__useArray = !0),
                    this.__context3D.setProgram(this.__currentShader.program),
                    this.__context3D.__flushGLProgram(),
                    this.__context3D.__flushGLTextures(),
                    this.__currentShader.__update())
                },
                useAlphaArray: function() {
                    null != this.__currentShader && null != this.__currentShader.__alpha && (this.__currentShader.__alpha.__useArray = !0)
                },
                useColorTransformArray: function() {
                    null != this.__currentShader && (null != this.__currentShader.__colorMultiplier && (this.__currentShader.__colorMultiplier.__useArray = !0),
                    null != this.__currentShader.__colorOffset && (this.__currentShader.__colorOffset.__useArray = !0))
                },
                __clear: function() {
                    null == this.__stage || this.__stage.__transparent ? this.__context3D.clear(0, 0, 0, 0, 0, 0, 1) : this.__context3D.clear(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2], 1, 0, 0, 1);
                    this.__cleared = !0
                },
                __clearShader: function() {
                    null != this.__currentShader && (null == this.__currentShaderBuffer ? null != this.__currentShader.__bitmap && (this.__currentShader.__bitmap.input = null) : this.__currentShaderBuffer.clearOverride(),
                    null != this.__currentShader.__texture && (this.__currentShader.__texture.input = null),
                    null != this.__currentShader.__textureSize && (this.__currentShader.__textureSize.value = null),
                    null != this.__currentShader.__hasColorTransform && (this.__currentShader.__hasColorTransform.value = null),
                    null != this.__currentShader.__position && (this.__currentShader.__position.value = null),
                    null != this.__currentShader.__matrix && (this.__currentShader.__matrix.value = null),
                    this.__currentShader.__clearUseArray())
                },
                __copyShader: function(a) {
                    this.__currentShader = a.__currentShader;
                    this.__currentShaderBuffer = a.__currentShaderBuffer;
                    this.__currentDisplayShader = a.__currentDisplayShader;
                    this.__currentGraphicsShader = a.__currentGraphicsShader
                },
                __getMatrix: function(a, b) {
                    var c = ta.__pool.get();
                    c.copyFrom(a);
                    c.concat(this.__worldTransform);
                    if (0 == b || 1 == b && 0 == c.b && 0 == c.c && 1.001 > c.a && .999 < c.a && 1.001 > c.d && .999 < c.d)
                        c.tx = Math.round(c.tx),
                        c.ty = Math.round(c.ty);
                    lb.identity(this.__matrix);
                    lb.set(this.__matrix, 0, c.a);
                    lb.set(this.__matrix, 1, c.b);
                    lb.set(this.__matrix, 4, c.c);
                    lb.set(this.__matrix, 5, c.d);
                    lb.set(this.__matrix, 12, c.tx);
                    lb.set(this.__matrix, 13, c.ty);
                    lb.append(this.__matrix, this.__flipped ? this.__projectionFlipped : this.__projection);
                    this.__values[0] = lb.get(this.__matrix, 0);
                    this.__values[1] = lb.get(this.__matrix, 1);
                    this.__values[2] = lb.get(this.__matrix, 2);
                    this.__values[3] = lb.get(this.__matrix, 3);
                    this.__values[4] = lb.get(this.__matrix, 4);
                    this.__values[5] = lb.get(this.__matrix, 5);
                    this.__values[6] = lb.get(this.__matrix, 6);
                    this.__values[7] = lb.get(this.__matrix, 7);
                    this.__values[8] = lb.get(this.__matrix, 8);
                    this.__values[9] = lb.get(this.__matrix, 9);
                    this.__values[10] = lb.get(this.__matrix, 10);
                    this.__values[11] = lb.get(this.__matrix, 11);
                    this.__values[12] = lb.get(this.__matrix, 12);
                    this.__values[13] = lb.get(this.__matrix, 13);
                    this.__values[14] = lb.get(this.__matrix, 14);
                    this.__values[15] = lb.get(this.__matrix, 15);
                    ta.__pool.release(c);
                    return this.__values
                },
                __initShader: function(a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D,
                    a.__init()),
                    a) : this.__defaultShader
                },
                __initDisplayShader: function(a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D,
                    a.__init()),
                    a) : this.__defaultDisplayShader
                },
                __initGraphicsShader: function(a) {
                    return null != a ? (null == a.__context && (a.__context = this.__context3D,
                    a.__init()),
                    a) : this.__defaultGraphicsShader
                },
                __initShaderBuffer: function(a) {
                    return null != a ? this.__initGraphicsShader(a.shader) : this.__defaultGraphicsShader
                },
                __popMask: function() {
                    if (0 != this.__stencilReference) {
                        var a = this.__maskObjects.pop();
                        1 < this.__stencilReference ? (this.__context3D.setStencilActions(2, 1, 0, 0, 5),
                        this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255),
                        this.__context3D.setColorMask(!1, !1, !1, !1),
                        this.__renderDrawableMask(a),
                        this.__stencilReference--,
                        this.__context3D.setStencilActions(2, 1, 5, 5, 5),
                        this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0),
                        this.__context3D.setColorMask(!0, !0, !0, !0)) : (this.__stencilReference = 0,
                        this.__context3D.setStencilActions(),
                        this.__context3D.setStencilReferenceValue(0, 0, 0))
                    }
                },
                __popMaskObject: function(a, b) {
                    null == b && (b = !0);
                    null != a.__mask && this.__popMask();
                    b && null != a.__scrollRect && (0 != a.__renderTransform.b || 0 != a.__renderTransform.c ? (this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length - 1]),
                    this.__popMask()) : this.__popMaskRect())
                },
                __popMaskRect: function() {
                    0 < this.__numClipRects && (this.__numClipRects--,
                    0 < this.__numClipRects ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1]) : this.__scissorRect())
                },
                __pushMask: function(a) {
                    0 == this.__stencilReference && (this.__context3D.clear(0, 0, 0, 0, 0, 0, 4),
                    this.__updatedStencil = !0);
                    this.__context3D.setStencilActions(2, 1, 2, 5, 5);
                    this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
                    this.__context3D.setColorMask(!1, !1, !1, !1);
                    this.__renderDrawableMask(a);
                    this.__maskObjects.push(a);
                    this.__stencilReference++;
                    this.__context3D.setStencilActions(2, 1, 5, 5, 5);
                    this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
                    this.__context3D.setColorMask(!0, !0, !0, !0)
                },
                __pushMaskObject: function(a, b) {
                    null == b && (b = !0);
                    b && null != a.__scrollRect && (0 != a.__renderTransform.b || 0 != a.__renderTransform.c ? (b = this.__scrollRectMasks.get(),
                    b.get_graphics().clear(),
                    b.get_graphics().beginFill(65280),
                    b.get_graphics().drawRect(a.__scrollRect.x, a.__scrollRect.y, a.__scrollRect.width, a.__scrollRect.height),
                    b.__renderTransform.copyFrom(a.__renderTransform),
                    this.__pushMask(b)) : this.__pushMaskRect(a.__scrollRect, a.__renderTransform));
                    null != a.__mask && this.__pushMask(a.__mask)
                },
                __pushMaskRect: function(a, b) {
                    this.__numClipRects == this.__clipRects.length && (this.__clipRects[this.__numClipRects] = new oa);
                    var c = ta.__pool.get();
                    c.copyFrom(b);
                    c.concat(this.__worldTransform);
                    b = this.__clipRects[this.__numClipRects];
                    a.__transform(b, c);
                    0 < this.__numClipRects && (a = this.__clipRects[this.__numClipRects - 1],
                    b.__contract(a.x, a.y, a.width, a.height));
                    0 > b.height && (b.height = 0);
                    0 > b.width && (b.width = 0);
                    ta.__pool.release(c);
                    this.__scissorRect(b);
                    this.__numClipRects++
                },
                __render: function(a) {
                    this.__context3D.setColorMask(!0, !0, !0, !0);
                    this.__context3D.setCulling(3);
                    this.__context3D.setDepthTest(!1, 0);
                    this.__context3D.setStencilActions();
                    this.__context3D.setStencilReferenceValue(0, 0, 0);
                    this.__context3D.setScissorRectangle(null);
                    this.__blendMode = null;
                    this.__setBlendMode(10);
                    if (null == this.__defaultRenderTarget) {
                        if (this.__context3D.__backBufferWantsBestResolution ? bb.__scissorRectangle.setTo(this.__offsetX / this.__pixelRatio, this.__offsetY / this.__pixelRatio, this.__displayWidth / this.__pixelRatio, this.__displayHeight / this.__pixelRatio) : bb.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight),
                        this.__context3D.setScissorRectangle(bb.__scissorRectangle),
                        this.__upscaled = 1 != this.__worldTransform.a || 1 != this.__worldTransform.d,
                        this.__renderDrawable(a),
                        0 < this.__offsetX || 0 < this.__offsetY)
                            0 < this.__offsetX && (bb.__scissorRectangle.setTo(0, 0, this.__offsetX, this.__height),
                            this.__context3D.setScissorRectangle(bb.__scissorRectangle),
                            this.__context3D.__flushGL(),
                            this.__gl.clearColor(0, 0, 0, 1),
                            this.__gl.clear(this.__gl.COLOR_BUFFER_BIT),
                            bb.__scissorRectangle.setTo(this.__offsetX + this.__displayWidth, 0, this.__width, this.__height),
                            this.__context3D.setScissorRectangle(bb.__scissorRectangle),
                            this.__context3D.__flushGL(),
                            this.__gl.clearColor(0, 0, 0, 1),
                            this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)),
                            0 < this.__offsetY && (bb.__scissorRectangle.setTo(0, 0, this.__width, this.__offsetY),
                            this.__context3D.setScissorRectangle(bb.__scissorRectangle),
                            this.__context3D.__flushGL(),
                            this.__gl.clearColor(0, 0, 0, 1),
                            this.__gl.clear(this.__gl.COLOR_BUFFER_BIT),
                            bb.__scissorRectangle.setTo(0, this.__offsetY + this.__displayHeight, this.__width, this.__height),
                            this.__context3D.setScissorRectangle(bb.__scissorRectangle),
                            this.__context3D.__flushGL(),
                            this.__gl.clearColor(0, 0, 0, 1),
                            this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)),
                            this.__context3D.setScissorRectangle(null)
                    } else {
                        this.__context3D.__backBufferWantsBestResolution ? bb.__scissorRectangle.setTo(this.__offsetX / this.__pixelRatio, this.__offsetY / this.__pixelRatio, this.__displayWidth / this.__pixelRatio, this.__displayHeight / this.__pixelRatio) : bb.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
                        this.__context3D.setScissorRectangle(bb.__scissorRectangle);
                        var b = a.__mask
                          , c = a.__scrollRect;
                        a.__mask = null;
                        a.__scrollRect = null;
                        this.__renderDrawable(a);
                        a.__mask = b;
                        a.__scrollRect = c
                    }
                    this.__context3D.present()
                },
                __renderDrawable: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 0:
                            qj.renderDrawable(a, this);
                            break;
                        case 2:
                            Qd.renderDrawable(a, this);
                            break;
                        case 3:
                            gg.renderDrawable(a, this);
                            break;
                        case 4:
                        case 5:
                            rj.renderDrawable(a, this);
                            break;
                        case 6:
                            sj.renderDrawable(a, this);
                            break;
                        case 7:
                            hf.renderDrawable(a, this);
                            break;
                        case 8:
                            Rd.renderDrawable(a, this);
                            break;
                        case 9:
                            X.renderDrawable(a, this)
                        }
                },
                __renderDrawableMask: function(a) {
                    if (null != a)
                        switch (a.__drawableType) {
                        case 0:
                            qj.renderDrawableMask(a, this);
                            break;
                        case 2:
                            Qd.renderDrawableMask(a, this);
                            break;
                        case 3:
                            gg.renderDrawableMask(a, this);
                            break;
                        case 4:
                        case 5:
                            rj.renderDrawableMask(a, this);
                            break;
                        case 6:
                            sj.renderDrawableMask(a, this);
                            break;
                        case 7:
                            hf.renderDrawableMask(a, this);
                            break;
                        case 8:
                            Rd.renderDrawableMask(a, this);
                            break;
                        case 9:
                            X.renderDrawableMask(a, this)
                        }
                },
                __renderFilterPass: function(a, b, c, d) {
                    null == d && (d = !0);
                    if (null != a && null != b && null != this.__defaultRenderTarget) {
                        var f = this.__context3D.__state.renderToTexture
                          , g = this.__context3D.__state.renderToTextureDepthStencil
                          , k = this.__context3D.__state.renderToTextureAntiAlias
                          , q = this.__context3D.__state.renderToTextureSurfaceSelector;
                        this.__context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.__context3D), !1);
                        d && this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
                        b = this.__initShader(b);
                        this.setShader(b);
                        this.applyAlpha(1);
                        this.applyBitmapData(a, c);
                        this.applyColorTransform(null);
                        this.applyMatrix(this.__getMatrix(a.__renderTransform, 1));
                        this.updateShader();
                        c = a.getVertexBuffer(this.__context3D);
                        null != b.__position && this.__context3D.setVertexBufferAt(b.__position.index, c, 0, 3);
                        null != b.__textureCoord && this.__context3D.setVertexBufferAt(b.__textureCoord.index, c, 3, 2);
                        a = a.getIndexBuffer(this.__context3D);
                        this.__context3D.drawTriangles(a);
                        null != f ? this.__context3D.setRenderToTexture(f, g, k, q) : this.__context3D.setRenderToBackBuffer();
                        this.__clearShader()
                    }
                },
                __resize: function(a, b) {
                    this.__width = a;
                    this.__height = b;
                    a = null == this.__defaultRenderTarget ? this.__stage.stageWidth : this.__defaultRenderTarget.width;
                    b = null == this.__defaultRenderTarget ? this.__stage.stageHeight : this.__defaultRenderTarget.height;
                    if (null == this.__defaultRenderTarget) {
                        var c = this.__worldTransform;
                        c = Math.round(0 * c.a + 0 * c.c + c.tx)
                    } else
                        c = 0;
                    this.__offsetX = c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform,
                    c = Math.round(0 * c.b + 0 * c.d + c.ty)) : c = 0;
                    this.__offsetY = c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform,
                    c = Math.round(a * c.a + 0 * c.c + c.tx - this.__offsetX)) : c = a;
                    this.__displayWidth = c;
                    null == this.__defaultRenderTarget ? (c = this.__worldTransform,
                    c = Math.round(0 * c.b + b * c.d + c.ty - this.__offsetY)) : c = b;
                    this.__displayHeight = c;
                    lb.createOrtho(this.__projection, 0, this.__displayWidth + 2 * this.__offsetX, 0, this.__displayHeight + 2 * this.__offsetY, -1E3, 1E3);
                    lb.createOrtho(this.__projectionFlipped, 0, this.__displayWidth + 2 * this.__offsetX, this.__displayHeight + 2 * this.__offsetY, 0, -1E3, 1E3)
                },
                __resumeClipAndMask: function(a) {
                    0 < this.__stencilReference ? (this.__context3D.setStencilActions(2, 1, 5, 5, 5),
                    this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0)) : (this.__context3D.setStencilActions(),
                    this.__context3D.setStencilReferenceValue(0, 0, 0));
                    0 < this.__numClipRects ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1]) : this.__scissorRect()
                },
                __scissorRect: function(a) {
                    if (null != a) {
                        var b = Math.floor(a.x)
                          , c = Math.floor(a.y)
                          , d = 0 < a.width ? Math.ceil(a.get_right()) - b : 0
                          , f = 0 < a.height ? Math.ceil(a.get_bottom()) - c : 0;
                        this.__context3D.__backBufferWantsBestResolution && (f = 1.5 / this.__pixelRatio,
                        b = a.x / this.__pixelRatio,
                        c = a.y / this.__pixelRatio,
                        d = 0 < a.width ? a.get_right() / this.__pixelRatio - b + f : 0,
                        f = 0 < a.height ? a.get_bottom() / this.__pixelRatio - c + f : 0);
                        0 > d && (d = 0);
                        0 > f && (f = 0);
                        bb.__scissorRectangle.setTo(b, c, d, f);
                        this.__context3D.setScissorRectangle(bb.__scissorRectangle)
                    } else
                        this.__context3D.setScissorRectangle(null)
                },
                __setBlendMode: function(a) {
                    null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
                    if (this.__blendMode != a)
                        switch (this.__blendMode = a,
                        a) {
                        case 0:
                            this.__context3D.setBlendFactors(2, 2);
                            break;
                        case 9:
                            this.__context3D.setBlendFactors(1, 5);
                            break;
                        case 12:
                            this.__context3D.setBlendFactors(2, 6);
                            break;
                        case 14:
                            this.__context3D.setBlendFactors(2, 2);
                            this.__context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);
                            break;
                        default:
                            this.__context3D.setBlendFactors(2, 5)
                        }
                },
                __setRenderTarget: function(a) {
                    this.__defaultRenderTarget = a;
                    this.__flipped = null == a;
                    null != a && this.__resize(a.width, a.height)
                },
                __setShaderBuffer: function(a) {
                    this.setShader(a.shader);
                    this.__currentShaderBuffer = a
                },
                __suspendClipAndMask: function() {
                    0 < this.__stencilReference && (this.__context3D.setStencilActions(),
                    this.__context3D.setStencilReferenceValue(0, 0, 0));
                    0 < this.__numClipRects && this.__scissorRect()
                },
                __updateShaderBuffer: function(a) {
                    null != this.__currentShader && null != this.__currentShaderBuffer && this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer, a)
                },
                __class__: bb
            });
            var di = function(a) {
                null == a && (a = !1);
                this.fastCompression = a
            };
            h["openfl.display.PNGEncoderOptions"] = di;
            di.__name__ = "openfl.display.PNGEncoderOptions";
            di.prototype = {
                __class__: di
            };
            var Ih = function(a) {
                this.onComplete = new Bc;
                this.display = a;
                null != a && (a.addEventListener("unload", m(this, this.display_onUnload)),
                Sa.get_current().addChild(a))
            };
            h["openfl.display.Preloader"] = Ih;
            Ih.__name__ = "openfl.display.Preloader";
            Ih.prototype = {
                start: function() {
                    this.ready = !0;
                    Sa.get_current().get_loaderInfo().__complete();
                    if (null != this.display) {
                        var a = new ya("complete",!0,!0);
                        this.display.dispatchEvent(a);
                        a.isDefaultPrevented() || this.display.dispatchEvent(new ya("unload"))
                    } else
                        this.complete || (this.complete = !0,
                        this.onComplete.dispatch())
                },
                update: function(a, b) {
                    Sa.get_current().get_loaderInfo().__update(a, b);
                    null != this.display && this.display.dispatchEvent(new eg("progress",!0,!0,a,b))
                },
                display_onUnload: function(a) {
                    null != this.display && (this.display.removeEventListener("unload", m(this, this.display_onUnload)),
                    this.display.parent == Sa.get_current() && Sa.get_current().removeChild(this.display),
                    Sa.get_current().stage.set_focus(null),
                    this.display = null);
                    this.ready && !this.complete && (this.complete = !0,
                    this.onComplete.dispatch())
                },
                __class__: Ih
            };
            var Vg = function() {
                T.call(this);
                var a = this.getBackgroundColor()
                  , b = 0;
                70 > .299 * (a >> 16 & 255) + .587 * (a >> 8 & 255) + .114 * (a & 255) && (b = 16777215);
                a = this.getHeight() / 2 - 3.5;
                var c = this.getWidth() - 60;
                this.outline = new of;
                this.outline.get_graphics().beginFill(b, .07);
                this.outline.get_graphics().drawRect(0, 0, c, 7);
                this.outline.set_x(30);
                this.outline.set_y(a);
                this.outline.set_alpha(0);
                this.addChild(this.outline);
                this.progress = new of;
                this.progress.get_graphics().beginFill(b, .35);
                this.progress.get_graphics().drawRect(0, 0, c - 4, 3);
                this.progress.set_x(32);
                this.progress.set_y(a + 2);
                this.progress.set_scaleX(0);
                this.progress.set_alpha(0);
                this.addChild(this.progress);
                this.startAnimation = Sa.getTimer() + 100;
                this.endAnimation = this.startAnimation + 1E3;
                this.addEventListener("addedToStage", m(this, this.this_onAddedToStage))
            };
            h["openfl.display.DefaultPreloader"] = Vg;
            Vg.__name__ = "openfl.display.DefaultPreloader";
            Vg.__super__ = T;
            Vg.prototype = v(T.prototype, {
                getBackgroundColor: function() {
                    var a = Sa.get_current().stage.window.context.attributes;
                    return Object.prototype.hasOwnProperty.call(a, "background") && null != a.background ? a.background : 0
                },
                getHeight: function() {
                    var a = Sa.get_current().stage.window.__height;
                    return 0 < a ? a : Sa.get_current().stage.stageHeight
                },
                getWidth: function() {
                    var a = Sa.get_current().stage.window.__width;
                    return 0 < a ? a : Sa.get_current().stage.stageWidth
                },
                onInit: function() {
                    this.addEventListener("enterFrame", m(this, this.this_onEnterFrame))
                },
                onLoaded: function() {
                    this.removeEventListener("enterFrame", m(this, this.this_onEnterFrame));
                    this.dispatchEvent(new ya("unload"))
                },
                onUpdate: function(a, b) {
                    var c = 0;
                    0 < b && (c = a / b,
                    1 < c && (c = 1));
                    this.progress.set_scaleX(c)
                },
                this_onAddedToStage: function(a) {
                    this.removeEventListener("addedToStage", m(this, this.this_onAddedToStage));
                    this.onInit();
                    this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
                    this.addEventListener("progress", m(this, this.this_onProgress));
                    this.addEventListener("complete", m(this, this.this_onComplete))
                },
                this_onComplete: function(a) {
                    a.preventDefault();
                    this.removeEventListener("progress", m(this, this.this_onProgress));
                    this.removeEventListener("complete", m(this, this.this_onComplete));
                    this.onLoaded()
                },
                this_onEnterFrame: function(a) {
                    a = (Sa.getTimer() - this.startAnimation) / (this.endAnimation - this.startAnimation);
                    0 > a && (a = 0);
                    1 < a && (a = 1);
                    this.outline.set_alpha(this.progress.set_alpha(a))
                },
                this_onProgress: function(a) {
                    this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0)
                },
                __class__: Vg
            });
            var wl = {
                _new: function(a) {
                    return {}
                }
            }
              , fj = function() {
                this.channels = 0;
                this.filter = 5;
                this.index = this.height = 0;
                this.mipFilter = 2;
                this.wrap = this.width = 0
            };
            h["openfl.display.ShaderInput"] = fj;
            fj.__name__ = "openfl.display.ShaderInput";
            fj.prototype = {
                __disableGL: function(a, b) {
                    0 > b || a.setTextureAt(b, null)
                },
                __updateGL: function(a, b, c, d, f, g) {
                    c = null != c ? c : this.input;
                    d = null != d ? d : this.filter;
                    f = null != f ? f : this.mipFilter;
                    g = null != g ? g : this.wrap;
                    null != c ? (a.setTextureAt(b, c.getTexture(a)),
                    a.setSamplerStateAt(b, g, d, f)) : a.setTextureAt(b, null)
                },
                __class__: fj
            };
            var Gg = function() {
                this.index = 0
            };
            h["openfl.display.ShaderParameter"] = Gg;
            Gg.__name__ = "openfl.display.ShaderParameter";
            Gg.prototype = {
                __disableGL: function(a) {
                    if (!(0 > this.index || (a = a.gl,
                    this.__isUniform)))
                        for (var b = 0, c = this.__arrayLength; b < c; ) {
                            var d = b++;
                            a.disableVertexAttribArray(this.index + d)
                        }
                },
                __updateGL: function(a, b) {
                    if (!(0 > this.index)) {
                        a = a.gl;
                        b = null != b ? b : this.value;
                        var c = this.__isBool ? b : null
                          , d = this.__isFloat ? b : null
                          , f = this.__isInt ? b : null;
                        if (this.__isUniform)
                            if (null != b && b.length >= this.__length)
                                switch (this.type) {
                                case 0:
                                    a.uniform1i(this.index, c[0] ? 1 : 0);
                                    break;
                                case 1:
                                    a.uniform2i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                                    break;
                                case 2:
                                    a.uniform3i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                                    break;
                                case 3:
                                    a.uniform4i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                                    break;
                                case 4:
                                    a.uniform1f(this.index, d[0]);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, d[0], d[1]);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, d[0], d[1], d[2]);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, d[0], d[1], d[2], d[3]);
                                    break;
                                case 8:
                                    a.uniform1i(this.index, f[0]);
                                    break;
                                case 9:
                                    a.uniform2i(this.index, f[0], f[1]);
                                    break;
                                case 10:
                                    a.uniform3i(this.index, f[0], f[1], f[2]);
                                    break;
                                case 11:
                                    a.uniform4i(this.index, f[0], f[1], f[2], f[3]);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] = d[0];
                                    this.__uniformMatrix[1] = d[1];
                                    this.__uniformMatrix[2] = d[2];
                                    this.__uniformMatrix[3] = d[3];
                                    Lc.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = d[0];
                                    this.__uniformMatrix[1] = d[1];
                                    this.__uniformMatrix[2] = d[2];
                                    this.__uniformMatrix[3] = d[3];
                                    this.__uniformMatrix[4] = d[4];
                                    this.__uniformMatrix[5] = d[5];
                                    this.__uniformMatrix[6] = d[6];
                                    this.__uniformMatrix[7] = d[7];
                                    this.__uniformMatrix[8] = d[8];
                                    Lc.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = d[0],
                                    this.__uniformMatrix[1] = d[1],
                                    this.__uniformMatrix[2] = d[2],
                                    this.__uniformMatrix[3] = d[3],
                                    this.__uniformMatrix[4] = d[4],
                                    this.__uniformMatrix[5] = d[5],
                                    this.__uniformMatrix[6] = d[6],
                                    this.__uniformMatrix[7] = d[7],
                                    this.__uniformMatrix[8] = d[8],
                                    this.__uniformMatrix[9] = d[9],
                                    this.__uniformMatrix[10] = d[10],
                                    this.__uniformMatrix[11] = d[11],
                                    this.__uniformMatrix[12] = d[12],
                                    this.__uniformMatrix[13] = d[13],
                                    this.__uniformMatrix[14] = d[14],
                                    this.__uniformMatrix[15] = d[15],
                                    Lc.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                                }
                            else
                                switch (this.type) {
                                case 4:
                                    a.uniform1f(this.index, 0);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, 0, 0);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, 0, 0, 0);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 0:
                                case 8:
                                    a.uniform1i(this.index, 0);
                                    break;
                                case 1:
                                case 9:
                                    a.uniform2i(this.index, 0, 0);
                                    break;
                                case 2:
                                case 10:
                                    a.uniform3i(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 11:
                                    a.uniform4i(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] = 0;
                                    this.__uniformMatrix[1] = 0;
                                    this.__uniformMatrix[2] = 0;
                                    this.__uniformMatrix[3] = 0;
                                    Lc.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = 0;
                                    this.__uniformMatrix[1] = 0;
                                    this.__uniformMatrix[2] = 0;
                                    this.__uniformMatrix[3] = 0;
                                    this.__uniformMatrix[4] = 0;
                                    this.__uniformMatrix[5] = 0;
                                    this.__uniformMatrix[6] = 0;
                                    this.__uniformMatrix[7] = 0;
                                    this.__uniformMatrix[8] = 0;
                                    Lc.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = 0,
                                    this.__uniformMatrix[1] = 0,
                                    this.__uniformMatrix[2] = 0,
                                    this.__uniformMatrix[3] = 0,
                                    this.__uniformMatrix[4] = 0,
                                    this.__uniformMatrix[5] = 0,
                                    this.__uniformMatrix[6] = 0,
                                    this.__uniformMatrix[7] = 0,
                                    this.__uniformMatrix[8] = 0,
                                    this.__uniformMatrix[9] = 0,
                                    this.__uniformMatrix[10] = 0,
                                    this.__uniformMatrix[11] = 0,
                                    this.__uniformMatrix[12] = 0,
                                    this.__uniformMatrix[13] = 0,
                                    this.__uniformMatrix[14] = 0,
                                    this.__uniformMatrix[15] = 0,
                                    Lc.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                                }
                        else if (this.__useArray || null != b && b.length != this.__length)
                            for (g = 0,
                            k = this.__arrayLength; g < k; )
                                q = g++,
                                a.enableVertexAttribArray(this.index + q);
                        else {
                            for (var g = 0, k = this.__arrayLength; g < k; ) {
                                var q = g++;
                                a.disableVertexAttribArray(this.index + q)
                            }
                            if (null != b)
                                switch (this.type) {
                                case 0:
                                    a.vertexAttrib1f(this.index, c[0] ? 1 : 0);
                                    break;
                                case 1:
                                    a.vertexAttrib2f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                                    break;
                                case 2:
                                    a.vertexAttrib3f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                                    break;
                                case 3:
                                    a.vertexAttrib4f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                                    break;
                                case 4:
                                    a.vertexAttrib1f(this.index, d[0]);
                                    break;
                                case 5:
                                    a.vertexAttrib2f(this.index, d[0], d[1]);
                                    break;
                                case 6:
                                    a.vertexAttrib3f(this.index, d[0], d[1], d[2]);
                                    break;
                                case 7:
                                    a.vertexAttrib4f(this.index, d[0], d[1], d[2], d[3]);
                                    break;
                                case 8:
                                    a.vertexAttrib1f(this.index, f[0]);
                                    break;
                                case 9:
                                    a.vertexAttrib2f(this.index, f[0], f[1]);
                                    break;
                                case 10:
                                    a.vertexAttrib3f(this.index, f[0], f[1], f[2]);
                                    break;
                                case 11:
                                    a.vertexAttrib4f(this.index, f[0], f[1], f[2], f[3]);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, d[0], d[1]);
                                    a.vertexAttrib2f(this.index + 1, d[2], d[3]);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, d[0], d[1], d[2]);
                                    a.vertexAttrib3f(this.index + 1, d[3], d[4], d[5]);
                                    a.vertexAttrib3f(this.index + 2, d[6], d[7], d[8]);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, d[0], d[1], d[2], d[3]),
                                    a.vertexAttrib4f(this.index + 1, d[4], d[5], d[6], d[7]),
                                    a.vertexAttrib4f(this.index + 2, d[8], d[9], d[10], d[11]),
                                    a.vertexAttrib4f(this.index + 3, d[12], d[13], d[14], d[15])
                                }
                            else
                                switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, 0);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, 0, 0);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, 0, 0);
                                    a.vertexAttrib2f(this.index + 1, 0, 0);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0),
                                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0),
                                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0),
                                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0)
                                }
                        }
                    }
                },
                __updateGLFromBuffer: function(a, b, c, d, f) {
                    if (!(0 > this.index))
                        if (a = a.gl,
                        this.__isUniform) {
                            if (d >= this.__length)
                                switch (this.type) {
                                case 4:
                                    a.uniform1f(this.index, b[c]);
                                    break;
                                case 5:
                                    a.uniform2f(this.index, b[c], b[c + 1]);
                                    break;
                                case 6:
                                    a.uniform3f(this.index, b[c], b[c + 1], b[c + 2]);
                                    break;
                                case 7:
                                    a.uniform4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                                    break;
                                case 0:
                                case 8:
                                    a.uniform1i(this.index, b[c] | 0);
                                    break;
                                case 1:
                                case 9:
                                    a.uniform2i(this.index, b[c] | 0, b[c + 1] | 0);
                                    break;
                                case 2:
                                case 10:
                                    a.uniform3i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0);
                                    break;
                                case 3:
                                case 11:
                                    a.uniform4i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0, b[c + 3] | 0);
                                    break;
                                case 12:
                                    this.__uniformMatrix[0] = b[c];
                                    this.__uniformMatrix[1] = b[c + 1];
                                    this.__uniformMatrix[2] = b[c + 2];
                                    this.__uniformMatrix[3] = b[c + 3];
                                    Lc.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 16:
                                    this.__uniformMatrix[0] = b[c];
                                    this.__uniformMatrix[1] = b[c + 1];
                                    this.__uniformMatrix[2] = b[c + 2];
                                    this.__uniformMatrix[3] = b[c + 3];
                                    this.__uniformMatrix[4] = b[c + 4];
                                    this.__uniformMatrix[5] = b[c + 5];
                                    this.__uniformMatrix[6] = b[c + 6];
                                    this.__uniformMatrix[7] = b[c + 7];
                                    this.__uniformMatrix[8] = b[c + 8];
                                    Lc.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
                                    break;
                                case 20:
                                    this.__uniformMatrix[0] = b[c],
                                    this.__uniformMatrix[1] = b[c + 1],
                                    this.__uniformMatrix[2] = b[c + 2],
                                    this.__uniformMatrix[3] = b[c + 3],
                                    this.__uniformMatrix[4] = b[c + 4],
                                    this.__uniformMatrix[5] = b[c + 5],
                                    this.__uniformMatrix[6] = b[c + 6],
                                    this.__uniformMatrix[7] = b[c + 7],
                                    this.__uniformMatrix[8] = b[c + 8],
                                    this.__uniformMatrix[9] = b[c + 9],
                                    this.__uniformMatrix[10] = b[c + 10],
                                    this.__uniformMatrix[11] = b[c + 11],
                                    this.__uniformMatrix[12] = b[c + 12],
                                    this.__uniformMatrix[13] = b[c + 13],
                                    this.__uniformMatrix[14] = b[c + 14],
                                    this.__uniformMatrix[15] = b[c + 15],
                                    Lc.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix)
                                }
                        } else if (this.__internal || 0 != d && d != this.__length) {
                            b = a.FLOAT;
                            this.__isBool ? b = a.INT : this.__isInt && (b = a.INT);
                            g = 0;
                            for (k = this.__arrayLength; g < k; )
                                q = g++,
                                a.enableVertexAttribArray(this.index + q);
                            if (0 < d)
                                for (g = 0,
                                k = this.__arrayLength; g < k; )
                                    q = g++,
                                    a.vertexAttribPointer(this.index + q, this.__length, b, !1, 4 * this.__length, 4 * (c + f * this.__length + q * this.__arrayLength))
                        } else {
                            for (var g = 0, k = this.__arrayLength; g < k; ) {
                                var q = g++;
                                a.disableVertexAttribArray(this.index + q)
                            }
                            if (0 < d)
                                switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, b[c]);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, b[c], b[c + 1]);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, b[c], b[c + 1], b[c + 2]);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, b[c], b[c + 1]);
                                    a.vertexAttrib2f(this.index + 1, b[c + 2], b[c + 2 + 1]);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, b[c], b[c + 1], b[c + 2]);
                                    a.vertexAttrib3f(this.index + 1, b[c + 3], b[c + 3 + 1], b[c + 3 + 2]);
                                    a.vertexAttrib3f(this.index + 2, b[c + 6], b[c + 6 + 1], b[c + 6 + 2]);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, b[c], b[c + 1], b[c + 2], b[c + 3]),
                                    a.vertexAttrib4f(this.index + 1, b[c + 4], b[c + 4 + 1], b[c + 4 + 2], b[c + 4 + 3]),
                                    a.vertexAttrib4f(this.index + 2, b[c + 8], b[c + 8 + 1], b[c + 8 + 2], b[c + 8 + 3]),
                                    a.vertexAttrib4f(this.index + 3, b[c + 12], b[c + 12 + 1], b[c + 12 + 2], b[c + 12 + 3])
                                }
                            else
                                switch (this.type) {
                                case 0:
                                case 4:
                                case 8:
                                    a.vertexAttrib1f(this.index, 0);
                                    break;
                                case 1:
                                case 5:
                                case 9:
                                    a.vertexAttrib2f(this.index, 0, 0);
                                    break;
                                case 2:
                                case 6:
                                case 10:
                                    a.vertexAttrib3f(this.index, 0, 0, 0);
                                    break;
                                case 3:
                                case 7:
                                case 11:
                                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                                    break;
                                case 12:
                                    a.vertexAttrib2f(this.index + 0, 0, 0);
                                    a.vertexAttrib2f(this.index + 1, 0, 0);
                                    break;
                                case 16:
                                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                                    break;
                                case 20:
                                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0),
                                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0),
                                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0),
                                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0)
                                }
                        }
                },
                set_name: function(a) {
                    this.__internal = P.startsWith(a, "openfl_");
                    return this.name = a
                },
                __class__: Gg,
                __properties__: {
                    set_name: "set_name"
                }
            };
            var of = function() {
                ca.call(this);
                this.__drawableType = 3
            };
            h["openfl.display.Shape"] = of;
            of.__name__ = "openfl.display.Shape";
            of.__super__ = ca;
            of.prototype = v(ca.prototype, {
                get_graphics: function() {
                    null == this.__graphics && (this.__graphics = new Ad(this));
                    return this.__graphics
                },
                __class__: of,
                __properties__: v(ca.prototype.__properties__, {
                    get_graphics: "get_graphics"
                })
            });
            var Ig = function(a, b, c, d) {
                za.call(this);
                this.__drawableType = 6;
                this.enabled = !0;
                this.trackAsMenu = !1;
                this.useHandCursor = !0;
                this.__upState = null != a ? a : new ca;
                this.__overState = b;
                this.__downState = c;
                this.set_hitTestState(null != d ? d : new ca);
                this.addEventListener("mouseDown", m(this, this.__this_onMouseDown));
                this.addEventListener("mouseOut", m(this, this.__this_onMouseOut));
                this.addEventListener("mouseOver", m(this, this.__this_onMouseOver));
                this.addEventListener("mouseUp", m(this, this.__this_onMouseUp));
                this.__tabEnabled = !0;
                this.set___currentState(this.__upState);
                null != Ig.__constructor && (a = Ig.__constructor,
                Ig.__constructor = null,
                a(this))
            };
            h["openfl.display.SimpleButton"] = Ig;
            Ig.__name__ = "openfl.display.SimpleButton";
            Ig.__super__ = za;
            Ig.prototype = v(za.prototype, {
                __getBounds: function(a, b) {
                    za.prototype.__getBounds.call(this, a, b);
                    var c = ta.__pool.get()
                      , d = this.__currentState.__transform;
                    c.a = d.a * b.a + d.b * b.c;
                    c.b = d.a * b.b + d.b * b.d;
                    c.c = d.c * b.a + d.d * b.c;
                    c.d = d.c * b.b + d.d * b.d;
                    c.tx = d.tx * b.a + d.ty * b.c + b.tx;
                    c.ty = d.tx * b.b + d.ty * b.d + b.ty;
                    this.__currentState.__getBounds(a, c);
                    ta.__pool.release(c)
                },
                __getRenderBounds: function(a, b) {
                    if (null != this.__scrollRect)
                        za.prototype.__getRenderBounds.call(this, a, b);
                    else {
                        za.prototype.__getBounds.call(this, a, b);
                        var c = ta.__pool.get()
                          , d = this.__currentState.__transform;
                        c.a = d.a * b.a + d.b * b.c;
                        c.b = d.a * b.b + d.b * b.d;
                        c.c = d.c * b.a + d.d * b.c;
                        c.d = d.c * b.b + d.d * b.d;
                        c.tx = d.tx * b.a + d.ty * b.c + b.tx;
                        c.ty = d.tx * b.b + d.ty * b.d + b.ty;
                        this.__currentState.__getRenderBounds(a, c);
                        ta.__pool.release(c)
                    }
                },
                __getCursor: function() {
                    return this.useHandCursor && !this.__ignoreEvent && this.enabled ? "button" : null
                },
                __hitTest: function(a, b, c, d, f, g) {
                    var k = !1;
                    null != this.get_hitTestState() ? this.get_hitTestState().__hitTest(a, b, c, d, f, g) && (null != d && (0 == d.length ? d[0] = g : d[d.length - 1] = g),
                    k = !f || this.mouseEnabled) : null != this.__currentState && (!g.get_visible() || this.__isMask || f && !this.mouseEnabled || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b) ? k = !1 : this.__currentState.__hitTest(a, b, c, d, f, g) && (k = f));
                    if (null != d)
                        for (; 1 < d.length && d[d.length - 1] == d[d.length - 2]; )
                            d.pop();
                    return k
                },
                __hitTestMask: function(a, b) {
                    var c = !1;
                    this.__currentState.__hitTestMask(a, b) && (c = !0);
                    return c
                },
                __setStageReference: function(a) {
                    za.prototype.__setStageReference.call(this, a);
                    null != this.__currentState && this.__currentState.__setStageReference(a);
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__setStageReference(a)
                },
                __setTransformDirty: function() {
                    za.prototype.__setTransformDirty.call(this);
                    null != this.__currentState && this.__currentState.__setTransformDirty();
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__setTransformDirty()
                },
                __update: function(a, b) {
                    za.prototype.__update.call(this, a, b);
                    b && (null != this.__currentState && this.__currentState.__update(a, !0),
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__update(a, !0))
                },
                __updateTransforms: function(a) {
                    za.prototype.__updateTransforms.call(this, a);
                    null != this.__currentState && this.__currentState.__updateTransforms();
                    null != this.get_hitTestState() && this.get_hitTestState() != this.__currentState && this.get_hitTestState().__updateTransforms()
                },
                get_downState: function() {
                    return this.__downState
                },
                get_hitTestState: function() {
                    return this.__hitTestState
                },
                set_hitTestState: function(a) {
                    null != this.__hitTestState && this.__hitTestState != a && this.__hitTestState != this.get_downState() && this.__hitTestState != this.get_upState() && this.__hitTestState != this.get_overState() && (this.__hitTestState.__renderParent = null);
                    null != a && (a.__renderParent = this,
                    a.__renderDirty || (a.__renderDirty = !0,
                    a.__setParentRenderDirty()));
                    return this.__hitTestState = a
                },
                get_overState: function() {
                    return this.__overState
                },
                get_upState: function() {
                    return this.__upState
                },
                set___currentState: function(a) {
                    null != this.__currentState && this.__currentState != this.get_hitTestState() && (this.__currentState.__renderParent = null);
                    null != a && null != a.parent && a.parent.removeChild(a);
                    ca.__supportDOM && null == this.__previousStates && (this.__previousStates = ua.toObjectVector(null));
                    if (a != this.__currentState) {
                        if (ca.__supportDOM) {
                            null != this.__currentState && (this.__currentState.__setStageReference(null),
                            this.__previousStates.push(this.__currentState));
                            var b = this.__previousStates.indexOf(a, 0);
                            if (-1 < b) {
                                var c = this.__previousStates;
                                c.__tempIndex = b;
                                b = 0;
                                for (var d = []; b < d.length; ) {
                                    var f = d[b++];
                                    c.insertAt(c.__tempIndex, f);
                                    c.__tempIndex++
                                }
                                c.splice(c.__tempIndex, 1)
                            }
                        }
                        null != a && (a.__renderParent = this,
                        a.__renderDirty || (a.__renderDirty = !0,
                        a.__setParentRenderDirty()));
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty())
                    }
                    return this.__currentState = a
                },
                __this_onMouseDown: function(a) {
                    this.enabled && this.set___currentState(this.get_downState())
                },
                __this_onMouseOut: function(a) {
                    this.__ignoreEvent = !1;
                    this.get_upState() != this.__currentState && this.set___currentState(this.get_upState())
                },
                __this_onMouseOver: function(a) {
                    a.buttonDown && (this.__ignoreEvent = !0);
                    this.get_overState() != this.__currentState && null != this.get_overState() && !this.__ignoreEvent && this.enabled && this.set___currentState(this.get_overState())
                },
                __this_onMouseUp: function(a) {
                    this.__ignoreEvent = !1;
                    this.enabled && null != this.get_overState() ? this.set___currentState(this.get_overState()) : this.set___currentState(this.get_upState())
                },
                __class__: Ig,
                __properties__: v(za.prototype.__properties__, {
                    set___currentState: "set___currentState",
                    get_upState: "get_upState",
                    get_overState: "get_overState",
                    set_hitTestState: "set_hitTestState",
                    get_hitTestState: "get_hitTestState",
                    get_downState: "get_downState"
                })
            });
            var Jg = function(a, b) {
                hb.call(this);
                this.__drawableType = 5;
                this.set_name(null);
                this.__color = -1;
                this.__colorSplit = [255, 255, 255];
                this.__colorString = "#FFFFFF";
                this.__contentsScaleFactor = 1;
                this.__deltaTime = this.__currentTabOrderIndex = 0;
                this.__displayState = 2;
                this.__logicalHeight = this.__logicalWidth = this.__lastClickTime = this.__mouseY = this.__mouseX = 0;
                this.__displayMatrix = new ta;
                this.__displayRect = new oa;
                this.__renderDirty = !0;
                this.stage3Ds = ua.toObjectVector(null);
                this.stage3Ds.push(new hg(this));
                this.stage3Ds.push(new hg(this));
                this.stage3Ds.push(new hg(this));
                this.stage3Ds.push(new hg(this));
                this.stage = this;
                this.align = 6;
                this.allowsFullScreenInteractive = this.allowsFullScreen = !0;
                this.__quality = 1;
                this.__scaleMode = 2;
                this.showDefaultContextMenu = !0;
                this.softKeyboardRect = new oa;
                this.stageFocusRect = !0;
                this.__macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
                this.__clearBeforeRender = !0;
                this.__forceRender = !1;
                this.__stack = [];
                this.__rollOutStack = [];
                this.__mouseOutStack = [];
                this.__touchData = new tc;
                null == Sa.get_current().__loaderInfo && (Sa.get_current().__loaderInfo = ue.create(null),
                Sa.get_current().__loaderInfo.content = Sa.get_current());
                this.__uncaughtErrorEvents = Sa.get_current().__loaderInfo.uncaughtErrorEvents;
                this.application = a.application;
                this.window = a;
                this.set_color(b);
                this.__contentsScaleFactor = a.__scale;
                this.__wasFullscreen = a.__fullscreen;
                this.__resize();
                null == Sa.get_current().stage && this.stage.addChild(Sa.get_current())
            };
            h["openfl.display.Stage"] = Jg;
            Jg.__name__ = "openfl.display.Stage";
            Jg.__interfaces__ = [Ya];
            Jg.__super__ = hb;
            Jg.prototype = v(hb.prototype, {
                localToGlobal: function(a) {
                    return a.clone()
                },
                __broadcastEvent: function(a) {
                    if (Object.prototype.hasOwnProperty.call(ca.__broadcastEvents.h, a.type))
                        for (var b = ca.__broadcastEvents.h[a.type], c = 0; c < b.length; ) {
                            var d = b[c];
                            ++c;
                            if (d.stage == this || null == d.stage)
                                if (this.__uncaughtErrorEvents.__enabled)
                                    try {
                                        d.__dispatch(a)
                                    } catch (f) {
                                        Ua.lastError = f,
                                        d = aa.caught(f).unwrap(),
                                        this.__handleError(d)
                                    }
                                else
                                    d.__dispatch(a)
                        }
                },
                __createRenderer: function() {
                    var a = this.window.__width * this.window.__scale | 0
                      , b = this.window.__height * this.window.__scale | 0;
                    switch (this.window.context.type) {
                    case "canvas":
                        this.__renderer = new We(this.window.context.canvas2D);
                        break;
                    case "dom":
                        this.__renderer = new vh(this.window.context.dom);
                        break;
                    case "opengl":
                    case "opengles":
                    case "webgl":
                        this.context3D = new sb(this),
                        this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, !0, !0, !0),
                        this.context3D.present(),
                        this.__renderer = new bb(this.context3D)
                    }
                    if (null != this.__renderer) {
                        var c = this.get_quality();
                        this.__renderer.__allowSmoothing = 2 != c;
                        this.__renderer.__pixelRatio = this.window.__scale;
                        this.__renderer.__worldTransform = this.__displayMatrix;
                        this.__renderer.__stage = this;
                        this.__renderer.__resize(a, b)
                    }
                },
                __dispatchEvent: function(a) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            var b = hb.prototype.__dispatchEvent.call(this, a)
                        } catch (c) {
                            Ua.lastError = c,
                            a = aa.caught(c).unwrap(),
                            this.__handleError(a),
                            b = !1
                        }
                    else
                        b = hb.prototype.__dispatchEvent.call(this, a);
                    return b
                },
                __dispatchPendingMouseEvent: function() {
                    this.__pendingMouseEvent && (this.__onMouse("mouseMove", this.__pendingMouseX, this.__pendingMouseY, 0),
                    this.__pendingMouseEvent = !1)
                },
                __dispatchStack: function(a, b) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            var c = b.length;
                            if (0 == c) {
                                a.eventPhase = 2;
                                var d = a.target;
                                d.__dispatch(a)
                            } else {
                                a.eventPhase = 1;
                                a.target = b[b.length - 1];
                                for (var f = 0, g = c - 1; f < g; ) {
                                    var k = f++;
                                    b[k].__dispatch(a);
                                    if (a.__isCanceled)
                                        return
                                }
                                a.eventPhase = 2;
                                d = a.target;
                                d.__dispatch(a);
                                if (!a.__isCanceled && a.bubbles)
                                    for (a.eventPhase = 3,
                                    k = c - 2; 0 <= k; ) {
                                        b[k].__dispatch(a);
                                        if (a.__isCanceled)
                                            break;
                                        --k
                                    }
                            }
                        } catch (q) {
                            Ua.lastError = q,
                            a = aa.caught(q).unwrap(),
                            this.__handleError(a)
                        }
                    else if (c = b.length,
                    0 == c)
                        a.eventPhase = 2,
                        d = a.target,
                        d.__dispatch(a);
                    else {
                        a.eventPhase = 1;
                        a.target = b[b.length - 1];
                        f = 0;
                        for (g = c - 1; f < g; )
                            if (k = f++,
                            b[k].__dispatch(a),
                            a.__isCanceled)
                                return;
                        a.eventPhase = 2;
                        d = a.target;
                        d.__dispatch(a);
                        if (!a.__isCanceled && a.bubbles)
                            for (a.eventPhase = 3,
                            k = c - 2; 0 <= k; ) {
                                b[k].__dispatch(a);
                                if (a.__isCanceled)
                                    break;
                                --k
                            }
                    }
                },
                __dispatchTarget: function(a, b) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            return a.__dispatchEvent(b)
                        } catch (c) {
                            return Ua.lastError = c,
                            a = aa.caught(c).unwrap(),
                            this.__handleError(a),
                            !1
                        }
                    else
                        return a.__dispatchEvent(b)
                },
                __drag: function(a) {
                    var b = this.__dragObject.parent;
                    if (null != b) {
                        b = b.__getWorldTransform();
                        var c = b.a * b.d - b.b * b.c;
                        if (0 == c)
                            a.x = -b.tx,
                            a.y = -b.ty;
                        else {
                            var d = 1 / c * (b.c * (b.ty - a.y) + b.d * (a.x - b.tx));
                            a.y = 1 / c * (b.a * (a.y - b.ty) + b.b * (b.tx - a.x));
                            a.x = d
                        }
                    }
                    b = a.x + this.__dragOffsetX;
                    a = a.y + this.__dragOffsetY;
                    null != this.__dragBounds && (b < this.__dragBounds.x ? b = this.__dragBounds.x : b > this.__dragBounds.get_right() && (b = this.__dragBounds.get_right()),
                    a < this.__dragBounds.y ? a = this.__dragBounds.y : a > this.__dragBounds.get_bottom() && (a = this.__dragBounds.get_bottom()));
                    this.__dragObject.set_x(b);
                    this.__dragObject.set_y(a)
                },
                __getInteractive: function(a) {
                    null != a && a.push(this);
                    return !0
                },
                __globalToLocal: function(a, b) {
                    a != b && b.copyFrom(a);
                    return b
                },
                __handleError: function(a) {
                    var b = new ng("uncaughtError",!0,!0,a);
                    Sa.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b);
                    if (!b.__preventDefault) {
                        b = Cf.toString(Cf.exceptionStack());
                        console.log(b);
                        b = G.string(a);
                        console.log(b);
                        try {
                            if (null != a && Object.prototype.hasOwnProperty.call(a, "stack") && null != a.stack && "" != a.stack)
                                console.log(a.stack),
                                a.stack = a.stack;
                            else {
                                var c = Cf.toString(Cf.callStack());
                                console.log(c)
                            }
                        } catch (d) {
                            Ua.lastError = d
                        }
                        throw a;
                    }
                },
                __onKey: function(a, b, c) {
                    this.__dispatchPendingMouseEvent();
                    Fb.__altKey = cb.get_altKey(c);
                    Fb.__commandKey = cb.get_metaKey(c);
                    Fb.__controlKey = cb.get_ctrlKey(c) && !cb.get_metaKey(c);
                    Fb.__ctrlKey = cb.get_ctrlKey(c);
                    Fb.__shiftKey = cb.get_shiftKey(c);
                    var d = [];
                    null == this.__focus ? this.__getInteractive(d) : this.__focus.__getInteractive(d);
                    if (0 < d.length) {
                        switch (b) {
                        case 1073741908:
                        case 1073741909:
                        case 1073741910:
                        case 1073741911:
                        case 1073741912:
                        case 1073741913:
                        case 1073741914:
                        case 1073741915:
                        case 1073741916:
                        case 1073741917:
                        case 1073741918:
                        case 1073741919:
                        case 1073741920:
                        case 1073741921:
                        case 1073741922:
                        case 1073741923:
                        case 1073742044:
                            var f = 3;
                            break;
                        case 1073742048:
                        case 1073742049:
                        case 1073742050:
                        case 1073742051:
                            f = 1;
                            break;
                        case 1073742052:
                        case 1073742053:
                        case 1073742054:
                        case 1073742055:
                            f = 2;
                            break;
                        default:
                            f = 0
                        }
                        switch (b) {
                        case 8:
                            b = 8;
                            break;
                        case 9:
                            b = 9;
                            break;
                        case 13:
                            b = 13;
                            break;
                        case 27:
                            b = 27;
                            break;
                        case 32:
                            b = 32;
                            break;
                        case 33:
                            b = 49;
                            break;
                        case 34:
                            b = 222;
                            break;
                        case 35:
                            b = 51;
                            break;
                        case 36:
                            b = 52;
                            break;
                        case 37:
                            b = 53;
                            break;
                        case 38:
                            b = 55;
                            break;
                        case 39:
                            b = 222;
                            break;
                        case 40:
                            b = 57;
                            break;
                        case 41:
                            b = 48;
                            break;
                        case 42:
                            b = 56;
                            break;
                        case 44:
                            b = 188;
                            break;
                        case 45:
                            b = 189;
                            break;
                        case 46:
                            b = 190;
                            break;
                        case 47:
                            b = 191;
                            break;
                        case 48:
                            b = 48;
                            break;
                        case 49:
                            b = 49;
                            break;
                        case 50:
                            b = 50;
                            break;
                        case 51:
                            b = 51;
                            break;
                        case 52:
                            b = 52;
                            break;
                        case 53:
                            b = 53;
                            break;
                        case 54:
                            b = 54;
                            break;
                        case 55:
                            b = 55;
                            break;
                        case 56:
                            b = 56;
                            break;
                        case 57:
                            b = 57;
                            break;
                        case 58:
                            b = 186;
                            break;
                        case 59:
                            b = 186;
                            break;
                        case 60:
                            b = 60;
                            break;
                        case 61:
                            b = 187;
                            break;
                        case 62:
                            b = 190;
                            break;
                        case 63:
                            b = 191;
                            break;
                        case 64:
                            b = 50;
                            break;
                        case 91:
                            b = 219;
                            break;
                        case 92:
                            b = 220;
                            break;
                        case 93:
                            b = 221;
                            break;
                        case 94:
                            b = 54;
                            break;
                        case 95:
                            b = 189;
                            break;
                        case 96:
                            b = 192;
                            break;
                        case 97:
                            b = 65;
                            break;
                        case 98:
                            b = 66;
                            break;
                        case 99:
                            b = 67;
                            break;
                        case 100:
                            b = 68;
                            break;
                        case 101:
                            b = 69;
                            break;
                        case 102:
                            b = 70;
                            break;
                        case 103:
                            b = 71;
                            break;
                        case 104:
                            b = 72;
                            break;
                        case 105:
                            b = 73;
                            break;
                        case 106:
                            b = 74;
                            break;
                        case 107:
                            b = 75;
                            break;
                        case 108:
                            b = 76;
                            break;
                        case 109:
                            b = 77;
                            break;
                        case 110:
                            b = 78;
                            break;
                        case 111:
                            b = 79;
                            break;
                        case 112:
                            b = 80;
                            break;
                        case 113:
                            b = 81;
                            break;
                        case 114:
                            b = 82;
                            break;
                        case 115:
                            b = 83;
                            break;
                        case 116:
                            b = 84;
                            break;
                        case 117:
                            b = 85;
                            break;
                        case 118:
                            b = 86;
                            break;
                        case 119:
                            b = 87;
                            break;
                        case 120:
                            b = 88;
                            break;
                        case 121:
                            b = 89;
                            break;
                        case 122:
                            b = 90;
                            break;
                        case 127:
                            b = 46;
                            break;
                        case 1073741881:
                            b = 20;
                            break;
                        case 1073741882:
                            b = 112;
                            break;
                        case 1073741883:
                            b = 113;
                            break;
                        case 1073741884:
                            b = 114;
                            break;
                        case 1073741885:
                            b = 115;
                            break;
                        case 1073741886:
                            b = 116;
                            break;
                        case 1073741887:
                            b = 117;
                            break;
                        case 1073741888:
                            b = 118;
                            break;
                        case 1073741889:
                            b = 119;
                            break;
                        case 1073741890:
                            b = 120;
                            break;
                        case 1073741891:
                            b = 121;
                            break;
                        case 1073741892:
                            b = 122;
                            break;
                        case 1073741893:
                            b = 123;
                            break;
                        case 1073741894:
                            b = 301;
                            break;
                        case 1073741895:
                            b = 145;
                            break;
                        case 1073741896:
                            b = 19;
                            break;
                        case 1073741897:
                            b = 45;
                            break;
                        case 1073741898:
                            b = 36;
                            break;
                        case 1073741899:
                            b = 33;
                            break;
                        case 1073741901:
                            b = 35;
                            break;
                        case 1073741902:
                            b = 34;
                            break;
                        case 1073741903:
                            b = 39;
                            break;
                        case 1073741904:
                            b = 37;
                            break;
                        case 1073741905:
                            b = 40;
                            break;
                        case 1073741906:
                            b = 38;
                            break;
                        case 1073741907:
                            b = 144;
                            break;
                        case 1073741908:
                            b = 111;
                            break;
                        case 1073741909:
                            b = 106;
                            break;
                        case 1073741910:
                            b = 109;
                            break;
                        case 1073741911:
                            b = 107;
                            break;
                        case 1073741912:
                            b = 13;
                            break;
                        case 1073741913:
                            b = 97;
                            break;
                        case 1073741914:
                            b = 98;
                            break;
                        case 1073741915:
                            b = 99;
                            break;
                        case 1073741916:
                            b = 100;
                            break;
                        case 1073741917:
                            b = 101;
                            break;
                        case 1073741918:
                            b = 102;
                            break;
                        case 1073741919:
                            b = 103;
                            break;
                        case 1073741920:
                            b = 104;
                            break;
                        case 1073741921:
                            b = 105;
                            break;
                        case 1073741922:
                            b = 96;
                            break;
                        case 1073741923:
                            b = 110;
                            break;
                        case 1073741925:
                            b = 302;
                            break;
                        case 1073741928:
                            b = 124;
                            break;
                        case 1073741929:
                            b = 125;
                            break;
                        case 1073741930:
                            b = 126;
                            break;
                        case 1073741982:
                            b = 13;
                            break;
                        case 1073742044:
                            b = 110;
                            break;
                        case 1073742048:
                            b = 17;
                            break;
                        case 1073742049:
                            b = 16;
                            break;
                        case 1073742050:
                            b = 18;
                            break;
                        case 1073742051:
                            b = 15;
                            break;
                        case 1073742052:
                            b = 17;
                            break;
                        case 1073742053:
                            b = 16;
                            break;
                        case 1073742054:
                            b = 18;
                            break;
                        case 1073742055:
                            b = 15
                        }
                        var g = ml.__getCharCode(b, cb.get_shiftKey(c));
                        if ("keyUp" == a && (32 == b || 13 == b) && this.__focus instanceof T) {
                            var k = xa.__cast(this.__focus, T);
                            if (k.get_buttonMode() && 1 == k.focusRect) {
                                var q = B.__pool.get()
                                  , p = B.__pool.get();
                                p.x = this.__mouseX;
                                p.y = this.__mouseY;
                                k = Fb.__create("click", 0, 0, this.__mouseX, this.__mouseY, k.__globalToLocal(p, q), k);
                                this.__dispatchStack(k, d);
                                k.__updateAfterEventFlag && this.__renderAfterEvent();
                                B.__pool.release(p);
                                B.__pool.release(q)
                            }
                        }
                        f = new tj(a,!0,!0,g,b,f,this.__macKeyboard ? cb.get_ctrlKey(c) || cb.get_metaKey(c) : cb.get_ctrlKey(c),cb.get_altKey(c),cb.get_shiftKey(c),cb.get_ctrlKey(c),cb.get_metaKey(c));
                        d.reverse();
                        this.__dispatchStack(f, d);
                        if (f.__preventDefault)
                            "keyDown" == a ? this.window.onKeyDown.cancel() : this.window.onKeyUp.cancel();
                        else if ("keyDown" == a && 9 == b) {
                            d = [];
                            this.__tabTest(d);
                            g = -1;
                            a = null;
                            b = cb.get_shiftKey(c) ? -1 : 1;
                            if (1 < d.length) {
                                Jc.sort(d, function(a, b) {
                                    return a.get_tabIndex() - b.get_tabIndex()
                                });
                                if (-1 != d[d.length - 1].get_tabIndex())
                                    for (p = 0; p < d.length; ) {
                                        if (-1 < d[p].get_tabIndex()) {
                                            0 < p && d.splice(0, p);
                                            break
                                        }
                                        ++p
                                    }
                                if (null != this.get_focus()) {
                                    p = this.get_focus();
                                    for (q = d.indexOf(p); -1 == q && null != p; ) {
                                        g = p.parent;
                                        if (null != g && g.get_tabChildren()) {
                                            p = g.getChildIndex(p);
                                            if (-1 == p) {
                                                p = g;
                                                continue
                                            }
                                            for (p += b; cb.get_shiftKey(c) ? 0 <= p : p < g.get_numChildren(); ) {
                                                k = g.getChildAt(p);
                                                if (k instanceof za && (q = xa.__cast(k, za),
                                                q = d.indexOf(q),
                                                -1 != q)) {
                                                    b = 0;
                                                    break
                                                }
                                                p += b
                                            }
                                        } else
                                            cb.get_shiftKey(c) && (q = d.indexOf(g),
                                            -1 != q && (b = 0));
                                        p = g
                                    }
                                    g = 0 > q ? 0 : q + b
                                } else
                                    g = this.__currentTabOrderIndex
                            } else
                                1 == d.length && (a = d[0],
                                this.get_focus() == a && (a = null));
                            q = 0 <= g && g < d.length;
                            1 == d.length || 0 == d.length && null != this.get_focus() ? g = 0 : 1 < d.length && (0 > g && (g += d.length),
                            g %= d.length,
                            a = d[g],
                            a == this.get_focus() && (g += b,
                            0 > g && (g += d.length),
                            g %= d.length,
                            a = d[g]));
                            b = null;
                            null != this.get_focus() && (b = new ig("keyFocusChange",!0,!0,a,cb.get_shiftKey(c),0),
                            d = [],
                            this.get_focus().__getInteractive(d),
                            d.reverse(),
                            this.__dispatchStack(b, d),
                            b.isDefaultPrevented() && this.window.onKeyDown.cancel());
                            null != b && b.isDefaultPrevented() || (this.__currentTabOrderIndex = g,
                            null != a && this.set_focus(a),
                            q && this.window.onKeyDown.cancel())
                        } else if ("keyDown" == a && null != this.get_focus() && !(this.get_focus()instanceof Oc) && (this.__macKeyboard ? cb.get_ctrlKey(c) || cb.get_metaKey(c) : cb.get_ctrlKey(c)) && !cb.get_altKey(c) && !cb.get_shiftKey(c))
                            switch (b) {
                            case 65:
                                c = new ya("selectAll",!0,!0);
                                this.get_focus().dispatchEvent(c);
                                break;
                            case 67:
                                c = new ya("copy",!0,!0);
                                this.get_focus().dispatchEvent(c);
                                break;
                            case 86:
                                c = new ya("paste",!0,!0);
                                this.get_focus().dispatchEvent(c);
                                break;
                            case 88:
                                c = new ya("cut",!0,!0),
                                this.get_focus().dispatchEvent(c)
                            }
                        f.__updateAfterEventFlag && this.__renderAfterEvent()
                    }
                },
                __onLimeCreateWindow: function(a) {
                    if (this.window == a) {
                        var b = this;
                        a.onActivate.add(function() {
                            b.__onLimeWindowActivate(a)
                        });
                        var c = this;
                        a.onClose.add(function() {
                            c.__onLimeWindowClose(a)
                        }, !1, -9E3);
                        var d = this;
                        a.onDeactivate.add(function() {
                            d.__onLimeWindowDeactivate(a)
                        });
                        var f = this;
                        var g = function(b) {
                            f.__onLimeWindowDropFile(a, b)
                        };
                        a.onDropFile.add(g);
                        var k = this;
                        a.onEnter.add(function() {
                            k.__onLimeWindowEnter(a)
                        });
                        var q = this;
                        a.onExpose.add(function() {
                            q.__onLimeWindowExpose(a)
                        });
                        var p = this;
                        a.onFocusIn.add(function() {
                            p.__onLimeWindowFocusIn(a)
                        });
                        var l = this;
                        a.onFocusOut.add(function() {
                            l.__onLimeWindowFocusOut(a)
                        });
                        var h = this;
                        a.onFullscreen.add(function() {
                            h.__onLimeWindowFullscreen(a)
                        });
                        var n = this;
                        g = function(b, c) {
                            n.__onLimeKeyDown(a, b, c)
                        }
                        ;
                        a.onKeyDown.add(g);
                        var u = this;
                        g = function(b, c) {
                            u.__onLimeKeyUp(a, b, c)
                        }
                        ;
                        a.onKeyUp.add(g);
                        var w = this;
                        a.onLeave.add(function() {
                            w.__onLimeWindowLeave(a)
                        });
                        var r = this;
                        a.onMinimize.add(function() {
                            r.__onLimeWindowMinimize(a)
                        });
                        var C = this;
                        g = function(b, c, d) {
                            C.__onLimeMouseDown(a, b, c, d)
                        }
                        ;
                        a.onMouseDown.add(g);
                        var x = this;
                        g = function(b, c) {
                            x.__onLimeMouseMove(a, b, c)
                        }
                        ;
                        a.onMouseMove.add(g);
                        var z = this;
                        g = function(b, c) {
                            z.__onLimeMouseMoveRelative(a, b, c)
                        }
                        ;
                        a.onMouseMoveRelative.add(g);
                        var A = this;
                        g = function(b, c, d) {
                            A.__onLimeMouseUp(a, b, c, d)
                        }
                        ;
                        a.onMouseUp.add(g);
                        var K = this;
                        g = function(b, c, d) {
                            K.__onLimeMouseWheel(a, b, c, d)
                        }
                        ;
                        a.onMouseWheel.add(g);
                        var I = this;
                        g = function(b, c) {
                            I.__onLimeWindowMove(a, b, c)
                        }
                        ;
                        a.onMove.add(g);
                        a.onRender.add(m(this, this.__onLimeRender));
                        a.onRenderContextLost.add(m(this, this.__onLimeRenderContextLost));
                        a.onRenderContextRestored.add(m(this, this.__onLimeRenderContextRestored));
                        var B = this;
                        g = function(b, c) {
                            B.__onLimeWindowResize(a, b, c)
                        }
                        ;
                        a.onResize.add(g);
                        var N = this;
                        a.onRestore.add(function() {
                            N.__onLimeWindowRestore(a)
                        });
                        var t = this;
                        g = function(b, c, d) {
                            t.__onLimeTextEdit(a, b, c, d)
                        }
                        ;
                        a.onTextEdit.add(g);
                        var v = this;
                        g = function(b) {
                            v.__onLimeTextInput(a, b)
                        }
                        ;
                        a.onTextInput.add(g);
                        this.__onLimeWindowCreate(a)
                    }
                },
                __onLimeGamepadAxisMove: function(a, b, c) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            Wa.__onGamepadAxisMove(a, b, c)
                        } catch (d) {
                            Ua.lastError = d,
                            a = aa.caught(d).unwrap(),
                            this.__handleError(a)
                        }
                    else
                        Wa.__onGamepadAxisMove(a, b, c)
                },
                __onLimeGamepadButtonDown: function(a, b) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            Wa.__onGamepadButtonDown(a, b)
                        } catch (c) {
                            Ua.lastError = c,
                            a = aa.caught(c).unwrap(),
                            this.__handleError(a)
                        }
                    else
                        Wa.__onGamepadButtonDown(a, b)
                },
                __onLimeGamepadButtonUp: function(a, b) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            Wa.__onGamepadButtonUp(a, b)
                        } catch (c) {
                            Ua.lastError = c,
                            a = aa.caught(c).unwrap(),
                            this.__handleError(a)
                        }
                    else
                        Wa.__onGamepadButtonUp(a, b)
                },
                __onLimeGamepadConnect: function(a) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            Wa.__onGamepadConnect(a)
                        } catch (k) {
                            Ua.lastError = k;
                            var b = aa.caught(k).unwrap();
                            this.__handleError(b)
                        }
                    else
                        Wa.__onGamepadConnect(a);
                    var c = this;
                    b = function(b, d) {
                        c.__onLimeGamepadAxisMove(a, b, d)
                    }
                    ;
                    a.onAxisMove.add(b);
                    var d = this;
                    b = function(b) {
                        d.__onLimeGamepadButtonDown(a, b)
                    }
                    ;
                    a.onButtonDown.add(b);
                    var f = this;
                    b = function(b) {
                        f.__onLimeGamepadButtonUp(a, b)
                    }
                    ;
                    a.onButtonUp.add(b);
                    var g = this;
                    a.onDisconnect.add(function() {
                        g.__onLimeGamepadDisconnect(a)
                    })
                },
                __onLimeGamepadDisconnect: function(a) {
                    if (this.__uncaughtErrorEvents.__enabled)
                        try {
                            Wa.__onGamepadDisconnect(a)
                        } catch (b) {
                            Ua.lastError = b,
                            a = aa.caught(b).unwrap(),
                            this.__handleError(a)
                        }
                    else
                        Wa.__onGamepadDisconnect(a)
                },
                __onLimeKeyDown: function(a, b, c) {
                    null != this.window && this.window == a && this.__onKey("keyDown", b, c)
                },
                __onLimeKeyUp: function(a, b, c) {
                    null != this.window && this.window == a && this.__onKey("keyUp", b, c)
                },
                __onLimeModuleExit: function(a) {
                    null != this.window && (a = new ya("deactivate"),
                    this.__broadcastEvent(a))
                },
                __onLimeMouseDown: function(a, b, c, d) {
                    if (null != this.window && this.window == a) {
                        this.__dispatchPendingMouseEvent();
                        switch (d) {
                        case 1:
                            var f = "middleMouseDown";
                            break;
                        case 2:
                            f = "rightMouseDown";
                            break;
                        default:
                            f = "mouseDown"
                        }
                        this.__onMouse(f, b * a.__scale | 0, c * a.__scale | 0, d);
                        this.showDefaultContextMenu || 2 != d || a.onMouseDown.cancel()
                    }
                },
                __onLimeMouseMove: function(a, b, c) {
                    null != this.window && this.window == a && (this.__pendingMouseEvent = !0,
                    this.__pendingMouseX = b * a.__scale | 0,
                    this.__pendingMouseY = c * a.__scale | 0)
                },
                __onLimeMouseMoveRelative: function(a, b, c) {},
                __onLimeMouseUp: function(a, b, c, d) {
                    if (null != this.window && this.window == a) {
                        this.__dispatchPendingMouseEvent();
                        switch (d) {
                        case 1:
                            var f = "middleMouseUp";
                            break;
                        case 2:
                            f = "rightMouseUp";
                            break;
                        default:
                            f = "mouseUp"
                        }
                        this.__onMouse(f, b * a.__scale | 0, c * a.__scale | 0, d);
                        this.showDefaultContextMenu || 2 != d || a.onMouseUp.cancel()
                    }
                },
                __onLimeMouseWheel: function(a, b, c, d) {
                    null != this.window && this.window == a && (this.__dispatchPendingMouseEvent(),
                    d == Pd.PIXELS ? this.__onMouseWheel(b * a.__scale | 0, c * a.__scale | 0, d) : this.__onMouseWheel(b | 0, c | 0, d))
                },
                __renderAfterEvent: function() {
                    this.__render(this.window.context)
                },
                __render: function(a) {
                    a = !1;
                    var b = null != this.__renderer && (this.__renderDirty || this.__forceRender);
                    if (this.__invalidated && b) {
                        this.__invalidated = !1;
                        var c = new ya("render");
                        this.__broadcastEvent(c)
                    }
                    this.__update(!1, !0);
                    if (null != this.__renderer) {
                        if (null != this.context3D) {
                            for (c = this.stage3Ds.iterator(); c.hasNext(); ) {
                                var d = c.next();
                                this.context3D.__renderStage3D(d)
                            }
                            this.context3D.__present && (b = !0)
                        }
                        b ? (null == this.context3D && this.__renderer.__clear(),
                        this.__renderer.__render(this)) : null == this.context3D && (a = !0);
                        null != this.context3D && (this.context3D.__present ? (this.__renderer.__cleared || this.__renderer.__clear(),
                        this.context3D.__present = !1,
                        this.context3D.__cleared = !1) : a = !0);
                        this.__renderer.__cleared = !1
                    }
                    return a
                },
                __onLimeRender: function(a) {
                    this.__rendering || (this.__rendering = !0,
                    this.__broadcastEvent(new ya("enterFrame")),
                    this.__broadcastEvent(new ya("frameConstructed")),
                    this.__broadcastEvent(new ya("exitFrame")),
                    this.__renderable = !0,
                    this.__enterFrame(this.__deltaTime),
                    this.__deltaTime = 0,
                    this.__render(a) && this.window.onRender.cancel(),
                    this.__rendering = !1)
                },
                __onLimeRenderContextLost: function() {
                    this.context3D = this.__renderer = null;
                    for (var a = this.stage3Ds.iterator(); a.hasNext(); )
                        a.next().__lostContext()
                },
                __onLimeRenderContextRestored: function(a) {
                    this.__createRenderer();
                    for (a = this.stage3Ds.iterator(); a.hasNext(); )
                        a.next().__restoreContext()
                },
                __onLimeTextEdit: function(a, b, c, d) {},
                __onLimeTextInput: function(a, b) {
                    if (null != this.window && this.window == a) {
                        var c = [];
                        null == this.__focus ? this.__getInteractive(c) : this.__focus.__getInteractive(c);
                        b = new Le("textInput",!0,!0,b);
                        0 < c.length ? (c.reverse(),
                        this.__dispatchStack(b, c)) : this.__dispatchEvent(b);
                        b.isDefaultPrevented() && a.onTextInput.cancel()
                    }
                },
                __onLimeTouchCancel: function(a) {
                    var b = this.__primaryTouch == a;
                    b && (this.__primaryTouch = null);
                    this.__onTouch("touchEnd", a, b)
                },
                __onLimeTouchMove: function(a) {
                    this.__onTouch("touchMove", a, this.__primaryTouch == a)
                },
                __onLimeTouchEnd: function(a) {
                    var b = this.__primaryTouch == a;
                    b && (this.__primaryTouch = null);
                    this.__onTouch("touchEnd", a, b)
                },
                __onLimeTouchStart: function(a) {
                    null == this.__primaryTouch && (this.__primaryTouch = a);
                    this.__onTouch("touchBegin", a, this.__primaryTouch == a)
                },
                __onLimeUpdate: function(a) {
                    this.__deltaTime = a;
                    this.__dispatchPendingMouseEvent()
                },
                __onLimeWindowActivate: function(a) {},
                __onLimeWindowClose: function(a) {
                    this.window == a && (this.window = null);
                    this.__primaryTouch = null;
                    a = new ya("deactivate");
                    this.__broadcastEvent(a)
                },
                __onLimeWindowCreate: function(a) {
                    null != this.window && this.window == a && null != a.context && this.__createRenderer()
                },
                __onLimeWindowDeactivate: function(a) {},
                __onLimeWindowDropFile: function(a, b) {},
                __onLimeWindowEnter: function(a) {},
                __onLimeWindowExpose: function(a) {
                    null != this.window && this.window == a && (this.__renderDirty = !0)
                },
                __onLimeWindowFocusIn: function(a) {
                    null != this.window && this.window == a && (this.__renderDirty = !0,
                    a = new ya("activate"),
                    this.__broadcastEvent(a),
                    this.set_focus(this.__cacheFocus))
                },
                __onLimeWindowFocusOut: function(a) {
                    null != this.window && this.window == a && (this.__primaryTouch = null,
                    a = new ya("deactivate"),
                    this.__broadcastEvent(a),
                    a = this.get_focus(),
                    this.set_focus(null),
                    this.__cacheFocus = a,
                    Fb.__altKey = !1,
                    Fb.__commandKey = !1,
                    Fb.__ctrlKey = !1,
                    Fb.__shiftKey = !1)
                },
                __onLimeWindowFullscreen: function(a) {
                    null != this.window && this.window == a && (this.__resize(),
                    this.__wasFullscreen || (this.__wasFullscreen = !0,
                    2 == this.__displayState && (this.__displayState = 1),
                    this.__dispatchEvent(new kf("fullScreen",!1,!1,!0,!0))))
                },
                __onLimeWindowLeave: function(a) {
                    null == this.window || this.window != a || Fb.__buttonDown || (this.__dispatchPendingMouseEvent(),
                    a = new ya("mouseLeave"),
                    this.__dispatchEvent(a))
                },
                __onLimeWindowMinimize: function(a) {},
                __onLimeWindowMove: function(a, b, c) {},
                __onLimeWindowResize: function(a, b, c) {
                    null != this.window && this.window == a && (this.__resize(),
                    this.__wasFullscreen && !a.__fullscreen && (this.__wasFullscreen = !1,
                    this.__displayState = 2,
                    this.__dispatchEvent(new kf("fullScreen",!1,!1,!1,!0))))
                },
                __onLimeWindowRestore: function(a) {
                    null != this.window && this.window == a && this.__wasFullscreen && !a.__fullscreen && (this.__wasFullscreen = !1,
                    this.__displayState = 2,
                    this.__dispatchEvent(new kf("fullScreen",!1,!1,!1,!0)))
                },
                __onMouse: function(a, b, c, d) {
                    if (!(2 < d)) {
                        var f = B.__pool.get();
                        f.setTo(b, c);
                        b = this.__displayMatrix;
                        c = b.a * b.d - b.b * b.c;
                        if (0 == c)
                            f.x = -b.tx,
                            f.y = -b.ty;
                        else {
                            var g = 1 / c * (b.c * (b.ty - f.y) + b.d * (f.x - b.tx));
                            f.y = 1 / c * (b.a * (f.y - b.ty) + b.b * (b.tx - f.x));
                            f.x = g
                        }
                        this.__mouseX = f.x;
                        this.__mouseY = f.y;
                        b = [];
                        this.__hitTest(this.__mouseX, this.__mouseY, !0, b, !0, this) ? g = b[b.length - 1] : (g = this,
                        b = [this]);
                        null == g && (g = this);
                        var k = null
                          , q = !1;
                        switch (a) {
                        case "middleMouseDown":
                            this.__mouseDownMiddle = g;
                            q = !0;
                            break;
                        case "middleMouseUp":
                            this.__mouseDownMiddle == g && (k = "middleClick");
                            this.__mouseDownMiddle = null;
                            q = !0;
                            break;
                        case "mouseDown":
                            null != this.get_focus() ? this.get_focus() != g && (c = new ig("mouseFocusChange",!0,!0,g,!1,0),
                            this.get_focus().dispatchEvent(c),
                            c.isDefaultPrevented() || (g.__allowMouseFocus() ? this.set_focus(g) : this.set_focus(null))) : g.__allowMouseFocus() ? this.set_focus(g) : this.set_focus(null);
                            this.__mouseDownLeft = g;
                            this.__lastClickTarget != g && (this.__lastClickTarget = null,
                            this.__lastClickTime = 0);
                            q = Fb.__buttonDown = !0;
                            break;
                        case "mouseUp":
                            null != this.__mouseDownLeft && (Fb.__buttonDown = !1,
                            this.__mouseDownLeft == g ? k = "click" : (q = Fb.__create("releaseOutside", 1, 0, this.__mouseX, this.__mouseY, new B(this.__mouseX,this.__mouseY), this),
                            this.__mouseDownLeft.dispatchEvent(q)),
                            this.__mouseDownLeft = null);
                            q = !0;
                            break;
                        case "rightMouseDown":
                            this.__mouseDownRight = g;
                            q = !0;
                            break;
                        case "rightMouseUp":
                            this.__mouseDownRight == g && (k = "rightClick"),
                            this.__mouseDownRight = null,
                            q = !0
                        }
                        c = B.__pool.get();
                        q = Fb.__create(a, d, q ? this.window.clickCount : 0, this.__mouseX, this.__mouseY, g.__globalToLocal(f, c), g);
                        this.__dispatchStack(q, b);
                        q.__updateAfterEventFlag && this.__renderAfterEvent();
                        null != k && (q = Fb.__create(k, d, 0, this.__mouseX, this.__mouseY, g.__globalToLocal(f, c), g),
                        this.__dispatchStack(q, b),
                        q.__updateAfterEventFlag && this.__renderAfterEvent(),
                        "mouseUp" == a && (g.doubleClickEnabled ? (a = Sa.getTimer(),
                        500 > a - this.__lastClickTime && g == this.__lastClickTarget ? (q = Fb.__create("doubleClick", d, 0, this.__mouseX, this.__mouseY, g.__globalToLocal(f, c), g),
                        this.__dispatchStack(q, b),
                        q.__updateAfterEventFlag && this.__renderAfterEvent(),
                        this.__lastClickTime = 0,
                        this.__lastClickTarget = null) : (this.__lastClickTarget = g,
                        this.__lastClickTime = a)) : (this.__lastClickTarget = null,
                        this.__lastClickTime = 0)));
                        if ("auto" == Jk.__cursor && !Jk.__hidden) {
                            q = null;
                            if (null != this.__mouseDownLeft)
                                q = this.__mouseDownLeft.__getCursor();
                            else
                                for (a = 0; a < b.length; )
                                    if (q = b[a],
                                    ++a,
                                    q = q.__getCursor(),
                                    null != q && null != this.window) {
                                        this.window.set_cursor(Kl.toLimeCursor(q));
                                        break
                                    }
                            null == q && null != this.window && this.window.set_cursor(ub.ARROW)
                        }
                        g != this.__mouseOverTarget && null != this.__mouseOverTarget && (q = Fb.__create("mouseOut", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(f, c), this.__mouseOverTarget),
                        this.__dispatchStack(q, this.__mouseOutStack),
                        q.__updateAfterEventFlag && this.__renderAfterEvent());
                        for (a = 0; a < this.__rollOutStack.length; )
                            k = this.__rollOutStack[a],
                            -1 == b.indexOf(k) ? (Q.remove(this.__rollOutStack, k),
                            q = Fb.__create("rollOut", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(f, c), k),
                            q.bubbles = !1,
                            this.__dispatchTarget(k, q),
                            q.__updateAfterEventFlag && this.__renderAfterEvent()) : ++a;
                        for (a = 0; a < b.length; )
                            k = b[a],
                            ++a,
                            -1 == this.__rollOutStack.indexOf(k) && null != this.__mouseOverTarget && (k.hasEventListener("rollOver") && (q = Fb.__create("rollOver", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(f, c), k),
                            q.bubbles = !1,
                            this.__dispatchTarget(k, q),
                            q.__updateAfterEventFlag && this.__renderAfterEvent()),
                            (k.hasEventListener("rollOut") || k.hasEventListener("rollOver")) && this.__rollOutStack.push(k));
                        g != this.__mouseOverTarget && (null != g && (q = Fb.__create("mouseOver", d, 0, this.__mouseX, this.__mouseY, g.__globalToLocal(f, c), g),
                        this.__dispatchStack(q, b),
                        q.__updateAfterEventFlag && this.__renderAfterEvent()),
                        this.__mouseOverTarget = g,
                        this.__mouseOutStack = b);
                        null != this.__dragObject && (this.__drag(f),
                        d = null,
                        this.__mouseOverTarget == this.__dragObject ? (g = this.__dragObject.mouseEnabled,
                        a = this.__dragObject.mouseChildren,
                        this.__dragObject.mouseEnabled = !1,
                        this.__dragObject.mouseChildren = !1,
                        b = [],
                        this.__hitTest(this.__mouseX, this.__mouseY, !0, b, !0, this) && (d = b[b.length - 1]),
                        this.__dragObject.mouseEnabled = g,
                        this.__dragObject.mouseChildren = a) : this.__mouseOverTarget != this && (d = this.__mouseOverTarget),
                        this.__dragObject.dropTarget = d);
                        B.__pool.release(f);
                        B.__pool.release(c)
                    }
                },
                __onMouseWheel: function(a, b, c) {
                    var d = this.__mouseX
                      , f = this.__mouseY;
                    a = [];
                    if (this.__hitTest(this.__mouseX, this.__mouseY, !0, a, !0, this))
                        var g = a[a.length - 1];
                    else
                        g = this,
                        a = [this];
                    null == g && (g = this);
                    c = B.__pool.get();
                    c.setTo(d, f);
                    d = this.__displayMatrix;
                    f = d.a * d.d - d.b * d.c;
                    if (0 == f)
                        c.x = -d.tx,
                        c.y = -d.ty;
                    else {
                        var k = 1 / f * (d.c * (d.ty - c.y) + d.d * (c.x - d.tx));
                        c.y = 1 / f * (d.a * (c.y - d.ty) + d.b * (d.tx - c.x));
                        c.x = k
                    }
                    b |= 0;
                    b = Fb.__create("mouseWheel", 0, 0, this.__mouseX, this.__mouseY, g.__globalToLocal(c, c), g, b);
                    b.cancelable = !0;
                    this.__dispatchStack(b, a);
                    b.isDefaultPrevented() && this.window.onMouseWheel.cancel();
                    b.__updateAfterEventFlag && this.__renderAfterEvent();
                    B.__pool.release(c)
                },
                __onTouch: function(a, b, c) {
                    var d = B.__pool.get();
                    d.setTo(Math.round(b.x * this.window.__width * this.window.__scale), Math.round(b.y * this.window.__height * this.window.__scale));
                    var f = this.__displayMatrix
                      , g = f.a * f.d - f.b * f.c;
                    if (0 == g)
                        d.x = -f.tx,
                        d.y = -f.ty;
                    else {
                        var k = 1 / g * (f.c * (f.ty - d.y) + f.d * (d.x - f.tx));
                        d.y = 1 / g * (f.a * (d.y - f.ty) + f.b * (f.tx - d.x));
                        d.x = k
                    }
                    f = d.x;
                    g = d.y;
                    k = [];
                    if (this.__hitTest(f, g, !1, k, !0, this))
                        var q = k[k.length - 1];
                    else
                        q = this,
                        k = [this];
                    null == q && (q = this);
                    var p = b.id;
                    if (this.__touchData.h.hasOwnProperty(p))
                        var l = this.__touchData.h[p];
                    else
                        l = jg.__pool.get(),
                        l.reset(),
                        l.touch = b,
                        this.__touchData.h[p] = l;
                    var h = null
                      , n = !1;
                    switch (a) {
                    case "touchBegin":
                        l.touchDownTarget = q;
                        break;
                    case "touchEnd":
                        l.touchDownTarget == q && (h = "touchTap"),
                        l.touchDownTarget = null,
                        n = !0
                    }
                    var u = B.__pool.get();
                    a = Vd.__create(a, null, f, g, q.__globalToLocal(d, u), q);
                    a.touchPointID = p;
                    a.isPrimaryTouchPoint = c;
                    a.pressure = b.pressure;
                    this.__dispatchStack(a, k);
                    a.__updateAfterEventFlag && this.__renderAfterEvent();
                    null != h && (a = Vd.__create(h, null, f, g, q.__globalToLocal(d, u), q),
                    a.touchPointID = p,
                    a.isPrimaryTouchPoint = c,
                    a.pressure = b.pressure,
                    this.__dispatchStack(a, k),
                    a.__updateAfterEventFlag && this.__renderAfterEvent());
                    h = l.touchOverTarget;
                    q != h && null != h && (a = Vd.__create("touchOut", null, f, g, h.__globalToLocal(d, u), h),
                    a.touchPointID = p,
                    a.isPrimaryTouchPoint = c,
                    a.pressure = b.pressure,
                    this.__dispatchTarget(h, a),
                    a.__updateAfterEventFlag && this.__renderAfterEvent());
                    for (var w = l.rollOutStack, r, m = 0; m < w.length; )
                        r = w[m],
                        -1 == k.indexOf(r) ? (Q.remove(w, r),
                        a = Vd.__create("touchRollOut", null, f, g, h.__globalToLocal(d, u), h),
                        a.touchPointID = p,
                        a.isPrimaryTouchPoint = c,
                        a.bubbles = !1,
                        a.pressure = b.pressure,
                        this.__dispatchTarget(r, a),
                        a.__updateAfterEventFlag && this.__renderAfterEvent()) : ++m;
                    for (m = 0; m < k.length; )
                        r = k[m],
                        ++m,
                        -1 == w.indexOf(r) && (r.hasEventListener("touchRollOver") && (a = Vd.__create("touchRollOver", null, f, g, h.__globalToLocal(d, u), r),
                        a.touchPointID = p,
                        a.isPrimaryTouchPoint = c,
                        a.bubbles = !1,
                        a.pressure = b.pressure,
                        this.__dispatchTarget(r, a),
                        a.__updateAfterEventFlag && this.__renderAfterEvent()),
                        r.hasEventListener("touchRollOut") && w.push(r));
                    q != h && (null != q && (a = Vd.__create("touchOver", null, f, g, q.__globalToLocal(d, u), q),
                    a.touchPointID = p,
                    a.isPrimaryTouchPoint = c,
                    a.bubbles = !0,
                    a.pressure = b.pressure,
                    this.__dispatchTarget(q, a),
                    a.__updateAfterEventFlag && this.__renderAfterEvent()),
                    l.touchOverTarget = q);
                    B.__pool.release(d);
                    B.__pool.release(u);
                    n && (this.__touchData.remove(p),
                    l.reset(),
                    jg.__pool.release(l))
                },
                __registerLimeModule: function(a) {
                    a.onCreateWindow.add(m(this, this.__onLimeCreateWindow));
                    a.onUpdate.add(m(this, this.__onLimeUpdate));
                    a.onExit.add(m(this, this.__onLimeModuleExit), !1, 0);
                    for (a = uc.devices.iterator(); a.hasNext(); ) {
                        var b = a.next();
                        this.__onLimeGamepadConnect(b)
                    }
                    uc.onConnect.add(m(this, this.__onLimeGamepadConnect));
                    ec.onStart.add(m(this, this.__onLimeTouchStart));
                    ec.onMove.add(m(this, this.__onLimeTouchMove));
                    ec.onEnd.add(m(this, this.__onLimeTouchEnd));
                    ec.onCancel.add(m(this, this.__onLimeTouchCancel))
                },
                __resize: function() {
                    var a = this.stageWidth
                      , b = this.stageHeight
                      , c = this.window.__width * this.window.__scale | 0
                      , d = this.window.__height * this.window.__scale | 0;
                    this.__displayMatrix.identity();
                    if (null != this.get_fullScreenSourceRect() && this.window.__fullscreen) {
                        this.stageWidth = this.get_fullScreenSourceRect().width | 0;
                        this.stageHeight = this.get_fullScreenSourceRect().height | 0;
                        var f = c / this.stageWidth
                          , g = d / this.stageHeight;
                        this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x, -this.get_fullScreenSourceRect().y);
                        this.__displayMatrix.scale(f, g);
                        this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(), this.get_fullScreenSourceRect().get_right(), this.get_fullScreenSourceRect().get_top(), this.get_fullScreenSourceRect().get_bottom())
                    } else if (0 == this.__logicalWidth || 0 == this.__logicalHeight || 2 == this.get_scaleMode() || 0 == c || 0 == d)
                        this.stageWidth = Math.round(c / this.window.__scale),
                        this.stageHeight = Math.round(d / this.window.__scale),
                        this.__displayMatrix.scale(this.window.__scale, this.window.__scale),
                        this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                    else
                        switch (this.stageWidth = this.__logicalWidth,
                        this.stageHeight = this.__logicalHeight,
                        this.get_scaleMode()) {
                        case 0:
                            f = c / this.stageWidth;
                            g = d / this.stageHeight;
                            this.__displayMatrix.scale(f, g);
                            this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                            break;
                        case 1:
                            f = c / this.stageWidth;
                            g = d / this.stageHeight;
                            f = Math.max(f, g);
                            g = this.stageWidth * f;
                            var k = this.stageHeight * f;
                            g = this.stageWidth - Math.round((g - c) / f);
                            k = this.stageHeight - Math.round((k - d) / f);
                            var q = Math.round((this.stageWidth - g) / 2)
                              , p = Math.round((this.stageHeight - k) / 2);
                            this.__displayMatrix.translate(-q, -p);
                            this.__displayMatrix.scale(f, f);
                            this.__displayRect.setTo(q, p, g, k);
                            break;
                        default:
                            f = c / this.stageWidth,
                            g = d / this.stageHeight,
                            f = Math.min(f, g),
                            g = this.stageWidth * f,
                            k = this.stageHeight * f,
                            g = this.stageWidth - Math.round((g - c) / f),
                            k = this.stageHeight - Math.round((k - d) / f),
                            q = Math.round((this.stageWidth - g) / 2),
                            p = Math.round((this.stageHeight - k) / 2),
                            this.__displayMatrix.translate(-q, -p),
                            this.__displayMatrix.scale(f, f),
                            this.__displayRect.setTo(q, p, g, k)
                        }
                    null != this.context3D && this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, !0, !0, !0);
                    for (f = this.stage3Ds.iterator(); f.hasNext(); )
                        f.next().__resize(c, d);
                    null != this.__renderer && this.__renderer.__resize(c, d);
                    this.__renderDirty = !0;
                    if (this.stageWidth != a || this.stageHeight != b)
                        this.__setTransformDirty(),
                        a = new ya("resize"),
                        this.__dispatchEvent(a)
                },
                __setLogicalSize: function(a, b) {
                    this.__logicalWidth = a;
                    this.__logicalHeight = b;
                    this.__resize()
                },
                __stopDrag: function(a) {
                    this.__dragObject = this.__dragBounds = null
                },
                __unregisterLimeModule: function(a) {
                    a.onCreateWindow.remove(m(this, this.__onLimeCreateWindow));
                    a.onUpdate.remove(m(this, this.__onLimeUpdate));
                    a.onExit.remove(m(this, this.__onLimeModuleExit));
                    uc.onConnect.remove(m(this, this.__onLimeGamepadConnect));
                    ec.onStart.remove(m(this, this.__onLimeTouchStart));
                    ec.onMove.remove(m(this, this.__onLimeTouchMove));
                    ec.onEnd.remove(m(this, this.__onLimeTouchEnd));
                    ec.onCancel.remove(m(this, this.__onLimeTouchCancel))
                },
                __update: function(a, b) {
                    a ? this.__transformDirty && (hb.prototype.__update.call(this, !0, b),
                    b && (this.__transformDirty = !1)) : this.__transformDirty || this.__renderDirty ? (hb.prototype.__update.call(this, !1, b),
                    b && ca.__supportDOM && (this.__wasDirty = !0)) : !this.__renderDirty && this.__wasDirty && (hb.prototype.__update.call(this, !1, b),
                    b && (this.__wasDirty = !1))
                },
                set_color: function(a) {
                    null == a ? (this.__transparent = !0,
                    a = 0) : this.__transparent = !1;
                    this.__color != a && (this.__colorSplit[0] = ((a & 16711680) >>> 16) / 255,
                    this.__colorSplit[1] = ((a & 65280) >>> 8) / 255,
                    this.__colorSplit[2] = (a & 255) / 255,
                    this.__colorString = "#" + P.hex(a & 16777215, 6),
                    this.__renderDirty = !0,
                    this.__color = -16777216 | a & 16777215);
                    return a
                },
                get_focus: function() {
                    return this.__focus
                },
                set_focus: function(a) {
                    if (a != this.__focus || null == a && null != this.__cacheFocus) {
                        var b = this.__focus;
                        this.__cacheFocus = this.__focus = a;
                        if (null != b) {
                            var c = new ig("focusOut",!0,!1,a,!1,0)
                              , d = [];
                            b.__getInteractive(d);
                            d.reverse();
                            this.__dispatchStack(c, d)
                        }
                        null != a && (c = new ig("focusIn",!0,!1,b,!1,0),
                        d = [],
                        a.__getInteractive(d),
                        d.reverse(),
                        this.__dispatchStack(c, d))
                    }
                    return a
                },
                get_frameRate: function() {
                    return null != this.window ? this.window.__backend.getFrameRate() : 0
                },
                get_fullScreenSourceRect: function() {
                    return null == this.__fullScreenSourceRect ? null : this.__fullScreenSourceRect.clone()
                },
                set_height: function(a) {
                    return this.get_height()
                },
                get_mouseX: function() {
                    return this.__mouseX
                },
                get_mouseY: function() {
                    return this.__mouseY
                },
                get_quality: function() {
                    return this.__quality
                },
                set_rotation: function(a) {
                    return 0
                },
                get_scaleMode: function() {
                    return this.__scaleMode
                },
                set_scaleMode: function(a) {
                    a != this.__scaleMode && (this.__scaleMode = a,
                    this.__resize());
                    return a
                },
                set_scaleX: function(a) {
                    return 0
                },
                set_scaleY: function(a) {
                    return 0
                },
                get_tabEnabled: function() {
                    return !1
                },
                get_tabIndex: function() {
                    return -1
                },
                set_transform: function(a) {
                    return this.get_transform()
                },
                set_width: function(a) {
                    return this.get_width()
                },
                set_x: function(a) {
                    return 0
                },
                set_y: function(a) {
                    return 0
                },
                __class__: Jg,
                __properties__: v(hb.prototype.__properties__, {
                    set_color: "set_color",
                    set_scaleMode: "set_scaleMode",
                    get_scaleMode: "get_scaleMode",
                    get_quality: "get_quality",
                    get_fullScreenSourceRect: "get_fullScreenSourceRect",
                    get_frameRate: "get_frameRate",
                    set_focus: "set_focus",
                    get_focus: "get_focus"
                })
            });
            var hg = function(a) {
                qa.call(this);
                this.__stage = a;
                this.__height = 0;
                this.__projectionTransform = new uj;
                this.__renderTransform = new uj;
                this.__y = this.__x = this.__width = 0;
                this.visible = !0;
                0 < a.stageWidth && 0 < a.stageHeight && this.__resize(a.stageWidth, a.stageHeight)
            };
            h["openfl.display.Stage3D"] = hg;
            hg.__name__ = "openfl.display.Stage3D";
            hg.__super__ = qa;
            hg.prototype = v(qa.prototype, {
                __createContext: function() {
                    var a = this.__stage
                      , b = a.__renderer;
                    if ("cairo" == b.__type || "canvas" == b.__type)
                        this.__dispatchError();
                    else if ("opengl" == b.__type)
                        this.context3D = new sb(a,a.context3D.__contextState,this),
                        this.__dispatchCreate();
                    else if ("dom" == b.__type)
                        if (null == a.context3D) {
                            this.__canvas = window.document.createElement("canvas");
                            this.__canvas.width = a.stageWidth;
                            this.__canvas.height = a.stageHeight;
                            var c = a.window.context.attributes
                              , d = Object.prototype.hasOwnProperty.call(c, "background") && null == c.background
                              , f = Object.prototype.hasOwnProperty.call(c, "colorDepth") ? c.colorDepth : 32;
                            c = Object.prototype.hasOwnProperty.call(c, "antialiasing") && 0 < c.antialiasing;
                            this.__webgl = cl.getContextWebGL(this.__canvas, {
                                alpha: d || 16 < f,
                                antialias: c,
                                depth: !0,
                                premultipliedAlpha: !0,
                                stencil: !0,
                                preserveDrawingBuffer: !1
                            });
                            null != this.__webgl && (null == cf.context && (cf.context = this.__webgl,
                            cf.type = "webgl",
                            cf.version = 1),
                            a.context3D = new sb(a),
                            a.context3D.configureBackBuffer(a.window.__width, a.window.__height, 0, !0, !0, !0),
                            a.context3D.present(),
                            b.element.appendChild(this.__canvas),
                            this.__style = this.__canvas.style,
                            this.__style.setProperty("position", "absolute", null),
                            this.__style.setProperty("top", "0", null),
                            this.__style.setProperty("left", "0", null),
                            this.__style.setProperty(b.__transformOriginProperty, "0 0 0", null),
                            this.__style.setProperty("z-index", "-1", null));
                            null != a.context3D && (this.context3D = new sb(a,a.context3D.__contextState,this));
                            this.__dispatchCreate()
                        } else
                            this.__dispatchError()
                },
                __dispatchError: function() {
                    this.__contextRequested = !1;
                    this.dispatchEvent(new Sd("error",!1,!1,"Context3D not available"))
                },
                __dispatchCreate: function() {
                    this.__contextRequested && (this.__contextRequested = !1,
                    this.dispatchEvent(new ya("context3DCreate")))
                },
                __lostContext: function() {
                    this.__contextLost = !0;
                    null != this.context3D && (this.context3D.__dispose(),
                    this.__contextRequested = !0)
                },
                __resize: function(a, b) {
                    if (a != this.__width || b != this.__height)
                        null != this.__canvas && (this.__canvas.width = a,
                        this.__canvas.height = b),
                        this.__projectionTransform.copyRawDataFrom(ua.toFloatVector(null, null, null, [2 / (0 < a ? a : 1), 0, 0, 0, 0, -2 / (0 < b ? b : 1), 0, 0, 0, 0, -.001, 0, -1, 1, 0, 1])),
                        this.__renderTransform.identity(),
                        this.__renderTransform.appendTranslation(this.__x, this.__y, 0),
                        this.__renderTransform.append(this.__projectionTransform),
                        this.__width = a,
                        this.__height = b
                },
                __restoreContext: function() {
                    this.__contextLost = !1;
                    this.__createContext()
                },
                get_x: function() {
                    return this.__x
                },
                get_y: function() {
                    return this.__y
                },
                __class__: hg,
                __properties__: {
                    get_y: "get_y",
                    get_x: "get_x"
                }
            });
            var xh = function(a, b, c, d, f, g, k, q) {
                null == q && (q = 0);
                null == k && (k = 0);
                null == g && (g = 0);
                null == f && (f = 1);
                null == d && (d = 1);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.__id = a;
                this.__matrix = new ta;
                0 != b && this.set_x(b);
                0 != c && this.set_y(c);
                1 != d && this.set_scaleX(d);
                1 != f && this.set_scaleY(f);
                0 != g && this.set_rotation(g);
                this.__dirty = !0;
                this.__length = 0;
                this.__originX = k;
                this.__originY = q;
                this.__alpha = 1;
                this.__blendMode = null;
                this.__visible = !0
            };
            h["openfl.display.Tile"] = xh;
            xh.__name__ = "openfl.display.Tile";
            xh.prototype = {
                getBounds: function(a) {
                    var b = new oa;
                    this.__findTileRect(b);
                    var c = ta.__pool.get();
                    if (null != a && a != this) {
                        c.copyFrom(this.__getWorldTransform());
                        var d = ta.__pool.get();
                        d.copyFrom(a.__getWorldTransform());
                        d.invert();
                        c.concat(d);
                        ta.__pool.release(d)
                    } else
                        c.identity();
                    this.__getBounds(b, c);
                    ta.__pool.release(c);
                    return b
                },
                __getBounds: function(a, b) {
                    a.__transform(a, b)
                },
                __findTileRect: function(a) {
                    if (null == this.get_tileset())
                        if (null != this.parent) {
                            var b = this.parent.__findTileset();
                            null == b ? a.setTo(0, 0, 0, 0) : (b = b.getRect(this.get_id()),
                            null == b ? a.setTo(0, 0, 0, 0) : a.copyFrom(b))
                        } else
                            a.setTo(0, 0, 0, 0);
                    else
                        a.copyFrom(this.get_tileset().getRect(this.get_id()));
                    a.x = 0;
                    a.y = 0
                },
                __findTileset: function() {
                    return null != this.get_tileset() ? this.get_tileset() : this.parent instanceof yh ? this.parent.get_tileset() : null == this.parent ? null : this.parent.__findTileset()
                },
                __getWorldTransform: function() {
                    var a = this.get_matrix().clone();
                    null != this.parent && a.concat(this.parent.__getWorldTransform());
                    return a
                },
                __setRenderDirty: function() {
                    this.__dirty || (this.__dirty = !0,
                    null != this.parent && this.parent.__setRenderDirty())
                },
                get_alpha: function() {
                    return this.__alpha
                },
                set_alpha: function(a) {
                    a != this.__alpha && (this.__alpha = a,
                    this.__setRenderDirty());
                    return a
                },
                get_colorTransform: function() {
                    return this.__colorTransform
                },
                get_height: function() {
                    var a = oa.__pool.get();
                    this.__findTileRect(a);
                    this.__getBounds(a, this.get_matrix());
                    var b = a.height;
                    oa.__pool.release(a);
                    return b
                },
                set_height: function(a) {
                    var b = oa.__pool.get();
                    this.__findTileRect(b);
                    0 != b.height && this.set_scaleY(a / b.height);
                    oa.__pool.release(b);
                    return a
                },
                get_id: function() {
                    return this.__id
                },
                get_matrix: function() {
                    return this.__matrix
                },
                get_originX: function() {
                    return this.__originX
                },
                set_originX: function(a) {
                    a != this.__originX && (this.__originX = a,
                    this.__setRenderDirty());
                    return a
                },
                get_originY: function() {
                    return this.__originY
                },
                set_originY: function(a) {
                    a != this.__originY && (this.__originY = a,
                    this.__setRenderDirty());
                    return a
                },
                get_rotation: function() {
                    if (null == this.__rotation)
                        if (0 == this.__matrix.b && 0 == this.__matrix.c)
                            this.__rotationSine = this.__rotation = 0,
                            this.__rotationCosine = 1;
                        else {
                            var a = Math.atan2(this.__matrix.d, this.__matrix.c) - Math.PI / 2;
                            this.__rotation = 180 / Math.PI * a;
                            this.__rotationSine = Math.sin(a);
                            this.__rotationCosine = Math.cos(a)
                        }
                    return this.__rotation
                },
                set_rotation: function(a) {
                    if (a != this.__rotation) {
                        this.__rotation = a;
                        var b = Math.PI / 180 * a;
                        this.__rotationSine = Math.sin(b);
                        this.__rotationCosine = Math.cos(b);
                        b = this.get_scaleX();
                        var c = this.get_scaleY();
                        this.__matrix.a = this.__rotationCosine * b;
                        this.__matrix.b = this.__rotationSine * b;
                        this.__matrix.c = -this.__rotationSine * c;
                        this.__matrix.d = this.__rotationCosine * c;
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_scaleX: function() {
                    null == this.__scaleX && (0 == this.get_matrix().b ? this.__scaleX = this.__matrix.a : this.__scaleX = Math.sqrt(this.__matrix.a * this.__matrix.a + this.__matrix.b * this.__matrix.b));
                    return this.__scaleX
                },
                set_scaleX: function(a) {
                    if (a != this.__scaleX) {
                        this.__scaleX = a;
                        if (0 == this.__matrix.b)
                            this.__matrix.a = a;
                        else {
                            this.get_rotation();
                            var b = this.__rotationSine * a;
                            this.__matrix.a = this.__rotationCosine * a;
                            this.__matrix.b = b
                        }
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_scaleY: function() {
                    null == this.__scaleY && (this.__scaleY = 0 == this.__matrix.c ? this.get_matrix().d : Math.sqrt(this.__matrix.c * this.__matrix.c + this.__matrix.d * this.__matrix.d));
                    return this.__scaleY
                },
                set_scaleY: function(a) {
                    if (a != this.__scaleY) {
                        this.__scaleY = a;
                        if (0 == this.__matrix.c)
                            this.__matrix.d = a;
                        else {
                            this.get_rotation();
                            var b = this.__rotationCosine * a;
                            this.__matrix.c = -this.__rotationSine * a;
                            this.__matrix.d = b
                        }
                        this.__setRenderDirty()
                    }
                    return a
                },
                get_shader: function() {
                    return this.__shader
                },
                get_tileset: function() {
                    return this.__tileset
                },
                set_tileset: function(a) {
                    a != this.__tileset && (this.__tileset = a,
                    this.__setRenderDirty());
                    return a
                },
                get_visible: function() {
                    return this.__visible
                },
                get_width: function() {
                    var a = oa.__pool.get();
                    this.__findTileRect(a);
                    this.__getBounds(a, this.get_matrix());
                    var b = a.width;
                    oa.__pool.release(a);
                    return b
                },
                set_width: function(a) {
                    var b = oa.__pool.get();
                    this.__findTileRect(b);
                    0 != b.width && this.set_scaleX(a / b.width);
                    oa.__pool.release(b);
                    return a
                },
                get_x: function() {
                    return this.__matrix.tx
                },
                set_x: function(a) {
                    a != this.__matrix.tx && (this.__matrix.tx = a,
                    this.__setRenderDirty());
                    return a
                },
                get_y: function() {
                    return this.__matrix.ty
                },
                set_y: function(a) {
                    a != this.__matrix.ty && (this.__matrix.ty = a,
                    this.__setRenderDirty());
                    return a
                },
                __class__: xh,
                __properties__: {
                    set_y: "set_y",
                    get_y: "get_y",
                    set_x: "set_x",
                    get_x: "get_x",
                    set_width: "set_width",
                    get_width: "get_width",
                    get_visible: "get_visible",
                    set_tileset: "set_tileset",
                    get_tileset: "get_tileset",
                    get_shader: "get_shader",
                    set_scaleY: "set_scaleY",
                    get_scaleY: "get_scaleY",
                    set_scaleX: "set_scaleX",
                    get_scaleX: "get_scaleX",
                    set_rotation: "set_rotation",
                    get_rotation: "get_rotation",
                    set_originY: "set_originY",
                    get_originY: "get_originY",
                    set_originX: "set_originX",
                    get_originX: "get_originX",
                    get_matrix: "get_matrix",
                    get_id: "get_id",
                    set_height: "set_height",
                    get_height: "get_height",
                    get_colorTransform: "get_colorTransform",
                    set_alpha: "set_alpha",
                    get_alpha: "get_alpha"
                }
            };
            var zh = function(a, b, c, d, f, g, k) {
                null == k && (k = 0);
                null == g && (g = 0);
                null == f && (f = 0);
                null == d && (d = 1);
                null == c && (c = 1);
                null == b && (b = 0);
                null == a && (a = 0);
                xh.call(this, -1, a, b, c, d, f, g, k);
                this.__tiles = [];
                this.__length = 0
            };
            h["openfl.display.TileContainer"] = zh;
            zh.__name__ = "openfl.display.TileContainer";
            zh.__interfaces__ = [Hk];
            zh.__super__ = xh;
            zh.prototype = v(xh.prototype, {
                getBounds: function(a) {
                    for (var b = new oa, c, d = 0, f = this.__tiles; d < f.length; )
                        c = f[d],
                        ++d,
                        c = c.getBounds(a),
                        b.__expand(c.x, c.y, c.width, c.height);
                    return b
                },
                get_height: function() {
                    for (var a = oa.__pool.get(), b, c = 0, d = this.__tiles; c < d.length; )
                        b = d[c],
                        ++c,
                        b = b.getBounds(this),
                        a.__expand(b.x, b.y, b.width, b.height);
                    this.__getBounds(a, this.get_matrix());
                    c = a.height;
                    oa.__pool.release(a);
                    return c
                },
                set_height: function(a) {
                    for (var b = oa.__pool.get(), c, d = 0, f = this.__tiles; d < f.length; )
                        c = f[d],
                        ++d,
                        c = c.getBounds(this),
                        b.__expand(c.x, c.y, c.width, c.height);
                    0 != b.height && this.set_scaleY(a / b.height);
                    oa.__pool.release(b);
                    return a
                },
                get_width: function() {
                    for (var a = oa.__pool.get(), b, c = 0, d = this.__tiles; c < d.length; )
                        b = d[c],
                        ++c,
                        b = b.getBounds(this),
                        a.__expand(b.x, b.y, b.width, b.height);
                    this.__getBounds(a, this.get_matrix());
                    c = a.width;
                    oa.__pool.release(a);
                    return c
                },
                set_width: function(a) {
                    for (var b = oa.__pool.get(), c, d = 0, f = this.__tiles; d < f.length; )
                        c = f[d],
                        ++d,
                        c = c.getBounds(this),
                        b.__expand(c.x, c.y, c.width, c.height);
                    0 != b.width && this.set_scaleX(a / b.width);
                    oa.__pool.release(b);
                    return a
                },
                __class__: zh
            });
            var yh = function(a, b, c, d) {
                null == d && (d = !0);
                ca.call(this);
                this.__drawableType = 9;
                this.__tileset = c;
                this.smoothing = d;
                this.tileColorTransformEnabled = this.tileBlendModeEnabled = this.tileAlphaEnabled = !0;
                this.__group = new zh;
                this.__group.set_tileset(c);
                this.__width = a;
                this.__height = b
            };
            h["openfl.display.Tilemap"] = yh;
            yh.__name__ = "openfl.display.Tilemap";
            yh.__interfaces__ = [Hk];
            yh.__super__ = ca;
            yh.prototype = v(ca.prototype, {
                __enterFrame: function(a) {
                    this.__group.__dirty && !this.__renderDirty && (this.__renderDirty = !0,
                    this.__setParentRenderDirty())
                },
                __getBounds: function(a, b) {
                    var c = oa.__pool.get();
                    c.setTo(0, 0, this.__width, this.__height);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    oa.__pool.release(c)
                },
                __hitTest: function(a, b, c, d, f, g) {
                    if (!g.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
                        return !1;
                    this.__getRenderTransform();
                    var k = this.__renderTransform
                      , q = k.a * k.d - k.b * k.c;
                    c = 0 == q ? -k.tx : 1 / q * (k.c * (k.ty - b) + k.d * (a - k.tx));
                    k = this.__renderTransform;
                    q = k.a * k.d - k.b * k.c;
                    a = 0 == q ? -k.ty : 1 / q * (k.a * (b - k.ty) + k.b * (k.tx - a));
                    return 0 < c && 0 < a && c <= this.__width && a <= this.__height ? (null == d || f || d.push(g),
                    !0) : !1
                },
                get_height: function() {
                    return this.__height * Math.abs(this.get_scaleY())
                },
                set_height: function(a) {
                    this.__height = a | 0;
                    return this.__height * Math.abs(this.get_scaleY())
                },
                get_width: function() {
                    return this.__width * Math.abs(this.__scaleX)
                },
                set_width: function(a) {
                    this.__width = a | 0;
                    return this.__width * Math.abs(this.__scaleX)
                },
                __class__: yh
            });
            var nl = function(a, b) {
                this.__bitmapData = a;
                this.rectData = ua.toFloatVector(null);
                this.__data = [];
                if (null != b)
                    for (a = 0; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        this.addRect(c)
                    }
            };
            h["openfl.display.Tileset"] = nl;
            nl.__name__ = "openfl.display.Tileset";
            nl.prototype = {
                addRect: function(a) {
                    if (null == a)
                        return -1;
                    this.rectData.push(a.x);
                    this.rectData.push(a.y);
                    this.rectData.push(a.width);
                    this.rectData.push(a.height);
                    a = new vj(a);
                    a.__update(this.__bitmapData);
                    this.__data.push(a);
                    return this.__data.length - 1
                },
                getRect: function(a) {
                    return a < this.__data.length && 0 <= a ? new oa(this.__data[a].x,this.__data[a].y,this.__data[a].width,this.__data[a].height) : null
                },
                __class__: nl
            };
            var vj = function(a) {
                null != a && (this.x = a.x | 0,
                this.y = a.y | 0,
                this.width = a.width | 0,
                this.height = a.height | 0)
            };
            h["openfl.display.TileData"] = vj;
            vj.__name__ = "openfl.display.TileData";
            vj.prototype = {
                __update: function(a) {
                    if (null != a) {
                        var b = a.width;
                        a = a.height;
                        this.__uvX = this.x / b;
                        this.__uvY = this.y / a;
                        this.__uvWidth = (this.x + this.width) / b;
                        this.__uvHeight = (this.y + this.height) / a
                    }
                },
                __class__: vj
            };
            var ol = function() {
                this.__totalFrames = this.__framesLoaded = 1;
                this.__currentLabels = [];
                this.__currentFrame = 1;
                this.__lastFrameUpdate = this.__lastFrameScriptEval = -1
            };
            h["openfl.display.Timeline"] = ol;
            ol.__name__ = "openfl.display.Timeline";
            ol.prototype = {
                enterFrame: function(a) {},
                __enterFrame: function(a) {
                    if (this.__isPlaying) {
                        a = this.__getNextFrame(a);
                        if (this.__lastFrameScriptEval == a)
                            return;
                        if (null != this.__frameScripts) {
                            if (a < this.__currentFrame) {
                                if (!this.__evaluateFrameScripts(this.__totalFrames))
                                    return;
                                this.__currentFrame = 1
                            }
                            if (!this.__evaluateFrameScripts(a))
                                return
                        } else
                            this.__currentFrame = a
                    }
                    this.__updateSymbol(this.__currentFrame)
                },
                __evaluateFrameScripts: function(a) {
                    if (null == this.__frameScripts)
                        return !0;
                    var b = this.__currentFrame;
                    for (a += 1; b < a; ) {
                        var c = b++;
                        if (c != this.__lastFrameScriptEval && (this.__currentFrame = this.__lastFrameScriptEval = c,
                        this.__frameScripts.h.hasOwnProperty(c) && (this.__updateSymbol(c),
                        (0,
                        this.__frameScripts.h[c])(this.__scope),
                        this.__currentFrame != c) || !this.__isPlaying))
                            return !1
                    }
                    return !0
                },
                __getNextFrame: function(a) {
                    null != this.frameRate ? (this.__timeElapsed += a,
                    a = this.__currentFrame + Math.floor(this.__timeElapsed / this.__frameTime),
                    1 > a && (a = 1),
                    a > this.__totalFrames && (a = Math.floor((a - 1) % this.__totalFrames) + 1),
                    this.__timeElapsed %= this.__frameTime) : (a = this.__currentFrame + 1,
                    a > this.__totalFrames && (a = 1));
                    return a
                },
                __goto: function(a) {
                    1 > a ? a = 1 : a > this.__totalFrames && (a = this.__totalFrames);
                    this.__lastFrameScriptEval = -1;
                    this.__currentFrame = a;
                    this.__updateSymbol(this.__currentFrame);
                    this.__evaluateFrameScripts(this.__currentFrame)
                },
                __gotoAndStop: function(a, b) {
                    this.__stop();
                    this.__goto(this.__resolveFrameReference(a))
                },
                __stop: function() {
                    this.__isPlaying = !1
                },
                __resolveFrameReference: function(a) {
                    if ("number" == typeof a && (a | 0) === a)
                        return a;
                    if ("string" == typeof a) {
                        for (var b = 0, c = this.__currentLabels; b < c.length; ) {
                            var d = c[b];
                            ++b;
                            if (d.name == a)
                                return d.frame
                        }
                        throw new Sf("Error #2109: Frame label " + a + " not found in scene.");
                    }
                    throw aa.thrown("Invalid type for frame " + a.__name__);
                },
                __updateFrameLabel: function() {
                    this.__currentFrameLabel = this.__currentLabel = null;
                    for (var a = 0, b = this.__currentLabels; a < b.length; ) {
                        var c = b[a];
                        ++a;
                        if (c.frame < this.__currentFrame)
                            this.__currentLabel = c.name;
                        else if (c.frame == this.__currentFrame)
                            this.__currentFrameLabel = this.__currentLabel = c.name;
                        else
                            break
                    }
                },
                __updateSymbol: function(a) {
                    this.__currentFrame != this.__lastFrameUpdate && (this.__updateFrameLabel(),
                    this.enterFrame(a),
                    this.__lastFrameUpdate = this.__currentFrame)
                },
                __class__: ol
            };
            var th = function(a, b) {
                Fg.call(this, a, b);
                this.stage = new Jg(this,Object.prototype.hasOwnProperty.call(b.context, "background") ? b.context.background : 16777215);
                if (Object.prototype.hasOwnProperty.call(b, "parameters"))
                    try {
                        this.stage.get_loaderInfo().parameters = b.parameters
                    } catch (c) {
                        Ua.lastError = c
                    }
                this.stage.__setLogicalSize(b.width, b.height);
                Object.prototype.hasOwnProperty.call(b, "resizable") && !b.resizable && this.stage.set_scaleMode(3);
                a.addModule(this.stage)
            };
            h["openfl.display.Window"] = th;
            th.__name__ = "openfl.display.Window";
            th.__super__ = Fg;
            th.prototype = v(Fg.prototype, {
                close: function() {
                    Fg.prototype.close.call(this);
                    this.onClose.canceled || null == this.stage || (this.application.removeModule(this.stage),
                    this.stage = null)
                },
                __class__: th
            });
            var uh = function() {};
            h["openfl.display._internal.CanvasBitmap"] = uh;
            uh.__name__ = "openfl.display._internal.CanvasBitmap";
            uh.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                null != a.__bitmapData && null != a.__bitmapData.image && (a.__imageVersion = a.__bitmapData.image.version);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (C = b.__getAlpha(a.__worldAlpha),
                    0 >= C))) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            x = b.context;
                            b.setTransform(a.__renderTransform, x);
                            var c = a.opaqueBackground;
                            x.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
                            x.fillRect(0, 0, a.get_width(), a.get_height());
                            b.__popMaskObject(a)
                        }
                        if (null != a.__graphics && a.__renderable && (C = b.__getAlpha(a.__worldAlpha),
                        !(0 >= C))) {
                            var d = a.__graphics;
                            if (null != d) {
                                A.render(d, b);
                                var f = d.__width
                                  , g = d.__height;
                                c = d.__canvas;
                                if (null != c && d.__visible && 1 <= f && 1 <= g) {
                                    var k = d.__worldTransform;
                                    x = b.context;
                                    z = a.__scrollRect;
                                    var q = a.__worldScale9Grid;
                                    if (null == z || 0 < z.width && 0 < z.height) {
                                        b.__setBlendMode(a.__worldBlendMode);
                                        b.__pushMaskObject(a);
                                        x.globalAlpha = C;
                                        if (null != q && 0 == k.b && 0 == k.c) {
                                            var p = b.__pixelRatio;
                                            C = ta.__pool.get();
                                            C.translate(k.tx, k.ty);
                                            b.setTransform(C, x);
                                            ta.__pool.release(C);
                                            C = d.__bounds;
                                            var l = d.__renderTransform.a / d.__bitmapScale
                                              , h = d.__renderTransform.d / d.__bitmapScale
                                              , n = l * k.a
                                              , u = h * k.d;
                                            k = Math.max(1, Math.round(q.x * l));
                                            d = Math.round(q.y * h);
                                            z = Math.max(1, Math.round((C.get_right() - q.get_right()) * l));
                                            var w = Math.round((C.get_bottom() - q.get_bottom()) * h);
                                            l = Math.round(q.width * l);
                                            q = Math.round(q.height * h);
                                            h = Math.round(k / p);
                                            var r = Math.round(d / p)
                                              , m = Math.round(z / p);
                                            p = Math.round(w / p);
                                            n = C.width * n - h - m;
                                            C = C.height * u - r - p;
                                            b.applySmoothing(x, !1);
                                            0 != l && 0 != q ? (x.drawImage(c, 0, 0, k, d, 0, 0, h, r),
                                            x.drawImage(c, k, 0, l, d, h, 0, n, r),
                                            x.drawImage(c, k + l, 0, z, d, h + n, 0, m, r),
                                            x.drawImage(c, 0, d, k, q, 0, r, h, C),
                                            x.drawImage(c, k, d, l, q, h, r, n, C),
                                            x.drawImage(c, k + l, d, z, q, h + n, r, m, C),
                                            x.drawImage(c, 0, d + q, k, w, 0, r + C, h, p),
                                            x.drawImage(c, k, d + q, l, w, h, r + C, n, p),
                                            x.drawImage(c, k + l, d + q, z, w, h + n, r + C, m, p)) : 0 == l && 0 != q ? (g = h + n + m,
                                            x.drawImage(c, 0, 0, f, d, 0, 0, g, r),
                                            x.drawImage(c, 0, d, f, q, 0, r, g, C),
                                            x.drawImage(c, 0, d + q, f, w, 0, r + C, g, p)) : 0 == q && 0 != l && (f = r + C + p,
                                            x.drawImage(c, 0, 0, k, g, 0, 0, h, f),
                                            x.drawImage(c, k, 0, l, g, h, 0, n, f),
                                            x.drawImage(c, k + l, 0, z, g, h + n, 0, m, f))
                                        } else
                                            b.setTransform(k, x),
                                            x.drawImage(c, 0, 0, f, g);
                                        b.__popMaskObject(a)
                                    }
                                }
                            }
                        }
                    }
                    a.__renderable && (C = b.__getAlpha(a.__worldAlpha),
                    0 < C && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable && (x = b.context,
                    b.__setBlendMode(a.__worldBlendMode),
                    b.__pushMaskObject(a, !1),
                    Na.convertToCanvas(a.__bitmapData.image),
                    x.globalAlpha = C,
                    z = a.__scrollRect,
                    b.setTransform(a.__renderTransform, x),
                    b.__allowSmoothing && a.smoothing || (x.imageSmoothingEnabled = !1),
                    null == z ? x.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height) : x.drawImage(a.__bitmapData.image.get_src(), z.x, z.y, z.width, z.height, z.x, z.y, z.width, z.height),
                    b.__allowSmoothing && a.smoothing || (x.imageSmoothingEnabled = !0),
                    b.__popMaskObject(a, !1)))
                } else if (c = a.__cacheBitmap,
                c.__renderable) {
                    var C = b.__getAlpha(c.__worldAlpha);
                    if (0 < C && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                        var x = b.context;
                        b.__setBlendMode(c.__worldBlendMode);
                        b.__pushMaskObject(c, !1);
                        Na.convertToCanvas(c.__bitmapData.image);
                        x.globalAlpha = C;
                        var z = c.__scrollRect;
                        b.setTransform(c.__renderTransform, x);
                        b.__allowSmoothing && c.smoothing || (x.imageSmoothingEnabled = !1);
                        null == z ? x.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : x.drawImage(c.__bitmapData.image.get_src(), z.x, z.y, z.width, z.height, z.x, z.y, z.width, z.height);
                        b.__allowSmoothing && c.smoothing || (x.imageSmoothingEnabled = !0);
                        b.__popMaskObject(c, !1)
                    }
                }
                b.__renderEvent(a)
            }
            ;
            uh.renderDrawableMask = function(a, b) {
                b.context.rect(0, 0, a.get_width(), a.get_height())
            }
            ;
            var $i = function() {};
            h["openfl.display._internal.CanvasBitmapData"] = $i;
            $i.__name__ = "openfl.display._internal.CanvasBitmapData";
            $i.renderDrawable = function(a, b) {
                if (a.readable) {
                    var c = a.image;
                    c.type == wc.DATA && Na.convertToCanvas(c);
                    var d = b.context;
                    d.globalAlpha = 1;
                    b.setTransform(a.__renderTransform, d);
                    d.drawImage(c.get_src(), 0, 0, c.width, c.height)
                }
            }
            ;
            $i.renderDrawableMask = function(a, b) {}
            ;
            var cg = function() {};
            h["openfl.display._internal.CanvasDisplayObject"] = cg;
            cg.__name__ = "openfl.display._internal.CanvasDisplayObject";
            cg.renderDrawable = function(a, b) {
                if (null == a.get_mask() || 0 < a.get_mask().get_width() && 0 < a.get_mask().get_height())
                    if (b.__updateCacheBitmap(a, !1),
                    null != a.__cacheBitmap && !a.__isCacheBitmapRender) {
                        var c = a.__cacheBitmap;
                        if (c.__renderable) {
                            var d = b.__getAlpha(c.__worldAlpha);
                            if (0 < d && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                                var f = b.context;
                                b.__setBlendMode(c.__worldBlendMode);
                                b.__pushMaskObject(c, !1);
                                Na.convertToCanvas(c.__bitmapData.image);
                                f.globalAlpha = d;
                                var g = c.__scrollRect;
                                b.setTransform(c.__renderTransform, f);
                                b.__allowSmoothing && c.smoothing || (f.imageSmoothingEnabled = !1);
                                null == g ? f.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : f.drawImage(c.__bitmapData.image.get_src(), g.x, g.y, g.width, g.height, g.x, g.y, g.width, g.height);
                                b.__allowSmoothing && c.smoothing || (f.imageSmoothingEnabled = !0);
                                b.__popMaskObject(c, !1)
                            }
                        }
                    } else if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha),
                    0 >= d || (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height() && (b.__setBlendMode(a.__worldBlendMode),
                    b.__pushMaskObject(a),
                    f = b.context,
                    b.setTransform(a.__renderTransform, f),
                    c = a.opaqueBackground,
                    f.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")",
                    f.fillRect(0, 0, a.get_width(), a.get_height()),
                    b.__popMaskObject(a)),
                    null == a.__graphics || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha),
                    0 >= d))))) {
                        var k = a.__graphics;
                        if (null != k) {
                            A.render(k, b);
                            var q = k.__width
                              , p = k.__height;
                            c = k.__canvas;
                            if (null != c && k.__visible && 1 <= q && 1 <= p) {
                                var l = k.__worldTransform;
                                f = b.context;
                                g = a.__scrollRect;
                                var h = a.__worldScale9Grid;
                                if (null == g || 0 < g.width && 0 < g.height) {
                                    b.__setBlendMode(a.__worldBlendMode);
                                    b.__pushMaskObject(a);
                                    f.globalAlpha = d;
                                    if (null != h && 0 == l.b && 0 == l.c) {
                                        var n = b.__pixelRatio;
                                        d = ta.__pool.get();
                                        d.translate(l.tx, l.ty);
                                        b.setTransform(d, f);
                                        ta.__pool.release(d);
                                        d = k.__bounds;
                                        var u = k.__renderTransform.a / k.__bitmapScale
                                          , w = k.__renderTransform.d / k.__bitmapScale
                                          , r = u * l.a
                                          , m = w * l.d;
                                        l = Math.max(1, Math.round(h.x * u));
                                        k = Math.round(h.y * w);
                                        g = Math.max(1, Math.round((d.get_right() - h.get_right()) * u));
                                        var C = Math.round((d.get_bottom() - h.get_bottom()) * w);
                                        u = Math.round(h.width * u);
                                        h = Math.round(h.height * w);
                                        w = Math.round(l / n);
                                        var x = Math.round(k / n)
                                          , z = Math.round(g / n);
                                        n = Math.round(C / n);
                                        r = d.width * r - w - z;
                                        d = d.height * m - x - n;
                                        b.applySmoothing(f, !1);
                                        0 != u && 0 != h ? (f.drawImage(c, 0, 0, l, k, 0, 0, w, x),
                                        f.drawImage(c, l, 0, u, k, w, 0, r, x),
                                        f.drawImage(c, l + u, 0, g, k, w + r, 0, z, x),
                                        f.drawImage(c, 0, k, l, h, 0, x, w, d),
                                        f.drawImage(c, l, k, u, h, w, x, r, d),
                                        f.drawImage(c, l + u, k, g, h, w + r, x, z, d),
                                        f.drawImage(c, 0, k + h, l, C, 0, x + d, w, n),
                                        f.drawImage(c, l, k + h, u, C, w, x + d, r, n),
                                        f.drawImage(c, l + u, k + h, g, C, w + r, x + d, z, n)) : 0 == u && 0 != h ? (p = w + r + z,
                                        f.drawImage(c, 0, 0, q, k, 0, 0, p, x),
                                        f.drawImage(c, 0, k, q, h, 0, x, p, d),
                                        f.drawImage(c, 0, k + h, q, C, 0, x + d, p, n)) : 0 == h && 0 != u && (q = x + d + n,
                                        f.drawImage(c, 0, 0, l, p, 0, 0, w, q),
                                        f.drawImage(c, l, 0, u, p, w, 0, r, q),
                                        f.drawImage(c, l + u, 0, g, p, w + r, 0, z, q))
                                    } else
                                        b.setTransform(l, f),
                                        f.drawImage(c, 0, 0, q, p);
                                    b.__popMaskObject(a)
                                }
                            }
                        }
                    }
                b.__renderEvent(a)
            }
            ;
            cg.renderDrawableMask = function(a, b) {
                null != a.__graphics && A.renderMask(a.__graphics, b)
            }
            ;
            var aj = function() {};
            h["openfl.display._internal.CanvasDisplayObjectContainer"] = aj;
            aj.__name__ = "openfl.display._internal.CanvasDisplayObjectContainer";
            aj.renderDrawable = function(a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext(); ) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                if (!(!a.__renderable || 0 >= a.__worldAlpha || null != a.get_mask() && (0 >= a.get_mask().get_width() || 0 >= a.get_mask().get_height())) && (cg.renderDrawable(a, b),
                null == a.__cacheBitmap || a.__isCacheBitmapRender)) {
                    b.__pushMaskObject(a);
                    if (null != b.__stage) {
                        c = 0;
                        for (d = a.__children; c < d.length; ) {
                            var f = d[c];
                            ++c;
                            b.__renderDrawable(f);
                            f.__renderDirty = !1
                        }
                        a.__renderDirty = !1
                    } else
                        for (c = 0,
                        d = a.__children; c < d.length; )
                            f = d[c],
                            ++c,
                            b.__renderDrawable(f);
                    b.__popMaskObject(a)
                }
            }
            ;
            aj.renderDrawableMask = function(a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext(); ) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                null != a.__graphics && A.renderMask(a.__graphics, b);
                c = 0;
                for (a = a.__children; c < a.length; )
                    d = a[c],
                    ++c,
                    b.__renderDrawableMask(d)
            }
            ;
            var rd = function() {
                null == rd.empty ? (this.types = [],
                this.b = [],
                this.i = [],
                this.f = [],
                this.o = [],
                this.ff = [],
                this.ii = [],
                this.copyOnWrite = !0) : this.clear()
            };
            h["openfl.display._internal.DrawCommandBuffer"] = rd;
            rd.__name__ = "openfl.display._internal.DrawCommandBuffer";
            rd.prototype = {
                beginBitmapFill: function(a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Y.BEGIN_BITMAP_FILL);
                    this.o.push(a);
                    this.o.push(b);
                    this.b.push(c);
                    this.b.push(d)
                },
                beginFill: function(a, b) {
                    this.prepareWrite();
                    this.types.push(Y.BEGIN_FILL);
                    this.i.push(a);
                    this.f.push(b)
                },
                beginGradientFill: function(a, b, c, d, f, g, k, q) {
                    this.prepareWrite();
                    this.types.push(Y.BEGIN_GRADIENT_FILL);
                    this.o.push(a);
                    this.ii.push(b);
                    this.ff.push(c);
                    this.ii.push(d);
                    this.o.push(f);
                    this.o.push(g);
                    this.o.push(k);
                    this.f.push(q)
                },
                beginShaderFill: function(a) {
                    this.prepareWrite();
                    this.types.push(Y.BEGIN_SHADER_FILL);
                    this.o.push(a)
                },
                clear: function() {
                    this.types = rd.empty.types;
                    this.b = rd.empty.b;
                    this.i = rd.empty.i;
                    this.f = rd.empty.f;
                    this.o = rd.empty.o;
                    this.ff = rd.empty.ff;
                    this.ii = rd.empty.ii;
                    this.copyOnWrite = !0
                },
                cubicCurveTo: function(a, b, c, d, f, g) {
                    this.prepareWrite();
                    this.types.push(Y.CUBIC_CURVE_TO);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d);
                    this.f.push(f);
                    this.f.push(g)
                },
                curveTo: function(a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Y.CURVE_TO);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawCircle: function(a, b, c) {
                    this.prepareWrite();
                    this.types.push(Y.DRAW_CIRCLE);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c)
                },
                drawEllipse: function(a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Y.DRAW_ELLIPSE);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawQuads: function(a, b, c) {
                    this.prepareWrite();
                    this.types.push(Y.DRAW_QUADS);
                    this.o.push(a);
                    this.o.push(b);
                    this.o.push(c)
                },
                drawRect: function(a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Y.DRAW_RECT);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d)
                },
                drawRoundRect: function(a, b, c, d, f, g) {
                    this.prepareWrite();
                    this.types.push(Y.DRAW_ROUND_RECT);
                    this.f.push(a);
                    this.f.push(b);
                    this.f.push(c);
                    this.f.push(d);
                    this.f.push(f);
                    this.o.push(g)
                },
                drawTriangles: function(a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Y.DRAW_TRIANGLES);
                    this.o.push(a);
                    this.o.push(b);
                    this.o.push(c);
                    this.o.push(d)
                },
                endFill: function() {
                    this.prepareWrite();
                    this.types.push(Y.END_FILL)
                },
                lineBitmapStyle: function(a, b, c, d) {
                    this.prepareWrite();
                    this.types.push(Y.LINE_BITMAP_STYLE);
                    this.o.push(a);
                    this.o.push(b);
                    this.b.push(c);
                    this.b.push(d)
                },
                lineGradientStyle: function(a, b, c, d, f, g, k, q) {
                    this.prepareWrite();
                    this.types.push(Y.LINE_GRADIENT_STYLE);
                    this.o.push(a);
                    this.ii.push(b);
                    this.ff.push(c);
                    this.ii.push(d);
                    this.o.push(f);
                    this.o.push(g);
                    this.o.push(k);
                    this.f.push(q)
                },
                lineStyle: function(a, b, c, d, f, g, k, q) {
                    this.prepareWrite();
                    this.types.push(Y.LINE_STYLE);
                    this.o.push(a);
                    this.i.push(b);
                    this.f.push(c);
                    this.b.push(d);
                    this.o.push(f);
                    this.o.push(g);
                    this.o.push(k);
                    this.f.push(q)
                },
                lineTo: function(a, b) {
                    this.prepareWrite();
                    this.types.push(Y.LINE_TO);
                    this.f.push(a);
                    this.f.push(b)
                },
                moveTo: function(a, b) {
                    this.prepareWrite();
                    this.types.push(Y.MOVE_TO);
                    this.f.push(a);
                    this.f.push(b)
                },
                prepareWrite: function() {
                    this.copyOnWrite && (this.types = this.types.slice(),
                    this.b = this.b.slice(),
                    this.i = this.i.slice(),
                    this.f = this.f.slice(),
                    this.o = this.o.slice(),
                    this.ff = this.ff.slice(),
                    this.ii = this.ii.slice(),
                    this.copyOnWrite = !1)
                },
                windingEvenOdd: function() {
                    this.prepareWrite();
                    this.types.push(Y.WINDING_EVEN_ODD)
                },
                windingNonZero: function() {
                    this.prepareWrite();
                    this.types.push(Y.WINDING_NON_ZERO)
                },
                get_length: function() {
                    return this.types.length
                },
                __class__: rd,
                __properties__: {
                    get_length: "get_length"
                }
            };
            var A = function() {};
            h["openfl.display._internal.CanvasGraphics"] = A;
            A.__name__ = "openfl.display._internal.CanvasGraphics";
            A.closePath = function(a) {
                null == a && (a = !1);
                null != A.context.strokeStyle && (a || A.context.closePath(),
                A.context.stroke(),
                a && A.context.closePath(),
                A.context.beginPath())
            }
            ;
            A.createBitmapFill = function(a, b, c) {
                Na.convertToCanvas(a.image);
                A.setSmoothing(c);
                return A.context.createPattern(a.image.get_src(), b ? "repeat" : "no-repeat")
            }
            ;
            A.createGradientPattern = function(a, b, c, d, f, g, k, q) {
                k = !1;
                null == f && (f = ta.__pool.get(),
                f.identity(),
                k = !0);
                switch (a) {
                case 0:
                    if (0 == g) {
                        a = A.context.createLinearGradient(-819.2, 0, 819.2, 0);
                        A.pendingMatrix = f.clone();
                        A.inversePendingMatrix = f.clone();
                        A.inversePendingMatrix.invert();
                        for (var p = 0, l = b.length; p < l; ) {
                            var h = p++;
                            g = d[h] / 255;
                            0 > g ? g = 0 : 1 < g && (g = 1);
                            a.addColorStop(g, A.getRGBA(b[h], c[h]))
                        }
                        k && ta.__pool.release(f);
                        return a
                    }
                    a = 819.2 * ((0 == g ? 1 : 25) - 1);
                    k = window.document.createElement("canvas");
                    q = k.getContext("2d");
                    var n = A.getDimensions(f);
                    k.width = A.context.canvas.width;
                    k.height = A.context.canvas.height;
                    a = A.context.createLinearGradient(-819.2 - a, 0, 819.2 + a, 0);
                    if (1 == g)
                        for (var u = 0, w = .04; 1 > u; ) {
                            p = 0;
                            for (l = b.length; p < l; )
                                h = p++,
                                g = d[h] / 255,
                                g = u + g * w,
                                0 > g ? g = 0 : 1 < g && (g = 1),
                                a.addColorStop(g, A.getRGBA(b[h], c[h]));
                            u += w;
                            for (p = b.length - 1; 0 <= p; )
                                g = d[p] / 255,
                                g = u + (1 - g) * w,
                                0 > g ? g = 0 : 1 < g && (g = 1),
                                a.addColorStop(g, A.getRGBA(b[p], c[p])),
                                --p;
                            u += w
                        }
                    else if (2 == g)
                        for (u = 0,
                        w = .04; 1 > u; ) {
                            p = 0;
                            for (l = b.length; p < l; )
                                h = p++,
                                g = d[h] / 255,
                                g = u + g * w,
                                0 > g ? g = 0 : 1 < g && (g = .999),
                                a.addColorStop(g, A.getRGBA(b[h], c[h]));
                            g = u + .001;
                            0 > g ? g = 0 : 1 < g && (g = 1);
                            a.addColorStop(g - .001, A.getRGBA(b[b.length - 1], c[c.length - 1]));
                            a.addColorStop(g, A.getRGBA(b[0], c[0]));
                            u += w
                        }
                    A.pendingMatrix = new ta;
                    A.pendingMatrix.tx = f.tx - n.width / 2;
                    A.pendingMatrix.ty = f.ty - n.height / 2;
                    A.inversePendingMatrix = A.pendingMatrix.clone();
                    A.inversePendingMatrix.invert();
                    b = new Path2D;
                    b.rect(0, 0, k.width, k.height);
                    b.closePath();
                    f = new DOMMatrix([f.a, f.b, f.c, f.d, f.tx, f.ty]);
                    c = f.inverse();
                    d = new Path2D;
                    d.addPath(b, c);
                    q.fillStyle = a;
                    q.setTransform(f);
                    q.fill(d);
                    return A.context.createPattern(k, "no-repeat");
                case 1:
                    1 < q ? q = 1 : -1 > q && (q = -1);
                    a = A.context.createRadialGradient(819.2 * q, 0, 0, 0, 0, 819.2);
                    A.pendingMatrix = f.clone();
                    A.inversePendingMatrix = f.clone();
                    A.inversePendingMatrix.invert();
                    p = 0;
                    for (l = b.length; p < l; )
                        h = p++,
                        g = d[h] / 255,
                        0 > g ? g = 0 : 1 < g && (g = 1),
                        a.addColorStop(g, A.getRGBA(b[h], c[h]));
                    k && ta.__pool.release(f);
                    return a
                }
            }
            ;
            A.getRGBA = function(a, b) {
                var c = (a & 16711680) >>> 16
                  , d = (a & 65280) >>> 8;
                a &= 255;
                return "rgba(" + (null == c ? "null" : G.string(ab.toFloat(c))) + ", " + (null == d ? "null" : G.string(ab.toFloat(d))) + ", " + (null == a ? "null" : G.string(ab.toFloat(a))) + ", " + b + ")"
            }
            ;
            A.getDimensions = function(a) {
                var b = Math.cos(Math.atan2(a.c, a.a))
                  , c = a.a / b * 1638.4;
                a = a.d / b * 1638.4;
                0 == c && 0 == a && (c = a = 819.2);
                return {
                    width: c,
                    height: a
                }
            }
            ;
            A.createTempPatternCanvas = function(a, b, c, d) {
                var f = window.document.createElement("canvas")
                  , g = f.getContext("2d");
                f.width = c;
                f.height = d;
                a = a.image.get_src();
                g.fillStyle = g.createPattern(a, b ? "repeat" : "no-repeat");
                g.beginPath();
                g.moveTo(0, 0);
                g.lineTo(0, d);
                g.lineTo(c, d);
                g.lineTo(c, 0);
                g.lineTo(0, 0);
                g.closePath();
                A.hitTesting || g.fill(A.windingRule);
                return f
            }
            ;
            A.drawRoundRect = function(a, b, c, d, f, g) {
                null == g && (g = f);
                f *= .5;
                g *= .5;
                f > c / 2 && (f = c / 2);
                g > d / 2 && (g = d / 2);
                c = a + c;
                d = b + d;
                var k = -f + .7071067811865476 * f
                  , q = -f + .41421356237309503 * f
                  , p = -g + .7071067811865476 * g
                  , l = -g + .41421356237309503 * g;
                A.context.moveTo(c, d - g);
                A.context.quadraticCurveTo(c, d + l, c + k, d + p);
                A.context.quadraticCurveTo(c + q, d, c - f, d);
                A.context.lineTo(a + f, d);
                A.context.quadraticCurveTo(a - q, d, a - k, d + p);
                A.context.quadraticCurveTo(a, d + l, a, d - g);
                A.context.lineTo(a, b + g);
                A.context.quadraticCurveTo(a, b - l, a - k, b - p);
                A.context.quadraticCurveTo(a - q, b, a + f, b);
                A.context.lineTo(c - f, b);
                A.context.quadraticCurveTo(c + q, b, c + k, b - p);
                A.context.quadraticCurveTo(c, b - l, c, b + g);
                A.context.lineTo(c, d - g)
            }
            ;
            A.endFill = function() {
                A.context.beginPath();
                A.playCommands(A.fillCommands, !1);
                A.fillCommands.clear()
            }
            ;
            A.endStroke = function() {
                A.context.beginPath();
                A.playCommands(A.strokeCommands, !0);
                A.context.closePath();
                A.strokeCommands.clear()
            }
            ;
            A.hitTest = function(a, b, c) {
                A.bounds = a.__bounds;
                A.graphics = a;
                if (0 == a.__commands.get_length() || null == A.bounds || 0 >= A.bounds.width || 0 >= A.bounds.height)
                    return A.graphics = null,
                    !1;
                A.hitTesting = !0;
                var d = a.__renderTransform
                  , f = b * d.b + c * d.d + d.ty;
                b = b * d.a + c * d.c + d.tx - (A.bounds.x * d.a + A.bounds.y * d.c + d.tx);
                c = f - (A.bounds.x * d.b + A.bounds.y * d.d + d.ty);
                f = a.__canvas;
                var g = a.__context;
                a.__canvas = A.hitTestCanvas;
                a.__context = A.hitTestContext;
                A.context = a.__context;
                A.context.setTransform(d.a, d.b, d.c, d.d, d.tx, d.ty);
                A.fillCommands.clear();
                A.strokeCommands.clear();
                A.hasFill = !1;
                A.hasStroke = !1;
                A.bitmapFill = null;
                A.bitmapRepeat = !1;
                A.windingRule = "evenodd";
                d = new ve(a.__commands);
                for (var k = 0, q = a.__commands.types; k < q.length; ) {
                    var p = q[k];
                    ++k;
                    switch (p._hx_index) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                        A.endFill();
                        if (A.hasFill && A.context.isPointInPath(b, c, A.windingRule))
                            return d.destroy(),
                            a.__canvas = f,
                            a.__context = g,
                            A.graphics = null,
                            !0;
                        A.endStroke();
                        if (A.hasStroke && A.context.isPointInStroke(b, c))
                            return d.destroy(),
                            a.__canvas = f,
                            a.__context = g,
                            A.graphics = null,
                            !0;
                        if (p == Y.BEGIN_BITMAP_FILL) {
                            switch (d.prev._hx_index) {
                            case 0:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 1:
                                d.iPos += 1;
                                d.fPos += 1;
                                break;
                            case 2:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 3:
                                d.oPos += 1;
                                break;
                            case 4:
                                d.fPos += 6;
                                break;
                            case 5:
                                d.fPos += 4;
                                break;
                            case 6:
                                d.fPos += 3;
                                break;
                            case 7:
                                d.fPos += 4;
                                break;
                            case 8:
                                d.oPos += 3;
                                break;
                            case 9:
                                d.fPos += 4;
                                break;
                            case 10:
                                d.fPos += 5;
                                d.oPos += 1;
                                break;
                            case 12:
                                d.oPos += 4;
                                break;
                            case 14:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 15:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 16:
                                d.oPos += 4;
                                d.iPos += 1;
                                d.fPos += 2;
                                d.bPos += 1;
                                break;
                            case 17:
                                d.fPos += 2;
                                break;
                            case 18:
                                d.fPos += 2;
                                break;
                            case 19:
                                d.oPos += 1;
                                break;
                            case 20:
                                d.oPos += 1
                            }
                            d.prev = Y.BEGIN_BITMAP_FILL;
                            p = d;
                            A.fillCommands.beginBitmapFill(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.b[p.bPos], p.buffer.b[p.bPos + 1]);
                            A.strokeCommands.beginBitmapFill(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.b[p.bPos], p.buffer.b[p.bPos + 1])
                        } else if (p == Y.BEGIN_GRADIENT_FILL) {
                            switch (d.prev._hx_index) {
                            case 0:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 1:
                                d.iPos += 1;
                                d.fPos += 1;
                                break;
                            case 2:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 3:
                                d.oPos += 1;
                                break;
                            case 4:
                                d.fPos += 6;
                                break;
                            case 5:
                                d.fPos += 4;
                                break;
                            case 6:
                                d.fPos += 3;
                                break;
                            case 7:
                                d.fPos += 4;
                                break;
                            case 8:
                                d.oPos += 3;
                                break;
                            case 9:
                                d.fPos += 4;
                                break;
                            case 10:
                                d.fPos += 5;
                                d.oPos += 1;
                                break;
                            case 12:
                                d.oPos += 4;
                                break;
                            case 14:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 15:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 16:
                                d.oPos += 4;
                                d.iPos += 1;
                                d.fPos += 2;
                                d.bPos += 1;
                                break;
                            case 17:
                                d.fPos += 2;
                                break;
                            case 18:
                                d.fPos += 2;
                                break;
                            case 19:
                                d.oPos += 1;
                                break;
                            case 20:
                                d.oPos += 1
                            }
                            d.prev = Y.BEGIN_GRADIENT_FILL;
                            p = d;
                            A.fillCommands.beginGradientFill(p.buffer.o[p.oPos], p.buffer.ii[p.iiPos], p.buffer.ff[p.ffPos], p.buffer.ii[p.iiPos + 1], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos]);
                            A.strokeCommands.beginGradientFill(p.buffer.o[p.oPos], p.buffer.ii[p.iiPos], p.buffer.ff[p.ffPos], p.buffer.ii[p.iiPos + 1], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos])
                        } else if (p == Y.BEGIN_SHADER_FILL) {
                            switch (d.prev._hx_index) {
                            case 0:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 1:
                                d.iPos += 1;
                                d.fPos += 1;
                                break;
                            case 2:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 3:
                                d.oPos += 1;
                                break;
                            case 4:
                                d.fPos += 6;
                                break;
                            case 5:
                                d.fPos += 4;
                                break;
                            case 6:
                                d.fPos += 3;
                                break;
                            case 7:
                                d.fPos += 4;
                                break;
                            case 8:
                                d.oPos += 3;
                                break;
                            case 9:
                                d.fPos += 4;
                                break;
                            case 10:
                                d.fPos += 5;
                                d.oPos += 1;
                                break;
                            case 12:
                                d.oPos += 4;
                                break;
                            case 14:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 15:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 16:
                                d.oPos += 4;
                                d.iPos += 1;
                                d.fPos += 2;
                                d.bPos += 1;
                                break;
                            case 17:
                                d.fPos += 2;
                                break;
                            case 18:
                                d.fPos += 2;
                                break;
                            case 19:
                                d.oPos += 1;
                                break;
                            case 20:
                                d.oPos += 1
                            }
                            d.prev = Y.BEGIN_SHADER_FILL;
                            p = d;
                            A.fillCommands.beginShaderFill(p.buffer.o[p.oPos]);
                            A.strokeCommands.beginShaderFill(p.buffer.o[p.oPos])
                        } else {
                            switch (d.prev._hx_index) {
                            case 0:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 1:
                                d.iPos += 1;
                                d.fPos += 1;
                                break;
                            case 2:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 3:
                                d.oPos += 1;
                                break;
                            case 4:
                                d.fPos += 6;
                                break;
                            case 5:
                                d.fPos += 4;
                                break;
                            case 6:
                                d.fPos += 3;
                                break;
                            case 7:
                                d.fPos += 4;
                                break;
                            case 8:
                                d.oPos += 3;
                                break;
                            case 9:
                                d.fPos += 4;
                                break;
                            case 10:
                                d.fPos += 5;
                                d.oPos += 1;
                                break;
                            case 12:
                                d.oPos += 4;
                                break;
                            case 14:
                                d.oPos += 2;
                                d.bPos += 2;
                                break;
                            case 15:
                                d.oPos += 4;
                                d.iiPos += 2;
                                d.ffPos += 1;
                                d.fPos += 1;
                                break;
                            case 16:
                                d.oPos += 4;
                                d.iPos += 1;
                                d.fPos += 2;
                                d.bPos += 1;
                                break;
                            case 17:
                                d.fPos += 2;
                                break;
                            case 18:
                                d.fPos += 2;
                                break;
                            case 19:
                                d.oPos += 1;
                                break;
                            case 20:
                                d.oPos += 1
                            }
                            d.prev = Y.BEGIN_FILL;
                            p = d;
                            A.fillCommands.beginFill(p.buffer.i[p.iPos], 1);
                            A.strokeCommands.beginFill(p.buffer.i[p.iPos], 1)
                        }
                        break;
                    case 4:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.CUBIC_CURVE_TO;
                        p = d;
                        A.fillCommands.cubicCurveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.f[p.fPos + 5]);
                        A.strokeCommands.cubicCurveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.f[p.fPos + 5]);
                        break;
                    case 5:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.CURVE_TO;
                        p = d;
                        A.fillCommands.curveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                        A.strokeCommands.curveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                        break;
                    case 6:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.DRAW_CIRCLE;
                        p = d;
                        A.fillCommands.drawCircle(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2]);
                        A.strokeCommands.drawCircle(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2]);
                        break;
                    case 7:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.DRAW_ELLIPSE;
                        p = d;
                        A.fillCommands.drawEllipse(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                        A.strokeCommands.drawEllipse(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                        break;
                    case 9:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.DRAW_RECT;
                        p = d;
                        A.fillCommands.drawRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                        A.strokeCommands.drawRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                        break;
                    case 10:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.DRAW_ROUND_RECT;
                        p = d;
                        A.fillCommands.drawRoundRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.o[p.oPos]);
                        A.strokeCommands.drawRoundRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.o[p.oPos]);
                        break;
                    case 13:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.END_FILL;
                        A.endFill();
                        if (A.hasFill && A.context.isPointInPath(b, c, A.windingRule))
                            return d.destroy(),
                            a.__canvas = f,
                            a.__context = g,
                            A.graphics = null,
                            !0;
                        A.endStroke();
                        if (A.hasStroke && A.context.isPointInStroke(b, c))
                            return d.destroy(),
                            a.__canvas = f,
                            a.__context = g,
                            A.graphics = null,
                            !0;
                        A.hasFill = !1;
                        A.bitmapFill = null;
                        break;
                    case 14:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.LINE_BITMAP_STYLE;
                        p = d;
                        A.strokeCommands.lineBitmapStyle(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.b[p.bPos], p.buffer.b[p.bPos + 1]);
                        break;
                    case 15:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.LINE_GRADIENT_STYLE;
                        p = d;
                        A.strokeCommands.lineGradientStyle(p.buffer.o[p.oPos], p.buffer.ii[p.iiPos], p.buffer.ff[p.ffPos], p.buffer.ii[p.iiPos + 1], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos]);
                        break;
                    case 16:
                        A.endStroke();
                        if (A.hasStroke && A.context.isPointInStroke(b, c))
                            return d.destroy(),
                            a.__canvas = f,
                            a.__context = g,
                            A.graphics = null,
                            !0;
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.LINE_STYLE;
                        p = d;
                        A.strokeCommands.lineStyle(p.buffer.o[p.oPos], p.buffer.i[p.iPos], 1, p.buffer.b[p.bPos], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos + 1]);
                        break;
                    case 17:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.LINE_TO;
                        p = d;
                        A.fillCommands.lineTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]);
                        A.strokeCommands.lineTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]);
                        break;
                    case 18:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = Y.MOVE_TO;
                        p = d;
                        A.fillCommands.moveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]);
                        A.strokeCommands.moveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]);
                        break;
                    case 21:
                        A.windingRule = "evenodd";
                        break;
                    case 22:
                        A.windingRule = "nonzero";
                        break;
                    default:
                        switch (d.prev._hx_index) {
                        case 0:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 1:
                            d.iPos += 1;
                            d.fPos += 1;
                            break;
                        case 2:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 3:
                            d.oPos += 1;
                            break;
                        case 4:
                            d.fPos += 6;
                            break;
                        case 5:
                            d.fPos += 4;
                            break;
                        case 6:
                            d.fPos += 3;
                            break;
                        case 7:
                            d.fPos += 4;
                            break;
                        case 8:
                            d.oPos += 3;
                            break;
                        case 9:
                            d.fPos += 4;
                            break;
                        case 10:
                            d.fPos += 5;
                            d.oPos += 1;
                            break;
                        case 12:
                            d.oPos += 4;
                            break;
                        case 14:
                            d.oPos += 2;
                            d.bPos += 2;
                            break;
                        case 15:
                            d.oPos += 4;
                            d.iiPos += 2;
                            d.ffPos += 1;
                            d.fPos += 1;
                            break;
                        case 16:
                            d.oPos += 4;
                            d.iPos += 1;
                            d.fPos += 2;
                            d.bPos += 1;
                            break;
                        case 17:
                            d.fPos += 2;
                            break;
                        case 18:
                            d.fPos += 2;
                            break;
                        case 19:
                            d.oPos += 1;
                            break;
                        case 20:
                            d.oPos += 1
                        }
                        d.prev = p
                    }
                }
                k = !1;
                0 < A.fillCommands.get_length() && A.endFill();
                A.hasFill && A.context.isPointInPath(b, c, A.windingRule) && (k = !0);
                0 < A.strokeCommands.get_length() && A.endStroke();
                A.hasStroke && A.context.isPointInStroke(b, c) && (k = !0);
                d.destroy();
                a.__canvas = f;
                a.__context = g;
                A.graphics = null;
                return k
            }
            ;
            A.normalizeUVT = function(a, b) {
                null == b && (b = !1);
                for (var c = -Infinity, d, f = a.get_length(), g = 1, k = f + 1; g < k; )
                    d = g++,
                    b && 0 == d % 3 || (d = a.get(d - 1),
                    c < d && (c = d));
                if (!b)
                    return {
                        max: c,
                        uvt: a
                    };
                var q = ua.toFloatVector(null);
                g = 1;
                for (k = f + 1; g < k; )
                    d = g++,
                    b && 0 == d % 3 || q.push(a.get(d - 1));
                return {
                    max: c,
                    uvt: q
                }
            }
            ;
            A.playCommands = function(a, b) {
                null == b && (b = !1);
                A.bounds = A.graphics.__bounds;
                var c = A.bounds.x
                  , d = A.bounds.y
                  , f = 0
                  , g = 0
                  , k = !1
                  , q = 0
                  , p = 0
                  , l = !1;
                A.windingRule = "evenodd";
                A.setSmoothing(!0);
                var h = !1, n = new ve(a), u, w, r, m = null, C = null, x = 0, z = a.types;
                a: for (; x < z.length; ) {
                    var K = z[x];
                    ++x;
                    switch (K._hx_index) {
                    case 0:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.BEGIN_BITMAP_FILL;
                        var I = n;
                        A.bitmapFill = I.buffer.o[I.oPos];
                        if (I.buffer.o[I.oPos].readable)
                            A.context.fillStyle = A.createBitmapFill(I.buffer.o[I.oPos], I.buffer.b[I.bPos], I.buffer.b[I.bPos + 1]);
                        else {
                            var N = P.hex(0, 6);
                            A.context.fillStyle = "#" + N
                        }
                        A.hasFill = !0;
                        null != I.buffer.o[I.oPos + 1] ? (A.pendingMatrix = I.buffer.o[I.oPos + 1],
                        A.inversePendingMatrix = I.buffer.o[I.oPos + 1].clone(),
                        A.inversePendingMatrix.invert()) : (A.pendingMatrix = null,
                        A.inversePendingMatrix = null);
                        break;
                    case 1:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.BEGIN_FILL;
                        var t = n;
                        if (.005 > t.buffer.f[t.fPos])
                            A.hasFill = !1;
                        else {
                            if (1 == t.buffer.f[t.fPos]) {
                                var v = P.hex(t.buffer.i[t.iPos] & 16777215, 6);
                                A.context.fillStyle = "#" + v
                            } else {
                                var D = (t.buffer.i[t.iPos] & 16711680) >>> 16;
                                var E = (t.buffer.i[t.iPos] & 65280) >>> 8;
                                var wa = t.buffer.i[t.iPos] & 255;
                                A.context.fillStyle = "rgba(" + D + ", " + E + ", " + wa + ", " + t.buffer.f[t.fPos] + ")"
                            }
                            A.bitmapFill = null;
                            A.setSmoothing(!0);
                            A.hasFill = !0
                        }
                        break;
                    case 2:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.BEGIN_GRADIENT_FILL;
                        var J = n;
                        A.context.fillStyle = A.createGradientPattern(J.buffer.o[J.oPos], J.buffer.ii[J.iiPos], J.buffer.ff[J.ffPos], J.buffer.ii[J.iiPos + 1], J.buffer.o[J.oPos + 1], J.buffer.o[J.oPos + 2], J.buffer.o[J.oPos + 3], J.buffer.f[J.fPos]);
                        A.bitmapFill = null;
                        A.setSmoothing(!0);
                        A.hasFill = !0;
                        break;
                    case 3:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.BEGIN_SHADER_FILL;
                        var G = n
                          , pb = G.buffer.o[G.oPos];
                        if (0 < pb.inputCount) {
                            A.bitmapFill = pb.inputs[0];
                            if (A.bitmapFill.readable)
                                A.context.fillStyle = A.createBitmapFill(A.bitmapFill, 0 != pb.inputWrap[0], 5 != pb.inputFilter[0]);
                            else {
                                var ob = P.hex(0, 6);
                                A.context.fillStyle = "#" + ob
                            }
                            A.hasFill = !0;
                            A.pendingMatrix = null;
                            A.inversePendingMatrix = null
                        }
                        break;
                    case 4:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.CUBIC_CURVE_TO;
                        var M = n;
                        h = !0;
                        A.context.bezierCurveTo(M.buffer.f[M.fPos] - c, M.buffer.f[M.fPos + 1] - d, M.buffer.f[M.fPos + 2] - c, M.buffer.f[M.fPos + 3] - d, M.buffer.f[M.fPos + 4] - c, M.buffer.f[M.fPos + 5] - d);
                        f = M.buffer.f[M.fPos + 4];
                        g = M.buffer.f[M.fPos + 5];
                        break;
                    case 5:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.CURVE_TO;
                        var y = n;
                        h = !0;
                        A.context.quadraticCurveTo(y.buffer.f[y.fPos] - c, y.buffer.f[y.fPos + 1] - d, y.buffer.f[y.fPos + 2] - c, y.buffer.f[y.fPos + 3] - d);
                        f = y.buffer.f[y.fPos + 2];
                        g = y.buffer.f[y.fPos + 3];
                        break;
                    case 6:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.DRAW_CIRCLE;
                        var va = n;
                        h = !0;
                        A.context.moveTo(va.buffer.f[va.fPos] - c + va.buffer.f[va.fPos + 2], va.buffer.f[va.fPos + 1] - d);
                        A.context.arc(va.buffer.f[va.fPos] - c, va.buffer.f[va.fPos + 1] - d, va.buffer.f[va.fPos + 2], 0, 2 * Math.PI, !0);
                        break;
                    case 7:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.DRAW_ELLIPSE;
                        var ma = n;
                        h = !0;
                        var da = ma.buffer.f[ma.fPos];
                        var F = ma.buffer.f[ma.fPos + 1];
                        var Ya = ma.buffer.f[ma.fPos + 2];
                        var ab = ma.buffer.f[ma.fPos + 3];
                        da -= c;
                        F -= d;
                        var L = Ya / 2 * .5522848;
                        var H = ab / 2 * .5522848;
                        var Q = da + Ya;
                        var V = F + ab;
                        var Gb = da + Ya / 2;
                        var R = F + ab / 2;
                        A.context.moveTo(da, R);
                        A.context.bezierCurveTo(da, R - H, Gb - L, F, Gb, F);
                        A.context.bezierCurveTo(Gb + L, F, Q, R - H, Q, R);
                        A.context.bezierCurveTo(Q, R + H, Gb + L, V, Gb, V);
                        A.context.bezierCurveTo(Gb - L, V, da, R + H, da, R);
                        break;
                    case 8:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.DRAW_QUADS;
                        var ca = n
                          , X = ca.buffer.o[ca.oPos]
                          , la = ca.buffer.o[ca.oPos + 1]
                          , eb = ca.buffer.o[ca.oPos + 2]
                          , W = null != la
                          , aa = !1
                          , ba = !1
                          , T = W ? la.get_length() : Math.floor(X.get_length() / 4);
                        if (0 == T)
                            return;
                        null != eb && (eb.get_length() >= 6 * T ? ba = aa = !0 : eb.get_length() >= 4 * T ? aa = !0 : eb.get_length() >= 2 * T && (ba = !0));
                        var U = oa.__pool.get()
                          , Z = ta.__pool.get()
                          , O = A.graphics.__renderTransform;
                        A.context.save();
                        for (var za = 0, Zg = T; za < Zg; ) {
                            var Nc = za++;
                            var ye = W ? 4 * la.get(Nc) : 4 * Nc;
                            if (!(0 > ye || (U.setTo(X.get(ye), X.get(ye + 1), X.get(ye + 2), X.get(ye + 3)),
                            0 >= U.width || 0 >= U.height))) {
                                if (aa && ba) {
                                    var lc = 6 * Nc;
                                    Z.setTo(eb.get(lc), eb.get(lc + 1), eb.get(lc + 2), eb.get(lc + 3), eb.get(lc + 4), eb.get(lc + 5))
                                } else
                                    aa ? (lc = 4 * Nc,
                                    Z.setTo(eb.get(lc), eb.get(lc + 1), eb.get(lc + 2), eb.get(lc + 3), U.x, U.y)) : ba ? (lc = 2 * Nc,
                                    Z.tx = eb.get(lc),
                                    Z.ty = eb.get(lc + 1)) : (Z.tx = U.x,
                                    Z.ty = U.y);
                                Z.tx += f - c;
                                Z.ty += g - d;
                                Z.concat(O);
                                A.context.setTransform(Z.a, Z.b, Z.c, Z.d, Z.tx, Z.ty);
                                null != A.bitmapFill && A.bitmapFill.readable ? A.context.drawImage(A.bitmapFill.image.get_src(), U.x, U.y, U.width, U.height, 0, 0, U.width, U.height) : A.context.fillRect(0, 0, U.width, U.height)
                            }
                        }
                        oa.__pool.release(U);
                        ta.__pool.release(Z);
                        A.context.restore();
                        break;
                    case 9:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.DRAW_RECT;
                        var S = n;
                        var $a = !1;
                        if (null != A.bitmapFill && A.bitmapFill.readable && !A.hitTesting) {
                            var pa = r = w = u = 0;
                            var fa = !0;
                            if (null != A.pendingMatrix)
                                if (0 != A.pendingMatrix.b || 0 != A.pendingMatrix.c)
                                    fa = !1;
                                else {
                                    null == m && (m = B.__pool.get());
                                    null == C && (C = B.__pool.get());
                                    m.setTo(S.buffer.f[S.fPos], S.buffer.f[S.fPos + 1]);
                                    var Ab = A.inversePendingMatrix
                                      , ha = m.x
                                      , ia = m.y;
                                    m.x = ha * Ab.a + ia * Ab.c + Ab.tx;
                                    m.y = ha * Ab.b + ia * Ab.d + Ab.ty;
                                    C.setTo(S.buffer.f[S.fPos] + S.buffer.f[S.fPos + 2], S.buffer.f[S.fPos + 1] + S.buffer.f[S.fPos + 3]);
                                    var ea = A.inversePendingMatrix
                                      , ja = C.x
                                      , qa = C.y;
                                    C.x = ja * ea.a + qa * ea.c + ea.tx;
                                    C.y = ja * ea.b + qa * ea.d + ea.ty;
                                    u = m.y;
                                    pa = m.x;
                                    r = C.y;
                                    w = C.x
                                }
                            else
                                u = S.buffer.f[S.fPos + 1],
                                pa = S.buffer.f[S.fPos],
                                r = S.buffer.f[S.fPos + 1] + S.buffer.f[S.fPos + 3],
                                w = S.buffer.f[S.fPos] + S.buffer.f[S.fPos + 2];
                            fa && 0 <= u && 0 <= pa && w <= A.bitmapFill.width && r <= A.bitmapFill.height && ($a = !0,
                            A.hitTesting || A.context.drawImage(A.bitmapFill.image.get_src(), pa, u, w - pa, r - u, S.buffer.f[S.fPos] - c, S.buffer.f[S.fPos + 1] - d, S.buffer.f[S.fPos + 2], S.buffer.f[S.fPos + 3]))
                        }
                        $a || (h = !0,
                        A.context.rect(S.buffer.f[S.fPos] - c, S.buffer.f[S.fPos + 1] - d, S.buffer.f[S.fPos + 2], S.buffer.f[S.fPos + 3]));
                        break;
                    case 10:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.DRAW_ROUND_RECT;
                        var ka = n;
                        h = !0;
                        A.drawRoundRect(ka.buffer.f[ka.fPos] - c, ka.buffer.f[ka.fPos + 1] - d, ka.buffer.f[ka.fPos + 2], ka.buffer.f[ka.fPos + 3], ka.buffer.f[ka.fPos + 4], ka.buffer.o[ka.oPos]);
                        break;
                    case 12:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.DRAW_TRIANGLES;
                        var na = n
                          , qc = na.buffer.o[na.oPos]
                          , $c = na.buffer.o[na.oPos + 1]
                          , Gc = na.buffer.o[na.oPos + 2]
                          , sa = null
                          , Xb = null == A.bitmapFill;
                        if (Xb && null != Gc)
                            break a;
                        if (!Xb) {
                            if (null == Gc) {
                                Gc = ua.toFloatVector(null);
                                for (var ya = 0, Ba = qc.get_length() / 2 | 0; ya < Ba; ) {
                                    var Ta = ya++;
                                    Gc.push(qc.get(2 * Ta) - c / A.bitmapFill.width);
                                    Gc.push(qc.get(2 * Ta + 1) - d / A.bitmapFill.height)
                                }
                            }
                            var Da = Gc.get_length() != qc.get_length()
                              , Ca = A.normalizeUVT(Gc, Da)
                              , nb = Ca.max;
                            Gc = Ca.uvt;
                            sa = 1 < nb ? A.createTempPatternCanvas(A.bitmapFill, A.bitmapRepeat, A.bounds.width | 0, A.bounds.height | 0) : A.createTempPatternCanvas(A.bitmapFill, A.bitmapRepeat, A.bitmapFill.width, A.bitmapFill.height)
                        }
                        for (var xa = 0, Aa = $c.get_length(), Ea, hb, Ha, gb, Ka, La, jb, Na, Oa, Ia, Ja, Fa, Ra, Jb, Ma, fb, Sa, ib, Ga, Pa, Qa, Ua, Xa, Se, Hc, Sb, Za, bb; xa < Aa; ) {
                            Ea = xa;
                            hb = xa + 1;
                            Ha = xa + 2;
                            gb = 2 * $c.get(Ea);
                            Ka = 2 * $c.get(Ea) + 1;
                            La = 2 * $c.get(hb);
                            jb = 2 * $c.get(hb) + 1;
                            Na = 2 * $c.get(Ha);
                            Oa = 2 * $c.get(Ha) + 1;
                            Ia = qc.get(gb) - c;
                            Ja = qc.get(Ka) - d;
                            Fa = qc.get(La) - c;
                            Ra = qc.get(jb) - d;
                            Jb = qc.get(Na) - c;
                            Ma = qc.get(Oa) - d;
                            switch (na.buffer.o[na.oPos + 3]) {
                            case 0:
                                if (0 > (Fa - Ia) * (Ma - Ja) - (Ra - Ja) * (Jb - Ia)) {
                                    xa += 3;
                                    continue
                                }
                                break;
                            case 2:
                                if (!(0 > (Fa - Ia) * (Ma - Ja) - (Ra - Ja) * (Jb - Ia))) {
                                    xa += 3;
                                    continue
                                }
                            }
                            Xb ? (A.context.beginPath(),
                            A.context.moveTo(Ia, Ja),
                            A.context.lineTo(Fa, Ra),
                            A.context.lineTo(Jb, Ma),
                            A.context.closePath(),
                            A.hitTesting || A.context.fill(A.windingRule),
                            xa += 3) : (fb = Gc.get(gb) * sa.width,
                            ib = Gc.get(La) * sa.width,
                            Pa = Gc.get(Na) * sa.width,
                            Sa = Gc.get(Ka) * sa.height,
                            Ga = Gc.get(jb) * sa.height,
                            Qa = Gc.get(Oa) * sa.height,
                            Ua = fb * (Qa - Ga) - ib * Qa + Pa * Ga + (ib - Pa) * Sa,
                            0 == Ua ? (xa += 3,
                            A.context.restore()) : (A.context.save(),
                            A.context.beginPath(),
                            A.context.moveTo(Ia, Ja),
                            A.context.lineTo(Fa, Ra),
                            A.context.lineTo(Jb, Ma),
                            A.context.closePath(),
                            A.context.clip(),
                            Xa = -(Sa * (Jb - Fa) - Ga * Jb + Qa * Fa + (Ga - Qa) * Ia) / Ua,
                            Se = (Ga * Ma + Sa * (Ra - Ma) - Qa * Ra + (Qa - Ga) * Ja) / Ua,
                            Hc = (fb * (Jb - Fa) - ib * Jb + Pa * Fa + (ib - Pa) * Ia) / Ua,
                            Sb = -(ib * Ma + fb * (Ra - Ma) - Pa * Ra + (Pa - ib) * Ja) / Ua,
                            Za = (fb * (Qa * Fa - Ga * Jb) + Sa * (ib * Jb - Pa * Fa) + (Pa * Ga - ib * Qa) * Ia) / Ua,
                            bb = (fb * (Qa * Ra - Ga * Ma) + Sa * (ib * Ma - Pa * Ra) + (Pa * Ga - ib * Qa) * Ja) / Ua,
                            A.context.transform(Xa, Se, Hc, Sb, Za, bb),
                            A.context.drawImage(sa, 0, 0, sa.width, sa.height),
                            A.context.restore(),
                            xa += 3))
                        }
                        break;
                    case 14:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.LINE_BITMAP_STYLE;
                        var mb = n;
                        b && A.hasStroke && A.closePath(!0);
                        A.context.moveTo(f - c, g - d);
                        if (mb.buffer.o[mb.oPos].readable)
                            A.context.strokeStyle = A.createBitmapFill(mb.buffer.o[mb.oPos], mb.buffer.b[mb.bPos], mb.buffer.b[mb.bPos + 1]);
                        else {
                            var db = P.hex(0, 6);
                            A.context.strokeStyle = "#" + db
                        }
                        A.hasStroke = !0;
                        break;
                    case 15:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.LINE_GRADIENT_STYLE;
                        var Va = n;
                        b && A.hasStroke && A.closePath(!0);
                        A.context.moveTo(f - c, g - d);
                        A.context.strokeStyle = A.createGradientPattern(Va.buffer.o[Va.oPos], Va.buffer.ii[Va.iiPos], Va.buffer.ff[Va.ffPos], Va.buffer.ii[Va.iiPos + 1], Va.buffer.o[Va.oPos + 1], Va.buffer.o[Va.oPos + 2], Va.buffer.o[Va.oPos + 3], Va.buffer.f[Va.fPos]);
                        A.setSmoothing(!0);
                        A.hasStroke = !0;
                        break;
                    case 16:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.LINE_STYLE;
                        var ra = n;
                        b && A.hasStroke && A.closePath(!0);
                        A.context.moveTo(f - c, g - d);
                        if (null == ra.buffer.o[ra.oPos])
                            A.hasStroke = !1;
                        else {
                            A.context.lineWidth = 0 < ra.buffer.o[ra.oPos] ? ra.buffer.o[ra.oPos] : 1;
                            var ge = null == ra.buffer.o[ra.oPos + 3] ? "round" : (null == ra.buffer.o[ra.oPos + 3] ? "null" : Jl.toString(ra.buffer.o[ra.oPos + 3])).toLowerCase();
                            A.context.lineJoin = ge;
                            var kb = null == ra.buffer.o[ra.oPos + 2] ? "round" : 0 == ra.buffer.o[ra.oPos + 2] ? "butt" : (null == ra.buffer.o[ra.oPos + 2] ? "null" : Il.toString(ra.buffer.o[ra.oPos + 2])).toLowerCase();
                            A.context.lineCap = kb;
                            A.context.miterLimit = ra.buffer.f[ra.fPos + 1];
                            if (1 == ra.buffer.f[ra.fPos]) {
                                var lb = P.hex(ra.buffer.i[ra.iPos] & 16777215, 6);
                                A.context.strokeStyle = "#" + lb
                            } else
                                D = (ra.buffer.i[ra.iPos] & 16711680) >>> 16,
                                E = (ra.buffer.i[ra.iPos] & 65280) >>> 8,
                                wa = ra.buffer.i[ra.iPos] & 255,
                                A.context.strokeStyle = "rgba(" + D + ", " + E + ", " + wa + ", " + ra.buffer.f[ra.fPos] + ")";
                            A.setSmoothing(!0);
                            A.hasStroke = !0
                        }
                        break;
                    case 17:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.LINE_TO;
                        var cb = n;
                        h = !0;
                        A.context.lineTo(cb.buffer.f[cb.fPos] - c, cb.buffer.f[cb.fPos + 1] - d);
                        f = cb.buffer.f[cb.fPos];
                        g = cb.buffer.f[cb.fPos + 1];
                        f == q && g == p && (k = !0);
                        break;
                    case 18:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = Y.MOVE_TO;
                        var Wa = n;
                        A.context.moveTo(Wa.buffer.f[Wa.fPos] - c, Wa.buffer.f[Wa.fPos + 1] - d);
                        f = Wa.buffer.f[Wa.fPos];
                        g = Wa.buffer.f[Wa.fPos + 1];
                        l && Wa.buffer.f[Wa.fPos] != q && Wa.buffer.f[Wa.fPos + 1] != p && (k = !0);
                        q = Wa.buffer.f[Wa.fPos];
                        p = Wa.buffer.f[Wa.fPos + 1];
                        l = !0;
                        break;
                    case 21:
                        A.windingRule = "evenodd";
                        break;
                    case 22:
                        A.windingRule = "nonzero";
                        break;
                    default:
                        switch (n.prev._hx_index) {
                        case 0:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 1:
                            n.iPos += 1;
                            n.fPos += 1;
                            break;
                        case 2:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 3:
                            n.oPos += 1;
                            break;
                        case 4:
                            n.fPos += 6;
                            break;
                        case 5:
                            n.fPos += 4;
                            break;
                        case 6:
                            n.fPos += 3;
                            break;
                        case 7:
                            n.fPos += 4;
                            break;
                        case 8:
                            n.oPos += 3;
                            break;
                        case 9:
                            n.fPos += 4;
                            break;
                        case 10:
                            n.fPos += 5;
                            n.oPos += 1;
                            break;
                        case 12:
                            n.oPos += 4;
                            break;
                        case 14:
                            n.oPos += 2;
                            n.bPos += 2;
                            break;
                        case 15:
                            n.oPos += 4;
                            n.iiPos += 2;
                            n.ffPos += 1;
                            n.fPos += 1;
                            break;
                        case 16:
                            n.oPos += 4;
                            n.iPos += 1;
                            n.fPos += 2;
                            n.bPos += 1;
                            break;
                        case 17:
                            n.fPos += 2;
                            break;
                        case 18:
                            n.fPos += 2;
                            break;
                        case 19:
                            n.oPos += 1;
                            break;
                        case 20:
                            n.oPos += 1
                        }
                        n.prev = K
                    }
                }
                null != m && B.__pool.release(m);
                null != C && B.__pool.release(C);
                n.destroy();
                if (h) {
                    if (b && A.hasStroke) {
                        if (A.hasFill) {
                            if (f != q || g != p)
                                A.context.lineTo(q - c, p - d),
                                k = !0;
                            k && A.closePath(!0)
                        } else
                            k && f == q && g == p && A.closePath(!0);
                        A.hitTesting || A.context.stroke()
                    }
                    b || !A.hasFill && null == A.bitmapFill || (A.context.translate(-A.bounds.x, -A.bounds.y),
                    null != A.pendingMatrix ? (A.context.transform(A.pendingMatrix.a, A.pendingMatrix.b, A.pendingMatrix.c, A.pendingMatrix.d, A.pendingMatrix.tx, A.pendingMatrix.ty),
                    A.hitTesting || A.context.fill(A.windingRule),
                    A.context.transform(A.inversePendingMatrix.a, A.inversePendingMatrix.b, A.inversePendingMatrix.c, A.inversePendingMatrix.d, A.inversePendingMatrix.tx, A.inversePendingMatrix.ty)) : A.hitTesting || A.context.fill(A.windingRule),
                    A.context.translate(A.bounds.x, A.bounds.y),
                    A.context.closePath())
                }
            }
            ;
            A.render = function(a, b) {
                a.__update(b.__worldTransform, b.__pixelRatio);
                if (a.__softwareDirty) {
                    A.hitTesting = !1;
                    A.graphics = a;
                    A.allowSmoothing = b.__allowSmoothing;
                    A.worldAlpha = b.__getAlpha(a.__owner.__worldAlpha);
                    A.bounds = a.__bounds;
                    var c = a.__width
                      , d = a.__height;
                    if (!a.__visible || 0 == a.__commands.get_length() || null == A.bounds || 1 > c || 1 > d)
                        a.__canvas = null,
                        a.__context = null,
                        a.__bitmap = null;
                    else {
                        null == a.__canvas && (a.__canvas = window.document.createElement("canvas"),
                        a.__context = a.__canvas.getContext("2d"));
                        A.context = a.__context;
                        var f = a.__renderTransform
                          , g = a.__canvas
                          , k = b.__pixelRatio
                          , q = c * k | 0
                          , p = d * k | 0;
                        b.__setBlendModeContext(A.context, 10);
                        b.__isDOM ? (g.width == q && g.height == p ? A.context.clearRect(0, 0, q, p) : (g.width = q,
                        g.height = p,
                        g.style.width = c + "px",
                        g.style.height = d + "px"),
                        c = a.__renderTransform,
                        A.context.setTransform(c.a * k, c.b * k, c.c * k, c.d * k, c.tx * k, c.ty * k)) : (g.width == q && g.height == p ? (A.context.closePath(),
                        A.context.setTransform(1, 0, 0, 1, 0, 0),
                        A.context.clearRect(0, 0, q, p)) : (g.width = c,
                        g.height = d),
                        A.context.setTransform(f.a, f.b, f.c, f.d, f.tx, f.ty));
                        A.fillCommands.clear();
                        A.strokeCommands.clear();
                        A.hasFill = !1;
                        A.hasStroke = !1;
                        A.bitmapFill = null;
                        k = A.bitmapRepeat = !1;
                        d = c = 0;
                        A.windingRule = "evenodd";
                        f = new ve(a.__commands);
                        g = 0;
                        for (q = a.__commands.types; g < q.length; )
                            switch (p = q[g],
                            ++g,
                            p._hx_index) {
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                                A.endFill();
                                A.endStroke();
                                if (p == Y.BEGIN_BITMAP_FILL) {
                                    switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                    }
                                    f.prev = Y.BEGIN_BITMAP_FILL;
                                    p = f;
                                    A.fillCommands.beginBitmapFill(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.b[p.bPos], p.buffer.b[p.bPos + 1]);
                                    A.strokeCommands.beginBitmapFill(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.b[p.bPos], p.buffer.b[p.bPos + 1])
                                } else if (p == Y.BEGIN_GRADIENT_FILL) {
                                    switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                    }
                                    f.prev = Y.BEGIN_GRADIENT_FILL;
                                    p = f;
                                    A.fillCommands.beginGradientFill(p.buffer.o[p.oPos], p.buffer.ii[p.iiPos], p.buffer.ff[p.ffPos], p.buffer.ii[p.iiPos + 1], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos]);
                                    A.strokeCommands.beginGradientFill(p.buffer.o[p.oPos], p.buffer.ii[p.iiPos], p.buffer.ff[p.ffPos], p.buffer.ii[p.iiPos + 1], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos])
                                } else if (p == Y.BEGIN_SHADER_FILL) {
                                    switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                    }
                                    f.prev = Y.BEGIN_SHADER_FILL;
                                    p = f;
                                    A.fillCommands.beginShaderFill(p.buffer.o[p.oPos]);
                                    A.strokeCommands.beginShaderFill(p.buffer.o[p.oPos])
                                } else {
                                    switch (f.prev._hx_index) {
                                    case 0:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 1:
                                        f.iPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 2:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 3:
                                        f.oPos += 1;
                                        break;
                                    case 4:
                                        f.fPos += 6;
                                        break;
                                    case 5:
                                        f.fPos += 4;
                                        break;
                                    case 6:
                                        f.fPos += 3;
                                        break;
                                    case 7:
                                        f.fPos += 4;
                                        break;
                                    case 8:
                                        f.oPos += 3;
                                        break;
                                    case 9:
                                        f.fPos += 4;
                                        break;
                                    case 10:
                                        f.fPos += 5;
                                        f.oPos += 1;
                                        break;
                                    case 12:
                                        f.oPos += 4;
                                        break;
                                    case 14:
                                        f.oPos += 2;
                                        f.bPos += 2;
                                        break;
                                    case 15:
                                        f.oPos += 4;
                                        f.iiPos += 2;
                                        f.ffPos += 1;
                                        f.fPos += 1;
                                        break;
                                    case 16:
                                        f.oPos += 4;
                                        f.iPos += 1;
                                        f.fPos += 2;
                                        f.bPos += 1;
                                        break;
                                    case 17:
                                        f.fPos += 2;
                                        break;
                                    case 18:
                                        f.fPos += 2;
                                        break;
                                    case 19:
                                        f.oPos += 1;
                                        break;
                                    case 20:
                                        f.oPos += 1
                                    }
                                    f.prev = Y.BEGIN_FILL;
                                    p = f;
                                    A.fillCommands.beginFill(p.buffer.i[p.iPos], p.buffer.f[p.fPos]);
                                    A.strokeCommands.beginFill(p.buffer.i[p.iPos], p.buffer.f[p.fPos])
                                }
                                break;
                            case 4:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.CUBIC_CURVE_TO;
                                p = f;
                                A.fillCommands.cubicCurveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.f[p.fPos + 5]);
                                k ? A.strokeCommands.cubicCurveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.f[p.fPos + 5]) : (c = p.buffer.f[p.fPos + 4],
                                d = p.buffer.f[p.fPos + 5]);
                                break;
                            case 5:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.CURVE_TO;
                                p = f;
                                A.fillCommands.curveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                                k ? A.strokeCommands.curveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]) : (c = p.buffer.f[p.fPos + 2],
                                d = p.buffer.f[p.fPos + 3]);
                                break;
                            case 6:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.DRAW_CIRCLE;
                                p = f;
                                A.fillCommands.drawCircle(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2]);
                                k && A.strokeCommands.drawCircle(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2]);
                                break;
                            case 7:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.DRAW_ELLIPSE;
                                p = f;
                                A.fillCommands.drawEllipse(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                                k && A.strokeCommands.drawEllipse(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                                break;
                            case 8:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.DRAW_QUADS;
                                p = f;
                                A.fillCommands.drawQuads(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2]);
                                break;
                            case 9:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.DRAW_RECT;
                                p = f;
                                A.fillCommands.drawRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                                k && A.strokeCommands.drawRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3]);
                                break;
                            case 10:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.DRAW_ROUND_RECT;
                                p = f;
                                A.fillCommands.drawRoundRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.o[p.oPos]);
                                k && A.strokeCommands.drawRoundRect(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1], p.buffer.f[p.fPos + 2], p.buffer.f[p.fPos + 3], p.buffer.f[p.fPos + 4], p.buffer.o[p.oPos]);
                                break;
                            case 12:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.DRAW_TRIANGLES;
                                p = f;
                                A.fillCommands.drawTriangles(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3]);
                                break;
                            case 13:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.END_FILL;
                                A.endFill();
                                A.endStroke();
                                k = A.hasFill = !1;
                                A.bitmapFill = null;
                                d = c = 0;
                                break;
                            case 14:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.LINE_BITMAP_STYLE;
                                p = f;
                                k || 0 == c && 0 == d || (A.strokeCommands.moveTo(c, d),
                                d = c = 0);
                                k = !0;
                                A.strokeCommands.lineBitmapStyle(p.buffer.o[p.oPos], p.buffer.o[p.oPos + 1], p.buffer.b[p.bPos], p.buffer.b[p.bPos + 1]);
                                break;
                            case 15:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.LINE_GRADIENT_STYLE;
                                p = f;
                                k || 0 == c && 0 == d || (A.strokeCommands.moveTo(c, d),
                                d = c = 0);
                                k = !0;
                                A.strokeCommands.lineGradientStyle(p.buffer.o[p.oPos], p.buffer.ii[p.iiPos], p.buffer.ff[p.ffPos], p.buffer.ii[p.iiPos + 1], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos]);
                                break;
                            case 16:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.LINE_STYLE;
                                p = f;
                                k || null == p.buffer.o[p.oPos] || 0 == c && 0 == d || (A.strokeCommands.moveTo(c, d),
                                d = c = 0);
                                k = null != p.buffer.o[p.oPos];
                                A.strokeCommands.lineStyle(p.buffer.o[p.oPos], p.buffer.i[p.iPos], p.buffer.f[p.fPos], p.buffer.b[p.bPos], p.buffer.o[p.oPos + 1], p.buffer.o[p.oPos + 2], p.buffer.o[p.oPos + 3], p.buffer.f[p.fPos + 1]);
                                break;
                            case 17:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.LINE_TO;
                                p = f;
                                A.fillCommands.lineTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]);
                                k ? A.strokeCommands.lineTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]) : (c = p.buffer.f[p.fPos],
                                d = p.buffer.f[p.fPos + 1]);
                                break;
                            case 18:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.MOVE_TO;
                                p = f;
                                A.fillCommands.moveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]);
                                k ? A.strokeCommands.moveTo(p.buffer.f[p.fPos], p.buffer.f[p.fPos + 1]) : (c = p.buffer.f[p.fPos],
                                d = p.buffer.f[p.fPos + 1]);
                                break;
                            case 19:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.OVERRIDE_BLEND_MODE;
                                p = f;
                                b.__setBlendModeContext(A.context, p.buffer.o[p.oPos]);
                                break;
                            case 21:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.WINDING_EVEN_ODD;
                                A.fillCommands.windingEvenOdd();
                                A.windingRule = "evenodd";
                                break;
                            case 22:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = Y.WINDING_NON_ZERO;
                                A.fillCommands.windingNonZero();
                                A.windingRule = "nonzero";
                                break;
                            default:
                                switch (f.prev._hx_index) {
                                case 0:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 1:
                                    f.iPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 2:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 3:
                                    f.oPos += 1;
                                    break;
                                case 4:
                                    f.fPos += 6;
                                    break;
                                case 5:
                                    f.fPos += 4;
                                    break;
                                case 6:
                                    f.fPos += 3;
                                    break;
                                case 7:
                                    f.fPos += 4;
                                    break;
                                case 8:
                                    f.oPos += 3;
                                    break;
                                case 9:
                                    f.fPos += 4;
                                    break;
                                case 10:
                                    f.fPos += 5;
                                    f.oPos += 1;
                                    break;
                                case 12:
                                    f.oPos += 4;
                                    break;
                                case 14:
                                    f.oPos += 2;
                                    f.bPos += 2;
                                    break;
                                case 15:
                                    f.oPos += 4;
                                    f.iiPos += 2;
                                    f.ffPos += 1;
                                    f.fPos += 1;
                                    break;
                                case 16:
                                    f.oPos += 4;
                                    f.iPos += 1;
                                    f.fPos += 2;
                                    f.bPos += 1;
                                    break;
                                case 17:
                                    f.fPos += 2;
                                    break;
                                case 18:
                                    f.fPos += 2;
                                    break;
                                case 19:
                                    f.oPos += 1;
                                    break;
                                case 20:
                                    f.oPos += 1
                                }
                                f.prev = p
                            }
                        0 < A.fillCommands.get_length() && A.endFill();
                        0 < A.strokeCommands.get_length() && A.endStroke();
                        f.destroy();
                        a.__bitmap = Yb.fromCanvas(a.__canvas)
                    }
                    a.__softwareDirty = !1;
                    a.set___dirty(!1);
                    A.graphics = null
                }
            }
            ;
            A.renderMask = function(a, b) {
                if (0 != a.__commands.get_length()) {
                    A.context = b.context;
                    b = new ve(a.__commands);
                    var c = 0;
                    for (a = a.__commands.types; c < a.length; ) {
                        var d = a[c];
                        ++c;
                        switch (d._hx_index) {
                        case 4:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.CUBIC_CURVE_TO;
                            d = b;
                            A.context.bezierCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0, d.buffer.f[d.fPos + 4] - 0, d.buffer.f[d.fPos + 5] - 0);
                            break;
                        case 5:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.CURVE_TO;
                            d = b;
                            A.context.quadraticCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0);
                            break;
                        case 6:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_CIRCLE;
                            d = b;
                            A.context.arc(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], 0, 2 * Math.PI, !0);
                            break;
                        case 7:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_ELLIPSE;
                            var f = b;
                            d = f.buffer.f[f.fPos];
                            var g = f.buffer.f[f.fPos + 1];
                            var k = f.buffer.f[f.fPos + 2];
                            var q = f.buffer.f[f.fPos + 3];
                            d -= 0;
                            g -= 0;
                            f = k / 2 * .5522848;
                            var p = q / 2 * .5522848;
                            var l = d + k;
                            var h = g + q;
                            k = d + k / 2;
                            q = g + q / 2;
                            A.context.moveTo(d, q);
                            A.context.bezierCurveTo(d, q - p, k - f, g, k, g);
                            A.context.bezierCurveTo(k + f, g, l, q - p, l, q);
                            A.context.bezierCurveTo(l, q + p, k + f, h, k, h);
                            A.context.bezierCurveTo(k - f, h, d, q + p, d, q);
                            break;
                        case 9:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_RECT;
                            d = b;
                            A.context.beginPath();
                            A.context.rect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                            A.context.closePath();
                            break;
                        case 10:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.DRAW_ROUND_RECT;
                            d = b;
                            A.drawRoundRect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.o[d.oPos]);
                            break;
                        case 17:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.LINE_TO;
                            d = b;
                            A.context.lineTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                            break;
                        case 18:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = Y.MOVE_TO;
                            d = b;
                            A.context.moveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                            break;
                        default:
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = d
                        }
                    }
                    b.destroy()
                }
            }
            ;
            A.setSmoothing = function(a) {
                A.allowSmoothing || (a = !1);
                A.context.imageSmoothingEnabled != a && (A.context.imageSmoothingEnabled = a)
            }
            ;
            var bj = function() {};
            h["openfl.display._internal.CanvasSimpleButton"] = bj;
            bj.__name__ = "openfl.display._internal.CanvasSimpleButton";
            bj.renderDrawable = function(a, b) {
                !a.__renderable || 0 >= a.__worldAlpha || null == a.__currentState || (b.__pushMaskObject(a),
                b.__renderDrawable(a.__currentState),
                b.__popMaskObject(a),
                b.__renderEvent(a))
            }
            ;
            bj.renderDrawableMask = function(a, b) {
                b.__renderDrawableMask(a.__currentState)
            }
            ;
            var ba = function() {};
            h["openfl.display._internal.CanvasTextField"] = ba;
            ba.__name__ = "openfl.display._internal.CanvasTextField";
            ba.renderDrawable = function(a, b) {
                b.__isDOM && !a.__renderedOnCanvasWhileOnDOM && (a.__renderedOnCanvasWhileOnDOM = !0,
                1 == a.get_type() && a.replaceText(0, a.__text.length, a.__text),
                a.__isHTML && a.__updateText(Oa.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges)),
                a.__dirty = !0,
                a.__layoutDirty = !0,
                a.__renderDirty || (a.__renderDirty = !0,
                a.__setParentRenderDirty()));
                if (null == a.get_mask() || 0 < a.get_mask().get_width() && 0 < a.get_mask().get_height())
                    if (b.__updateCacheBitmap(a, a.__dirty),
                    null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                        var c = a.__textEngine
                          , d = !(c.background || c.border)
                          , f = d ? c.textBounds : c.bounds
                          , g = a.__graphics
                          , k = 0;
                        if (a.__dirty) {
                            a.__updateLayout();
                            null == g.__bounds && (g.__bounds = new oa);
                            if (0 == a.get_text().length) {
                                var q = c.bounds.width - 4
                                  , p = a.get_defaultTextFormat().align;
                                k = 3 == p ? 0 : 4 == p ? q : q / 2;
                                switch (p) {
                                case 0:
                                    k += a.get_defaultTextFormat().leftMargin / 2;
                                    k -= a.get_defaultTextFormat().rightMargin / 2;
                                    k += a.get_defaultTextFormat().indent / 2;
                                    k += a.get_defaultTextFormat().blockIndent / 2;
                                    break;
                                case 2:
                                    k += a.get_defaultTextFormat().leftMargin;
                                    k += a.get_defaultTextFormat().indent;
                                    k += a.get_defaultTextFormat().blockIndent;
                                    break;
                                case 3:
                                    k += a.get_defaultTextFormat().leftMargin;
                                    k += a.get_defaultTextFormat().indent;
                                    k += a.get_defaultTextFormat().blockIndent;
                                    break;
                                case 4:
                                    k -= a.get_defaultTextFormat().rightMargin
                                }
                                d && (f.y = c.bounds.y,
                                f.x = k)
                            }
                            g.__bounds.copyFrom(f)
                        }
                        p = b.__pixelRatio;
                        g.__update(b.__worldTransform, p);
                        if (a.__dirty || g.__softwareDirty) {
                            q = Math.round(g.__width * p);
                            var l = Math.round(g.__height * p);
                            if (!(null != c.text && "" != c.text || c.background || c.border || c.__hasFocus || 1 == c.type && c.selectable) || (0 >= c.width || 0 >= c.height) && 2 != c.autoSize)
                                a.__graphics.__canvas = null,
                                a.__graphics.__context = null,
                                a.__graphics.__bitmap = null,
                                a.__graphics.__softwareDirty = !1,
                                a.__graphics.set___dirty(!1),
                                a.__dirty = !1;
                            else {
                                null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"),
                                a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                                ba.context = g.__context;
                                g.__canvas.width = q;
                                g.__canvas.height = l;
                                b.__isDOM && (g.__canvas.style.width = Math.round(q / p) + "px",
                                g.__canvas.style.height = Math.round(l / p) + "px");
                                var h = ta.__pool.get();
                                h.scale(p, p);
                                h.concat(g.__renderTransform);
                                ba.context.setTransform(h.a, h.b, h.c, h.d, h.tx, h.ty);
                                ta.__pool.release(h);
                                null == ba.clearRect && (ba.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                                ba.clearRect && ba.context.clearRect(0, 0, g.__canvas.width, g.__canvas.height);
                                if (null != c.text && "" != c.text || c.__hasFocus) {
                                    q = c.text;
                                    g.__context.imageSmoothingEnabled = !b.__allowSmoothing || 0 == c.antiAliasType && 400 == c.sharpness ? !1 : !0;
                                    if (c.border || c.background) {
                                        ba.context.rect(.5, .5, f.width - 1, f.height - 1);
                                        if (c.background) {
                                            var n = P.hex(c.backgroundColor & 16777215, 6);
                                            ba.context.fillStyle = "#" + n;
                                            ba.context.fill()
                                        }
                                        c.border && (ba.context.lineWidth = 1,
                                        n = P.hex(c.borderColor & 16777215, 6),
                                        ba.context.strokeStyle = "#" + n,
                                        ba.context.stroke())
                                    }
                                    ba.context.textBaseline = "alphabetic";
                                    ba.context.textAlign = "start";
                                    l = -a.get_scrollH();
                                    var u = d = 0;
                                    for (n = a.get_scrollV() - 1; u < n; ) {
                                        var w = u++;
                                        d -= c.lineHeights.get(w)
                                    }
                                    var r;
                                    for (k = c.layoutGroups.iterator(); k.hasNext(); ) {
                                        var m = k.next();
                                        if (!(m.lineIndex < a.get_scrollV() - 1)) {
                                            if (m.lineIndex > c.get_bottomScrollV() - 1)
                                                break;
                                            h = "#" + P.hex(m.format.color & 16777215, 6);
                                            ba.context.font = Eb.getFont(m.format);
                                            ba.context.fillStyle = h;
                                            ba.context.fillText(q.substring(m.startIndex, m.endIndex), m.offsetX + l - f.x, m.offsetY + m.ascent + d - f.y);
                                            if (-1 < a.__caretIndex && c.selectable)
                                                if (a.__selectionIndex == a.__caretIndex) {
                                                    if (a.__showCursor && m.startIndex <= a.__caretIndex && m.endIndex >= a.__caretIndex) {
                                                        u = r = 0;
                                                        for (n = a.__caretIndex - m.startIndex; u < n; ) {
                                                            w = u++;
                                                            if (m.positions.length <= w)
                                                                break;
                                                            r += m.positions[w]
                                                        }
                                                        u = 0;
                                                        n = a.get_scrollV();
                                                        for (w = m.lineIndex + 1; n < w; ) {
                                                            var C = n++;
                                                            u += c.lineHeights.get(C - 1)
                                                        }
                                                        ba.context.beginPath();
                                                        n = P.hex(m.format.color & 16777215, 6);
                                                        ba.context.strokeStyle = "#" + n;
                                                        ba.context.moveTo(m.offsetX + r - a.get_scrollH() - f.x, u + 2 - f.y);
                                                        ba.context.lineWidth = 1;
                                                        ba.context.lineTo(m.offsetX + r - a.get_scrollH() - f.x, u + Eb.getFormatHeight(a.get_defaultTextFormat()) - 1 - f.y);
                                                        ba.context.stroke();
                                                        ba.context.closePath()
                                                    }
                                                } else if (m.startIndex <= a.__caretIndex && m.endIndex >= a.__caretIndex || m.startIndex <= a.__selectionIndex && m.endIndex >= a.__selectionIndex || m.startIndex > a.__caretIndex && m.endIndex < a.__selectionIndex || m.startIndex > a.__selectionIndex && m.endIndex < a.__caretIndex)
                                                    r = Math.min(a.__selectionIndex, a.__caretIndex) | 0,
                                                    u = Math.max(a.__selectionIndex, a.__caretIndex) | 0,
                                                    m.startIndex > r && (r = m.startIndex),
                                                    m.endIndex < u && (u = m.endIndex),
                                                    w = a.getCharBoundaries(r),
                                                    u >= m.endIndex ? (n = a.getCharBoundaries(m.endIndex - 1),
                                                    null != n && (n.x += n.width + 2)) : n = a.getCharBoundaries(u),
                                                    null != w && null != n && (ba.context.fillStyle = "#000000",
                                                    ba.context.fillRect(w.x + l - f.x, w.y + d, n.x - w.x, m.height),
                                                    ba.context.fillStyle = "#FFFFFF",
                                                    ba.context.fillText(q.substring(r, u), l + w.x - f.x, m.offsetY + m.ascent + d));
                                            m.format.underline && (ba.context.beginPath(),
                                            ba.context.strokeStyle = h,
                                            ba.context.lineWidth = 1,
                                            h = m.offsetX + l - f.x,
                                            r = Math.ceil(m.offsetY + d + m.ascent - f.y) + Math.floor(.185 * m.ascent) + .5,
                                            ba.context.moveTo(h, r),
                                            ba.context.lineTo(h + m.width, r),
                                            ba.context.stroke(),
                                            ba.context.closePath())
                                        }
                                    }
                                } else {
                                    if (c.border || c.background)
                                        c.border ? ba.context.rect(.5, .5, f.width - 1, f.height - 1) : ba.context.rect(0, 0, f.width, f.height),
                                        c.background && (n = P.hex(c.backgroundColor & 16777215, 6),
                                        ba.context.fillStyle = "#" + n,
                                        ba.context.fill()),
                                        c.border && (ba.context.lineWidth = 1,
                                        ba.context.lineCap = "square",
                                        n = P.hex(c.borderColor & 16777215, 6),
                                        ba.context.strokeStyle = "#" + n,
                                        ba.context.stroke());
                                    if (-1 < a.__caretIndex && c.selectable && a.__showCursor) {
                                        l = -a.get_scrollH() + (d ? 0 : k);
                                        u = d = 0;
                                        for (n = a.get_scrollV() - 1; u < n; )
                                            w = u++,
                                            d += c.lineHeights.get(w);
                                        ba.context.beginPath();
                                        n = P.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                        ba.context.strokeStyle = "#" + n;
                                        ba.context.moveTo(l + 2.5, d + 2.5);
                                        ba.context.lineWidth = 1;
                                        ba.context.lineTo(l + 2.5, d + Eb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                        ba.context.stroke();
                                        ba.context.closePath()
                                    }
                                }
                                g.__bitmap = Yb.fromCanvas(a.__graphics.__canvas);
                                g.__bitmapScale = p;
                                g.__visible = !0;
                                a.__dirty = !1;
                                g.__softwareDirty = !1;
                                g.set___dirty(!1)
                            }
                        }
                        d = !1;
                        0 == a.__textEngine.antiAliasType && 1 == a.__textEngine.gridFitType && (d = b.context.imageSmoothingEnabled) && (b.context.imageSmoothingEnabled = !1);
                        if ((null != a.opaqueBackground || null != a.__graphics) && a.__renderable && (f = b.__getAlpha(a.__worldAlpha),
                        !(0 >= f) && (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height() && (b.__setBlendMode(a.__worldBlendMode),
                        b.__pushMaskObject(a),
                        c = b.context,
                        b.setTransform(a.__renderTransform, c),
                        h = a.opaqueBackground,
                        c.fillStyle = "rgb(" + (h >>> 16 & 255) + "," + (h >>> 8 & 255) + "," + (h & 255) + ")",
                        c.fillRect(0, 0, a.get_width(), a.get_height()),
                        b.__popMaskObject(a)),
                        null != a.__graphics && a.__renderable && (f = b.__getAlpha(a.__worldAlpha),
                        !(0 >= f) && (g = a.__graphics,
                        null != g && (A.render(g, b),
                        q = g.__width,
                        l = g.__height,
                        k = g.__canvas,
                        null != k && g.__visible && 1 <= q && 1 <= l && (m = g.__worldTransform,
                        c = b.context,
                        p = a.__scrollRect,
                        C = a.__worldScale9Grid,
                        null == p || 0 < p.width && 0 < p.height))))))) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            c.globalAlpha = f;
                            if (null != C && 0 == m.b && 0 == m.c) {
                                p = b.__pixelRatio;
                                h = ta.__pool.get();
                                h.translate(m.tx, m.ty);
                                b.setTransform(h, c);
                                ta.__pool.release(h);
                                f = g.__bounds;
                                u = g.__renderTransform.a / g.__bitmapScale;
                                var x = g.__renderTransform.d / g.__bitmapScale;
                                n = u * m.a;
                                w = x * m.d;
                                g = Math.max(1, Math.round(C.x * u));
                                m = Math.round(C.y * x);
                                h = Math.max(1, Math.round((f.get_right() - C.get_right()) * u));
                                r = Math.round((f.get_bottom() - C.get_bottom()) * x);
                                u = Math.round(C.width * u);
                                C = Math.round(C.height * x);
                                x = Math.round(g / p);
                                var z = Math.round(m / p)
                                  , K = Math.round(h / p);
                                p = Math.round(r / p);
                                n = f.width * n - x - K;
                                f = f.height * w - z - p;
                                b.applySmoothing(c, !1);
                                0 != u && 0 != C ? (c.drawImage(k, 0, 0, g, m, 0, 0, x, z),
                                c.drawImage(k, g, 0, u, m, x, 0, n, z),
                                c.drawImage(k, g + u, 0, h, m, x + n, 0, K, z),
                                c.drawImage(k, 0, m, g, C, 0, z, x, f),
                                c.drawImage(k, g, m, u, C, x, z, n, f),
                                c.drawImage(k, g + u, m, h, C, x + n, z, K, f),
                                c.drawImage(k, 0, m + C, g, r, 0, z + f, x, p),
                                c.drawImage(k, g, m + C, u, r, x, z + f, n, p),
                                c.drawImage(k, g + u, m + C, h, r, x + n, z + f, K, p)) : 0 == u && 0 != C ? (g = x + n + K,
                                c.drawImage(k, 0, 0, q, m, 0, 0, g, z),
                                c.drawImage(k, 0, m, q, C, 0, z, g, f),
                                c.drawImage(k, 0, m + C, q, r, 0, z + f, g, p)) : 0 == C && 0 != u && (f = z + f + p,
                                c.drawImage(k, 0, 0, g, l, 0, 0, x, f),
                                c.drawImage(k, g, 0, u, l, x, 0, n, f),
                                c.drawImage(k, g + u, 0, h, l, x + n, 0, K, f))
                            } else
                                b.setTransform(m, c),
                                c.drawImage(k, 0, 0, q, l);
                            b.__popMaskObject(a)
                        }
                        d && (b.context.imageSmoothingEnabled = !0)
                    } else
                        a = a.__cacheBitmap,
                        a.__renderable && (f = b.__getAlpha(a.__worldAlpha),
                        0 < f && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable && (c = b.context,
                        b.__setBlendMode(a.__worldBlendMode),
                        b.__pushMaskObject(a, !1),
                        Na.convertToCanvas(a.__bitmapData.image),
                        c.globalAlpha = f,
                        p = a.__scrollRect,
                        b.setTransform(a.__renderTransform, c),
                        b.__allowSmoothing && a.smoothing || (c.imageSmoothingEnabled = !1),
                        null == p ? c.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height) : c.drawImage(a.__bitmapData.image.get_src(), p.x, p.y, p.width, p.height, p.x, p.y, p.width, p.height),
                        b.__allowSmoothing && a.smoothing || (c.imageSmoothingEnabled = !0),
                        b.__popMaskObject(a, !1)))
            }
            ;
            ba.renderDrawableMask = function(a, b) {
                cg.renderDrawableMask(a, b)
            }
            ;
            var ff = function() {};
            h["openfl.display._internal.CanvasTilemap"] = ff;
            ff.__name__ = "openfl.display._internal.CanvasTilemap";
            ff.renderTileContainer = function(a, b, c, d, f, g, k, l, p, h, u, n) {
                var q = b.context, w = b.__roundPixels, r = ta.__pool.get(), m = a.__tiles, C, x = null, z = 0;
                for (a = a.__length; z < a; ) {
                    var A = z++;
                    var K = m[A];
                    r.setTo(1, 0, 0, 1, -K.get_originX(), -K.get_originY());
                    r.concat(K.get_matrix());
                    r.concat(c);
                    w && (r.tx = Math.round(r.tx),
                    r.ty = Math.round(r.ty));
                    var I = null != K.get_tileset() ? K.get_tileset() : d;
                    A = K.get_alpha() * k;
                    if ((C = K.get_visible()) && !(0 >= A))
                        if (g || (A = 1),
                        l && (x = null != K.__blendMode ? K.__blendMode : p),
                        0 < K.__length)
                            ff.renderTileContainer(K, b, r, I, f, g, A, l, x, h, u, n);
                        else if (null != I) {
                            C = K.get_id();
                            if (-1 == C) {
                                if (K = K.__rect,
                                null == K || 0 >= K.width || 0 >= K.height)
                                    continue
                            } else {
                                K = I.__data[C];
                                if (null == K)
                                    continue;
                                n.setTo(K.x, K.y, K.width, K.height);
                                K = n
                            }
                            I = I.__bitmapData;
                            null != I && null != I.image && (I != h && (null == I.image.buffer.__srcImage && Na.convertToCanvas(I.image),
                            u = I.image.get_src(),
                            h = I),
                            q.globalAlpha = A,
                            l && b.__setBlendMode(x),
                            b.setTransform(r, q),
                            q.drawImage(u, K.x, K.y, K.width, K.height, 0, 0, K.width, K.height))
                        }
                }
                ta.__pool.release(r)
            }
            ;
            ff.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || (x = b.__getAlpha(a.__worldAlpha),
                    0 >= x))) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            z = b.context;
                            b.setTransform(a.__renderTransform, z);
                            var c = a.opaqueBackground;
                            z.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
                            z.fillRect(0, 0, a.get_width(), a.get_height());
                            b.__popMaskObject(a)
                        }
                        if (null != a.__graphics && a.__renderable && (x = b.__getAlpha(a.__worldAlpha),
                        !(0 >= x))) {
                            var d = a.__graphics;
                            if (null != d) {
                                A.render(d, b);
                                var f = d.__width
                                  , g = d.__height;
                                c = d.__canvas;
                                if (null != c && d.__visible && 1 <= f && 1 <= g) {
                                    var k = d.__worldTransform;
                                    z = b.context;
                                    K = a.__scrollRect;
                                    var l = a.__worldScale9Grid;
                                    if (null == K || 0 < K.width && 0 < K.height) {
                                        b.__setBlendMode(a.__worldBlendMode);
                                        b.__pushMaskObject(a);
                                        z.globalAlpha = x;
                                        if (null != l && 0 == k.b && 0 == k.c) {
                                            var p = b.__pixelRatio;
                                            x = ta.__pool.get();
                                            x.translate(k.tx, k.ty);
                                            b.setTransform(x, z);
                                            ta.__pool.release(x);
                                            x = d.__bounds;
                                            var h = d.__renderTransform.a / d.__bitmapScale
                                              , u = d.__renderTransform.d / d.__bitmapScale
                                              , n = h * k.a
                                              , w = u * k.d;
                                            k = Math.max(1, Math.round(l.x * h));
                                            d = Math.round(l.y * u);
                                            K = Math.max(1, Math.round((x.get_right() - l.get_right()) * h));
                                            var r = Math.round((x.get_bottom() - l.get_bottom()) * u);
                                            h = Math.round(l.width * h);
                                            l = Math.round(l.height * u);
                                            u = Math.round(k / p);
                                            var m = Math.round(d / p)
                                              , C = Math.round(K / p);
                                            p = Math.round(r / p);
                                            n = x.width * n - u - C;
                                            x = x.height * w - m - p;
                                            b.applySmoothing(z, !1);
                                            0 != h && 0 != l ? (z.drawImage(c, 0, 0, k, d, 0, 0, u, m),
                                            z.drawImage(c, k, 0, h, d, u, 0, n, m),
                                            z.drawImage(c, k + h, 0, K, d, u + n, 0, C, m),
                                            z.drawImage(c, 0, d, k, l, 0, m, u, x),
                                            z.drawImage(c, k, d, h, l, u, m, n, x),
                                            z.drawImage(c, k + h, d, K, l, u + n, m, C, x),
                                            z.drawImage(c, 0, d + l, k, r, 0, m + x, u, p),
                                            z.drawImage(c, k, d + l, h, r, u, m + x, n, p),
                                            z.drawImage(c, k + h, d + l, K, r, u + n, m + x, C, p)) : 0 == h && 0 != l ? (g = u + n + C,
                                            z.drawImage(c, 0, 0, f, d, 0, 0, g, m),
                                            z.drawImage(c, 0, d, f, l, 0, m, g, x),
                                            z.drawImage(c, 0, d + l, f, r, 0, m + x, g, p)) : 0 == l && 0 != h && (f = m + x + p,
                                            z.drawImage(c, 0, 0, k, g, 0, 0, u, f),
                                            z.drawImage(c, k, 0, h, g, u, 0, n, f),
                                            z.drawImage(c, k + h, 0, K, g, u + n, 0, C, f))
                                        } else
                                            b.setTransform(k, z),
                                            z.drawImage(c, 0, 0, f, g);
                                        b.__popMaskObject(a)
                                    }
                                }
                            }
                        }
                    }
                    a.__renderable && 0 != a.__group.__tiles.length && (x = b.__getAlpha(a.__worldAlpha),
                    0 >= x || (z = b.context,
                    b.__setBlendMode(a.__worldBlendMode),
                    b.__pushMaskObject(a),
                    c = oa.__pool.get(),
                    c.setTo(0, 0, a.__width, a.__height),
                    b.__pushMaskRect(c, a.__renderTransform),
                    b.__allowSmoothing && a.smoothing || (z.imageSmoothingEnabled = !1),
                    ff.renderTileContainer(a.__group, b, a.__renderTransform, a.__tileset, b.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, x, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, c),
                    b.__allowSmoothing && a.smoothing || (z.imageSmoothingEnabled = !0),
                    b.__popMaskRect(),
                    b.__popMaskObject(a),
                    oa.__pool.release(c)))
                } else if (c = a.__cacheBitmap,
                c.__renderable) {
                    var x = b.__getAlpha(c.__worldAlpha);
                    if (0 < x && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                        var z = b.context;
                        b.__setBlendMode(c.__worldBlendMode);
                        b.__pushMaskObject(c, !1);
                        Na.convertToCanvas(c.__bitmapData.image);
                        z.globalAlpha = x;
                        var K = c.__scrollRect;
                        b.setTransform(c.__renderTransform, z);
                        b.__allowSmoothing && c.smoothing || (z.imageSmoothingEnabled = !1);
                        null == K ? z.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height) : z.drawImage(c.__bitmapData.image.get_src(), K.x, K.y, K.width, K.height, K.x, K.y, K.width, K.height);
                        b.__allowSmoothing && c.smoothing || (z.imageSmoothingEnabled = !0);
                        b.__popMaskObject(c, !1)
                    }
                }
                b.__renderEvent(a)
            }
            ;
            ff.renderDrawableMask = function(a, b) {}
            ;
            var dg = function() {};
            h["openfl.display._internal.CanvasVideo"] = dg;
            dg.__name__ = "openfl.display._internal.CanvasVideo";
            dg.render = function(a, b) {
                if (a.__renderable && null != a.__stream) {
                    var c = b.__getAlpha(a.__worldAlpha);
                    if (!(0 >= c)) {
                        var d = b.context;
                        if (null != a.__stream.__video) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            d.globalAlpha = c;
                            c = a.__scrollRect;
                            var f = a.smoothing;
                            b.setTransform(a.__worldTransform, d);
                            f || (d.imageSmoothingEnabled = !1);
                            null == c ? d.drawImage(a.__stream.__video, 0, 0, a.get_width(), a.get_height()) : d.drawImage(a.__stream.__video, c.x, c.y, c.width, c.height, c.x, c.y, c.width, c.height);
                            f || (d.imageSmoothingEnabled = !0);
                            b.__popMaskObject(a)
                        }
                    }
                }
            }
            ;
            dg.renderDrawable = function(a, b) {
                dg.render(a, b);
                b.__renderEvent(a)
            }
            ;
            dg.renderDrawableMask = function(a, b) {}
            ;
            var Qd = function() {};
            h["openfl.display._internal.Context3DBitmap"] = Qd;
            Qd.__name__ = "openfl.display._internal.Context3DBitmap";
            Qd.render = function(a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && null != a.__bitmapData && a.__bitmapData.__isValid) {
                    var c = b.__context3D;
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    var d = b.__initDisplayShader(a.__worldShader);
                    b.setShader(d);
                    b.applyBitmapData(a.__bitmapData, b.__allowSmoothing && (a.smoothing || b.__upscaled));
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
                    b.applyAlpha(a.__worldAlpha);
                    b.applyColorTransform(a.__worldColorTransform);
                    b.updateShader();
                    var f = a.__bitmapData.getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index, f, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, f, 3, 2);
                    d = a.__bitmapData.getIndexBuffer(c);
                    c.drawTriangles(d);
                    b.__clearShader();
                    b.__popMaskObject(a)
                }
            }
            ;
            Qd.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                null != a.__bitmapData && null != a.__bitmapData.image && (a.__imageVersion = a.__bitmapData.image.version);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D
                              , d = oa.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var f = a.opaqueBackground;
                            c.clear((f >>> 16 & 255) / 255, (f >>> 8 & 255) / 255, (f & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            oa.__pool.release(d)
                        }
                        null != a.__graphics && Me.render(a, b)
                    }
                    Qd.render(a, b)
                } else
                    Qd.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            }
            ;
            Qd.renderDrawableMask = function(a, b) {
                Qd.renderMask(a, b)
            }
            ;
            Qd.renderMask = function(a, b) {
                if (null != a.__bitmapData && a.__bitmapData.__isValid) {
                    var c = b.__context3D
                      , d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(fg.opaqueBitmapData, !0);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
                    b.updateShader();
                    var f = a.__bitmapData.getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index, f, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, f, 3, 2);
                    a = a.__bitmapData.getIndexBuffer(c);
                    c.drawTriangles(a);
                    b.__clearShader()
                }
            }
            ;
            var qj = function() {};
            h["openfl.display._internal.Context3DBitmapData"] = qj;
            qj.__name__ = "openfl.display._internal.Context3DBitmapData";
            qj.renderDrawable = function(a, b) {
                var c = b.__context3D;
                b.__setBlendMode(10);
                var d = b.__defaultDisplayShader;
                b.setShader(d);
                b.applyBitmapData(a, b.__upscaled);
                b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
                b.applyAlpha(a.__worldAlpha);
                b.applyColorTransform(a.__worldColorTransform);
                b.updateShader();
                var f = a.getVertexBuffer(c);
                null != d.__position && c.setVertexBufferAt(d.__position.index, f, 0, 3);
                null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, f, 3, 2);
                a = a.getIndexBuffer(c);
                c.drawTriangles(a);
                b.__clearShader()
            }
            ;
            qj.renderDrawableMask = function(a, b) {
                var c = b.__context3D
                  , d = b.__maskShader;
                b.setShader(d);
                b.applyBitmapData(a, b.__upscaled);
                b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
                b.updateShader();
                var f = a.getVertexBuffer(c);
                null != d.__position && c.setVertexBufferAt(d.__position.index, f, 0, 3);
                null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, f, 3, 2);
                a = a.getIndexBuffer(c);
                c.drawTriangles(a);
                b.__clearShader()
            }
            ;
            var Ah = function(a, b, c, d) {
                this.context3D = a;
                this.elementType = b;
                this.dataPerVertex = d;
                this.vertexCount = this.indexCount = 0;
                this.resize(c)
            };
            h["openfl.display._internal.Context3DBuffer"] = Ah;
            Ah.__name__ = "openfl.display._internal.Context3DBuffer";
            Ah.prototype = {
                flushVertexBufferData: function() {
                    this.vertexBufferData.length > this.vertexCount && (this.vertexCount = this.vertexBufferData.length,
                    this.vertexBuffer = this.context3D.createVertexBuffer(this.vertexCount, this.dataPerVertex, 0));
                    this.vertexBuffer.uploadFromTypedArray(ch.toArrayBufferView(this.vertexBufferData))
                },
                resize: function(a, b) {
                    null == b && (b = -1);
                    this.elementCount = a;
                    -1 == b && (b = this.dataPerVertex);
                    b != this.dataPerVertex && (this.vertexBuffer = null,
                    this.vertexCount = 0,
                    this.dataPerVertex = b);
                    var c = 0;
                    switch (this.elementType._hx_index) {
                    case 0:
                        c = 4 * a;
                        break;
                    case 1:
                        c = 3 * a;
                        break;
                    case 2:
                        c = 3 * a
                    }
                    b *= c;
                    if (null == this.vertexBufferData) {
                        var d = c = null
                          , f = null
                          , g = null
                          , k = null;
                        this.vertexBufferData = b = null != b ? new Float32Array(b) : null != c ? new Float32Array(c) : null != d ? new Float32Array(d.__array) : null != f ? new Float32Array(f) : null != g ? null == k ? new Float32Array(g,0) : new Float32Array(g,0,k) : null
                    } else
                        b > this.vertexBufferData.length && (a = this.vertexBufferData,
                        k = g = f = d = c = null,
                        this.vertexBufferData = b = null != b ? new Float32Array(b) : null != c ? new Float32Array(c) : null != d ? new Float32Array(d.__array) : null != f ? new Float32Array(f) : null != g ? null == k ? new Float32Array(g,0) : new Float32Array(g,0,k) : null,
                        this.vertexBufferData.set(a))
                },
                __class__: Ah
            };
            var Kf = N["openfl.display._internal.Context3DElementType"] = {
                __ename__: "openfl.display._internal.Context3DElementType",
                __constructs__: null,
                QUADS: {
                    _hx_name: "QUADS",
                    _hx_index: 0,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: r
                },
                TRIANGLES: {
                    _hx_name: "TRIANGLES",
                    _hx_index: 1,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: r
                },
                TRIANGLE_INDICES: {
                    _hx_name: "TRIANGLE_INDICES",
                    _hx_index: 2,
                    __enum__: "openfl.display._internal.Context3DElementType",
                    toString: r
                }
            };
            Kf.__constructs__ = [Kf.QUADS, Kf.TRIANGLES, Kf.TRIANGLE_INDICES];
            Kf.__empty_constructs__ = [Kf.QUADS, Kf.TRIANGLES, Kf.TRIANGLE_INDICES];
            var gg = function() {};
            h["openfl.display._internal.Context3DDisplayObject"] = gg;
            gg.__name__ = "openfl.display._internal.Context3DDisplayObject";
            gg.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null != a.__cacheBitmap && !a.__isCacheBitmapRender)
                    Qd.render(a.__cacheBitmap, b);
                else if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                    if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        var c = b.__context3D
                          , d = oa.__pool.get();
                        d.setTo(0, 0, a.get_width(), a.get_height());
                        b.__pushMaskRect(d, a.__renderTransform);
                        var f = a.opaqueBackground;
                        c.clear((f >>> 16 & 255) / 255, (f >>> 8 & 255) / 255, (f & 255) / 255, 1, 0, 0, 1);
                        b.__popMaskRect();
                        b.__popMaskObject(a);
                        oa.__pool.release(d)
                    }
                    null != a.__graphics && Me.render(a, b)
                }
                b.__renderEvent(a)
            }
            ;
            gg.renderDrawableMask = function(a, b) {
                null != a.__graphics && Me.renderMask(a, b)
            }
            ;
            var rj = function() {};
            h["openfl.display._internal.Context3DDisplayObjectContainer"] = rj;
            rj.__name__ = "openfl.display._internal.Context3DDisplayObjectContainer";
            rj.renderDrawable = function(a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext(); ) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                if (a.__renderable && !(0 >= a.__worldAlpha) && (gg.renderDrawable(a, b),
                null == a.__cacheBitmap || a.__isCacheBitmapRender)) {
                    if (0 < a.__children.length)
                        if (b.__pushMaskObject(a),
                        null != b.__stage) {
                            c = 0;
                            for (d = a.__children; c < d.length; ) {
                                var f = d[c];
                                ++c;
                                b.__renderDrawable(f);
                                f.__renderDirty = !1
                            }
                            a.__renderDirty = !1
                        } else
                            for (c = 0,
                            d = a.__children; c < d.length; )
                                f = d[c],
                                ++c,
                                b.__renderDrawable(f);
                    0 < a.__children.length && b.__popMaskObject(a)
                }
            }
            ;
            rj.renderDrawableMask = function(a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext(); ) {
                    var d = c.next();
                    null == d.stage && d.__cleanup()
                }
                a.__removedChildren.set_length(0);
                null != a.__graphics && Me.renderMask(a, b);
                c = 0;
                for (a = a.__children; c < a.length; )
                    d = a[c],
                    ++c,
                    b.__renderDrawableMask(d)
            }
            ;
            var Qb = function() {};
            h["openfl.display._internal.Context3DGraphics"] = Qb;
            Qb.__name__ = "openfl.display._internal.Context3DGraphics";
            Qb.buildBuffer = function(a, b) {
                var c, d = c = 0, f = 0, g = new ve(a.__commands);
                b = b.__context3D;
                for (var k = oa.__pool.get(), l = ta.__pool.get(), p = null, h = 0, u = a.__commands.types; h < u.length; ) {
                    var n = u[h];
                    ++h;
                    switch (n._hx_index) {
                    case 0:
                        switch (g.prev._hx_index) {
                        case 0:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 1:
                            g.iPos += 1;
                            g.fPos += 1;
                            break;
                        case 2:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 3:
                            g.oPos += 1;
                            break;
                        case 4:
                            g.fPos += 6;
                            break;
                        case 5:
                            g.fPos += 4;
                            break;
                        case 6:
                            g.fPos += 3;
                            break;
                        case 7:
                            g.fPos += 4;
                            break;
                        case 8:
                            g.oPos += 3;
                            break;
                        case 9:
                            g.fPos += 4;
                            break;
                        case 10:
                            g.fPos += 5;
                            g.oPos += 1;
                            break;
                        case 12:
                            g.oPos += 4;
                            break;
                        case 14:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 15:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 16:
                            g.oPos += 4;
                            g.iPos += 1;
                            g.fPos += 2;
                            g.bPos += 1;
                            break;
                        case 17:
                            g.fPos += 2;
                            break;
                        case 18:
                            g.fPos += 2;
                            break;
                        case 19:
                            g.oPos += 1;
                            break;
                        case 20:
                            g.oPos += 1
                        }
                        g.prev = Y.BEGIN_BITMAP_FILL;
                        p = g;
                        p = p.buffer.o[p.oPos];
                        break;
                    case 1:
                        p = null;
                        switch (g.prev._hx_index) {
                        case 0:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 1:
                            g.iPos += 1;
                            g.fPos += 1;
                            break;
                        case 2:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 3:
                            g.oPos += 1;
                            break;
                        case 4:
                            g.fPos += 6;
                            break;
                        case 5:
                            g.fPos += 4;
                            break;
                        case 6:
                            g.fPos += 3;
                            break;
                        case 7:
                            g.fPos += 4;
                            break;
                        case 8:
                            g.oPos += 3;
                            break;
                        case 9:
                            g.fPos += 4;
                            break;
                        case 10:
                            g.fPos += 5;
                            g.oPos += 1;
                            break;
                        case 12:
                            g.oPos += 4;
                            break;
                        case 14:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 15:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 16:
                            g.oPos += 4;
                            g.iPos += 1;
                            g.fPos += 2;
                            g.bPos += 1;
                            break;
                        case 17:
                            g.fPos += 2;
                            break;
                        case 18:
                            g.fPos += 2;
                            break;
                        case 19:
                            g.oPos += 1;
                            break;
                        case 20:
                            g.oPos += 1
                        }
                        g.prev = n;
                        break;
                    case 3:
                        switch (g.prev._hx_index) {
                        case 0:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 1:
                            g.iPos += 1;
                            g.fPos += 1;
                            break;
                        case 2:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 3:
                            g.oPos += 1;
                            break;
                        case 4:
                            g.fPos += 6;
                            break;
                        case 5:
                            g.fPos += 4;
                            break;
                        case 6:
                            g.fPos += 3;
                            break;
                        case 7:
                            g.fPos += 4;
                            break;
                        case 8:
                            g.oPos += 3;
                            break;
                        case 9:
                            g.fPos += 4;
                            break;
                        case 10:
                            g.fPos += 5;
                            g.oPos += 1;
                            break;
                        case 12:
                            g.oPos += 4;
                            break;
                        case 14:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 15:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 16:
                            g.oPos += 4;
                            g.iPos += 1;
                            g.fPos += 2;
                            g.bPos += 1;
                            break;
                        case 17:
                            g.fPos += 2;
                            break;
                        case 18:
                            g.fPos += 2;
                            break;
                        case 19:
                            g.oPos += 1;
                            break;
                        case 20:
                            g.oPos += 1
                        }
                        g.prev = Y.BEGIN_SHADER_FILL;
                        p = g;
                        n = p.buffer.o[p.oPos];
                        p = null;
                        if (null != n)
                            for (var w = 0, r = n.inputCount; w < r; ) {
                                var m = w++;
                                if ("bitmap" == n.inputRefs[m].name) {
                                    p = n.inputs[m];
                                    break
                                }
                            }
                        break;
                    case 8:
                        if (null != p) {
                            switch (g.prev._hx_index) {
                            case 0:
                                g.oPos += 2;
                                g.bPos += 2;
                                break;
                            case 1:
                                g.iPos += 1;
                                g.fPos += 1;
                                break;
                            case 2:
                                g.oPos += 4;
                                g.iiPos += 2;
                                g.ffPos += 1;
                                g.fPos += 1;
                                break;
                            case 3:
                                g.oPos += 1;
                                break;
                            case 4:
                                g.fPos += 6;
                                break;
                            case 5:
                                g.fPos += 4;
                                break;
                            case 6:
                                g.fPos += 3;
                                break;
                            case 7:
                                g.fPos += 4;
                                break;
                            case 8:
                                g.oPos += 3;
                                break;
                            case 9:
                                g.fPos += 4;
                                break;
                            case 10:
                                g.fPos += 5;
                                g.oPos += 1;
                                break;
                            case 12:
                                g.oPos += 4;
                                break;
                            case 14:
                                g.oPos += 2;
                                g.bPos += 2;
                                break;
                            case 15:
                                g.oPos += 4;
                                g.iiPos += 2;
                                g.ffPos += 1;
                                g.fPos += 1;
                                break;
                            case 16:
                                g.oPos += 4;
                                g.iPos += 1;
                                g.fPos += 2;
                                g.bPos += 1;
                                break;
                            case 17:
                                g.fPos += 2;
                                break;
                            case 18:
                                g.fPos += 2;
                                break;
                            case 19:
                                g.oPos += 1;
                                break;
                            case 20:
                                g.oPos += 1
                            }
                            g.prev = Y.DRAW_QUADS;
                            r = g;
                            n = r.buffer.o[r.oPos];
                            w = r.buffer.o[r.oPos + 1];
                            r = r.buffer.o[r.oPos + 2];
                            m = null != w;
                            var x = !1
                              , C = !1
                              , z = m ? w.get_length() : Math.floor(n.get_length() / 4);
                            if (0 == z)
                                return;
                            null != r && (r.get_length() >= 6 * z ? C = x = !0 : r.get_length() >= 4 * z ? x = !0 : r.get_length() >= 2 * z && (C = !0));
                            null == a.__quadBuffer ? a.__quadBuffer = new Ah(b,Kf.QUADS,z,4) : a.__quadBuffer.resize(c + z, 4);
                            for (var K, A, I, B, t, N, v, D, E, wa, J, P, G, pb, M = a.__quadBuffer.vertexBufferData, y = p.width, va = p.height, ob = 0, ma = z; ob < ma; )
                                B = ob++,
                                K = 16 * (c + B),
                                A = m ? 4 * w.get(B) : 4 * B,
                                0 > A || (k.setTo(n.get(A), n.get(A + 1), n.get(A + 2), n.get(A + 3)),
                                A = k.width,
                                I = k.height,
                                0 >= A || 0 >= I || (x && C ? (B *= 6,
                                l.setTo(r.get(B), r.get(B + 1), r.get(B + 2), r.get(B + 3), r.get(B + 4), r.get(B + 5))) : x ? (B *= 4,
                                l.setTo(r.get(B), r.get(B + 1), r.get(B + 2), r.get(B + 3), k.x, k.y)) : C ? (B *= 2,
                                l.tx = r.get(B),
                                l.ty = r.get(B + 1)) : (l.tx = k.x,
                                l.ty = k.y),
                                B = k.x / y,
                                t = k.y / va,
                                N = k.get_right() / y,
                                v = k.get_bottom() / va,
                                D = 0 * l.a + 0 * l.c + l.tx,
                                E = 0 * l.b + 0 * l.d + l.ty,
                                wa = A * l.a + 0 * l.c + l.tx,
                                J = A * l.b + 0 * l.d + l.ty,
                                P = 0 * l.a + I * l.c + l.tx,
                                G = 0 * l.b + I * l.d + l.ty,
                                pb = A * l.a + I * l.c + l.tx,
                                A = A * l.b + I * l.d + l.ty,
                                M[K] = D,
                                M[K + 1] = E,
                                M[K + 2] = B,
                                M[K + 3] = t,
                                M[K + 4] = wa,
                                M[K + 4 + 1] = J,
                                M[K + 4 + 2] = N,
                                M[K + 4 + 3] = t,
                                M[K + 8] = P,
                                M[K + 8 + 1] = G,
                                M[K + 8 + 2] = B,
                                M[K + 8 + 3] = v,
                                M[K + 12] = pb,
                                M[K + 12 + 1] = A,
                                M[K + 12 + 2] = N,
                                M[K + 12 + 3] = v));
                            c += z
                        }
                        break;
                    case 12:
                        switch (g.prev._hx_index) {
                        case 0:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 1:
                            g.iPos += 1;
                            g.fPos += 1;
                            break;
                        case 2:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 3:
                            g.oPos += 1;
                            break;
                        case 4:
                            g.fPos += 6;
                            break;
                        case 5:
                            g.fPos += 4;
                            break;
                        case 6:
                            g.fPos += 3;
                            break;
                        case 7:
                            g.fPos += 4;
                            break;
                        case 8:
                            g.oPos += 3;
                            break;
                        case 9:
                            g.fPos += 4;
                            break;
                        case 10:
                            g.fPos += 5;
                            g.oPos += 1;
                            break;
                        case 12:
                            g.oPos += 4;
                            break;
                        case 14:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 15:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 16:
                            g.oPos += 4;
                            g.iPos += 1;
                            g.fPos += 2;
                            g.bPos += 1;
                            break;
                        case 17:
                            g.fPos += 2;
                            break;
                        case 18:
                            g.fPos += 2;
                            break;
                        case 19:
                            g.oPos += 1;
                            break;
                        case 20:
                            g.oPos += 1
                        }
                        g.prev = Y.DRAW_TRIANGLES;
                        r = g;
                        n = r.buffer.o[r.oPos];
                        w = r.buffer.o[r.oPos + 1];
                        r = r.buffer.o[r.oPos + 2];
                        m = null != w;
                        z = Math.floor(n.get_length() / 2);
                        x = m ? w.get_length() : z;
                        K = (z = (C = null != r) && r.get_length() >= 3 * z) ? 4 : 2;
                        M = z ? 3 : 2;
                        y = K + 2;
                        va = z ? f : d;
                        Qb.resizeVertexBuffer(a, z, va + x * y);
                        ob = z ? a.__vertexBufferDataUVT : a.__vertexBufferData;
                        I = 0;
                        for (B = x; I < B; )
                            t = I++,
                            ma = va + t * y,
                            A = m ? 2 * w.get(t) : 2 * t,
                            t = m ? w.get(t) * M : t * M,
                            z ? (N = r.get(t + 2),
                            ob[ma] = n.get(A) / N,
                            ob[ma + 1] = n.get(A + 1) / N,
                            ob[ma + 2] = 0,
                            ob[ma + 3] = 1 / N) : (ob[ma] = n.get(A),
                            ob[ma + 1] = n.get(A + 1)),
                            ob[ma + K] = C ? r.get(t) : 0,
                            ob[ma + K + 1] = C ? r.get(t + 1) : 0;
                        z ? f += x * y : d += x * y;
                        break;
                    case 13:
                        p = null;
                        break;
                    default:
                        switch (g.prev._hx_index) {
                        case 0:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 1:
                            g.iPos += 1;
                            g.fPos += 1;
                            break;
                        case 2:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 3:
                            g.oPos += 1;
                            break;
                        case 4:
                            g.fPos += 6;
                            break;
                        case 5:
                            g.fPos += 4;
                            break;
                        case 6:
                            g.fPos += 3;
                            break;
                        case 7:
                            g.fPos += 4;
                            break;
                        case 8:
                            g.oPos += 3;
                            break;
                        case 9:
                            g.fPos += 4;
                            break;
                        case 10:
                            g.fPos += 5;
                            g.oPos += 1;
                            break;
                        case 12:
                            g.oPos += 4;
                            break;
                        case 14:
                            g.oPos += 2;
                            g.bPos += 2;
                            break;
                        case 15:
                            g.oPos += 4;
                            g.iiPos += 2;
                            g.ffPos += 1;
                            g.fPos += 1;
                            break;
                        case 16:
                            g.oPos += 4;
                            g.iPos += 1;
                            g.fPos += 2;
                            g.bPos += 1;
                            break;
                        case 17:
                            g.fPos += 2;
                            break;
                        case 18:
                            g.fPos += 2;
                            break;
                        case 19:
                            g.oPos += 1;
                            break;
                        case 20:
                            g.oPos += 1
                        }
                        g.prev = n
                    }
                }
                0 < c && a.__quadBuffer.flushVertexBufferData();
                if (0 < d) {
                    c = a.__vertexBuffer;
                    if (null == c || d > a.__vertexBufferCount)
                        c = b.createVertexBuffer(d, 4, 0),
                        a.__vertexBuffer = c,
                        a.__vertexBufferCount = d;
                    c.uploadFromTypedArray(ch.toArrayBufferView(a.__vertexBufferData))
                }
                if (0 < f) {
                    c = a.__vertexBufferUVT;
                    if (null == c || f > a.__vertexBufferCountUVT)
                        c = b.createVertexBuffer(f, 6, 0),
                        a.__vertexBufferUVT = c,
                        a.__vertexBufferCountUVT = f;
                    c.uploadFromTypedArray(ch.toArrayBufferView(a.__vertexBufferDataUVT))
                }
                oa.__pool.release(k);
                ta.__pool.release(l)
            }
            ;
            Qb.isCompatible = function(a) {
                if (null != a.__owner.__worldScale9Grid)
                    return !1;
                var b = new ve(a.__commands)
                  , c = !1
                  , d = !1
                  , f = !1
                  , g = 0;
                for (a = a.__commands.types; g < a.length; ) {
                    var k = a[g];
                    ++g;
                    switch (k._hx_index) {
                    case 0:
                        d = !0;
                        f = c = !1;
                        switch (b.prev._hx_index) {
                        case 0:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 1:
                            b.iPos += 1;
                            b.fPos += 1;
                            break;
                        case 2:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 3:
                            b.oPos += 1;
                            break;
                        case 4:
                            b.fPos += 6;
                            break;
                        case 5:
                            b.fPos += 4;
                            break;
                        case 6:
                            b.fPos += 3;
                            break;
                        case 7:
                            b.fPos += 4;
                            break;
                        case 8:
                            b.oPos += 3;
                            break;
                        case 9:
                            b.fPos += 4;
                            break;
                        case 10:
                            b.fPos += 5;
                            b.oPos += 1;
                            break;
                        case 12:
                            b.oPos += 4;
                            break;
                        case 14:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 15:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 16:
                            b.oPos += 4;
                            b.iPos += 1;
                            b.fPos += 2;
                            b.bPos += 1;
                            break;
                        case 17:
                            b.fPos += 2;
                            break;
                        case 18:
                            b.fPos += 2;
                            break;
                        case 19:
                            b.oPos += 1;
                            break;
                        case 20:
                            b.oPos += 1
                        }
                        b.prev = k;
                        break;
                    case 1:
                        d = !1;
                        c = !0;
                        f = !1;
                        switch (b.prev._hx_index) {
                        case 0:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 1:
                            b.iPos += 1;
                            b.fPos += 1;
                            break;
                        case 2:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 3:
                            b.oPos += 1;
                            break;
                        case 4:
                            b.fPos += 6;
                            break;
                        case 5:
                            b.fPos += 4;
                            break;
                        case 6:
                            b.fPos += 3;
                            break;
                        case 7:
                            b.fPos += 4;
                            break;
                        case 8:
                            b.oPos += 3;
                            break;
                        case 9:
                            b.fPos += 4;
                            break;
                        case 10:
                            b.fPos += 5;
                            b.oPos += 1;
                            break;
                        case 12:
                            b.oPos += 4;
                            break;
                        case 14:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 15:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 16:
                            b.oPos += 4;
                            b.iPos += 1;
                            b.fPos += 2;
                            b.bPos += 1;
                            break;
                        case 17:
                            b.fPos += 2;
                            break;
                        case 18:
                            b.fPos += 2;
                            break;
                        case 19:
                            b.oPos += 1;
                            break;
                        case 20:
                            b.oPos += 1
                        }
                        b.prev = k;
                        break;
                    case 3:
                        c = d = !1;
                        f = !0;
                        switch (b.prev._hx_index) {
                        case 0:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 1:
                            b.iPos += 1;
                            b.fPos += 1;
                            break;
                        case 2:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 3:
                            b.oPos += 1;
                            break;
                        case 4:
                            b.fPos += 6;
                            break;
                        case 5:
                            b.fPos += 4;
                            break;
                        case 6:
                            b.fPos += 3;
                            break;
                        case 7:
                            b.fPos += 4;
                            break;
                        case 8:
                            b.oPos += 3;
                            break;
                        case 9:
                            b.fPos += 4;
                            break;
                        case 10:
                            b.fPos += 5;
                            b.oPos += 1;
                            break;
                        case 12:
                            b.oPos += 4;
                            break;
                        case 14:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 15:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 16:
                            b.oPos += 4;
                            b.iPos += 1;
                            b.fPos += 2;
                            b.bPos += 1;
                            break;
                        case 17:
                            b.fPos += 2;
                            break;
                        case 18:
                            b.fPos += 2;
                            break;
                        case 19:
                            b.oPos += 1;
                            break;
                        case 20:
                            b.oPos += 1
                        }
                        b.prev = k;
                        break;
                    case 8:
                        if (d || f) {
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = k
                        } else
                            return b.destroy(),
                            !1;
                        break;
                    case 9:
                        if (c) {
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = k
                        } else
                            return b.destroy(),
                            !1;
                        break;
                    case 12:
                        if (d || f) {
                            switch (b.prev._hx_index) {
                            case 0:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 1:
                                b.iPos += 1;
                                b.fPos += 1;
                                break;
                            case 2:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 3:
                                b.oPos += 1;
                                break;
                            case 4:
                                b.fPos += 6;
                                break;
                            case 5:
                                b.fPos += 4;
                                break;
                            case 6:
                                b.fPos += 3;
                                break;
                            case 7:
                                b.fPos += 4;
                                break;
                            case 8:
                                b.oPos += 3;
                                break;
                            case 9:
                                b.fPos += 4;
                                break;
                            case 10:
                                b.fPos += 5;
                                b.oPos += 1;
                                break;
                            case 12:
                                b.oPos += 4;
                                break;
                            case 14:
                                b.oPos += 2;
                                b.bPos += 2;
                                break;
                            case 15:
                                b.oPos += 4;
                                b.iiPos += 2;
                                b.ffPos += 1;
                                b.fPos += 1;
                                break;
                            case 16:
                                b.oPos += 4;
                                b.iPos += 1;
                                b.fPos += 2;
                                b.bPos += 1;
                                break;
                            case 17:
                                b.fPos += 2;
                                break;
                            case 18:
                                b.fPos += 2;
                                break;
                            case 19:
                                b.oPos += 1;
                                break;
                            case 20:
                                b.oPos += 1
                            }
                            b.prev = k
                        } else
                            return b.destroy(),
                            !1;
                        break;
                    case 13:
                        f = c = d = !1;
                        switch (b.prev._hx_index) {
                        case 0:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 1:
                            b.iPos += 1;
                            b.fPos += 1;
                            break;
                        case 2:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 3:
                            b.oPos += 1;
                            break;
                        case 4:
                            b.fPos += 6;
                            break;
                        case 5:
                            b.fPos += 4;
                            break;
                        case 6:
                            b.fPos += 3;
                            break;
                        case 7:
                            b.fPos += 4;
                            break;
                        case 8:
                            b.oPos += 3;
                            break;
                        case 9:
                            b.fPos += 4;
                            break;
                        case 10:
                            b.fPos += 5;
                            b.oPos += 1;
                            break;
                        case 12:
                            b.oPos += 4;
                            break;
                        case 14:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 15:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 16:
                            b.oPos += 4;
                            b.iPos += 1;
                            b.fPos += 2;
                            b.bPos += 1;
                            break;
                        case 17:
                            b.fPos += 2;
                            break;
                        case 18:
                            b.fPos += 2;
                            break;
                        case 19:
                            b.oPos += 1;
                            break;
                        case 20:
                            b.oPos += 1
                        }
                        b.prev = k;
                        break;
                    case 18:
                        switch (b.prev._hx_index) {
                        case 0:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 1:
                            b.iPos += 1;
                            b.fPos += 1;
                            break;
                        case 2:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 3:
                            b.oPos += 1;
                            break;
                        case 4:
                            b.fPos += 6;
                            break;
                        case 5:
                            b.fPos += 4;
                            break;
                        case 6:
                            b.fPos += 3;
                            break;
                        case 7:
                            b.fPos += 4;
                            break;
                        case 8:
                            b.oPos += 3;
                            break;
                        case 9:
                            b.fPos += 4;
                            break;
                        case 10:
                            b.fPos += 5;
                            b.oPos += 1;
                            break;
                        case 12:
                            b.oPos += 4;
                            break;
                        case 14:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 15:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 16:
                            b.oPos += 4;
                            b.iPos += 1;
                            b.fPos += 2;
                            b.bPos += 1;
                            break;
                        case 17:
                            b.fPos += 2;
                            break;
                        case 18:
                            b.fPos += 2;
                            break;
                        case 19:
                            b.oPos += 1;
                            break;
                        case 20:
                            b.oPos += 1
                        }
                        b.prev = k;
                        break;
                    case 19:
                        switch (b.prev._hx_index) {
                        case 0:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 1:
                            b.iPos += 1;
                            b.fPos += 1;
                            break;
                        case 2:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 3:
                            b.oPos += 1;
                            break;
                        case 4:
                            b.fPos += 6;
                            break;
                        case 5:
                            b.fPos += 4;
                            break;
                        case 6:
                            b.fPos += 3;
                            break;
                        case 7:
                            b.fPos += 4;
                            break;
                        case 8:
                            b.oPos += 3;
                            break;
                        case 9:
                            b.fPos += 4;
                            break;
                        case 10:
                            b.fPos += 5;
                            b.oPos += 1;
                            break;
                        case 12:
                            b.oPos += 4;
                            break;
                        case 14:
                            b.oPos += 2;
                            b.bPos += 2;
                            break;
                        case 15:
                            b.oPos += 4;
                            b.iiPos += 2;
                            b.ffPos += 1;
                            b.fPos += 1;
                            break;
                        case 16:
                            b.oPos += 4;
                            b.iPos += 1;
                            b.fPos += 2;
                            b.bPos += 1;
                            break;
                        case 17:
                            b.fPos += 2;
                            break;
                        case 18:
                            b.fPos += 2;
                            break;
                        case 19:
                            b.oPos += 1;
                            break;
                        case 20:
                            b.oPos += 1
                        }
                        b.prev = k;
                        break;
                    default:
                        return b.destroy(),
                        !1
                    }
                }
                b.destroy();
                return !0
            }
            ;
            Qb.render = function(a, b) {
                if (a.__visible && 0 != a.__commands.get_length())
                    if (null != a.__bitmap && !a.__dirty || !Qb.isCompatible(a)) {
                        b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
                        var c = b.__softwareRenderer.__worldTransform;
                        b.__softwareRenderer.__worldTransform = 7 == a.__owner.__drawableType ? ta.__identity : b.__worldTransform;
                        A.render(a, b.__softwareRenderer);
                        b.__softwareRenderer.__worldTransform = c
                    } else {
                        a.__bitmap = null;
                        a.__update(b.__worldTransform, b.__pixelRatio);
                        var d = a.__width
                          , f = a.__height;
                        if (null != a.__bounds && 1 <= d && 1 <= f) {
                            (a.__hardwareDirty || null == a.__quadBuffer && null == a.__vertexBuffer && null == a.__vertexBufferUVT) && Qb.buildBuffer(a, b);
                            c = new ve(a.__commands);
                            for (var g = b.__context3D, k = ta.__pool.get(), l = null, p = null, h = !1, u = !1, n = null, w = 0, r = 0, m = 0, x = 0, C = 0, z = a.__commands.types; C < z.length; )
                                switch (d = z[C],
                                ++C,
                                d._hx_index) {
                                case 0:
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = Y.BEGIN_BITMAP_FILL;
                                    u = c;
                                    p = u.buffer.o[u.oPos];
                                    h = u.buffer.b[u.bPos];
                                    u = u.buffer.b[u.bPos + 1];
                                    n = l = null;
                                    break;
                                case 1:
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = Y.BEGIN_FILL;
                                    p = c;
                                    n = (p.buffer.i[p.iPos] | 0) & 16777215 | (255 * p.buffer.f[p.fPos] | 0) << 24;
                                    p = l = null;
                                    break;
                                case 3:
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = Y.BEGIN_SHADER_FILL;
                                    r = c;
                                    l = r.buffer.o[r.oPos];
                                    r = 0;
                                    p = null == l || null == l.shader || null == l.shader.__bitmap ? null : l.shader.__bitmap.input;
                                    n = null;
                                    break;
                                case 8:
                                    if (null != p) {
                                        switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                        }
                                        c.prev = Y.DRAW_QUADS;
                                        var K = c;
                                        d = K.buffer.o[K.oPos];
                                        K = K.buffer.o[K.oPos + 1];
                                        d = null != K ? K.get_length() : Math.floor(d.get_length() / 4);
                                        var I = b.__getMatrix(a.__owner.__renderTransform, 1);
                                        null == l || Qb.maskRender ? (K = Qb.maskRender ? b.__maskShader : b.__initGraphicsShader(null),
                                        b.setShader(K),
                                        b.applyMatrix(I),
                                        b.applyBitmapData(p, u, h),
                                        b.applyAlpha(a.__owner.__worldAlpha),
                                        b.applyColorTransform(a.__owner.__worldColorTransform),
                                        b.updateShader()) : (K = b.__initShaderBuffer(l),
                                        b.__setShaderBuffer(l),
                                        b.applyMatrix(I),
                                        b.applyBitmapData(p, !1, h),
                                        b.applyAlpha(a.__owner.__worldAlpha),
                                        b.applyColorTransform(a.__owner.__worldColorTransform));
                                        for (I = w + d; w < I; ) {
                                            d = Math.min(I - w, g.__quadIndexBufferElements) | 0;
                                            if (0 >= d)
                                                break;
                                            null == l || Qb.maskRender || b.__updateShaderBuffer(r);
                                            null != K.__position && g.setVertexBufferAt(K.__position.index, a.__quadBuffer.vertexBuffer, 16 * w, 2);
                                            null != K.__textureCoord && g.setVertexBufferAt(K.__textureCoord.index, a.__quadBuffer.vertexBuffer, 16 * w + 2, 2);
                                            g.drawTriangles(g.__quadIndexBuffer, 0, 2 * d);
                                            r += 4 * d;
                                            w += d
                                        }
                                        b.__clearShader()
                                    }
                                    break;
                                case 9:
                                    if (null != n) {
                                        switch (c.prev._hx_index) {
                                        case 0:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 1:
                                            c.iPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 2:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 3:
                                            c.oPos += 1;
                                            break;
                                        case 4:
                                            c.fPos += 6;
                                            break;
                                        case 5:
                                            c.fPos += 4;
                                            break;
                                        case 6:
                                            c.fPos += 3;
                                            break;
                                        case 7:
                                            c.fPos += 4;
                                            break;
                                        case 8:
                                            c.oPos += 3;
                                            break;
                                        case 9:
                                            c.fPos += 4;
                                            break;
                                        case 10:
                                            c.fPos += 5;
                                            c.oPos += 1;
                                            break;
                                        case 12:
                                            c.oPos += 4;
                                            break;
                                        case 14:
                                            c.oPos += 2;
                                            c.bPos += 2;
                                            break;
                                        case 15:
                                            c.oPos += 4;
                                            c.iiPos += 2;
                                            c.ffPos += 1;
                                            c.fPos += 1;
                                            break;
                                        case 16:
                                            c.oPos += 4;
                                            c.iPos += 1;
                                            c.fPos += 2;
                                            c.bPos += 1;
                                            break;
                                        case 17:
                                            c.fPos += 2;
                                            break;
                                        case 18:
                                            c.fPos += 2;
                                            break;
                                        case 19:
                                            c.oPos += 1;
                                            break;
                                        case 20:
                                            c.oPos += 1
                                        }
                                        c.prev = Y.DRAW_RECT;
                                        var B = c;
                                        K = B.buffer.f[B.fPos];
                                        I = B.buffer.f[B.fPos + 1];
                                        d = B.buffer.f[B.fPos + 2];
                                        f = B.buffer.f[B.fPos + 3];
                                        B = n;
                                        Qb.tempColorTransform.redOffset = B >>> 16 & 255;
                                        Qb.tempColorTransform.greenOffset = B >>> 8 & 255;
                                        Qb.tempColorTransform.blueOffset = B & 255;
                                        Qb.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                                        k.identity();
                                        k.scale(d, f);
                                        k.tx = K;
                                        k.ty = I;
                                        k.concat(a.__owner.__renderTransform);
                                        d = Qb.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                        b.setShader(d);
                                        b.applyMatrix(b.__getMatrix(k, 1));
                                        b.applyBitmapData(Qb.blankBitmapData, !0, h);
                                        b.applyAlpha((B >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                                        b.applyColorTransform(Qb.tempColorTransform);
                                        b.updateShader();
                                        K = Qb.blankBitmapData.getVertexBuffer(g);
                                        null != d.__position && g.setVertexBufferAt(d.__position.index, K, 0, 3);
                                        null != d.__textureCoord && g.setVertexBufferAt(d.__textureCoord.index, K, 3, 2);
                                        d = Qb.blankBitmapData.getIndexBuffer(g);
                                        g.drawTriangles(d);
                                        r += 4;
                                        b.__clearShader()
                                    }
                                    break;
                                case 12:
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = Y.DRAW_TRIANGLES;
                                    f = c;
                                    K = f.buffer.o[f.oPos + 1];
                                    I = f.buffer.o[f.oPos + 2];
                                    d = f.buffer.o[f.oPos + 3];
                                    B = null != K;
                                    f = Math.floor(f.buffer.o[f.oPos].get_length() / 2);
                                    K = B ? K.get_length() : f;
                                    B = (I = null != I && I.get_length() >= 3 * f) ? 4 : 2;
                                    f = B + 2;
                                    var t = I ? a.__vertexBufferUVT : a.__vertexBuffer
                                      , N = I ? x : m
                                      , v = b.__getMatrix(a.__owner.__renderTransform, 1);
                                    if (null == l || Qb.maskRender) {
                                        var D = Qb.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                                        b.setShader(D);
                                        b.applyMatrix(v);
                                        b.applyBitmapData(p, u, h);
                                        b.applyAlpha(a.__owner.__worldAlpha);
                                        b.applyColorTransform(a.__owner.__worldColorTransform);
                                        b.updateShader()
                                    } else
                                        D = b.__initShaderBuffer(l),
                                        b.__setShaderBuffer(l),
                                        b.applyMatrix(v),
                                        b.applyBitmapData(p, !1, h),
                                        b.applyAlpha(1),
                                        b.applyColorTransform(null),
                                        b.__updateShaderBuffer(r);
                                    null != D.__position && g.setVertexBufferAt(D.__position.index, t, N, I ? 4 : 2);
                                    null != D.__textureCoord && g.setVertexBufferAt(D.__textureCoord.index, t, N + B, 2);
                                    switch (d) {
                                    case 0:
                                        g.setCulling(0);
                                        break;
                                    case 1:
                                        g.setCulling(3);
                                        break;
                                    case 2:
                                        g.setCulling(1)
                                    }
                                    g.__drawTriangles(0, K);
                                    r += K;
                                    I ? x += f * K : m += f * K;
                                    switch (d) {
                                    case 1:
                                    case 2:
                                        g.setCulling(0)
                                    }
                                    b.__clearShader();
                                    break;
                                case 13:
                                    l = n = p = null;
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = d;
                                    g.setCulling(3);
                                    break;
                                case 18:
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = Y.MOVE_TO;
                                    break;
                                case 19:
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = Y.OVERRIDE_BLEND_MODE;
                                    d = c;
                                    b.__setBlendMode(d.buffer.o[d.oPos]);
                                    break;
                                default:
                                    switch (c.prev._hx_index) {
                                    case 0:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 1:
                                        c.iPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 2:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 3:
                                        c.oPos += 1;
                                        break;
                                    case 4:
                                        c.fPos += 6;
                                        break;
                                    case 5:
                                        c.fPos += 4;
                                        break;
                                    case 6:
                                        c.fPos += 3;
                                        break;
                                    case 7:
                                        c.fPos += 4;
                                        break;
                                    case 8:
                                        c.oPos += 3;
                                        break;
                                    case 9:
                                        c.fPos += 4;
                                        break;
                                    case 10:
                                        c.fPos += 5;
                                        c.oPos += 1;
                                        break;
                                    case 12:
                                        c.oPos += 4;
                                        break;
                                    case 14:
                                        c.oPos += 2;
                                        c.bPos += 2;
                                        break;
                                    case 15:
                                        c.oPos += 4;
                                        c.iiPos += 2;
                                        c.ffPos += 1;
                                        c.fPos += 1;
                                        break;
                                    case 16:
                                        c.oPos += 4;
                                        c.iPos += 1;
                                        c.fPos += 2;
                                        c.bPos += 1;
                                        break;
                                    case 17:
                                        c.fPos += 2;
                                        break;
                                    case 18:
                                        c.fPos += 2;
                                        break;
                                    case 19:
                                        c.oPos += 1;
                                        break;
                                    case 20:
                                        c.oPos += 1
                                    }
                                    c.prev = d
                                }
                            ta.__pool.release(k)
                        }
                        a.__hardwareDirty = !1;
                        a.set___dirty(!1)
                    }
            }
            ;
            Qb.renderMask = function(a, b) {
                Qb.maskRender = !0;
                Qb.render(a, b);
                Qb.maskRender = !1
            }
            ;
            Qb.resizeVertexBuffer = function(a, b, c) {
                var d = b ? a.__vertexBufferDataUVT : a.__vertexBufferData
                  , f = null;
                if (null == d) {
                    var g = f = null
                      , k = null
                      , l = null
                      , p = null;
                    f = c = null != c ? new Float32Array(c) : null != f ? new Float32Array(f) : null != g ? new Float32Array(g.__array) : null != k ? new Float32Array(k) : null != l ? null == p ? new Float32Array(l,0) : new Float32Array(l,0,p) : null
                } else
                    c > d.length && (p = l = k = g = f = null,
                    f = c = null != c ? new Float32Array(c) : null != f ? new Float32Array(f) : null != g ? new Float32Array(g.__array) : null != k ? new Float32Array(k) : null != l ? null == p ? new Float32Array(l,0) : new Float32Array(l,0,p) : null,
                    f.set(d));
                null != f && (b ? a.__vertexBufferDataUVT = f : a.__vertexBufferData = f)
            }
            ;
            var fg = function() {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tdiscard;\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = color;\n\n\t\t\t}\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                zd.call(this);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.display._internal.Context3DMaskShader"] = fg;
            fg.__name__ = "openfl.display._internal.Context3DMaskShader";
            fg.__super__ = zd;
            fg.prototype = v(zd.prototype, {
                __class__: fg
            });
            var Me = function() {};
            h["openfl.display._internal.Context3DShape"] = Me;
            Me.__name__ = "openfl.display._internal.Context3DShape";
            Me.render = function(a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha)) {
                    var c = a.__graphics;
                    if (null != c) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        Qb.render(c, b);
                        if (null != c.__bitmap && c.__visible) {
                            var d = b.__context3D
                              , f = b.__initDisplayShader(a.__worldShader);
                            b.setShader(f);
                            b.applyBitmapData(c.__bitmap, !0);
                            var g = ta.__pool.get();
                            g.scale(1 / c.__bitmapScale, 1 / c.__bitmapScale);
                            g.concat(c.__worldTransform);
                            b.applyMatrix(b.__getMatrix(g, 1));
                            ta.__pool.release(g);
                            b.applyAlpha(a.__worldAlpha);
                            b.applyColorTransform(a.__worldColorTransform);
                            b.updateShader();
                            g = c.__bitmap.getVertexBuffer(d);
                            null != f.__position && d.setVertexBufferAt(f.__position.index, g, 0, 3);
                            null != f.__textureCoord && d.setVertexBufferAt(f.__textureCoord.index, g, 3, 2);
                            c = c.__bitmap.getIndexBuffer(d);
                            d.drawTriangles(c);
                            b.__clearShader()
                        }
                        b.__popMaskObject(a)
                    }
                }
            }
            ;
            Me.renderMask = function(a, b) {
                var c = a.__graphics;
                if (null != c && (Qb.renderMask(c, b),
                null != c.__bitmap)) {
                    a = b.__context3D;
                    var d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(c.__bitmap, !0);
                    b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
                    b.updateShader();
                    var f = c.__bitmap.getVertexBuffer(a);
                    null != d.__position && a.setVertexBufferAt(d.__position.index, f, 0, 3);
                    null != d.__textureCoord && a.setVertexBufferAt(d.__textureCoord.index, f, 3, 2);
                    c = c.__bitmap.getIndexBuffer(a);
                    a.drawTriangles(c);
                    b.__clearShader()
                }
            }
            ;
            var sj = function() {};
            h["openfl.display._internal.Context3DSimpleButton"] = sj;
            sj.__name__ = "openfl.display._internal.Context3DSimpleButton";
            sj.renderDrawable = function(a, b) {
                !a.__renderable || 0 >= a.__worldAlpha || null == a.__currentState || (b.__pushMaskObject(a),
                b.__renderDrawable(a.__currentState),
                b.__popMaskObject(a),
                b.__renderEvent(a))
            }
            ;
            sj.renderDrawableMask = function(a, b) {
                null != a.__currentState && b.__renderDrawableMask(a.__currentState)
            }
            ;
            var hf = function() {};
            h["openfl.display._internal.Context3DTextField"] = hf;
            hf.__name__ = "openfl.display._internal.Context3DTextField";
            hf.render = function(a, b) {
                b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
                var c = b.__softwareRenderer;
                b = a.__textEngine;
                var d = !(b.background || b.border)
                  , f = d ? b.textBounds : b.bounds
                  , g = a.__graphics
                  , k = 0;
                if (a.__dirty) {
                    a.__updateLayout();
                    null == g.__bounds && (g.__bounds = new oa);
                    if (0 == a.get_text().length) {
                        k = b.bounds.width - 4;
                        var l = a.get_defaultTextFormat().align;
                        k = 3 == l ? 0 : 4 == l ? k : k / 2;
                        switch (l) {
                        case 0:
                            k += a.get_defaultTextFormat().leftMargin / 2;
                            k -= a.get_defaultTextFormat().rightMargin / 2;
                            k += a.get_defaultTextFormat().indent / 2;
                            k += a.get_defaultTextFormat().blockIndent / 2;
                            break;
                        case 2:
                            k += a.get_defaultTextFormat().leftMargin;
                            k += a.get_defaultTextFormat().indent;
                            k += a.get_defaultTextFormat().blockIndent;
                            break;
                        case 3:
                            k += a.get_defaultTextFormat().leftMargin;
                            k += a.get_defaultTextFormat().indent;
                            k += a.get_defaultTextFormat().blockIndent;
                            break;
                        case 4:
                            k -= a.get_defaultTextFormat().rightMargin
                        }
                        d && (f.y = b.bounds.y,
                        f.x = k)
                    }
                    g.__bounds.copyFrom(f)
                }
                l = c.__pixelRatio;
                g.__update(c.__worldTransform, l);
                if (a.__dirty || g.__softwareDirty) {
                    var p = Math.round(g.__width * l)
                      , h = Math.round(g.__height * l);
                    if (!(null != b.text && "" != b.text || b.background || b.border || b.__hasFocus || 1 == b.type && b.selectable) || (0 >= b.width || 0 >= b.height) && 2 != b.autoSize)
                        a.__graphics.__canvas = null,
                        a.__graphics.__context = null,
                        a.__graphics.__bitmap = null,
                        a.__graphics.__softwareDirty = !1,
                        a.__graphics.set___dirty(!1),
                        a.__dirty = !1;
                    else {
                        null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"),
                        a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                        ba.context = g.__context;
                        g.__canvas.width = p;
                        g.__canvas.height = h;
                        c.__isDOM && (g.__canvas.style.width = Math.round(p / l) + "px",
                        g.__canvas.style.height = Math.round(h / l) + "px");
                        p = ta.__pool.get();
                        p.scale(l, l);
                        p.concat(g.__renderTransform);
                        ba.context.setTransform(p.a, p.b, p.c, p.d, p.tx, p.ty);
                        ta.__pool.release(p);
                        null == ba.clearRect && (ba.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                        ba.clearRect && ba.context.clearRect(0, 0, g.__canvas.width, g.__canvas.height);
                        if (null != b.text && "" != b.text || b.__hasFocus) {
                            d = b.text;
                            g.__context.imageSmoothingEnabled = !c.__allowSmoothing || 0 == b.antiAliasType && 400 == b.sharpness ? !1 : !0;
                            if (b.border || b.background) {
                                ba.context.rect(.5, .5, f.width - 1, f.height - 1);
                                if (b.background) {
                                    var u = P.hex(b.backgroundColor & 16777215, 6);
                                    ba.context.fillStyle = "#" + u;
                                    ba.context.fill()
                                }
                                b.border && (ba.context.lineWidth = 1,
                                u = P.hex(b.borderColor & 16777215, 6),
                                ba.context.strokeStyle = "#" + u,
                                ba.context.stroke())
                            }
                            ba.context.textBaseline = "alphabetic";
                            ba.context.textAlign = "start";
                            c = -a.get_scrollH();
                            var n = k = 0;
                            for (u = a.get_scrollV() - 1; n < u; ) {
                                var w = n++;
                                k -= b.lineHeights.get(w)
                            }
                            var r;
                            for (p = b.layoutGroups.iterator(); p.hasNext(); )
                                if (h = p.next(),
                                !(h.lineIndex < a.get_scrollV() - 1)) {
                                    if (h.lineIndex > b.get_bottomScrollV() - 1)
                                        break;
                                    var m = "#" + P.hex(h.format.color & 16777215, 6);
                                    ba.context.font = Eb.getFont(h.format);
                                    ba.context.fillStyle = m;
                                    ba.context.fillText(d.substring(h.startIndex, h.endIndex), h.offsetX + c - f.x, h.offsetY + h.ascent + k - f.y);
                                    if (-1 < a.__caretIndex && b.selectable)
                                        if (a.__selectionIndex == a.__caretIndex) {
                                            if (a.__showCursor && h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex) {
                                                n = r = 0;
                                                for (u = a.__caretIndex - h.startIndex; n < u; ) {
                                                    w = n++;
                                                    if (h.positions.length <= w)
                                                        break;
                                                    r += h.positions[w]
                                                }
                                                n = 0;
                                                u = a.get_scrollV();
                                                for (w = h.lineIndex + 1; u < w; ) {
                                                    var x = u++;
                                                    n += b.lineHeights.get(x - 1)
                                                }
                                                ba.context.beginPath();
                                                u = P.hex(h.format.color & 16777215, 6);
                                                ba.context.strokeStyle = "#" + u;
                                                ba.context.moveTo(h.offsetX + r - a.get_scrollH() - f.x, n + 2 - f.y);
                                                ba.context.lineWidth = 1;
                                                ba.context.lineTo(h.offsetX + r - a.get_scrollH() - f.x, n + Eb.getFormatHeight(a.get_defaultTextFormat()) - 1 - f.y);
                                                ba.context.stroke();
                                                ba.context.closePath()
                                            }
                                        } else if (h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex || h.startIndex <= a.__selectionIndex && h.endIndex >= a.__selectionIndex || h.startIndex > a.__caretIndex && h.endIndex < a.__selectionIndex || h.startIndex > a.__selectionIndex && h.endIndex < a.__caretIndex)
                                            r = Math.min(a.__selectionIndex, a.__caretIndex) | 0,
                                            n = Math.max(a.__selectionIndex, a.__caretIndex) | 0,
                                            h.startIndex > r && (r = h.startIndex),
                                            h.endIndex < n && (n = h.endIndex),
                                            w = a.getCharBoundaries(r),
                                            n >= h.endIndex ? (u = a.getCharBoundaries(h.endIndex - 1),
                                            null != u && (u.x += u.width + 2)) : u = a.getCharBoundaries(n),
                                            null != w && null != u && (ba.context.fillStyle = "#000000",
                                            ba.context.fillRect(w.x + c - f.x, w.y + k, u.x - w.x, h.height),
                                            ba.context.fillStyle = "#FFFFFF",
                                            ba.context.fillText(d.substring(r, n), c + w.x - f.x, h.offsetY + h.ascent + k));
                                    h.format.underline && (ba.context.beginPath(),
                                    ba.context.strokeStyle = m,
                                    ba.context.lineWidth = 1,
                                    m = h.offsetX + c - f.x,
                                    r = Math.ceil(h.offsetY + k + h.ascent - f.y) + Math.floor(.185 * h.ascent) + .5,
                                    ba.context.moveTo(m, r),
                                    ba.context.lineTo(m + h.width, r),
                                    ba.context.stroke(),
                                    ba.context.closePath())
                                }
                        } else {
                            if (b.border || b.background)
                                b.border ? ba.context.rect(.5, .5, f.width - 1, f.height - 1) : ba.context.rect(0, 0, f.width, f.height),
                                b.background && (u = P.hex(b.backgroundColor & 16777215, 6),
                                ba.context.fillStyle = "#" + u,
                                ba.context.fill()),
                                b.border && (ba.context.lineWidth = 1,
                                ba.context.lineCap = "square",
                                u = P.hex(b.borderColor & 16777215, 6),
                                ba.context.strokeStyle = "#" + u,
                                ba.context.stroke());
                            if (-1 < a.__caretIndex && b.selectable && a.__showCursor) {
                                c = -a.get_scrollH() + (d ? 0 : k);
                                n = k = 0;
                                for (u = a.get_scrollV() - 1; n < u; )
                                    w = n++,
                                    k += b.lineHeights.get(w);
                                ba.context.beginPath();
                                u = P.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                ba.context.strokeStyle = "#" + u;
                                ba.context.moveTo(c + 2.5, k + 2.5);
                                ba.context.lineWidth = 1;
                                ba.context.lineTo(c + 2.5, k + Eb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                ba.context.stroke();
                                ba.context.closePath()
                            }
                        }
                        g.__bitmap = Yb.fromCanvas(a.__graphics.__canvas);
                        g.__bitmapScale = l;
                        g.__visible = !0;
                        a.__dirty = !1;
                        g.__softwareDirty = !1;
                        g.set___dirty(!1)
                    }
                }
                a.__graphics.__hardwareDirty = !1
            }
            ;
            hf.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (hf.render(a, b),
                    !(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D
                              , d = oa.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var f = a.opaqueBackground;
                            c.clear((f >>> 16 & 255) / 255, (f >>> 8 & 255) / 255, (f & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            oa.__pool.release(d)
                        }
                        null != a.__graphics && Me.render(a, b)
                    }
                } else
                    Qd.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            }
            ;
            hf.renderDrawableMask = function(a, b) {
                hf.renderMask(a, b);
                gg.renderDrawableMask(a, b)
            }
            ;
            hf.renderMask = function(a, b) {
                var c = b.__softwareRenderer;
                b = a.__textEngine;
                var d = !(b.background || b.border)
                  , f = d ? b.textBounds : b.bounds
                  , g = a.__graphics
                  , k = 0;
                if (a.__dirty) {
                    a.__updateLayout();
                    null == g.__bounds && (g.__bounds = new oa);
                    if (0 == a.get_text().length) {
                        k = b.bounds.width - 4;
                        var l = a.get_defaultTextFormat().align;
                        k = 3 == l ? 0 : 4 == l ? k : k / 2;
                        switch (l) {
                        case 0:
                            k += a.get_defaultTextFormat().leftMargin / 2;
                            k -= a.get_defaultTextFormat().rightMargin / 2;
                            k += a.get_defaultTextFormat().indent / 2;
                            k += a.get_defaultTextFormat().blockIndent / 2;
                            break;
                        case 2:
                            k += a.get_defaultTextFormat().leftMargin;
                            k += a.get_defaultTextFormat().indent;
                            k += a.get_defaultTextFormat().blockIndent;
                            break;
                        case 3:
                            k += a.get_defaultTextFormat().leftMargin;
                            k += a.get_defaultTextFormat().indent;
                            k += a.get_defaultTextFormat().blockIndent;
                            break;
                        case 4:
                            k -= a.get_defaultTextFormat().rightMargin
                        }
                        d && (f.y = b.bounds.y,
                        f.x = k)
                    }
                    g.__bounds.copyFrom(f)
                }
                l = c.__pixelRatio;
                g.__update(c.__worldTransform, l);
                if (a.__dirty || g.__softwareDirty) {
                    var p = Math.round(g.__width * l)
                      , h = Math.round(g.__height * l);
                    if (!(null != b.text && "" != b.text || b.background || b.border || b.__hasFocus || 1 == b.type && b.selectable) || (0 >= b.width || 0 >= b.height) && 2 != b.autoSize)
                        a.__graphics.__canvas = null,
                        a.__graphics.__context = null,
                        a.__graphics.__bitmap = null,
                        a.__graphics.__softwareDirty = !1,
                        a.__graphics.set___dirty(!1),
                        a.__dirty = !1;
                    else {
                        null == a.__graphics.__canvas && (a.__graphics.__canvas = window.document.createElement("canvas"),
                        a.__graphics.__context = a.__graphics.__canvas.getContext("2d"));
                        ba.context = g.__context;
                        g.__canvas.width = p;
                        g.__canvas.height = h;
                        c.__isDOM && (g.__canvas.style.width = Math.round(p / l) + "px",
                        g.__canvas.style.height = Math.round(h / l) + "px");
                        p = ta.__pool.get();
                        p.scale(l, l);
                        p.concat(g.__renderTransform);
                        ba.context.setTransform(p.a, p.b, p.c, p.d, p.tx, p.ty);
                        ta.__pool.release(p);
                        null == ba.clearRect && (ba.clearRect = "undefined" !== typeof navigator && "undefined" !== typeof navigator.isCocoonJS);
                        ba.clearRect && ba.context.clearRect(0, 0, g.__canvas.width, g.__canvas.height);
                        if (null != b.text && "" != b.text || b.__hasFocus) {
                            d = b.text;
                            g.__context.imageSmoothingEnabled = !c.__allowSmoothing || 0 == b.antiAliasType && 400 == b.sharpness ? !1 : !0;
                            if (b.border || b.background) {
                                ba.context.rect(.5, .5, f.width - 1, f.height - 1);
                                if (b.background) {
                                    var u = P.hex(b.backgroundColor & 16777215, 6);
                                    ba.context.fillStyle = "#" + u;
                                    ba.context.fill()
                                }
                                b.border && (ba.context.lineWidth = 1,
                                u = P.hex(b.borderColor & 16777215, 6),
                                ba.context.strokeStyle = "#" + u,
                                ba.context.stroke())
                            }
                            ba.context.textBaseline = "alphabetic";
                            ba.context.textAlign = "start";
                            c = -a.get_scrollH();
                            var n = k = 0;
                            for (u = a.get_scrollV() - 1; n < u; ) {
                                var w = n++;
                                k -= b.lineHeights.get(w)
                            }
                            var r;
                            for (p = b.layoutGroups.iterator(); p.hasNext(); )
                                if (h = p.next(),
                                !(h.lineIndex < a.get_scrollV() - 1)) {
                                    if (h.lineIndex > b.get_bottomScrollV() - 1)
                                        break;
                                    var m = "#" + P.hex(h.format.color & 16777215, 6);
                                    ba.context.font = Eb.getFont(h.format);
                                    ba.context.fillStyle = m;
                                    ba.context.fillText(d.substring(h.startIndex, h.endIndex), h.offsetX + c - f.x, h.offsetY + h.ascent + k - f.y);
                                    if (-1 < a.__caretIndex && b.selectable)
                                        if (a.__selectionIndex == a.__caretIndex) {
                                            if (a.__showCursor && h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex) {
                                                n = r = 0;
                                                for (u = a.__caretIndex - h.startIndex; n < u; ) {
                                                    w = n++;
                                                    if (h.positions.length <= w)
                                                        break;
                                                    r += h.positions[w]
                                                }
                                                n = 0;
                                                u = a.get_scrollV();
                                                for (w = h.lineIndex + 1; u < w; ) {
                                                    var x = u++;
                                                    n += b.lineHeights.get(x - 1)
                                                }
                                                ba.context.beginPath();
                                                u = P.hex(h.format.color & 16777215, 6);
                                                ba.context.strokeStyle = "#" + u;
                                                ba.context.moveTo(h.offsetX + r - a.get_scrollH() - f.x, n + 2 - f.y);
                                                ba.context.lineWidth = 1;
                                                ba.context.lineTo(h.offsetX + r - a.get_scrollH() - f.x, n + Eb.getFormatHeight(a.get_defaultTextFormat()) - 1 - f.y);
                                                ba.context.stroke();
                                                ba.context.closePath()
                                            }
                                        } else if (h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex || h.startIndex <= a.__selectionIndex && h.endIndex >= a.__selectionIndex || h.startIndex > a.__caretIndex && h.endIndex < a.__selectionIndex || h.startIndex > a.__selectionIndex && h.endIndex < a.__caretIndex)
                                            r = Math.min(a.__selectionIndex, a.__caretIndex) | 0,
                                            n = Math.max(a.__selectionIndex, a.__caretIndex) | 0,
                                            h.startIndex > r && (r = h.startIndex),
                                            h.endIndex < n && (n = h.endIndex),
                                            w = a.getCharBoundaries(r),
                                            n >= h.endIndex ? (u = a.getCharBoundaries(h.endIndex - 1),
                                            null != u && (u.x += u.width + 2)) : u = a.getCharBoundaries(n),
                                            null != w && null != u && (ba.context.fillStyle = "#000000",
                                            ba.context.fillRect(w.x + c - f.x, w.y + k, u.x - w.x, h.height),
                                            ba.context.fillStyle = "#FFFFFF",
                                            ba.context.fillText(d.substring(r, n), c + w.x - f.x, h.offsetY + h.ascent + k));
                                    h.format.underline && (ba.context.beginPath(),
                                    ba.context.strokeStyle = m,
                                    ba.context.lineWidth = 1,
                                    m = h.offsetX + c - f.x,
                                    r = Math.ceil(h.offsetY + k + h.ascent - f.y) + Math.floor(.185 * h.ascent) + .5,
                                    ba.context.moveTo(m, r),
                                    ba.context.lineTo(m + h.width, r),
                                    ba.context.stroke(),
                                    ba.context.closePath())
                                }
                        } else {
                            if (b.border || b.background)
                                b.border ? ba.context.rect(.5, .5, f.width - 1, f.height - 1) : ba.context.rect(0, 0, f.width, f.height),
                                b.background && (u = P.hex(b.backgroundColor & 16777215, 6),
                                ba.context.fillStyle = "#" + u,
                                ba.context.fill()),
                                b.border && (ba.context.lineWidth = 1,
                                ba.context.lineCap = "square",
                                u = P.hex(b.borderColor & 16777215, 6),
                                ba.context.strokeStyle = "#" + u,
                                ba.context.stroke());
                            if (-1 < a.__caretIndex && b.selectable && a.__showCursor) {
                                c = -a.get_scrollH() + (d ? 0 : k);
                                n = k = 0;
                                for (u = a.get_scrollV() - 1; n < u; )
                                    w = n++,
                                    k += b.lineHeights.get(w);
                                ba.context.beginPath();
                                u = P.hex(a.get_defaultTextFormat().color & 16777215, 6);
                                ba.context.strokeStyle = "#" + u;
                                ba.context.moveTo(c + 2.5, k + 2.5);
                                ba.context.lineWidth = 1;
                                ba.context.lineTo(c + 2.5, k + Eb.getFormatHeight(a.get_defaultTextFormat()) - 1);
                                ba.context.stroke();
                                ba.context.closePath()
                            }
                        }
                        g.__bitmap = Yb.fromCanvas(a.__graphics.__canvas);
                        g.__bitmapScale = l;
                        g.__visible = !0;
                        a.__dirty = !1;
                        g.__softwareDirty = !1;
                        g.set___dirty(!1)
                    }
                }
                a.__graphics.__hardwareDirty = !1
            }
            ;
            var X = function() {};
            h["openfl.display._internal.Context3DTilemap"] = X;
            X.__name__ = "openfl.display._internal.Context3DTilemap";
            X.buildBuffer = function(a, b) {
                if (!a.__renderable || 0 == a.__group.__tiles.length || 0 >= a.__worldAlpha)
                    a.__group.__dirty = !1;
                else {
                    X.numTiles = 0;
                    X.vertexBufferData = null != a.__buffer ? a.__buffer.vertexBufferData : null;
                    X.vertexDataPosition = 0;
                    var c = oa.__pool.get()
                      , d = ta.__pool.get()
                      , f = ta.__pool.get();
                    X.dataPerVertex = 4;
                    a.tileAlphaEnabled && X.dataPerVertex++;
                    a.tileColorTransformEnabled && (X.dataPerVertex += 8);
                    X.buildBufferTileContainer(a, a.__group, b, f, a.__tileset, a.tileAlphaEnabled, a.__worldAlpha, a.tileColorTransformEnabled, a.__worldColorTransform, null, c, d);
                    a.__buffer.flushVertexBufferData();
                    oa.__pool.release(c);
                    ta.__pool.release(d);
                    ta.__pool.release(f)
                }
            }
            ;
            X.buildBufferTileContainer = function(a, b, c, d, f, g, k, l, p, h, u, n, w) {
                null == w && (w = !0);
                var q = ta.__pool.get()
                  , r = c.__roundPixels
                  , m = b.__tiles;
                w && X.resizeBuffer(a, X.numTiles + X.getRecursiveLength(b));
                w = null;
                for (var x, C, z, K, A, I, B, t, N, v, D, E = g ? 5 : 4, wa = 0; wa < m.length; ) {
                    K = m[wa];
                    ++wa;
                    q.setTo(1, 0, 0, 1, -K.get_originX(), -K.get_originY());
                    q.concat(K.get_matrix());
                    q.concat(d);
                    r && (q.tx = Math.round(q.tx),
                    q.ty = Math.round(q.ty));
                    var J = null != K.get_tileset() ? K.get_tileset() : f;
                    var P = K.get_alpha() * k;
                    var G = K.get_visible();
                    K.__dirty = !1;
                    if (G && !(0 >= P))
                        if (l && (null != K.get_colorTransform() ? null == p ? w = K.get_colorTransform() : (null == X.cacheColorTransform && (X.cacheColorTransform = new Kb),
                        w = X.cacheColorTransform,
                        w.redMultiplier = p.redMultiplier * K.get_colorTransform().redMultiplier,
                        w.greenMultiplier = p.greenMultiplier * K.get_colorTransform().greenMultiplier,
                        w.blueMultiplier = p.blueMultiplier * K.get_colorTransform().blueMultiplier,
                        w.alphaMultiplier = p.alphaMultiplier * K.get_colorTransform().alphaMultiplier,
                        w.redOffset = p.redOffset + K.get_colorTransform().redOffset,
                        w.greenOffset = p.greenOffset + K.get_colorTransform().greenOffset,
                        w.blueOffset = p.blueOffset + K.get_colorTransform().blueOffset,
                        w.alphaOffset = p.alphaOffset + K.get_colorTransform().alphaOffset) : w = p),
                        g || (P = 1),
                        0 < K.__length)
                            X.buildBufferTileContainer(a, K, c, q, J, g, P, l, w, h, u, n, !1);
                        else if (null != J && (G = K.get_id(),
                        x = J.__bitmapData,
                        null != x)) {
                            if (-1 == G) {
                                C = K.__rect;
                                if (null == C || 0 >= C.width || 0 >= C.height)
                                    continue;
                                J = C.x / x.width;
                                K = C.y / x.height;
                                G = C.get_right() / x.width;
                                A = C.get_bottom() / x.height
                            } else {
                                x = J.__data[G];
                                if (null == x)
                                    continue;
                                u.setTo(x.x, x.y, x.width, x.height);
                                C = u;
                                J = x.__uvX;
                                K = x.__uvY;
                                G = x.__uvWidth;
                                A = x.__uvHeight
                            }
                            x = C.width;
                            z = C.height;
                            C = 0 * q.a + 0 * q.c + q.tx;
                            I = 0 * q.b + 0 * q.d + q.ty;
                            B = x * q.a + 0 * q.c + q.tx;
                            t = x * q.b + 0 * q.d + q.ty;
                            N = 0 * q.a + z * q.c + q.tx;
                            v = 0 * q.b + z * q.d + q.ty;
                            D = x * q.a + z * q.c + q.tx;
                            z = x * q.b + z * q.d + q.ty;
                            x = X.vertexDataPosition;
                            X.vertexBufferData[x] = C;
                            X.vertexBufferData[x + 1] = I;
                            X.vertexBufferData[x + 2] = J;
                            X.vertexBufferData[x + 3] = K;
                            X.vertexBufferData[x + X.dataPerVertex] = B;
                            X.vertexBufferData[x + X.dataPerVertex + 1] = t;
                            X.vertexBufferData[x + X.dataPerVertex + 2] = G;
                            X.vertexBufferData[x + X.dataPerVertex + 3] = K;
                            X.vertexBufferData[x + 2 * X.dataPerVertex] = N;
                            X.vertexBufferData[x + 2 * X.dataPerVertex + 1] = v;
                            X.vertexBufferData[x + 2 * X.dataPerVertex + 2] = J;
                            X.vertexBufferData[x + 2 * X.dataPerVertex + 3] = A;
                            X.vertexBufferData[x + 3 * X.dataPerVertex] = D;
                            X.vertexBufferData[x + 3 * X.dataPerVertex + 1] = z;
                            X.vertexBufferData[x + 3 * X.dataPerVertex + 2] = G;
                            X.vertexBufferData[x + 3 * X.dataPerVertex + 3] = A;
                            g && (X.vertexBufferData[x + 0 * X.dataPerVertex + 4] = P,
                            X.vertexBufferData[x + X.dataPerVertex + 4] = P,
                            X.vertexBufferData[x + 2 * X.dataPerVertex + 4] = P,
                            X.vertexBufferData[x + 3 * X.dataPerVertex + 4] = P);
                            if (l)
                                if (null != w)
                                    for (P = 0; 4 > P; )
                                        J = P++,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E] = w.redMultiplier,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 1] = w.greenMultiplier,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 2] = w.blueMultiplier,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 3] = w.alphaMultiplier,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 4] = w.redOffset,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 5] = w.greenOffset,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 6] = w.blueOffset,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 7] = w.alphaOffset;
                                else
                                    for (P = 0; 4 > P; )
                                        J = P++,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E] = 1,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 1] = 1,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 2] = 1,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 3] = 1,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 4] = 0,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 5] = 0,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 6] = 0,
                                        X.vertexBufferData[x + X.dataPerVertex * J + E + 7] = 0;
                            X.vertexDataPosition += 4 * X.dataPerVertex
                        }
                }
                b.__dirty = !1;
                ta.__pool.release(q)
            }
            ;
            X.flush = function(a, b, c) {
                null == X.currentShader && (X.currentShader = b.__defaultDisplayShader);
                if (X.bufferPosition > X.lastFlushedPosition && null != X.currentBitmapData && null != X.currentShader) {
                    var d = b.__initDisplayShader(X.currentShader);
                    b.setShader(d);
                    b.applyBitmapData(X.currentBitmapData, a.smoothing);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                    a.tileAlphaEnabled ? b.useAlphaArray() : b.applyAlpha(a.__worldAlpha);
                    a.tileBlendModeEnabled && b.__setBlendMode(c);
                    a.tileColorTransformEnabled ? (b.applyHasColorTransform(!0),
                    b.useColorTransformArray()) : b.applyColorTransform(a.__worldColorTransform);
                    b.updateShader();
                    c = a.__buffer.vertexBuffer;
                    for (var f = X.lastFlushedPosition * X.dataPerVertex * 4, g; X.lastFlushedPosition < X.bufferPosition; ) {
                        g = Math.min(X.bufferPosition - X.lastFlushedPosition, X.context.__quadIndexBufferElements) | 0;
                        if (0 >= g)
                            break;
                        null != d.__position && X.context.setVertexBufferAt(d.__position.index, c, f, 2);
                        null != d.__textureCoord && X.context.setVertexBufferAt(d.__textureCoord.index, c, f + 2, 2);
                        a.tileAlphaEnabled && null != d.__alpha && X.context.setVertexBufferAt(d.__alpha.index, c, f + 4, 1);
                        if (a.tileColorTransformEnabled) {
                            var k = a.tileAlphaEnabled ? 5 : 4;
                            null != d.__colorMultiplier && X.context.setVertexBufferAt(d.__colorMultiplier.index, c, f + k, 4);
                            null != d.__colorOffset && X.context.setVertexBufferAt(d.__colorOffset.index, c, f + k + 4, 4)
                        }
                        X.context.drawTriangles(X.context.__quadIndexBuffer, 0, 2 * g);
                        X.lastFlushedPosition += g
                    }
                    b.__clearShader()
                }
                X.lastUsedBitmapData = X.currentBitmapData;
                X.lastUsedShader = X.currentShader
            }
            ;
            X.getRecursiveLength = function(a) {
                a = a.__tiles;
                for (var b = 0, c = 0; c < a.length; ) {
                    var d = a[c];
                    ++c;
                    0 < d.__length ? b += X.getRecursiveLength(d) : ++b
                }
                return b
            }
            ;
            X.render = function(a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && (X.context = b.__context3D,
                X.buildBuffer(a, b),
                0 != X.numTiles)) {
                    X.bufferPosition = 0;
                    X.lastFlushedPosition = 0;
                    X.lastUsedBitmapData = null;
                    X.lastUsedShader = null;
                    X.currentBitmapData = null;
                    X.currentShader = null;
                    X.currentBlendMode = a.__worldBlendMode;
                    a.tileBlendModeEnabled || b.__setBlendMode(X.currentBlendMode);
                    b.__pushMaskObject(a);
                    var c = oa.__pool.get();
                    c.setTo(0, 0, a.__width, a.__height);
                    b.__pushMaskRect(c, a.__renderTransform);
                    X.renderTileContainer(a, b, a.__group, a.__worldShader, a.__tileset, a.__worldAlpha, a.tileBlendModeEnabled, X.currentBlendMode, null);
                    X.flush(a, b, X.currentBlendMode);
                    b.__popMaskRect();
                    b.__popMaskObject(a);
                    oa.__pool.release(c)
                }
            }
            ;
            X.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    if (!(null == a.opaqueBackground && null == a.__graphics || !a.__renderable || 0 >= a.__worldAlpha)) {
                        if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                            b.__setBlendMode(a.__worldBlendMode);
                            b.__pushMaskObject(a);
                            var c = b.__context3D
                              , d = oa.__pool.get();
                            d.setTo(0, 0, a.get_width(), a.get_height());
                            b.__pushMaskRect(d, a.__renderTransform);
                            var f = a.opaqueBackground;
                            c.clear((f >>> 16 & 255) / 255, (f >>> 8 & 255) / 255, (f & 255) / 255, 1, 0, 0, 1);
                            b.__popMaskRect();
                            b.__popMaskObject(a);
                            oa.__pool.release(d)
                        }
                        null != a.__graphics && Me.render(a, b)
                    }
                    X.render(a, b)
                } else
                    Qd.render(a.__cacheBitmap, b);
                b.__renderEvent(a)
            }
            ;
            X.renderDrawableMask = function(a, b) {
                if (null != a.opaqueBackground || null != a.__graphics)
                    null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height(),
                    null != a.__graphics && Me.renderMask(a, b);
                X.renderMask(a, b)
            }
            ;
            X.renderTileContainer = function(a, b, c, d, f, g, k, l, p) {
                c = c.__tiles;
                for (var h, q, n, u = null, w, r = 0; r < c.length; ) {
                    var x = c[r];
                    ++r;
                    h = null != x.get_tileset() ? x.get_tileset() : f;
                    q = x.get_alpha() * g;
                    if ((n = x.get_visible()) && !(0 >= q))
                        if (n = null != x.get_shader() ? x.get_shader() : d,
                        k && (u = null != x.__blendMode ? x.__blendMode : l),
                        0 < x.__length)
                            X.renderTileContainer(a, b, x, n, h, q, k, u, p);
                        else if (null != h && (w = x.get_id(),
                        q = h.__bitmapData,
                        null != q)) {
                            if (-1 == w) {
                                if (h = x.__rect,
                                null == h || 0 >= h.width || 0 >= h.height)
                                    continue
                            } else if (h = h.__data[w],
                            null == h)
                                continue;
                            (n != X.currentShader || q != X.currentBitmapData && null != X.currentBitmapData || X.currentBlendMode != u) && X.flush(a, b, X.currentBlendMode);
                            X.currentBitmapData = q;
                            X.currentShader = n;
                            X.currentBlendMode = u;
                            X.bufferPosition++
                        }
                }
            }
            ;
            X.renderMask = function(a, b) {}
            ;
            X.resizeBuffer = function(a, b) {
                X.numTiles = b;
                null == a.__buffer ? a.__buffer = new Ah(X.context,Kf.QUADS,X.numTiles,X.dataPerVertex) : a.__buffer.resize(X.numTiles, X.dataPerVertex);
                X.vertexBufferData = a.__buffer.vertexBufferData
            }
            ;
            var Rd = function() {};
            h["openfl.display._internal.Context3DVideo"] = Rd;
            Rd.__name__ = "openfl.display._internal.Context3DVideo";
            Rd.render = function(a, b) {
                if (a.__renderable && !(0 >= a.__worldAlpha) && null != a.__stream && null != a.__stream.__video) {
                    var c = b.__context3D
                      , d = c.gl;
                    if (null != a.__getTexture(c)) {
                        b.__setBlendMode(a.__worldBlendMode);
                        b.__pushMaskObject(a);
                        var f = b.__initDisplayShader(a.__worldShader);
                        b.setShader(f);
                        b.applyBitmapData(null, !0, !1);
                        b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                        b.applyAlpha(a.__worldAlpha);
                        b.applyColorTransform(a.__worldColorTransform);
                        null != f.__textureSize && (Rd.__textureSizeValue[0] = null != a.__stream ? a.__stream.__video.videoWidth : 0,
                        Rd.__textureSizeValue[1] = null != a.__stream ? a.__stream.__video.videoHeight : 0,
                        f.__textureSize.value = Rd.__textureSizeValue);
                        b.updateShader();
                        c.setTextureAt(0, a.__getTexture(c));
                        c.__flushGLTextures();
                        d.uniform1i(f.__texture.index, 0);
                        a.smoothing ? (d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.LINEAR),
                        d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.LINEAR)) : (d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.NEAREST),
                        d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST));
                        d = a.__getVertexBuffer(c);
                        null != f.__position && c.setVertexBufferAt(f.__position.index, d, 0, 3);
                        null != f.__textureCoord && c.setVertexBufferAt(f.__textureCoord.index, d, 3, 2);
                        f = a.__getIndexBuffer(c);
                        c.drawTriangles(f);
                        b.__clearShader();
                        b.__popMaskObject(a)
                    }
                }
            }
            ;
            Rd.renderDrawable = function(a, b) {
                Rd.render(a, b);
                b.__renderEvent(a)
            }
            ;
            Rd.renderDrawableMask = function(a, b) {
                Rd.renderMask(a, b)
            }
            ;
            Rd.renderMask = function(a, b) {
                if (null != a.__stream && null != a.__stream.__video) {
                    var c = b.__context3D
                      , d = b.__maskShader;
                    b.setShader(d);
                    b.applyBitmapData(fg.opaqueBitmapData, !0);
                    b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
                    b.updateShader();
                    var f = a.__getVertexBuffer(c);
                    null != d.__position && c.setVertexBufferAt(d.__position.index, f, 0, 3);
                    null != d.__textureCoord && c.setVertexBufferAt(d.__textureCoord.index, f, 3, 2);
                    a = a.__getIndexBuffer(c);
                    c.drawTriangles(a);
                    b.__clearShader()
                }
            }
            ;
            var Vb = function() {};
            h["openfl.display._internal.DOMBitmap"] = Vb;
            Vb.__name__ = "openfl.display._internal.DOMBitmap";
            Vb.clear = function(a, b) {
                qd.clear(a, b);
                null != a.__image && (b.element.removeChild(a.__image),
                a.__image = null,
                a.__style = null);
                null != a.__canvas && (b.element.removeChild(a.__canvas),
                a.__canvas = null,
                a.__style = null)
            }
            ;
            Vb.renderCanvas = function(a, b) {
                null != a.__image && (b.element.removeChild(a.__image),
                a.__image = null);
                null == a.__canvas && (a.__canvas = window.document.createElement("canvas"),
                a.__context = a.__canvas.getContext("2d"),
                a.__imageVersion = -1,
                b.__allowSmoothing && a.smoothing || (a.__context.imageSmoothingEnabled = !1),
                b.__initializeElement(a, a.__canvas));
                a.__imageVersion != a.__bitmapData.image.version && (Na.convertToCanvas(a.__bitmapData.image),
                a.__canvas.width = a.__bitmapData.width + 1,
                a.__canvas.width = a.__bitmapData.width,
                a.__canvas.height = a.__bitmapData.height,
                a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas, 0, 0),
                a.__imageVersion = a.__bitmapData.image.version);
                b.__updateClip(a);
                b.__applyStyle(a, !0, !0, !0)
            }
            ;
            Vb.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height();
                    var c = a.__graphics;
                    if (null != a.stage && a.__worldVisible && a.__renderable && null != c) {
                        A.render(c, b.__canvasRenderer);
                        if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas)
                            null != c.__canvas ? a.__canvas != c.__canvas && (null != a.__canvas && b.element.removeChild(a.__canvas),
                            a.__canvas = c.__canvas,
                            a.__context = c.__context,
                            b.__initializeElement(a, a.__canvas)) : Lf.clear(a, b);
                        if (null != a.__canvas) {
                            b.__pushMaskObject(a);
                            var d = a.__renderTransform;
                            a.__renderTransform = c.__worldTransform;
                            c.__transformDirty && (c.__transformDirty = !1,
                            a.__renderTransformChanged = !0);
                            b.__updateClip(a);
                            b.__applyStyle(a, !0, !0, !0);
                            a.__renderTransform = d;
                            b.__popMaskObject(a)
                        }
                    } else
                        Lf.clear(a, b);
                    null != a.stage && a.__worldVisible && a.__renderable && null != a.__bitmapData && a.__bitmapData.__isValid && a.__bitmapData.readable ? (b.__pushMaskObject(a),
                    null != a.__bitmapData.image.buffer.__srcImage ? (d = a.__bitmapData.image.buffer.__srcImage.src,
                    P.startsWith(d, "data:") || P.startsWith(d, "blob:") ? Vb.renderCanvas(a, b) : Vb.renderImage(a, b)) : Vb.renderCanvas(a, b),
                    b.__popMaskObject(a)) : Vb.clear(a, b)
                } else
                    b.__renderDrawableClear(a),
                    a.__cacheBitmap.stage = a.stage,
                    c = a.__cacheBitmap,
                    null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c),
                    null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src,
                    P.startsWith(d, "data:") || P.startsWith(d, "blob:") ? Vb.renderCanvas(c, b) : Vb.renderImage(c, b)) : Vb.renderCanvas(c, b),
                    b.__popMaskObject(c)) : Vb.clear(c, b);
                b.__renderEvent(a)
            }
            ;
            Vb.renderDrawableClear = function(a, b) {
                Vb.clear(a, b)
            }
            ;
            Vb.renderImage = function(a, b) {
                null != a.__canvas && (b.element.removeChild(a.__canvas),
                a.__canvas = null);
                null == a.__image && (a.__image = window.document.createElement("img"),
                a.__image.crossOrigin = "Anonymous",
                a.__image.src = a.__bitmapData.image.buffer.__srcImage.src,
                b.__initializeElement(a, a.__image));
                b.__updateClip(a);
                b.__applyStyle(a, !0, !0, !0)
            }
            ;
            var qd = function() {};
            h["openfl.display._internal.DOMDisplayObject"] = qd;
            qd.__name__ = "openfl.display._internal.DOMDisplayObject";
            qd.clear = function(a, b) {
                null != a.__cacheBitmap && Vb.clear(a.__cacheBitmap, b);
                Lf.clear(a, b)
            }
            ;
            qd.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && a.get_height();
                    var c = a.__graphics;
                    if (null != a.stage && a.__worldVisible && a.__renderable && null != c) {
                        A.render(c, b.__canvasRenderer);
                        if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas)
                            null != c.__canvas ? a.__canvas != c.__canvas && (null != a.__canvas && b.element.removeChild(a.__canvas),
                            a.__canvas = c.__canvas,
                            a.__context = c.__context,
                            b.__initializeElement(a, a.__canvas)) : Lf.clear(a, b);
                        if (null != a.__canvas) {
                            b.__pushMaskObject(a);
                            var d = a.__renderTransform;
                            a.__renderTransform = c.__worldTransform;
                            c.__transformDirty && (c.__transformDirty = !1,
                            a.__renderTransformChanged = !0);
                            b.__updateClip(a);
                            b.__applyStyle(a, !0, !0, !0);
                            a.__renderTransform = d;
                            b.__popMaskObject(a)
                        }
                    } else
                        Lf.clear(a, b)
                } else
                    b.__renderDrawableClear(a),
                    a.__cacheBitmap.stage = a.stage,
                    c = a.__cacheBitmap,
                    null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c),
                    null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src,
                    P.startsWith(d, "data:") || P.startsWith(d, "blob:") ? Vb.renderCanvas(c, b) : Vb.renderImage(c, b)) : Vb.renderCanvas(c, b),
                    b.__popMaskObject(c)) : Vb.clear(c, b);
                b.__renderEvent(a)
            }
            ;
            qd.renderDrawableClear = function(a, b) {
                qd.clear(a, b)
            }
            ;
            var dj = function() {};
            h["openfl.display._internal.DOMDisplayObjectContainer"] = dj;
            dj.__name__ = "openfl.display._internal.DOMDisplayObjectContainer";
            dj.renderDrawable = function(a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext(); ) {
                    var d = c.next();
                    null == d.stage && b.__renderDrawable(d)
                }
                for (c = a.__removedChildren.iterator(); c.hasNext(); )
                    d = c.next(),
                    null == d.stage && d.__cleanup();
                a.__removedChildren.set_length(0);
                qd.renderDrawable(a, b);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    b.__pushMaskObject(a);
                    if (null != b.__stage) {
                        c = 0;
                        for (d = a.__children; c < d.length; )
                            f = d[c],
                            ++c,
                            b.__renderDrawable(f),
                            f.__renderDirty = !1;
                        a.__renderDirty = !1
                    } else
                        for (c = 0,
                        d = a.__children; c < d.length; )
                            f = d[c],
                            ++c,
                            b.__renderDrawable(f);
                    b.__popMaskObject(a)
                } else {
                    c = 0;
                    for (d = a.__children; c < d.length; ) {
                        var f = d[c];
                        ++c;
                        b.__renderDrawableClear(f)
                    }
                    Lf.clear(a, b);
                    a.__cacheBitmap.stage = a.stage
                }
            }
            ;
            dj.renderDrawableClear = function(a, b) {
                for (var c = a.__removedChildren.iterator(); c.hasNext(); ) {
                    var d = c.next();
                    null == d.stage && b.__renderDrawableClear(d)
                }
                for (c = a.__removedChildren.iterator(); c.hasNext(); )
                    d = c.next(),
                    null == d.stage && d.__cleanup();
                a.__removedChildren.set_length(0);
                c = 0;
                for (d = a.__children; c < d.length; ) {
                    var f = d[c];
                    ++c;
                    b.__renderDrawableClear(f)
                }
                qd.clear(a, b)
            }
            ;
            var Lf = function() {};
            h["openfl.display._internal.DOMShape"] = Lf;
            Lf.__name__ = "openfl.display._internal.DOMShape";
            Lf.clear = function(a, b) {
                null != a.__canvas && (b.element.removeChild(a.__canvas),
                a.__canvas = null,
                a.__style = null)
            }
            ;
            var ej = function() {};
            h["openfl.display._internal.DOMSimpleButton"] = ej;
            ej.__name__ = "openfl.display._internal.DOMSimpleButton";
            ej.renderDrawable = function(a, b) {
                b.__pushMaskObject(a);
                for (var c = a.__previousStates.iterator(); c.hasNext(); ) {
                    var d = c.next();
                    b.__renderDrawable(d)
                }
                a.__previousStates.set_length(0);
                null != a.__currentState && (a.__currentState.stage != a.stage && a.__currentState.__setStageReference(a.stage),
                b.__renderDrawable(a.__currentState));
                b.__popMaskObject(a);
                b.__renderEvent(a)
            }
            ;
            ej.renderDrawableClear = function(a, b) {
                qd.renderDrawableClear(a, b)
            }
            ;
            var Hf = function() {};
            h["openfl.display._internal.DOMTextField"] = Hf;
            Hf.__name__ = "openfl.display._internal.DOMTextField";
            Hf.clear = function(a, b) {
                qd.clear(a, b);
                null != a.__div && (b.element.removeChild(a.__div),
                a.__div = null,
                a.__style = null)
            }
            ;
            Hf.renderDrawable = function(a, b) {
                a.__domRender = !0;
                b.__updateCacheBitmap(a, a.__forceCachedBitmapUpdate);
                a.__forceCachedBitmapUpdate = !1;
                a.__domRender = !1;
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender) {
                    a.__renderedOnCanvasWhileOnDOM && (a.__renderedOnCanvasWhileOnDOM = !1,
                    a.__isHTML && null != a.__htmlText && (a.__updateText(a.__htmlText),
                    a.__dirty = !0,
                    a.__layoutDirty = !0,
                    a.__renderDirty || (a.__renderDirty = !0,
                    a.__setParentRenderDirty())));
                    var c = a.__textEngine;
                    if (null != a.stage && a.__worldVisible && a.__renderable) {
                        if (a.__dirty || a.__renderTransformChanged || null == a.__div)
                            if ("" != c.text || c.background || c.border || 1 == c.type) {
                                a.__updateLayout();
                                null == a.__div && (a.__div = window.document.createElement("div"),
                                b.__initializeElement(a, a.__div),
                                a.__style.setProperty("outline", "none", null),
                                a.__div.addEventListener("input", function(b) {
                                    b.preventDefault();
                                    a.get_htmlText() != a.__div.innerHTML && (a.set_htmlText(a.__div.innerHTML),
                                    a.__dirty = !1,
                                    a.dispatchEvent(new Le("textInput",!1,!1,a.get_htmlText())))
                                }, !0));
                                c.wordWrap ? a.__style.setProperty("word-wrap", "break-word", null) : a.__style.setProperty("white-space", "nowrap", null);
                                a.__style.setProperty("overflow", "hidden", null);
                                c.selectable ? (a.__style.setProperty("cursor", "text", null),
                                a.__style.setProperty("-webkit-user-select", "text", null),
                                a.__style.setProperty("-moz-user-select", "text", null),
                                a.__style.setProperty("-ms-user-select", "text", null),
                                a.__style.setProperty("-o-user-select", "text", null)) : a.__style.setProperty("cursor", "inherit", null);
                                a.__div.contentEditable = 1 == c.type;
                                var d = a.__style;
                                c.background ? d.setProperty("background-color", "#" + P.hex(c.backgroundColor & 16777215, 6), null) : d.removeProperty("background-color");
                                var f = c.width
                                  , g = c.height
                                  , k = "";
                                a.__isHTML && a.__updateText(Oa.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
                                for (var l = -a.get_scrollH(), p = c.layoutGroups.iterator(); p.hasNext(); ) {
                                    var h = p.next();
                                    if (!(h.lineIndex < a.get_scrollV() - 1)) {
                                        if (h.lineIndex > c.get_bottomScrollV() - 1)
                                            break;
                                        k += '<div style="';
                                        null != h.format.font && (k += "font: " + Eb.getFont(h.format) + "; ");
                                        null != h.format.color && (k += "color: #" + P.hex(h.format.color & 16777215, 6) + "; ");
                                        1 == h.format.underline && (k += "text-decoration: underline; ");
                                        if (null != h.format.align)
                                            switch (h.format.align) {
                                            case 0:
                                                k += "text-align: center; ";
                                                break;
                                            case 2:
                                                k += "text-align: justify; ";
                                                break;
                                            case 4:
                                                k += "text-align: right; ";
                                                break;
                                            default:
                                                k += "text-align: left; "
                                            }
                                        null != h.format.leftMargin && (k += "padding-left: " + 1 * h.format.leftMargin + "px; ");
                                        null != h.format.rightMargin && (k += "padding-right: " + 1 * h.format.rightMargin + "px; ");
                                        null != h.format.indent && (k += "text-indent: " + 1 * h.format.indent + "px; ");
                                        k += "left: " + (h.offsetX + l) + "px; top: " + (h.offsetY + 0 + 3) + 'px; vertical-align: top; position: absolute;">';
                                        if (null != h.format.url && "" != h.format.url) {
                                            var u = "text-decoration: underline; ";
                                            null != h.format.color && (u += "color: #" + P.hex(h.format.color & 16777215, 6) + "; ");
                                            k += "<a style='" + u + "' href='" + h.format.url + "' target='" + h.format.target + "'>"
                                        }
                                        k = a.__isHTML ? k + P.replace(c.text.substring(h.startIndex, h.endIndex), " ", "&nbsp;") : k + P.replace(P.htmlEscape(c.text.substring(h.startIndex, h.endIndex)), " ", "&nbsp;");
                                        null != h.format.url && "" != h.format.url && (k += "</a>");
                                        k += "</div>"
                                    }
                                }
                                c.border ? (d.setProperty("border", "solid 1px #" + P.hex(c.borderColor & 16777215, 6), null),
                                a.__renderTransform.translate(-1, -1),
                                a.__renderTransformChanged = !0,
                                a.__transformDirty = !0) : "" != d.border && (d.removeProperty("border"),
                                a.__renderTransformChanged = !0);
                                d.setProperty("width", f + "px", null);
                                d.setProperty("height", g + "px", null);
                                a.__div.innerHTML = k;
                                a.__dirty = !1
                            } else
                                null != a.__div && (b.element.removeChild(a.__div),
                                a.__div = null);
                        null != a.__div && (c = b.__roundPixels,
                        b.__roundPixels = !0,
                        b.__updateClip(a),
                        b.__applyStyle(a, !0, !0, !0),
                        b.__roundPixels = c)
                    } else
                        Hf.clear(a, b)
                } else
                    b.__renderDrawableClear(a),
                    a.__cacheBitmap.stage = a.stage,
                    c = a.__cacheBitmap,
                    null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c),
                    null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src,
                    P.startsWith(d, "data:") || P.startsWith(d, "blob:") ? Vb.renderCanvas(c, b) : Vb.renderImage(c, b)) : Vb.renderCanvas(c, b),
                    b.__popMaskObject(c)) : Vb.clear(c, b);
                b.__renderEvent(a)
            }
            ;
            Hf.renderDrawableClear = function(a, b) {
                Hf.clear(a, b)
            }
            ;
            var If = function() {};
            h["openfl.display._internal.DOMTilemap"] = If;
            If.__name__ = "openfl.display._internal.DOMTilemap";
            If.clear = function(a, b) {
                qd.clear(a, b);
                null != a.__canvas && (b.element.removeChild(a.__canvas),
                a.__canvas = null,
                a.__style = null)
            }
            ;
            If.renderDrawable = function(a, b) {
                b.__updateCacheBitmap(a, !1);
                if (null == a.__cacheBitmap || a.__isCacheBitmapRender)
                    if (null != a.stage && a.__worldVisible && a.__renderable && 0 < a.__group.__tiles.length) {
                        null == a.__canvas && (a.__canvas = window.document.createElement("canvas"),
                        a.__context = a.__canvas.getContext("2d"),
                        b.__initializeElement(a, a.__canvas));
                        a.__canvas.width = a.__width;
                        a.__canvas.height = a.__height;
                        b.__canvasRenderer.context = a.__context;
                        var c = a.__renderTransform;
                        a.__renderTransform = ta.__identity;
                        var d = b.__canvasRenderer;
                        if ((null != a.opaqueBackground || null != a.__graphics) && a.__renderable) {
                            var f = d.__getAlpha(a.__worldAlpha);
                            if (!(0 >= f)) {
                                if (null != a.opaqueBackground && !a.__isCacheBitmapRender && 0 < a.get_width() && 0 < a.get_height()) {
                                    d.__setBlendMode(a.__worldBlendMode);
                                    d.__pushMaskObject(a);
                                    var g = d.context;
                                    d.setTransform(a.__renderTransform, g);
                                    var k = a.opaqueBackground;
                                    g.fillStyle = "rgb(" + (k >>> 16 & 255) + "," + (k >>> 8 & 255) + "," + (k & 255) + ")";
                                    g.fillRect(0, 0, a.get_width(), a.get_height());
                                    d.__popMaskObject(a)
                                }
                                if (null != a.__graphics && a.__renderable && (f = d.__getAlpha(a.__worldAlpha),
                                !(0 >= f))) {
                                    var l = a.__graphics;
                                    if (null != l) {
                                        A.render(l, d);
                                        var h = l.__width
                                          , u = l.__height;
                                        k = l.__canvas;
                                        if (null != k && l.__visible && 1 <= h && 1 <= u) {
                                            var w = l.__worldTransform;
                                            g = d.context;
                                            var n = a.__scrollRect
                                              , r = a.__worldScale9Grid;
                                            if (null == n || 0 < n.width && 0 < n.height) {
                                                d.__setBlendMode(a.__worldBlendMode);
                                                d.__pushMaskObject(a);
                                                g.globalAlpha = f;
                                                if (null != r && 0 == w.b && 0 == w.c) {
                                                    var x = d.__pixelRatio;
                                                    f = ta.__pool.get();
                                                    f.translate(w.tx, w.ty);
                                                    d.setTransform(f, g);
                                                    ta.__pool.release(f);
                                                    f = l.__bounds;
                                                    var m = l.__renderTransform.a / l.__bitmapScale
                                                      , C = l.__renderTransform.d / l.__bitmapScale
                                                      , z = m * w.a
                                                      , K = C * w.d;
                                                    w = Math.max(1, Math.round(r.x * m));
                                                    l = Math.round(r.y * C);
                                                    n = Math.max(1, Math.round((f.get_right() - r.get_right()) * m));
                                                    var I = Math.round((f.get_bottom() - r.get_bottom()) * C);
                                                    m = Math.round(r.width * m);
                                                    r = Math.round(r.height * C);
                                                    C = Math.round(w / x);
                                                    var B = Math.round(l / x)
                                                      , t = Math.round(n / x);
                                                    x = Math.round(I / x);
                                                    z = f.width * z - C - t;
                                                    f = f.height * K - B - x;
                                                    d.applySmoothing(g, !1);
                                                    0 != m && 0 != r ? (g.drawImage(k, 0, 0, w, l, 0, 0, C, B),
                                                    g.drawImage(k, w, 0, m, l, C, 0, z, B),
                                                    g.drawImage(k, w + m, 0, n, l, C + z, 0, t, B),
                                                    g.drawImage(k, 0, l, w, r, 0, B, C, f),
                                                    g.drawImage(k, w, l, m, r, C, B, z, f),
                                                    g.drawImage(k, w + m, l, n, r, C + z, B, t, f),
                                                    g.drawImage(k, 0, l + r, w, I, 0, B + f, C, x),
                                                    g.drawImage(k, w, l + r, m, I, C, B + f, z, x),
                                                    g.drawImage(k, w + m, l + r, n, I, C + z, B + f, t, x)) : 0 == m && 0 != r ? (u = C + z + t,
                                                    g.drawImage(k, 0, 0, h, l, 0, 0, u, B),
                                                    g.drawImage(k, 0, l, h, r, 0, B, u, f),
                                                    g.drawImage(k, 0, l + r, h, I, 0, B + f, u, x)) : 0 == r && 0 != m && (h = B + f + x,
                                                    g.drawImage(k, 0, 0, w, u, 0, 0, C, h),
                                                    g.drawImage(k, w, 0, m, u, C, 0, z, h),
                                                    g.drawImage(k, w + m, 0, n, u, C + z, 0, t, h))
                                                } else
                                                    d.setTransform(w, g),
                                                    g.drawImage(k, 0, 0, h, u);
                                                d.__popMaskObject(a)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        d = b.__canvasRenderer;
                        a.__renderable && 0 != a.__group.__tiles.length && (f = d.__getAlpha(a.__worldAlpha),
                        0 >= f || (g = d.context,
                        d.__setBlendMode(a.__worldBlendMode),
                        d.__pushMaskObject(a),
                        k = oa.__pool.get(),
                        k.setTo(0, 0, a.__width, a.__height),
                        d.__pushMaskRect(k, a.__renderTransform),
                        d.__allowSmoothing && a.smoothing || (g.imageSmoothingEnabled = !1),
                        ff.renderTileContainer(a.__group, d, a.__renderTransform, a.__tileset, d.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, f, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, k),
                        d.__allowSmoothing && a.smoothing || (g.imageSmoothingEnabled = !0),
                        d.__popMaskRect(),
                        d.__popMaskObject(a),
                        oa.__pool.release(k)));
                        a.__renderTransform = c;
                        b.__canvasRenderer.context = null;
                        b.__updateClip(a);
                        b.__applyStyle(a, !0, !1, !0)
                    } else
                        If.clear(a, b);
                else
                    b.__renderDrawableClear(a),
                    a.__cacheBitmap.stage = a.stage,
                    c = a.__cacheBitmap,
                    null != c.stage && c.__worldVisible && c.__renderable && null != c.__bitmapData && c.__bitmapData.__isValid && c.__bitmapData.readable ? (b.__pushMaskObject(c),
                    null != c.__bitmapData.image.buffer.__srcImage ? (d = c.__bitmapData.image.buffer.__srcImage.src,
                    P.startsWith(d, "data:") || P.startsWith(d, "blob:") ? Vb.renderCanvas(c, b) : Vb.renderImage(c, b)) : Vb.renderCanvas(c, b),
                    b.__popMaskObject(c)) : Vb.clear(c, b);
                b.__renderEvent(a)
            }
            ;
            If.renderDrawableClear = function(a, b) {
                If.clear(a, b)
            }
            ;
            var gf = function() {};
            h["openfl.display._internal.DOMVideo"] = gf;
            gf.__name__ = "openfl.display._internal.DOMVideo";
            gf.clear = function(a, b) {
                qd.clear(a, b);
                a.__active && (b.element.removeChild(a.__stream.__video),
                a.__active = !1)
            }
            ;
            gf.render = function(a, b) {
                null != a.stage && null != a.__stream && a.__worldVisible && a.__renderable ? (a.__active || (b.__initializeElement(a, a.__stream.__video),
                a.__active = !0,
                a.__dirty = !0),
                a.__dirty && (a.__stream.__video.width = a.__width | 0,
                a.__stream.__video.height = a.__height | 0,
                a.__dirty = !1),
                b.__updateClip(a),
                b.__applyStyle(a, !0, !0, !0)) : gf.clear(a, b)
            }
            ;
            gf.renderDrawable = function(a, b) {
                gf.render(a, b);
                b.__renderEvent(a)
            }
            ;
            gf.renderDrawableClear = function(a, b) {
                qd.renderDrawableClear(a, b)
            }
            ;
            var ve = function(a) {
                this.buffer = a;
                this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
                this.prev = Y.UNKNOWN
            };
            h["openfl.display._internal.DrawCommandReader"] = ve;
            ve.__name__ = "openfl.display._internal.DrawCommandReader";
            ve.prototype = {
                destroy: function() {
                    this.buffer = null;
                    this.reset()
                },
                reset: function() {
                    this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0
                },
                __class__: ve
            };
            var Y = N["openfl.display._internal.DrawCommandType"] = {
                __ename__: "openfl.display._internal.DrawCommandType",
                __constructs__: null,
                BEGIN_BITMAP_FILL: {
                    _hx_name: "BEGIN_BITMAP_FILL",
                    _hx_index: 0,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                BEGIN_FILL: {
                    _hx_name: "BEGIN_FILL",
                    _hx_index: 1,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                BEGIN_GRADIENT_FILL: {
                    _hx_name: "BEGIN_GRADIENT_FILL",
                    _hx_index: 2,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                BEGIN_SHADER_FILL: {
                    _hx_name: "BEGIN_SHADER_FILL",
                    _hx_index: 3,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                CUBIC_CURVE_TO: {
                    _hx_name: "CUBIC_CURVE_TO",
                    _hx_index: 4,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                CURVE_TO: {
                    _hx_name: "CURVE_TO",
                    _hx_index: 5,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                DRAW_CIRCLE: {
                    _hx_name: "DRAW_CIRCLE",
                    _hx_index: 6,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                DRAW_ELLIPSE: {
                    _hx_name: "DRAW_ELLIPSE",
                    _hx_index: 7,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                DRAW_QUADS: {
                    _hx_name: "DRAW_QUADS",
                    _hx_index: 8,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                DRAW_RECT: {
                    _hx_name: "DRAW_RECT",
                    _hx_index: 9,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                DRAW_ROUND_RECT: {
                    _hx_name: "DRAW_ROUND_RECT",
                    _hx_index: 10,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                DRAW_TILES: {
                    _hx_name: "DRAW_TILES",
                    _hx_index: 11,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                DRAW_TRIANGLES: {
                    _hx_name: "DRAW_TRIANGLES",
                    _hx_index: 12,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                END_FILL: {
                    _hx_name: "END_FILL",
                    _hx_index: 13,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                LINE_BITMAP_STYLE: {
                    _hx_name: "LINE_BITMAP_STYLE",
                    _hx_index: 14,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                LINE_GRADIENT_STYLE: {
                    _hx_name: "LINE_GRADIENT_STYLE",
                    _hx_index: 15,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                LINE_STYLE: {
                    _hx_name: "LINE_STYLE",
                    _hx_index: 16,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                LINE_TO: {
                    _hx_name: "LINE_TO",
                    _hx_index: 17,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                MOVE_TO: {
                    _hx_name: "MOVE_TO",
                    _hx_index: 18,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                OVERRIDE_BLEND_MODE: {
                    _hx_name: "OVERRIDE_BLEND_MODE",
                    _hx_index: 19,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                OVERRIDE_MATRIX: {
                    _hx_name: "OVERRIDE_MATRIX",
                    _hx_index: 20,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                WINDING_EVEN_ODD: {
                    _hx_name: "WINDING_EVEN_ODD",
                    _hx_index: 21,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                WINDING_NON_ZERO: {
                    _hx_name: "WINDING_NON_ZERO",
                    _hx_index: 22,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                },
                UNKNOWN: {
                    _hx_name: "UNKNOWN",
                    _hx_index: 23,
                    __enum__: "openfl.display._internal.DrawCommandType",
                    toString: r
                }
            };
            Y.__constructs__ = [Y.BEGIN_BITMAP_FILL, Y.BEGIN_FILL, Y.BEGIN_GRADIENT_FILL, Y.BEGIN_SHADER_FILL, Y.CUBIC_CURVE_TO, Y.CURVE_TO, Y.DRAW_CIRCLE, Y.DRAW_ELLIPSE, Y.DRAW_QUADS, Y.DRAW_RECT, Y.DRAW_ROUND_RECT, Y.DRAW_TILES, Y.DRAW_TRIANGLES, Y.END_FILL, Y.LINE_BITMAP_STYLE, Y.LINE_GRADIENT_STYLE, Y.LINE_STYLE, Y.LINE_TO, Y.MOVE_TO, Y.OVERRIDE_BLEND_MODE, Y.OVERRIDE_MATRIX, Y.WINDING_EVEN_ODD, Y.WINDING_NON_ZERO, Y.UNKNOWN];
            Y.__empty_constructs__ = [Y.BEGIN_BITMAP_FILL, Y.BEGIN_FILL, Y.BEGIN_GRADIENT_FILL, Y.BEGIN_SHADER_FILL, Y.CUBIC_CURVE_TO, Y.CURVE_TO, Y.DRAW_CIRCLE, Y.DRAW_ELLIPSE, Y.DRAW_QUADS, Y.DRAW_RECT, Y.DRAW_ROUND_RECT, Y.DRAW_TILES, Y.DRAW_TRIANGLES, Y.END_FILL, Y.LINE_BITMAP_STYLE, Y.LINE_GRADIENT_STYLE, Y.LINE_STYLE, Y.LINE_TO, Y.MOVE_TO, Y.OVERRIDE_BLEND_MODE, Y.OVERRIDE_MATRIX, Y.WINDING_EVEN_ODD, Y.WINDING_NON_ZERO, Y.UNKNOWN];
            var kg = function(a, b, c, d, f, g, k) {
                null == k && (k = !1);
                null == g && (g = !1);
                null == f && (f = !1);
                null == d && (d = 0);
                null == c && (c = 2);
                null == b && (b = 5);
                null == a && (a = 0);
                this.wrap = a;
                this.filter = b;
                this.mipfilter = c;
                this.lodBias = d;
                this.ignoreSampler = f;
                this.centroid = g;
                this.textureAlpha = k
            };
            h["openfl.display._internal.SamplerState"] = kg;
            kg.__name__ = "openfl.display._internal.SamplerState";
            kg.prototype = {
                clone: function() {
                    var a = new kg(this.wrap,this.filter,this.mipfilter,this.lodBias,this.ignoreSampler,this.centroid,this.textureAlpha);
                    a.mipmapGenerated = this.mipmapGenerated;
                    return a
                },
                copyFrom: function(a) {
                    null == a || a.ignoreSampler || (this.wrap = a.wrap,
                    this.filter = a.filter,
                    this.mipfilter = a.mipfilter,
                    this.lodBias = a.lodBias,
                    this.centroid = a.centroid,
                    this.textureAlpha = a.textureAlpha)
                },
                equals: function(a) {
                    return null == a ? !1 : this.wrap == a.wrap && this.filter == a.filter && this.mipfilter == a.mipfilter && this.lodBias == a.lodBias ? this.textureAlpha == a.textureAlpha : !1
                },
                __class__: kg
            };
            var hj = function() {
                this.inputRefs = [];
                this.inputFilter = [];
                this.inputMipFilter = [];
                this.inputs = [];
                this.inputWrap = [];
                this.overrideIntNames = [];
                this.overrideIntValues = [];
                this.overrideFloatNames = [];
                this.overrideFloatValues = [];
                this.overrideBoolNames = [];
                this.overrideBoolValues = [];
                this.paramLengths = [];
                this.paramPositions = [];
                this.paramRefs_Bool = [];
                this.paramRefs_Float = [];
                this.paramRefs_Int = [];
                this.paramTypes = []
            };
            h["openfl.display._internal.ShaderBuffer"] = hj;
            hj.__name__ = "openfl.display._internal.ShaderBuffer";
            hj.prototype = {
                addBoolOverride: function(a, b) {
                    this.overrideBoolNames[this.overrideBoolCount] = a;
                    this.overrideBoolValues[this.overrideBoolCount] = b;
                    this.overrideBoolCount++
                },
                addFloatOverride: function(a, b) {
                    this.overrideFloatNames[this.overrideFloatCount] = a;
                    this.overrideFloatValues[this.overrideFloatCount] = b;
                    this.overrideFloatCount++
                },
                clearOverride: function() {
                    this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = 0
                },
                update: function(a) {
                    this.paramIntCount = this.paramFloatCount = this.paramDataLength = this.paramCount = this.paramBoolCount = this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = this.inputCount = 0;
                    this.shader = null;
                    if (null != a) {
                        a.__init();
                        this.inputCount = a.__inputBitmapData.length;
                        for (var b, c = 0, d = this.inputCount; c < d; ) {
                            var f = c++;
                            b = a.__inputBitmapData[f];
                            this.inputs[f] = b.input;
                            this.inputFilter[f] = b.filter;
                            this.inputMipFilter[f] = b.mipFilter;
                            this.inputRefs[f] = b;
                            this.inputWrap[f] = b.wrap
                        }
                        b = a.__paramBool.length;
                        var g = a.__paramFloat.length
                          , k = a.__paramInt.length;
                        this.paramCount = b + g + k;
                        this.paramBoolCount = b;
                        this.paramFloatCount = g;
                        this.paramIntCount = k;
                        var l = 0;
                        c = 0;
                        for (d = b; c < d; ) {
                            f = c++;
                            var h = a.__paramBool[f];
                            this.paramPositions[l] = this.paramDataLength;
                            var u = null != h.value ? h.value.length : 0;
                            this.paramLengths[l] = u;
                            this.paramDataLength += u;
                            this.paramTypes[l] = 0;
                            this.paramRefs_Bool[f] = h;
                            ++l
                        }
                        c = 0;
                        for (d = g; c < d; )
                            f = c++,
                            h = a.__paramFloat[f],
                            this.paramPositions[l] = this.paramDataLength,
                            u = null != h.value ? h.value.length : 0,
                            this.paramLengths[l] = u,
                            this.paramDataLength += u,
                            this.paramTypes[l] = 1,
                            this.paramRefs_Float[f] = h,
                            ++l;
                        c = 0;
                        for (d = k; c < d; )
                            f = c++,
                            h = a.__paramInt[f],
                            this.paramPositions[l] = this.paramDataLength,
                            u = null != h.value ? h.value.length : 0,
                            this.paramLengths[l] = u,
                            this.paramDataLength += u,
                            this.paramTypes[l] = 2,
                            this.paramRefs_Int[f] = h,
                            ++l;
                        if (0 < this.paramDataLength)
                            if (null == this.paramData) {
                                c = this.paramDataLength;
                                var w = h = l = k = d = null;
                                this.paramData = c = null != c ? new Float32Array(c) : null != d ? new Float32Array(d) : null != k ? new Float32Array(k.__array) : null != l ? new Float32Array(l) : null != h ? null == w ? new Float32Array(h,0) : new Float32Array(h,0,w) : null
                            } else
                                this.paramDataLength > this.paramData.length && (c = this.paramDataLength,
                                w = h = l = k = d = null,
                                c = null != c ? new Float32Array(c) : null != d ? new Float32Array(d) : null != k ? new Float32Array(k.__array) : null != l ? new Float32Array(l) : null != h ? null == w ? new Float32Array(h,0) : new Float32Array(h,0,w) : null,
                                c.set(this.paramData),
                                this.paramData = c);
                        c = w = h = l = k = 0;
                        for (d = this.paramCount; c < d; )
                            if (f = c++,
                            u = this.paramLengths[f],
                            f < b) {
                                f = this.paramRefs_Bool[k];
                                ++k;
                                for (var n = 0; n < u; ) {
                                    var r = n++;
                                    this.paramData[w] = f.value[r] ? 1 : 0;
                                    ++w
                                }
                            } else if (f < b + g)
                                for (f = this.paramRefs_Float[l],
                                ++l,
                                n = 0; n < u; )
                                    r = n++,
                                    this.paramData[w] = f.value[r],
                                    ++w;
                            else
                                for (f = this.paramRefs_Int[h],
                                ++h,
                                n = 0; n < u; )
                                    r = n++,
                                    this.paramData[w] = f.value[r],
                                    ++w;
                        this.shader = a
                    }
                },
                __class__: hj
            };
            var sb = function(a, b, c) {
                this.driverInfo = "OpenGL (Direct blitting)";
                this.backBufferHeight = this.backBufferWidth = 0;
                qa.call(this);
                this.__stage = a;
                this.__contextState = b;
                this.__stage3D = c;
                this.__context = a.window.context;
                this.gl = this.__context.webgl;
                null == this.__contextState && (this.__contextState = new Bh);
                this.__state = new Bh;
                var d;
                this.__vertexConstants = new Float32Array(512);
                this.__fragmentConstants = new Float32Array(512);
                var f = null;
                a = [1, 1, 1, 1];
                var g = d = c = b = null;
                this.__positionScale = a = null != f ? new Float32Array(f) : null != a ? new Float32Array(a) : null != b ? new Float32Array(b.__array) : null != c ? new Float32Array(c) : null != d ? null == g ? new Float32Array(d,0) : new Float32Array(d,0,g) : null;
                this.__programs = new Ia;
                -1 == sb.__glMaxViewportDims && (sb.__glMaxViewportDims = this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS));
                this.maxBackBufferHeight = this.maxBackBufferWidth = sb.__glMaxViewportDims;
                -1 == sb.__glMaxTextureMaxAnisotropy && (a = this.gl.getExtension("EXT_texture_filter_anisotropic"),
                null != a && Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT") || (a = this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),
                null != a && Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT") || (a = this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),
                null != a ? (sb.__glTextureMaxAnisotropy = a.TEXTURE_MAX_ANISOTROPY_EXT,
                sb.__glMaxTextureMaxAnisotropy = this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT)) : (sb.__glTextureMaxAnisotropy = 0,
                sb.__glMaxTextureMaxAnisotropy = 0));
                -1 == sb.__glDepthStencil && (sb.__glDepthStencil = this.gl.DEPTH_STENCIL);
                -1 == sb.__glMemoryTotalAvailable && (a = this.gl.getExtension("NVX_gpu_memory_info"),
                null != a && (sb.__glMemoryTotalAvailable = a.GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX,
                sb.__glMemoryCurrentAvailable = a.GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX));
                null == sb.__driverInfo && (a = this.gl.getParameter(this.gl.VENDOR),
                b = this.gl.getParameter(this.gl.VERSION),
                c = this.gl.getParameter(this.gl.RENDERER),
                d = this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION),
                sb.__driverInfo = "OpenGL Vendor=" + a + " Version=" + b + " Renderer=" + c + " GLSL=" + d);
                this.driverInfo = sb.__driverInfo;
                this.__quadIndexBufferElements = 16383;
                f = this.__quadIndexBufferCount = 6 * this.__quadIndexBufferElements;
                g = d = c = b = a = null;
                a = null != f ? new Uint16Array(f) : null != a ? new Uint16Array(a) : null != b ? new Uint16Array(b.__array) : null != c ? new Uint16Array(c) : null != d ? null == g ? new Uint16Array(d,0) : new Uint16Array(d,0,g) : null;
                d = c = b = 0;
                for (g = this.__quadIndexBufferElements; d < g; )
                    d++,
                    a[b] = c,
                    a[b + 1] = c + 1,
                    a[b + 2] = c + 2,
                    a[b + 3] = c + 2,
                    a[b + 4] = c + 1,
                    a[b + 5] = c + 3,
                    b += 6,
                    c += 4;
                this.__quadIndexBuffer = this.createIndexBuffer(this.__quadIndexBufferCount);
                this.__quadIndexBuffer.uploadFromTypedArray(a)
            };
            h["openfl.display3D.Context3D"] = sb;
            sb.__name__ = "openfl.display3D.Context3D";
            sb.__super__ = qa;
            sb.prototype = v(qa.prototype, {
                clear: function(a, b, c, d, f, g, k) {
                    null == k && (k = 7);
                    null == g && (g = 0);
                    null == f && (f = 1);
                    null == d && (d = 1);
                    null == c && (c = 0);
                    null == b && (b = 0);
                    null == a && (a = 0);
                    this.__flushGLFramebuffer();
                    this.__flushGLViewport();
                    var l = 0;
                    if (0 != (k & 1)) {
                        null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared || (this.__stage.__renderer.__cleared = !0),
                        this.__cleared = !0);
                        l |= this.gl.COLOR_BUFFER_BIT;
                        if (1 != this.__contextState.colorMaskRed || 1 != this.__contextState.colorMaskGreen || 1 != this.__contextState.colorMaskBlue || 1 != this.__contextState.colorMaskAlpha)
                            this.gl.colorMask(!0, !0, !0, !0),
                            this.__contextState.colorMaskRed = !0,
                            this.__contextState.colorMaskGreen = !0,
                            this.__contextState.colorMaskBlue = !0,
                            this.__contextState.colorMaskAlpha = !0;
                        this.gl.clearColor(a, b, c, d)
                    }
                    0 != (k & 2) && (l |= this.gl.DEPTH_BUFFER_BIT,
                    1 != this.__contextState.depthMask && (this.gl.depthMask(!0),
                    this.__contextState.depthMask = !0),
                    this.gl.clearDepth(f));
                    0 != (k & 4) && (l |= this.gl.STENCIL_BUFFER_BIT,
                    255 != this.__contextState.stencilWriteMask && (this.gl.stencilMask(255),
                    this.__contextState.stencilWriteMask = 255),
                    this.gl.clearStencil(g),
                    this.__contextState.stencilWriteMask = 255);
                    0 != l && (this.__setGLScissorTest(!1),
                    this.gl.clear(l))
                },
                configureBackBuffer: function(a, b, c, d, f, g) {
                    null == g && (g = !1);
                    null == f && (f = !1);
                    null == d && (d = !0);
                    f && (a = a * this.__stage.window.__scale | 0,
                    b = b * this.__stage.window.__scale | 0);
                    if (null == this.__stage3D)
                        this.backBufferWidth = a,
                        this.backBufferHeight = b,
                        this.__backBufferAntiAlias = c,
                        this.__state.backBufferEnableDepthAndStencil = d,
                        this.__backBufferWantsBestResolution = f,
                        this.__backBufferWantsBestResolutionOnBrowserZoom = g;
                    else {
                        if (null == this.__backBufferTexture || this.backBufferWidth != a || this.backBufferHeight != b) {
                            null != this.__backBufferTexture && this.__backBufferTexture.dispose();
                            null != this.__frontBufferTexture && this.__frontBufferTexture.dispose();
                            this.__backBufferTexture = this.createRectangleTexture(a, b, 1, !0);
                            this.__frontBufferTexture = this.createRectangleTexture(a, b, 1, !0);
                            null == this.__stage3D.__vertexBuffer && (this.__stage3D.__vertexBuffer = this.createVertexBuffer(4, 5));
                            var k = f ? a : a * this.__stage.window.__scale | 0
                              , l = f ? b : b * this.__stage.window.__scale | 0;
                            k = ua.toFloatVector(null, null, null, [k, l, 0, 1, 1, 0, l, 0, 0, 1, k, 0, 0, 1, 0, 0, 0, 0, 0, 0]);
                            this.__stage3D.__vertexBuffer.uploadFromVector(k, 0, 20);
                            null == this.__stage3D.__indexBuffer && (this.__stage3D.__indexBuffer = this.createIndexBuffer(6),
                            k = ua.toIntVector(null, null, null, [0, 1, 2, 2, 1, 3]),
                            this.__stage3D.__indexBuffer.uploadFromVector(k, 0, 6))
                        }
                        this.backBufferWidth = a;
                        this.backBufferHeight = b;
                        this.__backBufferAntiAlias = c;
                        this.__state.backBufferEnableDepthAndStencil = d;
                        this.__backBufferWantsBestResolution = f;
                        this.__backBufferWantsBestResolutionOnBrowserZoom = g;
                        this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(d, c, 0);
                        this.__frontBufferTexture.__getGLFramebuffer(d, c, 0)
                    }
                },
                createIndexBuffer: function(a, b) {
                    null == b && (b = 1);
                    return new Kk(this,a,b)
                },
                createProgram: function(a) {
                    null == a && (a = 0);
                    return new Lk(this,a)
                },
                createRectangleTexture: function(a, b, c, d) {
                    return new Ch(this,a,b,Ll.toString(c),d)
                },
                createVertexBuffer: function(a, b, c) {
                    null == c && (c = 1);
                    return new Mk(this,a,b,xl.toString(c))
                },
                drawTriangles: function(a, b, c) {
                    null == c && (c = -1);
                    null == b && (b = 0);
                    null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared ? this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1) : this.__stage.__renderer.__clear());
                    this.__flushGL();
                    null != this.__state.program && this.__state.program.__flush();
                    c = -1 == c ? a.__numIndices : 3 * c;
                    this.__bindGLElementArrayBuffer(a.__id);
                    this.gl.drawElements(this.gl.TRIANGLES, c, this.gl.UNSIGNED_SHORT, 2 * b)
                },
                present: function() {
                    this.setRenderToBackBuffer();
                    if (null != this.__stage3D && null != this.__backBufferTexture) {
                        this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1);
                        var a = this.__backBufferTexture;
                        this.__backBufferTexture = this.__frontBufferTexture;
                        this.__frontBufferTexture = a;
                        this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil, this.__backBufferAntiAlias, 0);
                        this.__cleared = !1
                    }
                    this.__present = !0
                },
                setBlendFactors: function(a, b) {
                    this.setBlendFactorsSeparate(a, b, a, b)
                },
                setBlendFactorsSeparate: function(a, b, c, d) {
                    this.__state.blendSourceRGBFactor = a;
                    this.__state.blendDestinationRGBFactor = b;
                    this.__state.blendSourceAlphaFactor = c;
                    this.__state.blendDestinationAlphaFactor = d;
                    this.__setGLBlendEquation(this.gl.FUNC_ADD)
                },
                setColorMask: function(a, b, c, d) {
                    this.__state.colorMaskRed = a;
                    this.__state.colorMaskGreen = b;
                    this.__state.colorMaskBlue = c;
                    this.__state.colorMaskAlpha = d
                },
                setCulling: function(a) {
                    this.__state.culling = a
                },
                setDepthTest: function(a, b) {
                    this.__state.depthMask = a;
                    this.__state.depthCompareMode = b
                },
                setProgram: function(a) {
                    this.__state.program = a;
                    this.__state.shader = null;
                    if (null != a)
                        for (var b = 0, c = a.__samplerStates.length; b < c; ) {
                            var d = b++;
                            null == this.__state.samplerStates[d] ? this.__state.samplerStates[d] = a.__samplerStates[d].clone() : this.__state.samplerStates[d].copyFrom(a.__samplerStates[d])
                        }
                },
                setProgramConstantsFromMatrix: function(a, b, c, d) {
                    null == d && (d = !1);
                    if (null != this.__state.program && 1 == this.__state.program.__format)
                        this.__flushGLProgram(),
                        a = new Float32Array(16),
                        a[0] = c.rawData.get(0),
                        a[1] = c.rawData.get(1),
                        a[2] = c.rawData.get(2),
                        a[3] = c.rawData.get(3),
                        a[4] = c.rawData.get(4),
                        a[5] = c.rawData.get(5),
                        a[6] = c.rawData.get(6),
                        a[7] = c.rawData.get(7),
                        a[8] = c.rawData.get(8),
                        a[9] = c.rawData.get(9),
                        a[10] = c.rawData.get(10),
                        a[11] = c.rawData.get(11),
                        a[12] = c.rawData.get(12),
                        a[13] = c.rawData.get(13),
                        a[14] = c.rawData.get(14),
                        a[15] = c.rawData.get(15),
                        Lc.uniformMatrix4fv(this.gl, b, d, a);
                    else {
                        var f = (a = 1 == a) ? this.__vertexConstants : this.__fragmentConstants;
                        c = c.rawData;
                        var g = 4 * b;
                        d ? (f[g++] = c.get(0),
                        f[g++] = c.get(4),
                        f[g++] = c.get(8),
                        f[g++] = c.get(12),
                        f[g++] = c.get(1),
                        f[g++] = c.get(5),
                        f[g++] = c.get(9),
                        f[g++] = c.get(13),
                        f[g++] = c.get(2),
                        f[g++] = c.get(6),
                        f[g++] = c.get(10),
                        f[g++] = c.get(14),
                        f[g++] = c.get(3),
                        f[g++] = c.get(7),
                        f[g++] = c.get(11)) : (f[g++] = c.get(0),
                        f[g++] = c.get(1),
                        f[g++] = c.get(2),
                        f[g++] = c.get(3),
                        f[g++] = c.get(4),
                        f[g++] = c.get(5),
                        f[g++] = c.get(6),
                        f[g++] = c.get(7),
                        f[g++] = c.get(8),
                        f[g++] = c.get(9),
                        f[g++] = c.get(10),
                        f[g++] = c.get(11),
                        f[g++] = c.get(12),
                        f[g++] = c.get(13),
                        f[g++] = c.get(14));
                        f[g++] = c.get(15);
                        null != this.__state.program && this.__state.program.__markDirty(a, b, 4)
                    }
                },
                setRenderToBackBuffer: function() {
                    this.__state.renderToTexture = null
                },
                setRenderToTexture: function(a, b, c, d) {
                    null == d && (d = 0);
                    null == c && (c = 0);
                    null == b && (b = !1);
                    this.__state.renderToTexture = a;
                    this.__state.renderToTextureDepthStencil = b;
                    this.__state.renderToTextureAntiAlias = c;
                    this.__state.renderToTextureSurfaceSelector = d
                },
                setSamplerStateAt: function(a, b, c, d) {
                    null == this.__state.samplerStates[a] && (this.__state.samplerStates[a] = new kg);
                    a = this.__state.samplerStates[a];
                    a.wrap = b;
                    a.filter = c;
                    a.mipfilter = d
                },
                setScissorRectangle: function(a) {
                    null != a ? (this.__state.scissorEnabled = !0,
                    this.__state.scissorRectangle.copyFrom(a)) : this.__state.scissorEnabled = !1
                },
                setStencilActions: function(a, b, c, d, f) {
                    null == f && (f = 5);
                    null == d && (d = 5);
                    null == c && (c = 5);
                    null == b && (b = 0);
                    null == a && (a = 2);
                    this.__state.stencilTriangleFace = a;
                    this.__state.stencilCompareMode = b;
                    this.__state.stencilPass = c;
                    this.__state.stencilDepthFail = d;
                    this.__state.stencilFail = f
                },
                setStencilReferenceValue: function(a, b, c) {
                    null == c && (c = 255);
                    null == b && (b = 255);
                    this.__state.stencilReferenceValue = a;
                    this.__state.stencilReadMask = b;
                    this.__state.stencilWriteMask = c
                },
                setTextureAt: function(a, b) {
                    this.__state.textures[a] = b
                },
                setVertexBufferAt: function(a, b, c, d) {
                    null == d && (d = 4);
                    null == c && (c = 0);
                    if (!(0 > a))
                        if (null == b)
                            this.gl.disableVertexAttribArray(a),
                            this.__bindGLArrayBuffer(null);
                        else
                            switch (this.__bindGLArrayBuffer(b.__id),
                            this.gl.enableVertexAttribArray(a),
                            c *= 4,
                            d) {
                            case 0:
                                this.gl.vertexAttribPointer(a, 4, this.gl.UNSIGNED_BYTE, !0, b.__stride, c);
                                break;
                            case 1:
                                this.gl.vertexAttribPointer(a, 1, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 2:
                                this.gl.vertexAttribPointer(a, 2, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 3:
                                this.gl.vertexAttribPointer(a, 3, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            case 4:
                                this.gl.vertexAttribPointer(a, 4, this.gl.FLOAT, !1, b.__stride, c);
                                break;
                            default:
                                throw new Xc;
                            }
                },
                __bindGLArrayBuffer: function(a) {
                    this.__contextState.__currentGLArrayBuffer != a && (this.gl.bindBuffer(this.gl.ARRAY_BUFFER, a),
                    this.__contextState.__currentGLArrayBuffer = a)
                },
                __bindGLElementArrayBuffer: function(a) {
                    this.__contextState.__currentGLElementArrayBuffer != a && (this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, a),
                    this.__contextState.__currentGLElementArrayBuffer = a)
                },
                __bindGLFramebuffer: function(a) {
                    this.__contextState.__currentGLFramebuffer != a && (this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, a),
                    this.__contextState.__currentGLFramebuffer = a)
                },
                __bindGLTexture2D: function(a) {
                    this.gl.bindTexture(this.gl.TEXTURE_2D, a);
                    this.__contextState.__currentGLTexture2D = a
                },
                __bindGLTextureCubeMap: function(a) {
                    this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP, a);
                    this.__contextState.__currentGLTextureCubeMap = a
                },
                __dispose: function() {
                    this.driverInfo += " (Disposed)";
                    null != this.__stage3D && (this.__stage3D.__indexBuffer = null,
                    this.__stage3D.__vertexBuffer = null,
                    this.__stage3D = this.__stage3D.context3D = null);
                    this.__positionScale = this.__frontBufferTexture = this.__fragmentConstants = this.__renderStage3DProgram = this.__context = this.__backBufferTexture = null;
                    this.__present = !1;
                    this.__vertexConstants = this.__stage = this.__quadIndexBuffer = null
                },
                __drawTriangles: function(a, b) {
                    null == a && (a = 0);
                    null == this.__state.renderToTexture && (this.__stage.context3D != this || this.__stage.__renderer.__cleared ? this.__cleared || this.clear(0, 0, 0, 0, 1, 0, 1) : this.__stage.__renderer.__clear());
                    this.__flushGL();
                    null != this.__state.program && this.__state.program.__flush();
                    this.gl.drawArrays(this.gl.TRIANGLES, a, b)
                },
                __flushGL: function() {
                    this.__flushGLProgram();
                    this.__flushGLFramebuffer();
                    this.__flushGLViewport();
                    this.__flushGLBlend();
                    if (this.__contextState.colorMaskRed != this.__state.colorMaskRed || this.__contextState.colorMaskGreen != this.__state.colorMaskGreen || this.__contextState.colorMaskBlue != this.__state.colorMaskBlue || this.__contextState.colorMaskAlpha != this.__state.colorMaskAlpha)
                        this.gl.colorMask(this.__state.colorMaskRed, this.__state.colorMaskGreen, this.__state.colorMaskBlue, this.__state.colorMaskAlpha),
                        this.__contextState.colorMaskRed = this.__state.colorMaskRed,
                        this.__contextState.colorMaskGreen = this.__state.colorMaskGreen,
                        this.__contextState.colorMaskBlue = this.__state.colorMaskBlue,
                        this.__contextState.colorMaskAlpha = this.__state.colorMaskAlpha;
                    this.__flushGLCulling();
                    this.__flushGLDepth();
                    this.__flushGLScissor();
                    this.__flushGLStencil();
                    this.__flushGLTextures()
                },
                __flushGLBlend: function() {
                    if (this.__contextState.blendDestinationRGBFactor != this.__state.blendDestinationRGBFactor || this.__contextState.blendSourceRGBFactor != this.__state.blendSourceRGBFactor || this.__contextState.blendDestinationAlphaFactor != this.__state.blendDestinationAlphaFactor || this.__contextState.blendSourceAlphaFactor != this.__state.blendSourceAlphaFactor)
                        this.__setGLBlend(!0),
                        this.__state.blendDestinationRGBFactor == this.__state.blendDestinationAlphaFactor && this.__state.blendSourceRGBFactor == this.__state.blendSourceAlphaFactor ? this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor)) : this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor), this.__getGLBlend(this.__state.blendSourceAlphaFactor), this.__getGLBlend(this.__state.blendDestinationAlphaFactor)),
                        this.__contextState.blendDestinationRGBFactor = this.__state.blendDestinationRGBFactor,
                        this.__contextState.blendSourceRGBFactor = this.__state.blendSourceRGBFactor,
                        this.__contextState.blendDestinationAlphaFactor = this.__state.blendDestinationAlphaFactor,
                        this.__contextState.blendSourceAlphaFactor = this.__state.blendSourceAlphaFactor
                },
                __flushGLCulling: function() {
                    if (this.__contextState.culling != this.__state.culling) {
                        if (3 == this.__state.culling)
                            this.__setGLCullFace(!1);
                        else
                            switch (this.__setGLCullFace(!0),
                            this.__state.culling) {
                            case 0:
                                this.gl.cullFace(this.gl.BACK);
                                break;
                            case 1:
                                this.gl.cullFace(this.gl.FRONT);
                                break;
                            case 2:
                                this.gl.cullFace(this.gl.FRONT_AND_BACK);
                                break;
                            case 3:
                                break;
                            default:
                                throw new Xc;
                            }
                        this.__contextState.culling = this.__state.culling
                    }
                },
                __flushGLDepth: function() {
                    var a = this.__state.depthMask && (null != this.__state.renderToTexture ? this.__state.renderToTextureDepthStencil : this.__state.backBufferEnableDepthAndStencil);
                    this.__contextState.depthMask != a && (this.gl.depthMask(a),
                    this.__contextState.depthMask = a);
                    if (this.__contextState.depthCompareMode != this.__state.depthCompareMode) {
                        switch (this.__state.depthCompareMode) {
                        case 0:
                            this.gl.depthFunc(this.gl.ALWAYS);
                            break;
                        case 1:
                            this.gl.depthFunc(this.gl.EQUAL);
                            break;
                        case 2:
                            this.gl.depthFunc(this.gl.GREATER);
                            break;
                        case 3:
                            this.gl.depthFunc(this.gl.GEQUAL);
                            break;
                        case 4:
                            this.gl.depthFunc(this.gl.LESS);
                            break;
                        case 5:
                            this.gl.depthFunc(this.gl.LEQUAL);
                            break;
                        case 6:
                            this.gl.depthFunc(this.gl.NEVER);
                            break;
                        case 7:
                            this.gl.depthFunc(this.gl.NOTEQUAL);
                            break;
                        default:
                            throw new Xc;
                        }
                        this.__contextState.depthCompareMode = this.__state.depthCompareMode
                    }
                },
                __flushGLFramebuffer: function() {
                    if (null != this.__state.renderToTexture) {
                        if (this.__contextState.renderToTexture != this.__state.renderToTexture || this.__contextState.renderToTextureSurfaceSelector != this.__state.renderToTextureSurfaceSelector) {
                            var a = this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil, this.__state.renderToTextureAntiAlias, this.__state.renderToTextureSurfaceSelector);
                            this.__bindGLFramebuffer(a);
                            this.__contextState.renderToTexture = this.__state.renderToTexture;
                            this.__contextState.renderToTextureAntiAlias = this.__state.renderToTextureAntiAlias;
                            this.__contextState.renderToTextureDepthStencil = this.__state.renderToTextureDepthStencil;
                            this.__contextState.renderToTextureSurfaceSelector = this.__state.renderToTextureSurfaceSelector
                        }
                        this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
                        this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);
                        this.__setGLFrontFace(!0)
                    } else {
                        if (null == this.__stage && 0 == this.backBufferWidth && 0 == this.backBufferHeight)
                            throw new dc("Context3D backbuffer has not been configured");
                        if (null != this.__contextState.renderToTexture || this.__contextState.__currentGLFramebuffer != this.__state.__primaryGLFramebuffer || this.__contextState.backBufferEnableDepthAndStencil != this.__state.backBufferEnableDepthAndStencil)
                            this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer),
                            this.__contextState.renderToTexture = null,
                            this.__contextState.backBufferEnableDepthAndStencil = this.__state.backBufferEnableDepthAndStencil;
                        this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);
                        this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);
                        this.__setGLFrontFace(this.__stage.context3D != this)
                    }
                },
                __flushGLProgram: function() {
                    var a = this.__state.shader
                      , b = this.__state.program;
                    this.__contextState.shader != a && (null != this.__contextState.shader && this.__contextState.shader.__disable(),
                    null != a && a.__enable(),
                    this.__contextState.shader = a);
                    this.__contextState.program != b && (null != this.__contextState.program && this.__contextState.program.__disable(),
                    null != b && b.__enable(),
                    this.__contextState.program = b);
                    null != b && 0 == b.__format && (this.__positionScale[1] = this.__stage.context3D == this && null == this.__state.renderToTexture ? 1 : -1,
                    b.__setPositionScale(this.__positionScale))
                },
                __flushGLScissor: function() {
                    if (this.__state.scissorEnabled) {
                        this.__setGLScissorTest(!0);
                        this.__contextState.scissorEnabled = !0;
                        var a = this.__state.scissorRectangle.x | 0
                          , b = this.__state.scissorRectangle.y | 0
                          , c = this.__state.scissorRectangle.width | 0
                          , d = this.__state.scissorRectangle.height | 0;
                        this.__backBufferWantsBestResolution && (a = this.__state.scissorRectangle.x * this.__stage.window.__scale | 0,
                        b = this.__state.scissorRectangle.y * this.__stage.window.__scale | 0,
                        c = this.__state.scissorRectangle.width * this.__stage.window.__scale | 0,
                        d = this.__state.scissorRectangle.height * this.__stage.window.__scale | 0);
                        null == this.__state.renderToTexture && null == this.__stage3D && (b = (this.__stage.window.__height * this.__stage.window.__scale | 0) - d - b);
                        if (this.__contextState.scissorRectangle.x != a || this.__contextState.scissorRectangle.y != b || this.__contextState.scissorRectangle.width != c || this.__contextState.scissorRectangle.height != d)
                            this.gl.scissor(a, b, c, d),
                            this.__contextState.scissorRectangle.setTo(a, b, c, d)
                    } else
                        this.__contextState.scissorEnabled != this.__state.scissorEnabled && (this.__setGLScissorTest(!1),
                        this.__contextState.scissorEnabled = !1)
                },
                __flushGLStencil: function() {
                    if (this.__contextState.stencilTriangleFace != this.__state.stencilTriangleFace || this.__contextState.stencilPass != this.__state.stencilPass || this.__contextState.stencilDepthFail != this.__state.stencilDepthFail || this.__contextState.stencilFail != this.__state.stencilFail)
                        this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace), this.__getGLStencilAction(this.__state.stencilFail), this.__getGLStencilAction(this.__state.stencilDepthFail), this.__getGLStencilAction(this.__state.stencilPass)),
                        this.__contextState.stencilTriangleFace = this.__state.stencilTriangleFace,
                        this.__contextState.stencilPass = this.__state.stencilPass,
                        this.__contextState.stencilDepthFail = this.__state.stencilDepthFail,
                        this.__contextState.stencilFail = this.__state.stencilFail;
                    this.__contextState.stencilWriteMask != this.__state.stencilWriteMask && (this.gl.stencilMask(this.__state.stencilWriteMask),
                    this.__contextState.stencilWriteMask = this.__state.stencilWriteMask);
                    if (this.__contextState.stencilCompareMode != this.__state.stencilCompareMode || this.__contextState.stencilReferenceValue != this.__state.stencilReferenceValue || this.__contextState.stencilReadMask != this.__state.stencilReadMask)
                        this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode), this.__state.stencilReferenceValue, this.__state.stencilReadMask),
                        this.__contextState.stencilCompareMode = this.__state.stencilCompareMode,
                        this.__contextState.stencilReferenceValue = this.__state.stencilReferenceValue,
                        this.__contextState.stencilReadMask = this.__state.stencilReadMask
                },
                __flushGLTextures: function() {
                    for (var a = 0, b, c, d = 0, f = this.__state.textures.length; d < f; ) {
                        var g = d++;
                        b = this.__state.textures[g];
                        c = this.__state.samplerStates[g];
                        null == c && (this.__state.samplerStates[g] = new kg,
                        c = this.__state.samplerStates[g]);
                        this.gl.activeTexture(this.gl.TEXTURE0 + a);
                        null != b ? (b.__textureTarget == this.gl.TEXTURE_2D ? this.__bindGLTexture2D(b.__getTexture()) : this.__bindGLTextureCubeMap(b.__getTexture()),
                        this.__contextState.textures[g] = b,
                        b.__setSamplerState(c)) : this.__bindGLTexture2D(null);
                        null != this.__state.program && 0 == this.__state.program.__format && c.textureAlpha && (this.gl.activeTexture(this.gl.TEXTURE0 + a + 4),
                        null != b && null != b.__alphaTexture ? (b.__alphaTexture.__textureTarget == this.gl.TEXTURE_2D ? this.__bindGLTexture2D(b.__alphaTexture.__getTexture()) : this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture()),
                        b.__alphaTexture.__setSamplerState(c),
                        this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 1)) : (this.__bindGLTexture2D(null),
                        null != this.__state.program.__agalAlphaSamplerEnabled[a] && this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 0)));
                        ++a
                    }
                },
                __flushGLViewport: function() {
                    if (null == this.__state.renderToTexture)
                        if (this.__stage.context3D == this) {
                            var a = this.backBufferWidth
                              , b = this.backBufferHeight;
                            null != this.__stage3D || this.__backBufferWantsBestResolution || (a = this.backBufferWidth * this.__stage.window.__scale | 0,
                            b = this.backBufferHeight * this.__stage.window.__scale | 0);
                            var c = null == this.__stage3D ? 0 : this.__stage3D.get_x() | 0
                              , d = this.__stage.window.__height * this.__stage.window.__scale - b - (null == this.__stage3D ? 0 : this.__stage3D.get_y()) | 0;
                            this.gl.viewport(c, d, a, b)
                        } else
                            this.gl.viewport(0, 0, this.backBufferWidth, this.backBufferHeight);
                    else
                        b = a = 0,
                        this.__state.renderToTexture instanceof wj ? (b = this.__state.renderToTexture,
                        a = b.__width,
                        b = b.__height) : this.__state.renderToTexture instanceof Ch ? (b = this.__state.renderToTexture,
                        a = b.__width,
                        b = b.__height) : this.__state.renderToTexture instanceof xj && (b = this.__state.renderToTexture,
                        b = a = b.__size),
                        this.gl.viewport(0, 0, a, b)
                },
                __getGLBlend: function(a) {
                    switch (a) {
                    case 0:
                        return this.gl.DST_ALPHA;
                    case 1:
                        return this.gl.DST_COLOR;
                    case 2:
                        return this.gl.ONE;
                    case 3:
                        return this.gl.ONE_MINUS_DST_ALPHA;
                    case 4:
                        return this.gl.ONE_MINUS_DST_COLOR;
                    case 5:
                        return this.gl.ONE_MINUS_SRC_ALPHA;
                    case 6:
                        return this.gl.ONE_MINUS_SRC_COLOR;
                    case 7:
                        return this.gl.SRC_ALPHA;
                    case 8:
                        return this.gl.SRC_COLOR;
                    case 9:
                        return this.gl.ZERO;
                    default:
                        throw new Xc;
                    }
                },
                __getGLCompareMode: function(a) {
                    switch (a) {
                    case 0:
                        return this.gl.ALWAYS;
                    case 1:
                        return this.gl.EQUAL;
                    case 2:
                        return this.gl.GREATER;
                    case 3:
                        return this.gl.GEQUAL;
                    case 4:
                        return this.gl.LESS;
                    case 5:
                        return this.gl.LEQUAL;
                    case 6:
                        return this.gl.NEVER;
                    case 7:
                        return this.gl.NOTEQUAL;
                    default:
                        return this.gl.EQUAL
                    }
                },
                __getGLStencilAction: function(a) {
                    switch (a) {
                    case 0:
                        return this.gl.DECR;
                    case 1:
                        return this.gl.DECR_WRAP;
                    case 2:
                        return this.gl.INCR;
                    case 3:
                        return this.gl.INCR_WRAP;
                    case 4:
                        return this.gl.INVERT;
                    case 5:
                        return this.gl.KEEP;
                    case 6:
                        return this.gl.REPLACE;
                    case 7:
                        return this.gl.ZERO;
                    default:
                        return this.gl.KEEP
                    }
                },
                __getGLTriangleFace: function(a) {
                    switch (a) {
                    case 0:
                        return this.gl.BACK;
                    case 1:
                        return this.gl.FRONT;
                    case 2:
                        return this.gl.FRONT_AND_BACK;
                    case 3:
                        return this.gl.NONE;
                    default:
                        return this.gl.FRONT_AND_BACK
                    }
                },
                __renderStage3D: function(a) {
                    var b = a.context3D;
                    if (null != b && b != this && null != b.__frontBufferTexture && a.visible && 0 < this.backBufferHeight && 0 < this.backBufferWidth) {
                        if (null == this.__renderStage3DProgram) {
                            var c = new na;
                            c.assemble(yl.toString(1), "m44 op, va0, vc0\nmov v0, va1");
                            var d = new na;
                            d.assemble(yl.toString(0), "tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1");
                            this.__renderStage3DProgram = this.createProgram();
                            this.__renderStage3DProgram.upload(c.agalcode, d.agalcode)
                        }
                        this.setProgram(this.__renderStage3DProgram);
                        this.setBlendFactors(2, 9);
                        this.setColorMask(!0, !0, !0, !0);
                        this.setCulling(3);
                        this.setDepthTest(!1, 0);
                        this.setStencilActions();
                        this.setStencilReferenceValue(0, 0, 0);
                        this.setScissorRectangle(null);
                        this.setTextureAt(0, b.__frontBufferTexture);
                        this.setVertexBufferAt(0, a.__vertexBuffer, 0, 3);
                        this.setVertexBufferAt(1, a.__vertexBuffer, 3, 2);
                        this.setProgramConstantsFromMatrix(1, 0, a.__renderTransform, !0);
                        this.drawTriangles(a.__indexBuffer);
                        this.__present = !0
                    }
                },
                __setGLBlend: function(a) {
                    this.__contextState.__enableGLBlend != a && (a ? this.gl.enable(this.gl.BLEND) : this.gl.disable(this.gl.BLEND),
                    this.__contextState.__enableGLBlend = a)
                },
                __setGLBlendEquation: function(a) {
                    this.__contextState.__glBlendEquation != a && (this.gl.blendEquation(a),
                    this.__contextState.__glBlendEquation = a)
                },
                __setGLCullFace: function(a) {
                    this.__contextState.__enableGLCullFace != a && (a ? this.gl.enable(this.gl.CULL_FACE) : this.gl.disable(this.gl.CULL_FACE),
                    this.__contextState.__enableGLCullFace = a)
                },
                __setGLDepthTest: function(a) {
                    this.__contextState.__enableGLDepthTest != a && (a ? this.gl.enable(this.gl.DEPTH_TEST) : this.gl.disable(this.gl.DEPTH_TEST),
                    this.__contextState.__enableGLDepthTest = a)
                },
                __setGLFrontFace: function(a) {
                    this.__contextState.__frontFaceGLCCW != a && (this.gl.frontFace(a ? this.gl.CCW : this.gl.CW),
                    this.__contextState.__frontFaceGLCCW = a)
                },
                __setGLScissorTest: function(a) {
                    this.__contextState.__enableGLScissorTest != a && (a ? this.gl.enable(this.gl.SCISSOR_TEST) : this.gl.disable(this.gl.SCISSOR_TEST),
                    this.__contextState.__enableGLScissorTest = a)
                },
                __setGLStencilTest: function(a) {
                    this.__contextState.__enableGLStencilTest != a && (a ? this.gl.enable(this.gl.STENCIL_TEST) : this.gl.disable(this.gl.STENCIL_TEST),
                    this.__contextState.__enableGLStencilTest = a)
                },
                __class__: sb
            });
            var xl = {
                fromString: function(a) {
                    switch (a) {
                    case "dynamicDraw":
                        return 0;
                    case "staticDraw":
                        return 1;
                    default:
                        return null
                    }
                },
                toString: function(a) {
                    switch (a) {
                    case 0:
                        return "dynamicDraw";
                    case 1:
                        return "staticDraw";
                    default:
                        return null
                    }
                }
            }
              , yl = {
                toString: function(a) {
                    switch (a) {
                    case 0:
                        return "fragment";
                    case 1:
                        return "vertex";
                    default:
                        return null
                    }
                }
            }
              , Ll = {
                toString: function(a) {
                    switch (a) {
                    case 0:
                        return "bgrPacked565";
                    case 1:
                        return "bgra";
                    case 2:
                        return "bgraPacked4444";
                    case 3:
                        return "compressed";
                    case 4:
                        return "compressedAlpha";
                    case 5:
                        return "rgbaHalfFloat";
                    default:
                        return null
                    }
                }
            }
              , Kk = function(a, b, c) {
                this.__context = a;
                this.__numIndices = b;
                a = this.__context.gl;
                this.__id = a.createBuffer();
                this.__usage = 0 == c ? a.DYNAMIC_DRAW : a.STATIC_DRAW
            };
            h["openfl.display3D.IndexBuffer3D"] = Kk;
            Kk.__name__ = "openfl.display3D.IndexBuffer3D";
            Kk.prototype = {
                uploadFromTypedArray: function(a, b) {
                    null != a && (b = this.__context.gl,
                    this.__context.__bindGLElementArrayBuffer(this.__id),
                    Lc.bufferData(b, b.ELEMENT_ARRAY_BUFFER, a, this.__usage))
                },
                uploadFromVector: function(a, b, c) {
                    if (null != a) {
                        var d = b + c
                          , f = this.__tempUInt16Array;
                        if (null == this.__tempUInt16Array || this.__tempUInt16Array.length < c)
                            this.__tempUInt16Array = null != c ? new Uint16Array(c) : null,
                            null != f && this.__tempUInt16Array.set(f);
                        for (c = b; c < d; )
                            f = c++,
                            this.__tempUInt16Array[f - b] = a.get(f);
                        this.uploadFromTypedArray(this.__tempUInt16Array)
                    }
                },
                __class__: Kk
            };
            var Lk = function(a, b) {
                this.__context = a;
                this.__format = b;
                0 == this.__format ? (this.__agalSamplerUsageMask = 0,
                this.__agalUniforms = new $a,
                this.__agalSamplerUniforms = new $a,
                this.__agalAlphaSamplerUniforms = new $a,
                this.__agalAlphaSamplerEnabled = []) : (this.__glslAttribNames = [],
                this.__glslAttribTypes = [],
                this.__glslSamplerNames = [],
                this.__glslUniformLocations = [],
                this.__glslUniformNames = [],
                this.__glslUniformTypes = []);
                this.__samplerStates = []
            };
            h["openfl.display3D.Program3D"] = Lk;
            Lk.__name__ = "openfl.display3D.Program3D";
            Lk.prototype = {
                upload: function(a, b) {
                    if (0 == this.__format) {
                        var c = [];
                        a = fd.convertToGLSL(a, null);
                        b = fd.convertToGLSL(b, c);
                        5 == Ja.level && (Ja.info(a, {
                            fileName: "openfl/display3D/Program3D.hx",
                            lineNumber: 399,
                            className: "openfl.display3D.Program3D",
                            methodName: "upload"
                        }),
                        Ja.info(b, {
                            fileName: "openfl/display3D/Program3D.hx",
                            lineNumber: 400,
                            className: "openfl.display3D.Program3D",
                            methodName: "upload"
                        }));
                        this.__deleteShaders();
                        this.__uploadFromGLSL(a, b);
                        this.__buildAGALUniformList();
                        b = 0;
                        for (a = c.length; b < a; ) {
                            var d = b++;
                            this.__samplerStates[d] = c[d]
                        }
                    }
                },
                __buildAGALUniformList: function() {
                    if (1 != this.__format) {
                        var a = this.__context.gl;
                        this.__agalUniforms.clear();
                        this.__agalSamplerUniforms.clear();
                        this.__agalAlphaSamplerUniforms.clear();
                        this.__agalAlphaSamplerEnabled = [];
                        this.__agalSamplerUsageMask = 0;
                        var b = a.getProgramParameter(this.__glProgram, a.ACTIVE_UNIFORMS);
                        for (var c = new $a, d = new $a, f = 0; f < b; ) {
                            var g = f++
                              , k = a.getActiveUniform(this.__glProgram, g)
                              , l = k.name
                              , h = k.size
                              , u = k.type;
                            k = new yj(this.__context);
                            k.name = l;
                            k.size = h;
                            k.type = u;
                            k.location = a.getUniformLocation(this.__glProgram, k.name);
                            l = k.name.indexOf("[");
                            0 <= l && (k.name = k.name.substring(0, l));
                            switch (k.type) {
                            case 35674:
                                k.regCount = 2;
                                break;
                            case 35675:
                                k.regCount = 3;
                                break;
                            case 35676:
                                k.regCount = 4;
                                break;
                            default:
                                k.regCount = 1
                            }
                            k.regCount *= k.size;
                            this.__agalUniforms.add(k);
                            if ("vcPositionScale" == k.name)
                                this.__agalPositionScale = k;
                            else if (P.startsWith(k.name, "vc"))
                                k.regIndex = G.parseInt(k.name.substring(2)),
                                k.regData = this.__context.__vertexConstants,
                                c.add(k);
                            else if (P.startsWith(k.name, "fc"))
                                k.regIndex = G.parseInt(k.name.substring(2)),
                                k.regData = this.__context.__fragmentConstants,
                                d.add(k);
                            else if (P.startsWith(k.name, "sampler") && -1 == k.name.indexOf("alpha"))
                                for (k.regIndex = G.parseInt(k.name.substring(7)),
                                this.__agalSamplerUniforms.add(k),
                                l = 0,
                                h = k.regCount; l < h; )
                                    u = l++,
                                    this.__agalSamplerUsageMask |= 1 << k.regIndex + u;
                            else
                                P.startsWith(k.name, "sampler") && P.endsWith(k.name, "_alpha") ? (l = k.name.indexOf("_") - 7,
                                k.regIndex = G.parseInt(k.name.substring(7, 7 + l)) + 4,
                                this.__agalAlphaSamplerUniforms.add(k)) : P.startsWith(k.name, "sampler") && P.endsWith(k.name, "_alphaEnabled") && (k.regIndex = G.parseInt(k.name.substring(7)),
                                this.__agalAlphaSamplerEnabled[k.regIndex] = k);
                            5 == Ja.level && Ja.verbose("" + g + " name:" + k.name + " type:" + k.type + " size:" + k.size + " location:" + G.string(k.location), {
                                fileName: "openfl/display3D/Program3D.hx",
                                lineNumber: 577,
                                className: "openfl.display3D.Program3D",
                                methodName: "__buildAGALUniformList"
                            })
                        }
                        this.__agalVertexUniformMap = new Dh(E.array(c));
                        this.__agalFragmentUniformMap = new Dh(E.array(d))
                    }
                },
                __deleteShaders: function() {
                    var a = this.__context.gl;
                    null != this.__glProgram && (this.__glProgram = null);
                    null != this.__glVertexShader && (a.deleteShader(this.__glVertexShader),
                    this.__glVertexShader = null);
                    null != this.__glFragmentShader && (a.deleteShader(this.__glFragmentShader),
                    this.__glFragmentShader = null)
                },
                __disable: function() {},
                __enable: function() {
                    var a = this.__context.gl;
                    a.useProgram(this.__glProgram);
                    if (0 == this.__format) {
                        this.__agalVertexUniformMap.markAllDirty();
                        this.__agalFragmentUniformMap.markAllDirty();
                        for (var b = this.__agalSamplerUniforms.h; null != b; ) {
                            var c = b.item;
                            b = b.next;
                            if (1 == c.regCount)
                                a.uniform1i(c.location, c.regIndex);
                            else
                                throw new Xc("!!! TODO: uniform location on webgl");
                        }
                        for (b = this.__agalAlphaSamplerUniforms.h; null != b; )
                            if (c = b.item,
                            b = b.next,
                            1 == c.regCount)
                                a.uniform1i(c.location, c.regIndex);
                            else
                                throw new Xc("!!! TODO: uniform location on webgl");
                    }
                },
                __flush: function() {
                    0 == this.__format && (this.__agalVertexUniformMap.flush(),
                    this.__agalFragmentUniformMap.flush())
                },
                __markDirty: function(a, b, c) {
                    1 != this.__format && (a ? this.__agalVertexUniformMap.markDirty(b, c) : this.__agalFragmentUniformMap.markDirty(b, c))
                },
                __setPositionScale: function(a) {
                    1 != this.__format && null != this.__agalPositionScale && this.__context.gl.uniform4fv(this.__agalPositionScale.location, a)
                },
                __uploadFromGLSL: function(a, b) {
                    var c = this.__context.gl;
                    this.__glVertexSource = a;
                    this.__glFragmentSource = b;
                    this.__glVertexShader = c.createShader(c.VERTEX_SHADER);
                    c.shaderSource(this.__glVertexShader, a);
                    c.compileShader(this.__glVertexShader);
                    if (0 == c.getShaderParameter(this.__glVertexShader, c.COMPILE_STATUS)) {
                        var d = "Error compiling vertex shader\n" + c.getShaderInfoLog(this.__glVertexShader);
                        Ja.error(d + ("\n" + a), {
                            fileName: "openfl/display3D/Program3D.hx",
                            lineNumber: 869,
                            className: "openfl.display3D.Program3D",
                            methodName: "__uploadFromGLSL"
                        })
                    }
                    this.__glFragmentShader = c.createShader(c.FRAGMENT_SHADER);
                    c.shaderSource(this.__glFragmentShader, b);
                    c.compileShader(this.__glFragmentShader);
                    0 == c.getShaderParameter(this.__glFragmentShader, c.COMPILE_STATUS) && (d = "Error compiling fragment shader\n" + c.getShaderInfoLog(this.__glFragmentShader),
                    Ja.error(d + ("\n" + b), {
                        fileName: "openfl/display3D/Program3D.hx",
                        lineNumber: 881,
                        className: "openfl.display3D.Program3D",
                        methodName: "__uploadFromGLSL"
                    }));
                    this.__glProgram = c.createProgram();
                    if (0 == this.__format)
                        for (b = 0; 16 > b; ) {
                            var f = b++;
                            d = "va" + f;
                            -1 != a.indexOf(" " + d) && c.bindAttribLocation(this.__glProgram, f, d)
                        }
                    else
                        for (b = 0,
                        a = this.__glslAttribNames; b < a.length; )
                            if (d = a[b],
                            ++b,
                            -1 < d.indexOf("Position") && P.startsWith(d, "openfl_")) {
                                c.bindAttribLocation(this.__glProgram, 0, d);
                                break
                            }
                    c.attachShader(this.__glProgram, this.__glVertexShader);
                    c.attachShader(this.__glProgram, this.__glFragmentShader);
                    c.linkProgram(this.__glProgram);
                    0 == c.getProgramParameter(this.__glProgram, c.LINK_STATUS) && (d = "Unable to initialize the shader program\n" + c.getProgramInfoLog(this.__glProgram),
                    Ja.error(d, {
                        fileName: "openfl/display3D/Program3D.hx",
                        lineNumber: 922,
                        className: "openfl.display3D.Program3D",
                        methodName: "__uploadFromGLSL"
                    }))
                },
                __class__: Lk
            };
            var yj = function(a) {
                this.context = a;
                this.isDirty = !0;
                this.regDataPointer = new Ck(null,0)
            };
            h["openfl.display3D.Uniform"] = yj;
            yj.__name__ = "openfl.display3D.Uniform";
            yj.prototype = {
                flush: function() {
                    var a = this.context.gl
                      , b = 4 * this.regIndex;
                    switch (this.type) {
                    case 35664:
                        Hl.uniform2fv(a, this.location, this.regData.subarray(b, b + 2 * this.regCount));
                        break;
                    case 35665:
                        var c = this.location;
                        b = this.regData.subarray(b, b + 3 * this.regCount);
                        var d = null;
                        null != d ? a.uniform3fv(c, b, d, null) : a.uniform3fv(c, b);
                        break;
                    case 35666:
                        c = this.location;
                        b = this.regData.subarray(b, b + 4 * this.regCount);
                        d = null;
                        null != d ? a.uniform4fv(c, b, d, null) : a.uniform4fv(c, b);
                        break;
                    case 35674:
                        Lc.uniformMatrix2fv(a, this.location, !1, this.regData.subarray(b, b + 4 * this.size));
                        break;
                    case 35675:
                        Lc.uniformMatrix3fv(a, this.location, !1, this.regData.subarray(b, b + 9 * this.size));
                        break;
                    case 35676:
                        Lc.uniformMatrix4fv(a, this.location, !1, this.regData.subarray(b, b + 16 * this.size));
                        break;
                    default:
                        c = this.location,
                        b = this.regData.subarray(b, b + 4 * this.regCount),
                        d = null,
                        null != d ? a.uniform4fv(c, b, d, null) : a.uniform4fv(c, b)
                    }
                },
                __class__: yj
            };
            var Dh = function(a) {
                this.__uniforms = a;
                this.__uniforms.sort(function(a, b) {
                    return Aa.compare(a.regIndex, b.regIndex)
                });
                var b = 0;
                a = 0;
                for (var c = this.__uniforms; a < c.length; ) {
                    var d = c[a];
                    ++a;
                    d.regIndex + d.regCount > b && (b = d.regIndex + d.regCount)
                }
                this.__registerLookup = ua.toObjectVector(null, b);
                a = 0;
                for (c = this.__uniforms; a < c.length; ) {
                    d = c[a];
                    ++a;
                    b = 0;
                    for (var f = d.regCount; b < f; ) {
                        var g = b++;
                        this.__registerLookup.set(d.regIndex + g, d)
                    }
                }
                this.__anyDirty = this.__allDirty = !0
            };
            h["openfl.display3D.UniformMap"] = Dh;
            Dh.__name__ = "openfl.display3D.UniformMap";
            Dh.prototype = {
                flush: function() {
                    if (this.__anyDirty) {
                        for (var a = 0, b = this.__uniforms; a < b.length; ) {
                            var c = b[a];
                            ++a;
                            if (this.__allDirty || c.isDirty)
                                c.flush(),
                                c.isDirty = !1
                        }
                        this.__anyDirty = this.__allDirty = !1
                    }
                },
                markAllDirty: function() {
                    this.__anyDirty = this.__allDirty = !0
                },
                markDirty: function(a, b) {
                    if (!this.__allDirty)
                        for (b = a + b,
                        b > this.__registerLookup.get_length() && (b = this.__registerLookup.get_length()); a < b; ) {
                            var c = this.__registerLookup.get(a);
                            null != c ? (this.__anyDirty = c.isDirty = !0,
                            a = c.regIndex + c.regCount) : ++a
                        }
                },
                __class__: Dh
            };
            var Mk = function(a, b, c, d) {
                this.__context = a;
                this.__numVertices = b;
                this.__vertexSize = c;
                a = this.__context.gl;
                this.__id = a.createBuffer();
                this.__stride = 4 * this.__vertexSize;
                this.__usage = 0 == xl.fromString(d) ? a.DYNAMIC_DRAW : a.STATIC_DRAW
            };
            h["openfl.display3D.VertexBuffer3D"] = Mk;
            Mk.__name__ = "openfl.display3D.VertexBuffer3D";
            Mk.prototype = {
                uploadFromTypedArray: function(a, b) {
                    null != a && (b = this.__context.gl,
                    this.__context.__bindGLArrayBuffer(this.__id),
                    Lc.bufferData(b, b.ARRAY_BUFFER, a, this.__usage))
                },
                uploadFromVector: function(a, b, c) {
                    if (null != a) {
                        b *= this.__vertexSize;
                        var d = c * this.__vertexSize;
                        c = b + d;
                        var f = this.__tempFloat32Array;
                        if (null == this.__tempFloat32Array || this.__tempFloat32Array.length < d)
                            this.__tempFloat32Array = null != d ? new Float32Array(d) : null,
                            null != f && this.__tempFloat32Array.set(f);
                        for (d = b; d < c; )
                            f = d++,
                            this.__tempFloat32Array[f - b] = a.get(f);
                        this.uploadFromTypedArray(ch.toArrayBufferView(this.__tempFloat32Array))
                    }
                },
                __class__: Mk
            };
            var fd = function() {};
            h["openfl.display3D._internal.AGALConverter"] = fd;
            fd.__name__ = "openfl.display3D._internal.AGALConverter";
            fd.prefixFromType = function(a, b) {
                switch (a) {
                case 0:
                    return "va";
                case 1:
                    return b == Td.VERTEX ? "vc" : "fc";
                case 2:
                    return b == Td.VERTEX ? "vt" : "ft";
                case 3:
                    return "output_";
                case 4:
                    return "v";
                case 5:
                    return "sampler";
                default:
                    throw new Xc("Invalid data!");
                }
            }
            ;
            fd.readUInt64 = function(a) {
                var b = a.readInt();
                a = a.readInt();
                return new kb(a,b)
            }
            ;
            fd.convertToGLSL = function(a, b) {
                a.position = 0;
                a.__endian = 1;
                var c = a.readByte() & 255;
                if (176 == c)
                    return a.readUTF();
                if (160 != c)
                    throw new Xc("Magic value must be 0xA0, may not be AGAL");
                var d = a.readInt();
                if (1 != d)
                    throw new Xc("Version must be 1");
                if (161 != (a.readByte() & 255))
                    throw new Xc("Shader type ID must be 0xA1");
                c = 0 == (a.readByte() & 255) ? Td.VERTEX : Td.FRAGMENT;
                for (var f = new zj, g = ""; ; ) {
                    d = a.position;
                    if (!ab.gt(Kd.get_length(a), d))
                        break;
                    var k = a.readInt();
                    d = a.readUnsignedInt();
                    var l = fd.readUInt64(a)
                      , h = fd.readUInt64(a);
                    d = Kg.parse(d, c);
                    l = lg.parse(l, c, d.mask);
                    var u = lg.parse(h, c, d.mask);
                    g += "\t";
                    switch (k) {
                    case 0:
                        g += G.string(d.toGLSL() + " = " + l.toGLSL() + "; // mov");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 1:
                        g += G.string(d.toGLSL() + " = " + l.toGLSL() + " + " + u.toGLSL() + "; // add");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 2:
                        g += G.string(d.toGLSL() + " = " + l.toGLSL() + " - " + u.toGLSL() + "; // sub");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 3:
                        g += G.string(d.toGLSL() + " = " + l.toGLSL() + " * " + u.toGLSL() + "; // mul");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 4:
                        g += G.string(d.toGLSL() + " = " + l.toGLSL() + " / " + u.toGLSL() + "; // div");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 5:
                        g = -1 < l.toGLSL().indexOf(".") ? g + G.string(d.toGLSL() + " = 1.0 / " + l.toGLSL() + "; // rcp") : g + G.string(d.toGLSL() + " = vec4(1) / " + l.toGLSL() + "; // rcp");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 6:
                        g += G.string(d.toGLSL() + " = min(" + l.toGLSL() + ", " + u.toGLSL() + "); // min");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 7:
                        g += G.string(d.toGLSL() + " = max(" + l.toGLSL() + ", " + u.toGLSL() + "); // max");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 8:
                        g += G.string(d.toGLSL() + " = fract(" + l.toGLSL() + "); // frc");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 9:
                        g += G.string(d.toGLSL() + " = sqrt(" + l.toGLSL() + "); // sqrt");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 10:
                        g += G.string(d.toGLSL() + " = inversesqrt(" + l.toGLSL() + "); // rsq");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 11:
                        g += G.string(d.toGLSL() + " = pow(" + l.toGLSL() + ", " + u.toGLSL() + "); // pow");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 12:
                        g += G.string(d.toGLSL() + " = log2(" + l.toGLSL() + "); // log");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 13:
                        g += G.string(d.toGLSL() + " = exp2(" + l.toGLSL() + "); // exp");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 14:
                        g += G.string(d.toGLSL() + " = normalize(" + l.toGLSL() + "); // normalize");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 15:
                        g += G.string(d.toGLSL() + " = sin(" + l.toGLSL() + "); // sin");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 16:
                        g += G.string(d.toGLSL() + " = cos(" + l.toGLSL() + "); // cos");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 17:
                        l.sourceMask = u.sourceMask = 7;
                        g += G.string(d.toGLSL() + " = cross(vec3(" + l.toGLSL() + "), vec3(" + u.toGLSL() + ")); // crs");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 18:
                        l.sourceMask = u.sourceMask = 7;
                        g += G.string(d.toGLSL() + " = vec4(dot(vec3(" + l.toGLSL() + "), vec3(" + u.toGLSL() + ")))" + d.getWriteMask() + "; // dp3");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 19:
                        l.sourceMask = u.sourceMask = 15;
                        g += G.string(d.toGLSL() + " = vec4(dot(vec4(" + l.toGLSL() + "), vec4(" + u.toGLSL() + ")))" + d.getWriteMask() + "; // dp4");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 20:
                        g += G.string(d.toGLSL() + " = abs(" + l.toGLSL() + "); // abs");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 21:
                        g += G.string(d.toGLSL() + " = -" + l.toGLSL() + "; // neg");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 22:
                        g += G.string(d.toGLSL() + " = clamp(" + l.toGLSL() + ", 0.0, 1.0); // saturate");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 23:
                        k = f.getRegisterUsage(u);
                        k != fa.VECTOR_4 && k != fa.VECTOR_4_ARRAY ? (g += G.string(d.toGLSL() + " = " + l.toGLSL() + " * mat3(" + u.toGLSL(!1) + "); // m33"),
                        f.addDR(d, fa.VECTOR_4),
                        f.addSR(l, fa.VECTOR_4),
                        f.addSR(u, fa.MATRIX_4_4)) : (l.sourceMask = u.sourceMask = 7,
                        g += G.string(d.toGLSL() + " = vec3(dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 0) + "), dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 1) + "),dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 2) + ")); // m33"),
                        f.addDR(d, fa.VECTOR_4),
                        f.addSR(l, fa.VECTOR_4),
                        f.addSR(u, fa.VECTOR_4, 0),
                        f.addSR(u, fa.VECTOR_4, 1),
                        f.addSR(u, fa.VECTOR_4, 2));
                        break;
                    case 24:
                        k = f.getRegisterUsage(u);
                        k != fa.VECTOR_4 && k != fa.VECTOR_4_ARRAY ? (g += G.string(d.toGLSL() + " = " + l.toGLSL() + " * " + u.toGLSL(!1) + "; // m44"),
                        f.addDR(d, fa.VECTOR_4),
                        f.addSR(l, fa.VECTOR_4),
                        f.addSR(u, fa.MATRIX_4_4)) : (l.sourceMask = u.sourceMask = 15,
                        g += G.string(d.toGLSL() + " = vec4(dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 0) + "), dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 1) + "), dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 2) + "), dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 3) + ")); // m44"),
                        f.addDR(d, fa.VECTOR_4),
                        f.addSR(l, fa.VECTOR_4),
                        f.addSR(u, fa.VECTOR_4, 0),
                        f.addSR(u, fa.VECTOR_4, 1),
                        f.addSR(u, fa.VECTOR_4, 2),
                        f.addSR(u, fa.VECTOR_4, 3));
                        break;
                    case 25:
                        d.mask &= 7;
                        k = f.getRegisterUsage(u);
                        k != fa.VECTOR_4 && k != fa.VECTOR_4_ARRAY ? (g += G.string(d.toGLSL() + " = " + l.toGLSL() + " * " + u.toGLSL(!1) + "; // m34"),
                        f.addDR(d, fa.VECTOR_4),
                        f.addSR(l, fa.VECTOR_4),
                        f.addSR(u, fa.MATRIX_4_4)) : (l.sourceMask = u.sourceMask = 15,
                        g += G.string(d.toGLSL() + " = vec3(dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 0) + "), dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 1) + "),dot(" + l.toGLSL(!0) + "," + u.toGLSL(!0, 2) + ")); // m34"),
                        f.addDR(d, fa.VECTOR_4),
                        f.addSR(l, fa.VECTOR_4),
                        f.addSR(u, fa.VECTOR_4, 0),
                        f.addSR(u, fa.VECTOR_4, 1),
                        f.addSR(u, fa.VECTOR_4, 2));
                        break;
                    case 39:
                        l.sourceMask = 15;
                        g += G.string("if (any(lessThan(" + l.toGLSL() + ", vec4(0)))) discard;");
                        f.addSR(l, fa.VECTOR_4);
                        break;
                    case 40:
                        u = Lg.parse(h, c);
                        switch (u.d) {
                        case 0:
                            2 == u.t ? (l.sourceMask = 3,
                            f.addSaR(u, fa.SAMPLER_2D_ALPHA),
                            g += G.string("if (" + u.toGLSL() + "_alphaEnabled) {\n"),
                            g += G.string("\t\t" + d.toGLSL() + " = vec4(texture2D(" + u.toGLSL() + ", " + l.toGLSL() + ").xyz, texture2D(" + u.toGLSL() + "_alpha, " + l.toGLSL() + ").x); // tex + alpha\n"),
                            g += "\t} else {\n",
                            g += G.string("\t\t" + d.toGLSL() + " = texture2D(" + u.toGLSL() + ", " + l.toGLSL() + "); // tex\n"),
                            g += "\t}") : (l.sourceMask = 3,
                            f.addSaR(u, fa.SAMPLER_2D),
                            g += G.string(d.toGLSL() + " = texture2D(" + u.toGLSL() + ", " + l.toGLSL() + "); // tex"));
                            break;
                        case 1:
                            2 == u.t ? (l.sourceMask = 7,
                            f.addSaR(u, fa.SAMPLER_CUBE_ALPHA),
                            g += G.string("if (" + u.toGLSL() + "_alphaEnabled) {\n"),
                            g += G.string("\t\t" + d.toGLSL() + " = vec4(textureCube(" + u.toGLSL() + ", " + l.toGLSL() + ").xyz, textureCube(" + u.toGLSL() + "_alpha, " + l.toGLSL() + ").x); // tex + alpha\n"),
                            g += "\t} else {\n",
                            g += G.string("\t\t" + d.toGLSL() + " = textureCube(" + u.toGLSL() + ", " + l.toGLSL() + "); // tex"),
                            g += "\t}") : (l.sourceMask = 7,
                            g += G.string(d.toGLSL() + " = textureCube(" + u.toGLSL() + ", " + l.toGLSL() + "); // tex"),
                            f.addSaR(u, fa.SAMPLER_CUBE))
                        }
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        null != b && (b[u.n] = u.toSamplerState());
                        break;
                    case 41:
                        l.sourceMask = u.sourceMask = 15;
                        g += G.string(d.toGLSL() + " = vec4(greaterThanEqual(" + l.toGLSL() + ", " + u.toGLSL() + "))" + d.getWriteMask() + "; // ste");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 42:
                        l.sourceMask = u.sourceMask = 15;
                        g += G.string(d.toGLSL() + " = vec4(lessThan(" + l.toGLSL() + ", " + u.toGLSL() + "))" + d.getWriteMask() + "; // slt");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 44:
                        l.sourceMask = u.sourceMask = 15;
                        g += G.string(d.toGLSL() + " = vec4(equal(" + l.toGLSL() + ", " + u.toGLSL() + "))" + d.getWriteMask() + "; // seq");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    case 45:
                        l.sourceMask = u.sourceMask = 15;
                        g += G.string(d.toGLSL() + " = vec4(notEqual(" + l.toGLSL() + ", " + u.toGLSL() + "))" + d.getWriteMask() + "; // sne");
                        f.addDR(d, fa.VECTOR_4);
                        f.addSR(l, fa.VECTOR_4);
                        f.addSR(u, fa.VECTOR_4);
                        break;
                    default:
                        throw new Xc("Opcode " + k);
                    }
                    g += "\n"
                }
                null == fd.limitedProfile && (d = cf.context.getParameter(7938),
                fd.limitedProfile = -1 < d.indexOf("OpenGL ES") || -1 < d.indexOf("WebGL"));
                a = "" + G.string("// AGAL " + (c == Td.VERTEX ? "vertex" : "fragment") + " shader\n");
                a = fd.limitedProfile ? a + "#version 100\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n" : a + "#version 120\n";
                a += G.string(f.toGLSL(!1));
                c == Td.VERTEX && (a += "uniform vec4 vcPositionScale;\n");
                a = a + "void main() {\n" + G.string(f.toGLSL(!0));
                a += G.string(g);
                c == Td.VERTEX && (a += "\tgl_Position *= vcPositionScale;\n");
                return a + "}\n"
            }
            ;
            var Kg = function() {};
            h["openfl.display3D._internal._AGALConverter.DestRegister"] = Kg;
            Kg.__name__ = "openfl.display3D._internal._AGALConverter.DestRegister";
            Kg.parse = function(a, b) {
                var c = new Kg;
                c.programType = b;
                c.type = a >>> 24 & 15;
                c.mask = a >>> 16 & 15;
                c.n = a & 65535;
                return c
            }
            ;
            Kg.prototype = {
                getWriteMask: function() {
                    var a = ".";
                    0 != (this.mask & 1) && (a += "x");
                    0 != (this.mask & 2) && (a += "y");
                    0 != (this.mask & 4) && (a += "z");
                    0 != (this.mask & 8) && (a += "w");
                    return a
                },
                toGLSL: function(a) {
                    null == a && (a = !0);
                    var b = 3 == this.type ? this.programType == Td.VERTEX ? "gl_Position" : "gl_FragColor" : fd.prefixFromType(this.type, this.programType) + this.n;
                    a && 15 != this.mask && (b += this.getWriteMask());
                    return b
                },
                __class__: Kg
            };
            var Td = N["openfl.display3D._internal._AGALConverter.ProgramType"] = {
                __ename__: "openfl.display3D._internal._AGALConverter.ProgramType",
                __constructs__: null,
                VERTEX: {
                    _hx_name: "VERTEX",
                    _hx_index: 0,
                    __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
                    toString: r
                },
                FRAGMENT: {
                    _hx_name: "FRAGMENT",
                    _hx_index: 1,
                    __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
                    toString: r
                }
            };
            Td.__constructs__ = [Td.VERTEX, Td.FRAGMENT];
            Td.__empty_constructs__ = [Td.VERTEX, Td.FRAGMENT];
            var zj = function() {
                this.mEntries = []
            };
            h["openfl.display3D._internal.RegisterMap"] = zj;
            zj.__name__ = "openfl.display3D._internal.RegisterMap";
            zj.prototype = {
                add: function(a, b, c, d) {
                    for (var f = 0, g = this.mEntries; f < g.length; ) {
                        var k = g[f];
                        ++f;
                        if (k.type == a && k.name == b && k.number == c) {
                            if (k.usage != d)
                                throw new Xc("Cannot use register in multiple ways yet (mat4/vec4)");
                            return
                        }
                    }
                    k = new Nk;
                    k.type = a;
                    k.name = b;
                    k.number = c;
                    k.usage = d;
                    this.mEntries.push(k)
                },
                addDR: function(a, b) {
                    this.add(a.type, a.toGLSL(!1), a.n, b)
                },
                addSaR: function(a, b) {
                    this.add(a.type, a.toGLSL(), a.n, b)
                },
                addSR: function(a, b, c) {
                    null == c && (c = 0);
                    0 != a.d ? (this.add(a.itype, fd.prefixFromType(a.itype, a.programType) + a.n, a.n, fa.VECTOR_4),
                    this.add(a.type, fd.prefixFromType(a.type, a.programType) + a.o, a.o, fa.VECTOR_4_ARRAY)) : this.add(a.type, a.toGLSL(!1, c), a.n + c, b)
                },
                getRegisterUsage: function(a) {
                    return 0 != a.d ? fa.VECTOR_4_ARRAY : this.getUsage(a.type, a.toGLSL(!1), a.n)
                },
                getUsage: function(a, b, c) {
                    for (var d = 0, f = this.mEntries; d < f.length; ) {
                        var g = f[d];
                        ++d;
                        if (g.type == a && g.name == b && g.number == c)
                            return g.usage
                    }
                    return fa.UNUSED
                },
                toGLSL: function(a) {
                    this.mEntries.sort(function(a, b) {
                        return a.number - b.number
                    });
                    this.mEntries.sort(function(a, b) {
                        return xa.__cast(a.type, sl) - xa.__cast(b.type, sl)
                    });
                    for (var b = "", c = 0, d = this.mEntries.length; c < d; ) {
                        var f = c++;
                        f = this.mEntries[f];
                        if (!(a && 2 != f.type || !a && 2 == f.type) && 3 != f.type) {
                            switch (f.type) {
                            case 0:
                                b += "attribute ";
                                break;
                            case 1:
                                b += "uniform ";
                                break;
                            case 2:
                                b += "\t";
                                break;
                            case 3:
                                break;
                            case 4:
                                b += "varying ";
                                break;
                            case 5:
                                b += "uniform ";
                                break;
                            default:
                                throw new Xc;
                            }
                            switch (f.usage._hx_index) {
                            case 0:
                                Ja.info("Missing switch patten: RegisterUsage.UNUSED", {
                                    fileName: "openfl/display3D/_internal/AGALConverter.hx",
                                    lineNumber: 751,
                                    className: "openfl.display3D._internal.RegisterMap",
                                    methodName: "toGLSL"
                                });
                                break;
                            case 1:
                                b += "vec4 ";
                                break;
                            case 2:
                                b += "mat4 ";
                                break;
                            case 3:
                                b += "sampler2D ";
                                break;
                            case 5:
                                b += "samplerCube ";
                                break;
                            case 7:
                                b += "vec4 "
                            }
                            f.usage == fa.SAMPLER_2D_ALPHA ? (b += "sampler2D ",
                            b += G.string(f.name),
                            b += ";\n",
                            b += "uniform ",
                            b += "sampler2D ",
                            b += G.string(f.name + "_alpha"),
                            b += ";\n",
                            b += "uniform ",
                            b += "bool ",
                            b += G.string(f.name + "_alphaEnabled")) : f.usage == fa.SAMPLER_CUBE_ALPHA ? (b += "samplerCube ",
                            b += G.string(f.name),
                            b += ";\n",
                            b += "uniform ",
                            b += "samplerCube ",
                            b += G.string(f.name + "_alpha"),
                            b += ";\n",
                            b += "uniform ",
                            b += "bool ",
                            b += G.string(f.name + "_alphaEnabled")) : b = f.usage == fa.VECTOR_4_ARRAY ? b + G.string(f.name + "[128]") : b + G.string(f.name);
                            b += ";\n"
                        }
                    }
                    return b
                },
                __class__: zj
            };
            var Nk = function() {};
            h["openfl.display3D._internal._AGALConverter.RegisterMapEntry"] = Nk;
            Nk.__name__ = "openfl.display3D._internal._AGALConverter.RegisterMapEntry";
            Nk.prototype = {
                __class__: Nk
            };
            var fa = N["openfl.display3D._internal._AGALConverter.RegisterUsage"] = {
                __ename__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                __constructs__: null,
                UNUSED: {
                    _hx_name: "UNUSED",
                    _hx_index: 0,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                },
                VECTOR_4: {
                    _hx_name: "VECTOR_4",
                    _hx_index: 1,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                },
                MATRIX_4_4: {
                    _hx_name: "MATRIX_4_4",
                    _hx_index: 2,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                },
                SAMPLER_2D: {
                    _hx_name: "SAMPLER_2D",
                    _hx_index: 3,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                },
                SAMPLER_2D_ALPHA: {
                    _hx_name: "SAMPLER_2D_ALPHA",
                    _hx_index: 4,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                },
                SAMPLER_CUBE: {
                    _hx_name: "SAMPLER_CUBE",
                    _hx_index: 5,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                },
                SAMPLER_CUBE_ALPHA: {
                    _hx_name: "SAMPLER_CUBE_ALPHA",
                    _hx_index: 6,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                },
                VECTOR_4_ARRAY: {
                    _hx_name: "VECTOR_4_ARRAY",
                    _hx_index: 7,
                    __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
                    toString: r
                }
            };
            fa.__constructs__ = [fa.UNUSED, fa.VECTOR_4, fa.MATRIX_4_4, fa.SAMPLER_2D, fa.SAMPLER_2D_ALPHA, fa.SAMPLER_CUBE, fa.SAMPLER_CUBE_ALPHA, fa.VECTOR_4_ARRAY];
            fa.__empty_constructs__ = [fa.UNUSED, fa.VECTOR_4, fa.MATRIX_4_4, fa.SAMPLER_2D, fa.SAMPLER_2D_ALPHA, fa.SAMPLER_CUBE, fa.SAMPLER_CUBE_ALPHA, fa.VECTOR_4_ARRAY];
            var Lg = function() {};
            h["openfl.display3D._internal._AGALConverter.SamplerRegister"] = Lg;
            Lg.__name__ = "openfl.display3D._internal._AGALConverter.SamplerRegister";
            Lg.parse = function(a, b) {
                var c = new Lg;
                c.programType = b;
                b = 60;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                c.f = b;
                b = 56;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                c.m = b;
                b = 52;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                c.w = b;
                b = 48;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                c.s = b;
                b = 44;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                c.d = b;
                b = 40;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                c.t = b;
                b = 32;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                c.type = b;
                b = 16;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 255;
                c.b = b;
                b = a.low & 65535;
                c.n = b;
                return c
            }
            ;
            Lg.prototype = {
                toGLSL: function() {
                    return fd.prefixFromType(this.type, this.programType) + this.n
                },
                toSamplerState: function() {
                    switch (this.f) {
                    case 0:
                        var a = 5;
                        break;
                    case 1:
                        a = 4;
                        break;
                    default:
                        throw new Xc;
                    }
                    switch (this.m) {
                    case 0:
                        var b = 2;
                        break;
                    case 1:
                        b = 1;
                        break;
                    case 2:
                        b = 0;
                        break;
                    default:
                        throw new Xc;
                    }
                    switch (this.w) {
                    case 0:
                        var c = 0;
                        break;
                    case 1:
                        c = 2;
                        break;
                    default:
                        throw new Xc;
                    }
                    return new kg(c,a,b,(this.b << 24 >> 24) / 8,4 == (this.s & 4),1 == (this.s & 1),2 == this.t)
                },
                __class__: Lg
            };
            var lg = function() {};
            h["openfl.display3D._internal._AGALConverter.SourceRegister"] = lg;
            lg.__name__ = "openfl.display3D._internal._AGALConverter.SourceRegister";
            lg.parse = function(a, b, c) {
                var d = new lg;
                d.programType = b;
                b = 63;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 1;
                d.d = b;
                b = 48;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 3;
                d.q = b;
                b = 40;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                d.itype = b;
                b = 32;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 15;
                d.type = b;
                b = 24;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 255;
                d.s = b;
                b = 16;
                b = 0 == b ? new kb(a.high,a.low) : 32 > b ? new kb(a.high >> b,a.high << 32 - b | a.low >>> b) : new kb(a.high >> 31,a.high >> b - 32);
                b = b.low & 255;
                d.o = b;
                b = a.low & 65535;
                d.n = b;
                d.sourceMask = c;
                return d
            }
            ;
            lg.prototype = {
                toGLSL: function(a, b) {
                    null == b && (b = 0);
                    null == a && (a = !0);
                    if (3 == this.type)
                        return this.programType == Td.VERTEX ? "gl_Position" : "gl_FragColor";
                    var c = 228 == this.s && 15 == this.sourceMask
                      , d = "";
                    if (5 != this.type && !c) {
                        if (0 != (this.sourceMask & 1))
                            switch (this.s & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                            }
                        if (0 != (this.sourceMask & 2))
                            switch (this.s >> 2 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                            }
                        if (0 != (this.sourceMask & 4))
                            switch (this.s >> 4 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                            }
                        if (0 != (this.sourceMask & 8))
                            switch (this.s >> 6 & 3) {
                            case 0:
                                d += "x";
                                break;
                            case 1:
                                d += "y";
                                break;
                            case 2:
                                d += "z";
                                break;
                            case 3:
                                d += "w"
                            }
                    }
                    c = fd.prefixFromType(this.type, this.programType);
                    if (0 == this.d)
                        c += this.n + b;
                    else {
                        c += this.o;
                        var f = "";
                        switch (this.q) {
                        case 0:
                            f = "x";
                            break;
                        case 1:
                            f = "y";
                            break;
                        case 2:
                            f = "z";
                            break;
                        case 3:
                            f = "w"
                        }
                        f = fd.prefixFromType(this.itype, this.programType) + this.n + "." + f;
                        c += "[ int(" + f + ") +" + b + "]"
                    }
                    a && "" != d && (c += "." + d);
                    return c
                },
                __class__: lg
            };
            var Bh = function() {
                this.backBufferEnableDepthAndStencil = !1;
                this.blendDestinationAlphaFactor = 9;
                this.blendSourceAlphaFactor = 2;
                this.blendDestinationRGBFactor = 9;
                this.blendSourceRGBFactor = 2;
                this.colorMaskAlpha = this.colorMaskBlue = this.colorMaskGreen = this.colorMaskRed = !0;
                this.culling = 3;
                this.depthCompareMode = 4;
                this.depthMask = !0;
                this.samplerStates = [];
                this.scissorRectangle = new oa;
                this.stencilCompareMode = 0;
                this.stencilPass = this.stencilFail = this.stencilDepthFail = 5;
                this.stencilReadMask = 255;
                this.stencilReferenceValue = 0;
                this.stencilTriangleFace = 2;
                this.stencilWriteMask = 255;
                this.textures = [];
                this.__frontFaceGLCCW = !0;
                this.__glBlendEquation = 32774
            };
            h["openfl.display3D._internal.Context3DState"] = Bh;
            Bh.__name__ = "openfl.display3D._internal.Context3DState";
            Bh.prototype = {
                __class__: Bh
            };
            var zb = function(a) {
                qa.call(this);
                this.__context = a;
                var b = this.__context.gl;
                this.__textureID = b.createTexture();
                this.__textureContext = this.__context.__context;
                if (null == zb.__supportsBGRA) {
                    zb.__textureInternalFormat = b.RGBA;
                    zb.__supportsBGRA = !1;
                    zb.__textureFormat = b.RGBA;
                    zb.__compressedFormats = new tc;
                    zb.__compressedFormatsAlpha = new tc;
                    a = b.getExtension("WEBGL_compressed_texture_s3tc");
                    var c = b.getExtension("WEBGL_compressed_texture_etc1");
                    b = b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    if (null != a) {
                        var d = a.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                        zb.__compressedFormats.h[0] = d;
                        d = a.COMPRESSED_RGBA_S3TC_DXT5_EXT;
                        zb.__compressedFormatsAlpha.h[0] = d
                    }
                    null != c && (d = c.COMPRESSED_RGB_ETC1_WEBGL,
                    zb.__compressedFormats.h[2] = d,
                    d = c.COMPRESSED_RGB_ETC1_WEBGL,
                    zb.__compressedFormatsAlpha.h[2] = d);
                    null != b && (d = b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,
                    zb.__compressedFormats.h[1] = d,
                    d = b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,
                    zb.__compressedFormatsAlpha.h[1] = d)
                }
                this.__internalFormat = zb.__textureInternalFormat;
                this.__format = zb.__textureFormat
            };
            h["openfl.display3D.textures.TextureBase"] = zb;
            zb.__name__ = "openfl.display3D.textures.TextureBase";
            zb.__super__ = qa;
            zb.prototype = v(qa.prototype, {
                dispose: function() {
                    var a = this.__context.gl;
                    null != this.__alphaTexture && (this.__alphaTexture.dispose(),
                    this.__alphaTexture = null);
                    null != this.__textureID && (a.deleteTexture(this.__textureID),
                    this.__textureID = null);
                    null != this.__glFramebuffer && (a.deleteFramebuffer(this.__glFramebuffer),
                    this.__glFramebuffer = null);
                    null != this.__glDepthRenderbuffer && (a.deleteRenderbuffer(this.__glDepthRenderbuffer),
                    this.__glDepthRenderbuffer = null);
                    null != this.__glStencilRenderbuffer && (a.deleteRenderbuffer(this.__glStencilRenderbuffer),
                    this.__glStencilRenderbuffer = null)
                },
                __getGLFramebuffer: function(a, b, c) {
                    b = this.__context.gl;
                    null == this.__glFramebuffer && (this.__glFramebuffer = b.createFramebuffer(),
                    this.__context.__bindGLFramebuffer(this.__glFramebuffer),
                    b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0, b.TEXTURE_2D, this.__textureID, 0),
                    this.__context.__enableErrorChecking && (c = b.checkFramebufferStatus(b.FRAMEBUFFER),
                    c != b.FRAMEBUFFER_COMPLETE && Ja.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                        fileName: "openfl/display3D/textures/TextureBase.hx",
                        lineNumber: 201,
                        className: "openfl.display3D.textures.TextureBase",
                        methodName: "__getGLFramebuffer"
                    })));
                    a && null == this.__glDepthRenderbuffer && (this.__context.__bindGLFramebuffer(this.__glFramebuffer),
                    0 != sb.__glDepthStencil ? (this.__glStencilRenderbuffer = this.__glDepthRenderbuffer = b.createRenderbuffer(),
                    b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer),
                    b.renderbufferStorage(b.RENDERBUFFER, sb.__glDepthStencil, this.__width, this.__height),
                    b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer)) : (this.__glDepthRenderbuffer = b.createRenderbuffer(),
                    this.__glStencilRenderbuffer = b.createRenderbuffer(),
                    b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer),
                    b.renderbufferStorage(b.RENDERBUFFER, b.DEPTH_COMPONENT16, this.__width, this.__height),
                    b.bindRenderbuffer(b.RENDERBUFFER, this.__glStencilRenderbuffer),
                    b.renderbufferStorage(b.RENDERBUFFER, b.STENCIL_INDEX8, this.__width, this.__height),
                    b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer),
                    b.framebufferRenderbuffer(b.FRAMEBUFFER, b.STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glStencilRenderbuffer)),
                    this.__context.__enableErrorChecking && (c = b.checkFramebufferStatus(b.FRAMEBUFFER),
                    c != b.FRAMEBUFFER_COMPLETE && Ja.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                        fileName: "openfl/display3D/textures/TextureBase.hx",
                        lineNumber: 239,
                        className: "openfl.display3D.textures.TextureBase",
                        methodName: "__getGLFramebuffer"
                    })),
                    b.bindRenderbuffer(b.RENDERBUFFER, null));
                    return this.__glFramebuffer
                },
                __getTexture: function() {
                    return this.__textureID
                },
                __setSamplerState: function(a) {
                    if (!a.equals(this.__samplerState)) {
                        var b = this.__context.gl;
                        this.__textureTarget == this.__context.gl.TEXTURE_CUBE_MAP ? this.__context.__bindGLTextureCubeMap(this.__textureID) : this.__context.__bindGLTexture2D(this.__textureID);
                        var c;
                        switch (a.wrap) {
                        case 0:
                            var d = c = b.CLAMP_TO_EDGE;
                            break;
                        case 1:
                            c = b.CLAMP_TO_EDGE;
                            d = b.REPEAT;
                            break;
                        case 2:
                            d = c = b.REPEAT;
                            break;
                        case 3:
                            c = b.REPEAT;
                            d = b.CLAMP_TO_EDGE;
                            break;
                        default:
                            throw new dc("wrap bad enum");
                        }
                        var f = 5 == a.filter ? b.NEAREST : b.LINEAR;
                        switch (a.mipfilter) {
                        case 0:
                            var g = 5 == a.filter ? b.NEAREST_MIPMAP_LINEAR : b.LINEAR_MIPMAP_LINEAR;
                            break;
                        case 1:
                            g = 5 == a.filter ? b.NEAREST_MIPMAP_NEAREST : b.LINEAR_MIPMAP_NEAREST;
                            break;
                        case 2:
                            g = 5 == a.filter ? b.NEAREST : b.LINEAR;
                            break;
                        default:
                            throw new dc("mipfiter bad enum");
                        }
                        b.texParameteri(this.__textureTarget, b.TEXTURE_MIN_FILTER, g);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_MAG_FILTER, f);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_S, c);
                        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_T, d);
                        null == this.__samplerState && (this.__samplerState = a.clone());
                        this.__samplerState.copyFrom(a);
                        return !0
                    }
                    return !1
                },
                __uploadFromImage: function(a) {
                    var b = this.__context.gl, c;
                    if (this.__textureTarget == b.TEXTURE_2D) {
                        if (1 == a.buffer.bitsPerPixel)
                            var d = c = b.ALPHA;
                        else
                            c = zb.__textureInternalFormat,
                            d = zb.__textureFormat;
                        this.__context.__bindGLTexture2D(this.__textureID);
                        a.type == wc.DATA || a.get_premultiplied() ? !a.get_premultiplied() && a.get_transparent() && b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1) : b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
                        a.type == wc.DATA ? Lc.texImage2D(b, b.TEXTURE_2D, 0, c, a.buffer.width, a.buffer.height, 0, d, b.UNSIGNED_BYTE, a.get_data()) : Lc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, a.get_src());
                        this.__context.__bindGLTexture2D(null)
                    }
                },
                __class__: zb
            });
            var xj = function(a, b, c, d, f) {
                zb.call(this, a);
                this.__width = this.__height = this.__size = b;
                this.__optimizeForRenderToTexture = d;
                this.__streamingLevels = f;
                this.__textureTarget = this.__context.gl.TEXTURE_CUBE_MAP;
                this.__uploadedSides = 0
            };
            h["openfl.display3D.textures.CubeTexture"] = xj;
            xj.__name__ = "openfl.display3D.textures.CubeTexture";
            xj.__super__ = zb;
            xj.prototype = v(zb.prototype, {
                __getGLFramebuffer: function(a, b, c) {
                    var d = this.__context.gl;
                    null == this.__glFramebuffer && (this.__glFramebuffer = d.createFramebuffer(),
                    this.__framebufferSurface = -1);
                    if (this.__framebufferSurface != c && (this.__framebufferSurface = c,
                    this.__context.__bindGLFramebuffer(this.__glFramebuffer),
                    d.framebufferTexture2D(d.FRAMEBUFFER, d.COLOR_ATTACHMENT0, d.TEXTURE_CUBE_MAP_POSITIVE_X + c, this.__textureID, 0),
                    this.__context.__enableErrorChecking)) {
                        var f = d.checkFramebufferStatus(d.FRAMEBUFFER);
                        f != d.FRAMEBUFFER_COMPLETE && Ja.error("Error: Context3D.setRenderToTexture status:" + f + " width:" + this.__width + " height:" + this.__height, {
                            fileName: "openfl/display3D/textures/CubeTexture.hx",
                            lineNumber: 279,
                            className: "openfl.display3D.textures.CubeTexture",
                            methodName: "__getGLFramebuffer"
                        })
                    }
                    return zb.prototype.__getGLFramebuffer.call(this, a, b, c)
                },
                __setSamplerState: function(a) {
                    if (zb.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        2 == a.mipfilter || this.__samplerState.mipmapGenerated || (b.generateMipmap(b.TEXTURE_CUBE_MAP),
                        this.__samplerState.mipmapGenerated = !0);
                        if (0 != sb.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                            case 0:
                                a = 16;
                                break;
                            case 1:
                                a = 2;
                                break;
                            case 2:
                                a = 4;
                                break;
                            case 3:
                                a = 8;
                                break;
                            default:
                                a = 1
                            }
                            a > sb.__glMaxTextureMaxAnisotropy && (a = sb.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_CUBE_MAP, sb.__glTextureMaxAnisotropy, a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: xj
            });
            var Ch = function(a, b, c, d, f) {
                zb.call(this, a);
                this.__width = b;
                this.__height = c;
                this.__optimizeForRenderToTexture = f;
                this.__textureTarget = this.__context.gl.TEXTURE_2D;
                this.uploadFromTypedArray(null);
                f && this.__getGLFramebuffer(!0, 0, 0)
            };
            h["openfl.display3D.textures.RectangleTexture"] = Ch;
            Ch.__name__ = "openfl.display3D.textures.RectangleTexture";
            Ch.__super__ = zb;
            Ch.prototype = v(zb.prototype, {
                uploadFromTypedArray: function(a) {
                    var b = this.__context.gl;
                    this.__context.__bindGLTexture2D(this.__textureID);
                    Lc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, b.UNSIGNED_BYTE, a);
                    this.__context.__bindGLTexture2D(null)
                },
                __setSamplerState: function(a) {
                    if (zb.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        if (0 != sb.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                            case 0:
                                a = 16;
                                break;
                            case 1:
                                a = 2;
                                break;
                            case 2:
                                a = 4;
                                break;
                            case 3:
                                a = 8;
                                break;
                            default:
                                a = 1
                            }
                            a > sb.__glMaxTextureMaxAnisotropy && (a = sb.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_2D, sb.__glTextureMaxAnisotropy, a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: Ch
            });
            var wj = function(a, b, c, d, f, g) {
                zb.call(this, a);
                this.__width = b;
                this.__height = c;
                this.__optimizeForRenderToTexture = f;
                this.__streamingLevels = g;
                a = this.__context.gl;
                this.__textureTarget = a.TEXTURE_2D;
                this.__context.__bindGLTexture2D(this.__textureID);
                Lc.texImage2D(a, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, a.UNSIGNED_BYTE, null);
                this.__context.__bindGLTexture2D(null);
                f && this.__getGLFramebuffer(!0, 0, 0)
            };
            h["openfl.display3D.textures.Texture"] = wj;
            wj.__name__ = "openfl.display3D.textures.Texture";
            wj.__super__ = zb;
            wj.prototype = v(zb.prototype, {
                __setSamplerState: function(a) {
                    if (zb.prototype.__setSamplerState.call(this, a)) {
                        var b = this.__context.gl;
                        2 == a.mipfilter || this.__samplerState.mipmapGenerated || (b.generateMipmap(b.TEXTURE_2D),
                        this.__samplerState.mipmapGenerated = !0);
                        if (0 != sb.__glMaxTextureMaxAnisotropy) {
                            switch (a.filter) {
                            case 0:
                                a = 16;
                                break;
                            case 1:
                                a = 2;
                                break;
                            case 2:
                                a = 4;
                                break;
                            case 3:
                                a = 8;
                                break;
                            default:
                                a = 1
                            }
                            a > sb.__glMaxTextureMaxAnisotropy && (a = sb.__glMaxTextureMaxAnisotropy);
                            b.texParameterf(b.TEXTURE_2D, sb.__glTextureMaxAnisotropy, a)
                        }
                        return !0
                    }
                    return !1
                },
                __class__: wj
            });
            var Ok = function(a) {
                zb.call(this, a);
                this.__textureTarget = this.__context.gl.TEXTURE_2D
            };
            h["openfl.display3D.textures.VideoTexture"] = Ok;
            Ok.__name__ = "openfl.display3D.textures.VideoTexture";
            Ok.__super__ = zb;
            Ok.prototype = v(zb.prototype, {
                dispose: function() {
                    null != this.__netStream && null != this.__netStream.__video && this.__netStream.__video.removeEventListener("timeupdate", m(this, this.__onTimeUpdate));
                    zb.prototype.dispose.call(this)
                },
                __onTimeUpdate: function(a) {
                    null != this.__netStream && this.__netStream.__video.currentTime != this.__cacheTime && 2 <= this.__netStream.__video.readyState && this.__textureReady()
                },
                __getTexture: function() {
                    if (this.__netStream.__video.currentTime != this.__cacheTime && 2 <= this.__netStream.__video.readyState) {
                        var a = this.__context.gl;
                        this.__context.__bindGLTexture2D(this.__textureID);
                        Lc.texImage2D(a, a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, this.__netStream.__video);
                        this.__cacheTime = this.__netStream.__video.currentTime
                    }
                    return this.__textureID
                },
                __textureReady: function() {
                    this.videoWidth = this.__netStream.__video.videoWidth;
                    this.videoHeight = this.__netStream.__video.videoHeight;
                    var a = new ya("textureReady");
                    this.dispatchEvent(a)
                },
                __class__: Ok
            });
            var dc = function(a, b) {
                null == b && (b = 0);
                null == a && (a = "");
                aa.call(this, a);
                this.errorID = b;
                this.name = "Error";
                this.__skipStack++
            };
            h["openfl.errors.Error"] = dc;
            dc.__name__ = "openfl.errors.Error";
            dc.__super__ = aa;
            dc.prototype = v(aa.prototype, {
                toString: function() {
                    return null != this.get_message() ? this.get_message() : "Error"
                },
                __class__: dc
            });
            var Sf = function(a) {
                null == a && (a = "");
                dc.call(this, a);
                this.name = "ArgumentError";
                this.__skipStack++
            };
            h["openfl.errors.ArgumentError"] = Sf;
            Sf.__name__ = "openfl.errors.ArgumentError";
            Sf.__super__ = dc;
            Sf.prototype = v(dc.prototype, {
                __class__: Sf
            });
            var Mg = function(a) {
                null == a && (a = "");
                dc.call(this, a);
                this.name = "IOError";
                this.__skipStack++
            };
            h["openfl.errors.IOError"] = Mg;
            Mg.__name__ = "openfl.errors.IOError";
            Mg.__super__ = dc;
            Mg.prototype = v(dc.prototype, {
                __class__: Mg
            });
            var Eh = function(a, b) {
                Mg.call(this, "End of file was encountered");
                this.name = "EOFError";
                this.errorID = 2030;
                this.__skipStack++
            };
            h["openfl.errors.EOFError"] = Eh;
            Eh.__name__ = "openfl.errors.EOFError";
            Eh.__super__ = Mg;
            Eh.prototype = v(Mg.prototype, {
                __class__: Eh
            });
            var Xc = function(a) {
                null == a && (a = "");
                dc.call(this, a, 0);
                this.name = "IllegalOperationError";
                this.__skipStack++
            };
            h["openfl.errors.IllegalOperationError"] = Xc;
            Xc.__name__ = "openfl.errors.IllegalOperationError";
            Xc.__super__ = dc;
            Xc.prototype = v(dc.prototype, {
                __class__: Xc
            });
            var Yg = function(a) {
                null == a && (a = "");
                dc.call(this, a, 0);
                this.name = "RangeError";
                this.__skipStack++
            };
            h["openfl.errors.RangeError"] = Yg;
            Yg.__name__ = "openfl.errors.RangeError";
            Yg.__super__ = dc;
            Yg.prototype = v(dc.prototype, {
                __class__: Yg
            });
            var Rf = function(a) {
                null == a && (a = "");
                dc.call(this, a, 0);
                this.name = "TypeError";
                this.__skipStack++
            };
            h["openfl.errors.TypeError"] = Rf;
            Rf.__name__ = "openfl.errors.TypeError";
            Rf.__super__ = dc;
            Rf.prototype = v(dc.prototype, {
                __class__: Rf
            });
            var ya = function(a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                this.type = a;
                this.bubbles = b;
                this.cancelable = c;
                this.eventPhase = 2
            };
            h["openfl.events.Event"] = ya;
            ya.__name__ = "openfl.events.Event";
            ya.prototype = {
                isDefaultPrevented: function() {
                    return this.__preventDefault
                },
                preventDefault: function() {
                    this.cancelable && (this.__preventDefault = !0)
                },
                stopImmediatePropagation: function() {
                    this.__isCanceledNow = this.__isCanceled = !0
                },
                stopPropagation: function() {
                    this.__isCanceled = !0
                },
                __class__: ya
            };
            var Ng = function(a, b, c, d) {
                null == d && (d = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.activating = d
            };
            h["openfl.events.ActivityEvent"] = Ng;
            Ng.__name__ = "openfl.events.ActivityEvent";
            Ng.__super__ = ya;
            Ng.prototype = v(ya.prototype, {
                __class__: Ng
            });
            var Le = function(a, b, c, d) {
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.text = d
            };
            h["openfl.events.TextEvent"] = Le;
            Le.__name__ = "openfl.events.TextEvent";
            Le.__super__ = ya;
            Le.prototype = v(ya.prototype, {
                __class__: Le
            });
            var Sd = function(a, b, c, d, f) {
                null == f && (f = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                Le.call(this, a, b, c, d);
                this.errorID = f
            };
            h["openfl.events.ErrorEvent"] = Sd;
            Sd.__name__ = "openfl.events.ErrorEvent";
            Sd.__super__ = Le;
            Sd.prototype = v(Le.prototype, {
                __class__: Sd
            });
            var Wg = function(a) {
                this.active = !1;
                this.reset(a)
            };
            h["openfl.events._EventDispatcher.DispatchIterator"] = Wg;
            Wg.__name__ = "openfl.events._EventDispatcher.DispatchIterator";
            Wg.prototype = {
                copy: function() {
                    this.isCopy || (this.list = this.list.slice(),
                    this.isCopy = !0)
                },
                hasNext: function() {
                    return this.index < this.list.length
                },
                next: function() {
                    return this.list[this.index++]
                },
                remove: function(a, b) {
                    if (this.active)
                        if (this.isCopy) {
                            b = this.index;
                            for (var c = this.list.length; b < c; ) {
                                var d = b++;
                                if (this.list[d] == a) {
                                    this.list.splice(d, 1);
                                    break
                                }
                            }
                        } else
                            b < this.index && this.index--
                },
                reset: function(a) {
                    this.list = a;
                    this.isCopy = !1;
                    this.index = 0
                },
                start: function() {
                    this.active = !0
                },
                stop: function() {
                    this.active = !1
                },
                __class__: Wg
            };
            var Qf = function(a, b, c, d) {
                d && Qf.supportsWeakReference ? this.weakRefCallback = new WeakRef(a) : this.callback = a;
                this.useCapture = b;
                this.priority = c;
                this.useWeakReference = d
            };
            h["openfl.events._EventDispatcher.Listener"] = Qf;
            Qf.__name__ = "openfl.events._EventDispatcher.Listener";
            Qf.prototype = {
                match: function(a, b) {
                    var c = this.callback;
                    return null != this.weakRefCallback && (c = this.weakRefCallback.deref(),
                    null == c) ? !1 : c == a ? this.useCapture == b : !1
                },
                __class__: Qf
            };
            var ig = function(a, b, c, d, f, g) {
                null == g && (g = 0);
                null == f && (f = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.keyCode = g;
                this.shiftKey = f;
                this.relatedObject = d
            };
            h["openfl.events.FocusEvent"] = ig;
            ig.__name__ = "openfl.events.FocusEvent";
            ig.__super__ = ya;
            ig.prototype = v(ya.prototype, {
                __class__: ig
            });
            var kf = function(a, b, c, d, f) {
                null == f && (f = !1);
                null == d && (d = !1);
                null == c && (c = !1);
                null == b && (b = !1);
                Ng.call(this, a, b, c);
                this.fullScreen = d;
                this.interactive = f
            };
            h["openfl.events.FullScreenEvent"] = kf;
            kf.__name__ = "openfl.events.FullScreenEvent";
            kf.__super__ = Ng;
            kf.prototype = v(Ng.prototype, {
                __class__: kf
            });
            var Og = function(a, b, c, d) {
                null == c && (c = !1);
                null == b && (b = !0);
                ya.call(this, a, b, c);
                this.device = d
            };
            h["openfl.events.GameInputEvent"] = Og;
            Og.__name__ = "openfl.events.GameInputEvent";
            Og.__super__ = ya;
            Og.prototype = v(ya.prototype, {
                __class__: Og
            });
            var Fh = function(a, b, c, d, f) {
                null == f && (f = !1);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                this.responseHeaders = [];
                this.status = d;
                this.redirected = f;
                ya.call(this, a, b, c)
            };
            h["openfl.events.HTTPStatusEvent"] = Fh;
            Fh.__name__ = "openfl.events.HTTPStatusEvent";
            Fh.__super__ = ya;
            Fh.prototype = v(ya.prototype, {
                __class__: Fh
            });
            var Pg = function(a, b, c, d, f) {
                null == f && (f = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !0);
                Sd.call(this, a, b, c, d, f)
            };
            h["openfl.events.IOErrorEvent"] = Pg;
            Pg.__name__ = "openfl.events.IOErrorEvent";
            Pg.__super__ = Sd;
            Pg.prototype = v(Sd.prototype, {
                __class__: Pg
            });
            var tj = function(a, b, c, d, f, g, k, l, h, u, w) {
                null == w && (w = !1);
                null == u && (u = !1);
                null == h && (h = !1);
                null == l && (l = !1);
                null == k && (k = !1);
                null == f && (f = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.charCode = d;
                this.keyCode = f;
                this.keyLocation = null != g ? g : 0;
                this.ctrlKey = k;
                this.altKey = l;
                this.shiftKey = h;
                this.controlKey = u;
                this.commandKey = w;
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.KeyboardEvent"] = tj;
            tj.__name__ = "openfl.events.KeyboardEvent";
            tj.__super__ = ya;
            tj.prototype = v(ya.prototype, {
                __class__: tj
            });
            var Fb = function(a, b, c, d, f, g, k, l, h, u, w, n, r, x) {
                null == x && (x = 0);
                null == r && (r = !1);
                null == n && (n = !1);
                null == w && (w = 0);
                null == u && (u = !1);
                null == h && (h = !1);
                null == l && (l = !1);
                null == k && (k = !1);
                null == f && (f = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !0);
                ya.call(this, a, b, c);
                this.shiftKey = h;
                this.altKey = l;
                this.ctrlKey = k;
                this.bubbles = b;
                this.relatedObject = g;
                this.delta = w;
                this.localX = d;
                this.localY = f;
                this.buttonDown = u;
                this.commandKey = n;
                this.controlKey = r;
                this.clickCount = x;
                this.isRelatedObjectInaccessible = !1;
                this.stageY = this.stageX = NaN;
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.MouseEvent"] = Fb;
            Fb.__name__ = "openfl.events.MouseEvent";
            Fb.__create = function(a, b, c, d, f, g, k, l) {
                null == l && (l = 0);
                a = new Fb(a,!0,!1,g.x,g.y,null,Fb.__ctrlKey,Fb.__altKey,Fb.__shiftKey,Fb.__buttonDown,l,Fb.__commandKey,Fb.__controlKey,c);
                a.stageX = d;
                a.stageY = f;
                a.target = k;
                return a
            }
            ;
            Fb.__super__ = ya;
            Fb.prototype = v(ya.prototype, {
                updateAfterEvent: function() {
                    this.__updateAfterEventFlag = !0
                },
                __class__: Fb
            });
            var Aj = function(a, b, c, d) {
                null == c && (c = !1);
                null == b && (b = !1);
                this.info = d;
                ya.call(this, a, b, c)
            };
            h["openfl.events.NetStatusEvent"] = Aj;
            Aj.__name__ = "openfl.events.NetStatusEvent";
            Aj.__super__ = ya;
            Aj.prototype = v(ya.prototype, {
                __class__: Aj
            });
            var eg = function(a, b, c, d, f) {
                null == f && (f = 0);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.bytesLoaded = d;
                this.bytesTotal = f
            };
            h["openfl.events.ProgressEvent"] = eg;
            eg.__name__ = "openfl.events.ProgressEvent";
            eg.__super__ = ya;
            eg.prototype = v(ya.prototype, {
                __class__: eg
            });
            var Kh = function(a, b, c, d, f, g) {
                null == g && (g = !0);
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.objectMatrix = d;
                this.objectColorTransform = f;
                this.allowSmoothing = g
            };
            h["openfl.events.RenderEvent"] = Kh;
            Kh.__name__ = "openfl.events.RenderEvent";
            Kh.__super__ = ya;
            Kh.prototype = v(ya.prototype, {
                __class__: Kh
            });
            var Bj = function(a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.data = new Wc(0);
                this.data.__endian = 1;
                this.position = 0
            };
            h["openfl.events.SampleDataEvent"] = Bj;
            Bj.__name__ = "openfl.events.SampleDataEvent";
            Bj.__super__ = ya;
            Bj.prototype = v(ya.prototype, {
                getBufferSize: function() {
                    var a = ab.toFloat(Kd.get_length(this.data)) / ab.toFloat(4) / 2 | 0;
                    if (0 < a) {
                        if (0 != a && 0 == (a & a - 1) && 2048 <= a && 8192 >= a)
                            return this.tempBuffer = new Float32Array(2 * a),
                            a;
                        throw new dc("To be consistent with flash the listener function registered to SampleDataEvent has to provide 2048, 4096 or 8192 samples if targeting HTML5.");
                    }
                    return 0
                },
                getSamples: function(a) {
                    this.data.position = 0;
                    this.tempBuffer = Gl.fromBytes(Kd.toBytes(this.data));
                    this.leftChannel = a.outputBuffer.getChannelData(0);
                    this.rightChannel = a.outputBuffer.getChannelData(1);
                    for (var b = a = 0, c = ab.toFloat(Kd.get_length(this.data)) / ab.toFloat(2) | 0; b < c; ) {
                        var d = b++;
                        this.leftChannel[d] = this.tempBuffer[a++];
                        this.rightChannel[d] = this.tempBuffer[a++]
                    }
                },
                __class__: Bj
            });
            var Cj = function(a, b, c, d, f) {
                null == f && (f = 0);
                null == d && (d = "");
                null == c && (c = !1);
                null == b && (b = !1);
                Sd.call(this, a, b, c, d, f)
            };
            h["openfl.events.SecurityErrorEvent"] = Cj;
            Cj.__name__ = "openfl.events.SecurityErrorEvent";
            Cj.__super__ = Sd;
            Cj.prototype = v(Sd.prototype, {
                __class__: Cj
            });
            var Qg = function(a, b, c) {
                null == c && (c = !1);
                null == b && (b = !1);
                ya.call(this, a, b, c);
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.TimerEvent"] = Qg;
            Qg.__name__ = "openfl.events.TimerEvent";
            Qg.__super__ = ya;
            Qg.prototype = v(ya.prototype, {
                updateAfterEvent: function() {
                    this.__updateAfterEventFlag = !0
                },
                __class__: Qg
            });
            var Vd = function(a, b, c, d, f, g, k, l, h, u, w, n, r, x, m, C, z, K, A, I) {
                null == C && (C = !1);
                null == m && (m = !1);
                null == x && (x = !1);
                null == r && (r = !1);
                null == n && (n = !1);
                null == u && (u = 0);
                null == h && (h = 0);
                null == l && (l = 0);
                null == k && (k = 0);
                null == g && (g = 0);
                null == f && (f = !1);
                null == d && (d = 0);
                null == c && (c = !1);
                null == b && (b = !0);
                ya.call(this, a, b, c);
                this.touchPointID = d;
                this.isPrimaryTouchPoint = f;
                this.localX = g;
                this.localY = k;
                this.sizeX = l;
                this.sizeY = h;
                this.pressure = u;
                this.relatedObject = w;
                this.ctrlKey = n;
                this.altKey = r;
                this.shiftKey = x;
                this.commandKey = m;
                this.controlKey = C;
                this.stageY = this.stageX = NaN;
                this.__updateAfterEventFlag = !1
            };
            h["openfl.events.TouchEvent"] = Vd;
            Vd.__name__ = "openfl.events.TouchEvent";
            Vd.__create = function(a, b, c, d, f, g) {
                a = new Vd(a,!0,!1,0,!0,f.x,f.y,1,1,1);
                a.stageX = c;
                a.stageY = d;
                a.target = g;
                return a
            }
            ;
            Vd.__super__ = ya;
            Vd.prototype = v(ya.prototype, {
                __class__: Vd
            });
            var ng = function(a, b, c, d) {
                null == c && (c = !0);
                null == b && (b = !0);
                Sd.call(this, a, b, c);
                this.error = d
            };
            h["openfl.events.UncaughtErrorEvent"] = ng;
            ng.__name__ = "openfl.events.UncaughtErrorEvent";
            ng.__super__ = Sd;
            ng.prototype = v(Sd.prototype, {
                __class__: ng
            });
            var pj = function() {
                this.__enabled = !0;
                qa.call(this)
            };
            h["openfl.events.UncaughtErrorEvents"] = pj;
            pj.__name__ = "openfl.events.UncaughtErrorEvents";
            pj.__super__ = qa;
            pj.prototype = v(qa.prototype, {
                addEventListener: function(a, b, c, d, f) {
                    null == f && (f = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    qa.prototype.addEventListener.call(this, a, b, c, d, f);
                    Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError") && (this.__enabled = !0)
                },
                removeEventListener: function(a, b, c) {
                    null == c && (c = !1);
                    qa.prototype.removeEventListener.call(this, a, b, c);
                    Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError") || (this.__enabled = !1)
                },
                __class__: pj
            });
            var Rg = function() {
                this.__leftExtension = this.__bottomExtension = 0;
                this.__needSecondBitmapData = !0;
                this.__numShaderPasses = 0;
                this.__preserveObject = !1;
                this.__rightExtension = 0;
                this.__shaderBlendMode = 10;
                this.__topExtension = 0;
                this.__smooth = !0
            };
            h["openfl.filters.BitmapFilter"] = Rg;
            Rg.__name__ = "openfl.filters.BitmapFilter";
            Rg.prototype = {
                clone: function() {
                    return new Rg
                },
                __applyFilter: function(a, b, c, d) {
                    return b
                },
                __initShader: function(a, b, c) {
                    return null
                },
                __class__: Rg
            };
            var Mc = function(a) {
                null == this.__glFragmentSource && (this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t}");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
                zd.call(this, a);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters.BitmapFilterShader"] = Mc;
            Mc.__name__ = "openfl.filters.BitmapFilterShader";
            Mc.__super__ = zd;
            Mc.prototype = v(zd.prototype, {
                __class__: Mc
            });
            var Dj = function() {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec4 uColor;\n\t\tuniform float uStrength;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void)\n\t\t{\n            vec4 texel = texture2D(openfl_Texture, vTexCoord);\n\n            vec3 contributions = vec3(0.00443, 0.05399, 0.24197);\n            vec3 top = vec3(\n                texture2D(openfl_Texture, vBlurCoords[0]).a,\n                texture2D(openfl_Texture, vBlurCoords[1]).a,\n                texture2D(openfl_Texture, vBlurCoords[2]).a\n            );\n            vec3 bottom = vec3(\n                texture2D(openfl_Texture, vBlurCoords[3]).a,\n                texture2D(openfl_Texture, vBlurCoords[4]).a,\n                texture2D(openfl_Texture, vBlurCoords[5]).a\n            );\n\n            float a = texel.a * 0.39894;\n\t\t\ta += dot(top, contributions.xyz);\n            a += dot(bottom, contributions.zyx);\n\n\t\t\tgl_FragColor = uColor * clamp(a * uStrength, 0.0, 1.0);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\n\t\t\tvec3 offset = vec3(0.5, 0.75, 1.0);\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * offset.z;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * offset.y;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * offset.x;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord + r * offset.x;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * offset.y;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * offset.z;\n\t\t}\n\t");
                Mc.call(this);
                this.uRadius.value = [0, 0];
                this.uColor.value = [0, 0, 0, 0];
                this.uStrength.value = [1];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.BlurAlphaShader"] = Dj;
            Dj.__name__ = "openfl.filters._GlowFilter.BlurAlphaShader";
            Dj.__super__ = Mc;
            Dj.prototype = v(Mc.prototype, {
                __class__: Dj
            });
            var Ej = function() {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * (1.0 - src.a);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Mc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.CombineKnockoutShader"] = Ej;
            Ej.__name__ = "openfl.filters._GlowFilter.CombineKnockoutShader";
            Ej.__super__ = Mc;
            Ej.prototype = v(Mc.prototype, {
                __class__: Ej
            });
            var Fj = function() {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = src + glow * (1.0 - src.a);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Mc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.CombineShader"] = Fj;
            Fj.__name__ = "openfl.filters._GlowFilter.CombineShader";
            Fj.__super__ = Mc;
            Fj.prototype = v(Mc.prototype, {
                __class__: Fj
            });
            var Gj = function() {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * src.a;\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Mc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.InnerCombineKnockoutShader"] = Gj;
            Gj.__name__ = "openfl.filters._GlowFilter.InnerCombineKnockoutShader";
            Gj.__super__ = Mc;
            Gj.prototype = v(Mc.prototype, {
                __class__: Gj
            });
            var Hj = function() {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - glow.a)) + (glow.rgb * src.a), src.a);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t");
                Mc.call(this);
                this.offset.value = [0, 0];
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.InnerCombineShader"] = Hj;
            Hj.__name__ = "openfl.filters._GlowFilter.InnerCombineShader";
            Hj.__super__ = Mc;
            Hj.prototype = v(Mc.prototype, {
                __class__: Hj
            });
            var Ij = function() {
                null == this.__glFragmentSource && (this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tvec4 texel = texture2D(openfl_Texture, vTexCoord);\n\t\t\tgl_FragColor = vec4(texel.rgb, 1.0 - texel.a);\n\t\t}\n\t");
                null == this.__glVertexSource && (this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\t\t}\n\t");
                Mc.call(this);
                this.__isGenerated = !0;
                this.__initGL()
            };
            h["openfl.filters._GlowFilter.InvertAlphaShader"] = Ij;
            Ij.__name__ = "openfl.filters._GlowFilter.InvertAlphaShader";
            Ij.__super__ = Mc;
            Ij.prototype = v(Mc.prototype, {
                __class__: Ij
            });
            var ad = function(a, b, c, d, f, g, k, l) {
                null == l && (l = !1);
                null == k && (k = !1);
                null == g && (g = 1);
                null == f && (f = 2);
                null == d && (d = 6);
                null == c && (c = 6);
                null == b && (b = 1);
                null == a && (a = 16711680);
                Rg.call(this);
                this.__color = a;
                this.__alpha = b;
                this.__blurX = c;
                this.__blurY = d;
                this.__strength = f;
                this.__inner = k;
                this.__knockout = l;
                this.__quality = g;
                this.__updateSize();
                this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = !0
            };
            h["openfl.filters.GlowFilter"] = ad;
            ad.__name__ = "openfl.filters.GlowFilter";
            ad.__super__ = Rg;
            ad.prototype = v(Rg.prototype, {
                clone: function() {
                    return new ad(this.__color,this.__alpha,this.__blurX,this.__blurY,this.__strength,this.__quality,this.__inner,this.__knockout)
                },
                __applyFilter: function(a, b, c, d) {
                    var f = this.__color >> 16 & 255
                      , g = this.__color >> 8 & 255
                      , k = this.__color & 255;
                    c = bc.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality, this.__strength);
                    c.colorTransform(c.get_rect(), (new Kb(0,0,0,this.__alpha,f,g,k,0)).__toLimeColorMatrix());
                    return c == a.image ? a : b
                },
                __initShader: function(a, b, c) {
                    if (this.__inner && 0 == b)
                        return ad.__invertAlphaShader;
                    a = b - (this.__inner ? 1 : 0);
                    b = this.__horizontalPasses + this.__verticalPasses;
                    if (a < b) {
                        var d = ad.__blurAlphaShader;
                        a < this.__horizontalPasses ? (c = .5 * Math.pow(.5, a >> 1),
                        d.uRadius.value[0] = this.get_blurX() * c,
                        d.uRadius.value[1] = 0) : (c = .5 * Math.pow(.5, a - this.__horizontalPasses >> 1),
                        d.uRadius.value[0] = 0,
                        d.uRadius.value[1] = this.get_blurY() * c);
                        d.uColor.value[0] = (this.get_color() >> 16 & 255) / 255;
                        d.uColor.value[1] = (this.get_color() >> 8 & 255) / 255;
                        d.uColor.value[2] = (this.get_color() & 255) / 255;
                        d.uColor.value[3] = this.get_alpha();
                        d.uStrength.value[0] = a == b - 1 ? this.__strength : 1;
                        return d
                    }
                    if (this.__inner) {
                        if (this.__knockout)
                            return d = ad.__innerCombineKnockoutShader,
                            d.sourceBitmap.input = c,
                            d.offset.value[0] = 0,
                            d.offset.value[1] = 0,
                            d;
                        d = ad.__innerCombineShader
                    } else {
                        if (this.__knockout)
                            return d = ad.__combineKnockoutShader,
                            d.sourceBitmap.input = c,
                            d.offset.value[0] = 0,
                            d.offset.value[1] = 0,
                            d;
                        d = ad.__combineShader
                    }
                    d.sourceBitmap.input = c;
                    d.offset.value[0] = 0;
                    d.offset.value[1] = 0;
                    return d
                },
                __updateSize: function() {
                    this.__rightExtension = this.__leftExtension = 0 < this.__blurX ? Math.ceil(1.5 * this.__blurX) : 0;
                    this.__bottomExtension = this.__topExtension = 0 < this.__blurY ? Math.ceil(1.5 * this.__blurY) : 0;
                    this.__calculateNumShaderPasses()
                },
                __calculateNumShaderPasses: function() {
                    this.__horizontalPasses = 0 >= this.__blurX ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
                    this.__verticalPasses = 0 >= this.__blurY ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
                    this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses + (this.__inner ? 2 : 1)
                },
                get_alpha: function() {
                    return this.__alpha
                },
                get_blurX: function() {
                    return this.__blurX
                },
                get_blurY: function() {
                    return this.__blurY
                },
                get_color: function() {
                    return this.__color
                },
                __class__: ad,
                __properties__: {
                    get_color: "get_color",
                    get_blurY: "get_blurY",
                    get_blurX: "get_blurX",
                    get_alpha: "get_alpha"
                }
            });
            var uj = function(a) {
                null != a && 16 == a.get_length() ? this.rawData = a.concat(null) : this.rawData = ua.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
            };
            h["openfl.geom.Matrix3D"] = uj;
            uj.__name__ = "openfl.geom.Matrix3D";
            uj.prototype = {
                append: function(a) {
                    var b = this.rawData.get(0)
                      , c = this.rawData.get(4)
                      , d = this.rawData.get(8)
                      , f = this.rawData.get(12)
                      , g = this.rawData.get(1)
                      , k = this.rawData.get(5)
                      , l = this.rawData.get(9)
                      , h = this.rawData.get(13)
                      , u = this.rawData.get(2)
                      , w = this.rawData.get(6)
                      , n = this.rawData.get(10)
                      , r = this.rawData.get(14)
                      , x = this.rawData.get(3)
                      , m = this.rawData.get(7)
                      , C = this.rawData.get(11)
                      , z = this.rawData.get(15)
                      , K = a.rawData.get(0)
                      , A = a.rawData.get(4)
                      , I = a.rawData.get(8)
                      , B = a.rawData.get(12)
                      , t = a.rawData.get(1)
                      , N = a.rawData.get(5)
                      , v = a.rawData.get(9)
                      , D = a.rawData.get(13)
                      , E = a.rawData.get(2)
                      , J = a.rawData.get(6)
                      , wa = a.rawData.get(10)
                      , P = a.rawData.get(14)
                      , G = a.rawData.get(3)
                      , M = a.rawData.get(7)
                      , pb = a.rawData.get(11);
                    a = a.rawData.get(15);
                    this.rawData.set(0, b * K + g * A + u * I + x * B);
                    this.rawData.set(1, b * t + g * N + u * v + x * D);
                    this.rawData.set(2, b * E + g * J + u * wa + x * P);
                    this.rawData.set(3, b * G + g * M + u * pb + x * a);
                    this.rawData.set(4, c * K + k * A + w * I + m * B);
                    this.rawData.set(5, c * t + k * N + w * v + m * D);
                    this.rawData.set(6, c * E + k * J + w * wa + m * P);
                    this.rawData.set(7, c * G + k * M + w * pb + m * a);
                    this.rawData.set(8, d * K + l * A + n * I + C * B);
                    this.rawData.set(9, d * t + l * N + n * v + C * D);
                    this.rawData.set(10, d * E + l * J + n * wa + C * P);
                    this.rawData.set(11, d * G + l * M + n * pb + C * a);
                    this.rawData.set(12, f * K + h * A + r * I + z * B);
                    this.rawData.set(13, f * t + h * N + r * v + z * D);
                    this.rawData.set(14, f * E + h * J + r * wa + z * P);
                    this.rawData.set(15, f * G + h * M + r * pb + z * a)
                },
                appendTranslation: function(a, b, c) {
                    var d = this.rawData;
                    d.set(12, d.get(12) + a);
                    d = this.rawData;
                    d.set(13, d.get(13) + b);
                    d = this.rawData;
                    d.set(14, d.get(14) + c)
                },
                copyRawDataFrom: function(a, b, c) {
                    null == c && (c = !1);
                    null == b && (b = 0);
                    c && this.transpose();
                    for (var d = 0, f = a.get_length() - b; d < f; ) {
                        var g = d++;
                        this.rawData.set(g, a.get(g + b))
                    }
                    c && this.transpose()
                },
                identity: function() {
                    this.rawData = ua.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
                },
                transpose: function() {
                    var a = this.rawData.copy();
                    this.rawData.set(1, a.get(4));
                    this.rawData.set(2, a.get(8));
                    this.rawData.set(3, a.get(12));
                    this.rawData.set(4, a.get(1));
                    this.rawData.set(6, a.get(9));
                    this.rawData.set(7, a.get(13));
                    this.rawData.set(8, a.get(2));
                    this.rawData.set(9, a.get(6));
                    this.rawData.set(11, a.get(14));
                    this.rawData.set(12, a.get(3));
                    this.rawData.set(13, a.get(7));
                    this.rawData.set(14, a.get(11))
                },
                __class__: uj
            };
            var Lh = function(a) {
                this.__colorTransform = new Kb;
                this.concatenatedColorTransform = new Kb;
                this.pixelBounds = new oa;
                this.__displayObject = a;
                this.__hasMatrix = !0
            };
            h["openfl.geom.Transform"] = Lh;
            Lh.__name__ = "openfl.geom.Transform";
            Lh.prototype = {
                get_colorTransform: function() {
                    return this.__colorTransform.__clone()
                },
                get_matrix: function() {
                    return this.__hasMatrix ? this.__displayObject.__transform.clone() : null
                },
                set_matrix: function(a) {
                    if (null == a)
                        return this.__hasMatrix = !1,
                        null;
                    this.__hasMatrix = !0;
                    this.__hasMatrix3D = !1;
                    null != this.__displayObject && this.__setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
                    return a
                },
                __setTransform: function(a, b, c, d, f, g) {
                    if (null != this.__displayObject) {
                        var k = this.__displayObject.__transform;
                        if (k.a != a || k.b != b || k.c != c || k.d != d || k.tx != f || k.ty != g) {
                            var l = 0 == b ? a : Math.sqrt(a * a + b * b);
                            var h = 0 == c ? d : Math.sqrt(c * c + d * d);
                            this.__displayObject.__scaleX = l;
                            this.__displayObject.__scaleY = h;
                            l = 180 / Math.PI * Math.atan2(d, c) - 90;
                            l != this.__displayObject.__rotation && (this.__displayObject.__rotation = l,
                            l *= Math.PI / 180,
                            this.__displayObject.__rotationSine = Math.sin(l),
                            this.__displayObject.__rotationCosine = Math.cos(l));
                            k.a = a;
                            k.b = b;
                            k.c = c;
                            k.d = d;
                            k.tx = f;
                            k.ty = g;
                            this.__displayObject.__setTransformDirty()
                        }
                    }
                },
                __class__: Lh,
                __properties__: {
                    set_matrix: "set_matrix",
                    get_matrix: "get_matrix",
                    get_colorTransform: "get_colorTransform"
                }
            };
            var Wh = function(a, b, c, d) {
                null == d && (d = 0);
                null == c && (c = 0);
                null == b && (b = 0);
                null == a && (a = 0);
                this.w = d;
                this.x = a;
                this.y = b;
                this.z = c
            };
            h["openfl.geom.Vector3D"] = Wh;
            Wh.__name__ = "openfl.geom.Vector3D";
            Wh.prototype = {
                __class__: Wh
            };
            var Pk = function(a, b) {
                this.__webAudioContext = null;
                this.__urlLoading = !1;
                qa.call(this, this);
                this.bytesTotal = this.bytesLoaded = 0;
                this.isBuffering = !1;
                this.url = null;
                null != a && this.load(a, b);
                null == a && null != Ne.context && "web" == Ne.context.type && (this.__webAudioContext = Ne.context.web)
            };
            h["openfl.media.Sound"] = Pk;
            Pk.__name__ = "openfl.media.Sound";
            Pk.__super__ = qa;
            Pk.prototype = v(qa.prototype, {
                load: function(a, b) {
                    var c = this;
                    this.url = a.url;
                    this.__urlLoading = !0;
                    this.dispatchEvent(new ya("open"));
                    a = Ha.getLibrary("default");
                    if (null != a && Object.prototype.hasOwnProperty.call(a.cachedAudioBuffers.h, this.url))
                        a = a.cachedAudioBuffers.h[this.url],
                        b = null != a && null != a.data ? a.data.byteLength : 0,
                        this.AudioBuffer_onURLProgress(b, b),
                        this.AudioBuffer_onURLLoad(a);
                    else
                        Cc.loadFromFile(this.url).onProgress(m(this, this.AudioBuffer_onURLProgress)).onComplete(m(this, this.AudioBuffer_onURLLoad)).onError(function(a) {
                            c.AudioBuffer_onURLLoad(null)
                        })
                },
                AudioBuffer_onURLLoad: function(a) {
                    this.__urlLoading = !1;
                    null == a ? this.dispatchEvent(new Pg("ioError")) : (this.__buffer = a,
                    this.dispatchEvent(new ya("complete")),
                    null != this.__pendingSoundChannel && (this.__pendingAudioSource.buffer = this.__buffer,
                    this.__pendingAudioSource.init(),
                    this.__pendingSoundChannel.__initAudioSource(this.__pendingAudioSource)));
                    this.__pendingAudioSource = this.__pendingSoundChannel = null
                },
                AudioBuffer_onURLProgress: function(a, b) {
                    var c = new eg("progress");
                    c.bytesLoaded = a;
                    c.bytesTotal = b;
                    this.dispatchEvent(c)
                },
                __class__: Pk
            });
            var Qk = function(a, b, c) {
                this.__firstRun = !0;
                qa.call(this, this);
                this.__sound = a;
                this.rightPeak = this.leftPeak = 1;
                this.__soundTransform = null != c ? c : new mg;
                this.__initAudioSource(b);
                we.__registerSoundChannel(this)
            };
            h["openfl.media.SoundChannel"] = Qk;
            Qk.__name__ = "openfl.media.SoundChannel";
            Qk.__super__ = qa;
            Qk.prototype = v(qa.prototype, {
                stop: function() {
                    we.__unregisterSoundChannel(this);
                    this.__isValid && (null != this.__processor && (this.__processor.disconnect(),
                    this.__processor = this.__processor.onaudioprocess = null),
                    this.__audioSource.stop(),
                    this.__dispose())
                },
                __dispose: function() {
                    this.__isValid && (this.__audioSource.onComplete.remove(m(this, this.audioSource_onComplete)),
                    this.__audioSource.dispose(),
                    this.__audioSource = null,
                    this.__isValid = !1)
                },
                __startSampleData: function() {
                    var a = this
                      , b = this.__sound.__webAudioContext;
                    if (null != b) {
                        this.__sampleDataEvent = new Bj("sampleData");
                        this.__sound.dispatchEvent(this.__sampleDataEvent);
                        var c = this.__sampleDataEvent.getBufferSize();
                        0 == c ? Sa.setTimeout(function() {
                            a.stop();
                            a.dispatchEvent(new ya("soundComplete"))
                        }, 1) : (this.__processor = b.createScriptProcessor(c, 0, 2),
                        this.__processor.connect(b.destination),
                        this.__processor.onaudioprocess = m(this, this.onSample),
                        b.resume())
                    }
                },
                __updateTransform: function() {
                    this.set_soundTransform(this.get_soundTransform())
                },
                __initAudioSource: function(a) {
                    this.__audioSource = a;
                    null != this.__audioSource && (this.__audioSource.onComplete.add(m(this, this.audioSource_onComplete)),
                    this.__isValid = !0,
                    this.__audioSource.play())
                },
                get_position: function() {
                    return this.__isValid ? this.__audioSource.get_currentTime() + this.__audioSource.offset : 0
                },
                set_position: function(a) {
                    if (!this.__isValid)
                        return 0;
                    this.__audioSource.set_currentTime((a | 0) - this.__audioSource.offset);
                    return a
                },
                get_soundTransform: function() {
                    return this.__soundTransform.clone()
                },
                set_soundTransform: function(a) {
                    if (null != a) {
                        this.__soundTransform.pan = a.pan;
                        this.__soundTransform.volume = a.volume;
                        var b = we.__soundTransform.pan + this.__soundTransform.pan;
                        -1 > b && (b = -1);
                        1 < b && (b = 1);
                        var c = we.__soundTransform.volume * this.__soundTransform.volume;
                        this.__isValid && (this.__audioSource.set_gain(c),
                        c = this.__audioSource.get_position(),
                        c.x = b,
                        c.z = -1 * Math.sqrt(1 - Math.pow(b, 2)),
                        this.__audioSource.set_position(c))
                    }
                    return a
                },
                audioSource_onComplete: function() {
                    we.__unregisterSoundChannel(this);
                    this.__dispose();
                    this.dispatchEvent(new ya("soundComplete"))
                },
                onSample: function(a) {
                    if (this.__firstRun) {
                        var b = !0;
                        this.__firstRun = !1
                    } else
                        Kd.set_length(this.__sampleDataEvent.data, 0),
                        this.__sound.dispatchEvent(this.__sampleDataEvent),
                        b = ab.gt(Kd.get_length(this.__sampleDataEvent.data), 0);
                    b ? this.__sampleDataEvent.getSamples(a) : (this.stop(),
                    this.dispatchEvent(new ya("soundComplete")))
                },
                __class__: Qk,
                __properties__: {
                    set_soundTransform: "set_soundTransform",
                    get_soundTransform: "get_soundTransform",
                    set_position: "set_position",
                    get_position: "get_position"
                }
            });
            var zl = function() {};
            h["openfl.media.SoundLoaderContext"] = zl;
            zl.__name__ = "openfl.media.SoundLoaderContext";
            var mg = function(a, b) {
                null == b && (b = 0);
                null == a && (a = 1);
                this.volume = a;
                this.pan = b;
                this.rightToRight = this.rightToLeft = this.leftToRight = this.leftToLeft = 0
            };
            h["openfl.media.SoundTransform"] = mg;
            mg.__name__ = "openfl.media.SoundTransform";
            mg.prototype = {
                clone: function() {
                    return new mg(this.volume,this.pan)
                },
                __class__: mg
            };
            var we = function() {};
            h["openfl.media.SoundMixer"] = we;
            we.__name__ = "openfl.media.SoundMixer";
            we.__registerSoundChannel = function(a) {
                we.__soundChannels.push(a)
            }
            ;
            we.__unregisterSoundChannel = function(a) {
                Q.remove(we.__soundChannels, a)
            }
            ;
            var Rk = function(a, b) {
                null == b && (b = 240);
                null == a && (a = 320);
                ca.call(this);
                this.__drawableType = 8;
                this.__width = a;
                this.__height = b;
                this.__textureTime = -1;
                this.smoothing = !1;
                this.deblocking = 0
            };
            h["openfl.media.Video"] = Rk;
            Rk.__name__ = "openfl.media.Video";
            Rk.__super__ = ca;
            Rk.prototype = v(ca.prototype, {
                __enterFrame: function(a) {
                    this.__renderable && null != this.__stream && !this.__renderDirty && (this.__renderDirty = !0,
                    this.__setParentRenderDirty())
                },
                __getBounds: function(a, b) {
                    var c = oa.__pool.get();
                    c.setTo(0, 0, this.__width, this.__height);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    oa.__pool.release(c)
                },
                __getIndexBuffer: function(a) {
                    if (null == this.__indexBuffer || this.__indexBufferContext != a.__context)
                        this.__indexBufferData = new Uint16Array(6),
                        this.__indexBufferData[0] = 0,
                        this.__indexBufferData[1] = 1,
                        this.__indexBufferData[2] = 2,
                        this.__indexBufferData[3] = 2,
                        this.__indexBufferData[4] = 1,
                        this.__indexBufferData[5] = 3,
                        this.__indexBufferContext = a.__context,
                        this.__indexBuffer = a.createIndexBuffer(6),
                        this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
                    return this.__indexBuffer
                },
                __getTexture: function(a) {
                    if (null == this.__stream || null == this.__stream.__video)
                        return null;
                    var b = a.__context.webgl
                      , c = b.RGBA
                      , d = b.RGBA;
                    this.__stream.__closed || this.__stream.__video.currentTime == this.__textureTime || (null == this.__texture && (this.__texture = a.createRectangleTexture(this.__stream.__video.videoWidth, this.__stream.__video.videoHeight, 1, !1)),
                    a.__bindGLTexture2D(this.__texture.__textureID),
                    Lc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, this.__stream.__video),
                    this.__textureTime = this.__stream.__video.currentTime);
                    return this.__texture
                },
                __getVertexBuffer: function(a) {
                    if (null == this.__vertexBuffer || this.__vertexBufferContext != a.__context || this.__currentWidth != this.get_width() || this.__currentHeight != this.get_height())
                        this.__currentWidth = this.get_width(),
                        this.__currentHeight = this.get_height(),
                        this.__vertexBufferData = new Float32Array(20),
                        this.__vertexBufferData[0] = this.get_width(),
                        this.__vertexBufferData[1] = this.get_height(),
                        this.__vertexBufferData[3] = 1,
                        this.__vertexBufferData[4] = 1,
                        this.__vertexBufferData[6] = this.get_height(),
                        this.__vertexBufferData[9] = 1,
                        this.__vertexBufferData[10] = this.get_width(),
                        this.__vertexBufferData[13] = 1,
                        this.__vertexBufferContext = a.__context,
                        this.__vertexBuffer = a.createVertexBuffer(3, 5),
                        this.__vertexBuffer.uploadFromTypedArray(ch.toArrayBufferView(this.__vertexBufferData));
                    return this.__vertexBuffer
                },
                __hitTest: function(a, b, c, d, f, g) {
                    if (!g.get_visible() || this.__isMask || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
                        return !1;
                    this.__getRenderTransform();
                    var k = this.__renderTransform
                      , l = k.a * k.d - k.b * k.c;
                    c = 0 == l ? -k.tx : 1 / l * (k.c * (k.ty - b) + k.d * (a - k.tx));
                    k = this.__renderTransform;
                    l = k.a * k.d - k.b * k.c;
                    a = 0 == l ? -k.ty : 1 / l * (k.a * (b - k.ty) + k.b * (k.tx - a));
                    return 0 < c && 0 < a && c <= this.__width && a <= this.__height ? (null == d || f || d.push(g),
                    !0) : !1
                },
                __hitTestMask: function(a, b) {
                    var c = B.__pool.get();
                    c.setTo(a, b);
                    this.__globalToLocal(c, c);
                    a = 0 < c.x && 0 < c.y && c.x <= this.__width && c.y <= this.__height;
                    B.__pool.release(c);
                    return a
                },
                get_height: function() {
                    return this.__height * this.get_scaleY()
                },
                set_height: function(a) {
                    if (1 != this.get_scaleY() || a != this.__height)
                        this.__setTransformDirty(),
                        this.__dirty = !0;
                    this.set_scaleY(1);
                    return this.__height = a
                },
                get_width: function() {
                    return this.__width * this.__scaleX
                },
                set_width: function(a) {
                    if (1 != this.__scaleX || this.__width != a)
                        this.__setTransformDirty(),
                        this.__dirty = !0;
                    this.set_scaleX(1);
                    return this.__width = a
                },
                __class__: Rk
            });
            var Wj = function(a, b, c) {
                this.description = a;
                this.extension = b;
                this.macType = c
            };
            h["openfl.net.FileFilter"] = Wj;
            Wj.__name__ = "openfl.net.FileFilter";
            Wj.prototype = {
                __class__: Wj
            };
            var $g = function() {
                qa.call(this);
                this.__inputControl = window.document.createElement("input");
                this.__inputControl.setAttribute("type", "file");
                this.__inputControl.onclick = function(a) {
                    a.cancelBubble = !0;
                    a.stopPropagation()
                }
            };
            h["openfl.net.FileReference"] = $g;
            $g.__name__ = "openfl.net.FileReference";
            $g.__super__ = qa;
            $g.prototype = v(qa.prototype, {
                browse: function(a) {
                    var b = this
                      , c = this.__path = this.__data = null;
                    if (null != a) {
                        c = [];
                        for (var d = 0; d < a.length; ) {
                            var f = a[d];
                            ++d;
                            c.push(P.replace(P.replace(f.extension, "*.", "."), ";", ","))
                        }
                        c = c.join(",")
                    }
                    null != c ? this.__inputControl.setAttribute("accept", c) : this.__inputControl.removeAttribute("accept");
                    this.__inputControl.onchange = function() {
                        if (0 == b.__inputControl.files.length)
                            b.dispatchEvent(new ya("cancel"));
                        else {
                            var a = b.__inputControl.files[0]
                              , c = new Date(a.lastModified);
                            b.modificationDate = c;
                            b.creationDate = b.get_modificationDate();
                            b.size = a.size;
                            c = Od.extension(a.name);
                            b.type = "." + c;
                            b.name = Od.withoutDirectory(a.name);
                            b.__path = a.name;
                            b.dispatchEvent(new ya("select"))
                        }
                    }
                    ;
                    this.__inputControl.click();
                    return !0
                },
                load: function() {
                    var a = this
                      , b = this.__inputControl.files[0]
                      , c = new FileReader;
                    c.onload = function(b) {
                        a.data = Kd.fromArrayBuffer(b.target.result);
                        a.openFileDialog_onComplete()
                    }
                    ;
                    c.onerror = function(b) {
                        a.dispatchEvent(new Pg("ioError"))
                    }
                    ;
                    c.readAsArrayBuffer(b)
                },
                openFileDialog_onComplete: function() {
                    this.dispatchEvent(new ya("complete"))
                },
                get_modificationDate: function() {
                    return this.modificationDate
                },
                __class__: $g,
                __properties__: {
                    get_modificationDate: "get_modificationDate"
                }
            });
            var Sk = function() {
                qa.call(this)
            };
            h["openfl.net.NetConnection"] = Sk;
            Sk.__name__ = "openfl.net.NetConnection";
            Sk.__super__ = qa;
            Sk.prototype = v(qa.prototype, {
                __class__: Sk
            });
            var Tk = function(a, b) {
                qa.call(this);
                this.__connection = a;
                this.__soundTransform = new mg;
                this.__video = window.document.createElement("video");
                this.__video.setAttribute("playsinline", "");
                this.__video.setAttribute("webkit-playsinline", "");
                this.__video.setAttribute("crossorigin", "anonymous");
                this.__video.addEventListener("error", m(this, this.video_onError), !1);
                this.__video.addEventListener("waiting", m(this, this.video_onWaiting), !1);
                this.__video.addEventListener("ended", m(this, this.video_onEnd), !1);
                this.__video.addEventListener("pause", m(this, this.video_onPause), !1);
                this.__video.addEventListener("seeking", m(this, this.video_onSeeking), !1);
                this.__video.addEventListener("playing", m(this, this.video_onPlaying), !1);
                this.__video.addEventListener("timeupdate", m(this, this.video_onTimeUpdate), !1);
                this.__video.addEventListener("loadstart", m(this, this.video_onLoadStart), !1);
                this.__video.addEventListener("stalled", m(this, this.video_onStalled), !1);
                this.__video.addEventListener("durationchanged", m(this, this.video_onDurationChanged), !1);
                this.__video.addEventListener("canplay", m(this, this.video_onCanPlay), !1);
                this.__video.addEventListener("canplaythrough", m(this, this.video_onCanPlayThrough), !1);
                this.__video.addEventListener("loadedmetadata", m(this, this.video_onLoadMetaData), !1)
            };
            h["openfl.net.NetStream"] = Tk;
            Tk.__name__ = "openfl.net.NetStream";
            Tk.__super__ = qa;
            Tk.prototype = v(qa.prototype, {
                __dispatchStatus: function(a) {
                    a = new Aj("netStatus",!1,!1,{
                        code: a
                    });
                    this.__connection.dispatchEvent(a);
                    this.dispatchEvent(a)
                },
                __playStatus: function(a) {
                    if (null != this.__video && null != this.client)
                        try {
                            var b = this.client.onPlayStatus;
                            b({
                                code: a,
                                duration: this.__video.duration,
                                position: this.__video.currentTime,
                                speed: this.__video.playbackRate,
                                start: this.__video.startTime
                            })
                        } catch (c) {
                            Ua.lastError = c
                        }
                },
                video_onCanPlay: function(a) {
                    this.__playStatus("NetStream.Play.canplay")
                },
                video_onCanPlayThrough: function(a) {
                    this.__playStatus("NetStream.Play.canplaythrough")
                },
                video_onDurationChanged: function(a) {
                    this.__playStatus("NetStream.Play.durationchanged")
                },
                video_onEnd: function(a) {
                    this.__dispatchStatus("NetStream.Play.Stop");
                    this.__dispatchStatus("NetStream.Play.Complete");
                    this.__playStatus("NetStream.Play.Complete")
                },
                video_onError: function(a) {
                    this.__dispatchStatus("NetStream.Play.Stop");
                    this.__playStatus("NetStream.Play.error")
                },
                video_onLoadMetaData: function(a) {
                    if (null != this.__video && null != this.client)
                        try {
                            var b = this.client.onMetaData;
                            b({
                                width: this.__video.videoWidth,
                                height: this.__video.videoHeight,
                                duration: this.__video.duration
                            })
                        } catch (c) {
                            Ua.lastError = c
                        }
                },
                video_onLoadStart: function(a) {
                    this.__playStatus("NetStream.Play.loadstart")
                },
                video_onPause: function(a) {
                    this.__playStatus("NetStream.Play.pause")
                },
                video_onPlaying: function(a) {
                    this.__dispatchStatus("NetStream.Play.Start");
                    this.__playStatus("NetStream.Play.playing")
                },
                video_onSeeking: function(a) {
                    this.__playStatus("NetStream.Play.seeking");
                    this.__dispatchStatus("NetStream.Seek.Complete")
                },
                video_onStalled: function(a) {
                    this.__playStatus("NetStream.Play.stalled")
                },
                video_onTimeUpdate: function(a) {
                    null != this.__video && (this.time = this.__video.currentTime,
                    this.__playStatus("NetStream.Play.timeupdate"))
                },
                video_onWaiting: function(a) {
                    this.__playStatus("NetStream.Play.waiting")
                },
                __class__: Tk
            });
            var dd = function() {
                qa.call(this);
                this.client = this;
                this.objectEncoding = dd.defaultObjectEncoding
            };
            h["openfl.net.SharedObject"] = dd;
            dd.__name__ = "openfl.net.SharedObject";
            dd.getLocal = function(a, b, c) {
                c = " ~%&\\;:\"',<>?#".split("");
                var d = !0;
                if (null == a || "" == a)
                    d = !1;
                else
                    for (var f = 0; f < c.length; ) {
                        var g = c[f];
                        ++f;
                        if (-1 < a.indexOf(g)) {
                            d = !1;
                            break
                        }
                    }
                if (!d)
                    throw new dc("Error #2134: Cannot create SharedObject.");
                null == dd.__sharedObjects && (dd.__sharedObjects = new Ia,
                null != F.current && F.current.onExit.add(dd.application_onExit));
                c = b + "/" + a;
                if (!Object.prototype.hasOwnProperty.call(dd.__sharedObjects.h, c)) {
                    d = null;
                    try {
                        var k = Ef.getLocalStorage();
                        null == b && (null != k && (d = k.getItem(window.location.href + ":" + a),
                        k.removeItem(window.location.href + ":" + a)),
                        b = window.location.pathname);
                        null != k && null == d && (d = k.getItem(b + ":" + a))
                    } catch (p) {
                        Ua.lastError = p
                    }
                    k = new dd;
                    k.data = {};
                    k.__localPath = b;
                    k.__name = a;
                    if (null != d && "" != d)
                        try {
                            var l = new od(d);
                            l.setResolver({
                                resolveEnum: z.resolveEnum,
                                resolveClass: dd.__resolveClass
                            });
                            k.data = l.unserialize()
                        } catch (p) {
                            Ua.lastError = p
                        }
                    dd.__sharedObjects.h[c] = k
                }
                return dd.__sharedObjects.h[c]
            }
            ;
            dd.__resolveClass = function(a) {
                return null != a ? (P.startsWith(a, "neash.") && (a = P.replace(a, "neash.", "openfl.")),
                P.startsWith(a, "native.") && (a = P.replace(a, "native.", "openfl.")),
                P.startsWith(a, "flash.") && (a = P.replace(a, "flash.", "openfl.")),
                P.startsWith(a, "openfl._v2.") && (a = P.replace(a, "openfl._v2.", "openfl.")),
                P.startsWith(a, "openfl._legacy.") && (a = P.replace(a, "openfl._legacy.", "openfl.")),
                h[a]) : null
            }
            ;
            dd.application_onExit = function(a) {
                a = dd.__sharedObjects.h;
                for (var b = Object.keys(a), c = b.length, d = 0; d < c; )
                    a[b[d++]].flush()
            }
            ;
            dd.__super__ = qa;
            dd.prototype = v(qa.prototype, {
                flush: function(a) {
                    if (0 == Aa.fields(this.data).length)
                        return 0;
                    a = wd.run(this.data);
                    try {
                        var b = Ef.getLocalStorage();
                        null != b && (b.removeItem(this.__localPath + ":" + this.__name),
                        b.setItem(this.__localPath + ":" + this.__name, a))
                    } catch (c) {
                        return Ua.lastError = c,
                        1
                    }
                    return 0
                },
                __class__: dd
            });
            var Uk = function(a) {
                qa.call(this);
                this.bytesTotal = this.bytesLoaded = 0;
                this.dataFormat = 1;
                null != a && this.load(a)
            };
            h["openfl.net.URLLoader"] = Uk;
            Uk.__name__ = "openfl.net.URLLoader";
            Uk.__super__ = qa;
            Uk.prototype = v(qa.prototype, {
                load: function(a) {
                    var b = this
                      , c = new ya("open");
                    this.dispatchEvent(c);
                    0 == this.dataFormat ? (c = new Ui,
                    this.__prepareRequest(c, a),
                    c.load().onProgress(m(this, this.httpRequest_onProgress)).onError(m(this, this.httpRequest_onError)).onComplete(function(a) {
                        b.__dispatchResponseStatus();
                        b.__dispatchStatus();
                        b.data = a;
                        a = new ya("complete");
                        b.dispatchEvent(a)
                    })) : (c = new Eg,
                    this.__prepareRequest(c, a),
                    c.load().onProgress(m(this, this.httpRequest_onProgress)).onError(m(this, this.httpRequest_onError)).onComplete(function(a) {
                        b.__dispatchResponseStatus();
                        b.__dispatchStatus();
                        b.data = 2 == b.dataFormat ? Al._new(a) : a;
                        a = new ya("complete");
                        b.dispatchEvent(a)
                    }))
                },
                __dispatchResponseStatus: function() {
                    var a = new Fh("httpResponseStatus",!1,!1,this.__httpRequest.responseStatus);
                    a.responseURL = this.__httpRequest.uri;
                    var b = [];
                    if (this.__httpRequest.enableResponseHeaders && null != this.__httpRequest.responseHeaders)
                        for (var c = 0, d = this.__httpRequest.responseHeaders; c < d.length; ) {
                            var f = d[c];
                            ++c;
                            b.push(new Vk(f.name,f.value))
                        }
                    a.responseHeaders = b;
                    this.dispatchEvent(a)
                },
                __dispatchStatus: function() {
                    var a = new Fh("httpStatus",!1,!1,this.__httpRequest.responseStatus);
                    this.dispatchEvent(a)
                },
                __prepareRequest: function(a, b) {
                    this.__httpRequest = a;
                    this.__httpRequest.uri = b.url;
                    this.__httpRequest.method = b.method;
                    if (null != b.data)
                        if (z.typeof(b.data) == I.TObject) {
                            var c = Aa.fields(b.data);
                            for (a = 0; a < c.length; ) {
                                var d = c[a];
                                ++a;
                                this.__httpRequest.formData.h[d] = Aa.field(b.data, d)
                            }
                        } else
                            this.__httpRequest.data = b.data instanceof xb ? b.data : xb.ofString(G.string(b.data));
                    this.__httpRequest.contentType = b.contentType;
                    if (null != b.requestHeaders)
                        for (a = 0,
                        c = b.requestHeaders; a < c.length; )
                            d = c[a],
                            ++a,
                            this.__httpRequest.headers.push(new Mi(d.name,d.value));
                    this.__httpRequest.followRedirects = b.followRedirects;
                    this.__httpRequest.timeout = b.idleTimeout | 0;
                    this.__httpRequest.manageCookies = b.manageCookies;
                    this.__httpRequest.withCredentials = b.withCredentials;
                    this.__httpRequest.userAgent = b.userAgent;
                    this.__httpRequest.enableResponseHeaders = !0
                },
                httpRequest_onError: function(a) {
                    this.__dispatchResponseStatus();
                    this.__dispatchStatus();
                    this.__httpRequest instanceof Gf ? this.data = this.__httpRequest.responseData : this.__httpRequest instanceof Eg && (this.data = this.__httpRequest.responseData);
                    var b = 403 == a ? new Cj("securityError") : new Pg("ioError");
                    b.text = G.string(a);
                    this.dispatchEvent(b)
                },
                httpRequest_onProgress: function(a, b) {
                    var c = new eg("progress");
                    c.bytesLoaded = a;
                    c.bytesTotal = b;
                    this.dispatchEvent(c)
                },
                __class__: Uk
            });
            var Wf = function(a) {
                this.withCredentials = !1;
                null != a && (this.url = a);
                this.contentType = null;
                this.followRedirects = Mf.followRedirects;
                this.idleTimeout = 0 < Mf.idleTimeout ? Mf.idleTimeout : 3E4;
                this.manageCookies = Mf.manageCookies;
                this.method = "GET";
                this.requestHeaders = [];
                this.userAgent = Mf.userAgent
            };
            h["openfl.net.URLRequest"] = Wf;
            Wf.__name__ = "openfl.net.URLRequest";
            Wf.prototype = {
                __class__: Wf
            };
            var Mf = function() {};
            h["openfl.net.URLRequestDefaults"] = Mf;
            Mf.__name__ = "openfl.net.URLRequestDefaults";
            var Vk = function(a, b) {
                null == b && (b = "");
                null == a && (a = "");
                this.name = a;
                this.value = b
            };
            h["openfl.net.URLRequestHeader"] = Vk;
            Vk.__name__ = "openfl.net.URLRequestHeader";
            Vk.prototype = {
                __class__: Vk
            };
            var Al = {
                _new: function(a) {
                    var b = {};
                    null != a && Al.decode(b, a);
                    return b
                },
                decode: function(a, b) {
                    for (var c = Aa.fields(a), d = 0; d < c.length; ) {
                        var f = c[d];
                        ++d;
                        Aa.deleteField(a, f)
                    }
                    c = b.split(";").join("&").split("&");
                    for (d = 0; d < c.length; )
                        if (f = c[d],
                        ++d,
                        b = f.indexOf("="),
                        0 < b) {
                            var g = Q.substr(f, 0, b);
                            g = decodeURIComponent(g.split("+").join(" "));
                            f = Q.substr(f, b + 1, null);
                            a[g] = decodeURIComponent(f.split("+").join(" "))
                        } else
                            0 != b && (a[decodeURIComponent(f.split("+").join(" "))] = "")
                }
            }
              , Hg = function(a) {
                this.parentDomain = null != a ? a : Hg.currentDomain
            };
            h["openfl.system.ApplicationDomain"] = Hg;
            Hg.__name__ = "openfl.system.ApplicationDomain";
            Hg.prototype = {
                __class__: Hg
            };
            var Mh = function() {};
            h["openfl.system.Capabilities"] = Mh;
            Mh.__name__ = "openfl.system.Capabilities";
            Mh.__properties__ = {
                get_screenDPI: "get_screenDPI"
            };
            Mh.get_screenDPI = function() {
                var a = null != Ec.application ? Ec.application.__window : null
                  , b = 72;
                null != a && (b *= a.__scale);
                return b
            }
            ;
            var Wk = function() {
                qa.call(this);
                this.clear()
            };
            h["openfl.text.StyleSheet"] = Wk;
            Wk.__name__ = "openfl.text.StyleSheet";
            Wk.__super__ = qa;
            Wk.prototype = v(qa.prototype, {
                clear: function() {
                    this.__styleNamesDirty = !1;
                    this.__styleNames = null;
                    this.__styles = new Ia
                },
                __applyStyle: function(a, b) {
                    a = a.toLowerCase();
                    Object.prototype.hasOwnProperty.call(this.__styles.h, a) && this.__applyStyleObject(this.__styles.h[a], b)
                },
                __applyStyleObject: function(a, b) {
                    if (null != a) {
                        var c = new Ta("[0-9A-Fa-f]+","")
                          , d = new Ta("[0-9]+","");
                        var f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "color") ? (f = ee.__get(a, "color"),
                        f = c.match(null == f ? null : G.string(f))) : f = !1;
                        f && (b.color = G.parseInt("0x" + c.matched(0)));
                        f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "fontFamily") && (f = ee.__get(a, "fontFamily"),
                        b.font = this.__parseFont(null == f ? null : G.string(f)));
                        f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "fontSize") ? (f = ee.__get(a, "fontSize"),
                        f = d.match(null == f ? null : G.string(f))) : f = !1;
                        f && (b.size = G.parseInt(d.matched(0)));
                        f = a;
                        if (null != f && Object.prototype.hasOwnProperty.call(f, "fontStyle"))
                            switch (ee.__get(a, "fontStyle")) {
                            case "italic":
                                b.italic = !0;
                                break;
                            case "normal":
                                b.italic = !1
                            }
                        f = a;
                        if (null != f && Object.prototype.hasOwnProperty.call(f, "fontWeight"))
                            switch (ee.__get(a, "fontWeight")) {
                            case "bold":
                                b.bold = !0;
                                break;
                            case "normal":
                                b.bold = !1
                            }
                        f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "leading") ? (f = ee.__get(a, "leading"),
                        f = d.match(null == f ? null : G.string(f))) : f = !1;
                        f && (b.leading = G.parseInt(d.matched(0)));
                        f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "letterSpacing") ? (f = ee.__get(a, "letterSpacing"),
                        f = d.match(null == f ? null : G.string(f))) : f = !1;
                        f && (b.letterSpacing = parseFloat(d.matched(0)));
                        f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "marginLeft") ? (f = ee.__get(a, "marginLeft"),
                        f = d.match(null == f ? null : G.string(f))) : f = !1;
                        f && (b.leftMargin = G.parseInt(d.matched(0)));
                        f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "marginRight") ? (f = ee.__get(a, "marginRight"),
                        f = d.match(null == f ? null : G.string(f))) : f = !1;
                        f && (b.rightMargin = G.parseInt(d.matched(0)));
                        f = a;
                        if (null != f && Object.prototype.hasOwnProperty.call(f, "textAlign"))
                            switch (ee.__get(a, "textAlign")) {
                            case "center":
                                b.align = 0;
                                break;
                            case "justify":
                                b.align = 2;
                                break;
                            case "left":
                                b.align = 3;
                                break;
                            case "right":
                                b.align = 4
                            }
                        f = a;
                        if (null != f && Object.prototype.hasOwnProperty.call(f, "textDecoration"))
                            switch (ee.__get(a, "textDecoration")) {
                            case "none":
                                b.underline = !1;
                                break;
                            case "underline":
                                b.underline = !0
                            }
                        f = a;
                        null != f && Object.prototype.hasOwnProperty.call(f, "textIndent") ? (f = ee.__get(a, "textIndent"),
                        f = d.match(null == f ? null : G.string(f))) : f = !1;
                        f && (b.blockIndent = G.parseInt(d.matched(0)))
                    }
                },
                __parseFont: function(a) {
                    if (null == a)
                        return null;
                    -1 < a.indexOf(",") && (a = Q.substr(a, 0, a.indexOf(",")));
                    switch (a) {
                    case "mono":
                        return "_typewriter";
                    case "sans-serif":
                        return "_sans";
                    case "serif":
                        return "_serif";
                    default:
                        return a
                    }
                },
                __class__: Wk
            });
            var Oc = function() {
                this.__renderedOnCanvasWhileOnDOM = this.__forceCachedBitmapUpdate = !1;
                this.__mouseScrollVCounter = 0;
                this.condenseWhite = !1;
                za.call(this);
                this.__wordSelection = !1;
                this.__drawableType = 7;
                this.__selectionIndex = this.__caretIndex = -1;
                this.__displayAsPassword = !1;
                this.__graphics = new Ad(this);
                this.__textEngine = new Eb(this);
                this.__layoutDirty = !0;
                this.__offsetY = this.__offsetX = 0;
                this.__mouseWheelEnabled = !0;
                this.__text = "";
                null == Oc.__defaultTextFormat && (Oc.__defaultTextFormat = new Ae("Times New Roman",12,0,!1,!1,!1,"","",3,0,0,0,0),
                Oc.__defaultTextFormat.blockIndent = 0,
                Oc.__defaultTextFormat.bullet = !1,
                Oc.__defaultTextFormat.letterSpacing = 0,
                Oc.__defaultTextFormat.kerning = !1);
                this.__textFormat = Oc.__defaultTextFormat.clone();
                this.__textEngine.textFormatRanges.push(new sd(this.__textFormat,0,0));
                this.addEventListener("mouseDown", m(this, this.this_onMouseDown));
                this.addEventListener("focusIn", m(this, this.this_onFocusIn));
                this.addEventListener("focusOut", m(this, this.this_onFocusOut));
                this.addEventListener("keyDown", m(this, this.this_onKeyDown));
                this.addEventListener("mouseWheel", m(this, this.this_onMouseWheel))
            };
            h["openfl.text.TextField"] = Oc;
            Oc.__name__ = "openfl.text.TextField";
            Oc.__super__ = za;
            Oc.prototype = v(za.prototype, {
                getCharBoundaries: function(a) {
                    if (0 > a || a > this.__text.length - 1)
                        return null;
                    var b = new oa;
                    return this.__getCharBoundaries(a, b) ? b : null
                },
                getLineIndexOfChar: function(a) {
                    if (0 > a || a > this.__text.length)
                        return -1;
                    this.__updateLayout();
                    for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext(); ) {
                        var c = b.next();
                        if (c.startIndex <= a && c.endIndex >= a)
                            return c.lineIndex
                    }
                    return -1
                },
                getLineLength: function(a) {
                    this.__updateLayout();
                    if (0 > a || a > this.__textEngine.numLines - 1)
                        return 0;
                    for (var b = -1, c = -1, d = this.__textEngine.layoutGroups.iterator(); d.hasNext(); ) {
                        var f = d.next();
                        if (f.lineIndex == a)
                            -1 == b && (b = f.startIndex);
                        else if (f.lineIndex == a + 1) {
                            c = f.startIndex;
                            break
                        }
                    }
                    -1 == c && (c = this.__text.length);
                    return c - b
                },
                getLineOffset: function(a) {
                    this.__updateLayout();
                    if (0 > a || a > this.__textEngine.numLines - 1)
                        return -1;
                    for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext(); ) {
                        var c = b.next();
                        if (c.lineIndex == a)
                            return c.startIndex
                    }
                    return 0
                },
                getLineText: function(a) {
                    this.__updateLayout();
                    if (0 > a || a > this.__textEngine.numLines - 1)
                        return null;
                    for (var b = -1, c = -1, d = this.__textEngine.layoutGroups.iterator(); d.hasNext(); ) {
                        var f = d.next();
                        if (f.lineIndex == a)
                            -1 == b && (b = f.startIndex);
                        else if (f.lineIndex == a + 1) {
                            c = f.startIndex;
                            break
                        }
                    }
                    -1 == c && (c = this.__text.length);
                    return this.__textEngine.text.substring(b, c)
                },
                replaceSelectedText: function(a) {
                    this.__replaceSelectedText(a, !1)
                },
                replaceText: function(a, b, c) {
                    this.__replaceText(a, b, c, !1)
                },
                setSelection: function(a, b) {
                    this.__selectionIndex = a;
                    this.__caretIndex = b;
                    this.__updateScrollV();
                    this.__updateScrollH();
                    null != this.stage && this.stage.get_focus() == this && (this.__stopCursorTimer(),
                    this.__startCursorTimer())
                },
                setTextFormat: function(a, b, c) {
                    null == c && (c = -1);
                    null == b && (b = -1);
                    var d = this.get_text().length;
                    -1 == b ? (-1 == c && (c = d),
                    b = 0) : -1 == c && (c = b + 1);
                    if (b != c) {
                        if (0 > b || 0 >= c || c < b || b >= d || c > d)
                            throw new Yg;
                        if (0 == b && c == d) {
                            this.__textEngine.textFormatRanges.set_length(1);
                            var f = this.__textEngine.textFormatRanges.get(0);
                            f.start = 0;
                            f.end = d;
                            f.format.__merge(a)
                        } else {
                            d = 0;
                            for (var g; d < this.__textEngine.textFormatRanges.get_length(); )
                                if (f = this.__textEngine.textFormatRanges.get(d),
                                f.end <= b)
                                    ++d;
                                else if (f.start >= c)
                                    break;
                                else if (f.start <= b && f.end >= c)
                                    if (f.start == b && f.end == c) {
                                        f.format = f.format.clone();
                                        f.format.__merge(a);
                                        break
                                    } else if (f.start == b)
                                        g = new sd(f.format.clone(),b,c),
                                        g.format.__merge(a),
                                        this.__textEngine.textFormatRanges.insertAt(d, g),
                                        f.start = c,
                                        d += 2;
                                    else {
                                        f.end == c ? (g = new sd(f.format.clone(),b,c),
                                        g.format.__merge(a),
                                        this.__textEngine.textFormatRanges.insertAt(d + 1, g)) : (g = new sd(f.format.clone(),b,c),
                                        g.format.__merge(a),
                                        this.__textEngine.textFormatRanges.insertAt(d + 1, g),
                                        g = new sd(f.format.clone(),c,f.end),
                                        this.__textEngine.textFormatRanges.insertAt(d + 2, g));
                                        f.end = b;
                                        break
                                    }
                                else if (f.start >= b && f.end <= c)
                                    f.start == b ? (f.format = f.format.clone(),
                                    f.format.__merge(a),
                                    f.end = c) : this.__textEngine.textFormatRanges.removeAt(d);
                                else if (f.start > b && f.end > b) {
                                    f.start = c;
                                    break
                                } else
                                    f.start < b && f.end <= c ? (g = new sd(f.format.clone(),b,c),
                                    g.format.__merge(a),
                                    this.__textEngine.textFormatRanges.insertAt(d + 1, g),
                                    f.end = b,
                                    d += 2) : (++d,
                                    Ja.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                                        fileName: "openfl/text/TextField.hx",
                                        lineNumber: 1610,
                                        className: "openfl.text.TextField",
                                        methodName: "setTextFormat"
                                    }))
                        }
                        this.__layoutDirty = this.__dirty = !0;
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty())
                    }
                },
                __setStageReference: function(a) {
                    this.__stopTextInput();
                    za.prototype.__setStageReference.call(this, a)
                },
                __allowMouseFocus: function() {
                    return this.mouseEnabled
                },
                __caretBeginningOfLine: function() {
                    this.__caretIndex = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex))
                },
                __caretBeginningOfNextLine: function() {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) : this.__text.length
                },
                __caretBeginningOfPreviousLine: function() {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    if (0 < a) {
                        var b = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
                        this.__caretIndex = this.__caretIndex == b ? this.getLineOffset(a - 1) : b
                    }
                },
                __caretEndOfLine: function() {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) - 1 : this.__text.length
                },
                __caretNextCharacter: function() {
                    this.__caretIndex < this.__text.length && this.__caretIndex++
                },
                __caretNextLine: function() {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    a < this.__textEngine.numLines - 1 && (this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a + 1))
                },
                __caretPreviousCharacter: function() {
                    0 < this.__caretIndex && this.__caretIndex--
                },
                __caretPreviousLine: function() {
                    var a = this.getLineIndexOfChar(this.__caretIndex);
                    0 < a && (this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a - 1))
                },
                __disableInput: function() {
                    this.__inputEnabled && null != this.stage && (this.stage.window.__backend.setTextInputEnabled(!1),
                    this.stage.window.onTextInput.remove(m(this, this.window_onTextInput)),
                    this.stage.window.onKeyDown.remove(m(this, this.window_onKeyDown)),
                    this.__inputEnabled = !1,
                    this.__stopCursorTimer())
                },
                __dispatch: function(a) {
                    if (2 == a.eventPhase && "mouseUp" == a.type) {
                        var b = this.__getGroup(this.get_mouseX(), this.get_mouseY(), !0);
                        null != b && (b = b.format.url,
                        null != b && "" != b && (P.startsWith(b, "event:") ? this.dispatchEvent(new Le("link",!0,!1,Q.substr(b, 6, null))) : Sa.getURL(new Wf(b))))
                    }
                    return za.prototype.__dispatch.call(this, a)
                },
                __enableInput: function() {
                    if (null != this.stage) {
                        var a = this.getBounds(this.stage);
                        a = new Dd(a.x,a.y,a.width,a.height);
                        this.stage.window.setTextInputRect(a);
                        this.stage.window.__backend.setTextInputEnabled(!0);
                        this.__inputEnabled || (this.stage.window.__backend.setTextInputEnabled(!0),
                        this.stage.window.onTextInput.has(m(this, this.window_onTextInput)) || (this.stage.window.onTextInput.add(m(this, this.window_onTextInput)),
                        this.stage.window.onKeyDown.add(m(this, this.window_onKeyDown))),
                        this.__inputEnabled = !0,
                        this.__stopCursorTimer(),
                        this.__startCursorTimer())
                    }
                },
                __getBounds: function(a, b) {
                    this.__updateLayout();
                    var c = oa.__pool.get();
                    c.copyFrom(this.__textEngine.bounds);
                    c.offset(this.__offsetX, this.__offsetY);
                    c.__transform(c, b);
                    a.__expand(c.x, c.y, c.width, c.height);
                    oa.__pool.release(c)
                },
                __getCharBoundaries: function(a, b) {
                    if (0 > a || a > this.__text.length - 1)
                        return !1;
                    this.__updateLayout();
                    for (var c = this.__textEngine.layoutGroups.iterator(); c.hasNext(); ) {
                        var d = c.next();
                        if (a >= d.startIndex && a < d.endIndex)
                            try {
                                for (var f = d.offsetX, g = 0, k = a - d.startIndex; g < k; ) {
                                    var l = g++;
                                    f += d.positions[l]
                                }
                                b.setTo(f, d.offsetY, d.positions[a - d.startIndex], d.ascent + d.descent);
                                return !0
                            } catch (p) {
                                Ua.lastError = p
                            }
                    }
                    return !1
                },
                __getCharIndexOnDifferentLine: function(a, b) {
                    if (0 > a || a > this.__text.length || 0 > b || b > this.__textEngine.numLines - 1)
                        return -1;
                    for (var c = null, d = null, f = this.__textEngine.layoutGroups.iterator(); f.hasNext(); ) {
                        var g = f.next();
                        if (a >= g.startIndex && a <= g.endIndex) {
                            c = g.offsetX;
                            for (var k = 0, l = a - g.startIndex; k < l; ) {
                                var h = k++;
                                c += g.positions[h]
                            }
                            if (null != d)
                                return this.__getPosition(c, d)
                        }
                        if (g.lineIndex == b) {
                            d = g.offsetY + g.height / 2;
                            g = 0;
                            for (k = this.get_scrollV() - 1; g < k; )
                                l = g++,
                                d -= this.__textEngine.lineHeights.get(l);
                            if (null != c)
                                return this.__getPosition(c, d)
                        }
                    }
                    return -1
                },
                __getCursor: function() {
                    var a = this.__getGroup(this.get_mouseX(), this.get_mouseY(), !0);
                    return null != a && "" != a.format.url ? "button" : this.__textEngine.selectable ? "ibeam" : null
                },
                __getGroup: function(a, b, c) {
                    null == c && (c = !1);
                    this.__updateLayout();
                    a += this.get_scrollH();
                    for (var d = 0, f = this.get_scrollV() - 1; d < f; ) {
                        var g = d++;
                        b += this.__textEngine.lineHeights.get(g)
                    }
                    !c && b > this.__textEngine.textHeight && (b = this.__textEngine.textHeight);
                    var k = !0;
                    d = 0;
                    for (f = this.__textEngine.layoutGroups.get_length(); d < f; ) {
                        g = d++;
                        var l = this.__textEngine.layoutGroups.get(g);
                        g = g < this.__textEngine.layoutGroups.get_length() - 1 ? this.__textEngine.layoutGroups.get(g + 1) : null;
                        k && (b < l.offsetY && (b = l.offsetY),
                        a < l.offsetX && (a = l.offsetX),
                        k = !1);
                        if (b >= l.offsetY && b <= l.offsetY + l.height || !c && null == g)
                            if (a >= l.offsetX && a <= l.offsetX + l.width || !c && (null == g || g.lineIndex != l.lineIndex))
                                return l
                    }
                    return null
                },
                __getPosition: function(a, b) {
                    b = this.__getGroup(a, b);
                    if (null == b)
                        return this.__text.length;
                    for (var c = 0, d = 0, f = b.positions.length; d < f; ) {
                        var g = d++;
                        c += b.positions[g];
                        if (a <= b.offsetX + c) {
                            if (a <= b.offsetX + (c - b.positions[g]) + b.positions[g] / 2)
                                return b.startIndex + g;
                            if (b.startIndex + g < b.endIndex)
                                return b.startIndex + g + 1;
                            break
                        }
                    }
                    return b.endIndex
                },
                __getPositionByIdentifier: function(a, b, c) {
                    a = this.__getPosition(a, b);
                    c = c ? "\n" : " .,;:!?()[]{}<>/\\|-=+*&^%$#@~`'\"";
                    b = this.__text.charAt(a);
                    if (this.__specialSelectionInitialIndex <= a)
                        for (; -1 == c.indexOf(b) && a < this.__text.length; )
                            ++a,
                            b = this.__text.charAt(a);
                    else {
                        for (; -1 == c.indexOf(b) && 0 < a; )
                            --a,
                            b = this.__text.charAt(a);
                        if (0 == a)
                            return a;
                        ++a
                    }
                    return a
                },
                __getOppositeIdentifierBound: function(a, b) {
                    b = b ? "\n" : " .,;:!?()[]{}<>/\\|-=+*&^%$#@~`'\"";
                    var c = this.__text.charAt(a);
                    if (a <= this.__caretIndex) {
                        for (; -1 == b.indexOf(c) && 0 < a; )
                            --a,
                            c = this.__text.charAt(a);
                        if (0 == a)
                            return a;
                        ++a
                    } else
                        for (; -1 == b.indexOf(c) && a < this.__text.length; )
                            ++a,
                            c = this.__text.charAt(a);
                    return a
                },
                __hitTest: function(a, b, c, d, f, g) {
                    if (!g.get_visible() || this.__isMask || f && !this.mouseEnabled || null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
                        return !1;
                    this.__getRenderTransform();
                    this.__updateLayout();
                    c = this.__renderTransform;
                    f = c.a * c.d - c.b * c.c;
                    var k = 0 == f ? -c.tx : 1 / f * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    f = c.a * c.d - c.b * c.c;
                    return this.__textEngine.bounds.contains(k, 0 == f ? -c.ty : 1 / f * (c.a * (b - c.ty) + c.b * (c.tx - a))) ? (null != d && d.push(g),
                    !0) : !1
                },
                __hitTestMask: function(a, b) {
                    this.__getRenderTransform();
                    this.__updateLayout();
                    var c = this.__renderTransform
                      , d = c.a * c.d - c.b * c.c
                      , f = 0 == d ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
                    c = this.__renderTransform;
                    d = c.a * c.d - c.b * c.c;
                    return this.__textEngine.bounds.contains(f, 0 == d ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a))) ? !0 : !1
                },
                __replaceSelectedText: function(a, b) {
                    null == b && (b = !0);
                    null == a && (a = "");
                    if ("" != a || this.__selectionIndex != this.__caretIndex) {
                        var c = this.__caretIndex < this.__selectionIndex ? this.__caretIndex : this.__selectionIndex
                          , d = this.__caretIndex > this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
                        if (!(c == d && 0 < this.__textEngine.maxChars && this.__text.length == this.__textEngine.maxChars)) {
                            c > this.__text.length && (c = this.__text.length);
                            d > this.__text.length && (d = this.__text.length);
                            if (d < c) {
                                var f = d;
                                d = c;
                                c = f
                            }
                            0 > c && (c = 0);
                            this.__replaceText(c, d, a, b)
                        }
                    }
                },
                __replaceText: function(a, b, c, d) {
                    if (!(b < a || 0 > a || b > this.__text.length || null == c)) {
                        d && (c = this.__textEngine.restrictText(c),
                        0 < this.__textEngine.maxChars && (d = this.__textEngine.maxChars - this.__text.length + (b - a),
                        0 >= d ? c = "" : d < c.length && (c = Q.substr(c, 0, d))));
                        this.__updateText(this.__text.substring(0, a) + c + this.__text.substring(b));
                        d = c.length - (b - a);
                        for (var f = 0, g; f < this.__textEngine.textFormatRanges.get_length(); ) {
                            g = this.__textEngine.textFormatRanges.get(f);
                            if (a == b)
                                g.start == g.end ? 0 != g.start ? Ja.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                                    fileName: "openfl/text/TextField.hx",
                                    lineNumber: 2184,
                                    className: "openfl.text.TextField",
                                    methodName: "__replaceText"
                                }) : g.end += d : g.end >= a && (g.start >= a ? (g.start += d,
                                g.end += d) : g.start < a && g.end >= b && (g.end += d));
                            else if (g.end > a)
                                if (g.start > b)
                                    g.start += d,
                                    g.end += d;
                                else if (g.start <= a && g.end > b)
                                    g.end += d;
                                else if (g.start >= a && g.end <= b) {
                                    g = this.__textEngine.textFormatRanges;
                                    g.__tempIndex = f--;
                                    for (var k = 0, l = []; k < l.length; ) {
                                        var h = l[k++];
                                        g.insertAt(g.__tempIndex, h);
                                        g.__tempIndex++
                                    }
                                    g.splice(g.__tempIndex, 1)
                                } else
                                    g.end > b && g.start > a && g.start <= b ? (g.start = a,
                                    g.end += d) : g.start < a && g.end > a && g.end <= b && (g.end = a);
                            ++f
                        }
                        0 == this.__textEngine.textFormatRanges.get_length() ? this.__textEngine.textFormatRanges.push(new sd(this.get_defaultTextFormat().clone(),0,c.length)) : a == b && 0 < this.__textEngine.textFormatRanges.get(0).start ? this.__textEngine.textFormatRanges.unshift(new sd(this.get_defaultTextFormat().clone(),0,this.__textEngine.textFormatRanges.get(0).start)) : a != b && this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end < this.__text.length && this.__textEngine.textFormatRanges.push(new sd(this.get_defaultTextFormat().clone(),this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end,this.__text.length));
                        this.__selectionIndex = this.__caretIndex = a + c.length;
                        this.__layoutDirty = this.__dirty = !0;
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty())
                    }
                },
                __startCursorTimer: function() {
                    1 == this.get_type() ? (this.__inputEnabled && (this.__cursorTimer = $f.delay(m(this, this.__startCursorTimer), 600),
                    this.__showCursor = !this.__showCursor),
                    this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty())) : this.get_selectable() && (this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()))
                },
                __startTextInput: function() {
                    0 > this.__caretIndex && (this.__selectionIndex = this.__caretIndex = this.__text.length);
                    (ca.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) && this.__enableInput()
                },
                __stopCursorTimer: function() {
                    null != this.__cursorTimer && (this.__cursorTimer.stop(),
                    this.__cursorTimer = null);
                    this.__showCursor && (this.__showCursor = !1,
                    this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()))
                },
                __stopTextInput: function() {
                    (ca.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) && this.__disableInput()
                },
                __updateLayout: function() {
                    if (this.__layoutDirty) {
                        var a = this.__textEngine.width;
                        this.__textEngine.update();
                        if (2 != this.__textEngine.autoSize) {
                            if (this.__textEngine.width != a)
                                switch (this.__textEngine.autoSize) {
                                case 0:
                                    this.set_x(this.get_x() + (a - this.__textEngine.width) / 2);
                                    break;
                                case 3:
                                    this.set_x(this.get_x() + (a - this.__textEngine.width))
                                }
                            this.__textEngine.getBounds()
                        }
                        this.__layoutDirty = !1;
                        this.setSelection(this.__selectionIndex, this.__caretIndex)
                    }
                },
                __updateMouseDrag: function() {
                    if (null != this.stage) {
                        var a = this.getBounds(this);
                        this.get_mouseX() > a.width - 1 ? this.set_scrollH(this.get_scrollH() + (Math.max(Math.min(.1 * (this.get_mouseX() - a.width), 10), 1) | 0)) : 1 > this.get_mouseX() && this.set_scrollH(this.get_scrollH() - (Math.max(Math.min(-.1 * this.get_mouseX(), 10), 1) | 0));
                        this.__mouseScrollVCounter++;
                        this.__mouseScrollVCounter > this.stage.get_frameRate() / 10 && (this.get_mouseY() > a.height - 2 ? this.set_scrollV(Math.min(this.get_scrollV() + Math.max(Math.min(.03 * (this.get_mouseY() - a.height), 5), 1), this.get_maxScrollV()) | 0) : 2 > this.get_mouseY() && this.set_scrollV(this.get_scrollV() - (Math.max(Math.min(-.03 * this.get_mouseY(), 5), 1) | 0)),
                        this.__mouseScrollVCounter = 0);
                        this.stage_onMouseMove(null)
                    }
                },
                __updateScrollH: function() {
                    this.__updateLayout();
                    var a = this.getBounds(this);
                    if (this.get_textWidth() <= a.width - 4)
                        this.set_scrollH(0);
                    else {
                        var b = this.get_scrollH();
                        if (0 == this.__caretIndex || this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)) == this.__caretIndex)
                            b = 0;
                        else {
                            var c = oa.__pool.get()
                              , d = !1;
                            this.__caretIndex < this.__text.length && (d = this.__getCharBoundaries(this.__caretIndex, c));
                            d || (this.__getCharBoundaries(this.__caretIndex - 1, c),
                            c.x += c.width);
                            for (; c.x < b && 0 < b; )
                                b -= 24;
                            for (; c.x > b + a.width - 4; )
                                b += 24;
                            oa.__pool.release(c)
                        }
                        0 < b && 1 != this.get_type() && (c = this.getLineLength(this.getLineIndexOfChar(this.__caretIndex)),
                        this.get_scrollH() + a.width - 4 > c && this.set_scrollH(Math.ceil(c - a.width + 4)));
                        0 > b ? this.set_scrollH(0) : b > this.get_maxScrollH() ? this.set_scrollH(this.get_maxScrollH()) : this.set_scrollH(b)
                    }
                },
                __updateScrollV: function() {
                    this.__updateLayout();
                    if (this.get_textHeight() <= this.get_height() - 4)
                        this.set_scrollV(1);
                    else {
                        var a = this.getLineIndexOfChar(this.__caretIndex);
                        -1 == a && 0 < this.__caretIndex && (a = this.getLineIndexOfChar(this.__caretIndex - 1) + 1);
                        if (a + 1 < this.get_scrollV())
                            this.set_scrollV(a + 1);
                        else if (a + 1 > this.get_bottomScrollV()) {
                            var b = 0;
                            for (a >= this.__textEngine.lineHeights.get_length() && (a = this.__textEngine.lineHeights.get_length() - 1); 0 <= a; ) {
                                b += this.__textEngine.lineHeights.get(a);
                                if (b > this.get_height() - 4) {
                                    a += 0 > b - this.get_height() ? 1 : 2;
                                    break
                                }
                                --a
                            }
                            this.set_scrollV(a)
                        } else
                            this.set_scrollV(this.get_scrollV())
                    }
                },
                __updateText: function(a) {
                    ca.__supportDOM && this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = this.__text != a);
                    this.__textEngine.set_text(a);
                    this.__text = this.__textEngine.text;
                    null != this.stage && this.stage.get_focus() == this ? (this.__text.length < this.__selectionIndex && (this.__selectionIndex = this.__text.length),
                    this.__text.length < this.__caretIndex && (this.__caretIndex = this.__text.length)) : this.__isHTML ? this.__selectionIndex = this.__caretIndex = this.__text.length : this.__caretIndex = this.__selectionIndex = 0;
                    if (!this.__displayAsPassword || ca.__supportDOM && !this.__renderedOnCanvasWhileOnDOM)
                        this.__textEngine.set_text(this.__text);
                    else {
                        a = "";
                        for (var b = 0, c = this.get_text().length; b < c; )
                            b++,
                            a += "*";
                        this.__textEngine.set_text(a)
                    }
                },
                __updateTransforms: function(a) {
                    za.prototype.__updateTransforms.call(this, a);
                    a = this.__renderTransform;
                    var b = this.__offsetX
                      , c = this.__offsetY;
                    a.tx = b * a.a + c * a.c + a.tx;
                    a.ty = b * a.b + c * a.d + a.ty
                },
                set_autoSize: function(a) {
                    a != this.__textEngine.autoSize && (this.__layoutDirty = this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    return this.__textEngine.autoSize = a
                },
                set_background: function(a) {
                    a != this.__textEngine.background && (this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    return this.__textEngine.background = a
                },
                set_backgroundColor: function(a) {
                    a != this.__textEngine.backgroundColor && (this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    return this.__textEngine.backgroundColor = a
                },
                set_border: function(a) {
                    a != this.__textEngine.border && (this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    return this.__textEngine.border = a
                },
                set_borderColor: function(a) {
                    a != this.__textEngine.borderColor && (this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    return this.__textEngine.borderColor = a
                },
                get_bottomScrollV: function() {
                    this.__updateLayout();
                    return this.__textEngine.get_bottomScrollV()
                },
                get_caretIndex: function() {
                    return this.__caretIndex
                },
                get_defaultTextFormat: function() {
                    return this.__textFormat.clone()
                },
                set_defaultTextFormat: function(a) {
                    this.__textFormat.__merge(a);
                    this.__dirty = this.__layoutDirty = !0;
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty());
                    return a
                },
                get_displayAsPassword: function() {
                    return this.__displayAsPassword
                },
                get_height: function() {
                    this.__updateLayout();
                    return this.__textEngine.height * Math.abs(this.get_scaleY())
                },
                set_height: function(a) {
                    a != this.__textEngine.height && (this.__setTransformDirty(),
                    this.__layoutDirty = this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()),
                    this.__textEngine.height = a);
                    return this.__textEngine.height * Math.abs(this.get_scaleY())
                },
                get_htmlText: function() {
                    return this.__isHTML ? this.__htmlText : this.__text
                },
                set_htmlText: function(a) {
                    if (null == a)
                        throw a = new Rf("Error #2007: Parameter text must be non-null."),
                        a.errorID = 2007,
                        a;
                    this.__isHTML && this.__text == a || (this.__layoutDirty = this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    this.__isHTML = !0;
                    this.condenseWhite && (a = a.replace(/\s+/g, " "));
                    this.__htmlText = a;
                    a = Oa.parse(a, this.get_multiline(), this.__styleSheet, this.__textFormat, this.__textEngine.textFormatRanges);
                    this.__updateText(a);
                    return a
                },
                get_length: function() {
                    return null != this.__text ? this.__text.length : 0
                },
                get_maxScrollH: function() {
                    this.__updateLayout();
                    return this.__textEngine.maxScrollH
                },
                get_maxScrollV: function() {
                    this.__updateLayout();
                    return this.__textEngine.get_maxScrollV()
                },
                get_mouseWheelEnabled: function() {
                    return this.__mouseWheelEnabled
                },
                get_multiline: function() {
                    return this.__textEngine.multiline
                },
                set_multiline: function(a) {
                    return this.__textEngine.multiline = a
                },
                get_numLines: function() {
                    this.__updateLayout();
                    return this.__textEngine.numLines
                },
                set_restrict: function(a) {
                    this.__textEngine.restrict != a && (this.__textEngine.set_restrict(a),
                    this.__updateText(this.__text));
                    return a
                },
                get_scrollH: function() {
                    return this.__textEngine.scrollH
                },
                set_scrollH: function(a) {
                    this.__updateLayout();
                    a > this.__textEngine.maxScrollH && (a = this.__textEngine.maxScrollH);
                    0 > a && (a = 0);
                    a != this.__textEngine.scrollH && (this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()),
                    this.__textEngine.scrollH = a,
                    this.dispatchEvent(new ya("scroll")));
                    return this.__textEngine.scrollH
                },
                get_scrollV: function() {
                    return this.__textEngine.get_scrollV()
                },
                set_scrollV: function(a) {
                    this.__updateLayout();
                    a > this.__textEngine.get_maxScrollV() && (a = this.__textEngine.get_maxScrollV());
                    1 > a && (a = 1);
                    if (a != this.__textEngine.get_scrollV() || 0 == this.__textEngine.get_scrollV())
                        this.__dirty = !0,
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty()),
                        this.__textEngine.set_scrollV(a),
                        this.dispatchEvent(new ya("scroll"));
                    return this.__textEngine.get_scrollV()
                },
                get_selectable: function() {
                    return this.__textEngine.selectable
                },
                set_selectable: function(a) {
                    a != this.__textEngine.selectable && 1 == this.get_type() && (null != this.stage && this.stage.get_focus() == this ? this.__startTextInput() : a || this.__stopTextInput());
                    return this.__textEngine.selectable = a
                },
                get_tabEnabled: function() {
                    return null == this.__tabEnabled ? 1 == this.__textEngine.type : this.__tabEnabled
                },
                get_text: function() {
                    return this.__text
                },
                set_text: function(a) {
                    if (null == a)
                        throw a = new Rf("Error #2007: Parameter text must be non-null."),
                        a.errorID = 2007,
                        a;
                    if (null != this.__styleSheet)
                        return this.set_htmlText(a);
                    if (this.__isHTML || this.__text != a)
                        this.__layoutDirty = this.__dirty = !0,
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty());
                    else
                        return a;
                    if (1 < this.__textEngine.textFormatRanges.get_length()) {
                        var b = this.__textEngine.textFormatRanges
                          , c = this.__textEngine.textFormatRanges.get_length() - 1;
                        b.__tempIndex = 1;
                        for (var d = 0, f = []; d < f.length; ) {
                            var g = f[d++];
                            b.insertAt(b.__tempIndex, g);
                            b.__tempIndex++
                        }
                        b.splice(b.__tempIndex, c)
                    }
                    b = this.__textEngine.textFormatRanges.get(0);
                    b.format = this.__textFormat;
                    b.start = 0;
                    b.end = a.length;
                    this.__isHTML = !1;
                    this.__updateText(a);
                    return a
                },
                set_textColor: function(a) {
                    a != this.__textFormat.color && (this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    for (var b = this.__textEngine.textFormatRanges.iterator(); b.hasNext(); )
                        b.next().format.color = a;
                    return this.__textFormat.color = a
                },
                get_textWidth: function() {
                    this.__updateLayout();
                    return this.__textEngine.textWidth
                },
                get_textHeight: function() {
                    this.__updateLayout();
                    return this.__textEngine.textHeight
                },
                get_type: function() {
                    return this.__textEngine.type
                },
                set_type: function(a) {
                    null != this.__styleSheet && (a = 0);
                    a != this.__textEngine.type && (this.__textEngine.type = a,
                    1 == a ? (this.addEventListener("addedToStage", m(this, this.this_onAddedToStage)),
                    this.this_onFocusIn(null),
                    this.__textEngine.__useIntAdvances = !0) : (this.removeEventListener("addedToStage", m(this, this.this_onAddedToStage)),
                    this.__stopTextInput(),
                    this.__textEngine.__useIntAdvances = null),
                    this.__layoutDirty = this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    return this.__textEngine.type
                },
                get_width: function() {
                    this.__updateLayout();
                    return this.__textEngine.width * Math.abs(this.__scaleX)
                },
                set_width: function(a) {
                    a != this.__textEngine.width && (this.__setTransformDirty(),
                    this.__layoutDirty = this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()),
                    this.__textEngine.width = a);
                    return this.__textEngine.width * Math.abs(this.__scaleX)
                },
                set_wordWrap: function(a) {
                    a != this.__textEngine.wordWrap && (this.__layoutDirty = this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()));
                    return this.__textEngine.wordWrap = a
                },
                get_x: function() {
                    return this.__transform.tx + this.__offsetX
                },
                set_x: function(a) {
                    a != this.__transform.tx + this.__offsetX && this.__setTransformDirty();
                    this.__transform.tx = a - this.__offsetX;
                    return a
                },
                get_y: function() {
                    return this.__transform.ty + this.__offsetY
                },
                set_y: function(a) {
                    a != this.__transform.ty + this.__offsetY && this.__setTransformDirty();
                    this.__transform.ty = a - this.__offsetY;
                    return a
                },
                stage_onMouseMove: function(a) {
                    if (null != this.stage && this.get_selectable() && 0 <= this.__selectionIndex && (this.__updateLayout(),
                    a = this.__lineSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !0) : this.__wordSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !1) : this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY()),
                    a != this.__caretIndex)) {
                        this.__caretIndex = a;
                        if (this.__wordSelection || this.__lineSelection)
                            this.__selectionIndex = this.__getOppositeIdentifierBound(this.__specialSelectionInitialIndex, this.__lineSelection);
                        a = !0;
                        ca.__supportDOM && (this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = !0),
                        a = !1);
                        a && (this.__dirty = !0,
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty()))
                    }
                },
                stage_onMouseUp: function(a) {
                    a = a.currentTarget;
                    a.removeEventListener("enterFrame", m(this, this.this_onEnterFrame));
                    a.removeEventListener("mouseMove", m(this, this.stage_onMouseMove));
                    a.removeEventListener("mouseUp", m(this, this.stage_onMouseUp));
                    if (this.stage == a && a.get_focus() == this) {
                        this.__getWorldTransform();
                        this.__updateLayout();
                        a = this.__lineSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !0) : this.__wordSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), !1) : this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
                        var b = Math.max(this.__selectionIndex, a) | 0;
                        this.__selectionIndex = Math.min(this.__selectionIndex, a) | 0;
                        this.__caretIndex = b;
                        this.__wordSelection = this.__lineSelection = !1;
                        this.__inputEnabled && (this.this_onFocusIn(null),
                        this.__stopCursorTimer(),
                        this.__startCursorTimer(),
                        ca.__supportDOM && this.__renderedOnCanvasWhileOnDOM && (this.__forceCachedBitmapUpdate = !0))
                    }
                },
                this_onAddedToStage: function(a) {
                    this.this_onFocusIn(null)
                },
                this_onEnterFrame: function(a) {
                    this.__updateMouseDrag()
                },
                this_onFocusIn: function(a) {
                    1 == this.get_type() && null != this.stage && this.stage.get_focus() == this ? this.__startTextInput() : 1 != this.get_type() && this.get_selectable() && null != this.stage && this.stage.get_focus() == this && this.__startCursorTimer()
                },
                this_onFocusOut: function(a) {
                    this.__stopCursorTimer();
                    this.__stopTextInput();
                    this.__selectionIndex != this.__caretIndex && (this.__selectionIndex = this.__caretIndex,
                    this.__dirty = !0,
                    this.__renderDirty || (this.__renderDirty = !0,
                    this.__setParentRenderDirty()))
                },
                this_onKeyDown: function(a) {
                    this.get_selectable() && 1 != this.get_type() && 67 == a.keyCode && (a.commandKey || a.ctrlKey) && (this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || zc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex)))
                },
                this_onMouseDown: function(a) {
                    if (this.get_selectable() || 1 == this.get_type()) {
                        this.__lineSelection = 3 == a.clickCount;
                        this.__wordSelection = 2 == a.clickCount;
                        if (this.__lineSelection) {
                            var b = this.__caretIndex;
                            this.__caretIndex = this.__getPositionByIdentifier(a.stageX + this.get_scrollH(), a.stageY, !0);
                            this.__selectionIndex = this.__getOppositeIdentifierBound(b, !0)
                        } else
                            this.__wordSelection ? (b = this.__caretIndex,
                            this.__caretIndex = this.__getPositionByIdentifier(a.stageX + this.get_scrollH(), a.stageY, !1),
                            this.__selectionIndex = this.__getOppositeIdentifierBound(b, !1),
                            this.__specialSelectionInitialIndex = b) : this.__selectionIndex = this.__caretIndex = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
                        this.setSelection(this.__caretIndex, this.__selectionIndex);
                        this.__updateLayout();
                        ca.__supportDOM || (this.__dirty = !0,
                        this.__renderDirty || (this.__renderDirty = !0,
                        this.__setParentRenderDirty()));
                        null != this.stage && (this.stage.addEventListener("enterFrame", m(this, this.this_onEnterFrame)),
                        this.stage.addEventListener("mouseMove", m(this, this.stage_onMouseMove)),
                        this.stage.addEventListener("mouseUp", m(this, this.stage_onMouseUp)))
                    }
                },
                this_onMouseWheel: function(a) {
                    this.get_mouseWheelEnabled() && this.set_scrollV(Math.min(this.get_scrollV() - a.delta, this.get_maxScrollV()) | 0)
                },
                window_onKeyDown: function(a, b) {
                    switch (a) {
                    case 8:
                        this.__selectionIndex == this.__caretIndex && 0 < this.__caretIndex && (this.__selectionIndex = this.__caretIndex - 1);
                        this.__selectionIndex != this.__caretIndex ? (this.replaceSelectedText(""),
                        this.__selectionIndex = this.__caretIndex,
                        this.dispatchEvent(new ya("change",!0))) : (this.__stopCursorTimer(),
                        this.__startCursorTimer());
                        break;
                    case 97:
                        this.get_selectable() && (cb.get_metaKey(b) || cb.get_ctrlKey(b)) && this.setSelection(0, this.__text.length);
                        break;
                    case 99:
                        if (cb.get_metaKey(b) || cb.get_ctrlKey(b))
                            this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || zc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                        break;
                    case 120:
                        !cb.get_metaKey(b) && !cb.get_ctrlKey(b) || this.__caretIndex == this.__selectionIndex || this.get_displayAsPassword() || (zc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex)),
                        this.replaceSelectedText(""),
                        this.dispatchEvent(new ya("change",!0)));
                        break;
                    case 127:
                        this.__selectionIndex == this.__caretIndex && this.__caretIndex < this.__text.length && (this.__selectionIndex = this.__caretIndex + 1);
                        this.__selectionIndex != this.__caretIndex ? (this.replaceSelectedText(""),
                        this.__selectionIndex = this.__caretIndex,
                        this.dispatchEvent(new ya("change",!0))) : (this.__stopCursorTimer(),
                        this.__startCursorTimer());
                        break;
                    case 1073741898:
                        this.get_selectable() && (cb.get_metaKey(b) || cb.get_ctrlKey(b) ? this.__caretIndex = 0 : this.__caretBeginningOfLine(),
                        cb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex),
                        this.setSelection(this.__selectionIndex, this.__caretIndex));
                        break;
                    case 1073741901:
                        this.get_selectable() && (cb.get_metaKey(b) || cb.get_ctrlKey(b) ? this.__caretIndex = this.__text.length : this.__caretEndOfLine(),
                        cb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex),
                        this.setSelection(this.__selectionIndex, this.__caretIndex));
                        break;
                    case 1073741903:
                        this.get_selectable() && (cb.get_metaKey(b) || cb.get_ctrlKey(b) ? this.__caretBeginningOfNextLine() : this.__caretNextCharacter(),
                        cb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex),
                        this.setSelection(this.__selectionIndex, this.__caretIndex));
                        break;
                    case 1073741904:
                        this.get_selectable() && (cb.get_metaKey(b) || cb.get_ctrlKey(b) ? this.__caretBeginningOfPreviousLine() : this.__caretPreviousCharacter(),
                        cb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex),
                        this.setSelection(this.__selectionIndex, this.__caretIndex));
                        break;
                    case 1073741905:
                        this.get_selectable() && (cb.get_metaKey(b) || cb.get_ctrlKey(b) ? this.__caretIndex = this.__text.length : this.__caretNextLine(),
                        cb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex),
                        this.setSelection(this.__selectionIndex, this.__caretIndex));
                        break;
                    case 1073741906:
                        this.get_selectable() && (cb.get_metaKey(b) || cb.get_ctrlKey(b) ? this.__caretIndex = 0 : this.__caretPreviousLine(),
                        cb.get_shiftKey(b) || (this.__selectionIndex = this.__caretIndex),
                        this.setSelection(this.__selectionIndex, this.__caretIndex));
                        break;
                    case 13:
                    case 1073741912:
                        this.__textEngine.multiline ? (a = new Le("textInput",!0,!0,"\n"),
                        this.dispatchEvent(a),
                        a.isDefaultPrevented() || (this.__replaceSelectedText("\n", !0),
                        this.dispatchEvent(new ya("change",!0)))) : (this.__stopCursorTimer(),
                        this.__startCursorTimer())
                    }
                },
                window_onTextInput: function(a) {
                    this.__replaceSelectedText(a, !0);
                    this.dispatchEvent(new ya("change",!0))
                },
                __class__: Oc,
                __properties__: v(za.prototype.__properties__, {
                    set_wordWrap: "set_wordWrap",
                    set_textColor: "set_textColor",
                    set_restrict: "set_restrict",
                    set_borderColor: "set_borderColor",
                    set_border: "set_border",
                    set_backgroundColor: "set_backgroundColor",
                    set_background: "set_background",
                    set_autoSize: "set_autoSize",
                    set_type: "set_type",
                    get_type: "get_type",
                    get_textWidth: "get_textWidth",
                    get_textHeight: "get_textHeight",
                    set_text: "set_text",
                    get_text: "get_text",
                    set_selectable: "set_selectable",
                    get_selectable: "get_selectable",
                    set_scrollV: "set_scrollV",
                    get_scrollV: "get_scrollV",
                    set_scrollH: "set_scrollH",
                    get_scrollH: "get_scrollH",
                    get_numLines: "get_numLines",
                    set_multiline: "set_multiline",
                    get_multiline: "get_multiline",
                    get_mouseWheelEnabled: "get_mouseWheelEnabled",
                    get_maxScrollV: "get_maxScrollV",
                    get_maxScrollH: "get_maxScrollH",
                    get_length: "get_length",
                    set_htmlText: "set_htmlText",
                    get_htmlText: "get_htmlText",
                    get_displayAsPassword: "get_displayAsPassword",
                    set_defaultTextFormat: "set_defaultTextFormat",
                    get_defaultTextFormat: "get_defaultTextFormat",
                    get_caretIndex: "get_caretIndex",
                    get_bottomScrollV: "get_bottomScrollV"
                })
            });
            var Ae = function(a, b, c, d, f, g, k, l, h, u, w, n, r) {
                this.font = a;
                this.size = b;
                this.color = c;
                this.bold = d;
                this.italic = f;
                this.underline = g;
                this.url = k;
                this.target = l;
                this.align = h;
                this.leftMargin = u;
                this.rightMargin = w;
                this.indent = n;
                this.leading = r
            };
            h["openfl.text.TextFormat"] = Ae;
            Ae.__name__ = "openfl.text.TextFormat";
            Ae.prototype = {
                clone: function() {
                    var a = new Ae(this.font,this.size,this.color,this.bold,this.italic,this.underline,this.url,this.target);
                    a.align = this.align;
                    a.leftMargin = this.leftMargin;
                    a.rightMargin = this.rightMargin;
                    a.indent = this.indent;
                    a.leading = this.leading;
                    a.blockIndent = this.blockIndent;
                    a.bullet = this.bullet;
                    a.kerning = this.kerning;
                    a.letterSpacing = this.letterSpacing;
                    a.tabStops = this.tabStops;
                    a.__ascent = this.__ascent;
                    a.__descent = this.__descent;
                    a.__cacheKey = this.__toCacheKey();
                    return a
                },
                __merge: function(a) {
                    null != a.font && (this.font = a.font);
                    null != a.size && (this.size = a.size);
                    null != a.color && (this.color = a.color);
                    null != a.bold && (this.bold = a.bold);
                    null != a.italic && (this.italic = a.italic);
                    null != a.underline && (this.underline = a.underline);
                    null != a.url && (this.url = a.url);
                    null != a.target && (this.target = a.target);
                    null != a.align && (this.align = a.align);
                    null != a.leftMargin && (this.leftMargin = a.leftMargin);
                    null != a.rightMargin && (this.rightMargin = a.rightMargin);
                    null != a.indent && (this.indent = a.indent);
                    null != a.leading && (this.leading = a.leading);
                    null != a.blockIndent && (this.blockIndent = a.blockIndent);
                    null != a.bullet && (this.bullet = a.bullet);
                    null != a.kerning && (this.kerning = a.kerning);
                    null != a.letterSpacing && (this.letterSpacing = a.letterSpacing);
                    null != a.tabStops && (this.tabStops = a.tabStops);
                    null != a.__ascent && (this.__ascent = a.__ascent);
                    null != a.__descent && (this.__descent = a.__descent);
                    this.__toCacheKey()
                },
                __toCacheKey: function() {
                    return this.__cacheKey = "" + this.font + this.size + G.string(this.bold) + G.string(this.italic)
                },
                __class__: Ae
            };
            var Ml = {
                fromString: function(a) {
                    switch (a) {
                    case "center":
                        return 0;
                    case "end":
                        return 1;
                    case "justify":
                        return 2;
                    case "left":
                        return 3;
                    case "right":
                        return 4;
                    case "start":
                        return 5;
                    default:
                        return null
                    }
                }
            }
              , Gh = function(a, b) {
                this.__collisions = [];
                this.__wordMap = new tc;
                this.set(a, b)
            };
            h["openfl.text._internal.CacheMeasurement"] = Gh;
            Gh.__name__ = "openfl.text._internal.CacheMeasurement";
            Gh.prototype = {
                set: function(a, b) {
                    this.__addCollision(a, b)
                },
                get: function(a) {
                    return 1 < this.__collisions.length ? this.__wordMap.h[this.__collisions.indexOf(a)] : this.__wordMap.h[0]
                },
                __addCollision: function(a, b) {
                    if (!this.exists(a)) {
                        var c = this.__wordMap;
                        a = this.__collisions.push(a) - 1;
                        c.h[a] = b
                    }
                },
                exists: function(a) {
                    return 0 == this.__collisions.length ? !1 : -1 < this.__collisions.indexOf(a)
                },
                __class__: Gh
            };
            var Oa = function() {};
            h["openfl.text._internal.HTMLParser"] = Oa;
            Oa.__name__ = "openfl.text._internal.HTMLParser";
            Oa.parse = function(a, b, c, d, f) {
                a = b ? a.replace(Oa.__regexBreakTag.r, "\n") : a.replace(Oa.__regexBreakTag.r, "");
                a = a.replace(Oa.__regexEntityNbsp.r, " ");
                a = Oa.__regexCharEntity.map(a, function(a) {
                    var b = a.matched(1)
                      , c = a.matched(2);
                    return null != b && (b = G.parseInt(b),
                    null != b) ? String.fromCodePoint(b) : null != c && (c = G.parseInt("0" + c),
                    null != c) ? String.fromCodePoint(c) : a.matched(0)
                });
                var g = a.split("<");
                if (1 == g.length) {
                    a = Oa.__htmlUnescape(a.replace(Oa.__regexHTMLTag.r, ""));
                    if (1 < f.get_length()) {
                        var k = f.get_length() - 1;
                        f.__tempIndex = 1;
                        for (var l = 0, h = []; l < h.length; ) {
                            var u = h[l++];
                            f.insertAt(f.__tempIndex, u);
                            f.__tempIndex++
                        }
                        f.splice(f.__tempIndex, k)
                    }
                    b = f.get(0);
                    b.format = d;
                    b.start = 0;
                    b.end = a.length
                } else {
                    k = f.get_length();
                    l = f.__tempIndex = 0;
                    for (h = []; l < h.length; )
                        u = h[l++],
                        f.insertAt(f.__tempIndex, u),
                        f.__tempIndex++;
                    f.splice(f.__tempIndex, k);
                    a = "";
                    k = [d.clone()];
                    l = [];
                    u = !1;
                    for (h = 0; h < g.length; ) {
                        var w = g[h];
                        ++h;
                        if ("" != w) {
                            var n = "/" == Q.substr(w, 0, 1)
                              , r = w.indexOf(">")
                              , x = r + 1
                              , m = w.indexOf(" ");
                            m = w.substring(n ? 1 : 0, -1 < m && m < r ? m : r).toLowerCase();
                            if (n)
                                0 != l.length && m == l[l.length - 1] && (l.pop(),
                                k.pop(),
                                n = k[k.length - 1].clone(),
                                ("p" == m || "li" == m) && 0 < f.get_length() && (b && (a += "\n"),
                                u = !0),
                                x < w.length && (u = Oa.__htmlUnescape(Q.substr(w, x, null)),
                                f.push(new sd(n,a.length,a.length + u.length)),
                                a += u,
                                u = !1));
                            else if (n = k[k.length - 1].clone(),
                            -1 < r) {
                                null != c && (c.__applyStyle(m, n),
                                Oa.__regexClass.match(w) && (c.__applyStyle("." + Oa.__getAttributeMatch(Oa.__regexClass), n),
                                c.__applyStyle(m + "." + Oa.__getAttributeMatch(Oa.__regexClass), n)));
                                switch (m) {
                                case "a":
                                    null != c && c.__applyStyle("a:link", n);
                                    Oa.__regexHref.match(w) && (n.url = Oa.__getAttributeMatch(Oa.__regexHref));
                                    break;
                                case "b":
                                    n.bold = !0;
                                    break;
                                case "em":
                                case "i":
                                    n.italic = !0;
                                    break;
                                case "font":
                                    Oa.__regexFace.match(w) && (n.font = Oa.__getAttributeMatch(Oa.__regexFace));
                                    Oa.__regexColor.match(w) && (n.color = G.parseInt("0x" + Oa.__getAttributeMatch(Oa.__regexColor)));
                                    if (Oa.__regexSize.match(w)) {
                                        r = Oa.__getAttributeMatch(Oa.__regexSize);
                                        var C = Q.cca(r, 0);
                                        n.size = 43 == C || 45 == C ? (2 <= k.length ? k[k.length - 2] : d).size + G.parseInt(r) : G.parseInt(r)
                                    }
                                    break;
                                case "li":
                                    0 < f.get_length() && !u && (a += "\n");
                                    r = n.clone();
                                    r.underline = !1;
                                    f.push(new sd(r,a.length,a.length + 2));
                                    a += "\u2022 ";
                                    break;
                                case "p":
                                    0 < f.get_length() && !u && (a += "\n");
                                    Oa.__regexAlign.match(w) && (r = Oa.__getAttributeMatch(Oa.__regexAlign).toLowerCase(),
                                    n.align = Ml.fromString(r));
                                    break;
                                case "textformat":
                                    Oa.__regexBlockIndent.match(w) && (n.blockIndent = G.parseInt(Oa.__getAttributeMatch(Oa.__regexBlockIndent)));
                                    Oa.__regexIndent.match(w) && (n.indent = G.parseInt(Oa.__getAttributeMatch(Oa.__regexIndent)));
                                    Oa.__regexLeading.match(w) && (n.leading = G.parseInt(Oa.__getAttributeMatch(Oa.__regexLeading)));
                                    Oa.__regexLeftMargin.match(w) && (n.leftMargin = G.parseInt(Oa.__getAttributeMatch(Oa.__regexLeftMargin)));
                                    Oa.__regexRightMargin.match(w) && (n.rightMargin = G.parseInt(Oa.__getAttributeMatch(Oa.__regexRightMargin)));
                                    if (Oa.__regexTabStops.match(w)) {
                                        r = Oa.__getAttributeMatch(Oa.__regexTabStops).split(" ");
                                        C = [];
                                        for (var z = 0; z < r.length; ) {
                                            var K = r[z];
                                            ++z;
                                            C.push(G.parseInt(K))
                                        }
                                        n.tabStops = C
                                    }
                                    break;
                                case "u":
                                    n.underline = !0
                                }
                                k.push(n);
                                l.push(m);
                                x < w.length && (u = Oa.__htmlUnescape(w.substring(x)),
                                f.push(new sd(n,a.length,a.length + u.length)),
                                a += u,
                                u = !1)
                            } else
                                u = Oa.__htmlUnescape(w),
                                f.push(new sd(n,a.length,a.length + u.length)),
                                a += u,
                                u = !1
                        }
                    }
                    0 == f.get_length() && f.push(new sd(k[0],0,0))
                }
                return a
            }
            ;
            Oa.__getAttributeMatch = function(a) {
                return null != a.matched(2) ? a.matched(2) : a.matched(3)
            }
            ;
            Oa.__htmlUnescape = function(a) {
                a = a.replace(Oa.__regexEntityApos.r, "'");
                return P.htmlUnescape(a)
            }
            ;
            var Sg = function() {
                this.__shortWordMap = new Ia;
                this.__longWordMap = new Ia
            };
            h["openfl.text._internal.ShapeCache"] = Sg;
            Sg.__name__ = "openfl.text._internal.ShapeCache";
            Sg.hashFunction = function(a) {
                for (var b = 0, c, d = 0, f = a.length; d < f; )
                    c = d++,
                    c = Q.cca(a, c),
                    b = (b << 5) - b + c,
                    b |= 0;
                return b
            }
            ;
            Sg.prototype = {
                cache: function(a, b, c) {
                    a = a.format.__cacheKey;
                    return 15 < c.length ? this.__cacheLongWord(c, a, b) : this.__cacheShortWord(c, a, b)
                },
                __cacheShortWord: function(a, b, c) {
                    if (Object.prototype.hasOwnProperty.call(this.__shortWordMap.h, b)) {
                        var d = this.__shortWordMap.h[b];
                        if (Object.prototype.hasOwnProperty.call(d.h, a))
                            return d.h[a];
                        var f = c();
                        d.h[a] = f
                    } else
                        d = new Ia,
                        f = c(),
                        d.h[a] = f,
                        this.__shortWordMap.h[b] = d;
                    return c()
                },
                __cacheLongWord: function(a, b, c) {
                    var d = Sg.hashFunction(a);
                    if (Object.prototype.hasOwnProperty.call(this.__longWordMap.h, b)) {
                        var f = this.__longWordMap.h[b];
                        if (f.h.hasOwnProperty(d)) {
                            var g = f.h[d];
                            if (g.exists(a))
                                return g.get(a);
                            g.set(a, c())
                        } else
                            g = new Gh(a,c()),
                            f.h[d] = g
                    } else
                        f = new tc,
                        g = new Gh(a,c()),
                        g.hash = d,
                        f.h[d] = g,
                        this.__longWordMap.h[b] = f;
                    return c()
                },
                __class__: Sg
            };
            var Eb = function(a) {
                this.__shapeCache = new Sg;
                this.textField = a;
                this.height = this.width = 100;
                this.set_text("");
                this.bounds = new oa(0,0,0,0);
                this.textBounds = new oa(0,0,0,0);
                this.type = 0;
                this.autoSize = 2;
                this.embedFonts = !1;
                this.selectable = !0;
                this.borderColor = 0;
                this.border = !1;
                this.backgroundColor = 16777215;
                this.background = !1;
                this.gridFitType = 1;
                this.maxChars = 0;
                this.multiline = !1;
                this.numLines = 1;
                this.scrollH = this.sharpness = 0;
                this.set_scrollV(1);
                this.wordWrap = !1;
                this.lineAscents = ua.toFloatVector(null);
                this.lineBreaks = ua.toIntVector(null);
                this.lineDescents = ua.toFloatVector(null);
                this.lineLeadings = ua.toFloatVector(null);
                this.lineHeights = ua.toFloatVector(null);
                this.lineWidths = ua.toFloatVector(null);
                this.layoutGroups = ua.toObjectVector(null);
                this.textFormatRanges = ua.toObjectVector(null);
                null == Eb.__context && (Eb.__context = window.document.createElement("canvas").getContext("2d"))
            };
            h["openfl.text._internal.TextEngine"] = Eb;
            Eb.__name__ = "openfl.text._internal.TextEngine";
            Eb.findFont = function(a) {
                return ka.__fontByName.h[a]
            }
            ;
            Eb.findFontVariant = function(a) {
                var b = a.font
                  , c = a.bold;
                a = a.italic;
                null == b && (b = "_serif");
                var d = P.replace(P.replace(b, " Normal", ""), " Regular", "");
                return c && a && Object.prototype.hasOwnProperty.call(ka.__fontByName.h, d + " Bold Italic") ? Eb.findFont(d + " Bold Italic") : c && Object.prototype.hasOwnProperty.call(ka.__fontByName.h, d + " Bold") ? Eb.findFont(d + " Bold") : a && Object.prototype.hasOwnProperty.call(ka.__fontByName.h, d + " Italic") ? Eb.findFont(d + " Italic") : Eb.findFont(b)
            }
            ;
            Eb.getFormatHeight = function(a) {
                var b = Eb.getFont(a);
                Eb.__context.font = b;
                b = Eb.getFontInstance(a);
                if (null != a.__ascent) {
                    var c = a.size * a.__ascent;
                    b = a.size * a.__descent
                } else
                    null != b && 0 != b.unitsPerEM ? (c = b.ascender / b.unitsPerEM * a.size,
                    b = Math.abs(b.descender / b.unitsPerEM * a.size)) : (c = a.size,
                    b = .185 * a.size);
                return c + b + a.leading
            }
            ;
            Eb.getFont = function(a) {
                var b = a.font
                  , c = a.bold
                  , d = a.italic;
                null == b && (b = "_serif");
                var f = P.replace(P.replace(b, " Normal", ""), " Regular", "");
                c && d && Object.prototype.hasOwnProperty.call(ka.__fontByName.h, f + " Bold Italic") ? (b = f + " Bold Italic",
                d = c = !1) : c && Object.prototype.hasOwnProperty.call(ka.__fontByName.h, f + " Bold") ? (b = f + " Bold",
                c = !1) : d && Object.prototype.hasOwnProperty.call(ka.__fontByName.h, f + " Italic") ? (b = f + " Italic",
                d = !1) : (c && (-1 < b.indexOf(" Bold ") || P.endsWith(b, " Bold")) && (c = !1),
                d && (-1 < b.indexOf(" Italic ") || P.endsWith(b, " Italic")) && (d = !1));
                c = (d ? "italic " : "normal ") + "normal " + (c ? "bold " : "normal ");
                c += a.size + "px";
                c += "/" + (a.size + 3) + "px ";
                switch (b) {
                case "_sans":
                    a = "sans-serif";
                    break;
                case "_serif":
                    a = "serif";
                    break;
                case "_typewriter":
                    a = "monospace";
                    break;
                default:
                    a = "'" + b.replace(/^[\s'"]+(.*)[\s'"]+$/, "$1") + "'"
                }
                return c += "" + a
            }
            ;
            Eb.getFontInstance = function(a) {
                return Eb.findFontVariant(a)
            }
            ;
            Eb.prototype = {
                createRestrictRegexp: function(a) {
                    var b = ""
                      , c = !1;
                    a = (new Ta("\\^([^\\^]+)","gu")).map(a, function(a) {
                        if (c)
                            return c = !c,
                            a.matched(1);
                        b += a.matched(1);
                        c = !c;
                        return ""
                    });
                    var d = [];
                    0 < a.length && d.push("[^" + a + "]");
                    0 < b.length && d.push("[" + b + "]");
                    return new Ta("(" + d.join("|") + ")","g")
                },
                getBounds: function() {
                    var a = this.border ? 1 : 0;
                    this.bounds.width = this.width + a;
                    this.bounds.height = this.height + a;
                    a = this.width;
                    for (var b = this.height, c = this.layoutGroups.get_length() - 1, d = 0, f = this.layoutGroups.get_length(); d < f; ) {
                        var g = d++
                          , k = this.layoutGroups.get(g);
                        if (g != c || k.startIndex != k.endIndex || 1 == this.type)
                            k.offsetX < a && (a = k.offsetX),
                            k.offsetY < b && (b = k.offsetY)
                    }
                    a >= this.width && (a = 2);
                    b >= this.height && (b = 2);
                    this.textBounds.setTo(Math.max(a - 2, 0), Math.max(b - 2, 0), Math.min(this.textWidth + 4, this.bounds.width), Math.min(1.185 * this.textHeight + 4, this.bounds.height))
                },
                getLineBreaks: function() {
                    this.lineBreaks.set_length(0);
                    for (var a = -1, b; a < this.text.length; )
                        if (b = this.text.indexOf("\n", a + 1),
                        a = this.text.indexOf("\r", a + 1),
                        a = -1 == a ? b : -1 == b ? a : a < b ? a : b,
                        -1 < a)
                            this.lineBreaks.push(a);
                        else
                            break
                },
                getLineMeasurements: function() {
                    this.lineAscents.set_length(0);
                    this.lineDescents.set_length(0);
                    this.lineLeadings.set_length(0);
                    this.lineHeights.set_length(0);
                    this.lineWidths.set_length(0);
                    var a = 0
                      , b = 0
                      , c = null
                      , d = 0
                      , f = 0;
                    this.textHeight = this.textWidth = 0;
                    this.numLines = 1;
                    this.maxScrollH = 0;
                    for (var g = this.layoutGroups.get_length() - 1, k = 0, l = this.layoutGroups.get_length(); k < l; ) {
                        var h = k++;
                        var u = this.layoutGroups.get(h);
                        if (h != g || u.startIndex != u.endIndex || 1 == this.type) {
                            for (; u.lineIndex > this.numLines - 1; )
                                this.lineAscents.push(a),
                                this.lineDescents.push(b),
                                this.lineLeadings.push(null != c ? c : 0),
                                this.lineHeights.push(d),
                                this.lineWidths.push(f),
                                b = a = 0,
                                c = null,
                                f = d = 0,
                                this.numLines++;
                            a = Math.max(a, u.ascent);
                            b = Math.max(b, u.descent);
                            c = null == c ? u.leading : Math.max(c, u.leading) | 0;
                            d = Math.max(d, u.height);
                            f = u.offsetX - 2 + u.width;
                            f > this.textWidth && (this.textWidth = f);
                            h = Math.ceil(u.offsetY - 2 + u.ascent + u.descent);
                            h > this.textHeight && (this.textHeight = h)
                        }
                    }
                    0 == this.textHeight && null != this.textField && 1 == this.type && (a = this.textField.__textFormat,
                    b = Eb.getFontInstance(a),
                    null != a.__ascent ? (g = a.size * a.__ascent,
                    k = a.size * a.__descent) : null != b && 0 != b.unitsPerEM ? (g = b.ascender / b.unitsPerEM * a.size,
                    k = Math.abs(b.descender / b.unitsPerEM * a.size)) : (g = a.size,
                    k = .185 * a.size),
                    c = a.leading,
                    a = g,
                    b = k,
                    this.textHeight = h = Math.ceil(g + k));
                    this.lineAscents.push(a);
                    this.lineDescents.push(b);
                    this.lineLeadings.push(null != c ? c : 0);
                    this.lineHeights.push(d);
                    this.lineWidths.push(f);
                    1 == this.numLines && 0 < c && (this.textHeight += c);
                    if (2 != this.autoSize)
                        switch (this.autoSize) {
                        case 0:
                        case 1:
                        case 3:
                            this.wordWrap || (this.width = this.textWidth + 4),
                            this.height = this.textHeight + 4,
                            this.bottomScrollV = this.numLines
                        }
                    this.maxScrollH = this.textWidth > this.width - 4 ? this.textWidth - this.width + 4 | 0 : 0;
                    this.scrollH > this.maxScrollH && (this.scrollH = this.maxScrollH)
                },
                getLayoutGroups: function() {
                    var a = this;
                    this.layoutGroups.set_length(0);
                    if (null != this.text && "" != this.text) {
                        var b = -1
                          , c = null
                          , d = null
                          , f = Oc.__defaultTextFormat.clone()
                          , g = 0
                          , k = 0
                          , l = 0
                          , h = 0
                          , u = 3
                          , w = 0
                          , n = 0
                          , r = 0
                          , x = 0
                          , m = !0
                          , C = null
                          , z = null
                          , K = 0
                          , A = 0
                          , I = 0
                          , B = -2
                          , t = -1
                          , N = this.text.indexOf(" ")
                          , v = 0
                          , D = v < this.lineBreaks.get_length() ? this.lineBreaks.get(v) : -1
                          , E = 0
                          , J = 0
                          , wa = 0
                          , P = 0
                          , G = function(b, d, g) {
                            var k = function() {
                                var c = [];
                                if (null == a.__useIntAdvances) {
                                    var f = new Ta("Trident/7.0","");
                                    a.__useIntAdvances = f.match(y.navigator.userAgent)
                                }
                                if (a.__useIntAdvances) {
                                    var k = 0;
                                    f = d;
                                    for (var l = g; f < l; ) {
                                        var h = f++;
                                        h = a.measureText(b.substring(d, h + 1));
                                        c.push(h - k);
                                        k = h
                                    }
                                } else
                                    for (f = d,
                                    l = g; f < l; )
                                        h = f++,
                                        h < b.length - 1 ? (k = a.measureText(b.charAt(h + 1)),
                                        k = a.measureText(Q.substr(b, h, 2)) - k) : k = Eb.__context.measureText(b.charAt(h)).width,
                                        c.push(k);
                                return c
                            };
                            return 2 == f.align ? k() : a.__shapeCache.cache(c, k, b.substring(d, g))
                        }
                          , M = function(a) {
                            for (var b = 0, c = 0; c < a.length; ) {
                                var d = a[c];
                                ++c;
                                b += d
                            }
                            return b
                        }
                          , pb = function() {
                            return 2 + r + w + (m ? n : 0)
                        }
                          , ob = function() {
                            return a.width - 2 - x - pb()
                        }
                          , ma = function(b, d) {
                            null == C || C.startIndex != C.endIndex ? (C = new Jj(c.format,b,d),
                            a.layoutGroups.push(C)) : (C.format = c.format,
                            C.startIndex = b,
                            C.endIndex = d)
                        }
                          , va = function() {
                            null != f.__ascent ? (k = f.size * f.__ascent,
                            h = f.size * f.__descent) : null != d && 0 != d.unitsPerEM ? (k = d.ascender / d.unitsPerEM * f.size,
                            h = Math.abs(d.descender / d.unitsPerEM * f.size)) : (k = f.size,
                            h = .185 * f.size);
                            g = f.leading;
                            A = Math.ceil(k + h + g);
                            A > I && (I = A);
                            k > l && (l = k)
                        }
                          , da = function() {
                            m = !0;
                            u = null != f.align ? f.align : 3;
                            w = null != f.blockIndent ? f.blockIndent : 0;
                            n = null != f.indent ? f.indent : 0;
                            r = null != f.leftMargin ? f.leftMargin : 0;
                            x = null != f.rightMargin ? f.rightMargin : 0
                        }
                          , F = function() {
                            if (b < a.textFormatRanges.get_length() - 1) {
                                b += 1;
                                c = a.textFormatRanges.get(b);
                                f.__merge(c.format);
                                var g = Eb.getFont(f);
                                Eb.__context.font = g;
                                d = Eb.getFontInstance(f);
                                return !0
                            }
                            return !1
                        }
                          , Ya = function(d, f) {
                            if (d >= f)
                                z = [],
                                K = 0;
                            else if (f <= c.end)
                                z = G(a.text, d, f),
                                K = M(z);
                            else {
                                var g = d;
                                d = c.end;
                                var k = 0;
                                z = [];
                                for (K = 0; ; )
                                    if (g != d && (g = G(a.text, g, d),
                                    z = z.concat(g)),
                                    d != f) {
                                        if (!F()) {
                                            Ja.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                                                fileName: "openfl/text/_internal/TextEngine.hx",
                                                lineNumber: 1121,
                                                className: "openfl.text._internal.TextEngine",
                                                methodName: "getLayoutGroups"
                                            });
                                            break
                                        }
                                        g = d;
                                        d = f < c.end ? f : c.end;
                                        ++k
                                    } else {
                                        K = M(z);
                                        break
                                    }
                                b -= k + 1;
                                F()
                            }
                        }
                          , ab = function(b) {
                            if (b <= c.end) {
                                z = G(a.text, wa, b);
                                K = M(z);
                                ma(wa, b);
                                C.positions = z;
                                var d = E
                                  , f = pb();
                                C.offsetX = d + f;
                                C.ascent = k;
                                C.descent = h;
                                C.leading = g;
                                C.lineIndex = P;
                                C.offsetY = J + 2;
                                C.width = K;
                                C.height = A;
                                E += K;
                                b == c.end && (C = null,
                                F(),
                                va())
                            } else
                                for (; ; ) {
                                    var l = b < c.end ? b : c.end;
                                    wa != l && (z = G(a.text, wa, l),
                                    K = M(z),
                                    ma(wa, l),
                                    C.positions = z,
                                    d = E,
                                    f = pb(),
                                    C.offsetX = d + f,
                                    C.ascent = k,
                                    C.descent = h,
                                    C.leading = g,
                                    C.lineIndex = P,
                                    C.offsetY = J + 2,
                                    C.width = K,
                                    C.height = A,
                                    E += K,
                                    wa = l);
                                    l == c.end && (C = null);
                                    if (l == b)
                                        break;
                                    if (!F()) {
                                        Ja.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                                            fileName: "openfl/text/_internal/TextEngine.hx",
                                            lineNumber: 1209,
                                            className: "openfl.text._internal.TextEngine",
                                            methodName: "getLayoutGroups"
                                        });
                                        break
                                    }
                                    va()
                                }
                            wa = b
                        }
                          , L = function() {
                            va();
                            for (var b = a.layoutGroups.get_length(); -1 < --b; ) {
                                var c = a.layoutGroups.get(b);
                                if (c.lineIndex < P)
                                    break;
                                c.lineIndex > P || (c.ascent = l,
                                c.height = I)
                            }
                            J += I;
                            I = l = 0;
                            P += 1;
                            E = 0;
                            m = !1
                        }
                          , H = function(b) {
                            if (4 <= a.width && a.wordWrap) {
                                var c = z;
                                var d = M(c);
                                for (var f = c.length - 1; 0 <= f; ) {
                                    var g = Q.cca(a.text, wa + f);
                                    if (32 != g && 9 != g)
                                        break;
                                    d -= c[f];
                                    --f
                                }
                                for (; 0 < c.length && E + d > ob(); ) {
                                    for (g = f = d = 0; E + g < ob(); ) {
                                        var k = c[f];
                                        0 == k ? (++f,
                                        ++d) : (g += k,
                                        ++f)
                                    }
                                    if (f == d)
                                        f = d + 1;
                                    else
                                        for (; 1 < f && E + g > ob(); )
                                            --f,
                                            0 < f - d ? (Ya(wa, wa + f - d),
                                            g = K) : (f = 1,
                                            d = 0,
                                            Ya(wa, wa + 1),
                                            g = 0);
                                    c = wa + f - d;
                                    ab(c);
                                    L();
                                    Ya(c, b);
                                    c = z;
                                    d = K
                                }
                            }
                            ab(b)
                        };
                        F();
                        da();
                        va();
                        for (var V, Gb = this.text.length + 1; wa < Gb; )
                            if (-1 < D && (-1 == N || D < N))
                                wa <= D ? (Ya(wa, D),
                                H(D),
                                C = null) : null != C && C.startIndex != C.endIndex && (C.endIndex == N && (C.width -= C.positions[C.positions.length - 1]),
                                C = null),
                                L(),
                                c.end == D && (F(),
                                va()),
                                wa = D + 1,
                                t = D,
                                ++v,
                                D = v < this.lineBreaks.get_length() ? this.lineBreaks.get(v) : -1,
                                da();
                            else if (-1 < N)
                                for (null != C && C.startIndex != C.endIndex && (C = null),
                                V = !1; wa < this.text.length; ) {
                                    var R = -1;
                                    -1 == N ? R = D : (R = N + 1,
                                    -1 < D && D < R && (R = D));
                                    -1 == R && (R = this.text.length);
                                    Ya(wa, R);
                                    if (2 == u) {
                                        if (0 < z.length && wa == B) {
                                            wa += 1;
                                            var S = z.shift();
                                            K -= S;
                                            E += S
                                        }
                                        0 < z.length && R == N + 1 && (--R,
                                        S = z.pop(),
                                        K -= S)
                                    }
                                    this.wordWrap && E + K > ob() && (V = !0,
                                    0 < z.length && R == N + 1 && E + K - z[z.length - 1] <= ob() && (V = !1));
                                    if (V) {
                                        2 != u && (null != C || 0 < this.layoutGroups.get_length()) && (V = C,
                                        null == V && (V = this.layoutGroups.get(this.layoutGroups.get_length() - 1)),
                                        V.width -= V.positions[V.positions.length - 1],
                                        V.endIndex--);
                                        V = this.layoutGroups.get_length() - 1;
                                        for (S = 0; 0 <= V; ) {
                                            C = this.layoutGroups.get(V);
                                            if (0 < V && C.startIndex > B)
                                                ++S;
                                            else
                                                break;
                                            --V
                                        }
                                        wa == B + 1 && L();
                                        E = 0;
                                        if (0 < S) {
                                            V = this.layoutGroups.get(this.layoutGroups.get_length() - S).offsetX;
                                            S = this.layoutGroups.get_length() - S;
                                            for (var eb = this.layoutGroups.get_length(); S < eb; ) {
                                                var ca = S++;
                                                C = this.layoutGroups.get(ca);
                                                C.offsetX -= V;
                                                C.offsetY = J + 2;
                                                C.lineIndex = P;
                                                E += C.width
                                            }
                                        }
                                        H(R);
                                        V = !1
                                    } else
                                        null != C && wa == N && B != N - 1 ? (2 != u && (C.endIndex = N,
                                        C.positions = C.positions.concat(z),
                                        C.width += K),
                                        E += K,
                                        wa = R) : null == C || 2 == u ? (H(R),
                                        R == this.text.length && L()) : (S = R < c.end ? R : c.end,
                                        S < R && (z = G(this.text, wa, S),
                                        K = M(z)),
                                        C.endIndex = S,
                                        C.positions = C.positions.concat(z),
                                        C.width += K,
                                        E += K,
                                        S == c.end && (C = null,
                                        F(),
                                        va(),
                                        wa = S,
                                        S != R && ab(R)),
                                        D == R && ++R,
                                        wa = R,
                                        R == this.text.length && (L(),
                                        -1 != D && (t = D,
                                        ++v,
                                        D = v < this.lineBreaks.get_length() ? this.lineBreaks.get(v) : -1)));
                                    R = this.text.indexOf(" ", wa);
                                    D == B && (C.endIndex = D,
                                    0 > D - C.startIndex - C.positions.length && C.positions.push(0),
                                    wa = D + 1);
                                    B = N;
                                    N = R;
                                    if (-1 < D && D <= wa && (N > D || -1 == N) || wa > this.text.length)
                                        break
                                }
                            else
                                wa < this.text.length && (Ya(wa, this.text.length),
                                H(this.text.length),
                                L()),
                                wa += 1;
                        t == wa - 2 && -1 < t && (ma(wa - 1, wa - 1),
                        C.positions = [],
                        C.ascent = k,
                        C.descent = h,
                        C.leading = g,
                        C.lineIndex = P,
                        C.offsetX = pb(),
                        C.offsetY = J + 2,
                        C.width = 0,
                        C.height = A)
                    }
                },
                measureText: function(a) {
                    return Eb.__context.measureText(a).width
                },
                restrictText: function(a) {
                    if (null == a)
                        return a;
                    null != this.__restrictRegexp && (a = this.__restrictRegexp.split(a).join(""));
                    return a
                },
                setTextAlignment: function() {
                    for (var a = -1, b = 0, c, d, f = !1, g = 0, k = this.layoutGroups.get_length(); g < k; ) {
                        var l = g++;
                        c = this.layoutGroups.get(l);
                        if (c.lineIndex != a)
                            switch (a = c.lineIndex,
                            b = this.width - 4 - c.format.rightMargin,
                            c.format.align) {
                            case 0:
                                b = this.lineWidths.get(a) < b ? Math.round((b - this.lineWidths.get(a)) / 2) : 0;
                                break;
                            case 2:
                                if (this.lineWidths.get(a) < b) {
                                    d = 1;
                                    for (var h = l + 1, u = this.layoutGroups.get_length(); h < u; ) {
                                        var w = h++;
                                        if (this.layoutGroups.get(w).lineIndex == a)
                                            0 != w && 32 != Q.cca(this.text, this.layoutGroups.get(w).startIndex - 1) || ++d;
                                        else
                                            break
                                    }
                                    if (1 < d && (c = this.layoutGroups.get(l + d - 1),
                                    h = Q.cca(this.text, c.endIndex),
                                    c.endIndex < this.text.length && 10 != h && 13 != h)) {
                                        b = (b - this.lineWidths.get(a)) / (d - 1);
                                        f = !0;
                                        h = 1;
                                        do
                                            this.layoutGroups.get(l + h).offsetX += b * h;
                                        while (++h < d)
                                    }
                                }
                                b = 0;
                                break;
                            case 4:
                                b = this.lineWidths.get(a) < b ? Math.round(b - this.lineWidths.get(a)) : 0;
                                break;
                            default:
                                b = 0
                            }
                        0 < b && (c.offsetX += b)
                    }
                    f && this.getLineMeasurements()
                },
                update: function() {
                    null == this.text || 0 == this.textFormatRanges.get_length() ? (this.lineAscents.set_length(0),
                    this.lineBreaks.set_length(0),
                    this.lineDescents.set_length(0),
                    this.lineLeadings.set_length(0),
                    this.lineHeights.set_length(0),
                    this.lineWidths.set_length(0),
                    this.layoutGroups.set_length(0),
                    this.textHeight = this.textWidth = 0,
                    this.numLines = 1,
                    this.maxScrollH = 0,
                    this.bottomScrollV = this.maxScrollV = 1) : (this.getLineBreaks(),
                    this.getLayoutGroups(),
                    this.getLineMeasurements(),
                    this.setTextAlignment());
                    this.getBounds()
                },
                get_bottomScrollV: function() {
                    if (1 == this.numLines || null == this.lineHeights)
                        return 1;
                    for (var a = this.lineHeights.get_length(), b = this.lineLeadings.get_length() == a ? -this.lineLeadings.get(a - 1) : 0, c = (0 < this.get_scrollV() ? this.get_scrollV() : 1) - 1, d = this.lineHeights.get_length(); c < d; ) {
                        var f = c++
                          , g = this.lineHeights.get(f);
                        b += g;
                        if (b > this.height - 4) {
                            a = f + (0 <= b - this.height ? 0 : 1);
                            break
                        }
                    }
                    return a < this.get_scrollV() ? this.get_scrollV() : a
                },
                get_maxScrollV: function() {
                    if (1 == this.numLines || null == this.lineHeights)
                        return 1;
                    for (var a = this.numLines - 1, b = 0; 0 <= a; ) {
                        b += this.lineHeights.get(a);
                        if (b > this.height - 4) {
                            a += 0 > b - this.height ? 1 : 2;
                            break
                        }
                        --a
                    }
                    return 1 > a ? 1 : a
                },
                set_restrict: function(a) {
                    if (this.restrict == a)
                        return this.restrict;
                    this.restrict = a;
                    this.__restrictRegexp = null == this.restrict || 0 == this.restrict.length ? null : this.createRestrictRegexp(a);
                    return this.restrict
                },
                get_scrollV: function() {
                    if (1 == this.numLines || null == this.lineHeights)
                        return 1;
                    var a = this.get_maxScrollV();
                    return this.scrollV > a ? a : this.scrollV
                },
                set_scrollV: function(a) {
                    1 > a ? a = 1 : a > this.get_maxScrollV() && (a = this.get_maxScrollV());
                    return this.scrollV = a
                },
                set_text: function(a) {
                    return this.text = a
                },
                __class__: Eb,
                __properties__: {
                    set_text: "set_text",
                    set_scrollV: "set_scrollV",
                    get_scrollV: "get_scrollV",
                    set_restrict: "set_restrict",
                    get_maxScrollV: "get_maxScrollV",
                    get_bottomScrollV: "get_bottomScrollV"
                }
            };
            var sd = function(a, b, c) {
                this.format = a;
                this.start = b;
                this.end = c
            };
            h["openfl.text._internal.TextFormatRange"] = sd;
            sd.__name__ = "openfl.text._internal.TextFormatRange";
            sd.prototype = {
                __class__: sd
            };
            var Jj = function(a, b, c) {
                this.format = a;
                this.startIndex = b;
                this.endIndex = c
            };
            h["openfl.text._internal.TextLayoutGroup"] = Jj;
            Jj.__name__ = "openfl.text._internal.TextLayoutGroup";
            Jj.prototype = {
                __class__: Jj
            };
            var Wa = function() {
                qa.call(this);
                Wa.__instances.push(this)
            };
            h["openfl.ui.GameInput"] = Wa;
            Wa.__name__ = "openfl.ui.GameInput";
            Wa.__getDevice = function(a) {
                if (null == a)
                    return null;
                if (null == Wa.__devices.h.__keys__[a.__id__]) {
                    var b = mc.__getDeviceData()
                      , c = b[a.id].id;
                    b = mc.__getDeviceData();
                    b = new Xk(c,b[a.id].id);
                    Wa.__deviceList.push(b);
                    Wa.__devices.set(a, b);
                    Wa.numDevices = Wa.__deviceList.length
                }
                return Wa.__devices.h[a.__id__]
            }
            ;
            Wa.__onGamepadAxisMove = function(a, b, c) {
                a = Wa.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__axis.h.hasOwnProperty(b)) {
                        if (null == b)
                            var d = "null";
                        else
                            switch (b) {
                            case 0:
                                d = "LEFT_X";
                                break;
                            case 1:
                                d = "LEFT_Y";
                                break;
                            case 2:
                                d = "RIGHT_X";
                                break;
                            case 3:
                                d = "RIGHT_Y";
                                break;
                            case 4:
                                d = "TRIGGER_LEFT";
                                break;
                            case 5:
                                d = "TRIGGER_RIGHT";
                                break;
                            default:
                                d = "UNKNOWN (" + b + ")"
                            }
                        d = new Ud(a,"AXIS_" + d,-1,1);
                        a.__axis.h[b] = d;
                        a.__controls.push(d)
                    }
                    d = a.__axis.h[b];
                    d.value = c;
                    d.dispatchEvent(new ya("change"))
                }
            }
            ;
            Wa.__onGamepadButtonDown = function(a, b) {
                a = Wa.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__button.h.hasOwnProperty(b)) {
                        if (null == b)
                            var c = "null";
                        else
                            switch (b) {
                            case 0:
                                c = "A";
                                break;
                            case 1:
                                c = "B";
                                break;
                            case 2:
                                c = "X";
                                break;
                            case 3:
                                c = "Y";
                                break;
                            case 4:
                                c = "BACK";
                                break;
                            case 5:
                                c = "GUIDE";
                                break;
                            case 6:
                                c = "START";
                                break;
                            case 7:
                                c = "LEFT_STICK";
                                break;
                            case 8:
                                c = "RIGHT_STICK";
                                break;
                            case 9:
                                c = "LEFT_SHOULDER";
                                break;
                            case 10:
                                c = "RIGHT_SHOULDER";
                                break;
                            case 11:
                                c = "DPAD_UP";
                                break;
                            case 12:
                                c = "DPAD_DOWN";
                                break;
                            case 13:
                                c = "DPAD_LEFT";
                                break;
                            case 14:
                                c = "DPAD_RIGHT";
                                break;
                            default:
                                c = "UNKNOWN (" + b + ")"
                            }
                        c = new Ud(a,"BUTTON_" + c,0,1);
                        a.__button.h[b] = c;
                        a.__controls.push(c)
                    }
                    c = a.__button.h[b];
                    c.value = 1;
                    c.dispatchEvent(new ya("change"))
                }
            }
            ;
            Wa.__onGamepadButtonUp = function(a, b) {
                a = Wa.__getDevice(a);
                if (null != a && a.enabled) {
                    if (!a.__button.h.hasOwnProperty(b)) {
                        if (null == b)
                            var c = "null";
                        else
                            switch (b) {
                            case 0:
                                c = "A";
                                break;
                            case 1:
                                c = "B";
                                break;
                            case 2:
                                c = "X";
                                break;
                            case 3:
                                c = "Y";
                                break;
                            case 4:
                                c = "BACK";
                                break;
                            case 5:
                                c = "GUIDE";
                                break;
                            case 6:
                                c = "START";
                                break;
                            case 7:
                                c = "LEFT_STICK";
                                break;
                            case 8:
                                c = "RIGHT_STICK";
                                break;
                            case 9:
                                c = "LEFT_SHOULDER";
                                break;
                            case 10:
                                c = "RIGHT_SHOULDER";
                                break;
                            case 11:
                                c = "DPAD_UP";
                                break;
                            case 12:
                                c = "DPAD_DOWN";
                                break;
                            case 13:
                                c = "DPAD_LEFT";
                                break;
                            case 14:
                                c = "DPAD_RIGHT";
                                break;
                            default:
                                c = "UNKNOWN (" + b + ")"
                            }
                        c = new Ud(a,"BUTTON_" + c,0,1);
                        a.__button.h[b] = c;
                        a.__controls.push(c)
                    }
                    c = a.__button.h[b];
                    c.value = 0;
                    c.dispatchEvent(new ya("change"))
                }
            }
            ;
            Wa.__onGamepadConnect = function(a) {
                a = Wa.__getDevice(a);
                if (null != a)
                    for (var b = 0, c = Wa.__instances; b < c.length; ) {
                        var d = c[b];
                        ++b;
                        d.dispatchEvent(new Og("deviceAdded",!0,!1,a))
                    }
            }
            ;
            Wa.__onGamepadDisconnect = function(a) {
                var b = Wa.__devices.h[a.__id__];
                if (null != b) {
                    null != Wa.__devices.h.__keys__[a.__id__] && (Q.remove(Wa.__deviceList, Wa.__devices.h[a.__id__]),
                    Wa.__devices.remove(a));
                    Wa.numDevices = Wa.__deviceList.length;
                    a = 0;
                    for (var c = Wa.__instances; a < c.length; ) {
                        var d = c[a];
                        ++a;
                        d.dispatchEvent(new Og("deviceRemoved",!0,!1,b))
                    }
                }
            }
            ;
            Wa.__super__ = qa;
            Wa.prototype = v(qa.prototype, {
                addEventListener: function(a, b, c, d, f) {
                    null == f && (f = !1);
                    null == d && (d = 0);
                    null == c && (c = !1);
                    qa.prototype.addEventListener.call(this, a, b, c, d, f);
                    if ("deviceAdded" == a)
                        for (a = 0,
                        b = Wa.__deviceList; a < b.length; )
                            c = b[a],
                            ++a,
                            this.dispatchEvent(new Og("deviceAdded",!0,!1,c))
                },
                __class__: Wa
            });
            var Ud = function(a, b, c, d, f) {
                null == f && (f = 0);
                qa.call(this);
                this.device = a;
                this.id = b;
                this.minValue = c;
                this.maxValue = d;
                this.value = f
            };
            h["openfl.ui.GameInputControl"] = Ud;
            Ud.__name__ = "openfl.ui.GameInputControl";
            Ud.__super__ = qa;
            Ud.prototype = v(qa.prototype, {
                __class__: Ud
            });
            var Xk = function(a, b) {
                this.__controls = [];
                this.__button = new tc;
                this.__axis = new tc;
                this.id = a;
                this.name = b;
                a = new Ud(this,"AXIS_0",-1,1);
                this.__axis.h[0] = a;
                this.__controls.push(a);
                a = new Ud(this,"AXIS_1",-1,1);
                this.__axis.h[1] = a;
                this.__controls.push(a);
                a = new Ud(this,"AXIS_2",-1,1);
                this.__axis.h[2] = a;
                this.__controls.push(a);
                a = new Ud(this,"AXIS_3",-1,1);
                this.__axis.h[3] = a;
                this.__controls.push(a);
                a = new Ud(this,"AXIS_4",-1,1);
                this.__axis.h[4] = a;
                this.__controls.push(a);
                a = new Ud(this,"AXIS_5",-1,1);
                this.__axis.h[5] = a;
                this.__controls.push(a);
                for (b = 0; 15 > b; ) {
                    var c = b++;
                    a = new Ud(this,"BUTTON_" + c,0,1);
                    this.__button.h[c] = a;
                    this.__controls.push(a)
                }
            };
            h["openfl.ui.GameInputDevice"] = Xk;
            Xk.__name__ = "openfl.ui.GameInputDevice";
            Xk.prototype = {
                __class__: Xk
            };
            var ml = function() {};
            h["openfl.ui.Keyboard"] = ml;
            ml.__name__ = "openfl.ui.Keyboard";
            ml.__getCharCode = function(a, b) {
                null == b && (b = !1);
                if (b) {
                    switch (a) {
                    case 48:
                        return 41;
                    case 49:
                        return 33;
                    case 50:
                        return 64;
                    case 51:
                        return 35;
                    case 52:
                        return 36;
                    case 53:
                        return 37;
                    case 54:
                        return 94;
                    case 55:
                        return 38;
                    case 56:
                        return 42;
                    case 57:
                        return 40;
                    case 186:
                        return 58;
                    case 187:
                        return 43;
                    case 188:
                        return 60;
                    case 189:
                        return 95;
                    case 190:
                        return 62;
                    case 191:
                        return 63;
                    case 192:
                        return 126;
                    case 219:
                        return 123;
                    case 220:
                        return 124;
                    case 221:
                        return 125;
                    case 222:
                        return 34
                    }
                    if (65 <= a && 90 >= a)
                        return a - 65 + 65
                } else {
                    switch (a) {
                    case 8:
                        return 8;
                    case 9:
                        return 9;
                    case 13:
                        return 13;
                    case 27:
                        return 27;
                    case 32:
                        return 32;
                    case 186:
                        return 59;
                    case 187:
                        return 61;
                    case 188:
                        return 44;
                    case 189:
                        return 45;
                    case 190:
                        return 46;
                    case 191:
                        return 47;
                    case 192:
                        return 96;
                    case 219:
                        return 91;
                    case 220:
                        return 92;
                    case 221:
                        return 93;
                    case 222:
                        return 39
                    }
                    if (48 <= a && 57 >= a)
                        return a - 48 + 48;
                    if (65 <= a && 90 >= a)
                        return a - 65 + 97
                }
                if (96 <= a && 105 >= a)
                    return a - 96 + 48;
                switch (a) {
                case 8:
                    return 8;
                case 13:
                    return 13;
                case 46:
                    return 127;
                case 106:
                    return 42;
                case 107:
                    return 43;
                case 108:
                    return 44;
                case 110:
                    return 45;
                case 111:
                    return 46
                }
                return 0
            }
            ;
            var Jk = function() {};
            h["openfl.ui.Mouse"] = Jk;
            Jk.__name__ = "openfl.ui.Mouse";
            var Kl = {
                toLimeCursor: function(a) {
                    switch (a) {
                    case "arrow":
                        return ub.ARROW;
                    case "auto":
                        return ub.DEFAULT;
                    case "button":
                        return ub.POINTER;
                    case "crosshair":
                        return ub.CROSSHAIR;
                    case "custom":
                        return ub.CUSTOM;
                    case "hand":
                        return ub.MOVE;
                    case "ibeam":
                        return ub.TEXT;
                    case "resize_nesw":
                        return ub.RESIZE_NESW;
                    case "resize_ns":
                        return ub.RESIZE_NS;
                    case "resize_nwse":
                        return ub.RESIZE_NWSE;
                    case "resize_we":
                        return ub.RESIZE_WE;
                    case "wait":
                        return ub.WAIT;
                    case "waitarrow":
                        return ub.WAIT_ARROW;
                    default:
                        return ub.DEFAULT
                    }
                }
            }
              , na = function(a) {
                null == a && (a = !1);
                this.debugEnabled = a;
                na.initialized || na.init()
            };
            h["openfl.utils.AGALMiniAssembler"] = na;
            na.__name__ = "openfl.utils.AGALMiniAssembler";
            na.init = function() {
                na.initialized = !0;
                var a = na.OPMAP
                  , b = new qb("mov",2,0,0);
                a.h.mov = b;
                a = na.OPMAP;
                b = new qb("add",3,1,0);
                a.h.add = b;
                a = na.OPMAP;
                b = new qb("sub",3,2,0);
                a.h.sub = b;
                a = na.OPMAP;
                b = new qb("mul",3,3,0);
                a.h.mul = b;
                a = na.OPMAP;
                b = new qb("div",3,4,0);
                a.h.div = b;
                a = na.OPMAP;
                b = new qb("rcp",2,5,0);
                a.h.rcp = b;
                a = na.OPMAP;
                b = new qb("min",3,6,0);
                a.h.min = b;
                a = na.OPMAP;
                b = new qb("max",3,7,0);
                a.h.max = b;
                a = na.OPMAP;
                b = new qb("frc",2,8,0);
                a.h.frc = b;
                a = na.OPMAP;
                b = new qb("sqt",2,9,0);
                a.h.sqt = b;
                a = na.OPMAP;
                b = new qb("rsq",2,10,0);
                a.h.rsq = b;
                a = na.OPMAP;
                b = new qb("pow",3,11,0);
                a.h.pow = b;
                a = na.OPMAP;
                b = new qb("log",2,12,0);
                a.h.log = b;
                a = na.OPMAP;
                b = new qb("exp",2,13,0);
                a.h.exp = b;
                a = na.OPMAP;
                b = new qb("nrm",2,14,0);
                a.h.nrm = b;
                a = na.OPMAP;
                b = new qb("sin",2,15,0);
                a.h.sin = b;
                a = na.OPMAP;
                b = new qb("cos",2,16,0);
                a.h.cos = b;
                a = na.OPMAP;
                b = new qb("crs",3,17,0);
                a.h.crs = b;
                a = na.OPMAP;
                b = new qb("dp3",3,18,0);
                a.h.dp3 = b;
                a = na.OPMAP;
                b = new qb("dp4",3,19,0);
                a.h.dp4 = b;
                a = na.OPMAP;
                b = new qb("abs",2,20,0);
                a.h.abs = b;
                a = na.OPMAP;
                b = new qb("neg",2,21,0);
                a.h.neg = b;
                a = na.OPMAP;
                b = new qb("sat",2,22,0);
                a.h.sat = b;
                a = na.OPMAP;
                b = new qb("m33",3,23,16);
                a.h.m33 = b;
                a = na.OPMAP;
                b = new qb("m44",3,24,16);
                a.h.m44 = b;
                a = na.OPMAP;
                b = new qb("m34",3,25,16);
                a.h.m34 = b;
                a = na.OPMAP;
                b = new qb("ddx",2,26,288);
                a.h.ddx = b;
                a = na.OPMAP;
                b = new qb("ddy",2,27,288);
                a.h.ddy = b;
                a = na.OPMAP;
                b = new qb("ife",2,28,897);
                a.h.ife = b;
                a = na.OPMAP;
                b = new qb("ine",2,29,897);
                a.h.ine = b;
                a = na.OPMAP;
                b = new qb("ifg",2,30,897);
                a.h.ifg = b;
                a = na.OPMAP;
                b = new qb("ifl",2,31,897);
                a.h.ifl = b;
                a = na.OPMAP;
                b = new qb("els",0,32,1921);
                a.h.els = b;
                a = na.OPMAP;
                b = new qb("eif",0,33,1409);
                a.h.eif = b;
                a = na.OPMAP;
                b = new qb("kil",1,39,160);
                a.h.kil = b;
                a = na.OPMAP;
                b = new qb("tex",3,40,40);
                a.h.tex = b;
                a = na.OPMAP;
                b = new qb("sge",3,41,0);
                a.h.sge = b;
                a = na.OPMAP;
                b = new qb("slt",3,42,0);
                a.h.slt = b;
                a = na.OPMAP;
                b = new qb("sgn",2,43,0);
                a.h.sgn = b;
                a = na.OPMAP;
                b = new qb("seq",3,44,0);
                a.h.seq = b;
                a = na.OPMAP;
                b = new qb("sne",3,45,0);
                a.h.sne = b;
                a = na.SAMPLEMAP;
                b = new Wb("rgba",8,0);
                a.h.rgba = b;
                a = na.SAMPLEMAP;
                b = new Wb("compressed",8,1);
                a.h.compressed = b;
                a = na.SAMPLEMAP;
                b = new Wb("compressedalpha",8,2);
                a.h.compressedalpha = b;
                a = na.SAMPLEMAP;
                b = new Wb("dxt1",8,1);
                a.h.dxt1 = b;
                a = na.SAMPLEMAP;
                b = new Wb("dxt5",8,2);
                a.h.dxt5 = b;
                a = na.SAMPLEMAP;
                b = new Wb("video",8,3);
                a.h.video = b;
                a = na.SAMPLEMAP;
                b = new Wb("2d",12,0);
                a.h["2d"] = b;
                a = na.SAMPLEMAP;
                b = new Wb("3d",12,2);
                a.h["3d"] = b;
                a = na.SAMPLEMAP;
                b = new Wb("cube",12,1);
                a.h.cube = b;
                a = na.SAMPLEMAP;
                b = new Wb("mipnearest",24,1);
                a.h.mipnearest = b;
                a = na.SAMPLEMAP;
                b = new Wb("miplinear",24,2);
                a.h.miplinear = b;
                a = na.SAMPLEMAP;
                b = new Wb("mipnone",24,0);
                a.h.mipnone = b;
                a = na.SAMPLEMAP;
                b = new Wb("nomip",24,0);
                a.h.nomip = b;
                a = na.SAMPLEMAP;
                b = new Wb("nearest",28,0);
                a.h.nearest = b;
                a = na.SAMPLEMAP;
                b = new Wb("linear",28,1);
                a.h.linear = b;
                a = na.SAMPLEMAP;
                b = new Wb("anisotropic2x",28,2);
                a.h.anisotropic2x = b;
                a = na.SAMPLEMAP;
                b = new Wb("anisotropic4x",28,3);
                a.h.anisotropic4x = b;
                a = na.SAMPLEMAP;
                b = new Wb("anisotropic8x",28,4);
                a.h.anisotropic8x = b;
                a = na.SAMPLEMAP;
                b = new Wb("anisotropic16x",28,5);
                a.h.anisotropic16x = b;
                a = na.SAMPLEMAP;
                b = new Wb("centroid",16,1);
                a.h.centroid = b;
                a = na.SAMPLEMAP;
                b = new Wb("single",16,2);
                a.h.single = b;
                a = na.SAMPLEMAP;
                b = new Wb("ignoresampler",16,4);
                a.h.ignoresampler = b;
                a = na.SAMPLEMAP;
                b = new Wb("repeat",20,1);
                a.h.repeat = b;
                a = na.SAMPLEMAP;
                b = new Wb("wrap",20,1);
                a.h.wrap = b;
                a = na.SAMPLEMAP;
                b = new Wb("clamp",20,0);
                a.h.clamp = b;
                a = na.SAMPLEMAP;
                b = new Wb("clamp_u_repeat_v",20,2);
                a.h.clamp_u_repeat_v = b;
                a = na.SAMPLEMAP;
                b = new Wb("repeat_u_clamp_v",20,3);
                a.h.repeat_u_clamp_v = b
            }
            ;
            na.prototype = {
                assemble: function(a, b, c, d) {
                    null == d && (d = !1);
                    null == c && (c = 1);
                    var f = Sa.getTimer();
                    this.agalcode = new Wc(0);
                    this.error = "";
                    var g = !1;
                    "fragment" == a ? g = !0 : "vertex" != a && (this.error = 'ERROR: mode needs to be "fragment" or "vertex" but is "' + a + '".');
                    this.agalcode.__endian = 1;
                    this.agalcode.writeByte(160);
                    this.agalcode.writeUnsignedInt(c);
                    this.agalcode.writeByte(161);
                    this.agalcode.writeByte(g ? 1 : 0);
                    this.initregmap(c, d);
                    a = P.replace(b, "\r", "\n").split("\n");
                    b = 0;
                    d = a.length;
                    for (var k = new Ta("<.*>","g"), l = new Ta("([\\w\\.\\-\\+]+)","gi"), h = new Ta("^\\w{3}","ig"), u = new Ta("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?","gi"), w = new Ta("\\[.*\\]","ig"), n = new Ta("^\\b[A-Za-z]{1,3}","ig"), r = new Ta("\\d+",""), C = new Ta("(\\.[xyzw]{1,4})",""), x = new Ta("[A-Za-z]{1,3}","ig"), m = new Ta("(\\.[xyzw]{1,1})",""), z = new Ta("\\+\\d{1,3}","ig"), K = 0; K < d && "" == this.error; ) {
                        var A = P.trim(a[K])
                          , I = A.indexOf("//");
                        -1 != I && (A = Q.substr(A, 0, I));
                        var B = k.match(A) ? k.matchedPos().pos : -1;
                        I = null;
                        -1 != B && (I = this.match(Q.substr(A, B, null), l),
                        A = Q.substr(A, 0, B));
                        var t = null;
                        h.match(A) && (B = h.matched(0),
                        t = na.OPMAP.h[B]);
                        if (null == t)
                            3 <= A.length && Ja.warn("warning: bad line " + K + ": " + a[K], {
                                fileName: "openfl/utils/AGALMiniAssembler.hx",
                                lineNumber: 262,
                                className: "openfl.utils.AGALMiniAssembler",
                                methodName: "assemble"
                            });
                        else if (this.debugEnabled && Ja.info(t, {
                            fileName: "openfl/utils/AGALMiniAssembler.hx",
                            lineNumber: 272,
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        }),
                        null == t)
                            3 <= A.length && Ja.warn("warning: bad line " + K + ": " + a[K], {
                                fileName: "openfl/utils/AGALMiniAssembler.hx",
                                lineNumber: 279,
                                className: "openfl.utils.AGALMiniAssembler",
                                methodName: "assemble"
                            });
                        else {
                            A = Q.substr(A, A.indexOf(t.name) + t.name.length, null);
                            if (0 != (t.flags & 256) && 2 > c) {
                                this.error = "error: opcode requires version 2.";
                                break
                            }
                            if (0 != (t.flags & 64) && g) {
                                this.error = "error: opcode is only allowed in vertex programs.";
                                break
                            }
                            if (0 != (t.flags & 32) && !g) {
                                this.error = "error: opcode is only allowed in fragment programs.";
                                break
                            }
                            this.verbose && Ja.info("emit opcode=" + G.string(t), {
                                fileName: "openfl/utils/AGALMiniAssembler.hx",
                                lineNumber: 308,
                                className: "openfl.utils.AGALMiniAssembler",
                                methodName: "assemble"
                            });
                            this.agalcode.writeUnsignedInt(t.emitCode);
                            ++b;
                            if (4096 < b) {
                                this.error = "error: too many opcodes. maximum is 4096.";
                                break
                            }
                            var N = this.match(A, u);
                            if (N.length != t.numRegister) {
                                this.error = "error: wrong number of operands. found " + N.length + " but expected " + t.numRegister + ".";
                                break
                            }
                            var D = !1
                              , v = 160;
                            A = 0;
                            for (B = N.length; A < B; ) {
                                var E = A++
                                  , wa = !1
                                  , J = this.match(N[E], w);
                                0 < J.length && (N[E] = P.replace(N[E], J[0], "0"),
                                this.verbose && Ja.info("IS REL", {
                                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                                    lineNumber: 344,
                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                }),
                                wa = !0);
                                var M = this.match(N[E], n);
                                if (0 == M.length) {
                                    this.error = "error: could not parse operand " + E + " (" + N[E] + ").";
                                    D = !0;
                                    break
                                }
                                var pb = na.REGMAP.h[M[0]];
                                this.debugEnabled && Ja.info(pb, {
                                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                                    lineNumber: 363,
                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                });
                                if (null == pb) {
                                    this.error = "error: could not find register name for operand " + E + " (" + N[E] + ").";
                                    D = !0;
                                    break
                                }
                                if (g) {
                                    if (0 == (pb.flags & 32)) {
                                        this.error = "error: register operand " + E + " (" + N[E] + ") only allowed in vertex programs.";
                                        D = !0;
                                        break
                                    }
                                    if (wa) {
                                        this.error = "error: register operand " + E + " (" + N[E] + ") relative adressing not allowed in fragment programs.";
                                        D = !0;
                                        break
                                    }
                                } else if (0 == (pb.flags & 64)) {
                                    this.error = "error: register operand " + E + " (" + N[E] + ") only allowed in fragment programs.";
                                    D = !0;
                                    break
                                }
                                N[E] = Q.substr(N[E], N[E].indexOf(pb.name) + pb.name.length, null);
                                var ob = wa ? this.match(J[0], r) : this.match(N[E], r);
                                M = 0;
                                0 < ob.length && (M = G.parseInt(ob[0]));
                                if (ab.gt(M, pb.range)) {
                                    A = pb.range + 1;
                                    this.error = "error: register operand " + E + " (" + N[E] + ") index exceeds limit of " + (null == A ? "null" : G.string(ab.toFloat(A))) + ".";
                                    D = !0;
                                    break
                                }
                                var va = this.match(N[E], C)
                                  , y = 0 == E && 0 == (t.flags & 128)
                                  , ma = 2 == E && 0 != (t.flags & 8)
                                  , F = 0
                                  , da = 0
                                  , Ya = 0;
                                if (y && wa) {
                                    this.error = "error: relative can not be destination";
                                    D = !0;
                                    break
                                }
                                if (0 < va.length) {
                                    for (var V = ob = 0, R = va[0].length, L = 1; L < R; )
                                        V = Q.cca(va[0], L) - 120,
                                        ab.gt(V, 2) && (V = 3),
                                        ob = y ? ob | 1 << V : ob | V << (L - 1 << 1),
                                        ++L;
                                    if (!y)
                                        for (; 4 >= L; )
                                            ob |= V << (L - 1 << 1),
                                            ++L
                                } else
                                    ob = y ? 15 : 228;
                                if (wa) {
                                    va = this.match(J[0], x);
                                    F = na.REGMAP.h[va[0]];
                                    if (null == F) {
                                        this.error = "error: bad index register";
                                        D = !0;
                                        break
                                    }
                                    F = F.emitCode;
                                    V = this.match(J[0], m);
                                    if (0 == V.length) {
                                        this.error = "error: bad index register select";
                                        D = !0;
                                        break
                                    }
                                    da = Q.cca(V[0], 1) - 120;
                                    ab.gt(da, 2) && (da = 3);
                                    J = this.match(J[0], z);
                                    0 < J.length && (Ya = G.parseInt(J[0]));
                                    if (0 > Ya || 255 < Ya) {
                                        this.error = "error: index offset " + Ya + " out of bounds. [0..255]";
                                        D = !0;
                                        break
                                    }
                                    this.verbose && Ja.info("RELATIVE: type=" + F + "==" + va[0] + " sel=" + (null == da ? "null" : G.string(ab.toFloat(da))) + "==" + V[0] + " idx=" + (null == M ? "null" : G.string(ab.toFloat(M))) + " offset=" + Ya, {
                                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                                        lineNumber: 518,
                                        className: "openfl.utils.AGALMiniAssembler",
                                        methodName: "assemble"
                                    })
                                }
                                this.verbose && Ja.info("  emit argcode=" + G.string(pb) + "[" + (null == M ? "null" : G.string(ab.toFloat(M))) + "][" + ob + "]", {
                                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                                    lineNumber: 525,
                                    className: "openfl.utils.AGALMiniAssembler",
                                    methodName: "assemble"
                                });
                                if (y)
                                    this.agalcode.writeShort(M),
                                    this.agalcode.writeByte(ob),
                                    this.agalcode.writeByte(pb.emitCode),
                                    v -= 32;
                                else {
                                    if (ma) {
                                        this.verbose && Ja.info("  emit sampler", {
                                            fileName: "openfl/utils/AGALMiniAssembler.hx",
                                            lineNumber: 541,
                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        });
                                        E = 5;
                                        J = wa = 0;
                                        for (pb = null == I ? 0 : I.length; J < pb; )
                                            ob = J++,
                                            this.verbose && Ja.info("    opt: " + I[ob], {
                                                fileName: "openfl/utils/AGALMiniAssembler.hx",
                                                lineNumber: 552,
                                                className: "openfl.utils.AGALMiniAssembler",
                                                methodName: "assemble"
                                            }),
                                            y = na.SAMPLEMAP.h[I[ob]],
                                            null == y ? (wa = parseFloat(I[ob]),
                                            this.verbose && Ja.info("    bias: " + wa, {
                                                fileName: "openfl/utils/AGALMiniAssembler.hx",
                                                lineNumber: 565,
                                                className: "openfl.utils.AGALMiniAssembler",
                                                methodName: "assemble"
                                            })) : (16 != y.flag && (E &= ~(15 << y.flag)),
                                            E |= y.mask << y.flag);
                                        this.agalcode.writeShort(M);
                                        this.agalcode.writeByte(8 * wa | 0);
                                        this.agalcode.writeByte(0);
                                        this.agalcode.writeUnsignedInt(E);
                                        this.verbose && Ja.info("    bits: " + (E - 5), {
                                            fileName: "openfl/utils/AGALMiniAssembler.hx",
                                            lineNumber: 586,
                                            className: "openfl.utils.AGALMiniAssembler",
                                            methodName: "assemble"
                                        })
                                    } else
                                        0 == E && (this.agalcode.writeUnsignedInt(0),
                                        v -= 32),
                                        this.agalcode.writeShort(M),
                                        this.agalcode.writeByte(Ya),
                                        this.agalcode.writeByte(ob),
                                        this.agalcode.writeByte(pb.emitCode),
                                        this.agalcode.writeByte(F),
                                        this.agalcode.writeShort(wa ? da | 32768 : 0);
                                    v -= 64
                                }
                            }
                            for (A = 0; A < v; )
                                this.agalcode.writeByte(0),
                                A += 8;
                            if (D)
                                break
                        }
                        ++K
                    }
                    "" != this.error && (this.error += "\n  at line " + K + " " + a[K],
                    Kd.set_length(this.agalcode, 0),
                    Ja.info(this.error, {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 631,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                    }));
                    if (this.debugEnabled) {
                        c = "generated bytecode:";
                        g = Kd.get_length(this.agalcode);
                        A = 0;
                        for (B = g; A < B; )
                            g = A++,
                            0 == g % 16 && (c += "\n"),
                            0 == g % 4 && (c += " "),
                            g = P.hex(this.agalcode.b[g], 2),
                            2 > g.length && (g = "0" + g),
                            c += g;
                        Ja.info(c, {
                            fileName: "openfl/utils/AGALMiniAssembler.hx",
                            lineNumber: 662,
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                        })
                    }
                    this.verbose && Ja.info("AGALMiniAssembler.assemble time: " + (Sa.getTimer() - f) / 1E3 + "s", {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 667,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                    });
                    return this.agalcode
                },
                initregmap: function(a, b) {
                    var c = na.REGMAP
                      , d = new Fd("va","vertex attribute",0,b ? 1024 : 1 == a || 2 == a ? 7 : 15,66);
                    c.h.va = d;
                    c = na.REGMAP;
                    d = new Fd("vc","vertex constant",1,b ? 1024 : 1 == a ? 127 : 249,66);
                    c.h.vc = d;
                    c = na.REGMAP;
                    d = new Fd("vt","vertex temporary",2,b ? 1024 : 1 == a ? 7 : 25,67);
                    c.h.vt = d;
                    c = na.REGMAP;
                    d = new Fd("vo","vertex output",3,b ? 1024 : 0,65);
                    c.h.vo = d;
                    c = na.REGMAP;
                    d = new Fd("vi","varying",4,b ? 1024 : 1 == a ? 7 : 9,99);
                    c.h.vi = d;
                    c = na.REGMAP;
                    d = new Fd("fc","fragment constant",1,b ? 1024 : 1 == a ? 27 : 2 == a ? 63 : 199,34);
                    c.h.fc = d;
                    c = na.REGMAP;
                    d = new Fd("ft","fragment temporary",2,b ? 1024 : 1 == a ? 7 : 25,35);
                    c.h.ft = d;
                    c = na.REGMAP;
                    d = new Fd("fs","texture sampler",5,b ? 1024 : 7,34);
                    c.h.fs = d;
                    c = na.REGMAP;
                    d = new Fd("fo","fragment output",3,b ? 1024 : 1 == a ? 0 : 3,33);
                    c.h.fo = d;
                    c = na.REGMAP;
                    d = new Fd("fd","fragment depth output",6,b ? 1024 : 1 == a ? -1 : 0,33);
                    c.h.fd = d;
                    c = na.REGMAP;
                    d = new Fd("iid","instance id",7,b ? 1024 : 0,66);
                    c.h.iid = d;
                    d = na.REGMAP.h.vo;
                    na.REGMAP.h.op = d;
                    d = na.REGMAP.h.vi;
                    na.REGMAP.h.i = d;
                    d = na.REGMAP.h.vi;
                    na.REGMAP.h.v = d;
                    d = na.REGMAP.h.fo;
                    na.REGMAP.h.oc = d;
                    d = na.REGMAP.h.fd;
                    na.REGMAP.h.od = d;
                    d = na.REGMAP.h.vi;
                    na.REGMAP.h.fi = d
                },
                match: function(a, b) {
                    for (var c = [], d = 0; b.matchSub(a, d); )
                        d = b.matched(0),
                        c.push(d),
                        d = b.matchedPos().pos + d.length;
                    return c
                },
                __class__: na
            };
            var qb = function(a, b, c, d) {
                this.name = a;
                this.numRegister = b;
                this.emitCode = c;
                this.flags = d
            };
            h["openfl.utils._AGALMiniAssembler.OpCode"] = qb;
            qb.__name__ = "openfl.utils._AGALMiniAssembler.OpCode";
            qb.prototype = {
                toString: function() {
                    return '[OpCode name="' + this.name + '", numRegister=' + this.numRegister + ", emitCode=" + this.emitCode + ", flags=" + this.flags + "]"
                },
                __class__: qb
            };
            var Fd = function(a, b, c, d, f) {
                this.name = a;
                this.longName = b;
                this.emitCode = c;
                this.range = d;
                this.flags = f
            };
            h["openfl.utils._AGALMiniAssembler.Register"] = Fd;
            Fd.__name__ = "openfl.utils._AGALMiniAssembler.Register";
            Fd.prototype = {
                toString: function() {
                    return '[Register name="' + this.name + '", longName="' + this.longName + '", emitCode=' + (null == this.emitCode ? "null" : G.string(ab.toFloat(this.emitCode))) + ", range=" + (null == this.range ? "null" : G.string(ab.toFloat(this.range))) + ", flags=" + (null == this.flags ? "null" : G.string(ab.toFloat(this.flags))) + "]"
                },
                __class__: Fd
            };
            var Wb = function(a, b, c) {
                this.name = a;
                this.flag = b;
                this.mask = c
            };
            h["openfl.utils._AGALMiniAssembler.Sampler"] = Wb;
            Wb.__name__ = "openfl.utils._AGALMiniAssembler.Sampler";
            Wb.prototype = {
                __class__: Wb
            };
            var Kj = function() {};
            h["openfl.utils.IAssetCache"] = Kj;
            Kj.__name__ = "openfl.utils.IAssetCache";
            Kj.__isInterface__ = !0;
            Kj.prototype = {
                __class__: Kj,
                __properties__: {
                    get_enabled: "get_enabled"
                }
            };
            var Lj = function() {
                this.__enabled = !0;
                this.bitmapData = new Ia;
                this.font = new Ia;
                this.sound = new Ia
            };
            h["openfl.utils.AssetCache"] = Lj;
            Lj.__name__ = "openfl.utils.AssetCache";
            Lj.__interfaces__ = [Kj];
            Lj.prototype = {
                getFont: function(a) {
                    return this.font.h[a]
                },
                hasFont: function(a) {
                    return Object.prototype.hasOwnProperty.call(this.font.h, a)
                },
                setFont: function(a, b) {
                    this.font.h[a] = b
                },
                get_enabled: function() {
                    return this.__enabled
                },
                __class__: Lj,
                __properties__: {
                    get_enabled: "get_enabled"
                }
            };
            var jf = function() {
                Ob.call(this)
            };
            h["openfl.utils.AssetLibrary"] = jf;
            jf.__name__ = "openfl.utils.AssetLibrary";
            jf.fromBundle = function(a) {
                a = Ob.fromBundle(a);
                if (null != a) {
                    if (a instanceof jf)
                        return a;
                    var b = new jf;
                    b.__proxy = a;
                    return b
                }
                return null
            }
            ;
            jf.fromManifest = function(a) {
                a = Ob.fromManifest(a);
                if (null != a) {
                    if (a instanceof jf)
                        return a;
                    var b = new jf;
                    b.__proxy = a;
                    return b
                }
                return null
            }
            ;
            jf.__super__ = Ob;
            jf.prototype = v(Ob.prototype, {
                bind: function(a, b) {
                    return !1
                },
                exists: function(a, b) {
                    return null != this.__proxy ? this.__proxy.exists(a, b) : Ob.prototype.exists.call(this, a, b)
                },
                getAsset: function(a, b) {
                    return null != this.__proxy ? this.__proxy.getAsset(a, b) : Ob.prototype.getAsset.call(this, a, b)
                },
                getAudioBuffer: function(a) {
                    return null != this.__proxy ? this.__proxy.getAudioBuffer(a) : Ob.prototype.getAudioBuffer.call(this, a)
                },
                getBytes: function(a) {
                    return null != this.__proxy ? this.__proxy.getBytes(a) : Ob.prototype.getBytes.call(this, a)
                },
                getFont: function(a) {
                    return null != this.__proxy ? this.__proxy.getFont(a) : Ob.prototype.getFont.call(this, a)
                },
                getImage: function(a) {
                    return null != this.__proxy ? this.__proxy.getImage(a) : Ob.prototype.getImage.call(this, a)
                },
                getPath: function(a) {
                    return null != this.__proxy ? this.__proxy.getPath(a) : Ob.prototype.getPath.call(this, a)
                },
                getText: function(a) {
                    return null != this.__proxy ? this.__proxy.getText(a) : Ob.prototype.getText.call(this, a)
                },
                isLocal: function(a, b) {
                    return null != this.__proxy ? this.__proxy.isLocal(a, b) : Ob.prototype.isLocal.call(this, a, b)
                },
                load: function() {
                    return null != this.__proxy ? this.__proxy.load() : Ob.prototype.load.call(this)
                },
                loadAudioBuffer: function(a) {
                    return null != this.__proxy ? this.__proxy.loadAudioBuffer(a) : Ob.prototype.loadAudioBuffer.call(this, a)
                },
                loadBytes: function(a) {
                    return null != this.__proxy ? this.__proxy.loadBytes(a) : Ob.prototype.loadBytes.call(this, a)
                },
                loadFont: function(a) {
                    return null != this.__proxy ? this.__proxy.loadFont(a) : Ob.prototype.loadFont.call(this, a)
                },
                loadImage: function(a) {
                    return null != this.__proxy ? this.__proxy.loadImage(a) : Ob.prototype.loadImage.call(this, a)
                },
                loadText: function(a) {
                    return null != this.__proxy ? this.__proxy.loadText(a) : Ob.prototype.loadText.call(this, a)
                },
                unload: function() {
                    null != this.__proxy ? this.__proxy.unload() : Ob.prototype.unload.call(this)
                },
                __class__: jf
            });
            var Rb = function() {};
            h["openfl.utils.Assets"] = Rb;
            Rb.__name__ = "openfl.utils.Assets";
            Rb.exists = function(a, b) {
                return Ha.exists(a, b)
            }
            ;
            Rb.getFont = function(a, b) {
                null == b && (b = !0);
                if (b && Rb.cache.get_enabled() && Rb.cache.hasFont(a))
                    return Rb.cache.getFont(a);
                var c = Ha.getFont(a, !1);
                if (null != c) {
                    var d = new ka;
                    d.__fromLimeFont(c);
                    b && Rb.cache.get_enabled() && Rb.cache.setFont(a, d);
                    return d
                }
                return new ka
            }
            ;
            Rb.getText = function(a) {
                return Ha.getText(a)
            }
            ;
            var Kd = {
                __properties__: {
                    set_length: "set_length",
                    get_length: "get_length"
                },
                fromArrayBuffer: function(a) {
                    return null == a ? null : Wc.fromBytes(xb.ofData(a))
                },
                fromBytes: function(a) {
                    return null == a ? null : a instanceof Wc ? a : Wc.fromBytes(a)
                },
                toArrayBuffer: function(a) {
                    return a.b.bufferValue
                },
                toBytes: function(a) {
                    return a
                },
                get_length: function(a) {
                    return null == a ? 0 : a.length
                },
                set_length: function(a, b) {
                    0 <= b && (a.__resize(b),
                    b < a.position && (a.position = b));
                    return a.length = b
                }
            }
              , pl = function() {};
            h["openfl.utils.IDataOutput"] = pl;
            pl.__name__ = "openfl.utils.IDataOutput";
            pl.__isInterface__ = !0;
            var ql = function() {};
            h["openfl.utils.IDataInput"] = ql;
            ql.__name__ = "openfl.utils.IDataInput";
            ql.__isInterface__ = !0;
            var Wc = function(a) {
                null == a && (a = 0);
                var b = new xb(new ArrayBuffer(a));
                xb.call(this, b.b.buffer);
                this.__allocated = a;
                null == Wc.__defaultEndian && (Dc.get_endianness() == bg.LITTLE_ENDIAN ? Wc.__defaultEndian = 1 : Wc.__defaultEndian = 0);
                this.__endian = Wc.__defaultEndian;
                this.objectEncoding = Wc.defaultObjectEncoding;
                this.position = 0
            };
            h["openfl.utils.ByteArrayData"] = Wc;
            Wc.__name__ = "openfl.utils.ByteArrayData";
            Wc.__interfaces__ = [pl, ql];
            Wc.fromBytes = function(a) {
                var b = new Wc;
                b.__fromBytes(a);
                return b
            }
            ;
            Wc.__super__ = xb;
            Wc.prototype = v(xb.prototype, {
                readByte: function() {
                    var a = this.readUnsignedByte();
                    return 0 != (a & 128) ? a - 256 : a
                },
                readInt: function() {
                    var a = this.readUnsignedByte()
                      , b = this.readUnsignedByte()
                      , c = this.readUnsignedByte()
                      , d = this.readUnsignedByte();
                    return 1 == this.__endian ? d << 24 | c << 16 | b << 8 | a : a << 24 | b << 16 | c << 8 | d
                },
                readUnsignedByte: function() {
                    if (this.position < this.length)
                        return this.b[this.position++];
                    throw new Eh;
                },
                readUnsignedInt: function() {
                    var a = this.readUnsignedByte()
                      , b = this.readUnsignedByte()
                      , c = this.readUnsignedByte()
                      , d = this.readUnsignedByte();
                    return 1 == this.__endian ? d << 24 | c << 16 | b << 8 | a : a << 24 | b << 16 | c << 8 | d
                },
                readUnsignedShort: function() {
                    var a = this.readUnsignedByte()
                      , b = this.readUnsignedByte();
                    return 1 == this.__endian ? (b << 8) + a : a << 8 | b
                },
                readUTF: function() {
                    var a = this.readUnsignedShort();
                    return this.readUTFBytes(a)
                },
                readUTFBytes: function(a) {
                    if (this.position + a > this.length)
                        throw new Eh;
                    this.position += a;
                    return this.getString(this.position - a, a)
                },
                writeByte: function(a) {
                    this.__resize(this.position + 1);
                    this.b[this.position++] = a & 255
                },
                writeBytes: function(a, b, c) {
                    null == c && (c = 0);
                    null == b && (b = 0);
                    0 != Kd.get_length(a) && (0 == c && (c = Kd.get_length(a) - b),
                    this.__resize(this.position + c),
                    this.blit(this.position, a, b, c),
                    this.position += c)
                },
                writeInt: function(a) {
                    this.__resize(this.position + 4);
                    1 == this.__endian ? (this.b[this.position++] = a & 255,
                    this.b[this.position++] = a >> 8 & 255,
                    this.b[this.position++] = a >> 16 & 255,
                    this.b[this.position++] = a >> 24 & 255) : (this.b[this.position++] = a >> 24 & 255,
                    this.b[this.position++] = a >> 16 & 255,
                    this.b[this.position++] = a >> 8 & 255,
                    this.b[this.position++] = a & 255)
                },
                writeShort: function(a) {
                    this.__resize(this.position + 2);
                    1 == this.__endian ? (this.b[this.position++] = a & 255,
                    this.b[this.position++] = a >> 8 & 255) : (this.b[this.position++] = a >> 8 & 255,
                    this.b[this.position++] = a & 255)
                },
                writeUnsignedInt: function(a) {
                    this.writeInt(a)
                },
                __fromBytes: function(a) {
                    this.b = a.b;
                    this.__allocated = a.length;
                    this.data = a.data;
                    this.length = a.length
                },
                __resize: function(a) {
                    if (a > this.__allocated) {
                        var b = new xb(new ArrayBuffer(3 * (a + 1) >> 1));
                        if (0 < this.__allocated) {
                            var c = this.length;
                            this.length = this.__allocated;
                            b.blit(0, this, 0, this.__allocated);
                            this.length = c
                        }
                        this.b = b.b;
                        this.__allocated = b.length;
                        this.data = b.data
                    }
                    this.length < a && (this.length = a)
                },
                __class__: Wc
            });
            var ee = {
                __get: function(a, b) {
                    if (null == a || null == b)
                        return null;
                    if (Object.prototype.hasOwnProperty.call(a, b))
                        return Aa.field(a, b);
                    if (a instanceof hb) {
                        var c = a.getChildByName(b);
                        if (null != c)
                            return c
                    }
                    return Aa.getProperty(a, b)
                },
                __eq: function(a, b) {
                    return a == b
                }
            }
              , Mj = function() {};
            h["haxe.lang.Iterator"] = Mj;
            Mj.__name__ = "haxe.lang.Iterator";
            Mj.__isInterface__ = !0;
            Mj.prototype = {
                __class__: Mj
            };
            var Nj = function() {};
            h["haxe.lang.Iterable"] = Nj;
            Nj.__name__ = "haxe.lang.Iterable";
            Nj.__isInterface__ = !0;
            Nj.prototype = {
                __class__: Nj
            };
            var Fi = function(a, b) {
                null == b && (b = 0);
                if (isNaN(a) || 0 > a)
                    throw new dc("The delay specified is negative or not a finite number");
                qa.call(this);
                this.__delay = a;
                this.__repeatCount = b;
                this.running = !1;
                this.currentCount = 0
            };
            h["openfl.utils.Timer"] = Fi;
            Fi.__name__ = "openfl.utils.Timer";
            Fi.__super__ = qa;
            Fi.prototype = v(qa.prototype, {
                start: function() {
                    this.running || (this.running = !0,
                    this.__timerID = window.setInterval(m(this, this.timer_onTimer), this.__delay | 0))
                },
                stop: function() {
                    this.running = !1;
                    null != this.__timerID && (window.clearInterval(this.__timerID),
                    this.__timerID = null)
                },
                __handleUpdateAfterEvent: function() {
                    null != Sa.get_current() && null != Sa.get_current().stage && Sa.get_current().stage.__renderAfterEvent()
                },
                timer_onTimer: function() {
                    this.currentCount++;
                    if (0 < this.__repeatCount && this.currentCount >= this.__repeatCount) {
                        this.stop();
                        var a = new Qg("timer");
                        this.dispatchEvent(a);
                        a.__updateAfterEventFlag && this.__handleUpdateAfterEvent();
                        a = new Qg("timerComplete")
                    } else
                        a = new Qg("timer");
                    this.dispatchEvent(a);
                    a.__updateAfterEventFlag && this.__handleUpdateAfterEvent()
                },
                __class__: Fi
            });
            var Ec = function() {};
            h["openfl.utils._internal.Lib"] = Ec;
            Ec.__name__ = "openfl.utils._internal.Lib";
            var jg = function() {
                this.rollOutStack = []
            };
            h["openfl.utils._internal.TouchData"] = jg;
            jg.__name__ = "openfl.utils._internal.TouchData";
            jg.prototype = {
                reset: function() {
                    this.touchOverTarget = this.touchDownTarget = this.touch = null;
                    this.rollOutStack.splice(0, this.rollOutStack.length)
                },
                __class__: jg
            };
            y.$haxeUID |= 0;
            "undefined" != typeof performance && "function" == typeof performance.now && (Q.now = performance.now.bind(performance));
            h.Math = Math;
            null == String.fromCodePoint && (String.fromCodePoint = function(a) {
                return 65536 > a ? String.fromCharCode(a) : String.fromCharCode((a >> 10) + 55232) + String.fromCharCode((a & 1023) + 56320)
            }
            );
            Object.defineProperty(String.prototype, "__class__", {
                value: h.String = String,
                enumerable: !1,
                writable: !0
            });
            String.__name__ = "String";
            h.Array = Array;
            Array.__name__ = "Array";
            Date.prototype.__class__ = h.Date = Date;
            Date.__name__ = "Date";
            var sl = {}
              , El = {}
              , Fl = Number
              , Dl = Boolean
              , ul = {}
              , vl = {};
            xa.__toStr = {}.toString;
            "undefined" == typeof window && (y.onmessage = function(a) {
                a = a.data;
                try {
                    y.onmessage = (D = ud.__current,
                    m(D, D.dispatchMessage)),
                    Cl.toFunction(a)()
                } catch (b) {
                    Ua.lastError = b,
                    ud.__current.destroy()
                }
            }
            );
            vd.NIL = new vd(null,null);
            R.__alpha16 = new Uint32Array(256);
            for (var Tg = 0; 256 > Tg; ) {
                var Hh = Tg++;
                R.__alpha16[Hh] = Math.ceil(257.00392156862745 * Hh)
            }
            R.__clamp = new Uint8Array(511);
            for (Tg = 0; 255 > Tg; )
                Hh = Tg++,
                R.__clamp[Hh] = Hh;
            for (Tg = 255; 511 > Tg; )
                Hh = Tg++,
                R.__clamp[Hh] = 255;
            Ja.level = 3;
            "undefined" == typeof console && (console = {});
            null == console.log && (console.log = function() {}
            );
            A.hitTestCanvas = Ef.get_supported() ? window.document.createElement("canvas") : null;
            A.hitTestContext = Ef.get_supported() ? A.hitTestCanvas.getContext("2d") : null;
            ca.__meta__ = {
                fields: {
                    __cairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    addEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    removeEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            ca.__broadcastEvents = new Ia;
            ca.__instanceCount = 0;
            ca.__tempStack = new ra(function() {
                return ua.toObjectVector(null)
            }
            ,function(a) {
                a.set_length(0)
            }
            );
            ka.__fontByName = new Ia;
            ka.__registeredFonts = [];
            da.Element = 0;
            da.PCData = 1;
            da.CData = 2;
            da.Comment = 3;
            da.DocType = 4;
            da.ProcessingInstruction = 5;
            da.Document = 6;
            u.offset = 10;
            u.delay = 4;
            w.windows = [];
            C.black = 0;
            C.dark = 4473924;
            C.medium = 8947848;
            C.light = 13421772;
            C.white = 16777215;
            C.uiFont = "_sans";
            C.uiFontMono = "_typewriter";
            C.smallSize = 20;
            C.normalSize = 24;
            Hc.okCancel = ["OK", "Cancel"];
            Gd.maxFaceLength = 13;
            Ic.lastTab = 0;
            Ue.hintText = "* Shift+click a tag to learn its effect.";
            B.__pool = new ra(function() {
                return new B
            }
            ,function(a) {
                a.setTo(0, 0)
            }
            );
            Ca._p0 = new B(-819.2,0);
            Ca._p1 = new B(819.2,0);
            Sb.lx = 0;
            Sb.ly = 0;
            ha.JOINTS = function(a) {
                a = new tc;
                a.h[2] = "round";
                a.h[1] = "miter";
                a.h[0] = "bevel";
                return a
            }(this);
            ha.CAPS = function(a) {
                a = new tc;
                a.h[1] = "round";
                a.h[2] = "square";
                a.h[0] = "butt";
                return a
            }(this);
            ha.BLEND_MODES = function(a) {
                a = new tc;
                a.h[10] = "normal";
                a.h[9] = "multiply";
                a.h[0] = "plus-lighter";
                return a
            }(this);
            ha.gradients = [];
            ha.imports = [];
            ha.substituteFont = ha.substituteGenerics;
            ac.__meta__ = {
                obj: {
                    generic: null
                }
            };
            Lb.allCons = "tnsrdlkmpbwfvgzjh\u0283\u02a4\u02a7\u0292x\u03b8\u00f0\u02a6\u02a3\u0263".split("");
            Lb.allVows = ["e", "a", "o", "i", "u"];
            Lb.allSibs = "s\u0283\u0292z\u02a7\u02a4\u02a6\u02a3".split("");
            Lb.allLiqs = ["r", "l", "j", "w"];
            Lb.allNasal = ["n", "m"];
            Lb.invalid = ["?"];
            Jd.VOWELS = "you ye yo ya ie ee oo ea ei ey oi ou ai ay au oi oy ue ua u o a e i y".split(" ");
            Jd.CONSONANTS = "wh th ck ch sh gh ph qu b c d f g h j k l m n p q r s t v w x z".split(" ");
            Yb.__meta__ = {
                fields: {
                    image: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __framebufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __indexBufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __surface: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __textureContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __vertexBufferContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __fromImage: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Yb.__tempVector = new qg;
            oa.__pool = new ra(function() {
                return new oa
            }
            ,function(a) {
                a.setTo(0, 0, 0, 0)
            }
            );
            ud.__current = new ud(y.location.href);
            ud.__isWorker = "undefined" == typeof window;
            ud.__messages = new $a;
            ud.__resolveMethods = new $a;
            ta.__meta__ = {
                fields: {
                    equals: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            ta.__identity = new ta;
            ta.__pool = new ra(function() {
                return new ta
            }
            ,function(a) {
                a.identity()
            }
            );
            Kb.__pool = new ra(function() {
                return new Kb
            }
            ,function(a) {
                a.__identity()
            }
            );
            Za.pixel = new Yb(1,1,!1,0);
            Za.history = [];
            Za.menu = new fc;
            Db.hatching = B.polar(1, -Math.PI / 4);
            Db.min_trunk = 2;
            Db.max_trunk = 4;
            Db.min_width = 10;
            Db.max_width = 12;
            Db.min_height = 22.5;
            Db.max_height = 36;
            l.seed = 1;
            l.saved = -1;
            x.ultraThin = .4;
            x.thin = .8;
            x.normal = 1.4;
            x.thick = 3;
            x.river = 3;
            x.earth = 15460575;
            x.black = 5062454;
            x.water = 15065818;
            x.lightWood = 13159607;
            x.darkWood = 12173746;
            x.shallow = 15460575;
            x.contours = 10062723;
            x.routes = 10062723;
            x.rivers = 6708311;
            x.mountain = 14736853;
            x.walls = 15460575;
            x.roofs = 15045001;
            x.flags = 5062454;
            x.danger = 15921126;
            x.landBorderColor = 6708311;
            x.landBorderAlpha = .2;
            x.landBorderWidth = .333;
            x.shallowEdge = 1;
            x.shallowSize = .8;
            x.bandsNumber = 5;
            x.ruggedMountains = !0;
            x.treesDensity = .2;
            x.treesRegularity = .5;
            x.clutterScale = .7;
            x.townScale = .8;
            x.dangerScale = .6;
            x.textColor = x.black;
            x.outlineColor = x.earth;
            x.compass = 13421249;
            x.clouds = 16382194;
            x.banner = 15921126;
            x.matte = 15921126;
            x.shadings = ["Hatching", "Transparent", "Solid", "None", "No outlines"];
            x.fontSticker = {
                face: null,
                embedded: "def_font",
                size: 20,
                bold: !1,
                italic: !1
            };
            x.fontTown = {
                face: null,
                embedded: "def_font",
                size: 32,
                bold: !1,
                italic: !1
            };
            x.fontDanger = {
                face: null,
                embedded: "def_font",
                size: 24,
                bold: !1,
                italic: !1
            };
            x.fontArea = {
                face: null,
                embedded: "def_font",
                size: 28,
                bold: !1,
                italic: !1
            };
            x.fontTitle = {
                face: null,
                embedded: "def_font",
                size: 40,
                bold: !1,
                italic: !1
            };
            x.shadingMode = 0;
            x.alpha = .7;
            M.gridMode = 0;
            M.oceanTiles = !0;
            M.showNumbers = !1;
            M.showMatte = !0;
            M.showCompass = !0;
            M.showInfo = !0;
            M.showClouds = !1;
            M.showLight = !1;
            M.headerDecor = Qc.NONE;
            M.showTowns = !0;
            M.showDangers = !0;
            M.showMeadows = !0;
            M.showRoads = !0;
            M.showRoutes = !1;
            M.pinTowns = !1;
            M.uniformTowns = !1;
            M.individualTrees = !1;
            M.edgeTrees = !0;
            M.treeShadows = !1;
            M.revealRivers = !0;
            M.hollowRivers = !0;
            M.riverBanks = !0;
            Ze.min_height = 24;
            Ze.max_height = 40;
            ea.rugged = !1;
            ea.tiltMode = 0;
            ea.hexRadius = 50;
            ea.hexSqrR = ea.hexRadius * ea.hexRadius;
            ea.vantage = 1;
            Mb.hatching = B.polar(1, Math.PI / 6);
            Mb.min_trunk = 3;
            Mb.max_trunk = 5;
            Mb.min_width = 12;
            Mb.max_width = 15;
            Mb.min_height = 15;
            Mb.max_height = 24;
            Ka.inset = ea.hexRadius / 4;
            Ka.shadowHatching = new B(1,0);
            Ka.lightTree = Mb.proto();
            Ka.darkTree = Db.proto();
            Ka.deadTree = Ze.proto();
            Ka.frontTrees = !0;
            Ib.HIDDEN = "hidden";
            Ib.STRAIGHT = "straight";
            Ib.ARCED = "arced";
            Ib.CURVED = "curved";
            Ib.MODES = [Ib.HIDDEN, Ib.STRAIGHT, Ib.ARCED, Ib.CURVED];
            Ib.mode = Ib.ARCED;
            cc.halfBase = ea.hexRadius;
            cc.height = 4 * cc.halfBase / (1 + Math.sqrt(5));
            cc.density = 1.6;
            je.cache = new Ia;
            Ld.embeddedScanned = !1;
            Ld.embedded = function(a) {
                a = new Ia;
                a.h.def_font = {
                    name: "Neucha",
                    url: "hhttps://fonts.googleapis.com/css2?family=Neucha&display=swap"
                };
                a.h.ui_font_mono = {
                    name: "Share Tech Mono",
                    url: "https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap"
                };
                return a
            }(this);
            hc.fillColor = 16318463;
            hc.chord = 40;
            hc.swirlTurns = 1;
            hc.swirlDepth = 1;
            hc.fluffiness = .5;
            hc.chaos = .5;
            hc.minAngle = Math.PI / 24;
            me.fromAbove = new B(0,-1);
            La.o = new B;
            La.convexity = 0;
            La.secondary = 0;
            La.mainRing = 0;
            La.auxRing = 0;
            La.north = 0;
            La.south = 0;
            La.nipple = 0;
            La.showRhumbs = !0;
            uf.MARGIN = ea.hexRadius / 2;
            be.NLINES = 32;
            Ba.GREY = 5592405;
            Ba.FRONT = "Front";
            Ba.SPOTLIGHT = "Spotlight";
            Ba.type = Ba.SPOTLIGHT;
            Ba.balance = .7;
            Ba.clrLight = 7824964;
            Ba.opaLight = .2;
            Ba.satLight = .5;
            Ba.clrDark = 8952251;
            Ba.opaDark = .2;
            Ba.satDark = .5;
            Ba.spotFocus = new B;
            Ba.frontAnchor = new B(-1,-1);
            Md.marks = [.5, .333, .666];
            Ge.cache = [];
            md.cache = new Ia;
            Sc.dir = B.polar(1, Math.PI / 4);
            gc.o = new B;
            gc.ob = new B(0,5);
            nd.showFlags = !0;
            nd.showPoles = !0;
            nd.darkDoors = !0;
            nd.sideView = !1;
            nd.rigid = !1;
            J.SHADE = .3;
            J.R = 50;
            J.design = new wf(!1);
            J.xSpan = 20;
            J.house_floor_height = 20;
            J.house_room_width = 15;
            J.house_door_height = 8;
            J.house_door_width = 3;
            J.house_window_height = 6;
            J.house_window_width = 2;
            J.house_window_shape = .4;
            J.house_min_height = 10;
            J.house_max_height = 30;
            J.house_min_width = 15;
            J.house_max_width = 30;
            J.house_roof_slope = 1.8;
            J.house_wall_slope = .05;
            J.house_spine_concave = .96;
            J.house_side = 10;
            J.house_spheric_roof = 0;
            J.tower_min_radius = 5;
            J.tower_max_radius = 7;
            J.tower_min_height = 40;
            J.tower_max_height = 60;
            J.tower_nub_ratio = .4;
            J.tower_roof_radius = 1.5;
            J.tower_roof_slope = 3;
            J.tower_roof_concave = .4;
            J.tower_roof_onion = 0;
            J.flag_length = 20;
            J.flag_width = 6;
            J.flag_swing = 1;
            J.flag_folds = 5;
            J.house_many_doors = !1;
            J.house_flat_roof = !1;
            J.tower_square = !1;
            J.tower_no_roof = !1;
            J.tower_crown = !1;
            J.hatching_dirSW = B.polar(1, 1.25 * Math.PI);
            J.hatching_dirNE = B.polar(1, .25 * Math.PI);
            J.hatching_dirE = new B(1,0);
            J.hatching_dirW = new B(-1,0);
            J.lastScale = 0;
            Hb.outline = !0;
            Hb.commonDesign = new wf(!1);
            Hb.sqrt2 = Math.sqrt(2);
            Ed.EDGE = new Ed(!0,!1);
            Ed.COAST = new Ed(!1,!0);
            Ed.NONE = new Ed(!1,!1);
            Z.TEMPLATE = "island coast lake land peninsula fjord bay archipelago".split(" ");
            Z.DANGER = ["safe", "perilous"];
            Z.width = 1800;
            Z.height = 1800;
            Z.ALIGNMENT = function(a) {
                a = [];
                for (var b = 0, c = yb.__empty_constructs__.slice(); b < c.length; ) {
                    var d = c[b];
                    ++b;
                    a.push(N[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase())
                }
                return a
            }(this);
            Z.tags = "highland lowland wetland woodland barren civilized difficult safe perilous".split(" ").concat(Z.ALIGNMENT).concat(Z.TEMPLATE);
            Z.lowlandArea = .5;
            Z.riverDensity = .05;
            Z.riverTortuosity = 1;
            Z.forestDensity = .1;
            Z.deadForestChance = .1;
            Z.swampDensity = .03333333333333333;
            Z.dessertDensity = .03333333333333333;
            Z.settlementDensity = .02702702702702703;
            Z.settlementChances = [ic.VILLAGE, ic.VILLAGE, ic.VILLAGE, ic.TOWN, ic.TOWN, ic.CITY];
            Z.alignment = yb.NEUTRAL;
            Z.dungeonDensity = .03333333333333333;
            Qa.PRIVACY = "privacy";
            Qa.FREEDOM = "freedom";
            Qa.SAFETY = "safety";
            Qa.LEADERSHIP = "leadership";
            Qa.DEFENCES = "defences";
            Qa.PEOPLE = "people";
            Qa.BEAUTY = "beauty";
            Qa.HAPPYNESS = "happyness";
            Qa.FOOD = "food";
            Qa.WATER = "water";
            Qa.SPACE = "space";
            Qa.NATURE = "nature";
            Qa.MAGIC = "magic";
            Qa.CULTURE = "culture";
            Qa.RELIGION = "religion";
            Qa.KNOWLEDGE = "knowledge";
            Qa.TRADE = "trade";
            Qa.WEALTH = "wealth";
            Qa.LABOUR = "labour";
            Qa.resources = [Qa.PRIVACY, Qa.FREEDOM, Qa.SAFETY, Qa.LEADERSHIP, Qa.DEFENCES, Qa.PEOPLE, Qa.BEAUTY, Qa.HAPPYNESS, Qa.FOOD, Qa.WATER, Qa.SPACE, Qa.NATURE, Qa.MAGIC, Qa.RELIGION, Qa.CULTURE, Qa.KNOWLEDGE, Qa.TRADE, Qa.WEALTH, Qa.LABOUR];
            Ub.minR = 10;
            ja.useLang = !1;
            ja.terrNoun = !1;
            yc.concepts = ["town", "wood", "mountain", "swamp", "desert"];
            yc.minLen = 4;
            yc.maxLen = 20;
            Af.REROLL = "Reroll";
            Pb.MARGIN = 10;
            Pb.DISTANCE = 25;
            Pb.MAX_WIDTH = 300;
            tf.predefined = function(a) {
                a = new Ia;
                a.h.Small = 800;
                a.h.Medium = 1200;
                a.h.Large = 1800;
                a.h.Huge = 2700;
                return a
            }(this);
            Vf.presets = ["Common", "Elvish", "Exotic", "Alien", "Random"];
            rb.baseURL = "https://watabou.github.io/city-generator/0.10.0/";
            Va.plurals = function(a) {
                a = new Ia;
                a.h.child = "children";
                a.h.fish = "fish";
                return a
            }(this);
            af.rng = Math.random;
            Sh.values = function(a) {
                a = new Ia;
                a.h.aliceblue = 15792383;
                a.h.antiquewhite = 16444375;
                a.h.aqua = 65535;
                a.h.aquamarine = 8388564;
                a.h.azure = 15794175;
                a.h.beige = 16119260;
                a.h.bisque = 16770244;
                a.h.black = 0;
                a.h.blanchedalmond = 16772045;
                a.h.blue = 255;
                a.h.blueviolet = 9055202;
                a.h.brown = 10824234;
                a.h.burlywood = 14596231;
                a.h.cadetblue = 6266528;
                a.h.chartreuse = 8388352;
                a.h.chocolate = 13789470;
                a.h.coral = 16744272;
                a.h.cornflowerblue = 6591981;
                a.h.cornsilk = 16775388;
                a.h.crimson = 14423100;
                a.h.cyan = 65535;
                a.h.darkblue = 139;
                a.h.darkcyan = 35723;
                a.h.darkgoldenrod = 12092939;
                a.h.darkgreen = 25600;
                a.h.darkgrey = 11119017;
                a.h.darkkhaki = 12433259;
                a.h.darkmagenta = 9109643;
                a.h.darkolivegreen = 5597999;
                a.h.darkorange = 16747520;
                a.h.darkorchid = 10040012;
                a.h.darkred = 9109504;
                a.h.darksalmon = 15308410;
                a.h.darkseagreen = 9419919;
                a.h.darkslateblue = 4734347;
                a.h.darkslategrey = 3100495;
                a.h.darkturquoise = 52945;
                a.h.darkviolet = 9699539;
                a.h.deeppink = 16716947;
                a.h.deepskyblue = 49151;
                a.h.dimgrey = 6908265;
                a.h.dodgerblue = 2003199;
                a.h.firebrick = 11674146;
                a.h.floralwhite = 16775920;
                a.h.forestgreen = 2263842;
                a.h.fuchsia = 16711935;
                a.h.gainsboro = 14474460;
                a.h.ghostwhite = 16316671;
                a.h.goldenrod = 14329120;
                a.h.gold = 16766720;
                a.h.green = 32768;
                a.h.greenyellow = 11403055;
                a.h.grey = 8421504;
                a.h.honeydew = 15794160;
                a.h.hotpink = 16738740;
                a.h.indianred = 13458524;
                a.h.indigo = 4915330;
                a.h.ivory = 16777200;
                a.h.khaki = 15787660;
                a.h.lavenderblush = 16773365;
                a.h.lavender = 15132410;
                a.h.lawngreen = 8190976;
                a.h.lemonchiffon = 16775885;
                a.h.lightblue = 11393254;
                a.h.lightcoral = 15761536;
                a.h.lightcyan = 14745599;
                a.h.lightgoldenrodyellow = 16448210;
                a.h.lightgreen = 9498256;
                a.h.lightgrey = 13882323;
                a.h.lightpink = 16758465;
                a.h.lightsalmon = 16752762;
                a.h.lightseagreen = 2142890;
                a.h.lightskyblue = 8900346;
                a.h.lightslategrey = 7833753;
                a.h.lightsteelblue = 11584734;
                a.h.lightyellow = 16777184;
                a.h.lime = 65280;
                a.h.limegreen = 3329330;
                a.h.linen = 16445670;
                a.h.magenta = 16711935;
                a.h.maroon = 8388608;
                a.h.mediumaquamarine = 6737322;
                a.h.mediumblue = 205;
                a.h.mediumorchid = 12211667;
                a.h.mediumpurple = 9662683;
                a.h.mediumseagreen = 3978097;
                a.h.mediumslateblue = 8087790;
                a.h.mediumspringgreen = 64154;
                a.h.mediumturquoise = 4772300;
                a.h.mediumvioletred = 13047173;
                a.h.midnightblue = 1644912;
                a.h.mintcream = 16121850;
                a.h.mistyrose = 16770273;
                a.h.moccasin = 16770229;
                a.h.navajowhite = 16768685;
                a.h.navy = 128;
                a.h.oldlace = 16643558;
                a.h.olive = 8421376;
                a.h.olivedrab = 7048739;
                a.h.orange = 16753920;
                a.h.orangered = 16729344;
                a.h.orchid = 14315734;
                a.h.palegoldenrod = 15657130;
                a.h.palegreen = 10025880;
                a.h.paleturquoise = 11529966;
                a.h.palevioletred = 14381203;
                a.h.papayawhip = 16773077;
                a.h.peachpuff = 16767673;
                a.h.peru = 13468991;
                a.h.pink = 16761035;
                a.h.plum = 14524637;
                a.h.powderblue = 11591910;
                a.h.purple = 8388736;
                a.h.rebeccapurple = 6697881;
                a.h.red = 16711680;
                a.h.rosybrown = 12357519;
                a.h.royalblue = 4286945;
                a.h.saddlebrown = 9127187;
                a.h.salmon = 16416882;
                a.h.sandybrown = 16032864;
                a.h.seagreen = 3050327;
                a.h.seashell = 16774638;
                a.h.sienna = 10506797;
                a.h.silver = 12632256;
                a.h.skyblue = 8900331;
                a.h.slateblue = 6970061;
                a.h.slategrey = 7372944;
                a.h.snow = 16775930;
                a.h.springgreen = 65407;
                a.h.steelblue = 4620980;
                a.h.tan = 13808780;
                a.h.teal = 32896;
                a.h.thistle = 14204888;
                a.h.tomato = 16737095;
                a.h.turquoise = 4251856;
                a.h.violet = 15631086;
                a.h.wheat = 16113331;
                a.h.white = 16777215;
                a.h.whitesmoke = 16119285;
                a.h.yellow = 16776960;
                a.h.yellowgreen = 10145074;
                return a
            }(this);
            bf.permutation = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];
            tb._tick = new Ac;
            tb.lastTime = 0;
            tb.timeScale = 1;
            wd.USE_CACHE = !1;
            wd.USE_ENUM_INDEX = !1;
            wd.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
            od.DEFAULT_RESOLVER = new Gi;
            od.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
            lf.escapes = function(a) {
                a = new Ia;
                a.h.lt = "<";
                a.h.gt = ">";
                a.h.amp = "&";
                a.h.quot = '"';
                a.h.apos = "'";
                return a
            }(this);
            ed.LEN_EXTRA_BITS_TBL = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, -1, -1];
            ed.LEN_BASE_VAL_TBL = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258];
            ed.DIST_EXTRA_BITS_TBL = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, -1, -1];
            ed.DIST_BASE_VAL_TBL = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
            ed.CODE_LENGTHS_POS = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
            Ea.activeRequests = 0;
            Ea.requestLimit = 17;
            Ea.requestQueue = new $a;
            Ma.dummyCharacter = "\u007f";
            Ma.windowID = 0;
            De.DICTIONARY = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
            De.EXTENDED_DICTIONARY = function(a) {
                a = [];
                for (var b = 0, c = De.DICTIONARY; b < c.length; ) {
                    var d = c[b];
                    ++b;
                    for (var f = 0, g = De.DICTIONARY; f < g.length; ) {
                        var k = g[f];
                        ++f;
                        a.push(d + k)
                    }
                }
                return a
            }(this);
            yd.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];
            yd.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];
            lb.__identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
            zc.onUpdate = new Bc;
            zc.__updated = !1;
            Oe.sensorByID = new tc;
            Oe.sensors = [];
            uc.devices = new tc;
            uc.onConnect = new xk;
            mc.devices = new tc;
            mc.onConnect = new yk;
            ec.onCancel = new Dg;
            ec.onEnd = new Dg;
            ec.onMove = new Dg;
            ec.onStart = new Dg;
            Ha.cache = new Bk;
            Ha.onChange = new Bc;
            Ha.bundlePaths = new Ia;
            Ha.libraries = new Ia;
            Ha.libraryPaths = new Ia;
            Ja.throwErrors = !0;
            Sa.__lastTimerID = 0;
            Sa.__timers = new tc;
            ef.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Xi.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Pe.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Yi.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Xg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            og.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    toJSON: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Ug.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            pd.__meta__ = {
                fields: {
                    __context: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __type: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Zi.__meta__ = {
                fields: {
                    cairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __matrix3: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    applyMatrix: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __setBlendModeCairo: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            We.__meta__ = {
                fields: {
                    context: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    applySmoothing: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    setTransform: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __setBlendModeContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            cj.__meta__ = {
                fields: {
                    __element: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            vh.__meta__ = {
                fields: {
                    element: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            zd.__meta__ = {
                fields: {
                    glProgram: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            ue.__meta__ = {
                statics: {
                    create: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                },
                fields: {
                    parameters: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            ue.__rootURL = Ef.get_supported() ? window.document.URL : "";
            bb.__meta__ = {
                fields: {
                    gl: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __gl: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __matrix: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __projection: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __projectionFlipped: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            bb.__alphaValue = [1];
            bb.__colorMultipliersValue = [0, 0, 0, 0];
            bb.__colorOffsetsValue = [0, 0, 0, 0];
            bb.__emptyColorValue = [0, 0, 0, 0];
            bb.__hasColorTransformValue = [!1];
            bb.__scissorRectangle = new oa;
            bb.__textureSizeValue = [0, 0];
            Ih.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    onComplete: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Vg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            fj.__meta__ = {
                fields: {
                    index: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    name: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Gg.__meta__ = {
                fields: {
                    index: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    name: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Jg.__meta__ = {
                fields: {
                    __broadcastEvent: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __dispatchEvent: {
                        SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
                    },
                    __dispatchStack: {
                        SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
                    },
                    __dispatchTarget: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __handleError: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            vj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            th.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    _: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            uh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            cg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            rd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    o: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            rd.empty = new rd;
            A.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                statics: {
                    windingRule: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    createBitmapFill: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    createGradientPattern: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            A.fillCommands = new rd;
            A.strokeCommands = new rd;
            ba.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ff.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                statics: {
                    renderTileContainer: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            dg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Qd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Ah.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            gg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Qb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Qb.blankBitmapData = new Yb(1,1,!1,0);
            Qb.tempColorTransform = new Kb(1,1,1,1,0,0,0,0);
            fg.opaqueBitmapData = new Yb(1,1,!1,0);
            Me.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            hf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            X.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Rd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Rd.__textureSizeValue = [0, 0];
            Vb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            qd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Lf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Hf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            If.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            gf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            ve.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            kg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            hj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    overrideIntValues: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            sb.__glDepthStencil = -1;
            sb.__glMaxTextureMaxAnisotropy = -1;
            sb.__glMaxViewportDims = -1;
            sb.__glMemoryCurrentAvailable = -1;
            sb.__glMemoryTotalAvailable = -1;
            sb.__glTextureMaxAnisotropy = -1;
            yj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Dh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            fd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            fd.limitedProfile = !0;
            Kg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            zj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Lg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            lg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Bh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            zb.__meta__ = {
                fields: {
                    __textureContext: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    },
                    __getGLFramebuffer: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Wg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Qf.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Qf.supportsWeakReference = Object.prototype.hasOwnProperty.call(y, "WeakRef");
            ad.__invertAlphaShader = new Ij;
            ad.__blurAlphaShader = new Dj;
            ad.__combineShader = new Fj;
            ad.__innerCombineShader = new Hj;
            ad.__combineKnockoutShader = new Ej;
            ad.__innerCombineKnockoutShader = new Gj;
            mg.__meta__ = {
                fields: {
                    clone: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            we.__soundChannels = [];
            we.__soundTransform = new mg;
            dd.defaultObjectEncoding = 10;
            Mf.followRedirects = !0;
            Mf.idleTimeout = 0;
            Mf.manageCookies = !0;
            Hg.currentDomain = new Hg(null);
            Ae.__meta__ = {
                fields: {
                    clone: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Gh.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Oa.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Oa.__regexAlign = new Ta("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexBreakTag = new Ta("<br\\s*/?>","gi");
            Oa.__regexBlockIndent = new Ta("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexClass = new Ta("class\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexColor = new Ta("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')","i");
            Oa.__regexEntityApos = new Ta("&apos;","g");
            Oa.__regexEntityNbsp = new Ta("&nbsp;","g");
            Oa.__regexCharEntity = new Ta("&#(?:([0-9]+)|(x[0-9a-fA-F]+));","g");
            Oa.__regexFace = new Ta("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexHTMLTag = new Ta("<.*?>","g");
            Oa.__regexHref = new Ta("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexIndent = new Ta(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexLeading = new Ta("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexLeftMargin = new Ta("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexRightMargin = new Ta("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexSize = new Ta("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Oa.__regexTabStops = new Ta("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");
            Sg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Eb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Jj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Wa.__meta__ = {
                fields: {
                    addEventListener: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            Wa.numDevices = 0;
            Wa.__deviceList = [];
            Wa.__instances = [];
            Wa.__devices = new pa;
            Jk.__cursor = "auto";
            na.__meta__ = {
                obj: {
                    SuppressWarnings: [["checkstyle:ConstantName", "checkstyle:FieldDocComment"]]
                }
            };
            na.OPMAP = new Ia;
            na.REGMAP = new Ia;
            na.SAMPLEMAP = new Ia;
            na.initialized = !1;
            qb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Fd.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Wb.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Rb.cache = new Lj;
            Wc.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Wc.defaultObjectEncoding = 10;
            ee.__meta__ = {
                statics: {
                    __get: {
                        SuppressWarnings: ["checkstyle:FieldDocComment"]
                    }
                }
            };
            Mj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Nj.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            Ec.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                }
            };
            jg.__meta__ = {
                obj: {
                    SuppressWarnings: ["checkstyle:FieldDocComment"]
                },
                fields: {
                    touch: {
                        SuppressWarnings: ["checkstyle:Dynamic"]
                    }
                }
            };
            jg.__pool = new ra(function() {
                return new jg
            }
            ,function(a) {
                a.reset()
            }
            );
            V.main()
        }
        )("undefined" != typeof t ? t : "undefined" != typeof window ? window : "undefined" != typeof self ? self : this, "undefined" != typeof window ? window : "undefined" != typeof y ? y : "undefined" != typeof self ? self : this)
    };
    "undefined" !== typeof self && self.constructor.name.includes("Worker") ? y({}, t) : (L.lime = L.lime || {},
    L.lime.$scripts = L.lime.$scripts || {},
    L.lime.$scripts.Perilous = y,
    L.lime.embed = function(y) {
        var F = {}
          , H = L.lime.$scripts[y];
        if (!H)
            throw Error('Cannot find project name "' + y + '"');
        H(F, t);
        for (var V in F)
            L[V] = L[V] || F[V];
        (H = F.lime || window.lime) && H.embed && this !== H.embed && H.embed.apply(H, arguments);
        return F
    }
    );
    "function" === typeof define && define.amd && (define([], function() {
        return L.lime
    }),
    define.__amd = define.amd,
    define.amd = null)
};
$lime_init("undefined" !== typeof exports ? exports : "function" === typeof define && define.amd ? {} : "undefined" !== typeof window ? window : "undefined" !== typeof self ? self : this, "undefined" !== typeof window ? window : "undefined" !== typeof global ? global : "undefined" !== typeof self ? self : this);
"undefined" !== typeof self && self.constructor.name.includes("Worker") || (!function() {
    var L = function() {
        this.init()
    };
    L.prototype = {
        init: function() {
            var h = this || t;
            return h._counter = 1E3,
            h._html5AudioPool = [],
            h.html5PoolSize = 10,
            h._codecs = {},
            h._howls = [],
            h._muted = !1,
            h._volume = 1,
            h._canPlayEvent = "canplaythrough",
            h._navigator = "undefined" != typeof window && window.navigator ? window.navigator : null,
            h.masterGain = null,
            h.noAudio = !1,
            h.usingWebAudio = !0,
            h.autoSuspend = !0,
            h.ctx = null,
            h.autoUnlock = !0,
            h._setup(),
            h
        },
        volume: function(h) {
            var r = this || t;
            if (h = parseFloat(h),
            r.ctx || m(),
            void 0 !== h && 0 <= h && 1 >= h) {
                if (r._volume = h,
                r._muted)
                    return r;
                r.usingWebAudio && r.masterGain.gain.setValueAtTime(h, t.ctx.currentTime);
                for (var N = 0; N < r._howls.length; N++)
                    if (!r._howls[N]._webAudio)
                        for (var D = r._howls[N]._getSoundIds(), v = 0; v < D.length; v++) {
                            var y = r._howls[N]._soundById(D[v]);
                            y && y._node && (y._node.volume = y._volume * h)
                        }
                return r
            }
            return r._volume
        },
        mute: function(h) {
            var r = this || t;
            r.ctx || m();
            r._muted = h;
            r.usingWebAudio && r.masterGain.gain.setValueAtTime(h ? 0 : r._volume, t.ctx.currentTime);
            for (var N = 0; N < r._howls.length; N++)
                if (!r._howls[N]._webAudio)
                    for (var D = r._howls[N]._getSoundIds(), v = 0; v < D.length; v++) {
                        var y = r._howls[N]._soundById(D[v]);
                        y && y._node && (y._node.muted = !!h || y._muted)
                    }
            return r
        },
        stop: function() {
            for (var h = this || t, r = 0; r < h._howls.length; r++)
                h._howls[r].stop();
            return h
        },
        unload: function() {
            for (var h = this || t, r = h._howls.length - 1; 0 <= r; r--)
                h._howls[r].unload();
            return h.usingWebAudio && h.ctx && void 0 !== h.ctx.close && (h.ctx.close(),
            h.ctx = null,
            m()),
            h
        },
        codecs: function(h) {
            return (this || t)._codecs[h.replace(/^x-/, "")]
        },
        _setup: function() {
            var h = this || t;
            if (h.state = h.ctx ? h.ctx.state || "suspended" : "suspended",
            h._autoSuspend(),
            !h.usingWebAudio)
                if ("undefined" != typeof Audio)
                    try {
                        var r = new Audio;
                        void 0 === r.oncanplaythrough && (h._canPlayEvent = "canplay")
                    } catch (N) {
                        h.noAudio = !0
                    }
                else
                    h.noAudio = !0;
            try {
                r = new Audio,
                r.muted && (h.noAudio = !0)
            } catch (N) {}
            return h.noAudio || h._setupCodecs(),
            h
        },
        _setupCodecs: function() {
            var h = this || t
              , r = null;
            try {
                r = "undefined" != typeof Audio ? new Audio : null
            } catch (Gb) {
                return h
            }
            if (!r || "function" != typeof r.canPlayType)
                return h;
            var m = r.canPlayType("audio/mpeg;").replace(/^no$/, "")
              , D = h._navigator ? h._navigator.userAgent : ""
              , v = D.match(/OPR\/(\d+)/g);
            v = v && 33 > parseInt(v[0].split("/")[1], 10);
            var y = -1 !== D.indexOf("Safari") && -1 === D.indexOf("Chrome");
            D = D.match(/Version\/(.*?) /);
            D = y && D && 15 > parseInt(D[1], 10);
            return h._codecs = {
                mp3: !(v || !m && !r.canPlayType("audio/mp3;").replace(/^no$/, "")),
                mpeg: !!m,
                opus: !!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
                ogg: !!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                oga: !!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                wav: !!(r.canPlayType('audio/wav; codecs="1"') || r.canPlayType("audio/wav")).replace(/^no$/, ""),
                aac: !!r.canPlayType("audio/aac;").replace(/^no$/, ""),
                caf: !!r.canPlayType("audio/x-caf;").replace(/^no$/, ""),
                m4a: !!(r.canPlayType("audio/x-m4a;") || r.canPlayType("audio/m4a;") || r.canPlayType("audio/aac;")).replace(/^no$/, ""),
                m4b: !!(r.canPlayType("audio/x-m4b;") || r.canPlayType("audio/m4b;") || r.canPlayType("audio/aac;")).replace(/^no$/, ""),
                mp4: !!(r.canPlayType("audio/x-mp4;") || r.canPlayType("audio/mp4;") || r.canPlayType("audio/aac;")).replace(/^no$/, ""),
                weba: !(D || !r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
                webm: !(D || !r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
                dolby: !!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
                flac: !!(r.canPlayType("audio/x-flac;") || r.canPlayType("audio/flac;")).replace(/^no$/, "")
            },
            h
        },
        _unlockAudio: function() {
            var h = this || t;
            if (!h._audioUnlocked && h.ctx) {
                h._audioUnlocked = !1;
                h.autoUnlock = !1;
                h._mobileUnloaded || 44100 === h.ctx.sampleRate || (h._mobileUnloaded = !0,
                h.unload());
                h._scratchBuffer = h.ctx.createBuffer(1, 1, 22050);
                var r = function(m) {
                    for (; h._html5AudioPool.length < h.html5PoolSize; )
                        try {
                            var t = new Audio;
                            t._unlocked = !0;
                            h._releaseHtml5Audio(t)
                        } catch (Ab) {
                            h.noAudio = !0;
                            break
                        }
                    for (m = 0; m < h._howls.length; m++)
                        if (!h._howls[m]._webAudio) {
                            t = h._howls[m]._getSoundIds();
                            for (var N = 0; N < t.length; N++) {
                                var v = h._howls[m]._soundById(t[N]);
                                v && v._node && !v._node._unlocked && (v._node._unlocked = !0,
                                v._node.load())
                            }
                        }
                    h._autoResume();
                    var y = h.ctx.createBufferSource();
                    y.buffer = h._scratchBuffer;
                    y.connect(h.ctx.destination);
                    void 0 === y.start ? y.noteOn(0) : y.start(0);
                    "function" == typeof h.ctx.resume && h.ctx.resume();
                    y.onended = function() {
                        y.disconnect(0);
                        h._audioUnlocked = !0;
                        document.removeEventListener("touchstart", r, !0);
                        document.removeEventListener("touchend", r, !0);
                        document.removeEventListener("click", r, !0);
                        document.removeEventListener("keydown", r, !0);
                        for (var m = 0; m < h._howls.length; m++)
                            h._howls[m]._emit("unlock")
                    }
                };
                return document.addEventListener("touchstart", r, !0),
                document.addEventListener("touchend", r, !0),
                document.addEventListener("click", r, !0),
                document.addEventListener("keydown", r, !0),
                h
            }
        },
        _obtainHtml5Audio: function() {
            var h = this || t;
            if (h._html5AudioPool.length)
                return h._html5AudioPool.pop();
            h = (new Audio).play();
            return h && "undefined" != typeof Promise && (h instanceof Promise || "function" == typeof h.then) && h.catch(function() {
                console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")
            }),
            new Audio
        },
        _releaseHtml5Audio: function(h) {
            var r = this || t;
            return h._unlocked && r._html5AudioPool.push(h),
            r
        },
        _autoSuspend: function() {
            var h = this;
            if (h.autoSuspend && h.ctx && void 0 !== h.ctx.suspend && t.usingWebAudio) {
                for (var r = 0; r < h._howls.length; r++)
                    if (h._howls[r]._webAudio)
                        for (var m = 0; m < h._howls[r]._sounds.length; m++)
                            if (!h._howls[r]._sounds[m]._paused)
                                return h;
                return h._suspendTimer && clearTimeout(h._suspendTimer),
                h._suspendTimer = setTimeout(function() {
                    if (h.autoSuspend) {
                        h._suspendTimer = null;
                        h.state = "suspending";
                        var r = function() {
                            h.state = "suspended";
                            h._resumeAfterSuspend && (delete h._resumeAfterSuspend,
                            h._autoResume())
                        };
                        h.ctx.suspend().then(r, r)
                    }
                }, 3E4),
                h
            }
        },
        _autoResume: function() {
            var h = this;
            if (h.ctx && void 0 !== h.ctx.resume && t.usingWebAudio)
                return "running" === h.state && "interrupted" !== h.ctx.state && h._suspendTimer ? (clearTimeout(h._suspendTimer),
                h._suspendTimer = null) : "suspended" === h.state || "running" === h.state && "interrupted" === h.ctx.state ? (h.ctx.resume().then(function() {
                    h.state = "running";
                    for (var r = 0; r < h._howls.length; r++)
                        h._howls[r]._emit("resume")
                }),
                h._suspendTimer && (clearTimeout(h._suspendTimer),
                h._suspendTimer = null)) : "suspending" === h.state && (h._resumeAfterSuspend = !0),
                h
        }
    };
    var t = new L
      , y = function(h) {
        if (!h.src || 0 === h.src.length)
            return void console.error("An array of source files must be passed with any new Howl.");
        this.init(h)
    };
    y.prototype = {
        init: function(h) {
            var r = this;
            return t.ctx || m(),
            r._autoplay = h.autoplay || !1,
            r._format = "string" != typeof h.format ? h.format : [h.format],
            r._html5 = h.html5 || !1,
            r._muted = h.mute || !1,
            r._loop = h.loop || !1,
            r._pool = h.pool || 5,
            r._preload = "boolean" != typeof h.preload && "metadata" !== h.preload || h.preload,
            r._rate = h.rate || 1,
            r._sprite = h.sprite || {},
            r._src = "string" != typeof h.src ? h.src : [h.src],
            r._volume = void 0 !== h.volume ? h.volume : 1,
            r._xhr = {
                method: h.xhr && h.xhr.method ? h.xhr.method : "GET",
                headers: h.xhr && h.xhr.headers ? h.xhr.headers : null,
                withCredentials: !(!h.xhr || !h.xhr.withCredentials) && h.xhr.withCredentials
            },
            r._duration = 0,
            r._state = "unloaded",
            r._sounds = [],
            r._endTimers = {},
            r._queue = [],
            r._playLock = !1,
            r._onend = h.onend ? [{
                fn: h.onend
            }] : [],
            r._onfade = h.onfade ? [{
                fn: h.onfade
            }] : [],
            r._onload = h.onload ? [{
                fn: h.onload
            }] : [],
            r._onloaderror = h.onloaderror ? [{
                fn: h.onloaderror
            }] : [],
            r._onplayerror = h.onplayerror ? [{
                fn: h.onplayerror
            }] : [],
            r._onpause = h.onpause ? [{
                fn: h.onpause
            }] : [],
            r._onplay = h.onplay ? [{
                fn: h.onplay
            }] : [],
            r._onstop = h.onstop ? [{
                fn: h.onstop
            }] : [],
            r._onmute = h.onmute ? [{
                fn: h.onmute
            }] : [],
            r._onvolume = h.onvolume ? [{
                fn: h.onvolume
            }] : [],
            r._onrate = h.onrate ? [{
                fn: h.onrate
            }] : [],
            r._onseek = h.onseek ? [{
                fn: h.onseek
            }] : [],
            r._onunlock = h.onunlock ? [{
                fn: h.onunlock
            }] : [],
            r._onresume = [],
            r._webAudio = t.usingWebAudio && !r._html5,
            void 0 !== t.ctx && t.ctx && t.autoUnlock && t._unlockAudio(),
            t._howls.push(r),
            r._autoplay && r._queue.push({
                event: "play",
                action: function() {
                    r.play()
                }
            }),
            r._preload && "none" !== r._preload && r.load(),
            r
        },
        load: function() {
            var h = null;
            if (t.noAudio)
                return void this._emit("loaderror", null, "No audio support.");
            "string" == typeof this._src && (this._src = [this._src]);
            for (var r = 0; r < this._src.length; r++) {
                var m;
                if (this._format && this._format[r])
                    var v = this._format[r];
                else {
                    if ("string" != typeof (m = this._src[r])) {
                        this._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                        continue
                    }
                    (v = /^data:audio\/([^;,]+);/i.exec(m)) || (v = /\.([^.]+)$/.exec(m.split("?", 1)[0]));
                    v && (v = v[1].toLowerCase())
                }
                if (v || console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),
                v && t.codecs(v)) {
                    h = this._src[r];
                    break
                }
            }
            return h ? (this._src = h,
            this._state = "loading",
            "https:" === window.location.protocol && "http:" === h.slice(0, 5) && (this._html5 = !0,
            this._webAudio = !1),
            new H(this),
            this._webAudio && O(this),
            this) : void this._emit("loaderror", null, "No codec support for selected audio sources.")
        },
        play: function(h, r) {
            var m = this
              , v = null;
            if ("number" == typeof h)
                v = h,
                h = null;
            else {
                if ("string" == typeof h && "loaded" === m._state && !m._sprite[h])
                    return null;
                if (void 0 === h && (h = "__default",
                !m._playLock)) {
                    for (var y = 0, va = 0; va < m._sounds.length; va++)
                        m._sounds[va]._paused && !m._sounds[va]._ended && (y++,
                        v = m._sounds[va]._id);
                    1 === y ? h = null : v = null
                }
            }
            var F = v ? m._soundById(v) : m._inactiveSound();
            if (!F)
                return null;
            if (v && !h && (h = F._sprite || "__default"),
            "loaded" !== m._state) {
                F._sprite = h;
                F._ended = !1;
                var V = F._id;
                return m._queue.push({
                    event: "play",
                    action: function() {
                        m.play(V)
                    }
                }),
                V
            }
            if (v && !F._paused)
                return r || m._loadQueue("play"),
                F._id;
            m._webAudio && t._autoResume();
            var L = Math.max(0, 0 < F._seek ? F._seek : m._sprite[h][0] / 1E3)
              , H = Math.max(0, (m._sprite[h][0] + m._sprite[h][1]) / 1E3 - L)
              , W = 1E3 * H / Math.abs(F._rate)
              , O = m._sprite[h][0] / 1E3
              , ua = (m._sprite[h][0] + m._sprite[h][1]) / 1E3;
            F._sprite = h;
            F._ended = !1;
            var ra = function() {
                F._paused = !1;
                F._seek = L;
                F._start = O;
                F._stop = ua;
                F._loop = !(!F._loop && !m._sprite[h][2])
            };
            if (L >= ua)
                return void m._ended(F);
            var ma = F._node;
            if (m._webAudio)
                v = function() {
                    m._playLock = !1;
                    ra();
                    m._refreshBuffer(F);
                    ma.gain.setValueAtTime(F._muted || m._muted ? 0 : F._volume, t.ctx.currentTime);
                    F._playStart = t.ctx.currentTime;
                    void 0 === ma.bufferSource.start ? F._loop ? ma.bufferSource.noteGrainOn(0, L, 86400) : ma.bufferSource.noteGrainOn(0, L, H) : F._loop ? ma.bufferSource.start(0, L, 86400) : ma.bufferSource.start(0, L, H);
                    W !== 1 / 0 && (m._endTimers[F._id] = setTimeout(m._ended.bind(m, F), W));
                    r || setTimeout(function() {
                        m._emit("play", F._id);
                        m._loadQueue()
                    }, 0)
                }
                ,
                "running" === t.state && "interrupted" !== t.ctx.state ? v() : (m._playLock = !0,
                m.once("resume", v),
                m._clearTimer(F._id));
            else {
                var pa = function() {
                    ma.currentTime = L;
                    ma.muted = F._muted || m._muted || t._muted || ma.muted;
                    ma.volume = F._volume * t.volume();
                    ma.playbackRate = F._rate;
                    try {
                        var v = ma.play();
                        if (v && "undefined" != typeof Promise && (v instanceof Promise || "function" == typeof v.then) ? (m._playLock = !0,
                        ra(),
                        v.then(function() {
                            m._playLock = !1;
                            ma._unlocked = !0;
                            r ? m._loadQueue() : m._emit("play", F._id)
                        }).catch(function() {
                            m._playLock = !1;
                            m._emit("playerror", F._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                            F._ended = !0;
                            F._paused = !0
                        })) : r || (m._playLock = !1,
                        ra(),
                        m._emit("play", F._id)),
                        ma.playbackRate = F._rate,
                        ma.paused)
                            return void m._emit("playerror", F._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                        "__default" !== h || F._loop ? m._endTimers[F._id] = setTimeout(m._ended.bind(m, F), W) : (m._endTimers[F._id] = function() {
                            m._ended(F);
                            ma.removeEventListener("ended", m._endTimers[F._id], !1)
                        }
                        ,
                        ma.addEventListener("ended", m._endTimers[F._id], !1))
                    } catch (za) {
                        m._emit("playerror", F._id, za)
                    }
                };
                "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA" === ma.src && (ma.src = m._src,
                ma.load());
                v = window && window.ejecta || !ma.readyState && t._navigator.isCocoonJS;
                if (3 <= ma.readyState || v)
                    pa();
                else {
                    m._playLock = !0;
                    m._state = "loading";
                    var $a = function() {
                        m._state = "loaded";
                        pa();
                        ma.removeEventListener(t._canPlayEvent, $a, !1)
                    };
                    ma.addEventListener(t._canPlayEvent, $a, !1);
                    m._clearTimer(F._id)
                }
            }
            return F._id
        },
        pause: function(h, r) {
            var m = this;
            if ("loaded" !== m._state || m._playLock)
                return m._queue.push({
                    event: "pause",
                    action: function() {
                        m.pause(h)
                    }
                }),
                m;
            for (var t = m._getSoundIds(h), v = 0; v < t.length; v++) {
                m._clearTimer(t[v]);
                var y = m._soundById(t[v]);
                if (y && !y._paused && (y._seek = m.seek(t[v]),
                y._rateSeek = 0,
                y._paused = !0,
                m._stopFade(t[v]),
                y._node))
                    if (m._webAudio) {
                        if (!y._node.bufferSource)
                            continue;
                        void 0 === y._node.bufferSource.stop ? y._node.bufferSource.noteOff(0) : y._node.bufferSource.stop(0);
                        m._cleanBuffer(y._node)
                    } else
                        isNaN(y._node.duration) && y._node.duration !== 1 / 0 || y._node.pause();
                r || m._emit("pause", y ? y._id : null)
            }
            return m
        },
        stop: function(h, r) {
            var m = this;
            if ("loaded" !== m._state || m._playLock)
                return m._queue.push({
                    event: "stop",
                    action: function() {
                        m.stop(h)
                    }
                }),
                m;
            for (var t = m._getSoundIds(h), v = 0; v < t.length; v++) {
                m._clearTimer(t[v]);
                var y = m._soundById(t[v]);
                y && (y._seek = y._start || 0,
                y._rateSeek = 0,
                y._paused = !0,
                y._ended = !0,
                m._stopFade(t[v]),
                y._node && (m._webAudio ? y._node.bufferSource && (void 0 === y._node.bufferSource.stop ? y._node.bufferSource.noteOff(0) : y._node.bufferSource.stop(0),
                m._cleanBuffer(y._node)) : isNaN(y._node.duration) && y._node.duration !== 1 / 0 || (y._node.currentTime = y._start || 0,
                y._node.pause(),
                y._node.duration === 1 / 0 && m._clearSound(y._node))),
                r || m._emit("stop", y._id))
            }
            return m
        },
        mute: function(h, r) {
            var m = this;
            if ("loaded" !== m._state || m._playLock)
                return m._queue.push({
                    event: "mute",
                    action: function() {
                        m.mute(h, r)
                    }
                }),
                m;
            if (void 0 === r) {
                if ("boolean" != typeof h)
                    return m._muted;
                m._muted = h
            }
            for (var v = m._getSoundIds(r), y = 0; y < v.length; y++) {
                var F = m._soundById(v[y]);
                F && (F._muted = h,
                F._interval && m._stopFade(F._id),
                m._webAudio && F._node ? F._node.gain.setValueAtTime(h ? 0 : F._volume, t.ctx.currentTime) : F._node && (F._node.muted = !!t._muted || h),
                m._emit("mute", F._id))
            }
            return m
        },
        volume: function() {
            var h, r, m = this, v = arguments;
            if (0 === v.length)
                return m._volume;
            1 === v.length || 2 === v.length && void 0 === v[1] ? 0 <= m._getSoundIds().indexOf(v[0]) ? r = parseInt(v[0], 10) : h = parseFloat(v[0]) : 2 <= v.length && (h = parseFloat(v[0]),
            r = parseInt(v[1], 10));
            var y;
            if (!(void 0 !== h && 0 <= h && 1 >= h))
                return y = r ? m._soundById(r) : m._sounds[0],
                y ? y._volume : 0;
            if ("loaded" !== m._state || m._playLock)
                return m._queue.push({
                    event: "volume",
                    action: function() {
                        m.volume.apply(m, v)
                    }
                }),
                m;
            void 0 === r && (m._volume = h);
            r = m._getSoundIds(r);
            for (var F = 0; F < r.length; F++)
                (y = m._soundById(r[F])) && (y._volume = h,
                v[2] || m._stopFade(r[F]),
                m._webAudio && y._node && !y._muted ? y._node.gain.setValueAtTime(h, t.ctx.currentTime) : y._node && !y._muted && (y._node.volume = h * t.volume()),
                m._emit("volume", y._id));
            return m
        },
        fade: function(h, r, m, v) {
            var D = this;
            if ("loaded" !== D._state || D._playLock)
                return D._queue.push({
                    event: "fade",
                    action: function() {
                        D.fade(h, r, m, v)
                    }
                }),
                D;
            h = Math.min(Math.max(0, parseFloat(h)), 1);
            r = Math.min(Math.max(0, parseFloat(r)), 1);
            m = parseFloat(m);
            D.volume(h, v);
            for (var N = D._getSoundIds(v), y = 0; y < N.length; y++) {
                var F = D._soundById(N[y]);
                if (F) {
                    if (v || D._stopFade(N[y]),
                    D._webAudio && !F._muted) {
                        var L = t.ctx.currentTime
                          , V = L + m / 1E3;
                        F._volume = h;
                        F._node.gain.setValueAtTime(h, L);
                        F._node.gain.linearRampToValueAtTime(r, V)
                    }
                    D._startFadeInterval(F, h, r, m, N[y], void 0 === v)
                }
            }
            return D
        },
        _startFadeInterval: function(h, r, m, v, t, y) {
            var D = this
              , N = r
              , F = m - r;
            t = Math.abs(F / .01);
            t = Math.max(4, 0 < t ? v / t : v);
            var L = Date.now();
            h._fadeTo = m;
            h._interval = setInterval(function() {
                var t = (Date.now() - L) / v;
                L = Date.now();
                N += F * t;
                N = Math.round(100 * N) / 100;
                N = 0 > F ? Math.max(m, N) : Math.min(m, N);
                D._webAudio ? h._volume = N : D.volume(N, h._id, !0);
                y && (D._volume = N);
                (m < r && N <= m || m > r && N >= m) && (clearInterval(h._interval),
                h._interval = null,
                h._fadeTo = null,
                D.volume(m, h._id),
                D._emit("fade", h._id))
            }, t)
        },
        _stopFade: function(h) {
            var r = this._soundById(h);
            return r && r._interval && (this._webAudio && r._node.gain.cancelScheduledValues(t.ctx.currentTime),
            clearInterval(r._interval),
            r._interval = null,
            this.volume(r._fadeTo, h),
            r._fadeTo = null,
            this._emit("fade", h)),
            this
        },
        loop: function() {
            var h, r, m, v = arguments;
            if (0 === v.length)
                return this._loop;
            if (1 === v.length) {
                if ("boolean" != typeof v[0])
                    return !!(m = this._soundById(parseInt(v[0], 10))) && m._loop;
                this._loop = h = v[0]
            } else
                2 === v.length && (h = v[0],
                r = parseInt(v[1], 10));
            r = this._getSoundIds(r);
            for (v = 0; v < r.length; v++)
                (m = this._soundById(r[v])) && (m._loop = h,
                this._webAudio && m._node && m._node.bufferSource && (m._node.bufferSource.loop = h,
                h && (m._node.bufferSource.loopStart = m._start || 0,
                m._node.bufferSource.loopEnd = m._stop,
                this.playing(r[v]) && (this.pause(r[v], !0),
                this.play(r[v], !0)))));
            return this
        },
        rate: function() {
            var h, r, m = this, v = arguments;
            0 === v.length ? r = m._sounds[0]._id : 1 === v.length ? 0 <= m._getSoundIds().indexOf(v[0]) ? r = parseInt(v[0], 10) : h = parseFloat(v[0]) : 2 === v.length && (h = parseFloat(v[0]),
            r = parseInt(v[1], 10));
            var y;
            if ("number" != typeof h)
                return y = m._soundById(r),
                y ? y._rate : m._rate;
            if ("loaded" !== m._state || m._playLock)
                return m._queue.push({
                    event: "rate",
                    action: function() {
                        m.rate.apply(m, v)
                    }
                }),
                m;
            void 0 === r && (m._rate = h);
            r = m._getSoundIds(r);
            for (var F = 0; F < r.length; F++)
                if (y = m._soundById(r[F])) {
                    m.playing(r[F]) && (y._rateSeek = m.seek(r[F]),
                    y._playStart = m._webAudio ? t.ctx.currentTime : y._playStart);
                    y._rate = h;
                    m._webAudio && y._node && y._node.bufferSource ? y._node.bufferSource.playbackRate.setValueAtTime(h, t.ctx.currentTime) : y._node && (y._node.playbackRate = h);
                    var L = m.seek(r[F]);
                    L = 1E3 * ((m._sprite[y._sprite][0] + m._sprite[y._sprite][1]) / 1E3 - L) / Math.abs(y._rate);
                    !m._endTimers[r[F]] && y._paused || (m._clearTimer(r[F]),
                    m._endTimers[r[F]] = setTimeout(m._ended.bind(m, y), L));
                    m._emit("rate", y._id)
                }
            return m
        },
        seek: function() {
            var h, r, m = this, v = arguments;
            0 === v.length ? m._sounds.length && (r = m._sounds[0]._id) : 1 === v.length ? 0 <= m._getSoundIds().indexOf(v[0]) ? r = parseInt(v[0], 10) : m._sounds.length && (r = m._sounds[0]._id,
            h = parseFloat(v[0])) : 2 === v.length && (h = parseFloat(v[0]),
            r = parseInt(v[1], 10));
            if (void 0 === r)
                return 0;
            if ("number" == typeof h && ("loaded" !== m._state || m._playLock))
                return m._queue.push({
                    event: "seek",
                    action: function() {
                        m.seek.apply(m, v)
                    }
                }),
                m;
            var y = m._soundById(r);
            if (y) {
                if (!("number" == typeof h && 0 <= h))
                    return m._webAudio ? (h = m.playing(r) ? t.ctx.currentTime - y._playStart : 0,
                    y._seek + ((y._rateSeek ? y._rateSeek - y._seek : 0) + h * Math.abs(y._rate))) : y._node.currentTime;
                var F = m.playing(r);
                F && m.pause(r, !0);
                y._seek = h;
                y._ended = !1;
                m._clearTimer(r);
                m._webAudio || !y._node || isNaN(y._node.duration) || (y._node.currentTime = h);
                var L = function() {
                    F && m.play(r, !0);
                    m._emit("seek", r)
                };
                if (F && !m._webAudio) {
                    var V = function() {
                        m._playLock ? setTimeout(V, 0) : L()
                    };
                    setTimeout(V, 0)
                } else
                    L()
            }
            return m
        },
        playing: function(h) {
            if ("number" == typeof h)
                return h = this._soundById(h),
                !!h && !h._paused;
            for (h = 0; h < this._sounds.length; h++)
                if (!this._sounds[h]._paused)
                    return !0;
            return !1
        },
        duration: function(h) {
            var r = this._duration;
            h = this._soundById(h);
            return h && (r = this._sprite[h._sprite][1] / 1E3),
            r
        },
        state: function() {
            return this._state
        },
        unload: function() {
            for (var h = this._sounds, r = 0; r < h.length; r++)
                h[r]._paused || this.stop(h[r]._id),
                this._webAudio || (this._clearSound(h[r]._node),
                h[r]._node.removeEventListener("error", h[r]._errorFn, !1),
                h[r]._node.removeEventListener(t._canPlayEvent, h[r]._loadFn, !1),
                h[r]._node.removeEventListener("ended", h[r]._endFn, !1),
                t._releaseHtml5Audio(h[r]._node)),
                delete h[r]._node,
                this._clearTimer(h[r]._id);
            r = t._howls.indexOf(this);
            0 <= r && t._howls.splice(r, 1);
            h = !0;
            for (r = 0; r < t._howls.length; r++)
                if (t._howls[r]._src === this._src || 0 <= this._src.indexOf(t._howls[r]._src)) {
                    h = !1;
                    break
                }
            return F && h && delete F[this._src],
            t.noAudio = !1,
            this._state = "unloaded",
            this._sounds = [],
            null
        },
        on: function(h, r, m, v) {
            h = this["_on" + h];
            return "function" == typeof r && h.push(v ? {
                id: m,
                fn: r,
                once: v
            } : {
                id: m,
                fn: r
            }),
            this
        },
        off: function(h, m, v) {
            var r = this["_on" + h];
            if ("number" == typeof m && (v = m,
            m = null),
            m || v)
                for (h = 0; h < r.length; h++) {
                    var t = v === r[h].id;
                    if (m === r[h].fn && t || !m && t) {
                        r.splice(h, 1);
                        break
                    }
                }
            else if (h)
                this["_on" + h] = [];
            else
                for (m = Object.keys(this),
                h = 0; h < m.length; h++)
                    0 === m[h].indexOf("_on") && Array.isArray(this[m[h]]) && (this[m[h]] = []);
            return this
        },
        once: function(h, m, v) {
            return this.on(h, m, v, 1),
            this
        },
        _emit: function(h, m, v) {
            for (var r = this["_on" + h], t = r.length - 1; 0 <= t; t--)
                r[t].id && r[t].id !== m && "load" !== h || (setTimeout(function(h) {
                    h.call(this, m, v)
                }
                .bind(this, r[t].fn), 0),
                r[t].once && this.off(h, r[t].fn, r[t].id));
            return this._loadQueue(h),
            this
        },
        _loadQueue: function(h) {
            if (0 < this._queue.length) {
                var m = this._queue[0];
                m.event === h && (this._queue.shift(),
                this._loadQueue());
                h || m.action()
            }
            return this
        },
        _ended: function(h) {
            var m = h._sprite;
            if (!this._webAudio && h._node && !h._node.paused && !h._node.ended && h._node.currentTime < h._stop)
                return setTimeout(this._ended.bind(this, h), 100),
                this;
            m = !(!h._loop && !this._sprite[m][2]);
            if (this._emit("end", h._id),
            !this._webAudio && m && this.stop(h._id, !0).play(h._id),
            this._webAudio && m) {
                this._emit("play", h._id);
                h._seek = h._start || 0;
                h._rateSeek = 0;
                h._playStart = t.ctx.currentTime;
                var v = 1E3 * (h._stop - h._start) / Math.abs(h._rate);
                this._endTimers[h._id] = setTimeout(this._ended.bind(this, h), v)
            }
            return this._webAudio && !m && (h._paused = !0,
            h._ended = !0,
            h._seek = h._start || 0,
            h._rateSeek = 0,
            this._clearTimer(h._id),
            this._cleanBuffer(h._node),
            t._autoSuspend()),
            this._webAudio || m || this.stop(h._id, !0),
            this
        },
        _clearTimer: function(h) {
            if (this._endTimers[h]) {
                if ("function" != typeof this._endTimers[h])
                    clearTimeout(this._endTimers[h]);
                else {
                    var m = this._soundById(h);
                    m && m._node && m._node.removeEventListener("ended", this._endTimers[h], !1)
                }
                delete this._endTimers[h]
            }
            return this
        },
        _soundById: function(h) {
            for (var m = 0; m < this._sounds.length; m++)
                if (h === this._sounds[m]._id)
                    return this._sounds[m];
            return null
        },
        _inactiveSound: function() {
            this._drain();
            for (var h = 0; h < this._sounds.length; h++)
                if (this._sounds[h]._ended)
                    return this._sounds[h].reset();
            return new H(this)
        },
        _drain: function() {
            var h = this._pool, m = 0, v;
            if (!(this._sounds.length < h)) {
                for (v = 0; v < this._sounds.length; v++)
                    this._sounds[v]._ended && m++;
                for (v = this._sounds.length - 1; 0 <= v && !(m <= h); v--)
                    this._sounds[v]._ended && (this._webAudio && this._sounds[v]._node && this._sounds[v]._node.disconnect(0),
                    this._sounds.splice(v, 1),
                    m--)
            }
        },
        _getSoundIds: function(h) {
            if (void 0 === h) {
                h = [];
                for (var m = 0; m < this._sounds.length; m++)
                    h.push(this._sounds[m]._id);
                return h
            }
            return [h]
        },
        _refreshBuffer: function(h) {
            return h._node.bufferSource = t.ctx.createBufferSource(),
            h._node.bufferSource.buffer = F[this._src],
            h._panner ? h._node.bufferSource.connect(h._panner) : h._node.bufferSource.connect(h._node),
            h._node.bufferSource.loop = h._loop,
            h._loop && (h._node.bufferSource.loopStart = h._start || 0,
            h._node.bufferSource.loopEnd = h._stop || 0),
            h._node.bufferSource.playbackRate.setValueAtTime(h._rate, t.ctx.currentTime),
            this
        },
        _cleanBuffer: function(h) {
            var m = t._navigator && 0 <= t._navigator.vendor.indexOf("Apple");
            if (!h.bufferSource)
                return this;
            if (t._scratchBuffer && h.bufferSource && (h.bufferSource.onended = null,
            h.bufferSource.disconnect(0),
            m))
                try {
                    h.bufferSource.buffer = t._scratchBuffer
                } catch (N) {}
            return h.bufferSource = null,
            this
        },
        _clearSound: function(h) {
            /MSIE |Trident\//.test(t._navigator && t._navigator.userAgent) || (h.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")
        }
    };
    var H = function(h) {
        this._parent = h;
        this.init()
    };
    H.prototype = {
        init: function() {
            var h = this._parent;
            return this._muted = h._muted,
            this._loop = h._loop,
            this._volume = h._volume,
            this._rate = h._rate,
            this._seek = 0,
            this._paused = !0,
            this._ended = !0,
            this._sprite = "__default",
            this._id = ++t._counter,
            h._sounds.push(this),
            this.create(),
            this
        },
        create: function() {
            var h = this._parent
              , m = t._muted || this._muted || this._parent._muted ? 0 : this._volume;
            return h._webAudio ? (this._node = void 0 === t.ctx.createGain ? t.ctx.createGainNode() : t.ctx.createGain(),
            this._node.gain.setValueAtTime(m, t.ctx.currentTime),
            this._node.paused = !0,
            this._node.connect(t.masterGain)) : t.noAudio || (this._node = t._obtainHtml5Audio(),
            this._errorFn = this._errorListener.bind(this),
            this._node.addEventListener("error", this._errorFn, !1),
            this._loadFn = this._loadListener.bind(this),
            this._node.addEventListener(t._canPlayEvent, this._loadFn, !1),
            this._endFn = this._endListener.bind(this),
            this._node.addEventListener("ended", this._endFn, !1),
            this._node.src = h._src,
            this._node.preload = !0 === h._preload ? "auto" : h._preload,
            this._node.volume = m * t.volume(),
            this._node.load()),
            this
        },
        reset: function() {
            var h = this._parent;
            return this._muted = h._muted,
            this._loop = h._loop,
            this._volume = h._volume,
            this._rate = h._rate,
            this._seek = 0,
            this._rateSeek = 0,
            this._paused = !0,
            this._ended = !0,
            this._sprite = "__default",
            this._id = ++t._counter,
            this
        },
        _errorListener: function() {
            this._parent._emit("loaderror", this._id, this._node.error ? this._node.error.code : 0);
            this._node.removeEventListener("error", this._errorFn, !1)
        },
        _loadListener: function() {
            var h = this._parent;
            h._duration = Math.ceil(10 * this._node.duration) / 10;
            0 === Object.keys(h._sprite).length && (h._sprite = {
                __default: [0, 1E3 * h._duration]
            });
            "loaded" !== h._state && (h._state = "loaded",
            h._emit("load"),
            h._loadQueue());
            this._node.removeEventListener(t._canPlayEvent, this._loadFn, !1)
        },
        _endListener: function() {
            var h = this._parent;
            h._duration === 1 / 0 && (h._duration = Math.ceil(10 * this._node.duration) / 10,
            h._sprite.__default[1] === 1 / 0 && (h._sprite.__default[1] = 1E3 * h._duration),
            h._ended(this));
            this._node.removeEventListener("ended", this._endFn, !1)
        }
    };
    var F = {}
      , O = function(h) {
        var m = h._src;
        if (F[m])
            return h._duration = F[m].duration,
            void W(h);
        if (/^data:[^;]+;base64,/.test(m)) {
            for (var t = atob(m.split(",")[1]), y = new Uint8Array(t.length), L = 0; L < t.length; ++L)
                y[L] = t.charCodeAt(L);
            v(y.buffer, h)
        } else {
            var H = new XMLHttpRequest;
            H.open(h._xhr.method, m, !0);
            H.withCredentials = h._xhr.withCredentials;
            H.responseType = "arraybuffer";
            h._xhr.headers && Object.keys(h._xhr.headers).forEach(function(m) {
                H.setRequestHeader(m, h._xhr.headers[m])
            });
            H.onload = function() {
                var m = (H.status + "")[0];
                if ("0" !== m && "2" !== m && "3" !== m)
                    return void h._emit("loaderror", null, "Failed loading audio file with status: " + H.status + ".");
                v(H.response, h)
            }
            ;
            H.onerror = function() {
                h._webAudio && (h._html5 = !0,
                h._webAudio = !1,
                h._sounds = [],
                delete F[m],
                h.load())
            }
            ;
            V(H)
        }
    }
      , V = function(h) {
        try {
            h.send()
        } catch (r) {
            h.onerror()
        }
    }
      , v = function(h, m) {
        var r = function() {
            m._emit("loaderror", null, "Decoding audio data failed.")
        }
          , v = function(h) {
            h && 0 < m._sounds.length ? (F[m._src] = h,
            W(m, h)) : r()
        };
        "undefined" != typeof Promise && 1 === t.ctx.decodeAudioData.length ? t.ctx.decodeAudioData(h).then(v).catch(r) : t.ctx.decodeAudioData(h, v, r)
    }
      , W = function(h, m) {
        m && !h._duration && (h._duration = m.duration);
        0 === Object.keys(h._sprite).length && (h._sprite = {
            __default: [0, 1E3 * h._duration]
        });
        "loaded" !== h._state && (h._state = "loaded",
        h._emit("load"),
        h._loadQueue())
    }
      , m = function() {
        if (t.usingWebAudio) {
            try {
                "undefined" != typeof AudioContext ? t.ctx = new AudioContext : "undefined" != typeof webkitAudioContext ? t.ctx = new webkitAudioContext : t.usingWebAudio = !1
            } catch (N) {
                t.usingWebAudio = !1
            }
            t.ctx || (t.usingWebAudio = !1);
            var h = /iP(hone|od|ad)/.test(t._navigator && t._navigator.platform)
              , m = t._navigator && t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
            m = m ? parseInt(m[1], 10) : null;
            h && m && 9 > m && (h = /safari/.test(t._navigator && t._navigator.userAgent.toLowerCase()),
            t._navigator && !h && (t.usingWebAudio = !1));
            t.usingWebAudio && (t.masterGain = void 0 === t.ctx.createGain ? t.ctx.createGainNode() : t.ctx.createGain(),
            t.masterGain.gain.setValueAtTime(t._muted ? 0 : t._volume, t.ctx.currentTime),
            t.masterGain.connect(t.ctx.destination));
            t._setup()
        }
    };
    "function" == typeof define && define.amd && define([], function() {
        return {
            Howler: t,
            Howl: y
        }
    });
    "undefined" != typeof exports && (exports.Howler = t,
    exports.Howl = y);
    "undefined" != typeof global ? (global.HowlerGlobal = L,
    global.Howler = t,
    global.Howl = y,
    global.Sound = H) : "undefined" != typeof window && (window.HowlerGlobal = L,
    window.Howler = t,
    window.Howl = y,
    window.Sound = H)
}(),
!function() {
    HowlerGlobal.prototype._pos = [0, 0, 0];
    HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
    HowlerGlobal.prototype.stereo = function(t) {
        if (!this.ctx || !this.ctx.listener)
            return this;
        for (var y = this._howls.length - 1; 0 <= y; y--)
            this._howls[y].stereo(t);
        return this
    }
    ;
    HowlerGlobal.prototype.pos = function(t, y, L) {
        return this.ctx && this.ctx.listener ? (y = "number" != typeof y ? this._pos[1] : y,
        L = "number" != typeof L ? this._pos[2] : L,
        "number" != typeof t ? this._pos : (this._pos = [t, y, L],
        void 0 !== this.ctx.listener.positionX ? (this.ctx.listener.positionX.setTargetAtTime(this._pos[0], Howler.ctx.currentTime, .1),
        this.ctx.listener.positionY.setTargetAtTime(this._pos[1], Howler.ctx.currentTime, .1),
        this.ctx.listener.positionZ.setTargetAtTime(this._pos[2], Howler.ctx.currentTime, .1)) : this.ctx.listener.setPosition(this._pos[0], this._pos[1], this._pos[2]),
        this)) : this
    }
    ;
    HowlerGlobal.prototype.orientation = function(t, y, L, F, O, V) {
        if (!this.ctx || !this.ctx.listener)
            return this;
        var v = this._orientation;
        return y = "number" != typeof y ? v[1] : y,
        L = "number" != typeof L ? v[2] : L,
        F = "number" != typeof F ? v[3] : F,
        O = "number" != typeof O ? v[4] : O,
        V = "number" != typeof V ? v[5] : V,
        "number" != typeof t ? v : (this._orientation = [t, y, L, F, O, V],
        void 0 !== this.ctx.listener.forwardX ? (this.ctx.listener.forwardX.setTargetAtTime(t, Howler.ctx.currentTime, .1),
        this.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, .1),
        this.ctx.listener.forwardZ.setTargetAtTime(L, Howler.ctx.currentTime, .1),
        this.ctx.listener.upX.setTargetAtTime(F, Howler.ctx.currentTime, .1),
        this.ctx.listener.upY.setTargetAtTime(O, Howler.ctx.currentTime, .1),
        this.ctx.listener.upZ.setTargetAtTime(V, Howler.ctx.currentTime, .1)) : this.ctx.listener.setOrientation(t, y, L, F, O, V),
        this)
    }
    ;
    Howl.prototype.init = function(t) {
        return function(y) {
            return this._orientation = y.orientation || [1, 0, 0],
            this._stereo = y.stereo || null,
            this._pos = y.pos || null,
            this._pannerAttr = {
                coneInnerAngle: void 0 !== y.coneInnerAngle ? y.coneInnerAngle : 360,
                coneOuterAngle: void 0 !== y.coneOuterAngle ? y.coneOuterAngle : 360,
                coneOuterGain: void 0 !== y.coneOuterGain ? y.coneOuterGain : 0,
                distanceModel: void 0 !== y.distanceModel ? y.distanceModel : "inverse",
                maxDistance: void 0 !== y.maxDistance ? y.maxDistance : 1E4,
                panningModel: void 0 !== y.panningModel ? y.panningModel : "HRTF",
                refDistance: void 0 !== y.refDistance ? y.refDistance : 1,
                rolloffFactor: void 0 !== y.rolloffFactor ? y.rolloffFactor : 1
            },
            this._onstereo = y.onstereo ? [{
                fn: y.onstereo
            }] : [],
            this._onpos = y.onpos ? [{
                fn: y.onpos
            }] : [],
            this._onorientation = y.onorientation ? [{
                fn: y.onorientation
            }] : [],
            t.call(this, y)
        }
    }(Howl.prototype.init);
    Howl.prototype.stereo = function(t, y) {
        var H = this;
        if (!H._webAudio)
            return H;
        if ("loaded" !== H._state)
            return H._queue.push({
                event: "stereo",
                action: function() {
                    H.stereo(t, y)
                }
            }),
            H;
        var F = void 0 === Howler.ctx.createStereoPanner ? "spatial" : "stereo";
        if (void 0 === y) {
            if ("number" != typeof t)
                return H._stereo;
            H._stereo = t;
            H._pos = [t, 0, 0]
        }
        for (var O = H._getSoundIds(y), V = 0; V < O.length; V++) {
            var v = H._soundById(O[V]);
            if (v) {
                if ("number" != typeof t)
                    return v._stereo;
                v._stereo = t;
                v._pos = [t, 0, 0];
                v._node && (v._pannerAttr.panningModel = "equalpower",
                v._panner && v._panner.pan || L(v, F),
                "spatial" === F ? void 0 !== v._panner.positionX ? (v._panner.positionX.setValueAtTime(t, Howler.ctx.currentTime),
                v._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime),
                v._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime)) : v._panner.setPosition(t, 0, 0) : v._panner.pan.setValueAtTime(t, Howler.ctx.currentTime));
                H._emit("stereo", v._id)
            }
        }
        return H
    }
    ;
    Howl.prototype.pos = function(t, y, H, F) {
        var O = this;
        if (!O._webAudio)
            return O;
        if ("loaded" !== O._state)
            return O._queue.push({
                event: "pos",
                action: function() {
                    O.pos(t, y, H, F)
                }
            }),
            O;
        if (y = "number" != typeof y ? 0 : y,
        H = "number" != typeof H ? -.5 : H,
        void 0 === F) {
            if ("number" != typeof t)
                return O._pos;
            O._pos = [t, y, H]
        }
        for (var V = O._getSoundIds(F), v = 0; v < V.length; v++) {
            var W = O._soundById(V[v]);
            if (W) {
                if ("number" != typeof t)
                    return W._pos;
                W._pos = [t, y, H];
                W._node && (W._panner && !W._panner.pan || L(W, "spatial"),
                void 0 !== W._panner.positionX ? (W._panner.positionX.setValueAtTime(t, Howler.ctx.currentTime),
                W._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime),
                W._panner.positionZ.setValueAtTime(H, Howler.ctx.currentTime)) : W._panner.setPosition(t, y, H));
                O._emit("pos", W._id)
            }
        }
        return O
    }
    ;
    Howl.prototype.orientation = function(t, y, H, F) {
        var O = this;
        if (!O._webAudio)
            return O;
        if ("loaded" !== O._state)
            return O._queue.push({
                event: "orientation",
                action: function() {
                    O.orientation(t, y, H, F)
                }
            }),
            O;
        if (y = "number" != typeof y ? O._orientation[1] : y,
        H = "number" != typeof H ? O._orientation[2] : H,
        void 0 === F) {
            if ("number" != typeof t)
                return O._orientation;
            O._orientation = [t, y, H]
        }
        for (var V = O._getSoundIds(F), v = 0; v < V.length; v++) {
            var W = O._soundById(V[v]);
            if (W) {
                if ("number" != typeof t)
                    return W._orientation;
                W._orientation = [t, y, H];
                W._node && (W._panner || (W._pos || (W._pos = O._pos || [0, 0, -.5]),
                L(W, "spatial")),
                void 0 !== W._panner.orientationX ? (W._panner.orientationX.setValueAtTime(t, Howler.ctx.currentTime),
                W._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime),
                W._panner.orientationZ.setValueAtTime(H, Howler.ctx.currentTime)) : W._panner.setOrientation(t, y, H));
                O._emit("orientation", W._id)
            }
        }
        return O
    }
    ;
    Howl.prototype.pannerAttr = function() {
        var t, y, H = arguments;
        if (!this._webAudio)
            return this;
        if (0 === H.length)
            return this._pannerAttr;
        if (1 === H.length) {
            if ("object" != typeof H[0])
                return y = this._soundById(parseInt(H[0], 10)),
                y ? y._pannerAttr : this._pannerAttr;
            var F = H[0];
            void 0 === t && (F.pannerAttr || (F.pannerAttr = {
                coneInnerAngle: F.coneInnerAngle,
                coneOuterAngle: F.coneOuterAngle,
                coneOuterGain: F.coneOuterGain,
                distanceModel: F.distanceModel,
                maxDistance: F.maxDistance,
                refDistance: F.refDistance,
                rolloffFactor: F.rolloffFactor,
                panningModel: F.panningModel
            }),
            this._pannerAttr = {
                coneInnerAngle: void 0 !== F.pannerAttr.coneInnerAngle ? F.pannerAttr.coneInnerAngle : this._coneInnerAngle,
                coneOuterAngle: void 0 !== F.pannerAttr.coneOuterAngle ? F.pannerAttr.coneOuterAngle : this._coneOuterAngle,
                coneOuterGain: void 0 !== F.pannerAttr.coneOuterGain ? F.pannerAttr.coneOuterGain : this._coneOuterGain,
                distanceModel: void 0 !== F.pannerAttr.distanceModel ? F.pannerAttr.distanceModel : this._distanceModel,
                maxDistance: void 0 !== F.pannerAttr.maxDistance ? F.pannerAttr.maxDistance : this._maxDistance,
                refDistance: void 0 !== F.pannerAttr.refDistance ? F.pannerAttr.refDistance : this._refDistance,
                rolloffFactor: void 0 !== F.pannerAttr.rolloffFactor ? F.pannerAttr.rolloffFactor : this._rolloffFactor,
                panningModel: void 0 !== F.pannerAttr.panningModel ? F.pannerAttr.panningModel : this._panningModel
            })
        } else
            2 === H.length && (F = H[0],
            t = parseInt(H[1], 10));
        t = this._getSoundIds(t);
        for (H = 0; H < t.length; H++)
            if (y = this._soundById(t[H])) {
                var O = y._pannerAttr;
                O = {
                    coneInnerAngle: void 0 !== F.coneInnerAngle ? F.coneInnerAngle : O.coneInnerAngle,
                    coneOuterAngle: void 0 !== F.coneOuterAngle ? F.coneOuterAngle : O.coneOuterAngle,
                    coneOuterGain: void 0 !== F.coneOuterGain ? F.coneOuterGain : O.coneOuterGain,
                    distanceModel: void 0 !== F.distanceModel ? F.distanceModel : O.distanceModel,
                    maxDistance: void 0 !== F.maxDistance ? F.maxDistance : O.maxDistance,
                    refDistance: void 0 !== F.refDistance ? F.refDistance : O.refDistance,
                    rolloffFactor: void 0 !== F.rolloffFactor ? F.rolloffFactor : O.rolloffFactor,
                    panningModel: void 0 !== F.panningModel ? F.panningModel : O.panningModel
                };
                var V = y._panner;
                V || (y._pos || (y._pos = this._pos || [0, 0, -.5]),
                L(y, "spatial"),
                V = y._panner);
                V.coneInnerAngle = O.coneInnerAngle;
                V.coneOuterAngle = O.coneOuterAngle;
                V.coneOuterGain = O.coneOuterGain;
                V.distanceModel = O.distanceModel;
                V.maxDistance = O.maxDistance;
                V.refDistance = O.refDistance;
                V.rolloffFactor = O.rolloffFactor;
                V.panningModel = O.panningModel
            }
        return this
    }
    ;
    Sound.prototype.init = function(t) {
        return function() {
            var y = this._parent;
            this._orientation = y._orientation;
            this._stereo = y._stereo;
            this._pos = y._pos;
            this._pannerAttr = y._pannerAttr;
            t.call(this);
            this._stereo ? y.stereo(this._stereo) : this._pos && y.pos(this._pos[0], this._pos[1], this._pos[2], this._id)
        }
    }(Sound.prototype.init);
    Sound.prototype.reset = function(t) {
        return function() {
            var y = this._parent;
            return this._orientation = y._orientation,
            this._stereo = y._stereo,
            this._pos = y._pos,
            this._pannerAttr = y._pannerAttr,
            this._stereo ? y.stereo(this._stereo) : this._pos ? y.pos(this._pos[0], this._pos[1], this._pos[2], this._id) : this._panner && (this._panner.disconnect(0),
            this._panner = void 0,
            y._refreshBuffer(this)),
            t.call(this)
        }
    }(Sound.prototype.reset);
    var L = function(t, y) {
        "spatial" === (y || "spatial") ? (t._panner = Howler.ctx.createPanner(),
        t._panner.coneInnerAngle = t._pannerAttr.coneInnerAngle,
        t._panner.coneOuterAngle = t._pannerAttr.coneOuterAngle,
        t._panner.coneOuterGain = t._pannerAttr.coneOuterGain,
        t._panner.distanceModel = t._pannerAttr.distanceModel,
        t._panner.maxDistance = t._pannerAttr.maxDistance,
        t._panner.refDistance = t._pannerAttr.refDistance,
        t._panner.rolloffFactor = t._pannerAttr.rolloffFactor,
        t._panner.panningModel = t._pannerAttr.panningModel,
        void 0 !== t._panner.positionX ? (t._panner.positionX.setValueAtTime(t._pos[0], Howler.ctx.currentTime),
        t._panner.positionY.setValueAtTime(t._pos[1], Howler.ctx.currentTime),
        t._panner.positionZ.setValueAtTime(t._pos[2], Howler.ctx.currentTime)) : t._panner.setPosition(t._pos[0], t._pos[1], t._pos[2]),
        void 0 !== t._panner.orientationX ? (t._panner.orientationX.setValueAtTime(t._orientation[0], Howler.ctx.currentTime),
        t._panner.orientationY.setValueAtTime(t._orientation[1], Howler.ctx.currentTime),
        t._panner.orientationZ.setValueAtTime(t._orientation[2], Howler.ctx.currentTime)) : t._panner.setOrientation(t._orientation[0], t._orientation[1], t._orientation[2])) : (t._panner = Howler.ctx.createStereoPanner(),
        t._panner.pan.setValueAtTime(t._stereo, Howler.ctx.currentTime));
        t._panner.connect(t._node);
        t._paused || t._parent.pause(t._id, !0).play(t._id, !0)
    }
}());
!function(L) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = L() : "function" == typeof define && define.amd ? define([], L) : ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).pako = L()
}(function() {
    return function F(t, y, H) {
        function O(v, m) {
            if (!y[v]) {
                if (!t[v]) {
                    var h = "function" == typeof require && require;
                    if (!m && h)
                        return h(v, !0);
                    if (V)
                        return V(v, !0);
                    m = Error("Cannot find module '" + v + "'");
                    throw m.code = "MODULE_NOT_FOUND",
                    m;
                }
                m = y[v] = {
                    exports: {}
                };
                t[v][0].call(m.exports, function(h) {
                    var m = t[v][1][h];
                    return O(m ? m : h)
                }, m, m.exports, F, t, y, H)
            }
            return y[v].exports
        }
        for (var V = "function" == typeof require && require, v = 0; v < H.length; v++)
            O(H[v]);
        return O
    }({
        1: [function(t, y, H) {
            function F(t) {
                if (!(this instanceof F))
                    return new F(t);
                t = this.options = v.assign({
                    level: D,
                    method: va,
                    chunkSize: 16384,
                    windowBits: 15,
                    memLevel: 8,
                    strategy: Ya,
                    to: ""
                }, t || {});
                t.raw && 0 < t.windowBits ? t.windowBits = -t.windowBits : t.gzip && 0 < t.windowBits && 16 > t.windowBits && (t.windowBits += 16);
                this.err = 0;
                this.msg = "";
                this.ended = !1;
                this.chunks = [];
                this.strm = new h;
                this.strm.avail_out = 0;
                var y = V.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
                if (y !== N)
                    throw Error(m[y]);
                if (t.header && V.deflateSetHeader(this.strm, t.header),
                t.dictionary) {
                    var H;
                    if (H = "string" == typeof t.dictionary ? W.string2buf(t.dictionary) : "[object ArrayBuffer]" === r.call(t.dictionary) ? new Uint8Array(t.dictionary) : t.dictionary,
                    y = V.deflateSetDictionary(this.strm, H),
                    y !== N)
                        throw Error(m[y]);
                    this._dict_set = !0
                }
            }
            function O(h, m) {
                m = new F(m);
                if (m.push(h, !0),
                m.err)
                    throw m.msg;
                return m.result
            }
            var V = t("./zlib/deflate")
              , v = t("./utils/common")
              , W = t("./utils/strings")
              , m = t("./zlib/messages")
              , h = t("./zlib/zstream")
              , r = Object.prototype.toString
              , N = 0
              , D = -1
              , Ya = 0
              , va = 8;
            F.prototype.push = function(h, m) {
                var t, y = this.strm, D = this.options.chunkSize;
                if (this.ended)
                    return !1;
                m = m === ~~m ? m : !0 === m ? 4 : 0;
                "string" == typeof h ? y.input = W.string2buf(h) : "[object ArrayBuffer]" === r.call(h) ? y.input = new Uint8Array(h) : y.input = h;
                y.next_in = 0;
                y.avail_in = y.input.length;
                do {
                    if (0 === y.avail_out && (y.output = new v.Buf8(D),
                    y.next_out = 0,
                    y.avail_out = D),
                    t = V.deflate(y, m),
                    1 !== t && t !== N)
                        return this.onEnd(t),
                        this.ended = !0,
                        !1;
                    0 !== y.avail_out && (0 !== y.avail_in || 4 !== m && 2 !== m) || ("string" === this.options.to ? this.onData(W.buf2binstring(v.shrinkBuf(y.output, y.next_out))) : this.onData(v.shrinkBuf(y.output, y.next_out)))
                } while ((0 < y.avail_in || 0 === y.avail_out) && 1 !== t);
                return 4 === m ? (t = V.deflateEnd(this.strm),
                this.onEnd(t),
                this.ended = !0,
                t === N) : 2 !== m || (this.onEnd(N),
                y.avail_out = 0,
                !0)
            }
            ;
            F.prototype.onData = function(h) {
                this.chunks.push(h)
            }
            ;
            F.prototype.onEnd = function(h) {
                h === N && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = v.flattenChunks(this.chunks));
                this.chunks = [];
                this.err = h;
                this.msg = this.strm.msg
            }
            ;
            H.Deflate = F;
            H.deflate = O;
            H.deflateRaw = function(h, m) {
                return m = m || {},
                m.raw = !0,
                O(h, m)
            }
            ;
            H.gzip = function(h, m) {
                return m = m || {},
                m.gzip = !0,
                O(h, m)
            }
        }
        , {
            "./utils/common": 3,
            "./utils/strings": 4,
            "./zlib/deflate": 8,
            "./zlib/messages": 13,
            "./zlib/zstream": 15
        }],
        2: [function(t, y, H) {
            function F(t) {
                if (!(this instanceof F))
                    return new F(t);
                var y = this.options = v.assign({
                    chunkSize: 16384,
                    windowBits: 0,
                    to: ""
                }, t || {});
                y.raw && 0 <= y.windowBits && 16 > y.windowBits && (y.windowBits = -y.windowBits,
                0 === y.windowBits && (y.windowBits = -15));
                !(0 <= y.windowBits && 16 > y.windowBits) || t && t.windowBits || (y.windowBits += 32);
                15 < y.windowBits && 48 > y.windowBits && 0 === (15 & y.windowBits) && (y.windowBits |= 15);
                this.err = 0;
                this.msg = "";
                this.ended = !1;
                this.chunks = [];
                this.strm = new r;
                this.strm.avail_out = 0;
                t = V.inflateInit2(this.strm, y.windowBits);
                if (t !== m.Z_OK)
                    throw Error(h[t]);
                this.header = new N;
                V.inflateGetHeader(this.strm, this.header)
            }
            function O(h, m) {
                m = new F(m);
                if (m.push(h, !0),
                m.err)
                    throw m.msg;
                return m.result
            }
            var V = t("./zlib/inflate")
              , v = t("./utils/common")
              , W = t("./utils/strings")
              , m = t("./zlib/constants")
              , h = t("./zlib/messages")
              , r = t("./zlib/zstream")
              , N = t("./zlib/gzheader")
              , D = Object.prototype.toString;
            F.prototype.push = function(h, r) {
                var t, y, F, N, H, O = this.strm, va = this.options.chunkSize, Ya = this.options.dictionary, ma = !1;
                if (this.ended)
                    return !1;
                r = r === ~~r ? r : !0 === r ? m.Z_FINISH : m.Z_NO_FLUSH;
                "string" == typeof h ? O.input = W.binstring2buf(h) : "[object ArrayBuffer]" === D.call(h) ? O.input = new Uint8Array(h) : O.input = h;
                O.next_in = 0;
                O.avail_in = O.input.length;
                do {
                    if (0 === O.avail_out && (O.output = new v.Buf8(va),
                    O.next_out = 0,
                    O.avail_out = va),
                    t = V.inflate(O, m.Z_NO_FLUSH),
                    t === m.Z_NEED_DICT && Ya && (H = "string" == typeof Ya ? W.string2buf(Ya) : "[object ArrayBuffer]" === D.call(Ya) ? new Uint8Array(Ya) : Ya,
                    t = V.inflateSetDictionary(this.strm, H)),
                    t === m.Z_BUF_ERROR && !0 === ma && (t = m.Z_OK,
                    ma = !1),
                    t !== m.Z_STREAM_END && t !== m.Z_OK)
                        return this.onEnd(t),
                        this.ended = !0,
                        !1;
                    O.next_out && (0 !== O.avail_out && t !== m.Z_STREAM_END && (0 !== O.avail_in || r !== m.Z_FINISH && r !== m.Z_SYNC_FLUSH) || ("string" === this.options.to ? (y = W.utf8border(O.output, O.next_out),
                    F = O.next_out - y,
                    N = W.buf2string(O.output, y),
                    O.next_out = F,
                    O.avail_out = va - F,
                    F && v.arraySet(O.output, O.output, y, F, 0),
                    this.onData(N)) : this.onData(v.shrinkBuf(O.output, O.next_out))));
                    0 === O.avail_in && 0 === O.avail_out && (ma = !0)
                } while ((0 < O.avail_in || 0 === O.avail_out) && t !== m.Z_STREAM_END);
                return t === m.Z_STREAM_END && (r = m.Z_FINISH),
                r === m.Z_FINISH ? (t = V.inflateEnd(this.strm),
                this.onEnd(t),
                this.ended = !0,
                t === m.Z_OK) : r !== m.Z_SYNC_FLUSH || (this.onEnd(m.Z_OK),
                O.avail_out = 0,
                !0)
            }
            ;
            F.prototype.onData = function(h) {
                this.chunks.push(h)
            }
            ;
            F.prototype.onEnd = function(h) {
                h === m.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = v.flattenChunks(this.chunks));
                this.chunks = [];
                this.err = h;
                this.msg = this.strm.msg
            }
            ;
            H.Inflate = F;
            H.inflate = O;
            H.inflateRaw = function(h, m) {
                return m = m || {},
                m.raw = !0,
                O(h, m)
            }
            ;
            H.ungzip = O
        }
        , {
            "./utils/common": 3,
            "./utils/strings": 4,
            "./zlib/constants": 6,
            "./zlib/gzheader": 9,
            "./zlib/inflate": 11,
            "./zlib/messages": 13,
            "./zlib/zstream": 15
        }],
        3: [function(t, y, H) {
            t = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
            H.assign = function(t) {
                for (var v = Array.prototype.slice.call(arguments, 1); v.length; ) {
                    var y = v.shift();
                    if (y) {
                        if ("object" != typeof y)
                            throw new TypeError(y + "must be non-object");
                        for (var m in y)
                            y.hasOwnProperty(m) && (t[m] = y[m])
                    }
                }
                return t
            }
            ;
            H.shrinkBuf = function(t, v) {
                return t.length === v ? t : t.subarray ? t.subarray(0, v) : (t.length = v,
                t)
            }
            ;
            var F = {
                arraySet: function(t, v, y, m, h) {
                    if (v.subarray && t.subarray)
                        return void t.set(v.subarray(y, y + m), h);
                    for (var r = 0; r < m; r++)
                        t[h + r] = v[y + r]
                },
                flattenChunks: function(t) {
                    var v, y;
                    var m = y = 0;
                    for (v = t.length; m < v; m++)
                        y += t[m].length;
                    var h = new Uint8Array(y);
                    m = y = 0;
                    for (v = t.length; m < v; m++) {
                        var r = t[m];
                        h.set(r, y);
                        y += r.length
                    }
                    return h
                }
            }
              , O = {
                arraySet: function(t, v, y, m, h) {
                    for (var r = 0; r < m; r++)
                        t[h + r] = v[y + r]
                },
                flattenChunks: function(t) {
                    return [].concat.apply([], t)
                }
            };
            H.setTyped = function(t) {
                t ? (H.Buf8 = Uint8Array,
                H.Buf16 = Uint16Array,
                H.Buf32 = Int32Array,
                H.assign(H, F)) : (H.Buf8 = Array,
                H.Buf16 = Array,
                H.Buf32 = Array,
                H.assign(H, O))
            }
            ;
            H.setTyped(t)
        }
        , {}],
        4: [function(t, y, H) {
            function F(m, h) {
                if (65537 > h && (m.subarray && v || !m.subarray && V))
                    return String.fromCharCode.apply(null, O.shrinkBuf(m, h));
                for (var r = "", t = 0; t < h; t++)
                    r += String.fromCharCode(m[t]);
                return r
            }
            var O = t("./common")
              , V = !0
              , v = !0;
            try {
                String.fromCharCode.apply(null, [0])
            } catch (m) {
                V = !1
            }
            try {
                String.fromCharCode.apply(null, new Uint8Array(1))
            } catch (m) {
                v = !1
            }
            var W = new O.Buf8(256);
            for (t = 0; 256 > t; t++)
                W[t] = 252 <= t ? 6 : 248 <= t ? 5 : 240 <= t ? 4 : 224 <= t ? 3 : 192 <= t ? 2 : 1;
            W[254] = W[254] = 1;
            H.string2buf = function(m) {
                var h, r, t, v = m.length, y = 0;
                for (r = 0; r < v; r++) {
                    var F = m.charCodeAt(r);
                    55296 === (64512 & F) && r + 1 < v && (h = m.charCodeAt(r + 1),
                    56320 === (64512 & h) && (F = 65536 + (F - 55296 << 10) + (h - 56320),
                    r++));
                    y += 128 > F ? 1 : 2048 > F ? 2 : 65536 > F ? 3 : 4
                }
                var H = new O.Buf8(y);
                for (r = t = 0; t < y; r++)
                    F = m.charCodeAt(r),
                    55296 === (64512 & F) && r + 1 < v && (h = m.charCodeAt(r + 1),
                    56320 === (64512 & h) && (F = 65536 + (F - 55296 << 10) + (h - 56320),
                    r++)),
                    128 > F ? H[t++] = F : 2048 > F ? (H[t++] = 192 | F >>> 6,
                    H[t++] = 128 | 63 & F) : 65536 > F ? (H[t++] = 224 | F >>> 12,
                    H[t++] = 128 | F >>> 6 & 63,
                    H[t++] = 128 | 63 & F) : (H[t++] = 240 | F >>> 18,
                    H[t++] = 128 | F >>> 12 & 63,
                    H[t++] = 128 | F >>> 6 & 63,
                    H[t++] = 128 | 63 & F);
                return H
            }
            ;
            H.buf2binstring = function(m) {
                return F(m, m.length)
            }
            ;
            H.binstring2buf = function(m) {
                for (var h = new O.Buf8(m.length), r = 0, t = h.length; r < t; r++)
                    h[r] = m.charCodeAt(r);
                return h
            }
            ;
            H.buf2string = function(m, h) {
                var r, t, v, y = h || m.length, H = Array(2 * y);
                for (h = r = 0; h < y; )
                    if (t = m[h++],
                    128 > t)
                        H[r++] = t;
                    else if (v = W[t],
                    4 < v)
                        H[r++] = 65533,
                        h += v - 1;
                    else {
                        for (t &= 2 === v ? 31 : 3 === v ? 15 : 7; 1 < v && h < y; )
                            t = t << 6 | 63 & m[h++],
                            v--;
                        1 < v ? H[r++] = 65533 : 65536 > t ? H[r++] = t : (t -= 65536,
                        H[r++] = 55296 | t >> 10 & 1023,
                        H[r++] = 56320 | 1023 & t)
                    }
                return F(H, r)
            }
            ;
            H.utf8border = function(m, h) {
                var r;
                h = h || m.length;
                h > m.length && (h = m.length);
                for (r = h - 1; 0 <= r && 128 === (192 & m[r]); )
                    r--;
                return 0 > r ? h : 0 === r ? h : r + W[m[r]] > h ? r : h
            }
        }
        , {
            "./common": 3
        }],
        5: [function(t, y, H) {
            y.exports = function(t, y, H, v) {
                var F = 65535 & t | 0;
                t = t >>> 16 & 65535 | 0;
                for (var m; 0 !== H; ) {
                    m = 2E3 < H ? 2E3 : H;
                    H -= m;
                    do
                        F = F + y[v++] | 0,
                        t = t + F | 0;
                    while (--m);
                    F %= 65521;
                    t %= 65521
                }
                return F | t << 16 | 0
            }
        }
        , {}],
        6: [function(t, y, H) {
            y.exports = {
                Z_NO_FLUSH: 0,
                Z_PARTIAL_FLUSH: 1,
                Z_SYNC_FLUSH: 2,
                Z_FULL_FLUSH: 3,
                Z_FINISH: 4,
                Z_BLOCK: 5,
                Z_TREES: 6,
                Z_OK: 0,
                Z_STREAM_END: 1,
                Z_NEED_DICT: 2,
                Z_ERRNO: -1,
                Z_STREAM_ERROR: -2,
                Z_DATA_ERROR: -3,
                Z_BUF_ERROR: -5,
                Z_NO_COMPRESSION: 0,
                Z_BEST_SPEED: 1,
                Z_BEST_COMPRESSION: 9,
                Z_DEFAULT_COMPRESSION: -1,
                Z_FILTERED: 1,
                Z_HUFFMAN_ONLY: 2,
                Z_RLE: 3,
                Z_FIXED: 4,
                Z_DEFAULT_STRATEGY: 0,
                Z_BINARY: 0,
                Z_TEXT: 1,
                Z_UNKNOWN: 2,
                Z_DEFLATED: 8
            }
        }
        , {}],
        7: [function(t, y, H) {
            var F = function() {
                for (var t, y = [], v = 0; 256 > v; v++) {
                    t = v;
                    for (var F = 0; 8 > F; F++)
                        t = 1 & t ? 3988292384 ^ t >>> 1 : t >>> 1;
                    y[v] = t
                }
                return y
            }();
            y.exports = function(t, y, v, H) {
                v = H + v;
                for (t ^= -1; H < v; H++)
                    t = t >>> 8 ^ F[255 & (t ^ y[H])];
                return t ^ -1
            }
        }
        , {}],
        8: [function(t, y, H) {
            function F(h, m) {
                return h.msg = ra[m],
                m
            }
            function O(h) {
                for (var m = h.length; 0 <= --m; )
                    h[m] = 0
            }
            function V(h) {
                var m = h.state
                  , r = m.pending;
                r > h.avail_out && (r = h.avail_out);
                0 !== r && (nb.arraySet(h.output, m.pending_buf, m.pending_out, r, h.next_out),
                h.next_out += r,
                m.pending_out += r,
                h.total_out += r,
                h.avail_out -= r,
                m.pending -= r,
                0 === m.pending && (m.pending_out = 0))
            }
            function v(h, m) {
                qa._tr_flush_block(h, 0 <= h.block_start ? h.block_start : -1, h.strstart - h.block_start, m);
                h.block_start = h.strstart;
                V(h.strm)
            }
            function W(h, m) {
                h.pending_buf[h.pending++] = m
            }
            function m(h, m) {
                h.pending_buf[h.pending++] = m >>> 8 & 255;
                h.pending_buf[h.pending++] = 255 & m
            }
            function h(h, m) {
                var r, z, K = h.max_chain_length, t = h.strstart, v = h.prev_length, y = h.nice_match, E = h.strstart > h.w_size - Pa ? h.strstart - (h.w_size - Pa) : 0, F = h.window, D = h.w_mask, G = h.prev, P = h.strstart + Ga, ma = F[t + v - 1], H = F[t + v];
                h.prev_length >= h.good_match && (K >>= 2);
                y > h.lookahead && (y = h.lookahead);
                do
                    if (r = m,
                    F[r + v] === H && F[r + v - 1] === ma && F[r] === F[t] && F[++r] === F[t + 1]) {
                        t += 2;
                        for (r++; F[++t] === F[++r] && F[++t] === F[++r] && F[++t] === F[++r] && F[++t] === F[++r] && F[++t] === F[++r] && F[++t] === F[++r] && F[++t] === F[++r] && F[++t] === F[++r] && t < P; )
                            ;
                        if (z = Ga - (P - t),
                        t = P - Ga,
                        z > v) {
                            if (h.match_start = m,
                            v = z,
                            z >= y)
                                break;
                            ma = F[t + v - 1];
                            H = F[t + v]
                        }
                    }
                while ((m = G[m & D]) > E && 0 !== --K);
                return v <= h.lookahead ? v : h.lookahead
            }
            function r(h) {
                var m, r, z = h.w_size;
                do {
                    if (r = h.window_size - h.lookahead - h.strstart,
                    h.strstart >= z + (z - Pa)) {
                        nb.arraySet(h.window, h.window, z, z, 0);
                        h.match_start -= z;
                        h.strstart -= z;
                        h.block_start -= z;
                        var t = m = h.hash_size;
                        do {
                            var K = h.head[--t];
                            h.head[t] = K >= z ? K - z : 0
                        } while (--m);
                        t = m = z;
                        do
                            K = h.prev[--t],
                            h.prev[t] = K >= z ? K - z : 0;
                        while (--m);
                        r += z
                    }
                    if (0 === h.strm.avail_in)
                        break;
                    t = h.strm;
                    K = h.window;
                    var v = h.strstart + h.lookahead
                      , y = t.avail_in;
                    if (m = (y > r && (y = r),
                    0 === y ? 0 : (t.avail_in -= y,
                    nb.arraySet(K, t.input, t.next_in, y, v),
                    1 === t.state.wrap ? t.adler = jb(t.adler, K, y, v) : 2 === t.state.wrap && (t.adler = ua(t.adler, K, y, v)),
                    t.next_in += y,
                    t.total_in += y,
                    y)),
                    h.lookahead += m,
                    h.lookahead + h.insert >= Fa)
                        for (r = h.strstart - h.insert,
                        h.ins_h = h.window[r],
                        h.ins_h = (h.ins_h << h.hash_shift ^ h.window[r + 1]) & h.hash_mask; h.insert && (h.ins_h = (h.ins_h << h.hash_shift ^ h.window[r + Fa - 1]) & h.hash_mask,
                        h.prev[r & h.w_mask] = h.head[h.ins_h],
                        h.head[h.ins_h] = r,
                        r++,
                        h.insert--,
                        !(h.lookahead + h.insert < Fa)); )
                            ;
                } while (h.lookahead < Pa && 0 !== h.strm.avail_in)
            }
            function N(m, t) {
                for (var I, z; ; ) {
                    if (m.lookahead < Pa) {
                        if (r(m),
                        m.lookahead < Pa && t === ma)
                            return U;
                        if (0 === m.lookahead)
                            break
                    }
                    if (I = 0,
                    m.lookahead >= Fa && (m.ins_h = (m.ins_h << m.hash_shift ^ m.window[m.strstart + Fa - 1]) & m.hash_mask,
                    I = m.prev[m.strstart & m.w_mask] = m.head[m.ins_h],
                    m.head[m.ins_h] = m.strstart),
                    0 !== I && m.strstart - I <= m.w_size - Pa && (m.match_length = h(m, I)),
                    m.match_length >= Fa)
                        if (z = qa._tr_tally(m, m.strstart - m.match_start, m.match_length - Fa),
                        m.lookahead -= m.match_length,
                        m.match_length <= m.max_lazy_match && m.lookahead >= Fa) {
                            m.match_length--;
                            do
                                m.strstart++,
                                m.ins_h = (m.ins_h << m.hash_shift ^ m.window[m.strstart + Fa - 1]) & m.hash_mask,
                                I = m.prev[m.strstart & m.w_mask] = m.head[m.ins_h],
                                m.head[m.ins_h] = m.strstart;
                            while (0 !== --m.match_length);
                            m.strstart++
                        } else
                            m.strstart += m.match_length,
                            m.match_length = 0,
                            m.ins_h = m.window[m.strstart],
                            m.ins_h = (m.ins_h << m.hash_shift ^ m.window[m.strstart + 1]) & m.hash_mask;
                    else
                        z = qa._tr_tally(m, 0, m.window[m.strstart]),
                        m.lookahead--,
                        m.strstart++;
                    if (z && (v(m, !1),
                    0 === m.strm.avail_out))
                        return U
                }
                return m.insert = m.strstart < Fa - 1 ? m.strstart : Fa - 1,
                t === pa ? (v(m, !0),
                0 === m.strm.avail_out ? Aa : G) : m.last_lit && (v(m, !1),
                0 === m.strm.avail_out) ? U : gd
            }
            function D(m, t) {
                for (var I, z, y; ; ) {
                    if (m.lookahead < Pa) {
                        if (r(m),
                        m.lookahead < Pa && t === ma)
                            return U;
                        if (0 === m.lookahead)
                            break
                    }
                    if (I = 0,
                    m.lookahead >= Fa && (m.ins_h = (m.ins_h << m.hash_shift ^ m.window[m.strstart + Fa - 1]) & m.hash_mask,
                    I = m.prev[m.strstart & m.w_mask] = m.head[m.ins_h],
                    m.head[m.ins_h] = m.strstart),
                    m.prev_length = m.match_length,
                    m.prev_match = m.match_start,
                    m.match_length = Fa - 1,
                    0 !== I && m.prev_length < m.max_lazy_match && m.strstart - I <= m.w_size - Pa && (m.match_length = h(m, I),
                    5 >= m.match_length && (m.strategy === hb || m.match_length === Fa && 4096 < m.strstart - m.match_start) && (m.match_length = Fa - 1)),
                    m.prev_length >= Fa && m.match_length <= m.prev_length) {
                        y = m.strstart + m.lookahead - Fa;
                        z = qa._tr_tally(m, m.strstart - 1 - m.prev_match, m.prev_length - Fa);
                        m.lookahead -= m.prev_length - 1;
                        m.prev_length -= 2;
                        do
                            ++m.strstart <= y && (m.ins_h = (m.ins_h << m.hash_shift ^ m.window[m.strstart + Fa - 1]) & m.hash_mask,
                            I = m.prev[m.strstart & m.w_mask] = m.head[m.ins_h],
                            m.head[m.ins_h] = m.strstart);
                        while (0 !== --m.prev_length);
                        if (m.match_available = 0,
                        m.match_length = Fa - 1,
                        m.strstart++,
                        z && (v(m, !1),
                        0 === m.strm.avail_out))
                            return U
                    } else if (m.match_available) {
                        if (z = qa._tr_tally(m, 0, m.window[m.strstart - 1]),
                        z && v(m, !1),
                        m.strstart++,
                        m.lookahead--,
                        0 === m.strm.avail_out)
                            return U
                    } else
                        m.match_available = 1,
                        m.strstart++,
                        m.lookahead--
                }
                return m.match_available && (qa._tr_tally(m, 0, m.window[m.strstart - 1]),
                m.match_available = 0),
                m.insert = m.strstart < Fa - 1 ? m.strstart : Fa - 1,
                t === pa ? (v(m, !0),
                0 === m.strm.avail_out ? Aa : G) : m.last_lit && (v(m, !1),
                0 === m.strm.avail_out) ? U : gd
            }
            function Ya(h, m, r, z, t) {
                this.good_length = h;
                this.max_lazy = m;
                this.nice_length = r;
                this.max_chain = z;
                this.func = t
            }
            function va() {
                this.strm = null;
                this.status = 0;
                this.pending_buf = null;
                this.wrap = this.pending = this.pending_out = this.pending_buf_size = 0;
                this.gzhead = null;
                this.gzindex = 0;
                this.method = Fc;
                this.last_flush = -1;
                this.w_mask = this.w_bits = this.w_size = 0;
                this.window = null;
                this.window_size = 0;
                this.head = this.prev = null;
                this.nice_match = this.good_match = this.strategy = this.level = this.max_lazy_match = this.max_chain_length = this.prev_length = this.lookahead = this.match_start = this.strstart = this.match_available = this.prev_match = this.match_length = this.block_start = this.hash_shift = this.hash_mask = this.hash_bits = this.hash_size = this.ins_h = 0;
                this.dyn_ltree = new nb.Buf16(2 * mb);
                this.dyn_dtree = new nb.Buf16(2 * (2 * Q + 1));
                this.bl_tree = new nb.Buf16(2 * (2 * E + 1));
                O(this.dyn_ltree);
                O(this.dyn_dtree);
                O(this.bl_tree);
                this.bl_desc = this.d_desc = this.l_desc = null;
                this.bl_count = new nb.Buf16(db + 1);
                this.heap = new nb.Buf16(2 * Ta + 1);
                O(this.heap);
                this.heap_max = this.heap_len = 0;
                this.depth = new nb.Buf16(2 * Ta + 1);
                O(this.depth);
                this.bi_valid = this.bi_buf = this.insert = this.matches = this.static_len = this.opt_len = this.d_buf = this.last_lit = this.lit_bufsize = this.l_buf = 0
            }
            function Gb(h) {
                var m;
                return h && h.state ? (h.total_in = h.total_out = 0,
                h.data_type = fb,
                m = h.state,
                m.pending = 0,
                m.pending_out = 0,
                0 > m.wrap && (m.wrap = -m.wrap),
                m.status = m.wrap ? ka : S,
                h.adler = 2 === m.wrap ? 0 : 1,
                m.last_flush = ma,
                qa._tr_init(m),
                $a) : F(h, ca)
            }
            function Ab(h) {
                var m = Gb(h);
                m === $a && (h = h.state,
                h.window_size = 2 * h.w_size,
                O(h.head),
                h.max_lazy_match = vb[h.level].max_lazy,
                h.good_match = vb[h.level].good_length,
                h.nice_match = vb[h.level].nice_length,
                h.max_chain_length = vb[h.level].max_chain,
                h.strstart = 0,
                h.block_start = 0,
                h.lookahead = 0,
                h.insert = 0,
                h.match_length = h.prev_length = Fa - 1,
                h.match_available = 0,
                h.ins_h = 0);
                return m
            }
            function Jb(h, m, r, z, t, v) {
                if (!h)
                    return ca;
                var I = 1;
                if (m === za && (m = 6),
                0 > z ? (I = 0,
                z = -z) : 15 < z && (I = 2,
                z -= 16),
                1 > t || t > vc || r !== Fc || 8 > z || 15 < z || 0 > m || 9 < m || 0 > v || v > T)
                    return F(h, ca);
                8 === z && (z = 9);
                var y = new va;
                return h.state = y,
                y.strm = h,
                y.wrap = I,
                y.gzhead = null,
                y.w_bits = z,
                y.w_size = 1 << y.w_bits,
                y.w_mask = y.w_size - 1,
                y.hash_bits = t + 7,
                y.hash_size = 1 << y.hash_bits,
                y.hash_mask = y.hash_size - 1,
                y.hash_shift = ~~((y.hash_bits + Fa - 1) / Fa),
                y.window = new nb.Buf8(2 * y.w_size),
                y.head = new nb.Buf16(y.hash_size),
                y.prev = new nb.Buf16(y.w_size),
                y.lit_bufsize = 1 << t + 6,
                y.pending_buf_size = 4 * y.lit_bufsize,
                y.pending_buf = new nb.Buf8(y.pending_buf_size),
                y.d_buf = 1 * y.lit_bufsize,
                y.l_buf = 3 * y.lit_bufsize,
                y.level = m,
                y.strategy = v,
                y.method = r,
                Ab(h)
            }
            var nb = t("../utils/common")
              , qa = t("./trees")
              , jb = t("./adler32")
              , ua = t("./crc32")
              , ra = t("./messages")
              , ma = 0
              , pa = 4
              , $a = 0
              , ca = -2
              , za = -1
              , hb = 1
              , T = 4
              , fb = 2
              , Fc = 8
              , vc = 9
              , Ta = 286
              , Q = 30
              , E = 19
              , mb = 2 * Ta + 1
              , db = 15
              , Fa = 3
              , Ga = 258
              , Pa = Ga + Fa + 1
              , ka = 42
              , S = 113
              , U = 1
              , gd = 2
              , Aa = 3
              , G = 4;
            var vb = [new Ya(0,0,0,0,function(h, m) {
                var t = 65535;
                for (t > h.pending_buf_size - 5 && (t = h.pending_buf_size - 5); ; ) {
                    if (1 >= h.lookahead) {
                        if (r(h),
                        0 === h.lookahead && m === ma)
                            return U;
                        if (0 === h.lookahead)
                            break
                    }
                    h.strstart += h.lookahead;
                    h.lookahead = 0;
                    var z = h.block_start + t;
                    if ((0 === h.strstart || h.strstart >= z) && (h.lookahead = h.strstart - z,
                    h.strstart = z,
                    v(h, !1),
                    0 === h.strm.avail_out) || h.strstart - h.block_start >= h.w_size - Pa && (v(h, !1),
                    0 === h.strm.avail_out))
                        return U
                }
                return h.insert = 0,
                m === pa ? (v(h, !0),
                0 === h.strm.avail_out ? Aa : G) : (h.strstart > h.block_start && v(h, !1),
                U)
            }
            ), new Ya(4,4,8,4,N), new Ya(4,5,16,8,N), new Ya(4,6,32,32,N), new Ya(4,4,16,16,D), new Ya(8,16,32,32,D), new Ya(8,16,128,128,D), new Ya(8,32,128,256,D), new Ya(32,128,258,1024,D), new Ya(32,258,258,4096,D)];
            H.deflateInit = function(h, m) {
                return Jb(h, m, Fc, 15, 8, 0)
            }
            ;
            H.deflateInit2 = Jb;
            H.deflateReset = Ab;
            H.deflateResetKeep = Gb;
            H.deflateSetHeader = function(h, m) {
                return h && h.state ? 2 !== h.state.wrap ? ca : (h.state.gzhead = m,
                $a) : ca
            }
            ;
            H.deflate = function(h, t) {
                var I, z;
                if (!h || !h.state || 5 < t || 0 > t)
                    return h ? F(h, ca) : ca;
                if (z = h.state,
                !h.output || !h.input && 0 !== h.avail_in || 666 === z.status && t !== pa)
                    return F(h, 0 === h.avail_out ? -5 : ca);
                if (z.strm = h,
                I = z.last_flush,
                z.last_flush = t,
                z.status === ka)
                    if (2 === z.wrap)
                        h.adler = 0,
                        W(z, 31),
                        W(z, 139),
                        W(z, 8),
                        z.gzhead ? (W(z, (z.gzhead.text ? 1 : 0) + (z.gzhead.hcrc ? 2 : 0) + (z.gzhead.extra ? 4 : 0) + (z.gzhead.name ? 8 : 0) + (z.gzhead.comment ? 16 : 0)),
                        W(z, 255 & z.gzhead.time),
                        W(z, z.gzhead.time >> 8 & 255),
                        W(z, z.gzhead.time >> 16 & 255),
                        W(z, z.gzhead.time >> 24 & 255),
                        W(z, 9 === z.level ? 2 : 2 <= z.strategy || 2 > z.level ? 4 : 0),
                        W(z, 255 & z.gzhead.os),
                        z.gzhead.extra && z.gzhead.extra.length && (W(z, 255 & z.gzhead.extra.length),
                        W(z, z.gzhead.extra.length >> 8 & 255)),
                        z.gzhead.hcrc && (h.adler = ua(h.adler, z.pending_buf, z.pending, 0)),
                        z.gzindex = 0,
                        z.status = 69) : (W(z, 0),
                        W(z, 0),
                        W(z, 0),
                        W(z, 0),
                        W(z, 0),
                        W(z, 9 === z.level ? 2 : 2 <= z.strategy || 2 > z.level ? 4 : 0),
                        W(z, 3),
                        z.status = S);
                    else {
                        var y = Fc + (z.w_bits - 8 << 4) << 8;
                        y |= (2 <= z.strategy || 2 > z.level ? 0 : 6 > z.level ? 1 : 6 === z.level ? 2 : 3) << 6;
                        0 !== z.strstart && (y |= 32);
                        z.status = S;
                        m(z, y + (31 - y % 31));
                        0 !== z.strstart && (m(z, h.adler >>> 16),
                        m(z, 65535 & h.adler));
                        h.adler = 1
                    }
                if (69 === z.status)
                    if (z.gzhead.extra) {
                        for (y = z.pending; z.gzindex < (65535 & z.gzhead.extra.length) && (z.pending !== z.pending_buf_size || (z.gzhead.hcrc && z.pending > y && (h.adler = ua(h.adler, z.pending_buf, z.pending - y, y)),
                        V(h),
                        y = z.pending,
                        z.pending !== z.pending_buf_size)); )
                            W(z, 255 & z.gzhead.extra[z.gzindex]),
                            z.gzindex++;
                        z.gzhead.hcrc && z.pending > y && (h.adler = ua(h.adler, z.pending_buf, z.pending - y, y));
                        z.gzindex === z.gzhead.extra.length && (z.gzindex = 0,
                        z.status = 73)
                    } else
                        z.status = 73;
                if (73 === z.status)
                    if (z.gzhead.name) {
                        y = z.pending;
                        do {
                            if (z.pending === z.pending_buf_size && (z.gzhead.hcrc && z.pending > y && (h.adler = ua(h.adler, z.pending_buf, z.pending - y, y)),
                            V(h),
                            y = z.pending,
                            z.pending === z.pending_buf_size)) {
                                var E = 1;
                                break
                            }
                            E = z.gzindex < z.gzhead.name.length ? 255 & z.gzhead.name.charCodeAt(z.gzindex++) : 0;
                            W(z, E)
                        } while (0 !== E);
                        z.gzhead.hcrc && z.pending > y && (h.adler = ua(h.adler, z.pending_buf, z.pending - y, y));
                        0 === E && (z.gzindex = 0,
                        z.status = 91)
                    } else
                        z.status = 91;
                if (91 === z.status)
                    if (z.gzhead.comment) {
                        y = z.pending;
                        do {
                            if (z.pending === z.pending_buf_size && (z.gzhead.hcrc && z.pending > y && (h.adler = ua(h.adler, z.pending_buf, z.pending - y, y)),
                            V(h),
                            y = z.pending,
                            z.pending === z.pending_buf_size)) {
                                E = 1;
                                break
                            }
                            E = z.gzindex < z.gzhead.comment.length ? 255 & z.gzhead.comment.charCodeAt(z.gzindex++) : 0;
                            W(z, E)
                        } while (0 !== E);
                        z.gzhead.hcrc && z.pending > y && (h.adler = ua(h.adler, z.pending_buf, z.pending - y, y));
                        0 === E && (z.status = 103)
                    } else
                        z.status = 103;
                if (103 === z.status && (z.gzhead.hcrc ? (z.pending + 2 > z.pending_buf_size && V(h),
                z.pending + 2 <= z.pending_buf_size && (W(z, 255 & h.adler),
                W(z, h.adler >> 8 & 255),
                h.adler = 0,
                z.status = S)) : z.status = S),
                0 !== z.pending) {
                    if (V(h),
                    0 === h.avail_out)
                        return z.last_flush = -1,
                        $a
                } else if (0 === h.avail_in && (t << 1) - (4 < t ? 9 : 0) <= (I << 1) - (4 < I ? 9 : 0) && t !== pa)
                    return F(h, -5);
                if (666 === z.status && 0 !== h.avail_in)
                    return F(h, -5);
                if (0 !== h.avail_in || 0 !== z.lookahead || t !== ma && 666 !== z.status) {
                    if (2 === z.strategy)
                        a: {
                            for (var D; ; ) {
                                if (0 === z.lookahead && (r(z),
                                0 === z.lookahead)) {
                                    if (t === ma) {
                                        var K = U;
                                        break a
                                    }
                                    break
                                }
                                if (z.match_length = 0,
                                D = qa._tr_tally(z, 0, z.window[z.strstart]),
                                z.lookahead--,
                                z.strstart++,
                                D && (v(z, !1),
                                0 === z.strm.avail_out)) {
                                    K = U;
                                    break a
                                }
                            }
                            K = (z.insert = 0,
                            t === pa ? (v(z, !0),
                            0 === z.strm.avail_out ? Aa : G) : z.last_lit && (v(z, !1),
                            0 === z.strm.avail_out) ? U : gd)
                        }
                    else if (3 === z.strategy)
                        a: {
                            var H, N;
                            for (D = z.window; ; ) {
                                if (z.lookahead <= Ga) {
                                    if (r(z),
                                    z.lookahead <= Ga && t === ma) {
                                        K = U;
                                        break a
                                    }
                                    if (0 === z.lookahead)
                                        break
                                }
                                if (z.match_length = 0,
                                z.lookahead >= Fa && 0 < z.strstart && (N = z.strstart - 1,
                                H = D[N],
                                H === D[++N] && H === D[++N] && H === D[++N])) {
                                    for (I = z.strstart + Ga; H === D[++N] && H === D[++N] && H === D[++N] && H === D[++N] && H === D[++N] && H === D[++N] && H === D[++N] && H === D[++N] && N < I; )
                                        ;
                                    z.match_length = Ga - (I - N);
                                    z.match_length > z.lookahead && (z.match_length = z.lookahead)
                                }
                                if (z.match_length >= Fa ? (K = qa._tr_tally(z, 1, z.match_length - Fa),
                                z.lookahead -= z.match_length,
                                z.strstart += z.match_length,
                                z.match_length = 0) : (K = qa._tr_tally(z, 0, z.window[z.strstart]),
                                z.lookahead--,
                                z.strstart++),
                                K && (v(z, !1),
                                0 === z.strm.avail_out)) {
                                    K = U;
                                    break a
                                }
                            }
                            K = (z.insert = 0,
                            t === pa ? (v(z, !0),
                            0 === z.strm.avail_out ? Aa : G) : z.last_lit && (v(z, !1),
                            0 === z.strm.avail_out) ? U : gd)
                        }
                    else
                        K = vb[z.level].func(z, t);
                    if (K !== Aa && K !== G || (z.status = 666),
                    K === U || K === Aa)
                        return 0 === h.avail_out && (z.last_flush = -1),
                        $a;
                    if (K === gd && (1 === t ? qa._tr_align(z) : 5 !== t && (qa._tr_stored_block(z, 0, 0, !1),
                    3 === t && (O(z.head),
                    0 === z.lookahead && (z.strstart = 0,
                    z.block_start = 0,
                    z.insert = 0))),
                    V(h),
                    0 === h.avail_out))
                        return z.last_flush = -1,
                        $a
                }
                return t !== pa ? $a : 0 >= z.wrap ? 1 : (2 === z.wrap ? (W(z, 255 & h.adler),
                W(z, h.adler >> 8 & 255),
                W(z, h.adler >> 16 & 255),
                W(z, h.adler >> 24 & 255),
                W(z, 255 & h.total_in),
                W(z, h.total_in >> 8 & 255),
                W(z, h.total_in >> 16 & 255),
                W(z, h.total_in >> 24 & 255)) : (m(z, h.adler >>> 16),
                m(z, 65535 & h.adler)),
                V(h),
                0 < z.wrap && (z.wrap = -z.wrap),
                0 !== z.pending ? $a : 1)
            }
            ;
            H.deflateEnd = function(h) {
                var m;
                return h && h.state ? (m = h.state.status,
                m !== ka && 69 !== m && 73 !== m && 91 !== m && 103 !== m && m !== S && 666 !== m ? F(h, ca) : (h.state = null,
                m === S ? F(h, -3) : $a)) : ca
            }
            ;
            H.deflateSetDictionary = function(h, m) {
                var t, z, v;
                var y = m.length;
                if (!h || !h.state || (t = h.state,
                z = t.wrap,
                2 === z || 1 === z && t.status !== ka || t.lookahead))
                    return ca;
                1 === z && (h.adler = jb(h.adler, m, y, 0));
                t.wrap = 0;
                y >= t.w_size && (0 === z && (O(t.head),
                t.strstart = 0,
                t.block_start = 0,
                t.insert = 0),
                v = new nb.Buf8(t.w_size),
                nb.arraySet(v, m, y - t.w_size, t.w_size, 0),
                m = v,
                y = t.w_size);
                v = h.avail_in;
                var E = h.next_in;
                var F = h.input;
                h.avail_in = y;
                h.next_in = 0;
                h.input = m;
                for (r(t); t.lookahead >= Fa; ) {
                    m = t.strstart;
                    y = t.lookahead - (Fa - 1);
                    do
                        t.ins_h = (t.ins_h << t.hash_shift ^ t.window[m + Fa - 1]) & t.hash_mask,
                        t.prev[m & t.w_mask] = t.head[t.ins_h],
                        t.head[t.ins_h] = m,
                        m++;
                    while (--y);
                    t.strstart = m;
                    t.lookahead = Fa - 1;
                    r(t)
                }
                return t.strstart += t.lookahead,
                t.block_start = t.strstart,
                t.insert = t.lookahead,
                t.lookahead = 0,
                t.match_length = t.prev_length = Fa - 1,
                t.match_available = 0,
                h.next_in = E,
                h.input = F,
                h.avail_in = v,
                t.wrap = z,
                $a
            }
            ;
            H.deflateInfo = "pako deflate (from Nodeca project)"
        }
        , {
            "../utils/common": 3,
            "./adler32": 5,
            "./crc32": 7,
            "./messages": 13,
            "./trees": 14
        }],
        9: [function(t, y, H) {
            y.exports = function() {
                this.os = this.xflags = this.time = this.text = 0;
                this.extra = null;
                this.extra_len = 0;
                this.comment = this.name = "";
                this.hcrc = 0;
                this.done = !1
            }
        }
        , {}],
        10: [function(t, y, H) {
            y.exports = function(t, y) {
                var F, v, H;
                var m = t.state;
                var h = t.next_in;
                var r = t.input;
                var N = h + (t.avail_in - 5);
                var D = t.next_out;
                var O = t.output;
                y = D - (y - t.avail_out);
                var va = D + (t.avail_out - 257);
                var Gb = m.dmax;
                var Ab = m.wsize;
                var Jb = m.whave;
                var nb = m.wnext;
                var qa = m.window;
                var jb = m.hold;
                var ua = m.bits;
                var ra = m.lencode;
                var ma = m.distcode;
                var pa = (1 << m.lenbits) - 1;
                var $a = (1 << m.distbits) - 1;
                a: do {
                    15 > ua && (jb += r[h++] << ua,
                    ua += 8,
                    jb += r[h++] << ua,
                    ua += 8);
                    var ca = ra[jb & pa];
                    b: for (; ; ) {
                        if (F = ca >>> 24,
                        jb >>>= F,
                        ua -= F,
                        F = ca >>> 16 & 255,
                        0 === F)
                            O[D++] = 65535 & ca;
                        else {
                            if (!(16 & F)) {
                                if (0 === (64 & F)) {
                                    ca = ra[(65535 & ca) + (jb & (1 << F) - 1)];
                                    continue b
                                }
                                if (32 & F) {
                                    m.mode = 12;
                                    break a
                                }
                                t.msg = "invalid literal/length code";
                                m.mode = 30;
                                break a
                            }
                            var za = 65535 & ca;
                            (F &= 15) && (ua < F && (jb += r[h++] << ua,
                            ua += 8),
                            za += jb & (1 << F) - 1,
                            jb >>>= F,
                            ua -= F);
                            15 > ua && (jb += r[h++] << ua,
                            ua += 8,
                            jb += r[h++] << ua,
                            ua += 8);
                            ca = ma[jb & $a];
                            c: for (; ; ) {
                                if (F = ca >>> 24,
                                jb >>>= F,
                                ua -= F,
                                F = ca >>> 16 & 255,
                                !(16 & F)) {
                                    if (0 === (64 & F)) {
                                        ca = ma[(65535 & ca) + (jb & (1 << F) - 1)];
                                        continue c
                                    }
                                    t.msg = "invalid distance code";
                                    m.mode = 30;
                                    break a
                                }
                                if (v = 65535 & ca,
                                F &= 15,
                                ua < F && (jb += r[h++] << ua,
                                ua += 8,
                                ua < F && (jb += r[h++] << ua,
                                ua += 8)),
                                v += jb & (1 << F) - 1,
                                v > Gb) {
                                    t.msg = "invalid distance too far back";
                                    m.mode = 30;
                                    break a
                                }
                                if (jb >>>= F,
                                ua -= F,
                                F = D - y,
                                v > F) {
                                    if (F = v - F,
                                    F > Jb && m.sane) {
                                        t.msg = "invalid distance too far back";
                                        m.mode = 30;
                                        break a
                                    }
                                    if (ca = 0,
                                    H = qa,
                                    0 === nb) {
                                        if (ca += Ab - F,
                                        F < za) {
                                            za -= F;
                                            do
                                                O[D++] = qa[ca++];
                                            while (--F);
                                            ca = D - v;
                                            H = O
                                        }
                                    } else if (nb < F) {
                                        if (ca += Ab + nb - F,
                                        F -= nb,
                                        F < za) {
                                            za -= F;
                                            do
                                                O[D++] = qa[ca++];
                                            while (--F);
                                            if (ca = 0,
                                            nb < za) {
                                                F = nb;
                                                za -= F;
                                                do
                                                    O[D++] = qa[ca++];
                                                while (--F);
                                                ca = D - v;
                                                H = O
                                            }
                                        }
                                    } else if (ca += nb - F,
                                    F < za) {
                                        za -= F;
                                        do
                                            O[D++] = qa[ca++];
                                        while (--F);
                                        ca = D - v;
                                        H = O
                                    }
                                    for (; 2 < za; )
                                        O[D++] = H[ca++],
                                        O[D++] = H[ca++],
                                        O[D++] = H[ca++],
                                        za -= 3;
                                    za && (O[D++] = H[ca++],
                                    1 < za && (O[D++] = H[ca++]))
                                } else {
                                    ca = D - v;
                                    do
                                        O[D++] = O[ca++],
                                        O[D++] = O[ca++],
                                        O[D++] = O[ca++],
                                        za -= 3;
                                    while (2 < za);
                                    za && (O[D++] = O[ca++],
                                    1 < za && (O[D++] = O[ca++]))
                                }
                                break
                            }
                        }
                        break
                    }
                } while (h < N && D < va);
                za = ua >> 3;
                h -= za;
                ua -= za << 3;
                t.next_in = h;
                t.next_out = D;
                t.avail_in = h < N ? 5 + (N - h) : 5 - (h - N);
                t.avail_out = D < va ? 257 + (va - D) : 257 - (D - va);
                m.hold = jb & (1 << ua) - 1;
                m.bits = ua
            }
        }
        , {}],
        11: [function(t, y, H) {
            function F(h) {
                return (h >>> 24 & 255) + (h >>> 8 & 65280) + ((65280 & h) << 8) + ((255 & h) << 24)
            }
            function O() {
                this.mode = 0;
                this.last = !1;
                this.wrap = 0;
                this.havedict = !1;
                this.total = this.check = this.dmax = this.flags = 0;
                this.head = null;
                this.wnext = this.whave = this.wsize = this.wbits = 0;
                this.window = null;
                this.extra = this.offset = this.length = this.bits = this.hold = 0;
                this.distcode = this.lencode = null;
                this.have = this.ndist = this.nlen = this.ncode = this.distbits = this.lenbits = 0;
                this.next = null;
                this.lens = new D.Buf16(320);
                this.work = new D.Buf16(288);
                this.distdyn = this.lendyn = null;
                this.was = this.back = this.sane = 0
            }
            function V(h) {
                var m;
                return h && h.state ? (m = h.state,
                h.total_in = h.total_out = m.total = 0,
                h.msg = "",
                m.wrap && (h.adler = 1 & m.wrap),
                m.mode = qa,
                m.last = 0,
                m.havedict = 0,
                m.dmax = 32768,
                m.head = null,
                m.hold = 0,
                m.bits = 0,
                m.lencode = m.lendyn = new D.Buf32(jb),
                m.distcode = m.distdyn = new D.Buf32(ua),
                m.sane = 1,
                m.back = -1,
                Jb) : nb
            }
            function v(h) {
                var m;
                return h && h.state ? (m = h.state,
                m.wsize = 0,
                m.whave = 0,
                m.wnext = 0,
                V(h)) : nb
            }
            function W(h, m) {
                var r, t;
                return h && h.state ? (t = h.state,
                0 > m ? (r = 0,
                m = -m) : (r = (m >> 4) + 1,
                48 > m && (m &= 15)),
                m && (8 > m || 15 < m) ? nb : (null !== t.window && t.wbits !== m && (t.window = null),
                t.wrap = r,
                t.wbits = m,
                v(h))) : nb
            }
            function m(h, m) {
                var r, t;
                return h ? (t = new O,
                h.state = t,
                t.window = null,
                r = W(h, m),
                r !== Jb && (h.state = null),
                r) : nb
            }
            function h(h, m, r, t) {
                var v;
                h = h.state;
                return null === h.window && (h.wsize = 1 << h.wbits,
                h.wnext = 0,
                h.whave = 0,
                h.window = new D.Buf8(h.wsize)),
                t >= h.wsize ? (D.arraySet(h.window, m, r - h.wsize, h.wsize, 0),
                h.wnext = 0,
                h.whave = h.wsize) : (v = h.wsize - h.wnext,
                v > t && (v = t),
                D.arraySet(h.window, m, r - t, v, h.wnext),
                t -= v,
                t ? (D.arraySet(h.window, m, r - t, t, 0),
                h.wnext = t,
                h.whave = h.wsize) : (h.wnext += v,
                h.wnext === h.wsize && (h.wnext = 0),
                h.whave < h.wsize && (h.whave += v))),
                0
            }
            var r, N, D = t("../utils/common"), Ya = t("./adler32"), va = t("./crc32"), Gb = t("./inffast"), Ab = t("./inftrees"), Jb = 0, nb = -2, qa = 1, jb = 852, ua = 592, ra = !0;
            H.inflateReset = v;
            H.inflateReset2 = W;
            H.inflateResetKeep = V;
            H.inflateInit = function(h) {
                return m(h, 15)
            }
            ;
            H.inflateInit2 = m;
            H.inflate = function(m, t) {
                var v, y, H, O, T, V, ma, W = 0, pa = new D.Buf8(4), Q = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
                if (!m || !m.state || !m.output || !m.input && 0 !== m.avail_in)
                    return nb;
                var E = m.state;
                12 === E.mode && (E.mode = 13);
                var ua = m.next_out;
                var db = m.output;
                var Fa = m.avail_out;
                var Ga = m.next_in;
                var Pa = m.input;
                var ka = m.avail_in;
                var S = E.hold;
                var U = E.bits;
                var jb = ka;
                var Aa = Fa;
                var G = Jb;
                a: for (; ; )
                    switch (E.mode) {
                    case qa:
                        if (0 === E.wrap) {
                            E.mode = 13;
                            break
                        }
                        for (; 16 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        if (2 & E.wrap && 35615 === S) {
                            E.check = 0;
                            pa[0] = 255 & S;
                            pa[1] = S >>> 8 & 255;
                            E.check = va(E.check, pa, 2, 0);
                            U = S = 0;
                            E.mode = 2;
                            break
                        }
                        if (E.flags = 0,
                        E.head && (E.head.done = !1),
                        !(1 & E.wrap) || (((255 & S) << 8) + (S >> 8)) % 31) {
                            m.msg = "incorrect header check";
                            E.mode = 30;
                            break
                        }
                        if (8 !== (15 & S)) {
                            m.msg = "unknown compression method";
                            E.mode = 30;
                            break
                        }
                        if (S >>>= 4,
                        U -= 4,
                        V = (15 & S) + 8,
                        0 === E.wbits)
                            E.wbits = V;
                        else if (V > E.wbits) {
                            m.msg = "invalid window size";
                            E.mode = 30;
                            break
                        }
                        E.dmax = 1 << V;
                        m.adler = E.check = 1;
                        E.mode = 512 & S ? 10 : 12;
                        U = S = 0;
                        break;
                    case 2:
                        for (; 16 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        if (E.flags = S,
                        8 !== (255 & E.flags)) {
                            m.msg = "unknown compression method";
                            E.mode = 30;
                            break
                        }
                        if (57344 & E.flags) {
                            m.msg = "unknown header flags set";
                            E.mode = 30;
                            break
                        }
                        E.head && (E.head.text = S >> 8 & 1);
                        512 & E.flags && (pa[0] = 255 & S,
                        pa[1] = S >>> 8 & 255,
                        E.check = va(E.check, pa, 2, 0));
                        U = S = 0;
                        E.mode = 3;
                    case 3:
                        for (; 32 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        E.head && (E.head.time = S);
                        512 & E.flags && (pa[0] = 255 & S,
                        pa[1] = S >>> 8 & 255,
                        pa[2] = S >>> 16 & 255,
                        pa[3] = S >>> 24 & 255,
                        E.check = va(E.check, pa, 4, 0));
                        U = S = 0;
                        E.mode = 4;
                    case 4:
                        for (; 16 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        E.head && (E.head.xflags = 255 & S,
                        E.head.os = S >> 8);
                        512 & E.flags && (pa[0] = 255 & S,
                        pa[1] = S >>> 8 & 255,
                        E.check = va(E.check, pa, 2, 0));
                        U = S = 0;
                        E.mode = 5;
                    case 5:
                        if (1024 & E.flags) {
                            for (; 16 > U; ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            E.length = S;
                            E.head && (E.head.extra_len = S);
                            512 & E.flags && (pa[0] = 255 & S,
                            pa[1] = S >>> 8 & 255,
                            E.check = va(E.check, pa, 2, 0));
                            U = S = 0
                        } else
                            E.head && (E.head.extra = null);
                        E.mode = 6;
                    case 6:
                        if (1024 & E.flags && (v = E.length,
                        v > ka && (v = ka),
                        v && (E.head && (V = E.head.extra_len - E.length,
                        E.head.extra || (E.head.extra = Array(E.head.extra_len)),
                        D.arraySet(E.head.extra, Pa, Ga, v, V)),
                        512 & E.flags && (E.check = va(E.check, Pa, v, Ga)),
                        ka -= v,
                        Ga += v,
                        E.length -= v),
                        E.length))
                            break a;
                        E.length = 0;
                        E.mode = 7;
                    case 7:
                        if (2048 & E.flags) {
                            if (0 === ka)
                                break a;
                            v = 0;
                            do
                                V = Pa[Ga + v++],
                                E.head && V && 65536 > E.length && (E.head.name += String.fromCharCode(V));
                            while (V && v < ka);
                            if (512 & E.flags && (E.check = va(E.check, Pa, v, Ga)),
                            ka -= v,
                            Ga += v,
                            V)
                                break a
                        } else
                            E.head && (E.head.name = null);
                        E.length = 0;
                        E.mode = 8;
                    case 8:
                        if (4096 & E.flags) {
                            if (0 === ka)
                                break a;
                            v = 0;
                            do
                                V = Pa[Ga + v++],
                                E.head && V && 65536 > E.length && (E.head.comment += String.fromCharCode(V));
                            while (V && v < ka);
                            if (512 & E.flags && (E.check = va(E.check, Pa, v, Ga)),
                            ka -= v,
                            Ga += v,
                            V)
                                break a
                        } else
                            E.head && (E.head.comment = null);
                        E.mode = 9;
                    case 9:
                        if (512 & E.flags) {
                            for (; 16 > U; ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            if (S !== (65535 & E.check)) {
                                m.msg = "header crc mismatch";
                                E.mode = 30;
                                break
                            }
                            U = S = 0
                        }
                        E.head && (E.head.hcrc = E.flags >> 9 & 1,
                        E.head.done = !0);
                        m.adler = E.check = 0;
                        E.mode = 12;
                        break;
                    case 10:
                        for (; 32 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        m.adler = E.check = F(S);
                        U = S = 0;
                        E.mode = 11;
                    case 11:
                        if (0 === E.havedict)
                            return m.next_out = ua,
                            m.avail_out = Fa,
                            m.next_in = Ga,
                            m.avail_in = ka,
                            E.hold = S,
                            E.bits = U,
                            2;
                        m.adler = E.check = 1;
                        E.mode = 12;
                    case 12:
                        if (5 === t || 6 === t)
                            break a;
                    case 13:
                        if (E.last) {
                            S >>>= 7 & U;
                            U -= 7 & U;
                            E.mode = 27;
                            break
                        }
                        for (; 3 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        switch (E.last = 1 & S,
                        S >>>= 1,
                        --U,
                        3 & S) {
                        case 0:
                            E.mode = 14;
                            break;
                        case 1:
                            var vb = E;
                            if (ra) {
                                r = new D.Buf32(512);
                                N = new D.Buf32(32);
                                for (H = 0; 144 > H; )
                                    vb.lens[H++] = 8;
                                for (; 256 > H; )
                                    vb.lens[H++] = 9;
                                for (; 280 > H; )
                                    vb.lens[H++] = 7;
                                for (; 288 > H; )
                                    vb.lens[H++] = 8;
                                Ab(1, vb.lens, 0, 288, r, 0, vb.work, {
                                    bits: 9
                                });
                                for (H = 0; 32 > H; )
                                    vb.lens[H++] = 5;
                                Ab(2, vb.lens, 0, 32, N, 0, vb.work, {
                                    bits: 5
                                });
                                ra = !1
                            }
                            vb.lencode = r;
                            vb.lenbits = 9;
                            vb.distcode = N;
                            vb.distbits = 5;
                            if (E.mode = 20,
                            6 === t) {
                                S >>>= 2;
                                U -= 2;
                                break a
                            }
                            break;
                        case 2:
                            E.mode = 17;
                            break;
                        case 3:
                            m.msg = "invalid block type",
                            E.mode = 30
                        }
                        S >>>= 2;
                        U -= 2;
                        break;
                    case 14:
                        S >>>= 7 & U;
                        for (U -= 7 & U; 32 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        if ((65535 & S) !== (S >>> 16 ^ 65535)) {
                            m.msg = "invalid stored block lengths";
                            E.mode = 30;
                            break
                        }
                        if (E.length = 65535 & S,
                        S = 0,
                        U = 0,
                        E.mode = 15,
                        6 === t)
                            break a;
                    case 15:
                        E.mode = 16;
                    case 16:
                        if (v = E.length) {
                            if (v > ka && (v = ka),
                            v > Fa && (v = Fa),
                            0 === v)
                                break a;
                            D.arraySet(db, Pa, Ga, v, ua);
                            ka -= v;
                            Ga += v;
                            Fa -= v;
                            ua += v;
                            E.length -= v;
                            break
                        }
                        E.mode = 12;
                        break;
                    case 17:
                        for (; 14 > U; ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        if (E.nlen = (31 & S) + 257,
                        S >>>= 5,
                        U -= 5,
                        E.ndist = (31 & S) + 1,
                        S >>>= 5,
                        U -= 5,
                        E.ncode = (15 & S) + 4,
                        S >>>= 4,
                        U -= 4,
                        286 < E.nlen || 30 < E.ndist) {
                            m.msg = "too many length or distance symbols";
                            E.mode = 30;
                            break
                        }
                        E.have = 0;
                        E.mode = 18;
                    case 18:
                        for (; E.have < E.ncode; ) {
                            for (; 3 > U; ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            E.lens[Q[E.have++]] = 7 & S;
                            S >>>= 3;
                            U -= 3
                        }
                        for (; 19 > E.have; )
                            E.lens[Q[E.have++]] = 0;
                        if (E.lencode = E.lendyn,
                        E.lenbits = 7,
                        ma = {
                            bits: E.lenbits
                        },
                        G = Ab(0, E.lens, 0, 19, E.lencode, 0, E.work, ma),
                        E.lenbits = ma.bits,
                        G) {
                            m.msg = "invalid code lengths set";
                            E.mode = 30;
                            break
                        }
                        E.have = 0;
                        E.mode = 19;
                    case 19:
                        for (; E.have < E.nlen + E.ndist; ) {
                            for (; W = E.lencode[S & (1 << E.lenbits) - 1],
                            O = W >>> 24,
                            vb = 65535 & W,
                            !(O <= U); ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            if (16 > vb)
                                S >>>= O,
                                U -= O,
                                E.lens[E.have++] = vb;
                            else {
                                if (16 === vb) {
                                    for (H = O + 2; U < H; ) {
                                        if (0 === ka)
                                            break a;
                                        ka--;
                                        S += Pa[Ga++] << U;
                                        U += 8
                                    }
                                    if (S >>>= O,
                                    U -= O,
                                    0 === E.have) {
                                        m.msg = "invalid bit length repeat";
                                        E.mode = 30;
                                        break
                                    }
                                    V = E.lens[E.have - 1];
                                    v = 3 + (3 & S);
                                    S >>>= 2;
                                    U -= 2
                                } else if (17 === vb) {
                                    for (H = O + 3; U < H; ) {
                                        if (0 === ka)
                                            break a;
                                        ka--;
                                        S += Pa[Ga++] << U;
                                        U += 8
                                    }
                                    S >>>= O;
                                    U -= O;
                                    V = 0;
                                    v = 3 + (7 & S);
                                    S >>>= 3;
                                    U -= 3
                                } else {
                                    for (H = O + 7; U < H; ) {
                                        if (0 === ka)
                                            break a;
                                        ka--;
                                        S += Pa[Ga++] << U;
                                        U += 8
                                    }
                                    S >>>= O;
                                    U -= O;
                                    V = 0;
                                    v = 11 + (127 & S);
                                    S >>>= 7;
                                    U -= 7
                                }
                                if (E.have + v > E.nlen + E.ndist) {
                                    m.msg = "invalid bit length repeat";
                                    E.mode = 30;
                                    break
                                }
                                for (; v--; )
                                    E.lens[E.have++] = V
                            }
                        }
                        if (30 === E.mode)
                            break;
                        if (0 === E.lens[256]) {
                            m.msg = "invalid code -- missing end-of-block";
                            E.mode = 30;
                            break
                        }
                        if (E.lenbits = 9,
                        ma = {
                            bits: E.lenbits
                        },
                        G = Ab(1, E.lens, 0, E.nlen, E.lencode, 0, E.work, ma),
                        E.lenbits = ma.bits,
                        G) {
                            m.msg = "invalid literal/lengths set";
                            E.mode = 30;
                            break
                        }
                        if (E.distbits = 6,
                        E.distcode = E.distdyn,
                        ma = {
                            bits: E.distbits
                        },
                        G = Ab(2, E.lens, E.nlen, E.ndist, E.distcode, 0, E.work, ma),
                        E.distbits = ma.bits,
                        G) {
                            m.msg = "invalid distances set";
                            E.mode = 30;
                            break
                        }
                        if (E.mode = 20,
                        6 === t)
                            break a;
                    case 20:
                        E.mode = 21;
                    case 21:
                        if (6 <= ka && 258 <= Fa) {
                            m.next_out = ua;
                            m.avail_out = Fa;
                            m.next_in = Ga;
                            m.avail_in = ka;
                            E.hold = S;
                            E.bits = U;
                            Gb(m, Aa);
                            ua = m.next_out;
                            db = m.output;
                            Fa = m.avail_out;
                            Ga = m.next_in;
                            Pa = m.input;
                            ka = m.avail_in;
                            S = E.hold;
                            U = E.bits;
                            12 === E.mode && (E.back = -1);
                            break
                        }
                        for (E.back = 0; W = E.lencode[S & (1 << E.lenbits) - 1],
                        O = W >>> 24,
                        H = W >>> 16 & 255,
                        vb = 65535 & W,
                        !(O <= U); ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        if (H && 0 === (240 & H)) {
                            var K = O;
                            var P = H;
                            for (T = vb; W = E.lencode[T + ((S & (1 << K + P) - 1) >> K)],
                            O = W >>> 24,
                            H = W >>> 16 & 255,
                            vb = 65535 & W,
                            !(K + O <= U); ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            S >>>= K;
                            U -= K;
                            E.back += K
                        }
                        if (S >>>= O,
                        U -= O,
                        E.back += O,
                        E.length = vb,
                        0 === H) {
                            E.mode = 26;
                            break
                        }
                        if (32 & H) {
                            E.back = -1;
                            E.mode = 12;
                            break
                        }
                        if (64 & H) {
                            m.msg = "invalid literal/length code";
                            E.mode = 30;
                            break
                        }
                        E.extra = 15 & H;
                        E.mode = 22;
                    case 22:
                        if (E.extra) {
                            for (H = E.extra; U < H; ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            E.length += S & (1 << E.extra) - 1;
                            S >>>= E.extra;
                            U -= E.extra;
                            E.back += E.extra
                        }
                        E.was = E.length;
                        E.mode = 23;
                    case 23:
                        for (; W = E.distcode[S & (1 << E.distbits) - 1],
                        O = W >>> 24,
                        H = W >>> 16 & 255,
                        vb = 65535 & W,
                        !(O <= U); ) {
                            if (0 === ka)
                                break a;
                            ka--;
                            S += Pa[Ga++] << U;
                            U += 8
                        }
                        if (0 === (240 & H)) {
                            K = O;
                            P = H;
                            for (T = vb; W = E.distcode[T + ((S & (1 << K + P) - 1) >> K)],
                            O = W >>> 24,
                            H = W >>> 16 & 255,
                            vb = 65535 & W,
                            !(K + O <= U); ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            S >>>= K;
                            U -= K;
                            E.back += K
                        }
                        if (S >>>= O,
                        U -= O,
                        E.back += O,
                        64 & H) {
                            m.msg = "invalid distance code";
                            E.mode = 30;
                            break
                        }
                        E.offset = vb;
                        E.extra = 15 & H;
                        E.mode = 24;
                    case 24:
                        if (E.extra) {
                            for (H = E.extra; U < H; ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            E.offset += S & (1 << E.extra) - 1;
                            S >>>= E.extra;
                            U -= E.extra;
                            E.back += E.extra
                        }
                        if (E.offset > E.dmax) {
                            m.msg = "invalid distance too far back";
                            E.mode = 30;
                            break
                        }
                        E.mode = 25;
                    case 25:
                        if (0 === Fa)
                            break a;
                        if (v = Aa - Fa,
                        E.offset > v) {
                            if (v = E.offset - v,
                            v > E.whave && E.sane) {
                                m.msg = "invalid distance too far back";
                                E.mode = 30;
                                break
                            }
                            v > E.wnext ? (v -= E.wnext,
                            y = E.wsize - v) : y = E.wnext - v;
                            v > E.length && (v = E.length);
                            H = E.window
                        } else
                            H = db,
                            y = ua - E.offset,
                            v = E.length;
                        v > Fa && (v = Fa);
                        Fa -= v;
                        E.length -= v;
                        do
                            db[ua++] = H[y++];
                        while (--v);
                        0 === E.length && (E.mode = 21);
                        break;
                    case 26:
                        if (0 === Fa)
                            break a;
                        db[ua++] = E.length;
                        Fa--;
                        E.mode = 21;
                        break;
                    case 27:
                        if (E.wrap) {
                            for (; 32 > U; ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S |= Pa[Ga++] << U;
                                U += 8
                            }
                            if (Aa -= Fa,
                            m.total_out += Aa,
                            E.total += Aa,
                            Aa && (m.adler = E.check = E.flags ? va(E.check, db, Aa, ua - Aa) : Ya(E.check, db, Aa, ua - Aa)),
                            Aa = Fa,
                            (E.flags ? S : F(S)) !== E.check) {
                                m.msg = "incorrect data check";
                                E.mode = 30;
                                break
                            }
                            U = S = 0
                        }
                        E.mode = 28;
                    case 28:
                        if (E.wrap && E.flags) {
                            for (; 32 > U; ) {
                                if (0 === ka)
                                    break a;
                                ka--;
                                S += Pa[Ga++] << U;
                                U += 8
                            }
                            if (S !== (4294967295 & E.total)) {
                                m.msg = "incorrect length check";
                                E.mode = 30;
                                break
                            }
                            U = S = 0
                        }
                        E.mode = 29;
                    case 29:
                        G = 1;
                        break a;
                    case 30:
                        G = -3;
                        break a;
                    case 31:
                        return -4;
                    default:
                        return nb
                    }
                return m.next_out = ua,
                m.avail_out = Fa,
                m.next_in = Ga,
                m.avail_in = ka,
                E.hold = S,
                E.bits = U,
                (E.wsize || Aa !== m.avail_out && 30 > E.mode && (27 > E.mode || 4 !== t)) && h(m, m.output, m.next_out, Aa - m.avail_out) ? (E.mode = 31,
                -4) : (jb -= m.avail_in,
                Aa -= m.avail_out,
                m.total_in += jb,
                m.total_out += Aa,
                E.total += Aa,
                E.wrap && Aa && (m.adler = E.check = E.flags ? va(E.check, db, Aa, m.next_out - Aa) : Ya(E.check, db, Aa, m.next_out - Aa)),
                m.data_type = E.bits + (E.last ? 64 : 0) + (12 === E.mode ? 128 : 0) + (20 === E.mode || 15 === E.mode ? 256 : 0),
                (0 === jb && 0 === Aa || 4 === t) && G === Jb && (G = -5),
                G)
            }
            ;
            H.inflateEnd = function(h) {
                if (!h || !h.state)
                    return nb;
                var m = h.state;
                return m.window && (m.window = null),
                h.state = null,
                Jb
            }
            ;
            H.inflateGetHeader = function(h, m) {
                var r;
                return h && h.state ? (r = h.state,
                0 === (2 & r.wrap) ? nb : (r.head = m,
                m.done = !1,
                Jb)) : nb
            }
            ;
            H.inflateSetDictionary = function(m, r) {
                var t, v, y = r.length;
                return m && m.state ? (t = m.state,
                0 !== t.wrap && 11 !== t.mode ? nb : 11 === t.mode && (v = 1,
                v = Ya(v, r, y, 0),
                v !== t.check) ? -3 : h(m, r, y, y) ? (t.mode = 31,
                -4) : (t.havedict = 1,
                Jb)) : nb
            }
            ;
            H.inflateInfo = "pako inflate (from Nodeca project)"
        }
        , {
            "../utils/common": 3,
            "./adler32": 5,
            "./crc32": 7,
            "./inffast": 10,
            "./inftrees": 12
        }],
        12: [function(t, y, H) {
            var F = t("../utils/common")
              , O = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]
              , V = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]
              , v = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]
              , W = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
            y.exports = function(m, h, r, t, y, H, va, Gb) {
                var D, N, Ya, qa, jb, ua, ra = Gb.bits, ma, pa, $a, ca, za, hb = 0, T, fb = null, Fc = 0, vc = new F.Buf16(16);
                var Ta = new F.Buf16(16);
                var Q = null
                  , E = 0;
                for (ma = 0; 15 >= ma; ma++)
                    vc[ma] = 0;
                for (pa = 0; pa < t; pa++)
                    vc[h[r + pa]]++;
                var mb = ra;
                for ($a = 15; 1 <= $a && 0 === vc[$a]; $a--)
                    ;
                if (mb > $a && (mb = $a),
                0 === $a)
                    return y[H++] = 20971520,
                    y[H++] = 20971520,
                    Gb.bits = 1,
                    0;
                for (ra = 1; ra < $a && 0 === vc[ra]; ra++)
                    ;
                mb < ra && (mb = ra);
                for (ma = D = 1; 15 >= ma; ma++)
                    if (D <<= 1,
                    D -= vc[ma],
                    0 > D)
                        return -1;
                if (0 < D && (0 === m || 1 !== $a))
                    return -1;
                Ta[1] = 0;
                for (ma = 1; 15 > ma; ma++)
                    Ta[ma + 1] = Ta[ma] + vc[ma];
                for (pa = 0; pa < t; pa++)
                    0 !== h[r + pa] && (va[Ta[h[r + pa]]++] = pa);
                if (0 === m ? (fb = Q = va,
                qa = 19) : 1 === m ? (fb = O,
                Fc -= 257,
                Q = V,
                E -= 257,
                qa = 256) : (fb = v,
                Q = W,
                qa = -1),
                T = 0,
                pa = 0,
                ma = ra,
                Ta = H,
                ca = mb,
                za = 0,
                Ya = -1,
                hb = 1 << mb,
                t = hb - 1,
                1 === m && 852 < hb || 2 === m && 592 < hb)
                    return 1;
                for (var db = 0; ; ) {
                    db++;
                    var Fa = ma - za;
                    va[pa] < qa ? (jb = 0,
                    ua = va[pa]) : va[pa] > qa ? (jb = Q[E + va[pa]],
                    ua = fb[Fc + va[pa]]) : (jb = 96,
                    ua = 0);
                    D = 1 << ma - za;
                    ra = N = 1 << ca;
                    do
                        N -= D,
                        y[Ta + (T >> za) + N] = Fa << 24 | jb << 16 | ua | 0;
                    while (0 !== N);
                    for (D = 1 << ma - 1; T & D; )
                        D >>= 1;
                    if (0 !== D ? (T &= D - 1,
                    T += D) : T = 0,
                    pa++,
                    0 === --vc[ma]) {
                        if (ma === $a)
                            break;
                        ma = h[r + va[pa]]
                    }
                    if (ma > mb && (T & t) !== Ya) {
                        0 === za && (za = mb);
                        Ta += ra;
                        ca = ma - za;
                        for (D = 1 << ca; ca + za < $a && (D -= vc[ca + za],
                        !(0 >= D)); )
                            ca++,
                            D <<= 1;
                        if (hb += 1 << ca,
                        1 === m && 852 < hb || 2 === m && 592 < hb)
                            return 1;
                        Ya = T & t;
                        y[Ya] = mb << 24 | ca << 16 | Ta - H | 0
                    }
                }
                return 0 !== T && (y[Ta + T] = ma - za << 24 | 4194304),
                Gb.bits = mb,
                0
            }
        }
        , {
            "../utils/common": 3
        }],
        13: [function(t, y, H) {
            y.exports = {
                2: "need dictionary",
                1: "stream end",
                0: "",
                "-1": "file error",
                "-2": "stream error",
                "-3": "data error",
                "-4": "insufficient memory",
                "-5": "buffer error",
                "-6": "incompatible version"
            }
        }
        , {}],
        14: [function(t, y, H) {
            function F(h) {
                for (var m = h.length; 0 <= --m; )
                    h[m] = 0
            }
            function O(h, m, r, t, v) {
                this.static_tree = h;
                this.extra_bits = m;
                this.extra_base = r;
                this.elems = t;
                this.max_length = v;
                this.has_stree = h && h.length
            }
            function V(h, m) {
                this.dyn_tree = h;
                this.max_code = 0;
                this.stat_desc = m
            }
            function v(h, m) {
                h.pending_buf[h.pending++] = 255 & m;
                h.pending_buf[h.pending++] = m >>> 8 & 255
            }
            function W(h, m, r) {
                h.bi_valid > Fc - r ? (h.bi_buf |= m << h.bi_valid & 65535,
                v(h, h.bi_buf),
                h.bi_buf = m >> Fc - h.bi_valid,
                h.bi_valid += r - Fc) : (h.bi_buf |= m << h.bi_valid & 65535,
                h.bi_valid += r)
            }
            function m(h, m, r) {
                W(h, r[2 * m], r[2 * m + 1])
            }
            function h(h, m) {
                var r = 0;
                do
                    r |= 1 & h,
                    h >>>= 1,
                    r <<= 1;
                while (0 < --m);
                return r >>> 1
            }
            function r(m, r, t) {
                var z, v = Array(fb + 1), y = 0;
                for (z = 1; z <= fb; z++)
                    v[z] = y = y + t[z - 1] << 1;
                for (t = 0; t <= r; t++)
                    z = m[2 * t + 1],
                    0 !== z && (m[2 * t] = h(v[z]++, z))
            }
            function N(h) {
                var m;
                for (m = 0; m < ca; m++)
                    h.dyn_ltree[2 * m] = 0;
                for (m = 0; m < za; m++)
                    h.dyn_dtree[2 * m] = 0;
                for (m = 0; m < hb; m++)
                    h.bl_tree[2 * m] = 0;
                h.dyn_ltree[2 * vc] = 1;
                h.opt_len = h.static_len = 0;
                h.last_lit = h.matches = 0
            }
            function D(h) {
                8 < h.bi_valid ? v(h, h.bi_buf) : 0 < h.bi_valid && (h.pending_buf[h.pending++] = h.bi_buf);
                h.bi_buf = 0;
                h.bi_valid = 0
            }
            function Ya(h, m, r, t) {
                var z = 2 * m
                  , v = 2 * r;
                return h[z] < h[v] || h[z] === h[v] && t[m] <= t[r]
            }
            function va(h, m, r) {
                for (var t = h.heap[r], z = r << 1; z <= h.heap_len && (z < h.heap_len && Ya(m, h.heap[z + 1], h.heap[z], h.depth) && z++,
                !Ya(m, t, h.heap[z], h.depth)); )
                    h.heap[r] = h.heap[z],
                    r = z,
                    z <<= 1;
                h.heap[r] = t
            }
            function Gb(h, r, t) {
                var z, v, y = 0;
                if (0 !== h.last_lit) {
                    do {
                        var I = h.pending_buf[h.d_buf + 2 * y] << 8 | h.pending_buf[h.d_buf + 2 * y + 1];
                        var E = h.pending_buf[h.l_buf + y];
                        y++;
                        0 === I ? m(h, E, r) : (z = U[E],
                        m(h, z + $a + 1, r),
                        v = mb[z],
                        0 !== v && (E -= gd[z],
                        W(h, E, v)),
                        I--,
                        z = 256 > I ? S[I] : S[256 + (I >>> 7)],
                        m(h, z, t),
                        v = db[z],
                        0 !== v && (I -= Aa[z],
                        W(h, I, v)))
                    } while (y < h.last_lit)
                }
                m(h, vc, r)
            }
            function Ab(h, m) {
                var t, z = m.dyn_tree;
                var v = m.stat_desc.static_tree;
                var y = m.stat_desc.has_stree
                  , E = m.stat_desc.elems
                  , F = -1;
                h.heap_len = 0;
                h.heap_max = T;
                for (t = 0; t < E; t++)
                    0 !== z[2 * t] ? (h.heap[++h.heap_len] = F = t,
                    h.depth[t] = 0) : z[2 * t + 1] = 0;
                for (; 2 > h.heap_len; ) {
                    var I = h.heap[++h.heap_len] = 2 > F ? ++F : 0;
                    z[2 * I] = 1;
                    h.depth[I] = 0;
                    h.opt_len--;
                    y && (h.static_len -= v[2 * I + 1])
                }
                m.max_code = F;
                for (t = h.heap_len >> 1; 1 <= t; t--)
                    va(h, z, t);
                I = E;
                do
                    t = h.heap[1],
                    h.heap[1] = h.heap[h.heap_len--],
                    va(h, z, 1),
                    v = h.heap[1],
                    h.heap[--h.heap_max] = t,
                    h.heap[--h.heap_max] = v,
                    z[2 * I] = z[2 * t] + z[2 * v],
                    h.depth[I] = (h.depth[t] >= h.depth[v] ? h.depth[t] : h.depth[v]) + 1,
                    z[2 * t + 1] = z[2 * v + 1] = I,
                    h.heap[1] = I++,
                    va(h, z, 1);
                while (2 <= h.heap_len);
                h.heap[--h.heap_max] = h.heap[1];
                var D, H;
                t = m.dyn_tree;
                I = m.max_code;
                E = m.stat_desc.static_tree;
                var K = m.stat_desc.has_stree
                  , G = m.stat_desc.extra_bits
                  , N = m.stat_desc.extra_base
                  , O = m.stat_desc.max_length
                  , P = 0;
                for (y = 0; y <= fb; y++)
                    h.bl_count[y] = 0;
                t[2 * h.heap[h.heap_max] + 1] = 0;
                for (m = h.heap_max + 1; m < T; m++)
                    v = h.heap[m],
                    y = t[2 * t[2 * v + 1] + 1] + 1,
                    y > O && (y = O,
                    P++),
                    t[2 * v + 1] = y,
                    v > I || (h.bl_count[y]++,
                    D = 0,
                    v >= N && (D = G[v - N]),
                    H = t[2 * v],
                    h.opt_len += H * (y + D),
                    K && (h.static_len += H * (E[2 * v + 1] + D)));
                if (0 !== P) {
                    do {
                        for (y = O - 1; 0 === h.bl_count[y]; )
                            y--;
                        h.bl_count[y]--;
                        h.bl_count[y + 1] += 2;
                        h.bl_count[O]--;
                        P -= 2
                    } while (0 < P);
                    for (y = O; 0 !== y; y--)
                        for (v = h.bl_count[y]; 0 !== v; )
                            D = h.heap[--m],
                            D > I || (t[2 * D + 1] !== y && (h.opt_len += (y - t[2 * D + 1]) * t[2 * D],
                            t[2 * D + 1] = y),
                            v--)
                }
                r(z, F, h.bl_count)
            }
            function Jb(h, m, r) {
                var t, z = -1, v = m[1], y = 0, F = 7, I = 4;
                0 === v && (F = 138,
                I = 3);
                m[2 * (r + 1) + 1] = 65535;
                for (t = 0; t <= r; t++) {
                    var D = v;
                    v = m[2 * (t + 1) + 1];
                    ++y < F && D === v || (y < I ? h.bl_tree[2 * D] += y : 0 !== D ? (D !== z && h.bl_tree[2 * D]++,
                    h.bl_tree[2 * Ta]++) : 10 >= y ? h.bl_tree[2 * Q]++ : h.bl_tree[2 * E]++,
                    y = 0,
                    z = D,
                    0 === v ? (F = 138,
                    I = 3) : D === v ? (F = 6,
                    I = 3) : (F = 7,
                    I = 4))
                }
            }
            function nb(h, r, t) {
                var z, v, y = -1, F = r[1], I = 0, D = 7, H = 4;
                0 === F && (D = 138,
                H = 3);
                for (z = 0; z <= t; z++)
                    if (v = F,
                    F = r[2 * (z + 1) + 1],
                    !(++I < D && v === F)) {
                        if (I < H) {
                            do
                                m(h, v, h.bl_tree);
                            while (0 !== --I)
                        } else
                            0 !== v ? (v !== y && (m(h, v, h.bl_tree),
                            I--),
                            m(h, Ta, h.bl_tree),
                            W(h, I - 3, 2)) : 10 >= I ? (m(h, Q, h.bl_tree),
                            W(h, I - 3, 3)) : (m(h, E, h.bl_tree),
                            W(h, I - 11, 7));
                        I = 0;
                        y = v;
                        0 === F ? (D = 138,
                        H = 3) : v === F ? (D = 6,
                        H = 3) : (D = 7,
                        H = 4)
                    }
            }
            function qa(h) {
                var m, r = 4093624447;
                for (m = 0; 31 >= m; m++,
                r >>>= 1)
                    if (1 & r && 0 !== h.dyn_ltree[2 * m])
                        return ra;
                if (0 !== h.dyn_ltree[18] || 0 !== h.dyn_ltree[20] || 0 !== h.dyn_ltree[26])
                    return ma;
                for (m = 32; m < $a; m++)
                    if (0 !== h.dyn_ltree[2 * m])
                        return ma;
                return ra
            }
            function jb(h, m, r, t) {
                W(h, (pa << 1) + (t ? 1 : 0), 3);
                D(h);
                v(h, r);
                v(h, ~r);
                ua.arraySet(h.pending_buf, h.window, m, r, h.pending);
                h.pending += r
            }
            var ua = t("../utils/common")
              , ra = 0
              , ma = 1
              , pa = 0
              , $a = 256
              , ca = $a + 1 + 29
              , za = 30
              , hb = 19
              , T = 2 * ca + 1
              , fb = 15
              , Fc = 16
              , vc = 256
              , Ta = 16
              , Q = 17
              , E = 18
              , mb = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
              , db = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
              , Fa = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
              , Ga = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
              , Pa = Array(2 * (ca + 2));
            F(Pa);
            var ka = Array(2 * za);
            F(ka);
            var S = Array(512);
            F(S);
            var U = Array(256);
            F(U);
            var gd = Array(29);
            F(gd);
            var Aa = Array(za);
            F(Aa);
            var G, vb, K, P = !1;
            H._tr_init = function(m) {
                if (!P) {
                    var t, v, y, E = Array(fb + 1);
                    for (y = v = 0; 28 > y; y++)
                        for (gd[y] = v,
                        t = 0; t < 1 << mb[y]; t++)
                            U[v++] = y;
                    U[v - 1] = y;
                    for (y = v = 0; 16 > y; y++)
                        for (Aa[y] = v,
                        t = 0; t < 1 << db[y]; t++)
                            S[v++] = y;
                    for (v >>= 7; y < za; y++)
                        for (Aa[y] = v << 7,
                        t = 0; t < 1 << db[y] - 7; t++)
                            S[256 + v++] = y;
                    for (t = 0; t <= fb; t++)
                        E[t] = 0;
                    for (t = 0; 143 >= t; )
                        Pa[2 * t + 1] = 8,
                        t++,
                        E[8]++;
                    for (; 255 >= t; )
                        Pa[2 * t + 1] = 9,
                        t++,
                        E[9]++;
                    for (; 279 >= t; )
                        Pa[2 * t + 1] = 7,
                        t++,
                        E[7]++;
                    for (; 287 >= t; )
                        Pa[2 * t + 1] = 8,
                        t++,
                        E[8]++;
                    r(Pa, ca + 1, E);
                    for (t = 0; t < za; t++)
                        ka[2 * t + 1] = 5,
                        ka[2 * t] = h(t, 5);
                    G = new O(Pa,mb,$a + 1,ca,fb);
                    vb = new O(ka,db,0,za,fb);
                    K = new O([],Fa,0,hb,7);
                    P = !0
                }
                m.l_desc = new V(m.dyn_ltree,G);
                m.d_desc = new V(m.dyn_dtree,vb);
                m.bl_desc = new V(m.bl_tree,K);
                m.bi_buf = 0;
                m.bi_valid = 0;
                N(m)
            }
            ;
            H._tr_stored_block = jb;
            H._tr_flush_block = function(h, m, r, t) {
                var v = 0;
                if (0 < h.level) {
                    2 === h.strm.data_type && (h.strm.data_type = qa(h));
                    Ab(h, h.l_desc);
                    Ab(h, h.d_desc);
                    Jb(h, h.dyn_ltree, h.l_desc.max_code);
                    Jb(h, h.dyn_dtree, h.d_desc.max_code);
                    Ab(h, h.bl_desc);
                    for (v = hb - 1; 3 <= v && 0 === h.bl_tree[2 * Ga[v] + 1]; v--)
                        ;
                    v = (h.opt_len += 3 * (v + 1) + 14,
                    v);
                    var z = h.opt_len + 3 + 7 >>> 3;
                    var y = h.static_len + 3 + 7 >>> 3;
                    y <= z && (z = y)
                } else
                    z = y = r + 5;
                if (r + 4 <= z && -1 !== m)
                    jb(h, m, r, t);
                else if (4 === h.strategy || y === z)
                    W(h, 2 + (t ? 1 : 0), 3),
                    Gb(h, Pa, ka);
                else {
                    W(h, 4 + (t ? 1 : 0), 3);
                    m = h.l_desc.max_code + 1;
                    r = h.d_desc.max_code + 1;
                    v += 1;
                    W(h, m - 257, 5);
                    W(h, r - 1, 5);
                    W(h, v - 4, 4);
                    for (z = 0; z < v; z++)
                        W(h, h.bl_tree[2 * Ga[z] + 1], 3);
                    nb(h, h.dyn_ltree, m - 1);
                    nb(h, h.dyn_dtree, r - 1);
                    Gb(h, h.dyn_ltree, h.dyn_dtree)
                }
                N(h);
                t && D(h)
            }
            ;
            H._tr_tally = function(h, m, r) {
                return h.pending_buf[h.d_buf + 2 * h.last_lit] = m >>> 8 & 255,
                h.pending_buf[h.d_buf + 2 * h.last_lit + 1] = 255 & m,
                h.pending_buf[h.l_buf + h.last_lit] = 255 & r,
                h.last_lit++,
                0 === m ? h.dyn_ltree[2 * r]++ : (h.matches++,
                m--,
                h.dyn_ltree[2 * (U[r] + $a + 1)]++,
                h.dyn_dtree[2 * (256 > m ? S[m] : S[256 + (m >>> 7)])]++),
                h.last_lit === h.lit_bufsize - 1
            }
            ;
            H._tr_align = function(h) {
                W(h, 2, 3);
                m(h, vc, Pa);
                16 === h.bi_valid ? (v(h, h.bi_buf),
                h.bi_buf = 0,
                h.bi_valid = 0) : 8 <= h.bi_valid && (h.pending_buf[h.pending++] = 255 & h.bi_buf,
                h.bi_buf >>= 8,
                h.bi_valid -= 8)
            }
        }
        , {
            "../utils/common": 3
        }],
        15: [function(t, y, H) {
            y.exports = function() {
                this.input = null;
                this.total_in = this.avail_in = this.next_in = 0;
                this.output = null;
                this.total_out = this.avail_out = this.next_out = 0;
                this.msg = "";
                this.state = null;
                this.data_type = 2;
                this.adler = 0
            }
        }
        , {}],
        "/": [function(t, y, H) {
            H = t("./lib/utils/common").assign;
            var F = t("./lib/deflate")
              , O = t("./lib/inflate");
            t = t("./lib/zlib/constants");
            var V = {};
            H(V, F, O, t);
            y.exports = V
        }
        , {
            "./lib/deflate": 1,
            "./lib/inflate": 2,
            "./lib/utils/common": 3,
            "./lib/zlib/constants": 6
        }]
    }, {}, [])("/")
});
if ("undefined" === typeof self || !self.constructor.name.includes("Worker")) {
    var e = function() {
        function L(h) {
            var m = [];
            return m[h - 1] = void 0,
            m
        }
        function t(h, m) {
            return F(h[0] + m[0], h[1] + m[1])
        }
        function y(h, m) {
            var u = V(h) & V(m), w, r;
            return w = (~~Math.max(Math.min(h[1] / wb, 2147483647), -2147483648) & ~~Math.max(Math.min(m[1] / wb, 2147483647), -2147483648)) * wb,
            r = u,
            0 > u && (r += wb),
            [r, w]
        }
        function H(h, m) {
            var u, w;
            return h[0] == m[0] && h[1] == m[1] ? 0 : (u = 0 > h[1],
            w = 0 > m[1],
            u && !w ? -1 : !u && w ? 1 : 0 > F(h[0] - m[0], h[1] - m[1])[1] ? -1 : 1)
        }
        function F(h, m) {
            m %= 1.8446744073709552E19;
            h %= 1.8446744073709552E19;
            var u = m % wb;
            var w = Math.floor(h / wb) * wb;
            m = m - u + w;
            for (h = h - w + u; 0 > h; )
                h += wb,
                m -= wb;
            for (; 4294967295 < h; )
                h -= wb,
                m += wb;
            for (m %= 1.8446744073709552E19; 0x7fffffff00000000 < m; )
                m -= 1.8446744073709552E19;
            for (; -9223372036854775808 > m; )
                m += 1.8446744073709552E19;
            return [h, m]
        }
        function O(h) {
            return 0 <= h ? [h, 0] : [h + wb, -wb]
        }
        function V(h) {
            return 2147483648 <= h[0] ? ~~Math.max(Math.min(h[0] - wb, 2147483647), -2147483648) : ~~Math.max(Math.min(h[0], 2147483647), -2147483648)
        }
        function v(h) {
            return 30 >= h ? 1 << h : v(30) * v(h - 30)
        }
        function W(h, m) {
            var u, w, r, t;
            if (m &= 63,
            h[0] == mf[0] && h[1] == mf[1])
                return m ? Xa : h;
            if (0 > h[1])
                throw Error("Neg");
            return t = v(m),
            w = h[1] * t % 1.8446744073709552E19,
            r = h[0] * t,
            u = r - r % wb,
            w += u,
            r -= u,
            0x7fffffffffffffff <= w && (w -= 1.8446744073709552E19),
            [r, w]
        }
        function m(h, m) {
            var u;
            return m &= 63,
            u = v(m),
            F(Math.floor(h[0] / u), h[1] / u)
        }
        function h(h, m) {
            return h.Mc = m,
            h.Lc = 0,
            h.Yb = m.length,
            h
        }
        function r(h) {
            return h.Lc >= h.Yb ? -1 : 255 & h.Mc[h.Lc++]
        }
        function N(h) {
            return h.Mc = L(32),
            h.Yb = 0,
            h
        }
        function D(h) {
            var m = h.Mc;
            return m.length = h.Yb,
            m
        }
        function Ya(h, m, r, t, v) {
            for (var u = 0; v > u; ++u)
                r[t + u] = h[m + u]
        }
        function va(u, w, r) {
            u.Nb = N({});
            var t = h({}, w)
              , C = u.Nb
              , v = O(w.length);
            if (0 > H(v, fc))
                throw Error("invalid length " + v);
            u.Tb = v;
            w = {};
            var z;
            w.v = L(4);
            w.a = [];
            w.d = {};
            w.C = L(192);
            w.bb = L(12);
            w.hb = L(12);
            w.Ub = L(12);
            w.vc = L(12);
            w._ = L(192);
            w.K = [];
            w.Sb = L(114);
            w.S = eb({}, 4);
            w.$ = G({});
            w.i = G({});
            w.A = {};
            w.m = [];
            w.P = [];
            w.lb = [];
            w.nc = L(16);
            w.x = L(4);
            w.Q = L(4);
            w.Xb = [Xa];
            w.uc = [Xa];
            w.Kc = [0];
            w.fc = L(5);
            w.yc = L(128);
            w.vb = 0;
            w.X = 1;
            w.D = 0;
            w.Hb = -1;
            for (z = w.mb = 0; 4096 > z; ++z)
                w.a[z] = {};
            for (z = 0; 4 > z; ++z)
                w.K[z] = eb({}, 6);
            z = 1 << r.s;
            w.ab = z;
            for (var y = 0; z > 1 << y; ++y)
                ;
            w.$b = 2 * y;
            w.n = r.f;
            z = w.X;
            w.X = r.m;
            w.b && z != w.X && (w.wb = -1,
            w.b = null);
            w.eb = 0;
            w.fb = 3;
            w.Y = 2;
            w.y = 3;
            w.Gc = void 0 === e.disableEndMark;
            w.fc[0] = 9 * (5 * w.Y + w.eb) + w.fb << 24 >> 24;
            for (r = 0; 4 > r; ++r)
                w.fc[1 + r] = w.ab >> 8 * r << 24 >> 24;
            Ya(w.fc, 0, C.Mc, C.Yb, 5);
            C.Yb += 5;
            for (r = 0; 64 > r; r += 8)
                z = 255 & V(m(v, r)),
                C.Mc[C.Yb++] = z << 24 >> 24;
            w.W = 0;
            w.oc = t;
            w.pc = 0;
            w.b || (t = {},
            v = 4,
            w.X || (v = 2),
            t.qb = 2 < v,
            t.qb ? (t.w = 0,
            t.xb = 4,
            t.R = 66560) : (t.w = 2,
            t.xb = 3,
            t.R = 0),
            w.b = t);
            t = w.A;
            v = w.eb;
            r = w.fb;
            if (null == t.V || t.u != r || t.I != v)
                for (t.I = v,
                t.qc = (1 << v) - 1,
                t.u = r,
                r = 1 << t.u + t.I,
                t.V = L(r),
                v = 0; r > v; ++v) {
                    z = t.V;
                    y = v;
                    var F = {};
                    F = (F.tb = L(768),
                    F);
                    z[y] = F
                }
            if (w.ab != w.wb || w.Hb != w.n)
                t = w.b,
                v = w.ab,
                r = w.n,
                1073741567 > v && (t.Fc = 16 + (r >> 1),
                y = v + 4096,
                z = r + 274,
                t.Bc = y,
                t._b = z,
                y = y + z + (~~((v + 4096 + r + 274) / 2) + 256),
                (null == t.c || t.Kb != y) && (t.c = null,
                t.Kb = y,
                t.c = L(t.Kb)),
                t.H = t.Kb - z,
                t.ob = r,
                r = v + 1,
                t.p != r && (t.L = L(2 * (t.p = r))),
                r = 65536,
                t.qb && (r = v - 1,
                r |= r >> 1,
                r |= r >> 2,
                r |= r >> 4,
                r |= r >> 8,
                r >>= 1,
                r |= 65535,
                16777216 < r && (r >>= 1),
                t.Ec = r,
                ++r,
                r += t.R),
                r != t.rc && (t.ub = L(t.rc = r))),
                w.wb = w.ab,
                w.Hb = w.n;
            w.d.Ab = C;
            w.l = 0;
            for (C = w.J = 0; 4 > C; ++C)
                w.v[C] = 0;
            C = w.d;
            C.mc = Xa;
            C.xc = Xa;
            C.E = -1;
            C.Jb = 1;
            C.Oc = 0;
            ib(w.C);
            ib(w._);
            ib(w.bb);
            ib(w.hb);
            ib(w.Ub);
            ib(w.vc);
            ib(w.Sb);
            C = w.A;
            v = 1 << C.u + C.I;
            for (t = 0; v > t; ++t)
                ib(C.V[t].tb);
            for (C = 0; 4 > C; ++C)
                ib(w.K[C].G);
            U(w.$, 1 << w.Y);
            U(w.i, 1 << w.Y);
            ib(w.S.G);
            w.N = 0;
            w.jb = 0;
            w.q = 0;
            w.s = 0;
            E(w);
            Q(w);
            w.$.rb = w.n + 1 - 2;
            vb(w.$, 1 << w.Y);
            w.i.rb = w.n + 1 - 2;
            vb(w.i, 1 << w.Y);
            void (w.g = Xa);
            C = {};
            w = (C.cb = w,
            C.Z = null,
            C.zc = 1,
            C);
            u.yb = w;
            return u
        }
        function Gb(m, w) {
            m.Nb = N({});
            var u = h({}, w), t = m.Nb, v, y, E, F = "", D = [];
            for (v = 0; 5 > v; ++v) {
                if (y = r(u),
                -1 == y)
                    throw Error("truncated input");
                D[v] = y << 24 >> 24
            }
            w = {
                B: {},
                e: {}
            };
            w.Gb = L(192);
            w.Zb = L(12);
            w.Cb = L(12);
            w.Db = L(12);
            w.Eb = L(12);
            w.pb = L(192);
            w.kb = L(4);
            w.kc = L(114);
            w.Fb = z({}, 4);
            w.Rb = Fc({});
            w.sb = Fc({});
            w.gb = {};
            for (v = 0; 4 > v; ++v)
                w.kb[v] = z({}, 6);
            var H;
            if (5 > D.length)
                v = 0;
            else {
                v = 255 & D[0];
                var K = v % 9;
                v = ~~(v / 9);
                var G = v % 5;
                var I = ~~(v / 5);
                for (H = v = 0; 4 > H; ++H)
                    v += (255 & D[1 + H]) << 8 * H;
                if (!(D = 99999999 < v)) {
                    if (8 < K || 4 < G || 4 < I)
                        I = 0;
                    else {
                        D = w.gb;
                        if (null == D.V || D.u != K || D.I != G)
                            for (D.I = G,
                            D.qc = (1 << G) - 1,
                            D.u = K,
                            G = 1 << D.u + D.I,
                            D.V = L(G),
                            K = 0; G > K; ++K) {
                                H = D.V;
                                var P = K;
                                var Q = {};
                                Q = (Q.Ib = L(768),
                                Q);
                                H[P] = Q
                            }
                        I = 1 << I;
                        I = (T(w.Rb, I),
                        T(w.sb, I),
                        w.Dc = I - 1,
                        1)
                    }
                    D = !I
                }
                D ? v = 0 : 0 > v ? v = 0 : (w.Ob != v && (w.Ob = v,
                w.nb = Math.max(w.Ob, 1),
                v = w.B,
                I = Math.max(w.nb, 4096),
                null != v.Lb && v.M == I || (v.Lb = L(I)),
                v.M = I,
                v.o = 0,
                v.h = 0),
                v = 1)
            }
            if (!v)
                throw Error("corrupted input");
            for (v = 0; 64 > v; v += 8) {
                if (y = r(u),
                -1 == y)
                    throw Error("truncated input");
                y = y.toString(16);
                1 == y.length && (y = "0" + y);
                F = y + "" + F
            }
            /^0+$|^f+$/i.test(F) ? m.Tb = fc : (E = parseInt(F, 16),
            m.Tb = 4294967295 < E ? fc : O(E));
            y = m.Tb;
            w.e.Ab = u;
            u = w.B;
            pa(u);
            u.cc = null;
            w.B.cc = t;
            w.B.h = 0;
            w.B.o = 0;
            ib(w.Gb);
            ib(w.pb);
            ib(w.Zb);
            ib(w.Cb);
            ib(w.Db);
            ib(w.Eb);
            ib(w.kc);
            t = w.gb;
            E = 1 << t.u + t.I;
            for (u = 0; E > u; ++u)
                ib(t.V[u].Ib);
            for (t = 0; 4 > t; ++t)
                ib(w.kb[t].G);
            vc(w.Rb);
            vc(w.sb);
            ib(w.Fb.G);
            t = w.e;
            t.Bb = 0;
            t.E = -1;
            for (u = 0; 5 > u; ++u)
                t.Bb = t.Bb << 8 | r(t.Ab);
            w.U = 0;
            w.ib = 0;
            w.Jc = 0;
            w.Ic = 0;
            w.Qc = 0;
            w.Nc = y;
            w.g = Xa;
            w.jc = 0;
            t = {};
            w = (t.Z = w,
            t.cb = null,
            t.zc = 1,
            t);
            m.yb = w;
            return m
        }
        function Ab(h, m) {
            return h.c[h.f + h.o + m]
        }
        function Jb(h, m, r, t) {
            h.T && h.o + m + t > h.h && (t = h.h - (h.o + m));
            ++r;
            var u = h.f + h.o + m;
            for (m = 0; t > m && h.c[u + m] == h.c[u + m - r]; ++m)
                ;
            return m
        }
        function nb(h) {
            return h.h - h.o
        }
        function qa(h) {
            var m, u, r;
            if (!h.T)
                for (; r = -h.f + h.Kb - h.h,
                r; ) {
                    var t = h.cc
                      , v = r;
                    if (m = t.Lc >= t.Yb ? -1 : (v = Math.min(v, t.Yb - t.Lc),
                    Ya(t.Mc, t.Lc, h.c, h.f + h.h, v),
                    t.Lc += v,
                    v),
                    -1 == m)
                        return h.zb = h.h,
                        u = h.f + h.zb,
                        u > h.H && (h.zb = h.H - h.f),
                        void (h.T = 1);
                    h.h += m;
                    h.h >= h.o + h._b && (h.zb = h.h - h._b)
                }
        }
        function jb(h, m) {
            h.f += m;
            h.zb -= m;
            h.o -= m;
            h.h -= m
        }
        function ua(h) {
            var m;
            ++h.k >= h.p && (h.k = 0);
            ++h.o;
            if (h.o > h.zb) {
                var u = h.f + h.o;
                if (u > h.H) {
                    var r = h.f + h.o - h.Bc;
                    0 < r && --r;
                    var t = h.f + h.h - r;
                    for (u = 0; t > u; ++u)
                        h.c[u] = h.c[r + u];
                    h.f -= r
                }
                qa(h)
            }
            1073741823 == h.o && (m = h.o - h.p,
            ra(h.L, 2 * h.p, m),
            ra(h.ub, h.rc, m),
            jb(h, m))
        }
        function ra(h, m, r) {
            var u;
            for (u = 0; m > u; ++u) {
                var w = h[u] || 0;
                r >= w ? w = 0 : w -= r;
                h[u] = w
            }
        }
        function ma(h, m) {
            var u, r, w, t, v, z, y, E, F, D;
            do {
                if (h.h >= h.o + h.ob)
                    var H = h.ob;
                else if (H = h.h - h.o,
                h.xb > H) {
                    ua(h);
                    continue
                }
                var K = h.o > h.p ? h.o - h.p : 0;
                var I = h.f + h.o;
                h.qb ? (D = fe[255 & h.c[I]] ^ 255 & h.c[I + 1],
                t = 1023 & D,
                h.ub[t] = h.o,
                D ^= (255 & h.c[I + 2]) << 8,
                v = 65535 & D,
                h.ub[1024 + v] = h.o,
                z = (D ^ fe[255 & h.c[I + 3]] << 5) & h.Ec) : z = 255 & h.c[I] ^ (255 & h.c[I + 1]) << 8;
                var G = h.ub[h.R + z];
                h.ub[h.R + z] = h.o;
                var L = (h.k << 1) + 1;
                var N = h.k << 1;
                var O = E = h.w;
                for (u = h.Fc; ; ) {
                    if (K >= G || 0 == u--) {
                        h.L[L] = h.L[N] = 0;
                        break
                    }
                    if (w = h.o - G,
                    r = (h.k >= w ? h.k - w : h.k - w + h.p) << 1,
                    F = h.f + G,
                    y = E > O ? O : E,
                    h.c[F + y] == h.c[I + y]) {
                        for (; ++y != H && h.c[F + y] == h.c[I + y]; )
                            ;
                        if (y == H) {
                            h.L[N] = h.L[r];
                            h.L[L] = h.L[r + 1];
                            break
                        }
                    }
                    (255 & h.c[I + y]) > (255 & h.c[F + y]) ? (h.L[N] = G,
                    N = r + 1,
                    G = h.L[N],
                    E = y) : (h.L[L] = G,
                    L = r,
                    G = h.L[L],
                    O = y)
                }
                ua(h)
            } while (0 != --m)
        }
        function pa(h) {
            var m = h.o - h.h;
            if (m) {
                var u = h.cc;
                Ya(h.Lb, h.h, u.Mc, u.Yb, m);
                u.Yb += m;
                h.o >= h.M && (h.o = 0);
                h.h = h.o
            }
        }
        function $a(h, m) {
            m = h.o - m - 1;
            return 0 > m && (m += h.M),
            h.Lb[m]
        }
        function ca(h) {
            return h -= 2,
            4 > h ? h : 3
        }
        function za(h) {
            return 4 > h ? 0 : 10 > h ? h - 3 : h - 6
        }
        function hb(h) {
            if (!h.zc)
                throw Error("bad state");
            if (h.cb) {
                a: {
                    var m = h.cb, u = h.cb.Xb, v = h.cb.uc, z = h.cb.Kc, y, D;
                    u[0] = Xa;
                    v[0] = Xa;
                    z[0] = 1;
                    if (m.oc) {
                        m.b.cc = m.oc;
                        var I = m.b;
                        I.f = 0;
                        I.o = 0;
                        I.h = 0;
                        I.T = 0;
                        qa(I);
                        I.k = 0;
                        jb(I, -1);
                        m.W = 1;
                        m.oc = null
                    }
                    if (!m.pc) {
                        m.pc = 1;
                        var G = I = m.g;
                        if (G[0] == Xa[0] && G[1] == Xa[1]) {
                            if (!nb(m.b)) {
                                mb(m, V(m.g));
                                break a
                            }
                            Pa(m);
                            var L = V(m.g) & m.y;
                            gb(m.d, m.C, (m.l << 4) + L, 0);
                            m.l = za(m.l);
                            G = Ab(m.b, -m.s);
                            P(K(m.A, V(m.g), m.J), m.d, G);
                            m.J = G;
                            --m.s;
                            m.g = t(m.g, Re)
                        }
                        if (nb(m.b))
                            for (; ; ) {
                                if (y = db(m, V(m.g)),
                                D = m.mb,
                                L = V(m.g) & m.y,
                                G = (m.l << 4) + L,
                                1 == y && -1 == D) {
                                    gb(m.d, m.C, G, 0);
                                    G = Ab(m.b, -m.s);
                                    var N = K(m.A, V(m.g), m.J);
                                    if (7 > m.l)
                                        P(N, m.d, G);
                                    else {
                                        var U = Ab(m.b, -m.v[0] - 1 - m.s);
                                        var T = void 0;
                                        var W;
                                        var ma = m.d;
                                        var ua = U
                                          , va = G
                                          , Fa = 1
                                          , ra = 1;
                                        for (W = 7; 0 <= W; --W) {
                                            var Ga = va >> W & 1;
                                            U = ra;
                                            Fa && (T = ua >> W & 1,
                                            U += 1 + T << 8,
                                            Fa = T == Ga);
                                            gb(ma, N.tb, U, Ga);
                                            ra = ra << 1 | Ga
                                        }
                                    }
                                    m.J = G;
                                    m.l = za(m.l)
                                } else {
                                    if (gb(m.d, m.C, G, 1),
                                    4 > D) {
                                        if (gb(m.d, m.bb, m.l, 1),
                                        D ? (gb(m.d, m.hb, m.l, 1),
                                        1 == D ? gb(m.d, m.Ub, m.l, 0) : (gb(m.d, m.Ub, m.l, 1),
                                        gb(m.d, m.vc, m.l, D - 2))) : (gb(m.d, m.hb, m.l, 0),
                                        1 == y ? gb(m.d, m._, G, 0) : gb(m.d, m._, G, 1)),
                                        1 == y ? m.l = 7 > m.l ? 9 : 11 : (Aa(m.i, m.d, y - 2, L),
                                        m.l = 7 > m.l ? 8 : 11),
                                        G = m.v[D],
                                        0 != D) {
                                            for (T = D; 1 <= T; --T)
                                                m.v[T] = m.v[T - 1];
                                            m.v[0] = G
                                        }
                                    } else {
                                        gb(m.d, m.bb, m.l, 0);
                                        m.l = 7 > m.l ? 7 : 10;
                                        Aa(m.$, m.d, y - 2, L);
                                        D -= 4;
                                        T = S(D);
                                        G = ca(y);
                                        da(m.K[G], m.d, T);
                                        if (4 <= T)
                                            if (ma = (T >> 1) - 1,
                                            N = (2 | 1 & T) << ma,
                                            U = D - N,
                                            14 > T)
                                                for (G = m.Sb,
                                                T = N - T - 1,
                                                N = m.d,
                                                Ga = U,
                                                ua = 1,
                                                U = 0; ma > U; ++U)
                                                    W = 1 & Ga,
                                                    gb(N, G, T + ua, W),
                                                    ua = ua << 1 | W,
                                                    Ga >>= 1;
                                            else
                                                Yc(m.d, U >> 4, ma - 4),
                                                la(m.S, m.d, 15 & U),
                                                ++m.Qb;
                                        G = D;
                                        for (T = 3; 1 <= T; --T)
                                            m.v[T] = m.v[T - 1];
                                        m.v[0] = G;
                                        ++m.Mb
                                    }
                                    m.J = Ab(m.b, y - 1 - m.s)
                                }
                                if (m.s -= y,
                                m.g = t(m.g, O(y)),
                                !m.s) {
                                    128 <= m.Mb && E(m);
                                    16 <= m.Qb && Q(m);
                                    u[0] = m.g;
                                    G = m.d;
                                    G = t(t(O(G.Jb), G.mc), [4, 0]);
                                    if (v[0] = G,
                                    !nb(m.b)) {
                                        mb(m, V(m.g));
                                        break a
                                    }
                                    G = m.g;
                                    G = F(G[0] - I[0], G[1] - I[1]);
                                    if (0 <= H(G, [4096, 0])) {
                                        m.pc = 0;
                                        z[0] = 0;
                                        break a
                                    }
                                }
                            }
                        else
                            mb(m, V(m.g))
                    }
                }
                h.Pb = h.cb.Xb[0];
                h.cb.Kc[0] && (y = h.cb,
                ka(y),
                y.d.Ab = null,
                h.zc = 0)
            } else {
                a: {
                    y = h.Z;
                    if (T = V(y.g) & y.Dc,
                    Xb(y.e, y.Gb, (y.U << 4) + T)) {
                        if (Xb(y.e, y.Zb, y.U))
                            m = 0,
                            Xb(y.e, y.Cb, y.U) ? (Xb(y.e, y.Db, y.U) ? (Xb(y.e, y.Eb, y.U) ? (G = y.Qc,
                            y.Qc = y.Ic) : G = y.Ic,
                            y.Ic = y.Jc) : G = y.Jc,
                            y.Jc = y.ib,
                            y.ib = G) : Xb(y.e, y.pb, (y.U << 4) + T) || (y.U = 7 > y.U ? 9 : 11,
                            m = 1),
                            m || (m = fb(y.sb, y.e, T) + 2,
                            y.U = 7 > y.U ? 8 : 11);
                        else if (y.Qc = y.Ic,
                        y.Ic = y.Jc,
                        y.Jc = y.ib,
                        m = 2 + fb(y.Rb, y.e, T),
                        y.U = 7 > y.U ? 7 : 10,
                        I = ab(y.kb[ca(m)], y.e),
                        4 <= I)
                            if (u = (I >> 1) - 1,
                            y.ib = (2 | 1 & I) << u,
                            14 > I) {
                                D = y.ib;
                                L = y.kc;
                                v = y.ib - I - 1;
                                z = y.e;
                                T = 1;
                                for (G = N = 0; u > G; ++G)
                                    I = Xb(z, L, v + T),
                                    T <<= 1,
                                    T += I,
                                    N |= I << G;
                                y.ib = D + N
                            } else {
                                D = y.ib;
                                L = y.e;
                                v = 0;
                                for (u -= 4; 0 != u; --u)
                                    L.E >>>= 1,
                                    z = L.Bb - L.E >>> 31,
                                    L.Bb -= L.E & z - 1,
                                    v = v << 1 | 1 - z,
                                    -16777216 & L.E || (L.Bb = L.Bb << 8 | r(L.Ab),
                                    L.E <<= 8);
                                y.ib = D + (v << 4);
                                D = y.ib;
                                L = y.Fb;
                                u = y.e;
                                I = 1;
                                for (z = G = 0; L.F > z; ++z)
                                    v = Xb(u, L.G, I),
                                    I <<= 1,
                                    I += v,
                                    G |= v << z;
                                if (y.ib = D + G,
                                0 > y.ib) {
                                    y = -1 == y.ib ? 1 : -1;
                                    break a
                                }
                            }
                        else
                            y.ib = I;
                        if (0 <= H(O(y.ib), y.g) || y.ib >= y.nb) {
                            y = -1;
                            break a
                        }
                        D = y.B;
                        L = m;
                        u = D.o - y.ib - 1;
                        for (0 > u && (u += D.M); 0 != L; --L)
                            u >= D.M && (u = 0),
                            D.Lb[D.o++] = D.Lb[u++],
                            D.o >= D.M && pa(D);
                        y.g = t(y.g, O(m));
                        y.jc = $a(y.B, 0)
                    } else {
                        D = y.gb;
                        L = V(y.g);
                        D = D.V[((L & D.qc) << D.u) + ((255 & y.jc) >>> 8 - D.u)];
                        if (7 > y.U) {
                            L = y.e;
                            m = 1;
                            do
                                m = m << 1 | Xb(L, D.Ib, m);
                            while (256 > m);
                            D = m << 24 >> 24
                        } else {
                            L = y.e;
                            m = $a(y.B, y.ib);
                            u = 1;
                            do
                                if (z = m >> 7 & 1,
                                m <<= 1,
                                v = Xb(L, D.Ib, (1 + z << 8) + u),
                                u = u << 1 | v,
                                z != v) {
                                    for (; 256 > u; )
                                        u = u << 1 | Xb(L, D.Ib, u);
                                    break
                                }
                            while (256 > u);
                            D = u << 24 >> 24
                        }
                        y.jc = D;
                        D = y.B;
                        L = y.jc;
                        D.Lb[D.o++] = L;
                        D.o >= D.M && pa(D);
                        y.U = za(y.U);
                        y.g = t(y.g, Re)
                    }
                    y = 0
                }
                if (-1 == y)
                    throw Error("corrupted input");
                h.Pb = fc;
                h.Pc = h.Z.g;
                if (y || 0 <= H(h.Z.Nc, Xa) && 0 <= H(h.Z.g, h.Z.Nc))
                    pa(h.Z.B),
                    y = h.Z.B,
                    pa(y),
                    y.cc = null,
                    h.Z.e.Ab = null,
                    h.zc = 0
            }
            return h.zc
        }
        function T(h, m) {
            for (; m > h.O; ++h.O)
                h.ec[h.O] = z({}, 3),
                h.hc[h.O] = z({}, 3)
        }
        function fb(h, m, r) {
            return Xb(m, h.wc, 0) ? 8 + (Xb(m, h.wc, 1) ? 8 + ab(h.tc, m) : ab(h.hc[r], m)) : ab(h.ec[r], m)
        }
        function Fc(h) {
            return h.wc = L(2),
            h.ec = L(16),
            h.hc = L(16),
            h.tc = z({}, 8),
            h.O = 0,
            h
        }
        function vc(h) {
            ib(h.wc);
            for (var m = 0; h.O > m; ++m)
                ib(h.ec[m].G),
                ib(h.hc[m].G);
            ib(h.tc.G)
        }
        function Ta(h, m) {
            h.jb = m;
            var u = h.a[m].r;
            var r = h.a[m].j;
            do {
                if (h.a[m].t) {
                    var w = h.a[u];
                    w.j = -1;
                    w.t = 0;
                    h.a[u].r = u - 1;
                    h.a[m].Ac && (h.a[u - 1].t = 0,
                    h.a[u - 1].r = h.a[m].r2,
                    h.a[u - 1].j = h.a[m].j2)
                }
                var t = u;
                w = r;
                r = h.a[t].j;
                u = h.a[t].r;
                h.a[t].j = w;
                h.a[t].r = m;
                m = t
            } while (0 < m);
            return h.mb = h.a[0].j,
            h.q = h.a[0].r
        }
        function Q(h) {
            for (var m = 0; 16 > m; ++m) {
                var u = h.nc, r = m, t, v = h.S, y = m, z = 1, E = 0;
                for (t = v.F; 0 != t; --t) {
                    var D = 1 & y;
                    y >>>= 1;
                    E += Uc(v.G[z], D);
                    z = z << 1 | D
                }
                u[r] = E
            }
            h.Qb = 0
        }
        function E(h) {
            var m;
            for (m = 4; 128 > m; ++m) {
                var u = S(m);
                var r = (u >> 1) - 1;
                var t = (2 | 1 & u) << r;
                var v = h.yc;
                for (var y = m, z, E = m - t, D = 1, F = 0; 0 != r; --r)
                    z = 1 & E,
                    E >>>= 1,
                    F += Bb[(2047 & (h.Sb[t - u - 1 + D] - z ^ -z)) >>> 2],
                    D = D << 1 | z;
                v[y] = F
            }
            for (t = 0; 4 > t; ++t) {
                m = h.K[t];
                v = t << 6;
                for (u = 0; h.$b > u; ++u)
                    h.P[v + u] = Nc(m, u);
                for (u = 14; h.$b > u; ++u)
                    h.P[v + u] += (u >> 1) - 1 - 4 << 6;
                u = 128 * t;
                for (m = 0; 4 > m; ++m)
                    h.lb[u + m] = h.P[v + m];
                for (; 128 > m; ++m)
                    h.lb[u + m] = h.P[v + S(m)] + h.yc[m]
            }
            h.Mb = 0
        }
        function mb(h, m) {
            ka(h);
            m &= h.y;
            h.Gc && (gb(h.d, h.C, (h.l << 4) + m, 1),
            gb(h.d, h.bb, h.l, 0),
            h.l = 7 > h.l ? 7 : 10,
            Aa(h.$, h.d, 0, m),
            m = ca(2),
            da(h.K[m], h.d, 63),
            Yc(h.d, 67108863, 26),
            la(h.S, h.d, 15));
            for (m = 0; 5 > m; ++m)
                Ra(h.d)
        }
        function db(h, m) {
            var r, u, t, w, v, y, z, E, D, F, G, H, L, N, O, P, Q, S, T, U, V, W, ca, da, ka, la, qa, ua;
            if (h.jb != h.q)
                return F = h.a[h.q].r - h.q,
                h.mb = h.a[h.q].j,
                h.q = h.a[h.q].r,
                F;
            if (h.q = h.jb = 0,
            h.N ? (D = h.vb,
            h.N = 0) : D = Pa(h),
            F = h.D,
            Q = nb(h.b) + 1,
            2 > Q)
                return h.mb = -1,
                1;
            273 < Q && (Q = 273);
            for (y = z = 0; 4 > y; ++y)
                h.x[y] = h.v[y],
                h.Q[y] = Jb(h.b, -1, h.x[y], 273),
                h.Q[y] > h.Q[z] && (z = y);
            if (h.Q[z] >= h.n)
                return h.mb = z,
                F = h.Q[z],
                m = F - 1,
                0 < m && (ma(h.b, m),
                h.s += m),
                F;
            if (D >= h.n)
                return h.mb = h.m[F - 1] + 4,
                m = D - 1,
                0 < m && (ma(h.b, m),
                h.s += m),
                D;
            if (v = Ab(h.b, -1),
            N = Ab(h.b, -h.v[0] - 1 - 1),
            2 > D && v != N && 2 > h.Q[z])
                return h.mb = -1,
                1;
            h.a[0].Hc = h.l;
            var pa = m & h.y;
            h.a[1].z = Bb[h.C[(h.l << 4) + pa] >>> 2] + I(K(h.A, m, h.J), 7 <= h.l, N, v);
            var va = h.a[1];
            va.j = -1;
            va.t = 0;
            va = Bb[2048 - h.C[(h.l << 4) + pa] >>> 2];
            var Aa = va + Bb[2048 - h.bb[h.l] >>> 2];
            if (N == v) {
                var B = h.l;
                B = Aa + (Bb[h.hb[B] >>> 2] + Bb[h._[(B << 4) + pa] >>> 2]);
                h.a[1].z > B && (h.a[1].z = B,
                y = h.a[1],
                y.j = 0,
                y.t = 0)
            }
            if (E = D >= h.Q[z] ? D : h.Q[z],
            2 > E)
                return h.mb = h.a[1].j,
                1;
            h.a[1].r = 0;
            h.a[0].bc = h.x[0];
            h.a[0].ac = h.x[1];
            h.a[0].dc = h.x[2];
            h.a[0].lc = h.x[3];
            z = E;
            do
                h.a[z--].z = 268435455;
            while (2 <= z);
            for (y = 0; 4 > y; ++y)
                if (L = h.Q[y],
                !(2 > L)) {
                    var Ca = Aa + Ga(h, y, h.l, pa);
                    do {
                        var ra = Ca + h.i.Cc[272 * pa + (L - 2)];
                        var ha = h.a[L];
                        ha.z > ra && (ha.z = ra,
                        ha.r = 0,
                        ha.j = y,
                        ha.t = 0)
                    } while (2 <= --L)
                }
            if (L = va + Bb[h.bb[h.l] >>> 2],
            z = 2 <= h.Q[0] ? h.Q[0] + 1 : 2,
            D >= z) {
                for (D = 0; z > h.m[D]; )
                    D += 2;
                for (; r = h.m[D + 1],
                ra = L + Fa(h, r, z, pa),
                ha = h.a[z],
                ha.z > ra && (ha.z = ra,
                ha.r = 0,
                ha.j = r + 4,
                ha.t = 0),
                z != h.m[D] || (D += 2,
                D != F); ++z)
                    ;
            }
            for (r = 0; ; ) {
                if (++r,
                r == E)
                    return Ta(h, r);
                if (O = Pa(h),
                F = h.D,
                O >= h.n)
                    return h.vb = O,
                    h.N = 1,
                    Ta(h, r);
                if (++m,
                V = h.a[r].r,
                h.a[r].t ? (--V,
                h.a[r].Ac ? (W = h.a[h.a[r].r2].Hc,
                W = 4 > h.a[r].j2 ? 7 > W ? 8 : 11 : 7 > W ? 7 : 10) : W = h.a[V].Hc,
                W = za(W)) : W = h.a[V].Hc,
                V == r - 1 ? W = h.a[r].j ? za(W) : 7 > W ? 9 : 11 : (h.a[r].t && h.a[r].Ac ? (V = h.a[r].r2,
                U = h.a[r].j2,
                W = 7 > W ? 8 : 11) : (U = h.a[r].j,
                W = 4 > U ? 7 > W ? 8 : 11 : 7 > W ? 7 : 10),
                T = h.a[V],
                4 > U ? U ? 1 == U ? (h.x[0] = T.ac,
                h.x[1] = T.bc,
                h.x[2] = T.dc,
                h.x[3] = T.lc) : 2 == U ? (h.x[0] = T.dc,
                h.x[1] = T.bc,
                h.x[2] = T.ac,
                h.x[3] = T.lc) : (h.x[0] = T.lc,
                h.x[1] = T.bc,
                h.x[2] = T.ac,
                h.x[3] = T.dc) : (h.x[0] = T.bc,
                h.x[1] = T.ac,
                h.x[2] = T.dc,
                h.x[3] = T.lc) : (h.x[0] = U - 4,
                h.x[1] = T.bc,
                h.x[2] = T.ac,
                h.x[3] = T.dc)),
                h.a[r].Hc = W,
                h.a[r].bc = h.x[0],
                h.a[r].ac = h.x[1],
                h.a[r].dc = h.x[2],
                h.a[r].lc = h.x[3],
                w = h.a[r].z,
                v = Ab(h.b, -1),
                N = Ab(h.b, -h.x[0] - 1 - 1),
                pa = m & h.y,
                u = w + Bb[h.C[(W << 4) + pa] >>> 2] + I(K(h.A, m, Ab(h.b, -2)), 7 <= W, N, v),
                P = h.a[r + 1],
                D = 0,
                P.z > u && (P.z = u,
                P.r = r,
                P.j = -1,
                P.t = 0,
                D = 1),
                va = w + Bb[2048 - h.C[(W << 4) + pa] >>> 2],
                Aa = va + Bb[2048 - h.bb[W] >>> 2],
                N != v || r > P.r && !P.j || (B = Aa + (Bb[h.hb[W] >>> 2] + Bb[h._[(W << 4) + pa] >>> 2]),
                P.z >= B && (P.z = B,
                P.r = r,
                P.j = 0,
                P.t = 0,
                D = 1)),
                S = nb(h.b) + 1,
                S = S > 4095 - r ? 4095 - r : S,
                Q = S,
                !(2 > Q)) {
                    if (Q > h.n && (Q = h.n),
                    !D && N != v && (ca = Math.min(S - 1, h.n),
                    H = Jb(h.b, 0, h.x[0], ca),
                    2 <= H)) {
                        y = za(W);
                        ha = m + 1 & h.y;
                        ra = u + Bb[2048 - h.C[(y << 4) + ha] >>> 2] + Bb[2048 - h.bb[y] >>> 2];
                        for (Ca = r + 1 + H; Ca > E; )
                            h.a[++E].z = 268435455;
                        ra += (da = h.i.Cc[272 * ha + (H - 2)],
                        da + Ga(h, 0, y, ha));
                        ha = h.a[Ca];
                        ha.z > ra && (ha.z = ra,
                        ha.r = r + 1,
                        ha.j = 0,
                        ha.t = 1,
                        ha.Ac = 0)
                    }
                    z = 2;
                    for (D = 0; 4 > D; ++D)
                        if (G = Jb(h.b, -1, h.x[D], Q),
                        !(2 > G)) {
                            L = G;
                            do {
                                for (; r + G > E; )
                                    h.a[++E].z = 268435455;
                                ra = Aa + (ka = h.i.Cc[272 * pa + (G - 2)],
                                ka + Ga(h, D, W, pa));
                                ha = h.a[r + G];
                                ha.z > ra && (ha.z = ra,
                                ha.r = r,
                                ha.j = D,
                                ha.t = 0)
                            } while (2 <= --G);
                            if (G = L,
                            D || (z = G + 1),
                            S > G && (ca = Math.min(S - 1 - G, h.n),
                            H = Jb(h.b, G, h.x[D], ca),
                            2 <= H)) {
                                y = 7 > W ? 8 : 11;
                                ha = m + G & h.y;
                                ra = Aa + (la = h.i.Cc[272 * pa + (G - 2)],
                                la + Ga(h, D, W, pa)) + Bb[h.C[(y << 4) + ha] >>> 2] + I(K(h.A, m + G, Ab(h.b, G - 1 - 1)), 1, Ab(h.b, G - 1 - (h.x[D] + 1)), Ab(h.b, G - 1));
                                y = za(y);
                                ha = m + G + 1 & h.y;
                                ra += Bb[2048 - h.C[(y << 4) + ha] >>> 2];
                                ra += Bb[2048 - h.bb[y] >>> 2];
                                for (Ca = G + 1 + H; r + Ca > E; )
                                    h.a[++E].z = 268435455;
                                ra += (qa = h.i.Cc[272 * ha + (H - 2)],
                                qa + Ga(h, 0, y, ha));
                                ha = h.a[r + Ca];
                                ha.z > ra && (ha.z = ra,
                                ha.r = r + G + 1,
                                ha.j = 0,
                                ha.t = 1,
                                ha.Ac = 1,
                                ha.r2 = r,
                                ha.j2 = D)
                            }
                        }
                    if (O > Q) {
                        O = Q;
                        for (F = 0; O > h.m[F]; F += 2)
                            ;
                        h.m[F] = O;
                        F += 2
                    }
                    if (O >= z) {
                        for (L = va + Bb[h.bb[W] >>> 2]; r + O > E; )
                            h.a[++E].z = 268435455;
                        for (D = 0; z > h.m[D]; )
                            D += 2;
                        for (G = z; ; ++G)
                            if (t = h.m[D + 1],
                            ra = L + Fa(h, t, G, pa),
                            ha = h.a[r + G],
                            ha.z > ra && (ha.z = ra,
                            ha.r = r,
                            ha.j = t + 4,
                            ha.t = 0),
                            G == h.m[D]) {
                                if (S > G && (ca = Math.min(S - 1 - G, h.n),
                                H = Jb(h.b, G, t, ca),
                                2 <= H)) {
                                    y = 7 > W ? 7 : 10;
                                    ha = m + G & h.y;
                                    ra = ra + Bb[h.C[(y << 4) + ha] >>> 2] + I(K(h.A, m + G, Ab(h.b, G - 1 - 1)), 1, Ab(h.b, G - (t + 1) - 1), Ab(h.b, G - 1));
                                    y = za(y);
                                    ha = m + G + 1 & h.y;
                                    ra += Bb[2048 - h.C[(y << 4) + ha] >>> 2];
                                    ra += Bb[2048 - h.bb[y] >>> 2];
                                    for (Ca = G + 1 + H; r + Ca > E; )
                                        h.a[++E].z = 268435455;
                                    ra += (ua = h.i.Cc[272 * ha + (H - 2)],
                                    ua + Ga(h, 0, y, ha));
                                    ha = h.a[r + Ca];
                                    ha.z > ra && (ha.z = ra,
                                    ha.r = r + G + 1,
                                    ha.j = 0,
                                    ha.t = 1,
                                    ha.Ac = 1,
                                    ha.r2 = r,
                                    ha.j2 = t + 4)
                                }
                                if (D += 2,
                                D == F)
                                    break
                            }
                    }
                }
            }
        }
        function Fa(h, m, r, t) {
            var u, w = ca(r);
            return u = 128 > m ? h.lb[128 * w + m] : h.P[(w << 6) + (131072 > m ? jd[m >> 6] + 12 : 134217728 > m ? jd[m >> 16] + 32 : jd[m >> 26] + 52)] + h.nc[15 & m],
            u + h.$.Cc[272 * t + (r - 2)]
        }
        function Ga(h, m, r, t) {
            var u;
            return m ? (u = Bb[2048 - h.hb[r] >>> 2],
            1 == m ? u += Bb[h.Ub[r] >>> 2] : (u += Bb[2048 - h.Ub[r] >>> 2],
            u += Uc(h.vc[r], m - 2))) : (u = Bb[h.hb[r] >>> 2],
            u += Bb[2048 - h._[(r << 4) + t] >>> 2]),
            u
        }
        function Pa(h) {
            var m = 0;
            a: {
                var r = h.b;
                var u = h.m, t, v, y, z, D, E, F, G;
                if (r.h >= r.o + r.ob)
                    var H = r.ob;
                else if (H = r.h - r.o,
                r.xb > H) {
                    r = (ua(r),
                    0);
                    break a
                }
                var I = 0;
                var K = r.o > r.p ? r.o - r.p : 0;
                var L = r.f + r.o;
                var N = 1;
                var O = D = 0;
                r.qb ? (v = fe[255 & r.c[L]] ^ 255 & r.c[L + 1],
                D = 1023 & v,
                v ^= (255 & r.c[L + 2]) << 8,
                O = 65535 & v,
                E = (v ^ fe[255 & r.c[L + 3]] << 5) & r.Ec) : E = 255 & r.c[L] ^ (255 & r.c[L + 1]) << 8;
                v = r.ub[r.R + E] || 0;
                r.qb && (t = r.ub[D] || 0,
                y = r.ub[1024 + O] || 0,
                r.ub[D] = r.o,
                r.ub[1024 + O] = r.o,
                t > K && r.c[r.f + t] == r.c[L] && (u[I++] = N = 2,
                u[I++] = r.o - t - 1),
                y > K && r.c[r.f + y] == r.c[L] && (y == t && (I -= 2),
                u[I++] = N = 3,
                u[I++] = r.o - y - 1,
                t = y),
                0 != I && t == v && (I -= 2,
                N = 1));
                r.ub[r.R + E] = r.o;
                E = (r.k << 1) + 1;
                var P = r.k << 1;
                D = O = r.w;
                0 != r.w && v > K && r.c[r.f + v + r.w] != r.c[L + r.w] && (u[I++] = N = r.w,
                u[I++] = r.o - v - 1);
                for (t = r.Fc; ; ) {
                    if (K >= v || 0 == t--) {
                        r.L[E] = r.L[P] = 0;
                        break
                    }
                    if (z = r.o - v,
                    y = (r.k >= z ? r.k - z : r.k - z + r.p) << 1,
                    G = r.f + v,
                    F = O > D ? D : O,
                    r.c[G + F] == r.c[L + F]) {
                        for (; ++F != H && r.c[G + F] == r.c[L + F]; )
                            ;
                        if (F > N && (u[I++] = N = F,
                        u[I++] = z - 1,
                        F == H)) {
                            r.L[P] = r.L[y];
                            r.L[E] = r.L[y + 1];
                            break
                        }
                    }
                    (255 & r.c[L + F]) > (255 & r.c[G + F]) ? (r.L[P] = v,
                    P = y + 1,
                    v = r.L[P],
                    O = F) : (r.L[E] = v,
                    E = y,
                    v = r.L[E],
                    D = F)
                }
                r = (ua(r),
                I)
            }
            return h.D = r,
            0 < h.D && (m = h.m[h.D - 2],
            m == h.n && (m += Jb(h.b, m - 1, h.m[h.D - 1], 273 - m))),
            ++h.s,
            m
        }
        function ka(h) {
            h.b && h.W && (h.b.cc = null,
            h.W = 0)
        }
        function S(h) {
            return 2048 > h ? jd[h] : 2097152 > h ? jd[h >> 10] + 20 : jd[h >> 20] + 40
        }
        function U(h, m) {
            ib(h.db);
            for (var r = 0; m > r; ++r)
                ib(h.Vb[r].G),
                ib(h.Wb[r].G);
            ib(h.ic.G)
        }
        function gd(h, m, r, t, v) {
            var u;
            var w = Bb[h.db[0] >>> 2];
            var y = Bb[2048 - h.db[0] >>> 2];
            var z = y + Bb[h.db[1] >>> 2];
            y += Bb[2048 - h.db[1] >>> 2];
            for (u = 0; 8 > u; ++u) {
                if (u >= r)
                    return;
                t[v + u] = w + Nc(h.Vb[m], u)
            }
            for (; 16 > u; ++u) {
                if (u >= r)
                    return;
                t[v + u] = z + Nc(h.Wb[m], u - 8)
            }
            for (; r > u; ++u)
                t[v + u] = y + Nc(h.ic, u - 8 - 8)
        }
        function Aa(h, m, r, t) {
            8 > r ? (gb(m, h.db, 0, 0),
            da(h.Vb[t], m, r)) : (r -= 8,
            gb(m, h.db, 0, 1),
            8 > r ? (gb(m, h.db, 1, 0),
            da(h.Wb[t], m, r)) : (gb(m, h.db, 1, 1),
            da(h.ic, m, r - 8)));
            0 == --h.sc[t] && (gd(h, t, h.rb, h.Cc, 272 * t),
            h.sc[t] = h.rb)
        }
        function G(h) {
            h.db = L(2);
            h.Vb = L(16);
            h.Wb = L(16);
            h.ic = eb({}, 8);
            for (var m = 0; 16 > m; ++m)
                h.Vb[m] = eb({}, 3),
                h.Wb[m] = eb({}, 3);
            return h.Cc = [],
            h.sc = [],
            h
        }
        function vb(h, m) {
            for (var r = 0; m > r; ++r)
                gd(h, r, h.rb, h.Cc, 272 * r),
                h.sc[r] = h.rb
        }
        function K(h, m, r) {
            return h.V[((m & h.qc) << h.u) + ((255 & r) >>> 8 - h.u)]
        }
        function P(h, m, r) {
            var u, t = 1;
            for (u = 7; 0 <= u; --u) {
                var w = r >> u & 1;
                gb(m, h.tb, t, w);
                t = t << 1 | w
            }
        }
        function I(h, m, r, t) {
            var u, w, v = 1, y = 7, z = 0;
            if (m)
                for (; 0 <= y; --y)
                    if (w = r >> y & 1,
                    u = t >> y & 1,
                    z += Uc(h.tb[(1 + w << 8) + v], u),
                    v = v << 1 | u,
                    w != u) {
                        --y;
                        break
                    }
            for (; 0 <= y; --y)
                u = t >> y & 1,
                z += Uc(h.tb[v], u),
                v = v << 1 | u;
            return z
        }
        function z(h, m) {
            return h.F = m,
            h.G = L(1 << m),
            h
        }
        function ab(h, m) {
            var r, u = 1;
            for (r = h.F; 0 != r; --r)
                u = (u << 1) + Xb(m, h.G, u);
            return u - (1 << h.F)
        }
        function eb(h, m) {
            return h.F = m,
            h.G = L(1 << m),
            h
        }
        function da(h, m, r) {
            var u, t = 1;
            for (u = h.F; 0 != u; ) {
                --u;
                var w = r >>> u & 1;
                gb(m, h.G, t, w);
                t = t << 1 | w
            }
        }
        function Nc(h, m) {
            var r, u = 1, t = 0;
            for (r = h.F; 0 != r; ) {
                --r;
                var w = m >>> r & 1;
                t += Uc(h.G[u], w);
                u = (u << 1) + w
            }
            return t
        }
        function la(h, m, r) {
            var u, t = 1;
            for (u = 0; h.F > u; ++u) {
                var w = 1 & r;
                gb(m, h.G, t, w);
                t = t << 1 | w;
                r >>= 1
            }
        }
        function Xb(h, m, t) {
            var u, w = m[t];
            return u = (h.E >>> 11) * w,
            (-2147483648 ^ u) > (-2147483648 ^ h.Bb) ? (h.E = u,
            m[t] = w + (2048 - w >>> 5) << 16 >> 16,
            -16777216 & h.E || (h.Bb = h.Bb << 8 | r(h.Ab),
            h.E <<= 8),
            0) : (h.E -= u,
            h.Bb -= u,
            m[t] = w - (w >>> 5) << 16 >> 16,
            -16777216 & h.E || (h.Bb = h.Bb << 8 | r(h.Ab),
            h.E <<= 8),
            1)
        }
        function ib(h) {
            for (var m = h.length - 1; 0 <= m; --m)
                h[m] = 1024
        }
        function gb(h, m, r, v) {
            var u = m[r];
            var w = (h.E >>> 11) * u;
            v ? (h.xc = t(h.xc, y(O(w), [4294967295, 0])),
            h.E -= w,
            m[r] = u - (u >>> 5) << 16 >> 16) : (h.E = w,
            m[r] = u + (2048 - u >>> 5) << 16 >> 16);
            -16777216 & h.E || (h.E <<= 8,
            Ra(h))
        }
        function Yc(h, m, r) {
            for (--r; 0 <= r; --r)
                h.E >>>= 1,
                1 == (m >>> r & 1) && (h.xc = t(h.xc, O(h.E))),
                -16777216 & h.E || (h.E <<= 8,
                Ra(h))
        }
        function Ra(h) {
            var r = h.xc;
            var u = 32, v;
            r = (u &= 63,
            v = m(r, u),
            0 > r[1] && (v = t(v, W([2, 0], 63 - u))),
            v);
            u = V(r);
            if (0 != u || 0 > H(h.xc, [4278190080, 0])) {
                h.mc = t(h.mc, O(h.Jb));
                r = h.Oc;
                do
                    v = h.Ab,
                    r += u,
                    v.Mc[v.Yb++] = r << 24 >> 24,
                    r = 255;
                while (0 != --h.Jb);
                h.Oc = V(h.xc) >>> 24
            }
            ++h.Jb;
            h.xc = W(y(h.xc, [16777215, 0]), 8)
        }
        function Uc(h, m) {
            return Bb[(2047 & (h - m ^ -m)) >>> 2]
        }
        function hd(h) {
            for (var m, r, u, t = 0, v = 0, y = h.length, z = [], D = []; y > t; ++t,
            ++v) {
                if (m = 255 & h[t],
                128 & m)
                    if (192 == (224 & m)) {
                        if (t + 1 >= y || (r = 255 & h[++t],
                        128 != (192 & r)))
                            return h;
                        D[v] = (31 & m) << 6 | 63 & r
                    } else {
                        if (224 != (240 & m) || t + 2 >= y || (r = 255 & h[++t],
                        128 != (192 & r)) || (u = 255 & h[++t],
                        128 != (192 & u)))
                            return h;
                        D[v] = (15 & m) << 12 | (63 & r) << 6 | 63 & u
                    }
                else {
                    if (!m)
                        return h;
                    D[v] = m
                }
                16383 == v && (z.push(String.fromCharCode.apply(String, D)),
                v = -1)
            }
            return 0 < v && (D.length = v,
            z.push(String.fromCharCode.apply(String, D))),
            z.join("")
        }
        function Qe(h) {
            var m, r, u = [], t = 0, v = h.length;
            if ("object" == typeof h)
                return h;
            for (r = m = 0; v > r; ++r)
                u[m++] = h.charCodeAt(r);
            for (r = 0; v > r; ++r)
                h = u[r],
                1 <= h && 127 >= h ? ++t : t += !h || 128 <= h && 2047 >= h ? 2 : 3;
            m = [];
            for (r = t = 0; v > r; ++r)
                h = u[r],
                1 <= h && 127 >= h ? m[t++] = h << 24 >> 24 : !h || 128 <= h && 2047 >= h ? (m[t++] = (192 | h >> 6 & 31) << 24 >> 24,
                m[t++] = (128 | 63 & h) << 24 >> 24) : (m[t++] = (224 | h >> 12 & 15) << 24 >> 24,
                m[t++] = (128 | h >> 6 & 63) << 24 >> 24,
                m[t++] = (128 | 63 & h) << 24 >> 24);
            return m
        }
        function Zc(h) {
            return h[1] + h[0]
        }
        var Wd = "function" == typeof setImmediate ? setImmediate : setTimeout
          , wb = 4294967296
          , fc = [4294967295, -wb]
          , mf = [0, -9223372036854775808]
          , Xa = [0, 0]
          , Re = [1, 0]
          , fe = function() {
            var h, m, r = [];
            for (h = 0; 256 > h; ++h) {
                var t = h;
                for (m = 0; 8 > m; ++m)
                    0 != (1 & t) ? t = t >>> 1 ^ -306674912 : t >>>= 1;
                r[h] = t
            }
            return r
        }()
          , jd = function() {
            var h, m, r = 2, t = [0, 1];
            for (m = 2; 22 > m; ++m) {
                var v = 1 << (m >> 1) - 1;
                for (h = 0; v > h; ++h,
                ++r)
                    t[r] = m << 24 >> 24
            }
            return t
        }()
          , Bb = function() {
            var h, m, r = [];
            for (m = 8; 0 <= m; --m) {
                var t = 1 << 9 - m - 1;
                for (h = 1 << 9 - m; h > t; ++t)
                    r[t] = (m << 6) + (h - t << 6 >>> 9 - m - 1)
            }
            return r
        }()
          , pc = function() {
            var h = [{
                s: 16,
                f: 64,
                m: 0
            }, {
                s: 20,
                f: 64,
                m: 0
            }, {
                s: 19,
                f: 64,
                m: 1
            }, {
                s: 20,
                f: 64,
                m: 1
            }, {
                s: 21,
                f: 128,
                m: 1
            }, {
                s: 22,
                f: 128,
                m: 1
            }, {
                s: 23,
                f: 128,
                m: 1
            }, {
                s: 24,
                f: 255,
                m: 1
            }, {
                s: 25,
                f: 255,
                m: 1
            }];
            return function(m) {
                return h[m - 1] || h[6]
            }
        }();
        return "undefined" == typeof onmessage || "undefined" != typeof window && void 0 !== window.document || !function() {
            onmessage = function(h) {
                h && h.gc && (2 == h.gc.action ? e.decompress(h.gc.gc, h.gc.cbn) : 1 == h.gc.action && e.compress(h.gc.gc, h.gc.Rc, h.gc.cbn))
            }
        }(),
        {
            compress: function(h, m, r, t) {
                function u() {
                    try {
                        for (var h, m = (new Date).getTime(); hb(y.c.yb); )
                            if (v = Zc(y.c.yb.Pb) / Zc(y.c.Tb),
                            200 < (new Date).getTime() - m)
                                return t(v),
                                Wd(u, 0),
                                0;
                        t(1);
                        h = D(y.c.Nb);
                        Wd(r.bind(null, h), 0)
                    } catch (Se) {
                        r(null, Se)
                    }
                }
                var v, w, y = {}, z = void 0 === r && void 0 === t;
                if ("function" != typeof r && (w = r,
                r = t = 0),
                t = t || function(h) {
                    void 0 !== w && postMessage({
                        action: 3,
                        cbn: w,
                        result: h
                    })
                }
                ,
                r = r || function(h, m) {
                    return void 0 !== w ? postMessage({
                        action: 1,
                        cbn: w,
                        result: h,
                        error: m
                    }) : void 0
                }
                ,
                z) {
                    for (y.c = va({}, Qe(h), pc(m)); hb(y.c.yb); )
                        ;
                    return D(y.c.Nb)
                }
                try {
                    y.c = va({}, Qe(h), pc(m)),
                    t(0)
                } catch ($c) {
                    return r(null, $c)
                }
                Wd(u, 0)
            },
            decompress: function(h, m, r) {
                function t() {
                    try {
                        for (var h, v = 0, y = (new Date).getTime(); hb(w.d.yb); )
                            if (0 == ++v % 1E3 && 200 < (new Date).getTime() - y)
                                return C && (u = Zc(w.d.yb.Z.g) / z,
                                r(u)),
                                Wd(t, 0),
                                0;
                        r(1);
                        h = hd(D(w.d.Nb));
                        Wd(m.bind(null, h), 0)
                    } catch (Hc) {
                        m(null, Hc)
                    }
                }
                var u, v, w = {}, y = void 0 === m && void 0 === r;
                if ("function" != typeof m && (v = m,
                m = r = 0),
                r = r || function(h) {
                    void 0 !== v && postMessage({
                        action: 3,
                        cbn: v,
                        result: C ? h : -1
                    })
                }
                ,
                m = m || function(h, m) {
                    return void 0 !== v ? postMessage({
                        action: 2,
                        cbn: v,
                        result: h,
                        error: m
                    }) : void 0
                }
                ,
                y) {
                    for (w.d = Gb({}, h); hb(w.d.yb); )
                        ;
                    return hd(D(w.d.Nb))
                }
                try {
                    w.d = Gb({}, h);
                    var z = Zc(w.d.Tb);
                    var C = -1 < z;
                    r(0)
                } catch (qc) {
                    return m(null, qc)
                }
                Wd(t, 0)
            }
        }
    }();
    this.LZMA = this.LZMA_WORKER = e
}
if ("undefined" === typeof self || !self.constructor.name.includes("Worker")) {
    var saveAs = saveAs || function(L) {
        if (!("undefined" === typeof L || "undefined" !== typeof navigator && /MSIE [1-9]\./.test(navigator.userAgent))) {
            var t = L.document.createElementNS("http://www.w3.org/1999/xhtml", "a")
              , y = "download"in t
              , H = /constructor/i.test(L.HTMLElement) || L.safari
              , F = /CriOS\/[\d]+/.test(navigator.userAgent)
              , O = function(h) {
                (L.setImmediate || L.setTimeout)(function() {
                    throw h;
                }, 0)
            }
              , V = function(h) {
                setTimeout(function() {
                    "string" === typeof h ? (L.URL || L.webkitURL || L).revokeObjectURL(h) : h.remove()
                }, 4E4)
            }
              , v = function(h) {
                return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type) ? new Blob([String.fromCharCode(65279), h],{
                    type: h.type
                }) : h
            }
              , W = function(h, m, N) {
                N || (h = v(h));
                var r = this
                  , W = "application/octet-stream" === h.type
                  , va = function() {
                    var h = ["writestart", "progress", "write", "writeend"];
                    h = [].concat(h);
                    for (var m = h.length; m--; ) {
                        var t = r["on" + h[m]];
                        if ("function" === typeof t)
                            try {
                                t.call(r, r)
                            } catch (qa) {
                                O(qa)
                            }
                    }
                };
                r.readyState = r.INIT;
                if (y) {
                    var Gb = (L.URL || L.webkitURL || L).createObjectURL(h);
                    setTimeout(function() {
                        t.href = Gb;
                        t.download = m;
                        var h = new MouseEvent("click");
                        t.dispatchEvent(h);
                        va();
                        V(Gb);
                        r.readyState = r.DONE
                    })
                } else
                    (function() {
                        if ((F || W && H) && L.FileReader) {
                            var m = new FileReader;
                            m.onloadend = function() {
                                var h = F ? m.result : m.result.replace(/^data:[^;]*;/, "data:attachment/file;");
                                L.open(h, "_blank") || (L.location.href = h);
                                r.readyState = r.DONE;
                                va()
                            }
                            ;
                            m.readAsDataURL(h);
                            r.readyState = r.INIT
                        } else
                            Gb || (Gb = (L.URL || L.webkitURL || L).createObjectURL(h)),
                            W ? L.location.href = Gb : L.open(Gb, "_blank") || (L.location.href = Gb),
                            r.readyState = r.DONE,
                            va(),
                            V(Gb)
                    }
                    )()
            }
              , m = W.prototype;
            if ("undefined" !== typeof navigator && navigator.msSaveOrOpenBlob)
                return function(h, m, t) {
                    m = m || h.name || "download";
                    t || (h = v(h));
                    return navigator.msSaveOrOpenBlob(h, m)
                }
                ;
            m.abort = function() {}
            ;
            m.readyState = m.INIT = 0;
            m.WRITING = 1;
            m.DONE = 2;
            m.error = m.onwritestart = m.onprogress = m.onwrite = m.onabort = m.onerror = m.onwriteend = null;
            return function(h, m, t) {
                return new W(h,m || h.name || "download",t)
            }
        }
    }("undefined" !== typeof self && self || "undefined" !== typeof window && window || this.content);
    "undefined" !== typeof module && module.exports ? module.exports.saveAs = saveAs : "undefined" !== typeof define && null !== define && null !== define.amd && define("FileSaver.js", function() {
        return saveAs
    })
}
"function" === typeof define && define.__amd && (define.amd = define.__amd,
delete define.__amd);
